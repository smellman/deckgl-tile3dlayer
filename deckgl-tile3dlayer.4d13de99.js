parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"YOwE":[function(require,module,exports) {
"use strict";var r=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,e=Object.prototype.propertyIsEnumerable;function n(r){if(null==r)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(r)}function o(){try{if(!Object.assign)return!1;var r=new String("abc");if(r[5]="de","5"===Object.getOwnPropertyNames(r)[0])return!1;for(var t={},e=0;e<10;e++)t["_"+String.fromCharCode(e)]=e;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(r){return t[r]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(r){n[r]=r}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(o){return!1}}module.exports=o()?Object.assign:function(o,c){for(var a,i,s=n(o),f=1;f<arguments.length;f++){for(var u in a=Object(arguments[f]))t.call(a,u)&&(s[u]=a[u]);if(r){i=r(a);for(var b=0;b<i.length;b++)e.call(a,i[b])&&(s[i[b]]=a[i[b]])}}return s};
},{}],"pyFg":[function(require,module,exports) {
"use strict";var e=require("object-assign"),t=60103,r=60106;exports.Fragment=60107,exports.StrictMode=60108,exports.Profiler=60114;var n=60109,o=60110,u=60112;exports.Suspense=60113;var s=60115,i=60116;if("function"==typeof Symbol&&Symbol.for){var f=Symbol.for;t=f("react.element"),r=f("react.portal"),exports.Fragment=f("react.fragment"),exports.StrictMode=f("react.strict_mode"),exports.Profiler=f("react.profiler"),n=f("react.provider"),o=f("react.context"),u=f("react.forward_ref"),exports.Suspense=f("react.suspense"),s=f("react.memo"),i=f("react.lazy")}var a="function"==typeof Symbol&&Symbol.iterator;function c(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=a&&e[a]||e["@@iterator"])?e:null}function p(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y={};function d(e,t,r){this.props=e,this.context=t,this.refs=y,this.updater=r||l}function v(){}function h(e,t,r){this.props=e,this.context=t,this.refs=y,this.updater=r||l}d.prototype.isReactComponent={},d.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(p(85));this.updater.enqueueSetState(this,e,t,"setState")},d.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=d.prototype;var _=h.prototype=new v;_.constructor=h,e(_,d.prototype),_.isPureReactComponent=!0;var x={current:null},m=Object.prototype.hasOwnProperty,b={key:!0,ref:!0,__self:!0,__source:!0};function S(e,r,n){var o,u={},s=null,i=null;if(null!=r)for(o in void 0!==r.ref&&(i=r.ref),void 0!==r.key&&(s=""+r.key),r)m.call(r,o)&&!b.hasOwnProperty(o)&&(u[o]=r[o]);var f=arguments.length-2;if(1===f)u.children=n;else if(1<f){for(var a=Array(f),c=0;c<f;c++)a[c]=arguments[c+2];u.children=a}if(e&&e.defaultProps)for(o in f=e.defaultProps)void 0===u[o]&&(u[o]=f[o]);return{$$typeof:t,type:e,key:s,ref:i,props:u,_owner:x.current}}function $(e,r){return{$$typeof:t,type:e.type,key:r,ref:e.ref,props:e.props,_owner:e._owner}}function w(e){return"object"==typeof e&&null!==e&&e.$$typeof===t}function g(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}var k=/\/+/g;function C(e,t){return"object"==typeof e&&null!==e&&null!=e.key?g(""+e.key):t.toString(36)}function E(e,n,o,u,s){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var f=!1;if(null===e)f=!0;else switch(i){case"string":case"number":f=!0;break;case"object":switch(e.$$typeof){case t:case r:f=!0}}if(f)return s=s(f=e),e=""===u?"."+C(f,0):u,Array.isArray(s)?(o="",null!=e&&(o=e.replace(k,"$&/")+"/"),E(s,n,o,"",function(e){return e})):null!=s&&(w(s)&&(s=$(s,o+(!s.key||f&&f.key===s.key?"":(""+s.key).replace(k,"$&/")+"/")+e)),n.push(s)),1;if(f=0,u=""===u?".":u+":",Array.isArray(e))for(var a=0;a<e.length;a++){var l=u+C(i=e[a],a);f+=E(i,n,o,l,s)}else if("function"==typeof(l=c(e)))for(e=l.call(e),a=0;!(i=e.next()).done;)f+=E(i=i.value,n,o,l=u+C(i,a++),s);else if("object"===i)throw n=""+e,Error(p(31,"[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n));return f}function R(e,t,r){if(null==e)return e;var n=[],o=0;return E(e,n,"","",function(e){return t.call(r,e,o++)}),n}function j(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then(function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)},function(t){0===e._status&&(e._status=2,e._result=t)})}if(1===e._status)return e._result;throw e._result}var P={current:null};function O(){var e=P.current;if(null===e)throw Error(p(321));return e}var A={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:x,IsSomeRendererActing:{current:!1},assign:e};exports.Children={map:R,forEach:function(e,t,r){R(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return R(e,function(){t++}),t},toArray:function(e){return R(e,function(e){return e})||[]},only:function(e){if(!w(e))throw Error(p(143));return e}},exports.Component=d,exports.PureComponent=h,exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=A,exports.cloneElement=function(r,n,o){if(null==r)throw Error(p(267,r));var u=e({},r.props),s=r.key,i=r.ref,f=r._owner;if(null!=n){if(void 0!==n.ref&&(i=n.ref,f=x.current),void 0!==n.key&&(s=""+n.key),r.type&&r.type.defaultProps)var a=r.type.defaultProps;for(c in n)m.call(n,c)&&!b.hasOwnProperty(c)&&(u[c]=void 0===n[c]&&void 0!==a?a[c]:n[c])}var c=arguments.length-2;if(1===c)u.children=o;else if(1<c){a=Array(c);for(var l=0;l<c;l++)a[l]=arguments[l+2];u.children=a}return{$$typeof:t,type:r.type,key:s,ref:i,props:u,_owner:f}},exports.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:o,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:n,_context:e},e.Consumer=e},exports.createElement=S,exports.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},exports.createRef=function(){return{current:null}},exports.forwardRef=function(e){return{$$typeof:u,render:e}},exports.isValidElement=w,exports.lazy=function(e){return{$$typeof:i,_payload:{_status:-1,_result:e},_init:j}},exports.memo=function(e,t){return{$$typeof:s,type:e,compare:void 0===t?null:t}},exports.useCallback=function(e,t){return O().useCallback(e,t)},exports.useContext=function(e,t){return O().useContext(e,t)},exports.useDebugValue=function(){},exports.useEffect=function(e,t){return O().useEffect(e,t)},exports.useImperativeHandle=function(e,t,r){return O().useImperativeHandle(e,t,r)},exports.useLayoutEffect=function(e,t){return O().useLayoutEffect(e,t)},exports.useMemo=function(e,t){return O().useMemo(e,t)},exports.useReducer=function(e,t,r){return O().useReducer(e,t,r)},exports.useRef=function(e){return O().useRef(e)},exports.useState=function(e){return O().useState(e)},exports.version="17.0.1";
},{"object-assign":"YOwE"}],"HdMw":[function(require,module,exports) {
"use strict";module.exports=require("./cjs/react.production.min.js");
},{"./cjs/react.production.min.js":"pyFg"}],"x9cO":[function(require,module,exports) {
"use strict";var e,t,n,r;if("object"==typeof performance&&"function"==typeof performance.now){var o=performance;exports.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();exports.unstable_now=function(){return a.now()-l}}if("undefined"==typeof window||"function"!=typeof MessageChannel){var i=null,s=null,u=function(){if(null!==i)try{var e=exports.unstable_now();i(!0,e),i=null}catch(t){throw setTimeout(u,0),t}};e=function(t){null!==i?setTimeout(e,0,t):(i=t,setTimeout(u,0))},t=function(e,t){s=setTimeout(e,t)},n=function(){clearTimeout(s)},exports.unstable_shouldYield=function(){return!1},r=exports.unstable_forceFrameRate=function(){}}else{var c=window.setTimeout,f=window.clearTimeout;if("undefined"!=typeof console){var p=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!=typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var b=!1,d=null,v=-1,x=5,y=0;exports.unstable_shouldYield=function(){return exports.unstable_now()>=y},r=function(){},exports.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<e?Math.floor(1e3/e):5};var m=new MessageChannel,w=m.port2;m.port1.onmessage=function(){if(null!==d){var e=exports.unstable_now();y=e+x;try{d(!0,e)?w.postMessage(null):(b=!1,d=null)}catch(t){throw w.postMessage(null),t}}else b=!1},e=function(e){d=e,b||(b=!0,w.postMessage(null))},t=function(e,t){v=c(function(){e(exports.unstable_now())},t)},n=function(){f(v),v=-1}}function _(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,o=e[r];if(!(void 0!==o&&0<T(o,t)))break e;e[r]=t,e[n]=o,n=r}}function h(e){return void 0===(e=e[0])?null:e}function k(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length;r<o;){var a=2*(r+1)-1,l=e[a],i=a+1,s=e[i];if(void 0!==l&&0>T(l,n))void 0!==s&&0>T(s,l)?(e[r]=s,e[i]=n,r=i):(e[r]=l,e[a]=n,r=a);else{if(!(void 0!==s&&0>T(s,n)))break e;e[r]=s,e[i]=n,r=i}}}return t}return null}function T(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var g=[],P=[],F=1,I=null,M=3,C=!1,j=!1,A=!1;function L(e){for(var t=h(P);null!==t;){if(null===t.callback)k(P);else{if(!(t.startTime<=e))break;k(P),t.sortIndex=t.expirationTime,_(g,t)}t=h(P)}}function q(n){if(A=!1,L(n),!j)if(null!==h(g))j=!0,e(R);else{var r=h(P);null!==r&&t(q,r.startTime-n)}}function R(e,r){j=!1,A&&(A=!1,n()),C=!0;var o=M;try{for(L(r),I=h(g);null!==I&&(!(I.expirationTime>r)||e&&!exports.unstable_shouldYield());){var a=I.callback;if("function"==typeof a){I.callback=null,M=I.priorityLevel;var l=a(I.expirationTime<=r);r=exports.unstable_now(),"function"==typeof l?I.callback=l:I===h(g)&&k(g),L(r)}else k(g);I=h(g)}if(null!==I)var i=!0;else{var s=h(P);null!==s&&t(q,s.startTime-r),i=!1}return i}finally{I=null,M=o,C=!1}}var Y=r;exports.unstable_IdlePriority=5,exports.unstable_ImmediatePriority=1,exports.unstable_LowPriority=4,exports.unstable_NormalPriority=3,exports.unstable_Profiling=null,exports.unstable_UserBlockingPriority=2,exports.unstable_cancelCallback=function(e){e.callback=null},exports.unstable_continueExecution=function(){j||C||(j=!0,e(R))},exports.unstable_getCurrentPriorityLevel=function(){return M},exports.unstable_getFirstCallbackNode=function(){return h(g)},exports.unstable_next=function(e){switch(M){case 1:case 2:case 3:var t=3;break;default:t=M}var n=M;M=t;try{return e()}finally{M=n}},exports.unstable_pauseExecution=function(){},exports.unstable_requestPaint=Y,exports.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=M;M=e;try{return t()}finally{M=n}},exports.unstable_scheduleCallback=function(r,o,a){var l=exports.unstable_now();switch("object"==typeof a&&null!==a?a="number"==typeof(a=a.delay)&&0<a?l+a:l:a=l,r){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3}return r={id:F++,callback:o,priorityLevel:r,startTime:a,expirationTime:i=a+i,sortIndex:-1},a>l?(r.sortIndex=a,_(P,r),null===h(g)&&r===h(P)&&(A?n():A=!0,t(q,a-l))):(r.sortIndex=i,_(g,r),j||C||(j=!0,e(R))),r},exports.unstable_wrapCallback=function(e){var t=M;return function(){var n=M;M=t;try{return e.apply(this,arguments)}finally{M=n}}};
},{}],"IGIl":[function(require,module,exports) {
"use strict";module.exports=require("./cjs/scheduler.production.min.js");
},{"./cjs/scheduler.production.min.js":"x9cO"}],"jF7N":[function(require,module,exports) {
"use strict";var e=require("react"),t=require("object-assign"),n=require("scheduler");function r(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!e)throw Error(r(227));var l=new Set,a={};function o(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(a[e]=t,e=0;e<t.length;e++)l.add(t[e])}var i=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),s=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,c=Object.prototype.hasOwnProperty,f={},d={};function p(e){return!!c.call(d,e)||!c.call(f,e)&&(s.test(e)?d[e]=!0:(f[e]=!0,!1))}function h(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}function m(e,t,n,r){if(null==t||h(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function g(e,t,n,r,l,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=l,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){v[e]=new g(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];v[t]=new g(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){v[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){v[e]=new g(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){v[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){v[e]=new g(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){v[e]=new g(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){v[e]=new g(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){v[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function w(e,t,n,r){var l=v.hasOwnProperty(t)?v[t]:null;(null!==l?0===l.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(m(t,n,l,r)&&(n=null),r||null===l?p(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):l.mustUseProperty?e[l.propertyName]=null===n?3!==l.type&&"":n:(t=l.attributeName,r=l.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(l=l.type)||4===l&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,b);v[t]=new g(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,b);v[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,b);v[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){v[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)}),v.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){v[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)});var k=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S=60103,E=60106,x=60107,C=60108,_=60114,N=60109,P=60110,z=60112,L=60113,T=60120,M=60115,O=60116,R=60121,D=60128,F=60129,I=60130,U=60131;if("function"==typeof Symbol&&Symbol.for){var V=Symbol.for;S=V("react.element"),E=V("react.portal"),x=V("react.fragment"),C=V("react.strict_mode"),_=V("react.profiler"),N=V("react.provider"),P=V("react.context"),z=V("react.forward_ref"),L=V("react.suspense"),T=V("react.suspense_list"),M=V("react.memo"),O=V("react.lazy"),R=V("react.block"),V("react.scope"),D=V("react.opaque.id"),F=V("react.debug_trace_mode"),I=V("react.offscreen"),U=V("react.legacy_hidden")}var A,B="function"==typeof Symbol&&Symbol.iterator;function W(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=B&&e[B]||e["@@iterator"])?e:null}function Q(e){if(void 0===A)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);A=t&&t[1]||""}return"\n"+A+e}var H=!1;function j(e,t){if(!e||H)return"";H=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(i){var r=i}Reflect.construct(e,[],t)}else{try{t.call()}catch(i){r=i}e.call(t.prototype)}else{try{throw Error()}catch(i){r=i}e()}}catch(i){if(i&&r&&"string"==typeof i.stack){for(var l=i.stack.split("\n"),a=r.stack.split("\n"),o=l.length-1,u=a.length-1;1<=o&&0<=u&&l[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(l[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||l[o]!==a[u])return"\n"+l[o].replace(" at new "," at ")}while(1<=o&&0<=u);break}}}finally{H=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Q(e):""}function $(e){switch(e.tag){case 5:return Q(e.type);case 16:return Q("Lazy");case 13:return Q("Suspense");case 19:return Q("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 22:return e=j(e.type._render,!1);case 1:return e=j(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case x:return"Fragment";case E:return"Portal";case _:return"Profiler";case C:return"StrictMode";case L:return"Suspense";case T:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case P:return(e.displayName||"Context")+".Consumer";case N:return(e._context.displayName||"Context")+".Provider";case z:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case M:return q(e.type);case R:return q(e._render);case O:t=e._payload,e=e._init;try{return q(e(t))}catch(n){}}return null}function K(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Y(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function X(e){var t=Y(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var l=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function G(e){e._valueTracker||(e._valueTracker=X(e))}function Z(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Y(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function J(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function ee(e,n){var r=n.checked;return t({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function te(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function ne(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function re(e,t){ne(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ae(e,t.type,n):t.hasOwnProperty("defaultValue")&&ae(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function le(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ae(e,t,n){"number"===t&&J(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function oe(t){var n="";return e.Children.forEach(t,function(e){null!=e&&(n+=e)}),n}function ue(e,n){return e=t({children:void 0},n),(n=oe(n.children))&&(e.children=n),e}function ie(e,t,n,r){if(e=e.options,t){t={};for(var l=0;l<n.length;l++)t["$"+n[l]]=!0;for(n=0;n<e.length;n++)l=t.hasOwnProperty("$"+e[n].value),e[n].selected!==l&&(e[n].selected=l),l&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,l=0;l<e.length;l++){if(e[l].value===n)return e[l].selected=!0,void(r&&(e[l].defaultSelected=!0));null!==t||e[l].disabled||(t=e[l])}null!==t&&(t.selected=!0)}}function se(e,n){if(null!=n.dangerouslySetInnerHTML)throw Error(r(91));return t({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ce(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(r(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(r(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function fe(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function de(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var pe={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function he(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function me(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?he(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ge,ve=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,l){MSApp.execUnsafeLocalFunction(function(){return e(t,n)})}:e}(function(e,t){if(e.namespaceURI!==pe.svg||"innerHTML"in e)e.innerHTML=t;else{for((ge=ge||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ge.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ye(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var be={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},we=["Webkit","ms","Moz","O"];function ke(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||be.hasOwnProperty(e)&&be[e]?(""+t).trim():t+"px"}function Se(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),l=ke(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,l):e[n]=l}}Object.keys(be).forEach(function(e){we.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),be[t]=be[e]})});var Ee=t({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xe(e,t){if(t){if(Ee[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(r(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(r(60));if(!("object"==typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML))throw Error(r(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(r(62))}}function Ce(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ne=null,Pe=null,ze=null;function Le(e){if(e=Sl(e)){if("function"!=typeof Ne)throw Error(r(280));var t=e.stateNode;t&&(t=xl(t),Ne(e.stateNode,e.type,t))}}function Te(e){Pe?ze?ze.push(e):ze=[e]:Pe=e}function Me(){if(Pe){var e=Pe,t=ze;if(ze=Pe=null,Le(e),t)for(e=0;e<t.length;e++)Le(t[e])}}function Oe(e,t){return e(t)}function Re(e,t,n,r,l){return e(t,n,r,l)}function De(){}var Fe=Oe,Ie=!1,Ue=!1;function Ve(){null===Pe&&null===ze||(De(),Me())}function Ae(e,t,n){if(Ue)return e(t,n);Ue=!0;try{return Fe(e,t,n)}finally{Ue=!1,Ve()}}function Be(e,t){var n=e.stateNode;if(null===n)return null;var l=xl(n);if(null===l)return null;n=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(l=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!l;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(r(231,t,typeof n));return n}var We=!1;if(i)try{var Qe={};Object.defineProperty(Qe,"passive",{get:function(){We=!0}}),window.addEventListener("test",Qe,Qe),window.removeEventListener("test",Qe,Qe)}catch(Fs){We=!1}function He(e,t,n,r,l,a,o,u,i){var s=Array.prototype.slice.call(arguments,3);try{t.apply(n,s)}catch(c){this.onError(c)}}var je=!1,$e=null,qe=!1,Ke=null,Ye={onError:function(e){je=!0,$e=e}};function Xe(e,t,n,r,l,a,o,u,i){je=!1,$e=null,He.apply(Ye,arguments)}function Ge(e,t,n,l,a,o,u,i,s){if(Xe.apply(this,arguments),je){if(!je)throw Error(r(198));var c=$e;je=!1,$e=null,qe||(qe=!0,Ke=c)}}function Ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Je(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function et(e){if(Ze(e)!==e)throw Error(r(188))}function tt(e){var t=e.alternate;if(!t){if(null===(t=Ze(e)))throw Error(r(188));return t!==e?null:e}for(var n=e,l=t;;){var a=n.return;if(null===a)break;var o=a.alternate;if(null===o){if(null!==(l=a.return)){n=l;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===n)return et(a),e;if(o===l)return et(a),t;o=o.sibling}throw Error(r(188))}if(n.return!==l.return)n=a,l=o;else{for(var u=!1,i=a.child;i;){if(i===n){u=!0,n=a,l=o;break}if(i===l){u=!0,l=a,n=o;break}i=i.sibling}if(!u){for(i=o.child;i;){if(i===n){u=!0,n=o,l=a;break}if(i===l){u=!0,l=o,n=a;break}i=i.sibling}if(!u)throw Error(r(189))}}if(n.alternate!==l)throw Error(r(190))}if(3!==n.tag)throw Error(r(188));return n.stateNode.current===n?e:t}function nt(e){if(!(e=tt(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function rt(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var lt,at,ot,ut,it=!1,st=[],ct=null,ft=null,dt=null,pt=new Map,ht=new Map,mt=[],gt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vt(e,t,n,r,l){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:l,targetContainers:[r]}}function yt(e,t){switch(e){case"focusin":case"focusout":ct=null;break;case"dragenter":case"dragleave":ft=null;break;case"mouseover":case"mouseout":dt=null;break;case"pointerover":case"pointerout":pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ht.delete(t.pointerId)}}function bt(e,t,n,r,l,a){return null===e||e.nativeEvent!==a?(e=vt(t,n,r,l,a),null!==t&&(null!==(t=Sl(t))&&at(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==l&&-1===t.indexOf(l)&&t.push(l),e)}function wt(e,t,n,r,l){switch(t){case"focusin":return ct=bt(ct,e,t,n,r,l),!0;case"dragenter":return ft=bt(ft,e,t,n,r,l),!0;case"mouseover":return dt=bt(dt,e,t,n,r,l),!0;case"pointerover":var a=l.pointerId;return pt.set(a,bt(pt.get(a)||null,e,t,n,r,l)),!0;case"gotpointercapture":return a=l.pointerId,ht.set(a,bt(ht.get(a)||null,e,t,n,r,l)),!0}return!1}function kt(e){var t=kl(e.target);if(null!==t){var r=Ze(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=Je(r)))return e.blockedOn=t,void ut(e.lanePriority,function(){n.unstable_runWithPriority(e.priority,function(){ot(r)})})}else if(3===t&&r.stateNode.hydrate)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function St(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=un(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=Sl(n))&&at(t),e.blockedOn=n,!1;t.shift()}return!0}function Et(e,t,n){St(e)&&n.delete(t)}function xt(){for(it=!1;0<st.length;){var e=st[0];if(null!==e.blockedOn){null!==(e=Sl(e.blockedOn))&&lt(e);break}for(var t=e.targetContainers;0<t.length;){var n=un(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&st.shift()}null!==ct&&St(ct)&&(ct=null),null!==ft&&St(ft)&&(ft=null),null!==dt&&St(dt)&&(dt=null),pt.forEach(Et),ht.forEach(Et)}function Ct(e,t){e.blockedOn===t&&(e.blockedOn=null,it||(it=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,xt)))}function _t(e){function t(t){return Ct(t,e)}if(0<st.length){Ct(st[0],e);for(var n=1;n<st.length;n++){var r=st[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==ct&&Ct(ct,e),null!==ft&&Ct(ft,e),null!==dt&&Ct(dt,e),pt.forEach(t),ht.forEach(t),n=0;n<mt.length;n++)(r=mt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<mt.length&&null===(n=mt[0]).blockedOn;)kt(n),null===n.blockedOn&&mt.shift()}function Nt(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Pt={animationend:Nt("Animation","AnimationEnd"),animationiteration:Nt("Animation","AnimationIteration"),animationstart:Nt("Animation","AnimationStart"),transitionend:Nt("Transition","TransitionEnd")},zt={},Lt={};function Tt(e){if(zt[e])return zt[e];if(!Pt[e])return e;var t,n=Pt[e];for(t in n)if(n.hasOwnProperty(t)&&t in Lt)return zt[e]=n[t];return e}i&&(Lt=document.createElement("div").style,"AnimationEvent"in window||(delete Pt.animationend.animation,delete Pt.animationiteration.animation,delete Pt.animationstart.animation),"TransitionEvent"in window||delete Pt.transitionend.transition);var Mt=Tt("animationend"),Ot=Tt("animationiteration"),Rt=Tt("animationstart"),Dt=Tt("transitionend"),Ft=new Map,It=new Map,Ut=["abort","abort",Mt,"animationEnd",Ot,"animationIteration",Rt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Dt,"transitionEnd","waiting","waiting"];function Vt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],l=e[n+1];l="on"+(l[0].toUpperCase()+l.slice(1)),It.set(r,t),Ft.set(r,l),o(l,[r])}}var At=n.unstable_now;At();var Bt=8;function Wt(e){if(0!=(1&e))return Bt=15,1;if(0!=(2&e))return Bt=14,2;if(0!=(4&e))return Bt=13,4;var t=24&e;return 0!==t?(Bt=12,t):0!=(32&e)?(Bt=11,32):0!==(t=192&e)?(Bt=10,t):0!=(256&e)?(Bt=9,256):0!==(t=3584&e)?(Bt=8,t):0!=(4096&e)?(Bt=7,4096):0!==(t=4186112&e)?(Bt=6,t):0!==(t=62914560&e)?(Bt=5,t):67108864&e?(Bt=4,67108864):0!=(134217728&e)?(Bt=3,134217728):0!==(t=805306368&e)?(Bt=2,t):0!=(1073741824&e)?(Bt=1,1073741824):(Bt=8,e)}function Qt(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function Ht(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(r(358,e))}}function jt(e,t){var n=e.pendingLanes;if(0===n)return Bt=0;var r=0,l=0,a=e.expiredLanes,o=e.suspendedLanes,u=e.pingedLanes;if(0!==a)r=a,l=Bt=15;else if(0!==(a=134217727&n)){var i=a&~o;0!==i?(r=Wt(i),l=Bt):0!==(u&=a)&&(r=Wt(u),l=Bt)}else 0!==(a=n&~o)?(r=Wt(a),l=Bt):0!==u&&(r=Wt(u),l=Bt);if(0===r)return 0;if(r=n&((0>(r=31-Gt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0==(t&o)){if(Wt(t),l<=Bt)return t;Bt=l}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)l=1<<(n=31-Gt(t)),r|=e[n],t&=~l;return r}function $t(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function qt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Kt(24&~t))?qt(10,t):e;case 10:return 0===(e=Kt(192&~t))?qt(8,t):e;case 8:return 0===(e=Kt(3584&~t))&&(0===(e=Kt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Kt(805306368&~t))&&(t=268435456),t}throw Error(r(358,e))}function Kt(e){return e&-e}function Yt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Xt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Gt(t)]=n}var Gt=Math.clz32?Math.clz32:en,Zt=Math.log,Jt=Math.LN2;function en(e){return 0===e?32:31-(Zt(e)/Jt|0)|0}var tn=n.unstable_UserBlockingPriority,nn=n.unstable_runWithPriority,rn=!0;function ln(e,t,n,r){Ie||De();var l=on,a=Ie;Ie=!0;try{Re(l,e,t,n,r)}finally{(Ie=a)||Ve()}}function an(e,t,n,r){nn(tn,on.bind(null,e,t,n,r))}function on(e,t,n,r){var l;if(rn)if((l=0==(4&t))&&0<st.length&&-1<gt.indexOf(e))e=vt(null,e,t,n,r),st.push(e);else{var a=un(e,t,n,r);if(null===a)l&&yt(e,r);else{if(l){if(-1<gt.indexOf(e))return e=vt(a,e,t,n,r),void st.push(e);if(wt(a,e,t,n,r))return;yt(e,r)}Jr(e,t,r,null,n)}}}function un(e,t,n,r){var l=_e(r);if(null!==(l=kl(l))){var a=Ze(l);if(null===a)l=null;else{var o=a.tag;if(13===o){if(null!==(l=Je(a)))return l;l=null}else if(3===o){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;l=null}else a!==l&&(l=null)}}return Jr(e,t,r,l,n),null}var sn=null,cn=null,fn=null;function dn(){if(fn)return fn;var e,t,n=cn,r=n.length,l="value"in sn?sn.value:sn.textContent,a=l.length;for(e=0;e<r&&n[e]===l[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===l[a-t];t++);return fn=l.slice(e,1<t?1-t:void 0)}function pn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function hn(){return!0}function mn(){return!1}function gn(e){function n(t,n,r,l,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=l,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(l):l[o]);return this.isDefaultPrevented=(null!=l.defaultPrevented?l.defaultPrevented:!1===l.returnValue)?hn:mn,this.isPropagationStopped=mn,this}return t(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=hn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=hn)},persist:function(){},isPersistent:hn}),n}var vn,yn,bn,wn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kn=gn(wn),Sn=t({},wn,{view:0,detail:0}),En=gn(Sn),xn=t({},Sn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:An,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==bn&&(bn&&"mousemove"===e.type?(vn=e.screenX-bn.screenX,yn=e.screenY-bn.screenY):yn=vn=0,bn=e),vn)},movementY:function(e){return"movementY"in e?e.movementY:yn}}),Cn=gn(xn),_n=t({},xn,{dataTransfer:0}),Nn=gn(_n),Pn=t({},Sn,{relatedTarget:0}),zn=gn(Pn),Ln=t({},wn,{animationName:0,elapsedTime:0,pseudoElement:0}),Tn=gn(Ln),Mn=t({},wn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),On=gn(Mn),Rn=t({},wn,{data:0}),Dn=gn(Rn),Fn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},In={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Un={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Un[e])&&!!t[e]}function An(){return Vn}var Bn=t({},Sn,{key:function(e){if(e.key){var t=Fn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=pn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?In[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:An,charCode:function(e){return"keypress"===e.type?pn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?pn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Wn=gn(Bn),Qn=t({},xn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hn=gn(Qn),jn=t({},Sn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:An}),$n=gn(jn),qn=t({},wn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Kn=gn(qn),Yn=t({},xn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Xn=gn(Yn),Gn=[9,13,27,32],Zn=i&&"CompositionEvent"in window,Jn=null;i&&"documentMode"in document&&(Jn=document.documentMode);var er=i&&"TextEvent"in window&&!Jn,tr=i&&(!Zn||Jn&&8<Jn&&11>=Jn),nr=String.fromCharCode(32),rr=!1;function lr(e,t){switch(e){case"keyup":return-1!==Gn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ar(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var or=!1;function ur(e,t){switch(e){case"compositionend":return ar(t);case"keypress":return 32!==t.which?null:(rr=!0,nr);case"textInput":return(e=t.data)===nr&&rr?null:e;default:return null}}function ir(e,t){if(or)return"compositionend"===e||!Zn&&lr(e,t)?(e=dn(),fn=cn=sn=null,or=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return tr&&"ko"!==t.locale?null:t.data;default:return null}}var sr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!sr[e.type]:"textarea"===t}function fr(e,t,n,r){Te(r),0<(t=tl(t,"onChange")).length&&(n=new kn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var dr=null,pr=null;function hr(e){qr(e,0)}function mr(e){if(Z(El(e)))return e}function gr(e,t){if("change"===e)return t}var vr=!1;if(i){var yr;if(i){var br="oninput"in document;if(!br){var wr=document.createElement("div");wr.setAttribute("oninput","return;"),br="function"==typeof wr.oninput}yr=br}else yr=!1;vr=yr&&(!document.documentMode||9<document.documentMode)}function kr(){dr&&(dr.detachEvent("onpropertychange",Sr),pr=dr=null)}function Sr(e){if("value"===e.propertyName&&mr(pr)){var t=[];if(fr(t,pr,e,_e(e)),e=hr,Ie)e(t);else{Ie=!0;try{Oe(e,t)}finally{Ie=!1,Ve()}}}}function Er(e,t,n){"focusin"===e?(kr(),pr=n,(dr=t).attachEvent("onpropertychange",Sr)):"focusout"===e&&kr()}function xr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return mr(pr)}function Cr(e,t){if("click"===e)return mr(t)}function _r(e,t){if("input"===e||"change"===e)return mr(t)}function Nr(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t}var Pr="function"==typeof Object.is?Object.is:Nr,zr=Object.prototype.hasOwnProperty;function Lr(e,t){if(Pr(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!zr.call(t,n[r])||!Pr(e[n[r]],t[n[r]]))return!1;return!0}function Tr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Mr(e,t){var n,r=Tr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Tr(r)}}function Or(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Or(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function Rr(){for(var e=window,t=J();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=J((e=t.contentWindow).document)}return t}function Dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var Fr=i&&"documentMode"in document&&11>=document.documentMode,Ir=null,Ur=null,Vr=null,Ar=!1;function Br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;Ar||null==Ir||Ir!==J(r)||("selectionStart"in(r=Ir)&&Dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},Vr&&Lr(Vr,r)||(Vr=r,0<(r=tl(Ur,"onSelect")).length&&(t=new kn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Ir)))}Vt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Vt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Vt(Ut,2);for(var Wr="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Qr=0;Qr<Wr.length;Qr++)It.set(Wr[Qr],0);u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hr));function $r(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Ge(r,t,void 0,e),e.currentTarget=null}function qr(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var r=e[n],l=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],i=u.instance,s=u.currentTarget;if(u=u.listener,i!==a&&l.isPropagationStopped())break e;$r(l,u,s),a=i}else for(o=0;o<r.length;o++){if(i=(u=r[o]).instance,s=u.currentTarget,u=u.listener,i!==a&&l.isPropagationStopped())break e;$r(l,u,s),a=i}}}if(qe)throw e=Ke,qe=!1,Ke=null,e}function Kr(e,t){var n=Cl(t),r=e+"__bubble";n.has(r)||(Zr(t,e,2,!1),n.add(r))}var Yr="_reactListening"+Math.random().toString(36).slice(2);function Xr(e){e[Yr]||(e[Yr]=!0,l.forEach(function(t){jr.has(t)||Gr(t,!1,e,null),Gr(t,!0,e,null)}))}function Gr(e,t,n,r){var l=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=n;if("selectionchange"===e&&9!==n.nodeType&&(a=n.ownerDocument),null!==r&&!t&&jr.has(e)){if("scroll"!==e)return;l|=2,a=r}var o=Cl(a),u=e+"__"+(t?"capture":"bubble");o.has(u)||(t&&(l|=4),Zr(a,e,l,t),o.add(u))}function Zr(e,t,n,r){var l=It.get(t);switch(void 0===l?2:l){case 0:l=ln;break;case 1:l=an;break;default:l=on}n=l.bind(null,t,n,e),l=void 0,!We||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(l=!0),r?void 0!==l?e.addEventListener(t,n,{capture:!0,passive:l}):e.addEventListener(t,n,!0):void 0!==l?e.addEventListener(t,n,{passive:l}):e.addEventListener(t,n,!1)}function Jr(e,t,n,r,l){var a=r;if(0==(1&t)&&0==(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===l||8===u.nodeType&&u.parentNode===l)break;if(4===o)for(o=r.return;null!==o;){var i=o.tag;if((3===i||4===i)&&((i=o.stateNode.containerInfo)===l||8===i.nodeType&&i.parentNode===l))return;o=o.return}for(;null!==u;){if(null===(o=kl(u)))return;if(5===(i=o.tag)||6===i){r=a=o;continue e}u=u.parentNode}}r=r.return}Ae(function(){var r=a,l=_e(n),o=[];e:{var u=Ft.get(e);if(void 0!==u){var i=kn,s=e;switch(e){case"keypress":if(0===pn(n))break e;case"keydown":case"keyup":i=Wn;break;case"focusin":s="focus",i=zn;break;case"focusout":s="blur",i=zn;break;case"beforeblur":case"afterblur":i=zn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":i=Cn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":i=Nn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":i=$n;break;case Mt:case Ot:case Rt:i=Tn;break;case Dt:i=Kn;break;case"scroll":i=En;break;case"wheel":i=Xn;break;case"copy":case"cut":case"paste":i=On;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":i=Hn}var c=0!=(4&t),f=!c&&"scroll"===e,d=c?null!==u?u+"Capture":null:u;c=[];for(var p,h=r;null!==h;){var m=(p=h).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==d&&(null!=(m=Be(h,d))&&c.push(el(h,m,p)))),f)break;h=h.return}0<c.length&&(u=new i(u,s,null,n,l),o.push({event:u,listeners:c}))}}if(0==(7&t)){if(i="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||0!=(16&t)||!(s=n.relatedTarget||n.fromElement)||!kl(s)&&!s[bl])&&(i||u)&&(u=l.window===l?l:(u=l.ownerDocument)?u.defaultView||u.parentWindow:window,i?(i=r,null!==(s=(s=n.relatedTarget||n.toElement)?kl(s):null)&&(s!==(f=Ze(s))||5!==s.tag&&6!==s.tag)&&(s=null)):(i=null,s=r),i!==s)){if(c=Cn,m="onMouseLeave",d="onMouseEnter",h="mouse","pointerout"!==e&&"pointerover"!==e||(c=Hn,m="onPointerLeave",d="onPointerEnter",h="pointer"),f=null==i?u:El(i),p=null==s?u:El(s),(u=new c(m,h+"leave",i,n,l)).target=f,u.relatedTarget=p,m=null,kl(l)===r&&((c=new c(d,h+"enter",s,n,l)).target=p,c.relatedTarget=f,m=c),f=m,i&&s)e:{for(d=s,h=0,p=c=i;p;p=nl(p))h++;for(p=0,m=d;m;m=nl(m))p++;for(;0<h-p;)c=nl(c),h--;for(;0<p-h;)d=nl(d),p--;for(;h--;){if(c===d||null!==d&&c===d.alternate)break e;c=nl(c),d=nl(d)}c=null}else c=null;null!==i&&rl(o,u,i,c,!1),null!==s&&null!==f&&rl(o,f,s,c,!0)}if("select"===(i=(u=r?El(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===i&&"file"===u.type)var g=gr;else if(cr(u))if(vr)g=_r;else{g=xr;var v=Er}else(i=u.nodeName)&&"input"===i.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(g=Cr);switch(g&&(g=g(e,r))?fr(o,g,n,l):(v&&v(e,u,r),"focusout"===e&&(v=u._wrapperState)&&v.controlled&&"number"===u.type&&ae(u,"number",u.value)),v=r?El(r):window,e){case"focusin":(cr(v)||"true"===v.contentEditable)&&(Ir=v,Ur=r,Vr=null);break;case"focusout":Vr=Ur=Ir=null;break;case"mousedown":Ar=!0;break;case"contextmenu":case"mouseup":case"dragend":Ar=!1,Br(o,n,l);break;case"selectionchange":if(Fr)break;case"keydown":case"keyup":Br(o,n,l)}var y;if(Zn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else or?lr(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(tr&&"ko"!==n.locale&&(or||"onCompositionStart"!==b?"onCompositionEnd"===b&&or&&(y=dn()):(cn="value"in(sn=l)?sn.value:sn.textContent,or=!0)),0<(v=tl(r,b)).length&&(b=new Dn(b,e,null,n,l),o.push({event:b,listeners:v}),y?b.data=y:null!==(y=ar(n))&&(b.data=y))),(y=er?ur(e,n):ir(e,n))&&(0<(r=tl(r,"onBeforeInput")).length&&(l=new Dn("onBeforeInput","beforeinput",null,n,l),o.push({event:l,listeners:r}),l.data=y))}qr(o,t)})}function el(e,t,n){return{instance:e,listener:t,currentTarget:n}}function tl(e,t){for(var n=t+"Capture",r=[];null!==e;){var l=e,a=l.stateNode;5===l.tag&&null!==a&&(l=a,null!=(a=Be(e,n))&&r.unshift(el(e,a,l)),null!=(a=Be(e,t))&&r.push(el(e,a,l))),e=e.return}return r}function nl(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function rl(e,t,n,r,l){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,i=u.alternate,s=u.stateNode;if(null!==i&&i===r)break;5===u.tag&&null!==s&&(u=s,l?null!=(i=Be(n,a))&&o.unshift(el(n,i,u)):l||null!=(i=Be(n,a))&&o.push(el(n,i,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function ll(){}var al=null,ol=null;function ul(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function il(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var sl="function"==typeof setTimeout?setTimeout:void 0,cl="function"==typeof clearTimeout?clearTimeout:void 0;function fl(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function dl(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function pl(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hl=0;function ml(e){return{$$typeof:D,toString:e,valueOf:e}}var gl=Math.random().toString(36).slice(2),vl="__reactFiber$"+gl,yl="__reactProps$"+gl,bl="__reactContainer$"+gl,wl="__reactEvents$"+gl;function kl(e){var t=e[vl];if(t)return t;for(var n=e.parentNode;n;){if(t=n[bl]||n[vl]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=pl(e);null!==e;){if(n=e[vl])return n;e=pl(e)}return t}n=(e=n).parentNode}return null}function Sl(e){return!(e=e[vl]||e[bl])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function El(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(r(33))}function xl(e){return e[yl]||null}function Cl(e){var t=e[wl];return void 0===t&&(t=e[wl]=new Set),t}var _l=[],Nl=-1;function Pl(e){return{current:e}}function zl(e){0>Nl||(e.current=_l[Nl],_l[Nl]=null,Nl--)}function Ll(e,t){_l[++Nl]=e.current,e.current=t}var Tl={},Ml=Pl(Tl),Ol=Pl(!1),Rl=Tl;function Dl(e,t){var n=e.type.contextTypes;if(!n)return Tl;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var l,a={};for(l in n)a[l]=t[l];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Fl(e){return null!=(e=e.childContextTypes)}function Il(){zl(Ol),zl(Ml)}function Ul(e,t,n){if(Ml.current!==Tl)throw Error(r(168));Ll(Ml,t),Ll(Ol,n)}function Vl(e,n,l){var a=e.stateNode;if(e=n.childContextTypes,"function"!=typeof a.getChildContext)return l;for(var o in a=a.getChildContext())if(!(o in e))throw Error(r(108,q(n)||"Unknown",o));return t({},l,a)}function Al(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Tl,Rl=Ml.current,Ll(Ml,e),Ll(Ol,Ol.current),!0}function Bl(e,t,n){var l=e.stateNode;if(!l)throw Error(r(169));n?(e=Vl(e,t,Rl),l.__reactInternalMemoizedMergedChildContext=e,zl(Ol),zl(Ml),Ll(Ml,e)):zl(Ol),Ll(Ol,n)}var Wl=null,Ql=null,Hl=n.unstable_runWithPriority,jl=n.unstable_scheduleCallback,$l=n.unstable_cancelCallback,ql=n.unstable_shouldYield,Kl=n.unstable_requestPaint,Yl=n.unstable_now,Xl=n.unstable_getCurrentPriorityLevel,Gl=n.unstable_ImmediatePriority,Zl=n.unstable_UserBlockingPriority,Jl=n.unstable_NormalPriority,ea=n.unstable_LowPriority,ta=n.unstable_IdlePriority,na={},ra=void 0!==Kl?Kl:function(){},la=null,aa=null,oa=!1,ua=Yl(),ia=1e4>ua?Yl:function(){return Yl()-ua};function sa(){switch(Xl()){case Gl:return 99;case Zl:return 98;case Jl:return 97;case ea:return 96;case ta:return 95;default:throw Error(r(332))}}function ca(e){switch(e){case 99:return Gl;case 98:return Zl;case 97:return Jl;case 96:return ea;case 95:return ta;default:throw Error(r(332))}}function fa(e,t){return e=ca(e),Hl(e,t)}function da(e,t,n){return e=ca(e),jl(e,t,n)}function pa(){if(null!==aa){var e=aa;aa=null,$l(e)}ha()}function ha(){if(!oa&&null!==la){oa=!0;var e=0;try{var t=la;fa(99,function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}}),la=null}catch(n){throw null!==la&&(la=la.slice(e+1)),jl(Gl,pa),n}finally{oa=!1}}}var ma=k.ReactCurrentBatchConfig;function ga(e,n){if(e&&e.defaultProps){for(var r in n=t({},n),e=e.defaultProps)void 0===n[r]&&(n[r]=e[r]);return n}return n}var va=Pl(null),ya=null,ba=null,wa=null;function ka(){wa=ba=ya=null}function Sa(e){var t=va.current;zl(va),e.type._context._currentValue=t}function Ea(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function xa(e,t){ya=e,wa=ba=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(nu=!0),e.firstContext=null)}function Ca(e,t){if(wa!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(wa=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ba){if(null===ya)throw Error(r(308));ba=t,ya.dependencies={lanes:0,firstContext:t,responders:null}}else ba=ba.next=t;return e._currentValue}var _a=!1;function Na(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function Pa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function za(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function La(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function Ta(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var l=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?l=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?l=a=t:a=a.next=t}else l=a=t;return n={baseState:r.baseState,firstBaseUpdate:l,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ma(e,n,r,l){var a=e.updateQueue;_a=!1;var o=a.firstBaseUpdate,u=a.lastBaseUpdate,i=a.shared.pending;if(null!==i){a.shared.pending=null;var s=i,c=s.next;s.next=null,null===u?o=c:u.next=c,u=s;var f=e.alternate;if(null!==f){var d=(f=f.updateQueue).lastBaseUpdate;d!==u&&(null===d?f.firstBaseUpdate=c:d.next=c,f.lastBaseUpdate=s)}}if(null!==o){for(d=a.baseState,u=0,f=c=s=null;;){i=o.lane;var p=o.eventTime;if((l&i)===i){null!==f&&(f=f.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var h=e,m=o;switch(i=n,p=r,m.tag){case 1:if("function"==typeof(h=m.payload)){d=h.call(p,d,i);break e}d=h;break e;case 3:h.flags=-4097&h.flags|64;case 0:if(null==(i="function"==typeof(h=m.payload)?h.call(p,d,i):h))break e;d=t({},d,i);break e;case 2:_a=!0}}null!==o.callback&&(e.flags|=32,null===(i=a.effects)?a.effects=[o]:i.push(o))}else p={eventTime:p,lane:i,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===f?(c=f=p,s=d):f=f.next=p,u|=i;if(null===(o=o.next)){if(null===(i=a.shared.pending))break;o=i.next,i.next=null,a.lastBaseUpdate=i,a.shared.pending=null}}null===f&&(s=d),a.baseState=s,a.firstBaseUpdate=c,a.lastBaseUpdate=f,ui|=u,e.lanes=u,e.memoizedState=d}}function Oa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var l=e[t],a=l.callback;if(null!==a){if(l.callback=null,l=n,"function"!=typeof a)throw Error(r(191,a));a.call(l)}}}var Ra=(new e.Component).refs;function Da(e,n,r,l){r=null==(r=r(l,n=e.memoizedState))?n:t({},n,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var Fa={isMounted:function(e){return!!(e=e._reactInternals)&&Ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Mi(),l=Oi(e),a=za(r,l);a.payload=t,null!=n&&(a.callback=n),La(e,a),Ri(e,l,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Mi(),l=Oi(e),a=za(r,l);a.tag=1,a.payload=t,null!=n&&(a.callback=n),La(e,a),Ri(e,l,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Mi(),r=Oi(e),l=za(n,r);l.tag=2,null!=t&&(l.callback=t),La(e,l),Ri(e,r,n)}};function Ia(e,t,n,r,l,a,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!Lr(n,r)||!Lr(l,a))}function Ua(e,t,n){var r=!1,l=Tl,a=t.contextType;return"object"==typeof a&&null!==a?a=Ca(a):(l=Fl(t)?Rl:Ml.current,a=(r=null!=(r=t.contextTypes))?Dl(e,l):Tl),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Fa,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=a),t}function Va(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Fa.enqueueReplaceState(t,t.state,null)}function Aa(e,t,n,r){var l=e.stateNode;l.props=n,l.state=e.memoizedState,l.refs=Ra,Na(e);var a=t.contextType;"object"==typeof a&&null!==a?l.context=Ca(a):(a=Fl(t)?Rl:Ml.current,l.context=Dl(e,a)),Ma(e,n,l,r),l.state=e.memoizedState,"function"==typeof(a=t.getDerivedStateFromProps)&&(Da(e,t,a,n),l.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof l.getSnapshotBeforeUpdate||"function"!=typeof l.UNSAFE_componentWillMount&&"function"!=typeof l.componentWillMount||(t=l.state,"function"==typeof l.componentWillMount&&l.componentWillMount(),"function"==typeof l.UNSAFE_componentWillMount&&l.UNSAFE_componentWillMount(),t!==l.state&&Fa.enqueueReplaceState(l,l.state,null),Ma(e,n,l,r),l.state=e.memoizedState),"function"==typeof l.componentDidMount&&(e.flags|=4)}var Ba=Array.isArray;function Wa(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(r(309));var l=n.stateNode}if(!l)throw Error(r(147,e));var a=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===a?t.ref:((t=function(e){var t=l.refs;t===Ra&&(t=l.refs={}),null===e?delete t[a]:t[a]=e})._stringRef=a,t)}if("string"!=typeof e)throw Error(r(284));if(!n._owner)throw Error(r(290,e))}return e}function Qa(e,t){if("textarea"!==e.type)throw Error(r(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Ha(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function l(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=hs(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function u(t){return e&&null===t.alternate&&(t.flags=2),t}function i(e,t,n,r){return null===t||6!==t.tag?((t=ys(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function s(e,t,n,r){return null!==t&&t.elementType===n.type?((r=a(t,n.props)).ref=Wa(e,t,n),r.return=e,r):((r=ms(n.type,n.key,n.props,null,e.mode,r)).ref=Wa(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=bs(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function f(e,t,n,r,l){return null===t||7!==t.tag?((t=gs(n,e.mode,r,l)).return=e,t):((t=a(t,n)).return=e,t)}function d(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=ys(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case S:return(n=ms(t.type,t.key,t.props,null,e.mode,n)).ref=Wa(e,null,t),n.return=e,n;case E:return(t=bs(t,e.mode,n)).return=e,t}if(Ba(t)||W(t))return(t=gs(t,e.mode,n,null)).return=e,t;Qa(e,t)}return null}function p(e,t,n,r){var l=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==l?null:i(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case S:return n.key===l?n.type===x?f(e,t,n.props.children,r,l):s(e,t,n,r):null;case E:return n.key===l?c(e,t,n,r):null}if(Ba(n)||W(n))return null!==l?null:f(e,t,n,r,null);Qa(e,n)}return null}function h(e,t,n,r,l){if("string"==typeof r||"number"==typeof r)return i(t,e=e.get(n)||null,""+r,l);if("object"==typeof r&&null!==r){switch(r.$$typeof){case S:return e=e.get(null===r.key?n:r.key)||null,r.type===x?f(t,e,r.props.children,l,r.key):s(t,e,r,l);case E:return c(t,e=e.get(null===r.key?n:r.key)||null,r,l)}if(Ba(r)||W(r))return f(t,e=e.get(n)||null,r,l,null);Qa(t,r)}return null}function m(r,a,u,i){for(var s=null,c=null,f=a,m=a=0,g=null;null!==f&&m<u.length;m++){f.index>m?(g=f,f=null):g=f.sibling;var v=p(r,f,u[m],i);if(null===v){null===f&&(f=g);break}e&&f&&null===v.alternate&&t(r,f),a=o(v,a,m),null===c?s=v:c.sibling=v,c=v,f=g}if(m===u.length)return n(r,f),s;if(null===f){for(;m<u.length;m++)null!==(f=d(r,u[m],i))&&(a=o(f,a,m),null===c?s=f:c.sibling=f,c=f);return s}for(f=l(r,f);m<u.length;m++)null!==(g=h(f,r,m,u[m],i))&&(e&&null!==g.alternate&&f.delete(null===g.key?m:g.key),a=o(g,a,m),null===c?s=g:c.sibling=g,c=g);return e&&f.forEach(function(e){return t(r,e)}),s}function g(a,u,i,s){var c=W(i);if("function"!=typeof c)throw Error(r(150));if(null==(i=c.call(i)))throw Error(r(151));for(var f=c=null,m=u,g=u=0,v=null,y=i.next();null!==m&&!y.done;g++,y=i.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=p(a,m,y.value,s);if(null===b){null===m&&(m=v);break}e&&m&&null===b.alternate&&t(a,m),u=o(b,u,g),null===f?c=b:f.sibling=b,f=b,m=v}if(y.done)return n(a,m),c;if(null===m){for(;!y.done;g++,y=i.next())null!==(y=d(a,y.value,s))&&(u=o(y,u,g),null===f?c=y:f.sibling=y,f=y);return c}for(m=l(a,m);!y.done;g++,y=i.next())null!==(y=h(m,a,g,y.value,s))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),u=o(y,u,g),null===f?c=y:f.sibling=y,f=y);return e&&m.forEach(function(e){return t(a,e)}),c}return function(e,l,o,i){var s="object"==typeof o&&null!==o&&o.type===x&&null===o.key;s&&(o=o.props.children);var c="object"==typeof o&&null!==o;if(c)switch(o.$$typeof){case S:e:{for(c=o.key,s=l;null!==s;){if(s.key===c){switch(s.tag){case 7:if(o.type===x){n(e,s.sibling),(l=a(s,o.props.children)).return=e,e=l;break e}break;default:if(s.elementType===o.type){n(e,s.sibling),(l=a(s,o.props)).ref=Wa(e,s,o),l.return=e,e=l;break e}}n(e,s);break}t(e,s),s=s.sibling}o.type===x?((l=gs(o.props.children,e.mode,i,o.key)).return=e,e=l):((i=ms(o.type,o.key,o.props,null,e.mode,i)).ref=Wa(e,l,o),i.return=e,e=i)}return u(e);case E:e:{for(s=o.key;null!==l;){if(l.key===s){if(4===l.tag&&l.stateNode.containerInfo===o.containerInfo&&l.stateNode.implementation===o.implementation){n(e,l.sibling),(l=a(l,o.children||[])).return=e,e=l;break e}n(e,l);break}t(e,l),l=l.sibling}(l=bs(o,e.mode,i)).return=e,e=l}return u(e)}if("string"==typeof o||"number"==typeof o)return o=""+o,null!==l&&6===l.tag?(n(e,l.sibling),(l=a(l,o)).return=e,e=l):(n(e,l),(l=ys(o,e.mode,i)).return=e,e=l),u(e);if(Ba(o))return m(e,l,o,i);if(W(o))return g(e,l,o,i);if(c&&Qa(e,o),void 0===o&&!s)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(r(152,q(e.type)||"Component"))}return n(e,l)}}var ja=Ha(!0),$a=Ha(!1),qa={},Ka=Pl(qa),Ya=Pl(qa),Xa=Pl(qa);function Ga(e){if(e===qa)throw Error(r(174));return e}function Za(e,t){switch(Ll(Xa,t),Ll(Ya,e),Ll(Ka,qa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:me(null,"");break;default:t=me(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}zl(Ka),Ll(Ka,t)}function Ja(){zl(Ka),zl(Ya),zl(Xa)}function eo(e){Ga(Xa.current);var t=Ga(Ka.current),n=me(t,e.type);t!==n&&(Ll(Ya,e),Ll(Ka,n))}function to(e){Ya.current===e&&(zl(Ka),zl(Ya))}var no=Pl(0);function ro(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var lo=null,ao=null,oo=!1;function uo(e,t){var n=fs(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function io(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function so(e){if(oo){var t=ao;if(t){var n=t;if(!io(e,t)){if(!(t=dl(n.nextSibling))||!io(e,t))return e.flags=-1025&e.flags|2,oo=!1,void(lo=e);uo(lo,n)}lo=e,ao=dl(t.firstChild)}else e.flags=-1025&e.flags|2,oo=!1,lo=e}}function co(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;lo=e}function fo(e){if(e!==lo)return!1;if(!oo)return co(e),oo=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!il(t,e.memoizedProps))for(t=ao;t;)uo(e,t),t=dl(t.nextSibling);if(co(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(r(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ao=dl(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ao=null}}else ao=lo?dl(e.stateNode.nextSibling):null;return!0}function po(){ao=lo=null,oo=!1}var ho=[];function mo(){for(var e=0;e<ho.length;e++)ho[e]._workInProgressVersionPrimary=null;ho.length=0}var go=k.ReactCurrentDispatcher,vo=k.ReactCurrentBatchConfig,yo=0,bo=null,wo=null,ko=null,So=!1,Eo=!1;function xo(){throw Error(r(321))}function Co(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Pr(e[n],t[n]))return!1;return!0}function _o(e,t,n,l,a,o){if(yo=o,bo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,go.current=null===e||null===e.memoizedState?Zo:Jo,e=n(l,a),Eo){o=0;do{if(Eo=!1,!(25>o))throw Error(r(301));o+=1,ko=wo=null,t.updateQueue=null,go.current=eu,e=n(l,a)}while(Eo)}if(go.current=Go,t=null!==wo&&null!==wo.next,yo=0,ko=wo=bo=null,So=!1,t)throw Error(r(300));return e}function No(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ko?bo.memoizedState=ko=e:ko=ko.next=e,ko}function Po(){if(null===wo){var e=bo.alternate;e=null!==e?e.memoizedState:null}else e=wo.next;var t=null===ko?bo.memoizedState:ko.next;if(null!==t)ko=t,wo=e;else{if(null===e)throw Error(r(310));e={memoizedState:(wo=e).memoizedState,baseState:wo.baseState,baseQueue:wo.baseQueue,queue:wo.queue,next:null},null===ko?bo.memoizedState=ko=e:ko=ko.next=e}return ko}function zo(e,t){return"function"==typeof t?t(e):t}function Lo(e){var t=Po(),n=t.queue;if(null===n)throw Error(r(311));n.lastRenderedReducer=e;var l=wo,a=l.baseQueue,o=n.pending;if(null!==o){if(null!==a){var u=a.next;a.next=o.next,o.next=u}l.baseQueue=a=o,n.pending=null}if(null!==a){a=a.next,l=l.baseState;var i=u=o=null,s=a;do{var c=s.lane;if((yo&c)===c)null!==i&&(i=i.next={lane:0,action:s.action,eagerReducer:s.eagerReducer,eagerState:s.eagerState,next:null}),l=s.eagerReducer===e?s.eagerState:e(l,s.action);else{var f={lane:c,action:s.action,eagerReducer:s.eagerReducer,eagerState:s.eagerState,next:null};null===i?(u=i=f,o=l):i=i.next=f,bo.lanes|=c,ui|=c}s=s.next}while(null!==s&&s!==a);null===i?o=l:i.next=u,Pr(l,t.memoizedState)||(nu=!0),t.memoizedState=l,t.baseState=o,t.baseQueue=i,n.lastRenderedState=l}return[t.memoizedState,n.dispatch]}function To(e){var t=Po(),n=t.queue;if(null===n)throw Error(r(311));n.lastRenderedReducer=e;var l=n.dispatch,a=n.pending,o=t.memoizedState;if(null!==a){n.pending=null;var u=a=a.next;do{o=e(o,u.action),u=u.next}while(u!==a);Pr(o,t.memoizedState)||(nu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,l]}function Mo(e,t,n){var l=t._getVersion;l=l(t._source);var a=t._workInProgressVersionPrimary;if(null!==a?e=a===l:(e=e.mutableReadLanes,(e=(yo&e)===e)&&(t._workInProgressVersionPrimary=l,ho.push(t))),e)return n(t._source);throw ho.push(t),Error(r(350))}function Oo(e,t,n,l){var a=Ju;if(null===a)throw Error(r(349));var o=t._getVersion,u=o(t._source),i=go.current,s=i.useState(function(){return Mo(a,t,n)}),c=s[1],f=s[0];s=ko;var d=e.memoizedState,p=d.refs,h=p.getSnapshot,m=d.source;d=d.subscribe;var g=bo;return e.memoizedState={refs:p,source:t,subscribe:l},i.useEffect(function(){p.getSnapshot=n,p.setSnapshot=c;var e=o(t._source);if(!Pr(u,e)){e=n(t._source),Pr(f,e)||(c(e),e=Oi(g),a.mutableReadLanes|=e&a.pendingLanes),e=a.mutableReadLanes,a.entangledLanes|=e;for(var r=a.entanglements,l=e;0<l;){var i=31-Gt(l),s=1<<i;r[i]|=e,l&=~s}}},[n,t,l]),i.useEffect(function(){return l(t._source,function(){var e=p.getSnapshot,n=p.setSnapshot;try{n(e(t._source));var r=Oi(g);a.mutableReadLanes|=r&a.pendingLanes}catch(l){n(function(){throw l})}})},[t,l]),Pr(h,n)&&Pr(m,t)&&Pr(d,l)||((e={pending:null,dispatch:null,lastRenderedReducer:zo,lastRenderedState:f}).dispatch=c=Xo.bind(null,bo,e),s.queue=e,s.baseQueue=null,f=Mo(a,t,n),s.memoizedState=s.baseState=f),f}function Ro(e,t,n){return Oo(Po(),e,t,n)}function Do(e){var t=No();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:zo,lastRenderedState:e}).dispatch=Xo.bind(null,bo,e),[t.memoizedState,e]}function Fo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=bo.updateQueue)?(t={lastEffect:null},bo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Io(e){return e={current:e},No().memoizedState=e}function Uo(){return Po().memoizedState}function Vo(e,t,n,r){var l=No();bo.flags|=e,l.memoizedState=Fo(1|t,n,void 0,void 0===r?null:r)}function Ao(e,t,n,r){var l=Po();r=void 0===r?null:r;var a=void 0;if(null!==wo){var o=wo.memoizedState;if(a=o.destroy,null!==r&&Co(r,o.deps))return void Fo(t,n,a,r)}bo.flags|=e,l.memoizedState=Fo(1|t,n,a,r)}function Bo(e,t){return Vo(516,4,e,t)}function Wo(e,t){return Ao(516,4,e,t)}function Qo(e,t){return Ao(4,2,e,t)}function Ho(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function jo(e,t,n){return n=null!=n?n.concat([e]):null,Ao(4,2,Ho.bind(null,t,e),n)}function $o(){}function qo(e,t){var n=Po();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Co(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ko(e,t){var n=Po();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Co(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Yo(e,t){var n=sa();fa(98>n?98:n,function(){e(!0)}),fa(97<n?97:n,function(){var n=vo.transition;vo.transition=1;try{e(!1),t()}finally{vo.transition=n}})}function Xo(e,t,n){var r=Mi(),l=Oi(e),a={lane:l,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?a.next=a:(a.next=o.next,o.next=a),t.pending=a,o=e.alternate,e===bo||null!==o&&o===bo)Eo=So=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var u=t.lastRenderedState,i=o(u,n);if(a.eagerReducer=o,a.eagerState=i,Pr(i,u))return}catch(s){}Ri(e,l,r)}}var Go={readContext:Ca,useCallback:xo,useContext:xo,useEffect:xo,useImperativeHandle:xo,useLayoutEffect:xo,useMemo:xo,useReducer:xo,useRef:xo,useState:xo,useDebugValue:xo,useDeferredValue:xo,useTransition:xo,useMutableSource:xo,useOpaqueIdentifier:xo,unstable_isNewReconciler:!1},Zo={readContext:Ca,useCallback:function(e,t){return No().memoizedState=[e,void 0===t?null:t],e},useContext:Ca,useEffect:Bo,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Vo(4,2,Ho.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Vo(4,2,e,t)},useMemo:function(e,t){var n=No();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=No();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Xo.bind(null,bo,e),[r.memoizedState,e]},useRef:Io,useState:Do,useDebugValue:$o,useDeferredValue:function(e){var t=Do(e),n=t[0],r=t[1];return Bo(function(){var t=vo.transition;vo.transition=1;try{r(e)}finally{vo.transition=t}},[e]),n},useTransition:function(){var e=Do(!1),t=e[0];return Io(e=Yo.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=No();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},Oo(r,e,t,n)},useOpaqueIdentifier:function(){if(oo){var e=!1,t=ml(function(){throw e||(e=!0,n("r:"+(hl++).toString(36))),Error(r(355))}),n=Do(t)[1];return 0==(2&bo.mode)&&(bo.flags|=516,Fo(5,function(){n("r:"+(hl++).toString(36))},void 0,null)),t}return Do(t="r:"+(hl++).toString(36)),t},unstable_isNewReconciler:!1},Jo={readContext:Ca,useCallback:qo,useContext:Ca,useEffect:Wo,useImperativeHandle:jo,useLayoutEffect:Qo,useMemo:Ko,useReducer:Lo,useRef:Uo,useState:function(){return Lo(zo)},useDebugValue:$o,useDeferredValue:function(e){var t=Lo(zo),n=t[0],r=t[1];return Wo(function(){var t=vo.transition;vo.transition=1;try{r(e)}finally{vo.transition=t}},[e]),n},useTransition:function(){var e=Lo(zo)[0];return[Uo().current,e]},useMutableSource:Ro,useOpaqueIdentifier:function(){return Lo(zo)[0]},unstable_isNewReconciler:!1},eu={readContext:Ca,useCallback:qo,useContext:Ca,useEffect:Wo,useImperativeHandle:jo,useLayoutEffect:Qo,useMemo:Ko,useReducer:To,useRef:Uo,useState:function(){return To(zo)},useDebugValue:$o,useDeferredValue:function(e){var t=To(zo),n=t[0],r=t[1];return Wo(function(){var t=vo.transition;vo.transition=1;try{r(e)}finally{vo.transition=t}},[e]),n},useTransition:function(){var e=To(zo)[0];return[Uo().current,e]},useMutableSource:Ro,useOpaqueIdentifier:function(){return To(zo)[0]},unstable_isNewReconciler:!1},tu=k.ReactCurrentOwner,nu=!1;function ru(e,t,n,r){t.child=null===e?$a(t,null,n,r):ja(t,e.child,n,r)}function lu(e,t,n,r,l){n=n.render;var a=t.ref;return xa(t,l),r=_o(e,t,n,r,a,l),null===e||nu?(t.flags|=1,ru(e,t,r,l),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~l,Cu(e,t,l))}function au(e,t,n,r,l,a){if(null===e){var o=n.type;return"function"!=typeof o||ds(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=ms(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,ou(e,t,o,r,l,a))}return o=e.child,0==(l&a)&&(l=o.memoizedProps,(n=null!==(n=n.compare)?n:Lr)(l,r)&&e.ref===t.ref)?Cu(e,t,a):(t.flags|=1,(e=hs(o,r)).ref=t.ref,e.return=t,t.child=e)}function ou(e,t,n,r,l,a){if(null!==e&&Lr(e.memoizedProps,r)&&e.ref===t.ref){if(nu=!1,0==(a&l))return t.lanes=e.lanes,Cu(e,t,a);0!=(16384&e.flags)&&(nu=!0)}return su(e,t,n,r,a)}function uu(e,t,n){var r=t.pendingProps,l=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0==(4&t.mode))t.memoizedState={baseLanes:0},Qi(t,n);else{if(0==(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},Qi(t,e),null;t.memoizedState={baseLanes:0},Qi(t,null!==a?a.baseLanes:n)}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Qi(t,r);return ru(e,t,l,n),t.child}function iu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function su(e,t,n,r,l){var a=Fl(n)?Rl:Ml.current;return a=Dl(t,a),xa(t,l),n=_o(e,t,n,r,a,l),null===e||nu?(t.flags|=1,ru(e,t,n,l),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~l,Cu(e,t,l))}function cu(e,t,n,r,l){if(Fl(n)){var a=!0;Al(t)}else a=!1;if(xa(t,l),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),Ua(t,n,r),Aa(t,n,r,l),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var i=o.context,s=n.contextType;"object"==typeof s&&null!==s?s=Ca(s):s=Dl(t,s=Fl(n)?Rl:Ml.current);var c=n.getDerivedStateFromProps,f="function"==typeof c||"function"==typeof o.getSnapshotBeforeUpdate;f||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(u!==r||i!==s)&&Va(t,o,r,s),_a=!1;var d=t.memoizedState;o.state=d,Ma(t,r,o,l),i=t.memoizedState,u!==r||d!==i||Ol.current||_a?("function"==typeof c&&(Da(t,n,c,r),i=t.memoizedState),(u=_a||Ia(t,n,u,r,d,i,s))?(f||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.flags|=4)):("function"==typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=i),o.props=r,o.state=i,o.context=s,r=u):("function"==typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,Pa(e,t),u=t.memoizedProps,s=t.type===t.elementType?u:ga(t.type,u),o.props=s,f=t.pendingProps,d=o.context,"object"==typeof(i=n.contextType)&&null!==i?i=Ca(i):i=Dl(t,i=Fl(n)?Rl:Ml.current);var p=n.getDerivedStateFromProps;(c="function"==typeof p||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(u!==f||d!==i)&&Va(t,o,r,i),_a=!1,d=t.memoizedState,o.state=d,Ma(t,r,o,l);var h=t.memoizedState;u!==f||d!==h||Ol.current||_a?("function"==typeof p&&(Da(t,n,p,r),h=t.memoizedState),(s=_a||Ia(t,n,s,r,d,h,i))?(c||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(r,h,i),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,h,i)),"function"==typeof o.componentDidUpdate&&(t.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!=typeof o.componentDidUpdate||u===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=h),o.props=r,o.state=h,o.context=i,r=s):("function"!=typeof o.componentDidUpdate||u===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),r=!1)}return fu(e,t,n,r,a,l)}function fu(e,t,n,r,l,a){iu(e,t);var o=0!=(64&t.flags);if(!r&&!o)return l&&Bl(t,n,!1),Cu(e,t,a);r=t.stateNode,tu.current=t;var u=o&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=ja(t,e.child,null,a),t.child=ja(t,null,u,a)):ru(e,t,u,a),t.memoizedState=r.state,l&&Bl(t,n,!0),t.child}function du(e){var t=e.stateNode;t.pendingContext?Ul(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ul(e,t.context,!1),Za(e,t.containerInfo)}var pu,hu,mu,gu,vu={dehydrated:null,retryLane:0};function yu(e,t,n){var r,l=t.pendingProps,a=no.current,o=!1;return(r=0!=(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!=(2&a)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===l.fallback||!0===l.unstable_avoidThisFallback||(a|=1),Ll(no,1&a),null===e?(void 0!==l.fallback&&so(t),e=l.children,a=l.fallback,o?(e=bu(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=vu,e):"number"==typeof l.unstable_expectedLoadTime?(e=bu(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=vu,t.lanes=33554432,e):((n=vs({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(l=ku(e,t,l.children,l.fallback,n),o=t.child,a=e.child.memoizedState,o.memoizedState=null===a?{baseLanes:n}:{baseLanes:a.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=vu,l):(n=wu(e,t,l.children,n),t.memoizedState=null,n))}function bu(e,t,n,r){var l=e.mode,a=e.child;return t={mode:"hidden",children:t},0==(2&l)&&null!==a?(a.childLanes=0,a.pendingProps=t):a=vs(t,l,0,null),n=gs(n,l,r,null),a.return=e,n.return=e,a.sibling=n,e.child=a,n}function wu(e,t,n,r){var l=e.child;return e=l.sibling,n=hs(l,{mode:"visible",children:n}),0==(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function ku(e,t,n,r,l){var a=t.mode,o=e.child;e=o.sibling;var u={mode:"hidden",children:n};return 0==(2&a)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=u,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=hs(o,u),null!==e?r=hs(e,r):(r=gs(r,a,l,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function Su(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),Ea(e.return,t)}function Eu(e,t,n,r,l,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:l,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=l,o.lastEffect=a)}function xu(e,t,n){var r=t.pendingProps,l=r.revealOrder,a=r.tail;if(ru(e,t,r.children,n),0!=(2&(r=no.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!=(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Su(e,n);else if(19===e.tag)Su(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ll(no,r),0==(2&t.mode))t.memoizedState=null;else switch(l){case"forwards":for(n=t.child,l=null;null!==n;)null!==(e=n.alternate)&&null===ro(e)&&(l=n),n=n.sibling;null===(n=l)?(l=t.child,t.child=null):(l=n.sibling,n.sibling=null),Eu(t,!1,l,n,a,t.lastEffect);break;case"backwards":for(n=null,l=t.child,t.child=null;null!==l;){if(null!==(e=l.alternate)&&null===ro(e)){t.child=l;break}e=l.sibling,l.sibling=n,n=l,l=e}Eu(t,!0,n,null,a,t.lastEffect);break;case"together":Eu(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Cu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),ui|=t.lanes,0!=(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(r(153));if(null!==t.child){for(n=hs(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=hs(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function _u(e,t){if(!oo)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Nu(e,n,l){var o=n.pendingProps;switch(n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Fl(n.type)&&Il(),null;case 3:return Ja(),zl(Ol),zl(Ml),mo(),(o=n.stateNode).pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),null!==e&&null!==e.child||(fo(n)?n.flags|=4:o.hydrate||(n.flags|=256)),hu(n),null;case 5:to(n);var u=Ga(Xa.current);if(l=n.type,null!==e&&null!=n.stateNode)mu(e,n,l,o,u),e.ref!==n.ref&&(n.flags|=128);else{if(!o){if(null===n.stateNode)throw Error(r(166));return null}if(e=Ga(Ka.current),fo(n)){o=n.stateNode,l=n.type;var i=n.memoizedProps;switch(o[vl]=n,o[yl]=i,l){case"dialog":Kr("cancel",o),Kr("close",o);break;case"iframe":case"object":case"embed":Kr("load",o);break;case"video":case"audio":for(e=0;e<Hr.length;e++)Kr(Hr[e],o);break;case"source":Kr("error",o);break;case"img":case"image":case"link":Kr("error",o),Kr("load",o);break;case"details":Kr("toggle",o);break;case"input":te(o,i),Kr("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!i.multiple},Kr("invalid",o);break;case"textarea":ce(o,i),Kr("invalid",o)}for(var s in xe(l,i),e=null,i)i.hasOwnProperty(s)&&(u=i[s],"children"===s?"string"==typeof u?o.textContent!==u&&(e=["children",u]):"number"==typeof u&&o.textContent!==""+u&&(e=["children",""+u]):a.hasOwnProperty(s)&&null!=u&&"onScroll"===s&&Kr("scroll",o));switch(l){case"input":G(o),le(o,i,!0);break;case"textarea":G(o),de(o);break;case"select":case"option":break;default:"function"==typeof i.onClick&&(o.onclick=ll)}o=e,n.updateQueue=o,null!==o&&(n.flags|=4)}else{switch(s=9===u.nodeType?u:u.ownerDocument,e===pe.html&&(e=he(l)),e===pe.html?"script"===l?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof o.is?e=s.createElement(l,{is:o.is}):(e=s.createElement(l),"select"===l&&(s=e,o.multiple?s.multiple=!0:o.size&&(s.size=o.size))):e=s.createElementNS(e,l),e[vl]=n,e[yl]=o,pu(e,n,!1,!1),n.stateNode=e,s=Ce(l,o),l){case"dialog":Kr("cancel",e),Kr("close",e),u=o;break;case"iframe":case"object":case"embed":Kr("load",e),u=o;break;case"video":case"audio":for(u=0;u<Hr.length;u++)Kr(Hr[u],e);u=o;break;case"source":Kr("error",e),u=o;break;case"img":case"image":case"link":Kr("error",e),Kr("load",e),u=o;break;case"details":Kr("toggle",e),u=o;break;case"input":te(e,o),u=ee(e,o),Kr("invalid",e);break;case"option":u=ue(e,o);break;case"select":e._wrapperState={wasMultiple:!!o.multiple},u=t({},o,{value:void 0}),Kr("invalid",e);break;case"textarea":ce(e,o),u=se(e,o),Kr("invalid",e);break;default:u=o}xe(l,u);var c=u;for(i in c)if(c.hasOwnProperty(i)){var f=c[i];"style"===i?Se(e,f):"dangerouslySetInnerHTML"===i?null!=(f=f?f.__html:void 0)&&ve(e,f):"children"===i?"string"==typeof f?("textarea"!==l||""!==f)&&ye(e,f):"number"==typeof f&&ye(e,""+f):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(a.hasOwnProperty(i)?null!=f&&"onScroll"===i&&Kr("scroll",e):null!=f&&w(e,i,f,s))}switch(l){case"input":G(e),le(e,o,!1);break;case"textarea":G(e),de(e);break;case"option":null!=o.value&&e.setAttribute("value",""+K(o.value));break;case"select":e.multiple=!!o.multiple,null!=(i=o.value)?ie(e,!!o.multiple,i,!1):null!=o.defaultValue&&ie(e,!!o.multiple,o.defaultValue,!0);break;default:"function"==typeof u.onClick&&(e.onclick=ll)}ul(l,o)&&(n.flags|=4)}null!==n.ref&&(n.flags|=128)}return null;case 6:if(e&&null!=n.stateNode)gu(e,n,e.memoizedProps,o);else{if("string"!=typeof o&&null===n.stateNode)throw Error(r(166));l=Ga(Xa.current),Ga(Ka.current),fo(n)?(o=n.stateNode,l=n.memoizedProps,o[vl]=n,o.nodeValue!==l&&(n.flags|=4)):((o=(9===l.nodeType?l:l.ownerDocument).createTextNode(o))[vl]=n,n.stateNode=o)}return null;case 13:return zl(no),o=n.memoizedState,0!=(64&n.flags)?(n.lanes=l,n):(o=null!==o,l=!1,null===e?void 0!==n.memoizedProps.fallback&&fo(n):l=null!==e.memoizedState,o&&!l&&0!=(2&n.mode)&&(null===e&&!0!==n.memoizedProps.unstable_avoidThisFallback||0!=(1&no.current)?0===li&&(li=3):(0!==li&&3!==li||(li=4),null===Ju||0==(134217727&ui)&&0==(134217727&ii)||Ui(Ju,ti))),(o||l)&&(n.flags|=4),null);case 4:return Ja(),hu(n),null===e&&Xr(n.stateNode.containerInfo),null;case 10:return Sa(n),null;case 17:return Fl(n.type)&&Il(),null;case 19:if(zl(no),null===(o=n.memoizedState))return null;if(i=0!=(64&n.flags),null===(s=o.rendering))if(i)_u(o,!1);else{if(0!==li||null!==e&&0!=(64&e.flags))for(e=n.child;null!==e;){if(null!==(s=ro(e))){for(n.flags|=64,_u(o,!1),null!==(i=s.updateQueue)&&(n.updateQueue=i,n.flags|=4),null===o.lastEffect&&(n.firstEffect=null),n.lastEffect=o.lastEffect,o=l,l=n.child;null!==l;)e=o,(i=l).flags&=2,i.nextEffect=null,i.firstEffect=null,i.lastEffect=null,null===(s=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,e=s.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),l=l.sibling;return Ll(no,1&no.current|2),n.child}e=e.sibling}null!==o.tail&&ia()>di&&(n.flags|=64,i=!0,_u(o,!1),n.lanes=33554432)}else{if(!i)if(null!==(e=ro(s))){if(n.flags|=64,i=!0,null!==(l=e.updateQueue)&&(n.updateQueue=l,n.flags|=4),_u(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!oo)return null!==(n=n.lastEffect=o.lastEffect)&&(n.nextEffect=null),null}else 2*ia()-o.renderingStartTime>di&&1073741824!==l&&(n.flags|=64,i=!0,_u(o,!1),n.lanes=33554432);o.isBackwards?(s.sibling=n.child,n.child=s):(null!==(l=o.last)?l.sibling=s:n.child=s,o.last=s)}return null!==o.tail?(l=o.tail,o.rendering=l,o.tail=l.sibling,o.lastEffect=n.lastEffect,o.renderingStartTime=ia(),l.sibling=null,n=no.current,Ll(no,i?1&n|2:1&n),l):null;case 23:case 24:return Hi(),null!==e&&null!==e.memoizedState!=(null!==n.memoizedState)&&"unstable-defer-without-hiding"!==o.mode&&(n.flags|=4),null}throw Error(r(156,n.tag))}function Pu(e){switch(e.tag){case 1:Fl(e.type)&&Il();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Ja(),zl(Ol),zl(Ml),mo(),0!=(64&(t=e.flags)))throw Error(r(285));return e.flags=-4097&t|64,e;case 5:return to(e),null;case 13:return zl(no),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return zl(no),null;case 4:return Ja(),null;case 10:return Sa(e),null;case 23:case 24:return Hi(),null;default:return null}}function zu(e,t){try{var n="",r=t;do{n+=$(r),r=r.return}while(r);var l=n}catch(a){l="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:l}}function Lu(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}pu=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},hu=function(){},mu=function(e,n,r,l){var o=e.memoizedProps;if(o!==l){e=n.stateNode,Ga(Ka.current);var u,i=null;switch(r){case"input":o=ee(e,o),l=ee(e,l),i=[];break;case"option":o=ue(e,o),l=ue(e,l),i=[];break;case"select":o=t({},o,{value:void 0}),l=t({},l,{value:void 0}),i=[];break;case"textarea":o=se(e,o),l=se(e,l),i=[];break;default:"function"!=typeof o.onClick&&"function"==typeof l.onClick&&(e.onclick=ll)}for(f in xe(r,l),r=null,o)if(!l.hasOwnProperty(f)&&o.hasOwnProperty(f)&&null!=o[f])if("style"===f){var s=o[f];for(u in s)s.hasOwnProperty(u)&&(r||(r={}),r[u]="")}else"dangerouslySetInnerHTML"!==f&&"children"!==f&&"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(a.hasOwnProperty(f)?i||(i=[]):(i=i||[]).push(f,null));for(f in l){var c=l[f];if(s=null!=o?o[f]:void 0,l.hasOwnProperty(f)&&c!==s&&(null!=c||null!=s))if("style"===f)if(s){for(u in s)!s.hasOwnProperty(u)||c&&c.hasOwnProperty(u)||(r||(r={}),r[u]="");for(u in c)c.hasOwnProperty(u)&&s[u]!==c[u]&&(r||(r={}),r[u]=c[u])}else r||(i||(i=[]),i.push(f,r)),r=c;else"dangerouslySetInnerHTML"===f?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(i=i||[]).push(f,c)):"children"===f?"string"!=typeof c&&"number"!=typeof c||(i=i||[]).push(f,""+c):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&(a.hasOwnProperty(f)?(null!=c&&"onScroll"===f&&Kr("scroll",e),i||s===c||(i=[])):"object"==typeof c&&null!==c&&c.$$typeof===D?c.toString():(i=i||[]).push(f,c))}r&&(i=i||[]).push("style",r);var f=i;(n.updateQueue=f)&&(n.flags|=4)}},gu=function(e,t,n,r){n!==r&&(t.flags|=4)};var Tu="function"==typeof WeakMap?WeakMap:Map;function Mu(e,t,n){(n=za(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){gi||(gi=!0,vi=r),Lu(e,t)},n}function Ou(e,t,n){(n=za(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var l=t.value;n.payload=function(){return Lu(e,t),r(l)}}var a=e.stateNode;return null!==a&&"function"==typeof a.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===yi?yi=new Set([this]):yi.add(this),Lu(e,t));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}var Ru="function"==typeof WeakSet?WeakSet:Set;function Du(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(n){us(e,n)}else t.current=null}function Fu(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,l=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:ga(t.type,n),l),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&fl(t.stateNode.containerInfo));case 5:case 6:case 4:case 17:return}throw Error(r(163))}function Iu(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3==(3&e.tag)){var l=e.create;e.destroy=l()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var a=e;l=a.next,0!=(4&(a=a.tag))&&0!=(1&a)&&(ls(n,e),rs(n,e)),e=l}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(l=n.elementType===n.type?t.memoizedProps:ga(n.type,t.memoizedProps),e.componentDidUpdate(l,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&Oa(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}Oa(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&ul(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&_t(n)))));case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(r(163))}function Uu(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"==typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var l=n.memoizedProps.style;l=null!=l&&l.hasOwnProperty("display")?l.display:null,r.style.display=ke("display",l)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function Vu(e,t){if(Ql&&"function"==typeof Ql.onCommitFiberUnmount)try{Ql.onCommitFiberUnmount(Wl,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,l=r.destroy;if(r=r.tag,void 0!==l)if(0!=(4&r))ls(t,n);else{r=t;try{l()}catch(a){us(r,a)}}n=n.next}while(n!==e)}break;case 1:if(Du(t),"function"==typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){us(t,a)}break;case 5:Du(t);break;case 4:ju(e,t)}}function Au(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function Bu(e){return 5===e.tag||3===e.tag||4===e.tag}function Wu(e){e:{for(var t=e.return;null!==t;){if(Bu(t))break e;t=t.return}throw Error(r(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var l=!1;break;case 3:case 4:t=t.containerInfo,l=!0;break;default:throw Error(r(161))}16&n.flags&&(ye(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||Bu(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}l?Qu(e,n,t):Hu(e,n,t)}function Qu(e,t,n){var r=e.tag,l=5===r||6===r;if(l)e=l?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=ll));else if(4!==r&&null!==(e=e.child))for(Qu(e,t,n),e=e.sibling;null!==e;)Qu(e,t,n),e=e.sibling}function Hu(e,t,n){var r=e.tag,l=5===r||6===r;if(l)e=l?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Hu(e,t,n),e=e.sibling;null!==e;)Hu(e,t,n),e=e.sibling}function ju(e,t){for(var n,l,a=t,o=!1;;){if(!o){o=a.return;e:for(;;){if(null===o)throw Error(r(160));switch(n=o.stateNode,o.tag){case 5:l=!1;break e;case 3:case 4:n=n.containerInfo,l=!0;break e}o=o.return}o=!0}if(5===a.tag||6===a.tag){e:for(var u=e,i=a,s=i;;)if(Vu(u,s),null!==s.child&&4!==s.tag)s.child.return=s,s=s.child;else{if(s===i)break e;for(;null===s.sibling;){if(null===s.return||s.return===i)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}l?(u=n,i=a.stateNode,8===u.nodeType?u.parentNode.removeChild(i):u.removeChild(i)):n.removeChild(a.stateNode)}else if(4===a.tag){if(null!==a.child){n=a.stateNode.containerInfo,l=!0,a.child.return=a,a=a.child;continue}}else if(Vu(e,a),null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break;for(;null===a.sibling;){if(null===a.return||a.return===t)return;4===(a=a.return).tag&&(o=!1)}a.sibling.return=a.return,a=a.sibling}}function $u(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var l=n=n.next;do{3==(3&l.tag)&&(e=l.destroy,l.destroy=void 0,void 0!==e&&e()),l=l.next}while(l!==n)}return;case 1:return;case 5:if(null!=(n=t.stateNode)){l=t.memoizedProps;var a=null!==e?e.memoizedProps:l;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[yl]=l,"input"===e&&"radio"===l.type&&null!=l.name&&ne(n,l),Ce(e,a),t=Ce(e,l),a=0;a<o.length;a+=2){var u=o[a],i=o[a+1];"style"===u?Se(n,i):"dangerouslySetInnerHTML"===u?ve(n,i):"children"===u?ye(n,i):w(n,u,i,t)}switch(e){case"input":re(n,l);break;case"textarea":fe(n,l);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!l.multiple,null!=(o=l.value)?ie(n,!!l.multiple,o,!1):e!==!!l.multiple&&(null!=l.defaultValue?ie(n,!!l.multiple,l.defaultValue,!0):ie(n,!!l.multiple,l.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(r(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,_t(n.containerInfo)));case 12:return;case 13:return null!==t.memoizedState&&(fi=ia(),Uu(t.child,!0)),void qu(t);case 19:return void qu(t);case 17:return;case 23:case 24:return void Uu(t,null!==t.memoizedState)}throw Error(r(163))}function qu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ru),t.forEach(function(t){var r=ss.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function Ku(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Yu=Math.ceil,Xu=k.ReactCurrentDispatcher,Gu=k.ReactCurrentOwner,Zu=0,Ju=null,ei=null,ti=0,ni=0,ri=Pl(0),li=0,ai=null,oi=0,ui=0,ii=0,si=0,ci=null,fi=0,di=1/0;function pi(){di=ia()+500}var hi,mi=null,gi=!1,vi=null,yi=null,bi=!1,wi=null,ki=90,Si=[],Ei=[],xi=null,Ci=0,_i=null,Ni=-1,Pi=0,zi=0,Li=null,Ti=!1;function Mi(){return 0!=(48&Zu)?ia():-1!==Ni?Ni:Ni=ia()}function Oi(e){if(0==(2&(e=e.mode)))return 1;if(0==(4&e))return 99===sa()?1:2;if(0===Pi&&(Pi=oi),0!==ma.transition){0!==zi&&(zi=null!==ci?ci.pendingLanes:0),e=Pi;var t=4186112&~zi;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=sa(),0!=(4&Zu)&&98===e?e=qt(12,Pi):e=qt(e=Qt(e),Pi),e}function Ri(e,t,n){if(50<Ci)throw Ci=0,_i=null,Error(r(185));if(null===(e=Di(e,t)))return null;Xt(e,t,n),e===Ju&&(ii|=t,4===li&&Ui(e,ti));var l=sa();1===t?0!=(8&Zu)&&0==(48&Zu)?Vi(e):(Fi(e,n),0===Zu&&(pi(),pa())):(0==(4&Zu)||98!==l&&99!==l||(null===xi?xi=new Set([e]):xi.add(e)),Fi(e,n)),ci=e}function Di(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function Fi(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,l=e.pingedLanes,a=e.expirationTimes,o=e.pendingLanes;0<o;){var u=31-Gt(o),i=1<<u,s=a[u];if(-1===s){if(0==(i&r)||0!=(i&l)){s=t,Wt(i);var c=Bt;a[u]=10<=c?s+250:6<=c?s+5e3:-1}}else s<=t&&(e.expiredLanes|=i);o&=~i}if(r=jt(e,e===Ju?ti:0),t=Bt,0===r)null!==n&&(n!==na&&$l(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==na&&$l(n)}15===t?(n=Vi.bind(null,e),null===la?(la=[n],aa=jl(Gl,ha)):la.push(n),n=na):14===t?n=da(99,Vi.bind(null,e)):n=da(n=Ht(t),Ii.bind(null,e)),e.callbackPriority=t,e.callbackNode=n}}function Ii(e){if(Ni=-1,zi=Pi=0,0!=(48&Zu))throw Error(r(327));var t=e.callbackNode;if(ns()&&e.callbackNode!==t)return null;var n=jt(e,e===Ju?ti:0);if(0===n)return null;var l=n,a=Zu;Zu|=16;var o=qi();for(Ju===e&&ti===l||(pi(),ji(e,l));;)try{Xi();break}catch(i){$i(e,i)}if(ka(),Xu.current=o,Zu=a,null!==ei?l=0:(Ju=null,ti=0,l=li),0!=(oi&ii))ji(e,0);else if(0!==l){if(2===l&&(Zu|=64,e.hydrate&&(e.hydrate=!1,fl(e.containerInfo)),0!==(n=$t(e))&&(l=Ki(e,n))),1===l)throw t=ai,ji(e,0),Ui(e,n),Fi(e,ia()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,l){case 0:case 1:throw Error(r(345));case 2:Ji(e);break;case 3:if(Ui(e,n),(62914560&n)===n&&10<(l=fi+500-ia())){if(0!==jt(e,0))break;if(((a=e.suspendedLanes)&n)!==n){Mi(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=sl(Ji.bind(null,e),l);break}Ji(e);break;case 4:if(Ui(e,n),(4186112&n)===n)break;for(l=e.eventTimes,a=-1;0<n;){var u=31-Gt(n);o=1<<u,(u=l[u])>a&&(a=u),n&=~o}if(n=a,10<(n=(120>(n=ia()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Yu(n/1960))-n)){e.timeoutHandle=sl(Ji.bind(null,e),n);break}Ji(e);break;case 5:Ji(e);break;default:throw Error(r(329))}}return Fi(e,ia()),e.callbackNode===t?Ii.bind(null,e):null}function Ui(e,t){for(t&=~si,t&=~ii,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Gt(t),r=1<<n;e[n]=-1,t&=~r}}function Vi(e){if(0!=(48&Zu))throw Error(r(327));if(ns(),e===Ju&&0!=(e.expiredLanes&ti)){var t=ti,n=Ki(e,t);0!=(oi&ii)&&(n=Ki(e,t=jt(e,t)))}else n=Ki(e,t=jt(e,0));if(0!==e.tag&&2===n&&(Zu|=64,e.hydrate&&(e.hydrate=!1,fl(e.containerInfo)),0!==(t=$t(e))&&(n=Ki(e,t))),1===n)throw n=ai,ji(e,0),Ui(e,t),Fi(e,ia()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ji(e),Fi(e,ia()),null}function Ai(){if(null!==xi){var e=xi;xi=null,e.forEach(function(e){e.expiredLanes|=24&e.pendingLanes,Fi(e,ia())})}pa()}function Bi(e,t){var n=Zu;Zu|=1;try{return e(t)}finally{0===(Zu=n)&&(pi(),pa())}}function Wi(e,t){var n=Zu;Zu&=-2,Zu|=8;try{return e(t)}finally{0===(Zu=n)&&(pi(),pa())}}function Qi(e,t){Ll(ri,ni),ni|=t,oi|=t}function Hi(){ni=ri.current,zl(ri)}function ji(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,cl(n)),null!==ei)for(n=ei.return;null!==n;){var r=n;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&Il();break;case 3:Ja(),zl(Ol),zl(Ml),mo();break;case 5:to(r);break;case 4:Ja();break;case 13:case 19:zl(no);break;case 10:Sa(r);break;case 23:case 24:Hi()}n=n.return}Ju=e,ei=hs(e.current,null),ti=ni=oi=t,li=0,ai=null,si=ii=ui=0}function $i(e,t){for(;;){var n=ei;try{if(ka(),go.current=Go,So){for(var r=bo.memoizedState;null!==r;){var l=r.queue;null!==l&&(l.pending=null),r=r.next}So=!1}if(yo=0,ko=wo=bo=null,Eo=!1,Gu.current=null,null===n||null===n.return){li=1,ai=t,ei=null;break}e:{var a=e,o=n.return,u=n,i=t;if(t=ti,u.flags|=2048,u.firstEffect=u.lastEffect=null,null!==i&&"object"==typeof i&&"function"==typeof i.then){var s=i;if(0==(2&u.mode)){var c=u.alternate;c?(u.updateQueue=c.updateQueue,u.memoizedState=c.memoizedState,u.lanes=c.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=0!=(1&no.current),d=o;do{var p;if(p=13===d.tag){var h=d.memoizedState;if(null!==h)p=null!==h.dehydrated;else{var m=d.memoizedProps;p=void 0!==m.fallback&&(!0!==m.unstable_avoidThisFallback||!f)}}if(p){var g=d.updateQueue;if(null===g){var v=new Set;v.add(s),d.updateQueue=v}else g.add(s);if(0==(2&d.mode)){if(d.flags|=64,u.flags|=16384,u.flags&=-2981,1===u.tag)if(null===u.alternate)u.tag=17;else{var y=za(-1,1);y.tag=2,La(u,y)}u.lanes|=1;break e}i=void 0,u=t;var b=a.pingCache;if(null===b?(b=a.pingCache=new Tu,i=new Set,b.set(s,i)):void 0===(i=b.get(s))&&(i=new Set,b.set(s,i)),!i.has(u)){i.add(u);var w=is.bind(null,a,s,u);s.then(w,w)}d.flags|=4096,d.lanes=t;break e}d=d.return}while(null!==d);i=Error((q(u.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==li&&(li=2),i=zu(i,u),d=o;do{switch(d.tag){case 3:a=i,d.flags|=4096,t&=-t,d.lanes|=t,Ta(d,Mu(d,a,t));break e;case 1:a=i;var k=d.type,S=d.stateNode;if(0==(64&d.flags)&&("function"==typeof k.getDerivedStateFromError||null!==S&&"function"==typeof S.componentDidCatch&&(null===yi||!yi.has(S)))){d.flags|=4096,t&=-t,d.lanes|=t,Ta(d,Ou(d,a,t));break e}}d=d.return}while(null!==d)}Zi(n)}catch(E){t=E,ei===n&&null!==n&&(ei=n=n.return);continue}break}}function qi(){var e=Xu.current;return Xu.current=Go,null===e?Go:e}function Ki(e,t){var n=Zu;Zu|=16;var l=qi();for(Ju===e&&ti===t||ji(e,t);;)try{Yi();break}catch(a){$i(e,a)}if(ka(),Zu=n,Xu.current=l,null!==ei)throw Error(r(261));return Ju=null,ti=0,li}function Yi(){for(;null!==ei;)Gi(ei)}function Xi(){for(;null!==ei&&!ql();)Gi(ei)}function Gi(e){var t=hi(e.alternate,e,ni);e.memoizedProps=e.pendingProps,null===t?Zi(e):ei=t,Gu.current=null}function Zi(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(2048&t.flags)){if(null!==(n=Nu(n,t,ni)))return void(ei=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!=(1073741824&ni)||0==(4&n.mode)){for(var r=0,l=n.child;null!==l;)r|=l.lanes|l.childLanes,l=l.sibling;n.childLanes=r}null!==e&&0==(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=Pu(t)))return n.flags&=2047,void(ei=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(ei=t);ei=t=e}while(null!==t);0===li&&(li=5)}function Ji(e){var t=sa();return fa(99,es.bind(null,e,t)),null}function es(e,t){do{ns()}while(null!==wi);if(0!=(48&Zu))throw Error(r(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(r(177));e.callbackNode=null;var l=n.lanes|n.childLanes,a=l,o=e.pendingLanes&~a;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=a,e.mutableReadLanes&=a,e.entangledLanes&=a,a=e.entanglements;for(var u=e.eventTimes,i=e.expirationTimes;0<o;){var s=31-Gt(o),c=1<<s;a[s]=0,u[s]=-1,i[s]=-1,o&=~c}if(null!==xi&&0==(24&l)&&xi.has(e)&&xi.delete(e),e===Ju&&(ei=Ju=null,ti=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,l=n.firstEffect):l=n:l=n.firstEffect,null!==l){if(a=Zu,Zu|=32,Gu.current=null,al=rn,Dr(u=Rr())){if("selectionStart"in u)i={start:u.selectionStart,end:u.selectionEnd};else e:if(i=(i=u.ownerDocument)&&i.defaultView||window,(c=i.getSelection&&i.getSelection())&&0!==c.rangeCount){i=c.anchorNode,o=c.anchorOffset,s=c.focusNode,c=c.focusOffset;try{i.nodeType,s.nodeType}catch(_){i=null;break e}var f=0,d=-1,p=-1,h=0,m=0,g=u,v=null;t:for(;;){for(var y;g!==i||0!==o&&3!==g.nodeType||(d=f+o),g!==s||0!==c&&3!==g.nodeType||(p=f+c),3===g.nodeType&&(f+=g.nodeValue.length),null!==(y=g.firstChild);)v=g,g=y;for(;;){if(g===u)break t;if(v===i&&++h===o&&(d=f),v===s&&++m===c&&(p=f),null!==(y=g.nextSibling))break;v=(g=v).parentNode}g=y}i=-1===d||-1===p?null:{start:d,end:p}}else i=null;i=i||{start:0,end:0}}else i=null;ol={focusedElem:u,selectionRange:i},rn=!1,Li=null,Ti=!1,mi=l;do{try{ts()}catch(_){if(null===mi)throw Error(r(330));us(mi,_),mi=mi.nextEffect}}while(null!==mi);Li=null,mi=l;do{try{for(u=e;null!==mi;){var b=mi.flags;if(16&b&&ye(mi.stateNode,""),128&b){var w=mi.alternate;if(null!==w){var k=w.ref;null!==k&&("function"==typeof k?k(null):k.current=null)}}switch(1038&b){case 2:Wu(mi),mi.flags&=-3;break;case 6:Wu(mi),mi.flags&=-3,$u(mi.alternate,mi);break;case 1024:mi.flags&=-1025;break;case 1028:mi.flags&=-1025,$u(mi.alternate,mi);break;case 4:$u(mi.alternate,mi);break;case 8:ju(u,i=mi);var S=i.alternate;Au(i),null!==S&&Au(S)}mi=mi.nextEffect}}catch(_){if(null===mi)throw Error(r(330));us(mi,_),mi=mi.nextEffect}}while(null!==mi);if(k=ol,w=Rr(),b=k.focusedElem,u=k.selectionRange,w!==b&&b&&b.ownerDocument&&Or(b.ownerDocument.documentElement,b)){null!==u&&Dr(b)&&(w=u.start,void 0===(k=u.end)&&(k=w),"selectionStart"in b?(b.selectionStart=w,b.selectionEnd=Math.min(k,b.value.length)):(k=(w=b.ownerDocument||document)&&w.defaultView||window).getSelection&&(k=k.getSelection(),i=b.textContent.length,S=Math.min(u.start,i),u=void 0===u.end?S:Math.min(u.end,i),!k.extend&&S>u&&(i=u,u=S,S=i),i=Mr(b,S),o=Mr(b,u),i&&o&&(1!==k.rangeCount||k.anchorNode!==i.node||k.anchorOffset!==i.offset||k.focusNode!==o.node||k.focusOffset!==o.offset)&&((w=w.createRange()).setStart(i.node,i.offset),k.removeAllRanges(),S>u?(k.addRange(w),k.extend(o.node,o.offset)):(w.setEnd(o.node,o.offset),k.addRange(w))))),w=[];for(k=b;k=k.parentNode;)1===k.nodeType&&w.push({element:k,left:k.scrollLeft,top:k.scrollTop});for("function"==typeof b.focus&&b.focus(),b=0;b<w.length;b++)(k=w[b]).element.scrollLeft=k.left,k.element.scrollTop=k.top}rn=!!al,ol=al=null,e.current=n,mi=l;do{try{for(b=e;null!==mi;){var E=mi.flags;if(36&E&&Iu(b,mi.alternate,mi),128&E){w=void 0;var x=mi.ref;if(null!==x){var C=mi.stateNode;switch(mi.tag){case 5:w=C;break;default:w=C}"function"==typeof x?x(w):x.current=w}}mi=mi.nextEffect}}catch(_){if(null===mi)throw Error(r(330));us(mi,_),mi=mi.nextEffect}}while(null!==mi);mi=null,ra(),Zu=a}else e.current=n;if(bi)bi=!1,wi=e,ki=t;else for(mi=l;null!==mi;)t=mi.nextEffect,mi.nextEffect=null,8&mi.flags&&((E=mi).sibling=null,E.stateNode=null),mi=t;if(0===(l=e.pendingLanes)&&(yi=null),1===l?e===_i?Ci++:(Ci=0,_i=e):Ci=0,n=n.stateNode,Ql&&"function"==typeof Ql.onCommitFiberRoot)try{Ql.onCommitFiberRoot(Wl,n,void 0,64==(64&n.current.flags))}catch(_){}if(Fi(e,ia()),gi)throw gi=!1,e=vi,vi=null,e;return 0!=(8&Zu)?null:(pa(),null)}function ts(){for(;null!==mi;){var e=mi.alternate;Ti||null===Li||(0!=(8&mi.flags)?rt(mi,Li)&&(Ti=!0):13===mi.tag&&Ku(e,mi)&&rt(mi,Li)&&(Ti=!0));var t=mi.flags;0!=(256&t)&&Fu(e,mi),0==(512&t)||bi||(bi=!0,da(97,function(){return ns(),null})),mi=mi.nextEffect}}function ns(){if(90!==ki){var e=97<ki?97:ki;return ki=90,fa(e,as)}return!1}function rs(e,t){Si.push(t,e),bi||(bi=!0,da(97,function(){return ns(),null}))}function ls(e,t){Ei.push(t,e),bi||(bi=!0,da(97,function(){return ns(),null}))}function as(){if(null===wi)return!1;var e=wi;if(wi=null,0!=(48&Zu))throw Error(r(331));var t=Zu;Zu|=32;var n=Ei;Ei=[];for(var l=0;l<n.length;l+=2){var a=n[l],o=n[l+1],u=a.destroy;if(a.destroy=void 0,"function"==typeof u)try{u()}catch(s){if(null===o)throw Error(r(330));us(o,s)}}for(n=Si,Si=[],l=0;l<n.length;l+=2){a=n[l],o=n[l+1];try{var i=a.create;a.destroy=i()}catch(s){if(null===o)throw Error(r(330));us(o,s)}}for(i=e.current.firstEffect;null!==i;)e=i.nextEffect,i.nextEffect=null,8&i.flags&&(i.sibling=null,i.stateNode=null),i=e;return Zu=t,pa(),!0}function os(e,t,n){La(e,t=Mu(e,t=zu(n,t),1)),t=Mi(),null!==(e=Di(e,1))&&(Xt(e,1,t),Fi(e,t))}function us(e,t){if(3===e.tag)os(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){os(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===yi||!yi.has(r))){var l=Ou(n,e=zu(t,e),1);if(La(n,l),l=Mi(),null!==(n=Di(n,1)))Xt(n,1,l),Fi(n,l);else if("function"==typeof r.componentDidCatch&&(null===yi||!yi.has(r)))try{r.componentDidCatch(t,e)}catch(a){}break}}n=n.return}}function is(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=Mi(),e.pingedLanes|=e.suspendedLanes&n,Ju===e&&(ti&n)===n&&(4===li||3===li&&(62914560&ti)===ti&&500>ia()-fi?ji(e,0):si|=n),Fi(e,t)}function ss(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0==(2&(t=e.mode))?t=1:0==(4&t)?t=99===sa()?1:2:(0===Pi&&(Pi=oi),0===(t=Kt(62914560&~Pi))&&(t=4194304))),n=Mi(),null!==(e=Di(e,t))&&(Xt(e,t,n),Fi(e,n))}function cs(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function fs(e,t,n,r){return new cs(e,t,n,r)}function ds(e){return!(!(e=e.prototype)||!e.isReactComponent)}function ps(e){if("function"==typeof e)return ds(e)?1:0;if(null!=e){if((e=e.$$typeof)===z)return 11;if(e===M)return 14}return 2}function hs(e,t){var n=e.alternate;return null===n?((n=fs(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ms(e,t,n,l,a,o){var u=2;if(l=e,"function"==typeof e)ds(e)&&(u=1);else if("string"==typeof e)u=5;else e:switch(e){case x:return gs(n.children,a,o,t);case F:u=8,a|=16;break;case C:u=8,a|=1;break;case _:return(e=fs(12,n,t,8|a)).elementType=_,e.type=_,e.lanes=o,e;case L:return(e=fs(13,n,t,a)).type=L,e.elementType=L,e.lanes=o,e;case T:return(e=fs(19,n,t,a)).elementType=T,e.lanes=o,e;case I:return vs(n,a,o,t);case U:return(e=fs(24,n,t,a)).elementType=U,e.lanes=o,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case N:u=10;break e;case P:u=9;break e;case z:u=11;break e;case M:u=14;break e;case O:u=16,l=null;break e;case R:u=22;break e}throw Error(r(130,null==e?e:typeof e,""))}return(t=fs(u,n,t,a)).elementType=e,t.type=l,t.lanes=o,t}function gs(e,t,n,r){return(e=fs(7,e,r,t)).lanes=n,e}function vs(e,t,n,r){return(e=fs(23,e,r,t)).elementType=I,e.lanes=n,e}function ys(e,t,n){return(e=fs(6,e,null,t)).lanes=n,e}function bs(e,t,n){return(t=fs(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ws(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Yt(0),this.expirationTimes=Yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yt(0),this.mutableSourceEagerHydrationData=null}function ks(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Ss(e,t,n,l){var a=t.current,o=Mi(),u=Oi(a);e:if(n){t:{if(Ze(n=n._reactInternals)!==n||1!==n.tag)throw Error(r(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break t;case 1:if(Fl(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break t}}i=i.return}while(null!==i);throw Error(r(171))}if(1===n.tag){var s=n.type;if(Fl(s)){n=Vl(n,s,i);break e}}n=i}else n=Tl;return null===t.context?t.context=n:t.pendingContext=n,(t=za(o,u)).payload={element:e},null!==(l=void 0===l?null:l)&&(t.callback=l),La(a,t),Ri(a,u,o),u}function Es(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function xs(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Cs(e,t){xs(e,t),(e=e.alternate)&&xs(e,t)}function _s(){return null}function Ns(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new ws(e,t,null!=n&&!0===n.hydrate),t=fs(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,Na(t),e[bl]=n.current,Xr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var l=(t=r[e])._getVersion;l=l(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,l]:n.mutableSourceEagerHydrationData.push(t,l)}this._internalRoot=n}function Ps(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function zs(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new Ns(e,0,t?{hydrate:!0}:void 0)}function Ls(e,t,n,r,l){var a=n._reactRootContainer;if(a){var o=a._internalRoot;if("function"==typeof l){var u=l;l=function(){var e=Es(o);u.call(e)}}Ss(t,o,e,l)}else{if(a=n._reactRootContainer=zs(n,r),o=a._internalRoot,"function"==typeof l){var i=l;l=function(){var e=Es(o);i.call(e)}}Wi(function(){Ss(t,o,e,l)})}return Es(o)}function Ts(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Ps(t))throw Error(r(200));return ks(e,t,null,n)}hi=function(e,t,n){var l=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||Ol.current)nu=!0;else{if(0==(n&l)){switch(nu=!1,t.tag){case 3:du(t),po();break;case 5:eo(t);break;case 1:Fl(t.type)&&Al(t);break;case 4:Za(t,t.stateNode.containerInfo);break;case 10:l=t.memoizedProps.value;var a=t.type._context;Ll(va,a._currentValue),a._currentValue=l;break;case 13:if(null!==t.memoizedState)return 0!=(n&t.child.childLanes)?yu(e,t,n):(Ll(no,1&no.current),null!==(t=Cu(e,t,n))?t.sibling:null);Ll(no,1&no.current);break;case 19:if(l=0!=(n&t.childLanes),0!=(64&e.flags)){if(l)return xu(e,t,n);t.flags|=64}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ll(no,no.current),l)break;return null;case 23:case 24:return t.lanes=0,uu(e,t,n)}return Cu(e,t,n)}nu=0!=(16384&e.flags)}else nu=!1;switch(t.lanes=0,t.tag){case 2:if(l=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,a=Dl(t,Ml.current),xa(t,n),a=_o(null,t,l,e,a,n),t.flags|=1,"object"==typeof a&&null!==a&&"function"==typeof a.render&&void 0===a.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,Fl(l)){var o=!0;Al(t)}else o=!1;t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Na(t);var u=l.getDerivedStateFromProps;"function"==typeof u&&Da(t,l,u,e),a.updater=Fa,t.stateNode=a,a._reactInternals=t,Aa(t,l,e,n),t=fu(null,t,l,!0,o,n)}else t.tag=0,ru(null,t,a,n),t=t.child;return t;case 16:a=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,a=(o=a._init)(a._payload),t.type=a,o=t.tag=ps(a),e=ga(a,e),o){case 0:t=su(null,t,a,e,n);break e;case 1:t=cu(null,t,a,e,n);break e;case 11:t=lu(null,t,a,e,n);break e;case 14:t=au(null,t,a,ga(a.type,e),l,n);break e}throw Error(r(306,a,""))}return t;case 0:return l=t.type,a=t.pendingProps,su(e,t,l,a=t.elementType===l?a:ga(l,a),n);case 1:return l=t.type,a=t.pendingProps,cu(e,t,l,a=t.elementType===l?a:ga(l,a),n);case 3:if(du(t),l=t.updateQueue,null===e||null===l)throw Error(r(282));if(l=t.pendingProps,a=null!==(a=t.memoizedState)?a.element:null,Pa(e,t),Ma(t,l,null,n),(l=t.memoizedState.element)===a)po(),t=Cu(e,t,n);else{if((o=(a=t.stateNode).hydrate)&&(ao=dl(t.stateNode.containerInfo.firstChild),lo=t,o=oo=!0),o){if(null!=(e=a.mutableSourceEagerHydrationData))for(a=0;a<e.length;a+=2)(o=e[a])._workInProgressVersionPrimary=e[a+1],ho.push(o);for(n=$a(t,null,l,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else ru(e,t,l,n),po();t=t.child}return t;case 5:return eo(t),null===e&&so(t),l=t.type,a=t.pendingProps,o=null!==e?e.memoizedProps:null,u=a.children,il(l,a)?u=null:null!==o&&il(l,o)&&(t.flags|=16),iu(e,t),ru(e,t,u,n),t.child;case 6:return null===e&&so(t),null;case 13:return yu(e,t,n);case 4:return Za(t,t.stateNode.containerInfo),l=t.pendingProps,null===e?t.child=ja(t,null,l,n):ru(e,t,l,n),t.child;case 11:return l=t.type,a=t.pendingProps,lu(e,t,l,a=t.elementType===l?a:ga(l,a),n);case 7:return ru(e,t,t.pendingProps,n),t.child;case 8:case 12:return ru(e,t,t.pendingProps.children,n),t.child;case 10:e:{l=t.type._context,a=t.pendingProps,u=t.memoizedProps,o=a.value;var i=t.type._context;if(Ll(va,i._currentValue),i._currentValue=o,null!==u)if(i=u.value,0===(o=Pr(i,o)?0:0|("function"==typeof l._calculateChangedBits?l._calculateChangedBits(i,o):1073741823))){if(u.children===a.children&&!Ol.current){t=Cu(e,t,n);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var s=i.dependencies;if(null!==s){u=i.child;for(var c=s.firstContext;null!==c;){if(c.context===l&&0!=(c.observedBits&o)){1===i.tag&&((c=za(-1,n&-n)).tag=2,La(i,c)),i.lanes|=n,null!==(c=i.alternate)&&(c.lanes|=n),Ea(i.return,n),s.lanes|=n;break}c=c.next}}else u=10===i.tag&&i.type===t.type?null:i.child;if(null!==u)u.return=i;else for(u=i;null!==u;){if(u===t){u=null;break}if(null!==(i=u.sibling)){i.return=u.return,u=i;break}u=u.return}i=u}ru(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,l=(o=t.pendingProps).children,xa(t,n),l=l(a=Ca(a,o.unstable_observedBits)),t.flags|=1,ru(e,t,l,n),t.child;case 14:return o=ga(a=t.type,t.pendingProps),au(e,t,a,o=ga(a.type,o),l,n);case 15:return ou(e,t,t.type,t.pendingProps,l,n);case 17:return l=t.type,a=t.pendingProps,a=t.elementType===l?a:ga(l,a),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Fl(l)?(e=!0,Al(t)):e=!1,xa(t,n),Ua(t,l,a),Aa(t,l,a,n),fu(null,t,l,!0,e,n);case 19:return xu(e,t,n);case 23:case 24:return uu(e,t,n)}throw Error(r(156,t.tag))},Ns.prototype.render=function(e){Ss(e,this._internalRoot,null,null)},Ns.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Ss(null,e,null,function(){t[bl]=null})},lt=function(e){13===e.tag&&(Ri(e,4,Mi()),Cs(e,4))},at=function(e){13===e.tag&&(Ri(e,67108864,Mi()),Cs(e,67108864))},ot=function(e){if(13===e.tag){var t=Mi(),n=Oi(e);Ri(e,n,t),Cs(e,n)}},ut=function(e,t){return t()},Ne=function(e,t,n){switch(t){case"input":if(re(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var l=n[t];if(l!==e&&l.form===e.form){var a=xl(l);if(!a)throw Error(r(90));Z(l),re(l,a)}}}break;case"textarea":fe(e,n);break;case"select":null!=(t=n.value)&&ie(e,!!n.multiple,t,!1)}},Oe=Bi,Re=function(e,t,n,r,l){var a=Zu;Zu|=4;try{return fa(98,e.bind(null,t,n,r,l))}finally{0===(Zu=a)&&(pi(),pa())}},De=function(){0==(49&Zu)&&(Ai(),ns())},Fe=function(e,t){var n=Zu;Zu|=2;try{return e(t)}finally{0===(Zu=n)&&(pi(),pa())}};var Ms={Events:[Sl,El,xl,Te,Me,ns,{current:!1}]},Os={findFiberByHostInstance:kl,bundleType:0,version:"17.0.1",rendererPackageName:"react-dom"},Rs={bundleType:Os.bundleType,version:Os.version,rendererPackageName:Os.rendererPackageName,rendererConfig:Os.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=nt(e))?null:e.stateNode},findFiberByHostInstance:Os.findFiberByHostInstance||_s,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Ds=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ds.isDisabled&&Ds.supportsFiber)try{Wl=Ds.inject(Rs),Ql=Ds}catch(Fs){}}exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ms,exports.createPortal=Ts,exports.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(r(188));throw Error(r(268,Object.keys(e)))}return e=null===(e=nt(t))?null:e.stateNode},exports.flushSync=function(e,t){var n=Zu;if(0!=(48&n))return e(t);Zu|=1;try{if(e)return fa(99,e.bind(null,t))}finally{Zu=n,pa()}},exports.hydrate=function(e,t,n){if(!Ps(t))throw Error(r(200));return Ls(null,e,t,!0,n)},exports.render=function(e,t,n){if(!Ps(t))throw Error(r(200));return Ls(null,e,t,!1,n)},exports.unmountComponentAtNode=function(e){if(!Ps(e))throw Error(r(40));return!!e._reactRootContainer&&(Wi(function(){Ls(null,null,e,!1,function(){e._reactRootContainer=null,e[bl]=null})}),!0)},exports.unstable_batchedUpdates=Bi,exports.unstable_createPortal=function(e,t){return Ts(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},exports.unstable_renderSubtreeIntoContainer=function(e,t,n,l){if(!Ps(n))throw Error(r(200));if(null==e||void 0===e._reactInternals)throw Error(r(38));return Ls(e,t,n,!1,l)},exports.version="17.0.1";
},{"react":"HdMw","object-assign":"YOwE","scheduler":"IGIl"}],"X9zx":[function(require,module,exports) {
"use strict";function _(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_)}catch(O){console.error(O)}}}_(),module.exports=require("./cjs/react-dom.production.min.js");
},{"./cjs/react-dom.production.min.js":"jF7N"}],"ZamP":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"eIph":[function(require,module,exports) {
"use strict";function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;
},{}],"Rs9H":[function(require,module,exports) {
"use strict";function e(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"N60M":[function(require,module,exports) {
"use strict";function e(t,r){return exports.default=e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e(t,r)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"RnSb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=t(require("@babel/runtime/helpers/esm/setPrototypeOf"));function t(e){return e&&e.__esModule?e:{default:e}}function r(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&(0,e.default)(t,r)}
},{"@babel/runtime/helpers/esm/setPrototypeOf":"N60M"}],"zsbK":[function(require,module,exports) {
"use strict";function t(o){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?exports.default=t=function(t){return typeof t}:exports.default=t=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(o)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"LwjW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=r(require("@babel/runtime/helpers/esm/typeof")),t=r(require("@babel/runtime/helpers/esm/assertThisInitialized"));function r(e){return e&&e.__esModule?e:{default:e}}function u(r,u){return!u||"object"!==(0,e.default)(u)&&"function"!=typeof u?(0,t.default)(r):u}
},{"@babel/runtime/helpers/esm/typeof":"zsbK","@babel/runtime/helpers/esm/assertThisInitialized":"Rs9H"}],"cYjN":[function(require,module,exports) {
"use strict";function t(e){return exports.default=t=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},t(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"kgel":[function(require,module,exports) {
"use strict";var _="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";module.exports=_;
},{}],"xON7":[function(require,module,exports) {
"use strict";var e=require("./lib/ReactPropTypesSecret");function r(){}function t(){}t.resetWarningCache=r,module.exports=function(){function n(r,t,n,o,a,p){if(p!==e){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}function o(){return n}n.isRequired=n;var a={array:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:o,element:n,elementType:n,instanceOf:o,node:n,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:t,resetWarningCache:r};return a.PropTypes=a,a};
},{"./lib/ReactPropTypesSecret":"kgel"}],"Iix9":[function(require,module,exports) {
var r,e;module.exports=require("./factoryWithThrowingShims")();
},{"./factoryWithThrowingShims":"xON7"}],"KA2S":[function(require,module,exports) {
var define;
var t,r=function(t){"use strict";var r,e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{u({},"")}catch(P){u=function(t,r,e){return t[r]=e}}function h(t,r,e,n){var o=r&&r.prototype instanceof d?r:d,i=Object.create(o.prototype),a=new G(n||[]);return i._invoke=function(t,r,e){var n=l;return function(o,i){if(n===p)throw new Error("Generator is already running");if(n===y){if("throw"===o)throw i;return F()}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var c=j(a,e);if(c){if(c===v)continue;return c}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if(n===l)throw n=y,e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n=p;var u=f(t,r,e);if("normal"===u.type){if(n=e.done?y:s,u.arg===v)continue;return{value:u.arg,done:e.done}}"throw"===u.type&&(n=y,e.method="throw",e.arg=u.arg)}}}(t,e,a),i}function f(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(P){return{type:"throw",arg:P}}}t.wrap=h;var l="suspendedStart",s="suspendedYield",p="executing",y="completed",v={};function d(){}function g(){}function m(){}var w={};w[i]=function(){return this};var L=Object.getPrototypeOf,x=L&&L(L(N([])));x&&x!==e&&n.call(x,i)&&(w=x);var b=m.prototype=d.prototype=Object.create(w);function E(t){["next","throw","return"].forEach(function(r){u(t,r,function(t){return this._invoke(r,t)})})}function _(t,r){var e;this._invoke=function(o,i){function a(){return new r(function(e,a){!function e(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var h=u.arg,l=h.value;return l&&"object"==typeof l&&n.call(l,"__await")?r.resolve(l.__await).then(function(t){e("next",t,a,c)},function(t){e("throw",t,a,c)}):r.resolve(l).then(function(t){h.value=t,a(h)},function(t){return e("throw",t,a,c)})}c(u.arg)}(o,i,e,a)})}return e=e?e.then(a,a):a()}}function j(t,e){var n=t.iterator[e.method];if(n===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=r,j(t,e),"throw"===e.method))return v;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,v;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,v):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,v)}function O(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function k(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function G(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function N(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function e(){for(;++o<t.length;)if(n.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=r,e.done=!0,e};return a.next=a}}return{next:F}}function F(){return{value:r,done:!0}}return g.prototype=b.constructor=m,m.constructor=g,g.displayName=u(m,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===g||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,u(t,c,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},E(_.prototype),_.prototype[a]=function(){return this},t.AsyncIterator=_,t.async=function(r,e,n,o,i){void 0===i&&(i=Promise);var a=new _(h(r,e,n,o),i);return t.isGeneratorFunction(e)?a:a.next().then(function(t){return t.done?t.value:a.next()})},E(b),u(b,c,"Generator"),b[i]=function(){return this},b.toString=function(){return"[object Generator]"},t.keys=function(t){var r=[];for(var e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,G.prototype={constructor:G,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function o(n,o){return c.type="throw",c.arg=t,e.next=n,o&&(e.method="next",e.arg=r),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),h=n.call(a,"finallyLoc");if(u&&h){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),v},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),k(e),v}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;k(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:N(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),v}},t}("object"==typeof module?module.exports:{});try{regeneratorRuntime=r}catch(e){Function("r","regeneratorRuntime = r")(r)}
},{}],"m4eR":[function(require,module,exports) {
module.exports=require("regenerator-runtime");
},{"regenerator-runtime":"KA2S"}],"XQmk":[function(require,module,exports) {
"use strict";function e(e,t,n,r,o,u,i){try{var c=e[u](i),s=c.value}catch(a){return void n(a)}c.done?t(s):Promise.resolve(s).then(r,o)}function t(t){return function(){var n=this,r=arguments;return new Promise(function(o,u){var i=t.apply(n,r);function c(t){e(i,o,u,c,s,"next",t)}function s(t){e(i,o,u,c,s,"throw",t)}c(void 0)})}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"E2ik":[function(require,module,exports) {
"use strict";function e(e,r){if(!e)throw new Error(r||"loader assertion failed.")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"kpD3":[function(require,module,exports) {

var t,e,n=module.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function u(t){if(e===clearTimeout)return clearTimeout(t);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(t);try{return e(t)}catch(n){try{return e.call(null,t)}catch(n){return e.call(this,t)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(n){t=r}try{e="function"==typeof clearTimeout?clearTimeout:o}catch(n){e=o}}();var c,s=[],l=!1,a=-1;function f(){l&&c&&(l=!1,c.length?s=c.concat(s):a=-1,s.length&&h())}function h(){if(!l){var t=i(f);l=!0;for(var e=s.length;e;){for(c=s,s=[];++a<e;)c&&c[a].run();a=-1,e=s.length}c=null,l=!1,u(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!==s.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};
},{}],"TqKA":[function(require,module,exports) {
var global = arguments[3];
var process = require("process");
var e=arguments[3],o=require("process");Object.defineProperty(exports,"__esModule",{value:!0}),exports.nodeVersion=exports.isWorker=exports.isBrowser=exports.document=exports.global=exports.window=exports.self=void 0;var r=s(require("@babel/runtime/helpers/esm/typeof"));function s(e){return e&&e.__esModule?e:{default:e}}var t={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==e&&e,document:"undefined"!=typeof document&&document},n=t.self||t.window||t.global;exports.self=n;var d=t.window||t.self||t.global;exports.window=d;var i=t.global||t.self||t.window;exports.global=i;var l=t.document||{};exports.document=l;var p="object"!==(void 0===o?"undefined":(0,r.default)(o))||"[object process]"!==String(o)||!0;exports.isBrowser=p;var a="function"==typeof importScripts;exports.isWorker=a;var f=void 0!==o&&o.version&&o.version.match(/v([0-9]*)/),u=f&&parseFloat(f[1])||0;exports.nodeVersion=u;
},{"@babel/runtime/helpers/esm/typeof":"zsbK","process":"kpD3"}],"iDM3":[function(require,module,exports) {
"use strict";function e(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"XO18":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getTransferList=r;var e=f(require("@babel/runtime/helpers/esm/typeof"));function f(e){return e&&e.__esModule?e:{default:e}}function r(f){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2?arguments[2]:void 0,a=i||new Set;if(f){if(n(f))a.add(f);else if(n(f.buffer))a.add(f.buffer);else if(ArrayBuffer.isView(f));else if(t&&"object"===(0,e.default)(f))for(var s in f)r(f[s],t,a)}else;return void 0===i?Array.from(a):[]}function n(e){return!!e&&(e instanceof ArrayBuffer||("undefined"!=typeof MessagePort&&e instanceof MessagePort||("undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas)))}
},{"@babel/runtime/helpers/esm/typeof":"zsbK"}],"pq8m":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.validateLoaderVersion=o;var e=r(require("../env-utils/assert"));function r(e){return e&&e.__esModule?e:{default:e}}var t="2.3.7";function o(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;(0,e.default)(r,"no loader provided");var n=r.version;o&&n&&(o=a(o),n=a(n))}function a(e){var r=e.split(".").map(Number);return{major:r[0],minor:r[1]}}
},{"../env-utils/assert":"E2ik"}],"C8ll":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;var e=a(require("@babel/runtime/helpers/esm/defineProperty")),r=a(require("@babel/runtime/regenerator")),t=a(require("@babel/runtime/helpers/esm/asyncToGenerator")),n=require("../worker-utils/get-transfer-list"),s=require("./validate-loader-version");function a(e){return e&&e.__esModule?e:{default:e}}function o(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function u(r){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach(function(t){(0,e.default)(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))})}return r}function i(e){if("undefined"!=typeof self){var a,o=0,u=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2?arguments[2]:void 0;return new Promise(function(n,s){var a=o++;self.addEventListener("message",function e(r){var t=r.data;if(t&&t.id===a)switch(t.type){case"parse-done":self.removeEventListener("message",e),n(t.result);break;case"parse-error":self.removeEventListener("message",e),s(t.message)}}),self.postMessage({type:"parse",id:a,arraybuffer:e,options:r,url:t},[e])})};self.onmessage=(a=(0,t.default)(r.default.mark(function t(a){var o,i,f,l,d,b,y,v,g,m;return r.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(o=a.data,r.prev=1,p(o,e.name)){r.next=4;break}return r.abrupt("return");case 4:return(0,s.validateLoaderVersion)(e,o.source.split("@")[1]),i=o.arraybuffer,f=o.byteOffset,l=void 0===f?0:f,d=o.byteLength,b=void 0===d?0:d,y=o.options,v=void 0===y?{}:y,r.next=8,c({loader:e,arraybuffer:i,byteOffset:l,byteLength:b,options:v,context:{parse:u}});case 8:g=r.sent,m=(0,n.getTransferList)(g),self.postMessage({type:"done",result:g},m),r.next=16;break;case 13:r.prev=13,r.t0=r.catch(1),self.postMessage({type:"error",message:r.t0.message});case 16:case"end":return r.stop()}},t,null,[[1,13]])})),function(e){return a.apply(this,arguments)})}}function c(e){return f.apply(this,arguments)}function f(){return(f=(0,t.default)(r.default.mark(function e(t){var n,s,a,o,i,c,f;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.loader,s=t.arraybuffer,t.byteOffset,t.byteLength,a=t.options,o=t.context,!n.parseSync&&!n.parse){e.next=6;break}i=s,c=n.parseSync||n.parse,e.next=13;break;case 6:if(!n.parseTextSync){e.next=12;break}f=new TextDecoder,i=f.decode(s),c=n.parseTextSync,e.next=13;break;case 12:throw new Error("Could not load data with ".concat(n.name," loader"));case 13:return a=u(u({},a),{},{modules:n&&n.options&&n.options.modules||{},worker:!1}),e.next=16,c(i,u({},a),o,n);case 16:return e.abrupt("return",e.sent);case 17:case"end":return e.stop()}},e)}))).apply(this,arguments)}function p(e,r){return e&&"parse"===e.type&&e.source&&e.source.startsWith("loaders.gl")}
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","../worker-utils/get-transfer-list":"XO18","./validate-loader-version":"pq8m"}],"U9x2":[function(require,module,exports) {
"use strict";function e(e){this.wrapped=e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"EMU2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=t(require("@babel/runtime/helpers/esm/AwaitValue"));function t(e){return e&&e.__esModule?e:{default:e}}function r(t){return new e.default(t)}
},{"@babel/runtime/helpers/esm/AwaitValue":"U9x2"}],"aZtj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=t(require("@babel/runtime/helpers/esm/AwaitValue"));function t(e){return e&&e.__esModule?e:{default:e}}function r(t){var r,n;function o(r,n){try{var i=t[r](n),a=i.value,c=a instanceof e.default;Promise.resolve(c?a.wrapped:a).then(function(e){c?o("return"===r?"return":"next",e):u(i.done?"return":"normal",e)},function(e){o("throw",e)})}catch(s){u("throw",s)}}function u(e,t){switch(e){case"return":r.resolve({value:t,done:!0});break;case"throw":r.reject(t);break;default:r.resolve({value:t,done:!1})}(r=r.next)?o(r.key,r.arg):n=null}this._invoke=function(e,t){return new Promise(function(u,i){var a={key:e,arg:t,resolve:u,reject:i,next:null};n?n=n.next=a:(r=n=a,o(e,t))})},"function"!=typeof t.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(r.prototype[Symbol.asyncIterator]=function(){return this}),r.prototype.next=function(e){return this._invoke("next",e)},r.prototype.throw=function(e){return this._invoke("throw",e)},r.prototype.return=function(e){return this._invoke("return",e)};
},{"@babel/runtime/helpers/esm/AwaitValue":"U9x2"}],"SBb5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=r(require("@babel/runtime/helpers/esm/AsyncGenerator"));function r(e){return e&&e.__esModule?e:{default:e}}function t(r){return function(){return new e.default(r.apply(this,arguments))}}
},{"@babel/runtime/helpers/esm/AsyncGenerator":"aZtj"}],"bQZY":[function(require,module,exports) {
"use strict";function e(e){var r;if("undefined"!=typeof Symbol){if(Symbol.asyncIterator&&null!=(r=e[Symbol.asyncIterator]))return r.call(e);if(Symbol.iterator&&null!=(r=e[Symbol.iterator]))return r.call(e)}throw new TypeError("Object is not async iterable")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"sajY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.makeTransformIterator=u;var e=a(require("@babel/runtime/regenerator")),r=a(require("@babel/runtime/helpers/esm/awaitAsyncGenerator")),t=a(require("@babel/runtime/helpers/esm/wrapAsyncGenerator")),n=a(require("@babel/runtime/helpers/esm/asyncIterator"));function a(e){return e&&e.__esModule?e:{default:e}}function u(e,r,t){return s.apply(this,arguments)}function s(){return(s=(0,t.default)(e.default.mark(function t(a,u,s){var c,i,l,f,o,p,x,b,d,h;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:c=new u(s),i=!0,l=!1,e.prev=3,o=(0,n.default)(a);case 5:return e.next=7,(0,r.default)(o.next());case 7:return p=e.sent,i=p.done,e.next=11,(0,r.default)(p.value);case 11:if(x=e.sent,i){e.next=23;break}return b=x,e.next=16,(0,r.default)(c.write(b));case 16:if(!(d=e.sent)){e.next=20;break}return e.next=20,d;case 20:i=!0,e.next=5;break;case 23:e.next=29;break;case 25:e.prev=25,e.t0=e.catch(3),l=!0,f=e.t0;case 29:if(e.prev=29,e.prev=30,i||null==o.return){e.next=34;break}return e.next=34,(0,r.default)(o.return());case 34:if(e.prev=34,!l){e.next=37;break}throw f;case 37:return e.finish(34);case 38:return e.finish(29);case 39:return e.next=41,(0,r.default)(c.end());case 41:if(!(h=e.sent)){e.next=45;break}return e.next=45,h;case 45:case"end":return e.stop()}},t,null,[[3,25,29,39],[30,,34,38]])}))).apply(this,arguments)}
},{"@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/awaitAsyncGenerator":"EMU2","@babel/runtime/helpers/esm/wrapAsyncGenerator":"SBb5","@babel/runtime/helpers/esm/asyncIterator":"bQZY"}],"itmo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getWorkerURL=n;var r=t(require("../env-utils/assert"));function t(r){return r&&r.__esModule?r:{default:r}}var e=new Map;function n(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];if((0,r.default)("string"==typeof t,"worker source"),t.startsWith("url(")&&t.endsWith(")")){var n=t.match(/^url\((.*)\)$/)[1];if(n&&!n.startsWith("http"))return n;t=o(n)}var a=e.get(t);if(!a){var i=new Blob([t],{type:"application/javascript"});a=URL.createObjectURL(i),e.set(t,a)}return a}function o(r){return"try {\n  importScripts('".concat(r,"');\n} catch (error) {\n  console.error(error);\n}")}
},{"../env-utils/assert":"E2ik"}],"TMOU":[function(require,module,exports) {
var process = require("process");
var e=require("process");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=u(require("@babel/runtime/regenerator")),t=u(require("@babel/runtime/helpers/esm/asyncToGenerator")),a=u(require("@babel/runtime/helpers/esm/classCallCheck")),n=u(require("@babel/runtime/helpers/esm/createClass")),o=require("./get-worker-url"),s=require("./get-transfer-list");function u(e){return e&&e.__esModule?e:{default:e}}var i=0;function c(e){var r=e.data;(0,e.resolve)(r)}var l=function(){function e(r){var t=r.source,n=r.name,s=void 0===n?"web-worker-".concat(i++):n,u=r.onMessage;(0,a.default)(this,e);var l=(0,o.getWorkerURL)(t,s);this.worker=new Worker(l,{name:s}),this.name=s,this.onMessage=u||c}return(0,n.default)(e,[{key:"process",value:function(){var e=(0,t.default)(r.default.mark(function e(t){var a=this;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,r){a.worker.onmessage=function(t){a.onMessage({worker:a.worker,data:t.data,resolve:e,reject:r})},a.worker.onerror=function(e){var t="".concat(a.name,": WorkerThread.process() failed");e.message&&(t+=" ".concat(e.message," ").concat(e.filename,":").concat(e.lineno,":").concat(e.colno));var n=new Error(t);console.error(e),r(n)};var n=(0,s.getTransferList)(t);a.worker.postMessage(t,n)}));case 1:case"end":return e.stop()}},e)}));return function(r){return e.apply(this,arguments)}}()},{key:"destroy",value:function(){this.worker.terminate(),this.worker=null}}]),e}();exports.default=l;
},{"@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","./get-worker-url":"itmo","./get-transfer-list":"XO18","process":"kpD3"}],"j7wA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("@babel/runtime/regenerator")),t=n(require("@babel/runtime/helpers/esm/asyncToGenerator")),r=n(require("@babel/runtime/helpers/esm/classCallCheck")),s=n(require("@babel/runtime/helpers/esm/createClass")),u=n(require("./worker-thread"));function n(e){return e&&e.__esModule?e:{default:e}}var o=function(){function n(e){var t=e.source,s=e.name,u=void 0===s?"unnamed":s,o=e.maxConcurrency,i=void 0===o?1:o,a=e.onMessage,c=e.onDebug,h=void 0===c?function(){}:c,l=e.reuseWorkers,d=void 0===l||l;(0,r.default)(this,n),this.source=t,this.name=u,this.maxConcurrency=i,this.onMessage=a,this.onDebug=h,this.jobQueue=[],this.idleQueue=[],this.count=0,this.isDestroyed=!1,this.reuseWorkers=d}return(0,s.default)(n,[{key:"destroy",value:function(){this.idleQueue.forEach(function(e){return e.destroy()}),this.isDestroyed=!0}},{key:"process",value:function(e,t){var r=this;return new Promise(function(s,u){r.jobQueue.push({data:e,jobName:t,resolve:s,reject:u}),r._startQueuedJob()})}},{key:"_startQueuedJob",value:function(){var r=(0,t.default)(e.default.mark(function t(){var r,s;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.jobQueue.length){e.next=2;break}return e.abrupt("return");case 2:if(r=this._getAvailableWorker()){e.next=5;break}return e.abrupt("return");case 5:return s=this.jobQueue.shift(),this.onDebug({message:"processing",worker:r.name,job:s.jobName,backlog:this.jobQueue.length}),e.prev=7,e.t0=s,e.next=11,r.process(s.data);case 11:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=18;break;case 15:e.prev=15,e.t2=e.catch(7),s.reject(e.t2);case 18:return e.prev=18,this._onWorkerDone(r),e.finish(18);case 21:case"end":return e.stop()}},t,this,[[7,15,18,21]])}));return function(){return r.apply(this,arguments)}}()},{key:"_onWorkerDone",value:function(e){this.isDestroyed?e.destroy():(this.reuseWorkers?this.idleQueue.push(e):(e.destroy(),this.count--),this._startQueuedJob())}},{key:"_getAvailableWorker",value:function(){if(this.idleQueue.length>0)return this.idleQueue.shift();if(this.count<this.maxConcurrency){this.count++;var e="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new u.default({source:this.source,onMessage:this.onMessage,name:e})}return null}}]),n}();exports.default=o;
},{"@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","./worker-thread":"TMOU"}],"R2RJ":[function(require,module,exports) {
var process = require("process");
var e=require("process");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=u(require("@babel/runtime/regenerator")),o=u(require("@babel/runtime/helpers/esm/asyncToGenerator")),s=u(require("@babel/runtime/helpers/esm/classCallCheck")),n=u(require("@babel/runtime/helpers/esm/createClass")),t=u(require("./worker-pool"));function u(e){return e&&e.__esModule?e:{default:e}}var a=5,i=function(){function e(r){var o=r.maxConcurrency,n=void 0===o?a:o,t=r.onMessage,u=void 0===t?null:t,i=r.onDebug,c=void 0===i?function(){}:i,l=r.reuseWorkers,f=void 0===l||l;(0,s.default)(this,e),this.maxConcurrency=n,this.onMessage=u,this.onDebug=c,this.workerPools=new Map,this.reuseWorkers=f}return(0,n.default)(e,null,[{key:"isSupported",value:function(){return"undefined"!=typeof Worker}}]),(0,n.default)(e,[{key:"setProps",value:function(e){"maxConcurrency"in e&&(this.maxConcurrency=e.maxConcurrency),"onDebug"in e&&(this.onDebug=e.onDebug),"reuseWorkers"in e&&(this.reuseWorkers=e.reuseWorkers)}},{key:"destroy",value:function(){this.workerPools.forEach(function(e){return e.destroy()})}},{key:"process",value:function(){var e=(0,o.default)(r.default.mark(function e(o,s,n){var t;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._getWorkerPool(o,s),e.abrupt("return",t.process(n));case 2:case"end":return e.stop()}},e,this)}));return function(r,o,s){return e.apply(this,arguments)}}()},{key:"_getWorkerPool",value:function(e,r){var o=this.workerPools.get(r);return o||(o=new t.default({source:e,name:r,onMessage:c.bind(null,this.onMessage),maxConcurrency:this.maxConcurrency,onDebug:this.onDebug,reuseWorkers:this.reuseWorkers}),this.workerPools.set(r,o)),o}}]),e}();function c(e,r){var o=r.worker,s=r.data,n=r.resolve,t=r.reject;if(e)e({worker:o,data:s,resolve:n,reject:t});else switch(s.type){case"done":n(s.result);break;case"error":t(s.message)}}exports.default=i;
},{"@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","./worker-pool":"j7wA","process":"kpD3"}],"oZAK":[function(require,module,exports) {

},{}],"ZZsZ":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.loadLibrary=f,exports.getLibraryUrl=d;var e=o(require("@babel/runtime/regenerator")),r=o(require("@babel/runtime/helpers/esm/asyncToGenerator")),t=require("../env-utils/globals"),n=i(require("../node/require-utils.node")),u=o(require("../env-utils/assert"));function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var i=n?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(t,u,i):t[u]=e[u]}return t.default=e,r&&r.set(e,t),t}function o(e){return e&&e.__esModule?e:{default:e}}var c="beta",s="2.3.7",l={};function f(e){return p.apply(this,arguments)}function p(){return(p=(0,r.default)(e.default.mark(function r(t){var n,u,a=arguments;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:null,u=a.length>2&&void 0!==a[2]?a[2]:{},n&&(t=d(t,n,u)),l[t]=l[t]||b(t),e.next=6,l[t];case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},r)}))).apply(this,arguments)}function d(e,r,n){var a=n.modules||{};return a[e]?a[e]:t.isBrowser?n.CDN?((0,u.default)(n.CDN.startsWith("http")),"".concat(n.CDN,"/").concat(r,"@").concat(s,"/dist/libs/").concat(e)):t.isWorker?"../src/libs/".concat(e):"modules/".concat(r,"/src/libs/").concat(e):"modules/".concat(r,"/dist/libs/").concat(e)}function b(e){return y.apply(this,arguments)}function y(){return(y=(0,r.default)(e.default.mark(function r(u){var a,i,o;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!u.endsWith("wasm")){e.next=7;break}return e.next=3,fetch(u);case 3:return a=e.sent,e.next=6,a.arrayBuffer();case 6:return e.abrupt("return",e.sent);case 7:if(t.isBrowser){e.next=9;break}return e.abrupt("return",n.requireFromFile&&n.requireFromFile(u));case 9:if(!t.isWorker){e.next=11;break}return e.abrupt("return",importScripts(u));case 11:return e.next=13,fetch(u);case 13:return i=e.sent,e.next=16,i.text();case 16:return o=e.sent,e.abrupt("return",h(o,u));case 18:case"end":return e.stop()}},r)}))).apply(this,arguments)}function h(e,r){if(!t.isBrowser)return n.requireFromString&&n.requireFromString(e,r);if(t.isWorker)return eval.call(t.global,e),null;var u=document.createElement("script");u.id=r;try{u.appendChild(document.createTextNode(e))}catch(a){u.text=e}return document.body.appendChild(u),null}
},{"@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","../env-utils/globals":"TqKA","../node/require-utils.node":"oZAK","../env-utils/assert":"E2ik"}],"BEhU":[function(require,module,exports) {
"use strict";function e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if("string"==typeof e)return e.slice(0,t);if(ArrayBuffer.isView(e))return r(e.buffer,e.byteOffset,t);if(e instanceof ArrayBuffer){return r(e,0,t)}return""}function r(e,r,t){if(e.byteLength<=r+t)return"";for(var i=new DataView(e),n="",f=0;f<t;f++)n+=String.fromCharCode(i.getUint8(r+f));return n}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getFirstCharacters=e,exports.getMagicString=r;
},{}],"icoB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseJSON=t;var r=require("../binary-utils/get-first-characters");function t(t){try{return JSON.parse(t)}catch(e){throw new Error('Failed to parse JSON from data starting with "'.concat((0,r.getFirstCharacters)(t),'"'))}}
},{"../binary-utils/get-first-characters":"BEhU"}],"Euni":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isBuffer=n,exports.toBuffer=o,exports.bufferToArrayBuffer=i;var e=u(require("@babel/runtime/helpers/esm/typeof")),r=f(require("../node/buffer-utils.node"));function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function f(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t();if(r&&r.has(e))return r.get(e);var f={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=u?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(f,n,o):f[n]=e[n]}return f.default=e,r&&r.set(e,f),f}function u(e){return e&&e.__esModule?e:{default:e}}function n(r){return r&&"object"===(0,e.default)(r)&&r.isBuffer}function o(e){return r.toBuffer?r.toBuffer(e):e}function i(e){return r.toArrayBuffer?r.toArrayBuffer(e):e}
},{"@babel/runtime/helpers/esm/typeof":"zsbK","../node/buffer-utils.node":"oZAK"}],"nOgr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.toArrayBuffer=y,exports.compareArrayBuffers=c,exports.concatenateArrayBuffers=l,exports.sliceArrayBuffer=s;var r=f(require("@babel/runtime/helpers/esm/typeof")),e=f(require("../env-utils/assert")),t=o(require("../node/buffer-utils.node"));function n(){if("function"!=typeof WeakMap)return null;var r=new WeakMap;return n=function(){return r},r}function o(r){if(r&&r.__esModule)return r;if(null===r||"object"!=typeof r&&"function"!=typeof r)return{default:r};var e=n();if(e&&e.has(r))return e.get(r);var t={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in r)if(Object.prototype.hasOwnProperty.call(r,f)){var u=o?Object.getOwnPropertyDescriptor(r,f):null;u&&(u.get||u.set)?Object.defineProperty(t,f,u):t[f]=r[f]}return t.default=r,e&&e.set(r,t),t}function f(r){return r&&r.__esModule?r:{default:r}}function u(r,e){var t;if("undefined"==typeof Symbol||null==r[Symbol.iterator]){if(Array.isArray(r)||(t=a(r))||e&&r&&"number"==typeof r.length){t&&(r=t);var n=0,o=function(){};return{s:o,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(r){throw r},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var f,u=!0,i=!1;return{s:function(){t=r[Symbol.iterator]()},n:function(){var r=t.next();return u=r.done,r},e:function(r){i=!0,f=r},f:function(){try{u||null==t.return||t.return()}finally{if(i)throw f}}}}function a(r,e){if(r){if("string"==typeof r)return i(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?i(r,e):void 0}}function i(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function y(n){if(t.toArrayBuffer&&(n=t.toArrayBuffer(n)),n instanceof ArrayBuffer)return n;if(ArrayBuffer.isView(n))return n.buffer;if("string"==typeof n){var o=n;return(new TextEncoder).encode(o).buffer}return n&&"object"===(0,r.default)(n)&&n._toArrayBuffer?n._toArrayBuffer():(0,e.default)(!1)}function c(r,e,t){if(t=t||r.byteLength,r.byteLength<t||e.byteLength<t)return!1;for(var n=new Uint8Array(r),o=new Uint8Array(e),f=0;f<n.length;++f)if(n[f]!==o[f])return!1;return!0}function l(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];var n,o=e.map(function(r){return r instanceof ArrayBuffer?new Uint8Array(r):r}),f=o.reduce(function(r,e){return r+e.byteLength},0),a=new Uint8Array(f),i=0,y=u(o);try{for(y.s();!(n=y.n()).done;){var c=n.value;a.set(c,i),i+=c.byteLength}}catch(l){y.e(l)}finally{y.f()}return a.buffer}function s(r,e,t){var n=void 0!==t?new Uint8Array(r).subarray(e,e+t):new Uint8Array(r).subarray(e);return new Uint8Array(n).buffer}
},{"@babel/runtime/helpers/esm/typeof":"zsbK","../env-utils/assert":"E2ik","../node/buffer-utils.node":"oZAK"}],"FUVZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.padTo4Bytes=e,exports.getZeroOffsetArrayBuffer=t,exports.copyArrayBuffer=n,exports.copyToArray=f;var r=require("./array-buffer-utils");function e(r){return r+3&-4}function t(e,t,n){return(0,r.sliceArrayBuffer)(e,t,n)}function n(r,e,t){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.byteLength,f=new Uint8Array(r,t,n),u=new Uint8Array(e);return f.set(u),r}function f(r,t,n){var f;if(r instanceof ArrayBuffer)f=new Uint8Array(r);else{var u=r.byteOffset,a=r.byteLength;f=new Uint8Array(r.buffer,u,a)}return t.set(f,n),n+e(f.byteLength)}
},{"./array-buffer-utils":"nOgr"}],"R2Fl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.copyPaddedArrayBufferToDataView=t,exports.copyPaddedStringToDataView=r;var e=require("./memory-copy-utils");function t(t,r,n){var o=(0,e.padTo4Bytes)(n.byteLength),a=o-n.byteLength;if(t){var y=new Uint8Array(t.buffer,t.byteOffset+r,n.byteLength),i=new Uint8Array(n);y.set(i);for(var d=0;d<a;++d)t.setUint8(r+n.byteLength+d,32)}return r+=o}function r(e,r,n){return r=t(e,r,(new TextEncoder).encode(n))}
},{"./memory-copy-utils":"FUVZ"}],"WMJ2":[function(require,module,exports) {
"use strict";function t(t,e){for(var r=t.length,n=Math.ceil(r/e)*e-r,o="",i=0;i<n;++i)o+=" ";return t+o}function e(t,e,r,n){if(t)for(var o=0;o<n;o++)t.setUint8(e+o,r.charCodeAt(o));return e+n}function r(t,e,r,n){if(t)for(var o=0;o<n;o++)t.setUint8(e+o,r[o]),e++;return e+n}Object.defineProperty(exports,"__esModule",{value:!0}),exports.padStringToByteAlignment=t,exports.copyStringToDataView=e,exports.copyBinaryToDataView=r;
},{}],"hewW":[function(require,module,exports) {
"use strict";function e(e){var r=e&&e.lastIndexOf("/");return r>=0?e.substr(0,r):""}Object.defineProperty(exports,"__esModule",{value:!0}),exports.dirname=e;
},{}],"WQDH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setPathPrefix=r,exports.getPathPrefix=s,exports.addAliases=a,exports.resolvePath=i;var t="",e={};function r(e){t=e}function s(){return t}function a(t){Object.assign(e,t)}function i(r){for(var s in e)if(r.startsWith(s)){var a=e[s];r=r.replace(s,a)}return r.startsWith("http://")||r.startsWith("https://")||(r="".concat(t).concat(r)),r}
},{}],"TOPb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.makeTextDecoderIterator=u,exports.makeTextEncoderIterator=c,exports.makeLineIterator=f,exports.makeNumberedLineIterator=p;var e=a(require("@babel/runtime/regenerator")),t=a(require("@babel/runtime/helpers/esm/awaitAsyncGenerator")),r=a(require("@babel/runtime/helpers/esm/wrapAsyncGenerator")),n=a(require("@babel/runtime/helpers/esm/asyncIterator"));function a(e){return e&&e.__esModule?e:{default:e}}function u(e,t){return s.apply(this,arguments)}function s(){return(s=(0,r.default)(e.default.mark(function r(a,u){var s,c,i,f,l,p,o,x;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s=new TextDecoder(u),c=!0,i=!1,e.prev=3,l=(0,n.default)(a);case 5:return e.next=7,(0,t.default)(l.next());case 7:return p=e.sent,c=p.done,e.next=11,(0,t.default)(p.value);case 11:if(o=e.sent,c){e.next=19;break}return x=o,e.next=16,"string"==typeof x?x:s.decode(x,{stream:!0});case 16:c=!0,e.next=5;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(3),i=!0,f=e.t0;case 25:if(e.prev=25,e.prev=26,c||null==l.return){e.next=30;break}return e.next=30,(0,t.default)(l.return());case 30:if(e.prev=30,!i){e.next=33;break}throw f;case 33:return e.finish(30);case 34:return e.finish(25);case 35:case"end":return e.stop()}},r,null,[[3,21,25,35],[26,,30,34]])}))).apply(this,arguments)}function c(e,t){return i.apply(this,arguments)}function i(){return(i=(0,r.default)(e.default.mark(function r(a,u){var s,c,i,f,l,p,o,x;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s=new TextEncoder,c=!0,i=!1,e.prev=3,l=(0,n.default)(a);case 5:return e.next=7,(0,t.default)(l.next());case 7:return p=e.sent,c=p.done,e.next=11,(0,t.default)(p.value);case 11:if(o=e.sent,c){e.next=19;break}return x=o,e.next=16,"string"==typeof x?s.encode(x):x;case 16:c=!0,e.next=5;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(3),i=!0,f=e.t0;case 25:if(e.prev=25,e.prev=26,c||null==l.return){e.next=30;break}return e.next=30,(0,t.default)(l.return());case 30:if(e.prev=30,!i){e.next=33;break}throw f;case 33:return e.finish(30);case 34:return e.finish(25);case 35:case"end":return e.stop()}},r,null,[[3,21,25,35],[26,,30,34]])}))).apply(this,arguments)}function f(e){return l.apply(this,arguments)}function l(){return(l=(0,r.default)(e.default.mark(function r(a){var u,s,c,i,f,l,p,o,x;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:u="",s=!0,c=!1,e.prev=3,f=(0,n.default)(a);case 5:return e.next=7,(0,t.default)(f.next());case 7:return l=e.sent,s=l.done,e.next=11,(0,t.default)(l.value);case 11:if(p=e.sent,s){e.next=26;break}u+=p,o=void 0;case 16:if(!((o=u.indexOf("\n"))>=0)){e.next=23;break}return x=u.slice(0,o+1),u=u.slice(o+1),e.next=21,x;case 21:e.next=16;break;case 23:s=!0,e.next=5;break;case 26:e.next=32;break;case 28:e.prev=28,e.t0=e.catch(3),c=!0,i=e.t0;case 32:if(e.prev=32,e.prev=33,s||null==f.return){e.next=37;break}return e.next=37,(0,t.default)(f.return());case 37:if(e.prev=37,!c){e.next=40;break}throw i;case 40:return e.finish(37);case 41:return e.finish(32);case 42:if(!(u.length>0)){e.next=45;break}return e.next=45,u;case 45:case"end":return e.stop()}},r,null,[[3,28,32,42],[33,,37,41]])}))).apply(this,arguments)}function p(e){return o.apply(this,arguments)}function o(){return(o=(0,r.default)(e.default.mark(function r(a){var u,s,c,i,f,l,p,o;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:u=1,s=!0,c=!1,e.prev=3,f=(0,n.default)(a);case 5:return e.next=7,(0,t.default)(f.next());case 7:return l=e.sent,s=l.done,e.next=11,(0,t.default)(l.value);case 11:if(p=e.sent,s){e.next=20;break}return o=p,e.next=16,{counter:u,line:o};case 16:u++;case 17:s=!0,e.next=5;break;case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(3),c=!0,i=e.t0;case 26:if(e.prev=26,e.prev=27,s||null==f.return){e.next=31;break}return e.next=31,(0,t.default)(f.return());case 31:if(e.prev=31,!c){e.next=34;break}throw i;case 34:return e.finish(31);case 35:return e.finish(26);case 36:case"end":return e.stop()}},r,null,[[3,22,26,36],[27,,31,35]])}))).apply(this,arguments)}
},{"@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/awaitAsyncGenerator":"EMU2","@babel/runtime/helpers/esm/wrapAsyncGenerator":"SBb5","@babel/runtime/helpers/esm/asyncIterator":"bQZY"}],"U5IM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.forEach=s,exports.concatenateChunksAsync=i;var e=u(require("@babel/runtime/regenerator")),r=u(require("@babel/runtime/helpers/esm/asyncToGenerator")),t=u(require("@babel/runtime/helpers/esm/asyncIterator")),n=require("../binary-utils/array-buffer-utils"),a=u(require("../env-utils/assert"));function u(e){return e&&e.__esModule?e:{default:e}}function s(e,r){return c.apply(this,arguments)}function c(){return(c=(0,r.default)(e.default.mark(function r(t,n){var a,u,s;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,t.next();case 3:if(a=e.sent,u=a.done,s=a.value,!u){e.next=9;break}return t.return(),e.abrupt("return");case 9:if(!n(s)){e.next=12;break}return e.abrupt("return");case 12:e.next=0;break;case 14:case"end":return e.stop()}},r)}))).apply(this,arguments)}function i(e){return f.apply(this,arguments)}function f(){return(f=(0,r.default)(e.default.mark(function r(u){var s,c,i,f,p,l,o,b,x;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s=[],c=[],i=!0,f=!1,e.prev=4,l=(0,t.default)(u);case 6:return e.next=8,l.next();case 8:return o=e.sent,i=o.done,e.next=12,o.value;case 12:if(b=e.sent,i){e.next=19;break}"string"==typeof(x=b)?c.push(x):s.push(x);case 16:i=!0,e.next=6;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(4),f=!0,p=e.t0;case 25:if(e.prev=25,e.prev=26,i||null==l.return){e.next=30;break}return e.next=30,l.return();case 30:if(e.prev=30,!f){e.next=33;break}throw p;case 33:return e.finish(30);case 34:return e.finish(25);case 35:if(!(c.length>0)){e.next=38;break}return(0,a.default)(0===s.length),e.abrupt("return",c.join(""));case 38:return e.abrupt("return",n.concatenateArrayBuffers.apply(void 0,s));case 39:case"end":return e.stop()}},r,null,[[4,21,25,35],[26,,30,34]])}))).apply(this,arguments)}
},{"@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","@babel/runtime/helpers/esm/asyncIterator":"bQZY","../binary-utils/array-buffer-utils":"nOgr","../env-utils/assert":"E2ik"}],"Fw0K":[function(require,module,exports) {
var process = require("process");
var e=require("process");function r(){var r;if("undefined"!=typeof window&&window.performance)r=window.performance.now();else if(void 0!==e&&e.hrtime){var o=e.hrtime();r=1e3*o[0]+o[1]/1e6}else r=Date.now();return r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;
},{"process":"kpD3"}],"unm0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=s(require("@babel/runtime/helpers/esm/classCallCheck")),e=s(require("@babel/runtime/helpers/esm/createClass")),i=s(require("../utils/hi-res-timestamp"));function s(t){return t&&t.__esModule?t:{default:t}}var n=function(){function s(e,i){(0,t.default)(this,s),this.name=e,this.type=i,this.sampleSize=1,this.reset()}return(0,e.default)(s,[{key:"setSampleSize",value:function(t){return this.sampleSize=t,this}},{key:"incrementCount",value:function(){return this.addCount(1),this}},{key:"decrementCount",value:function(){return this.subtractCount(1),this}},{key:"addCount",value:function(t){return this._count+=t,this._samples++,this._checkSampling(),this}},{key:"subtractCount",value:function(t){return this._count-=t,this._samples++,this._checkSampling(),this}},{key:"addTime",value:function(t){return this._time+=t,this.lastTiming=t,this._samples++,this._checkSampling(),this}},{key:"timeStart",value:function(){return this._startTime=(0,i.default)(),this._timerPending=!0,this}},{key:"timeEnd",value:function(){return this._timerPending?(this.addTime((0,i.default)()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}},{key:"getSampleAverageCount",value:function(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}},{key:"getSampleAverageTime",value:function(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}},{key:"getSampleHz",value:function(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}},{key:"getAverageCount",value:function(){return this.samples>0?this.count/this.samples:0}},{key:"getAverageTime",value:function(){return this.samples>0?this.time/this.samples:0}},{key:"getHz",value:function(){return this.time>0?this.samples/(this.time/1e3):0}},{key:"reset",value:function(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}},{key:"_checkSampling",value:function(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}]),s}();exports.default=n;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","../utils/hi-res-timestamp":"Fw0K"}],"LxIK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=a(require("@babel/runtime/helpers/esm/classCallCheck")),e=a(require("@babel/runtime/helpers/esm/createClass")),s=a(require("./stat"));function a(t){return t&&t.__esModule?t:{default:t}}var r=function(){function a(e){var s=e.id,r=e.stats;(0,t.default)(this,a),this.id=s,this.stats={},this._initializeStats(r),Object.seal(this)}return(0,e.default)(a,[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"count";return this._getOrCreate({name:t,type:e})}},{key:"reset",value:function(){for(var t in this.stats)this.stats[t].reset();return this}},{key:"forEach",value:function(t){for(var e in this.stats)t(this.stats[e])}},{key:"getTable",value:function(){var t={};return this.forEach(function(e){t[e.name]={time:e.time||0,count:e.count||0,average:e.getAverageTime()||0,hz:e.getHz()||0}}),t}},{key:"_initializeStats",value:function(){var t=this;(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(function(e){return t._getOrCreate(e)})}},{key:"_getOrCreate",value:function(t){if(!t||!t.name)return null;var e=t.name,a=t.type;return this.stats[e]||(t instanceof s.default?this.stats[e]=t:this.stats[e]=new s.default(e,a)),this.stats[e]}},{key:"size",get:function(){return Object.keys(this.stats).length}}]),a}();exports.default=r;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","./stat":"unm0"}],"SZdt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Stats",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"Stat",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"_getHiResTimestamp",{enumerable:!0,get:function(){return r.default}});var e=u(require("./lib/stats")),t=u(require("./lib/stat")),r=u(require("./utils/hi-res-timestamp"));function u(e){return e&&e.__esModule?e:{default:e}}
},{"./lib/stats":"LxIK","./lib/stat":"unm0","./utils/hi-res-timestamp":"Fw0K"}],"tWMk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("@babel/runtime/helpers/esm/defineProperty")),t=u(require("@babel/runtime/helpers/esm/classCallCheck")),s=u(require("@babel/runtime/helpers/esm/createClass")),r=require("@probe.gl/stats");function u(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function n(t){for(var s=1;s<arguments.length;s++){var r=null!=arguments[s]?arguments[s]:{};s%2?i(Object(r),!0).forEach(function(s){(0,e.default)(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var o="Queued Requests",a="Active Requests",l="Cancelled Requests",h="Queued Requests Ever",c="Active Requests Ever",p={id:"request-scheduler",throttleRequests:!0,maxRequests:6},d=function(){function e(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,t.default)(this,e),this.props=n(n({},p),s),this.requestQueue=[],this.activeRequestCount=0,this.requestMap=new Map,this.stats=new r.Stats({id:s.id}),this.stats.get(o),this.stats.get(a),this.stats.get(l),this.stats.get(h),this.stats.get(c),this._deferredUpdate=null}return(0,s.default)(e,[{key:"scheduleRequest",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return 0};if(!this.props.throttleRequests)return Promise.resolve({done:function(){}});if(this.requestMap.has(e))return this.requestMap.get(e);var s={handle:e,getPriority:t},r=new Promise(function(e){return s.resolve=e,s});return this.requestQueue.push(s),this.requestMap.set(e,r),this._issueNewRequests(),r}},{key:"_issueRequest",value:function(e){var t=this,s=e.handle,r=e.resolve,u=!1,i=function(){u||(u=!0,t.requestMap.delete(s),t.activeRequestCount--,t._issueNewRequests())};return this.activeRequestCount++,r?r({done:i}):Promise.resolve({done:i})}},{key:"_issueNewRequests",value:function(){var e=this;this._deferredUpdate||(this._deferredUpdate=setTimeout(function(){return e._issueNewRequestsAsync()},0))}},{key:"_issueNewRequestsAsync",value:function(){this._deferredUpdate=null;var e=Math.max(this.props.maxRequests-this.activeRequestCount,0);if(0!==e){this._updateAllRequests();for(var t=0;t<e;++t)if(this.requestQueue.length>0){var s=this.requestQueue.shift();this._issueRequest(s)}}}},{key:"_updateAllRequests",value:function(){for(var e=this.requestQueue,t=0;t<e.length;++t){var s=e[t];this._updateRequest(s)||(e.splice(t,1),this.requestMap.delete(s.handle),t--)}e.sort(function(e,t){return e.priority-t.priority})}},{key:"_updateRequest",value:function(e){return e.priority=e.getPriority(e.handle),!(e.priority<0)||(e.resolve(null),!1)}}]),e}();exports.default=d;
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@probe.gl/stats":"SZdt"}],"V8LL":[function(require,module,exports) {
"use strict";function e(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"MGbH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=r(require("@babel/runtime/helpers/esm/arrayLikeToArray"));function r(e){return e&&e.__esModule?e:{default:e}}function t(r){if(Array.isArray(r))return(0,e.default)(r)}
},{"@babel/runtime/helpers/esm/arrayLikeToArray":"V8LL"}],"cQ8X":[function(require,module,exports) {
"use strict";function e(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"ZzYf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=r(require("@babel/runtime/helpers/esm/arrayLikeToArray"));function r(e){return e&&e.__esModule?e:{default:e}}function t(r,t){if(r){if("string"==typeof r)return(0,e.default)(r,t);var o=Object.prototype.toString.call(r).slice(8,-1);return"Object"===o&&r.constructor&&(o=r.constructor.name),"Map"===o||"Set"===o?Array.from(r):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?(0,e.default)(r,t):void 0}}
},{"@babel/runtime/helpers/esm/arrayLikeToArray":"V8LL"}],"JSid":[function(require,module,exports) {
"use strict";function e(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"AdMH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var e=l(require("@babel/runtime/helpers/esm/arrayWithoutHoles")),r=l(require("@babel/runtime/helpers/esm/iterableToArray")),t=l(require("@babel/runtime/helpers/esm/unsupportedIterableToArray")),u=l(require("@babel/runtime/helpers/esm/nonIterableSpread"));function l(e){return e&&e.__esModule?e:{default:e}}function a(l){return(0,e.default)(l)||(0,r.default)(l)||(0,t.default)(l)||(0,u.default)()}
},{"@babel/runtime/helpers/esm/arrayWithoutHoles":"MGbH","@babel/runtime/helpers/esm/iterableToArray":"cQ8X","@babel/runtime/helpers/esm/unsupportedIterableToArray":"ZzYf","@babel/runtime/helpers/esm/nonIterableSpread":"JSid"}],"YV3s":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getAvailablePort=t;var e=r(require("child_process"));function r(e){return e&&e.__esModule?e:{default:e}}function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;return new Promise(function(t,n){e.default.exec("lsof -i -P -n | grep LISTEN",function(e,n,o){if(e)t(r);else{var u=[],i=/:(\d+) \(LISTEN\)/;n.split("\n").forEach(function(e){var r=e.match(i);r&&u.push(Number(r[1]))});for(var s=r;u.includes(s);)s++;t(s)}})})}
},{"child_process":"oZAK"}],"Jq0I":[function(require,module,exports) {
var process = require("process");
var e=require("process");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=l(require("@babel/runtime/regenerator")),r=l(require("@babel/runtime/helpers/esm/toConsumableArray")),n=l(require("@babel/runtime/helpers/esm/defineProperty")),o=l(require("@babel/runtime/helpers/esm/asyncToGenerator")),s=l(require("@babel/runtime/helpers/esm/classCallCheck")),c=l(require("@babel/runtime/helpers/esm/createClass")),a=l(require("child_process")),i=l(require("../env-utils/assert")),u=require("./process-utils");function l(e){return e&&e.__esModule?e:{default:e}}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach(function(t){(0,n.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var f={command:null,arguments:[],portArg:null,port:"auto",basePort:5e3,wait:2e3,nodeSpawnOptions:{maxBuffer:512e4},onSuccess:function(e){console.log("Started ".concat(e.options.command))}},h=function(){function n(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).id,t=void 0===e?"browser-driver":e;(0,s.default)(this,n),this.id=t,this.childProcess=null,this.port=null}return(0,c.default)(n,[{key:"start",value:function(){var e=(0,o.default)(t.default.mark(function e(){var n,o,s=this,c=arguments;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c.length>0&&void 0!==c[0]?c[0]:{},n=d(d({},f),n),(0,i.default)(n.command&&"string"==typeof n.command),this.options=n,o=(0,r.default)(n.arguments),this.port=n.port,!n.portArg){e.next=12;break}if("auto"!==this.port){e.next=11;break}return e.next=10,(0,u.getAvailablePort)(n.basePort);case 10:this.port=e.sent;case 11:o.push(n.portArg,this.port);case 12:return e.next=14,new Promise(function(e,t){try{var r=setTimeout(function(){n.onSuccess&&n.onSuccess(s),e({})},n.wait);console.log("Spawning ".concat(n.command," ").concat(n.arguments.join(" "))),s.childProcess=a.default.spawn(n.command,o,n.spawn),s.childProcess.stderr.on("data",function(e){console.log('Child process wrote to stderr: "'.concat(e,'".')),clearTimeout(r),t(new Error(e))}),s.childProcess.on("error",function(e){console.log("Child process errored with ".concat(e)),clearTimeout(r),t(e)}),s.childProcess.on("close",function(e){console.log("Child process exited with ".concat(e)),s.childProcess=null})}catch(c){t(c)}});case 14:return e.abrupt("return",e.sent);case 15:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=(0,o.default)(t.default.mark(function e(){return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.childProcess&&(this.childProcess.kill(),this.childProcess=null);case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"exit",value:function(){var r=(0,o.default)(t.default.mark(function r(){var n,o=arguments;return t.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>0&&void 0!==o[0]?o[0]:0,t.prev=1,t.next=4,this.stop();case 4:e.exit(n),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(1),console.error(t.t0.message||t.t0),e.exit(1);case 11:case"end":return t.stop()}},r,this,[[1,7]])}));return function(){return r.apply(this,arguments)}}()}]),n}();exports.default=h;
},{"@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/toConsumableArray":"AdMH","@babel/runtime/helpers/esm/defineProperty":"iDM3","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","child_process":"oZAK","../env-utils/assert":"E2ik","./process-utils":"YV3s","process":"kpD3"}],"jSkR":[function(require,module,exports) {
"use strict";function e(e){var r=0;for(var t in e){var n=e[t];ArrayBuffer.isView(n)&&(r+=n.byteLength*n.BYTES_PER_ELEMENT)}return r}function r(e){if(!e||!e.POSITION)return null;var r=1/0,t=1/0,n=1/0,u=-1/0,i=-1/0,o=-1/0,a=e.POSITION.value,f=a&&a.length;if(!f)return null;for(var s=0;s<f;s+=3){var l=a[s],v=a[s+1],g=a[s+2];r=l<r?l:r,t=v<t?v:t,n=g<n?g:n,u=l>u?l:u,i=v>i?v:i,o=g>o?g:o}return[[r,t,n],[u,i,o]]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getMeshSize=e,exports.getMeshBoundingBox=r;
},{}],"oHIH":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"assert",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"isBrowser",{enumerable:!0,get:function(){return t.isBrowser}}),Object.defineProperty(exports,"isWorker",{enumerable:!0,get:function(){return t.isWorker}}),Object.defineProperty(exports,"nodeVersion",{enumerable:!0,get:function(){return t.nodeVersion}}),Object.defineProperty(exports,"self",{enumerable:!0,get:function(){return t.self}}),Object.defineProperty(exports,"window",{enumerable:!0,get:function(){return t.window}}),Object.defineProperty(exports,"global",{enumerable:!0,get:function(){return t.global}}),Object.defineProperty(exports,"document",{enumerable:!0,get:function(){return t.document}}),Object.defineProperty(exports,"createWorker",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"validateLoaderVersion",{enumerable:!0,get:function(){return o.validateLoaderVersion}}),Object.defineProperty(exports,"makeTransformIterator",{enumerable:!0,get:function(){return i.makeTransformIterator}}),Object.defineProperty(exports,"getTransferList",{enumerable:!0,get:function(){return u.getTransferList}}),Object.defineProperty(exports,"_WorkerFarm",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"_WorkerPool",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"_WorkerThread",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(exports,"getLibraryUrl",{enumerable:!0,get:function(){return c.getLibraryUrl}}),Object.defineProperty(exports,"loadLibrary",{enumerable:!0,get:function(){return c.loadLibrary}}),Object.defineProperty(exports,"parseJSON",{enumerable:!0,get:function(){return l.parseJSON}}),Object.defineProperty(exports,"isBuffer",{enumerable:!0,get:function(){return b.isBuffer}}),Object.defineProperty(exports,"toBuffer",{enumerable:!0,get:function(){return b.toBuffer}}),Object.defineProperty(exports,"bufferToArrayBuffer",{enumerable:!0,get:function(){return b.bufferToArrayBuffer}}),Object.defineProperty(exports,"toArrayBuffer",{enumerable:!0,get:function(){return p.toArrayBuffer}}),Object.defineProperty(exports,"sliceArrayBuffer",{enumerable:!0,get:function(){return p.sliceArrayBuffer}}),Object.defineProperty(exports,"concatenateArrayBuffers",{enumerable:!0,get:function(){return p.concatenateArrayBuffers}}),Object.defineProperty(exports,"compareArrayBuffers",{enumerable:!0,get:function(){return p.compareArrayBuffers}}),Object.defineProperty(exports,"padTo4Bytes",{enumerable:!0,get:function(){return d.padTo4Bytes}}),Object.defineProperty(exports,"copyToArray",{enumerable:!0,get:function(){return d.copyToArray}}),Object.defineProperty(exports,"copyArrayBuffer",{enumerable:!0,get:function(){return d.copyArrayBuffer}}),Object.defineProperty(exports,"getZeroOffsetArrayBuffer",{enumerable:!0,get:function(){return d.getZeroOffsetArrayBuffer}}),Object.defineProperty(exports,"copyPaddedArrayBufferToDataView",{enumerable:!0,get:function(){return y.copyPaddedArrayBufferToDataView}}),Object.defineProperty(exports,"copyPaddedStringToDataView",{enumerable:!0,get:function(){return y.copyPaddedStringToDataView}}),Object.defineProperty(exports,"padStringToByteAlignment",{enumerable:!0,get:function(){return g.padStringToByteAlignment}}),Object.defineProperty(exports,"copyStringToDataView",{enumerable:!0,get:function(){return g.copyStringToDataView}}),Object.defineProperty(exports,"copyBinaryToDataView",{enumerable:!0,get:function(){return g.copyBinaryToDataView}}),Object.defineProperty(exports,"getFirstCharacters",{enumerable:!0,get:function(){return m.getFirstCharacters}}),Object.defineProperty(exports,"getMagicString",{enumerable:!0,get:function(){return m.getMagicString}}),Object.defineProperty(exports,"setPathPrefix",{enumerable:!0,get:function(){return x.setPathPrefix}}),Object.defineProperty(exports,"getPathPrefix",{enumerable:!0,get:function(){return x.getPathPrefix}}),Object.defineProperty(exports,"resolvePath",{enumerable:!0,get:function(){return x.resolvePath}}),Object.defineProperty(exports,"_addAliases",{enumerable:!0,get:function(){return O.addAliases}}),Object.defineProperty(exports,"makeTextEncoderIterator",{enumerable:!0,get:function(){return j.makeTextEncoderIterator}}),Object.defineProperty(exports,"makeTextDecoderIterator",{enumerable:!0,get:function(){return j.makeTextDecoderIterator}}),Object.defineProperty(exports,"makeLineIterator",{enumerable:!0,get:function(){return j.makeLineIterator}}),Object.defineProperty(exports,"makeNumberedLineIterator",{enumerable:!0,get:function(){return j.makeNumberedLineIterator}}),Object.defineProperty(exports,"forEach",{enumerable:!0,get:function(){return h.forEach}}),Object.defineProperty(exports,"concatenateChunksAsync",{enumerable:!0,get:function(){return h.concatenateChunksAsync}}),Object.defineProperty(exports,"RequestScheduler",{enumerable:!0,get:function(){return B.default}}),Object.defineProperty(exports,"ChildProcessProxy",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(exports,"_getMeshSize",{enumerable:!0,get:function(){return q.getMeshSize}}),Object.defineProperty(exports,"getMeshBoundingBox",{enumerable:!0,get:function(){return q.getMeshBoundingBox}}),exports.path=void 0;var r=A(require("./lib/env-utils/assert")),t=require("./lib/env-utils/globals"),n=A(require("./lib/worker-loader-utils/create-worker")),o=require("./lib/worker-loader-utils/validate-loader-version"),i=require("./lib/iterator-utils/make-transform-iterator"),u=require("./lib/worker-utils/get-transfer-list"),a=A(require("./lib/worker-utils/worker-farm")),f=A(require("./lib/worker-utils/worker-pool")),s=A(require("./lib/worker-utils/worker-thread")),c=require("./lib/library-utils/library-utils"),l=require("./lib/parser-utils/parse-json"),b=require("./lib/binary-utils/buffer-utils"),p=require("./lib/binary-utils/array-buffer-utils"),d=require("./lib/binary-utils/memory-copy-utils"),y=require("./lib/binary-utils/binary-copy-utils"),g=require("./lib/binary-utils/encode-utils"),m=require("./lib/binary-utils/get-first-characters"),P=T(require("./lib/path-utils/path"));exports.path=P;var x=require("./lib/path-utils/file-aliases"),O=require("./lib/path-utils/file-aliases.js"),j=require("./lib/iterator-utils/text-iterators"),h=require("./lib/iterator-utils/async-iteration"),B=A(require("./lib/request-utils/request-scheduler")),k=A(require("./lib/process-utils/child-process-proxy")),q=require("./categories/mesh/mesh-utils");function w(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return w=function(){return e},e}function T(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=w();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(t,o,i):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}function A(e){return e&&e.__esModule?e:{default:e}}
},{"./lib/env-utils/assert":"E2ik","./lib/env-utils/globals":"TqKA","./lib/worker-loader-utils/create-worker":"C8ll","./lib/worker-loader-utils/validate-loader-version":"pq8m","./lib/iterator-utils/make-transform-iterator":"sajY","./lib/worker-utils/get-transfer-list":"XO18","./lib/worker-utils/worker-farm":"R2RJ","./lib/worker-utils/worker-pool":"j7wA","./lib/worker-utils/worker-thread":"TMOU","./lib/library-utils/library-utils":"ZZsZ","./lib/parser-utils/parse-json":"icoB","./lib/binary-utils/buffer-utils":"Euni","./lib/binary-utils/array-buffer-utils":"nOgr","./lib/binary-utils/memory-copy-utils":"FUVZ","./lib/binary-utils/binary-copy-utils":"R2Fl","./lib/binary-utils/encode-utils":"WMJ2","./lib/binary-utils/get-first-characters":"BEhU","./lib/path-utils/path":"hewW","./lib/path-utils/file-aliases":"WQDH","./lib/path-utils/file-aliases.js":"WQDH","./lib/iterator-utils/text-iterators":"TOPb","./lib/iterator-utils/async-iteration":"U5IM","./lib/request-utils/request-scheduler":"tWMk","./lib/process-utils/child-process-proxy":"Jq0I","./categories/mesh/mesh-utils":"jSkR"}],"Oy8e":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isWritableStream=exports.isReadableStream=exports.isReadableNodeStream=exports.isWritableNodeStream=exports.isBuffer=exports.isReadableDOMStream=exports.isWritableDOMStream=exports.isBlob=exports.isFile=exports.isResponse=exports.isIterator=exports.isAsyncIterable=exports.isIterable=exports.isPromise=exports.isPureObject=exports.isObject=void 0;var e=r(require("@babel/runtime/helpers/esm/typeof"));function r(e){return e&&e.__esModule?e:{default:e}}var t=function(e){return"boolean"==typeof e},o=function(e){return"function"==typeof e},n=function(r){return null!==r&&"object"===(0,e.default)(r)};exports.isObject=n;var s=function(e){return n(e)&&e.constructor==={}.constructor};exports.isPureObject=s;var i=function(e){return n(e)&&o(e.then)};exports.isPromise=i;var a=function(e){return e&&"function"==typeof e[Symbol.iterator]};exports.isIterable=a;var u=function(e){return e&&"function"==typeof e[Symbol.asyncIterator]};exports.isAsyncIterable=u;var f=function(e){return e&&o(e.next)};exports.isIterator=f;var p=function(e){return"undefined"!=typeof Response&&e instanceof Response||e&&e.arrayBuffer&&e.text&&e.json};exports.isResponse=p;var c=function(e){return"undefined"!=typeof File&&e instanceof File};exports.isFile=c;var l=function(e){return"undefined"!=typeof Blob&&e instanceof Blob};exports.isBlob=l;var b=function(e){return n(e)&&o(e.abort)&&o(e.getWriter)};exports.isWritableDOMStream=b;var x=function(e){return"undefined"!=typeof ReadableStream&&e instanceof ReadableStream||n(e)&&o(e.tee)&&o(e.cancel)&&o(e.getReader)};exports.isReadableDOMStream=x;var d=function(r){return r&&"object"===(0,e.default)(r)&&r.isBuffer};exports.isBuffer=d;var m=function(e){return n(e)&&o(e.end)&&o(e.write)&&t(e.writable)};exports.isWritableNodeStream=m;var v=function(e){return n(e)&&o(e.read)&&o(e.pipe)&&t(e.readable)};exports.isReadableNodeStream=v;var y=function(e){return x(e)||v(e)};exports.isReadableStream=y;var S=function(e){return b(e)||m(e)};exports.isWritableStream=S;
},{"@babel/runtime/helpers/esm/typeof":"zsbK"}],"P8kQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseMIMEType=t,exports.parseMIMETypeFromURL=n;var r=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,e=/^([-\w.]+\/[-\w.+]+)/;function t(r){if("string"!=typeof r)return"";var t=r.match(e);return t?t[1]:r}function n(e){if("string"!=typeof e)return"";var t=e.match(r);return t?t[1]:""}
},{}],"ABhg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getResourceUrlAndType=n,exports.getResourceContentLength=s;var e=require("../../javascript-utils/is-type"),r=require("./mime-type-utils"),t=/\?.*/;function n(t){if((0,e.isResponse)(t)){var n=(0,r.parseMIMEType)(t.headers.get("content-type")),s=(0,r.parseMIMETypeFromURL)(t.url);return{url:p(t.url||""),type:n||s||null}}return(0,e.isBlob)(t)?{url:p(t.name||""),type:t.type||""}:"string"==typeof t?{url:p(t),type:(0,r.parseMIMETypeFromURL)(t)}:{url:"",type:""}}function s(r){return(0,e.isResponse)(r)?r.headers["content-length"]||-1:(0,e.isBlob)(r)?r.size:"string"==typeof r?r.length:r instanceof ArrayBuffer?r.byteLength:ArrayBuffer.isView(r)?r.byteLength:-1}function p(e){return e.replace(t,"")}
},{"../../javascript-utils/is-type":"Oy8e","./mime-type-utils":"P8kQ"}],"KNrZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.makeResponse=u,exports.checkResponse=c,exports.checkResponseSync=i;var e=a(require("@babel/runtime/regenerator")),t=a(require("@babel/runtime/helpers/esm/asyncToGenerator")),r=require("../../javascript-utils/is-type"),n=require("./resource-utils");function a(e){return e&&e.__esModule?e:{default:e}}function u(e){return s.apply(this,arguments)}function s(){return(s=(0,t.default)(e.default.mark(function t(a){var u,s,c,o,i,p,f;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,r.isResponse)(a)){e.next=2;break}return e.abrupt("return",a);case 2:return u={},(s=(0,n.getResourceContentLength)(a))>=0&&(u["content-length"]=String(s)),c=(0,n.getResourceUrlAndType)(a),o=c.url,(i=c.type)&&(u["content-type"]=i),e.next=9,l(a);case 9:return(p=e.sent)&&(u["x-first-bytes"]=p),"string"==typeof a&&(a=(new TextEncoder).encode(a)),f=new Response(a,{headers:u}),Object.defineProperty(f,"url",{value:o}),e.abrupt("return",f);case 15:case"end":return e.stop()}},t)}))).apply(this,arguments)}function c(e){return o.apply(this,arguments)}function o(){return(o=(0,t.default)(e.default.mark(function t(r){var n;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r.ok){e.next=5;break}return e.next=3,p(r);case 3:throw n=e.sent,new Error(n);case 5:case"end":return e.stop()}},t)}))).apply(this,arguments)}function i(e){if(!e.ok){var t="".concat(e.status," ").concat(e.statusText);throw t=t.length>60?"".concat(t.slice(60),"..."):t,new Error(t)}}function p(e){return f.apply(this,arguments)}function f(){return(f=(0,t.default)(e.default.mark(function t(r){var n,a,u;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n="Failed to fetch resource ".concat(r.url," (").concat(r.status,"): "),e.prev=1,a=r.headers.get("Content-Type"),u=r.statusText,!a.includes("application/json")){e.next=11;break}return e.t0=u,e.t1=" ",e.next=9,r.text();case 9:e.t2=e.sent,u=e.t0+=e.t1.concat.call(e.t1,e.t2);case 11:n=(n+=u).length>60?"".concat(n.slice(60),"..."):n,e.next=17;break;case 15:e.prev=15,e.t3=e.catch(1);case 17:return e.abrupt("return",n);case 18:case"end":return e.stop()}},t,null,[[1,15]])}))).apply(this,arguments)}function l(e){return d.apply(this,arguments)}function d(){return(d=(0,t.default)(e.default.mark(function t(r){var n,a,u,s;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=5,"string"!=typeof r){e.next=3;break}return e.abrupt("return","data:,".concat(r.slice(0,n)));case 3:if(!(r instanceof Blob)){e.next=8;break}return a=r.slice(0,5),e.next=7,new Promise(function(e){var t=new FileReader;t.onload=function(t){return e(t.target&&t.target.result)},t.readAsDataURL(a)});case 7:return e.abrupt("return",e.sent);case 8:if(!(r instanceof ArrayBuffer)){e.next=12;break}return u=r.slice(0,n),s=h(u),e.abrupt("return","data:base64,".concat(s));case 12:return e.abrupt("return",null);case 13:case"end":return e.stop()}},t)}))).apply(this,arguments)}function h(e){for(var t="",r=new Uint8Array(e),n=0;n<r.byteLength;n++)t+=String.fromCharCode(r[n]);return btoa(t)}
},{"@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","../../javascript-utils/is-type":"Oy8e","./resource-utils":"ABhg"}],"DQzX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getErrorMessageFromResponseSync=n,exports.getErrorMessageFromResponse=a;var e=r(require("@babel/runtime/regenerator")),t=r(require("@babel/runtime/helpers/esm/asyncToGenerator"));function r(e){return e&&e.__esModule?e:{default:e}}function n(e){return"Failed to fetch resource ".concat(e.url,"(").concat(e.status,"): ").concat(e.statusText," ")}function a(e){return s.apply(this,arguments)}function s(){return(s=(0,t.default)(e.default.mark(function t(r){var n;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n="Failed to fetch resource ".concat(r.url," (").concat(r.status,"): "),e.prev=1,!r.headers.get("Content-Type").includes("application/json")){e.next=10;break}return e.t0=n,e.next=7,r.text();case 7:n=e.t0+=e.sent,e.next=11;break;case 10:n+=r.statusText;case 11:e.next=16;break;case 13:return e.prev=13,e.t1=e.catch(1),e.abrupt("return",n);case 16:return e.abrupt("return",n);case 17:case"end":return e.stop()}},t,null,[[1,13]])}))).apply(this,arguments)}
},{"@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk"}],"b40H":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fetchFile=a;var e=u(require("@babel/runtime/regenerator")),r=u(require("@babel/runtime/helpers/esm/asyncToGenerator")),t=require("@loaders.gl/loader-utils"),n=require("../utils/response-utils"),s=require("./fetch-error-message");function u(e){return e&&e.__esModule?e:{default:e}}function a(e){return o.apply(this,arguments)}function o(){return(o=(0,r.default)(e.default.mark(function r(u){var a,o,i=arguments;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=i.length>1&&void 0!==i[1]?i[1]:{},"string"==typeof u){e.next=5;break}return e.next=4,(0,n.makeResponse)(u);case 4:return e.abrupt("return",e.sent);case 5:return u=(0,t.resolvePath)(u),e.next=8,fetch(u,a);case 8:if((o=e.sent).ok||!a.throws){e.next=15;break}return e.t0=Error,e.next=13,(0,s.getErrorMessageFromResponse)(o);case 13:throw e.t1=e.sent,new e.t0(e.t1);case 15:return e.abrupt("return",o);case 16:case"end":return e.stop()}},r)}))).apply(this,arguments)}
},{"@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","@loaders.gl/loader-utils":"oHIH","../utils/response-utils":"KNrZ","./fetch-error-message":"DQzX"}],"tj7P":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.readFileSyncBrowser=n;var e=require("@loaders.gl/loader-utils"),r={dataType:"arraybuffer",nothrow:!0},t=function(e){return e.startsWith("data:")};function n(r,n){return n=s(n),t(r),n.nothrow||(0,e.assert)(!1),null}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(e=Object.assign({},r,e)).responseType=e.responseType||e.dataType,e}
},{"@loaders.gl/loader-utils":"oHIH"}],"WRQd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.readFileSync=i;var e=require("@loaders.gl/loader-utils"),r=o(require("../../node/read-file-sync.node")),t=require("./read-file.browser");function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n();if(r&&r.has(e))return r.get(e);var t={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(t,i,u):t[i]=e[i]}return t.default=e,r&&r.set(e,t),t}function i(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=(0,e.resolvePath)(n),!e.isBrowser&&r.readFileSync?r.readFileSync(n,o):(0,t.readFileSyncBrowser)(n,o)}
},{"@loaders.gl/loader-utils":"oHIH","../../node/read-file-sync.node":"oZAK","./read-file.browser":"tj7P"}],"YW6i":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.writeFile=i,exports.writeFileSync=o;var e=require("@loaders.gl/loader-utils"),r=n(require("../../node/write-file.node"));function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function n(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t();if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var u=i?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(n,o,u):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function i(t,n,i){return t=(0,e.resolvePath)(t),!e.isBrowser&&r.writeFile?r.writeFile(t,n,i):(0,e.assert)(!1)}function o(t,n,i){return t=(0,e.resolvePath)(t),!e.isBrowser&&r.writeFileSync?r.writeFileSync(t,n,i):(0,e.assert)(!1)}
},{"@loaders.gl/loader-utils":"oHIH","../../node/write-file.node":"oZAK"}],"yfwR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ConsoleLog=exports.NullLog=void 0;var e=o(require("@babel/runtime/helpers/esm/classCallCheck")),n=o(require("@babel/runtime/helpers/esm/createClass"));function o(e){return e&&e.__esModule?e:{default:e}}var r=function(){function o(){(0,e.default)(this,o)}return(0,n.default)(o,[{key:"log",value:function(){return function(e){}}},{key:"info",value:function(){return function(e){}}},{key:"warn",value:function(){return function(e){}}},{key:"error",value:function(){return function(e){}}}]),o}();exports.NullLog=r;var t=function(){function o(){(0,e.default)(this,o),this.console=console}return(0,n.default)(o,[{key:"log",value:function(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=this.console.log).bind.apply(e,[this.console].concat(o))}},{key:"info",value:function(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=this.console.info).bind.apply(e,[this.console].concat(o))}},{key:"warn",value:function(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=this.console.warn).bind.apply(e,[this.console].concat(o))}},{key:"error",value:function(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=this.console.error).bind.apply(e,[this.console].concat(o))}}]),o}();exports.ConsoleLog=t;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph"}],"Go4L":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setGlobalOptions=b,exports.normalizeOptions=y,exports.getFetchFunction=v,exports.getGlobalLoaderState=void 0;var e=a(require("@babel/runtime/helpers/esm/defineProperty")),t=require("@loaders.gl/loader-utils"),r=require("../../javascript-utils/is-type"),n=require("../fetch/fetch-file"),o=require("./loggers");function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=c(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(l)throw a}}}}function c(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function u(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?f(Object(n),!0).forEach(function(r){(0,e.default)(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var s={fetch:null,CDN:"https://unpkg.com/@loaders.gl",worker:!0,log:new o.ConsoleLog,metadata:!1,transforms:[],reuseWorkers:!0},d={dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"},p=function(){t.global.loaders=t.global.loaders||{};var e=t.global.loaders;return e._state=e._state||{},e._state};exports.getGlobalLoaderState=p;var h=function(){var e=p();return e.globalOptions=e.globalOptions||u({},s),e.globalOptions};function b(e){var t=p(),r=h();t.globalOptions=j(r,e)}function y(e,t,r,n){return r=r||[],g(e,r=Array.isArray(r)?r:[r]),j(t,e,n)}function v(e,t){var o=h(),a=e.fetch||o.fetch;return"function"==typeof a?a:(0,r.isObject)(a)?function(e){return(0,n.fetchFile)(e,a)}:t&&t.fetch?t.fetch:function(t){return(0,n.fetchFile)(t,e)}}function g(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console;O(e,null,r,s,d,t);var n,o=i(t);try{for(o.s();!(n=o.n()).done;){var a=n.value,c=e&&e[a.id]||{},l=a.options&&a.options[a.id]||{},f=a.defaultOptions&&a.defaultOptions[a.id]||{};O(c,a.id,r,l,f,t)}}catch(u){o.e(u)}finally{o.f()}}function O(e,t,n,o,a,i){var c=t||"Top level",l=t?"".concat(t,"."):"";for(var f in e){var u=!t&&(0,r.isObject)(e[f]);if(!(f in o))if(f in a)n.warn("".concat(c," loader option '").concat(l).concat(f,"' deprecated, use '").concat(a[f],"'"));else if(!u){var s=m(f,i);n.warn("".concat(c," loader option '").concat(l).concat(f,"' not recognized. ").concat(s))}}}function m(e,t){var r,n=e.toLowerCase(),o="",a=i(t);try{for(a.s();!(r=a.n()).done;){var c=r.value;for(var l in c.options){if(e===l)return"Did you mean '".concat(c.id,".").concat(l,"'?");var f=l.toLowerCase();(n.startsWith(f)||f.startsWith(n))&&(o=o||"Did you mean '".concat(c.id,".").concat(l,"'?"))}}}catch(u){a.e(u)}finally{a.f()}return o}function j(e,t,r){var n=u({},e.options||{});return P(n,r),null===n.log&&(n.log=new o.NullLog),w(n,h()),w(n,t),n}function w(e,t){for(var n in t)if(n in t){var o=t[n];(0,r.isPureObject)(o)&&(0,r.isPureObject)(e[n])?e[n]=u(u({},e[n]),t[n]):e[n]=t[n]}}function P(e,t){!t||"baseUri"in e||(e.baseUri=t)}
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","@loaders.gl/loader-utils":"oHIH","../../javascript-utils/is-type":"Oy8e","../fetch/fetch-file":"b40H","./loggers":"yfwR"}],"dAxI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setLoaderOptions=t;var e=require("../loader-utils/option-utils");function t(t){(0,e.setGlobalOptions)(t)}
},{"../loader-utils/option-utils":"Go4L"}],"iWwL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isLoaderObject=o,exports.normalizeLoader=i;var e=t(require("@babel/runtime/helpers/esm/defineProperty")),r=require("@loaders.gl/loader-utils");function t(e){return e&&e.__esModule?e:{default:e}}function n(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function s(r){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach(function(t){(0,e.default)(r,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(s,e))})}return r}function o(e){if(!e)return!1;Array.isArray(e)&&(e=e[0]);var r=e.parseTextSync||e.parseSync||e.parse||e.parseStream||e.parseInBatches,t=e.options&&e.options[e.id];return r=r||t&&t.workerUrl}function i(e){var t;return(0,r.assert)(e,"null loader"),(0,r.assert)(o(e),"invalid loader"),Array.isArray(e)&&(t=e[1],e=s(s({},e=e[0]),{},{options:s(s({},e.options),t)})),e.extension&&(e.extensions=e.extensions||e.extension,delete e.extension),Array.isArray(e.extensions)||(e.extensions=[e.extensions]),(0,r.assert)(e.extensions&&e.extensions.length>0&&e.extensions[0]),(e.parseTextSync||e.parseText)&&(e.text=!0),e.text||(e.binary=!0),e}
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","@loaders.gl/loader-utils":"oHIH"}],"k3wd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.registerLoaders=i,exports.getRegisteredLoaders=u,exports._unregisterLoaders=l;var r=require("../loader-utils/normalize-loader"),e=require("../loader-utils/option-utils");function t(r,e){var t;if("undefined"==typeof Symbol||null==r[Symbol.iterator]){if(Array.isArray(r)||(t=n(r))||e&&r&&"number"==typeof r.length){t&&(r=t);var o=0,a=function(){};return{s:a,n:function(){return o>=r.length?{done:!0}:{done:!1,value:r[o++]}},e:function(r){throw r},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,l=!1;return{s:function(){t=r[Symbol.iterator]()},n:function(){var r=t.next();return u=r.done,r},e:function(r){l=!0,i=r},f:function(){try{u||null==t.return||t.return()}finally{if(l)throw i}}}}function n(r,e){if(r){if("string"==typeof r)return o(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?o(r,e):void 0}}function o(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}var a=function(){var r=(0,e.getGlobalLoaderState)();return r.loaderRegistry=r.loaderRegistry||[],r.loaderRegistry};function i(e){var n,o=a(),i=t(e=Array.isArray(e)?e:[e]);try{var u=function(){var e=n.value,t=(0,r.normalizeLoader)(e);o.find(function(r){return t===r})||o.unshift(t)};for(i.s();!(n=i.n()).done;)u()}catch(l){i.e(l)}finally{i.f()}}function u(){return a()}function l(){(0,e.getGlobalLoaderState)().loaderRegistry=[]}
},{"../loader-utils/normalize-loader":"iWwL","../loader-utils/option-utils":"Go4L"}],"dgdQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.makeStringIterator=n;var e=r(require("@babel/runtime/regenerator"));function r(e){return e&&e.__esModule?e:{default:e}}var t=e.default.mark(n);function n(r){var n,a,u,o,c,i,s,d=arguments;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=d.length>1&&void 0!==d[1]?d[1]:{},a=n.chunkSize,u=void 0===a?262144:a,o=0,c=new TextEncoder;case 4:if(!(o<r.length)){e.next=12;break}return i=Math.min(r.length-o,u),s=r.slice(o,o+i),o+=i,e.next=10,c.encode(s);case 10:e.next=4;break;case 12:case"end":return e.stop()}},t)}
},{"@babel/runtime/regenerator":"m4eR"}],"xsoz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.makeArrayBufferIterator=n;var e=r(require("@babel/runtime/regenerator"));function r(e){return e&&e.__esModule?e:{default:e}}var t=e.default.mark(n);function n(r){var n,a,u,i,o,s,f,c=arguments;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=c.length>1&&void 0!==c[1]?c[1]:{},a=n.chunkSize,u=void 0===a?262144:a,i=0;case 3:if(!(i<r.byteLength)){e.next=14;break}return o=Math.min(r.byteLength-i,u),s=new ArrayBuffer(o),f=new Uint8Array(r,i,o),new Uint8Array(s).set(f),i+=o,e.next=12,s;case 12:e.next=3;break;case 14:case"end":return e.stop()}},t)}
},{"@babel/runtime/regenerator":"m4eR"}],"SpPC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.makeBlobIterator=s,exports.readFileSlice=o;var e=a(require("@babel/runtime/helpers/esm/asyncToGenerator")),r=a(require("@babel/runtime/regenerator")),t=a(require("@babel/runtime/helpers/esm/awaitAsyncGenerator")),n=a(require("@babel/runtime/helpers/esm/wrapAsyncGenerator"));function a(e){return e&&e.__esModule?e:{default:e}}var u=1048576;function s(e){return i.apply(this,arguments)}function i(){return(i=(0,n.default)(r.default.mark(function e(n){var a,s,i,c,l,f=arguments;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=f.length>1&&void 0!==f[1]?f[1]:{},s=a.chunkSize||u,i=0;case 3:if(!(i<n.size)){e.next=13;break}return c=i+s,e.next=7,(0,t.default)(o(n,i,c));case 7:return l=e.sent,i=c,e.next=11,l;case 11:e.next=3;break;case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function o(e,r,t){return c.apply(this,arguments)}function c(){return(c=(0,e.default)(r.default.mark(function e(t,n,a){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(function(e,r){var u=t.slice(n,a),s=new FileReader;s.onload=function(r){return e(r.target&&r.target.result)},s.onerror=function(e){return r(e)},s.readAsArrayBuffer(u)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}
},{"@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/awaitAsyncGenerator":"EMU2","@babel/runtime/helpers/esm/wrapAsyncGenerator":"SBb5"}],"RQuW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.makeStreamIterator=c;var e=s(require("@babel/runtime/helpers/esm/asyncToGenerator")),r=s(require("@babel/runtime/regenerator")),t=s(require("@babel/runtime/helpers/esm/awaitAsyncGenerator")),n=s(require("@babel/runtime/helpers/esm/wrapAsyncGenerator")),a=s(require("@babel/runtime/helpers/esm/asyncIterator")),u=require("@loaders.gl/loader-utils");function s(e){return e&&e.__esModule?e:{default:e}}function c(e){if(u.isBrowser||u.nodeVersion>=10){if("function"==typeof e[Symbol.asyncIterator])return i(e);if("function"==typeof e.getIterator)return e.getIterator()}return u.isBrowser?o(e):p(e)}function i(e){return f.apply(this,arguments)}function f(){return(f=(0,n.default)(r.default.mark(function e(n){var s,c,i,f,o,l,p;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s=!0,c=!1,e.prev=2,f=(0,a.default)(n);case 4:return e.next=6,(0,t.default)(f.next());case 6:return o=e.sent,s=o.done,e.next=10,(0,t.default)(o.value);case 10:if(l=e.sent,s){e.next=18;break}return p=l,e.next=15,(0,u.toArrayBuffer)(p);case 15:s=!0,e.next=4;break;case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(2),c=!0,i=e.t0;case 24:if(e.prev=24,e.prev=25,s||null==f.return){e.next=29;break}return e.next=29,(0,t.default)(f.return());case 29:if(e.prev=29,!c){e.next=32;break}throw i;case 32:return e.finish(29);case 33:return e.finish(24);case 34:case"end":return e.stop()}},e,null,[[2,20,24,34],[25,,29,33]])}))).apply(this,arguments)}function o(e){return l.apply(this,arguments)}function l(){return(l=(0,n.default)(r.default.mark(function e(n){var a,s,c,i;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=n.getReader(),e.prev=1;case 2:return e.next=5,(0,t.default)(a.read());case 5:if(s=e.sent,c=s.done,i=s.value,!c){e.next=10;break}return e.abrupt("return");case 10:return e.next=12,(0,u.toArrayBuffer)(i);case 12:e.next=2;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),a.releaseLock();case 19:case"end":return e.stop()}},e,null,[[1,16]])}))).apply(this,arguments)}function p(e){return d.apply(this,arguments)}function d(){return(d=(0,n.default)(r.default.mark(function e(n){var a;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,t.default)(n);case 2:n=e.sent;case 3:if(null===(a=n.read())){e.next=9;break}return e.next=8,(0,u.toArrayBuffer)(a);case 8:return e.abrupt("continue",3);case 9:if(!n._readableState.ended){e.next=11;break}return e.abrupt("return");case 11:return e.next=13,(0,t.default)(b(n));case 13:e.next=3;break;case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}function b(e){return x.apply(this,arguments)}function x(){return(x=(0,e.default)(r.default.mark(function e(t){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e){t.once("readable",e)}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}
},{"@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/awaitAsyncGenerator":"EMU2","@babel/runtime/helpers/esm/wrapAsyncGenerator":"SBb5","@babel/runtime/helpers/esm/asyncIterator":"bQZY","@loaders.gl/loader-utils":"oHIH"}],"ASms":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.makeIterator=s;var r=require("./string-iterator"),e=require("./array-buffer-iterator"),t=require("./blob-iterator"),a=require("@loaders.gl/loader-utils"),i=require("./stream-iterator"),o=require("../../javascript-utils/is-type");function s(s){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof s?(0,r.makeStringIterator)(s,u):s instanceof ArrayBuffer?(0,e.makeArrayBufferIterator)(s,u):(0,o.isBlob)(s)?(0,t.makeBlobIterator)(s,u):(0,o.isReadableStream)(s)?(0,i.makeStreamIterator)(s):(0,o.isResponse)(s)?(0,i.makeStreamIterator)(s.body):(0,a.assert)(!1)}
},{"./string-iterator":"dgdQ","./array-buffer-iterator":"xsoz","./blob-iterator":"SpPC","@loaders.gl/loader-utils":"oHIH","./stream-iterator":"RQuW","../../javascript-utils/is-type":"Oy8e"}],"IWzS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getArrayBufferOrStringFromDataSync=f,exports.getArrayBufferOrStringFromData=o,exports.getAsyncIteratorFromData=p,exports.getReadableStream=y;var e=s(require("@babel/runtime/regenerator")),r=s(require("@babel/runtime/helpers/esm/asyncToGenerator")),t=require("@loaders.gl/loader-utils"),n=require("../../javascript-utils/is-type"),a=require("../../iterator-utils/make-iterator/make-iterator"),u=require("../utils/response-utils");function s(e){return e&&e.__esModule?e:{default:e}}var i="Cannot convert supplied data type";function f(e,r){if(r.text&&"string"==typeof e)return e;if(e instanceof ArrayBuffer){var t=e;return r.text&&!r.binary?new TextDecoder("utf8").decode(t):t}if(ArrayBuffer.isView(e)||(0,n.isBuffer)(e)){if(r.text&&!r.binary)return new TextDecoder("utf8").decode(e);var a=e.buffer,u=e.byteLength||e.length;return 0===e.byteOffset&&u===a.byteLength||(a=a.slice(e.byteOffset,e.byteOffset+u)),a}throw new Error(i)}function o(e,r){return c.apply(this,arguments)}function c(){return(c=(0,r.default)(e.default.mark(function r(s,o){var c,p;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c=s instanceof ArrayBuffer||ArrayBuffer.isView(s),"string"!=typeof s&&!c){e.next=3;break}return e.abrupt("return",f(s,o));case 3:if(!(0,n.isBlob)(s)){e.next=7;break}return e.next=6,(0,u.makeResponse)(s);case 6:s=e.sent;case 7:if(!(0,n.isResponse)(s)){e.next=21;break}return p=s,e.next=11,(0,u.checkResponse)(p);case 11:if(!o.binary){e.next=17;break}return e.next=14,p.arrayBuffer();case 14:e.t0=e.sent,e.next=20;break;case 17:return e.next=19,p.text();case 19:e.t0=e.sent;case 20:return e.abrupt("return",e.t0);case 21:if((0,n.isReadableStream)(s)&&(s=(0,a.makeIterator)(s)),!(0,n.isIterable)(s)&&!(0,n.isAsyncIterable)(s)){e.next=24;break}return e.abrupt("return",(0,t.concatenateChunksAsync)(s));case 24:throw new Error(i);case 25:case"end":return e.stop()}},r)}))).apply(this,arguments)}function p(e){return b.apply(this,arguments)}function b(){return(b=(0,r.default)(e.default.mark(function r(t){return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,n.isIterator)(t)){e.next=2;break}return e.abrupt("return",t);case 2:if(!(0,n.isResponse)(t)){e.next=6;break}return e.next=5,(0,u.checkResponse)(t);case 5:return e.abrupt("return",(0,a.makeIterator)(t.body));case 6:if(!(0,n.isBlob)(t)&&!(0,n.isReadableStream)(t)){e.next=8;break}return e.abrupt("return",(0,a.makeIterator)(t));case 8:if(!(0,n.isAsyncIterable)(t)){e.next=10;break}return e.abrupt("return",t[Symbol.asyncIterator]());case 10:return e.abrupt("return",l(t));case 11:case"end":return e.stop()}},r)}))).apply(this,arguments)}function l(r){if(ArrayBuffer.isView(r))return e.default.mark(function t(){return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.buffer;case 2:case"end":return e.stop()}},t)})();if(r instanceof ArrayBuffer)return e.default.mark(function t(){return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r;case 2:case"end":return e.stop()}},t)})();if((0,n.isIterator)(r))return r;if((0,n.isIterable)(r))return r[Symbol.iterator]();throw new Error(i)}function y(e){return d.apply(this,arguments)}function d(){return(d=(0,r.default)(e.default.mark(function r(t){var a;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,n.isReadableStream)(t)){e.next=2;break}return e.abrupt("return",t);case 2:if(!(0,n.isResponse)(t)){e.next=4;break}return e.abrupt("return",t.body);case 4:return e.next=6,(0,u.makeResponse)(t);case 6:return a=e.sent,e.abrupt("return",a.body);case 8:case"end":return e.stop()}},r)}))).apply(this,arguments)}
},{"@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","@loaders.gl/loader-utils":"oHIH","../../javascript-utils/is-type":"Oy8e","../../iterator-utils/make-iterator/make-iterator":"ASms","../utils/response-utils":"KNrZ"}],"AXLS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getLoaderContext=u,exports.getLoaders=i;var e=n(require("@babel/runtime/helpers/esm/toConsumableArray")),r=n(require("@babel/runtime/helpers/esm/defineProperty")),t=require("./option-utils");function n(e){return e&&e.__esModule?e:{default:e}}function o(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach(function(t){(0,r.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function u(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return n||(e=a({fetch:(0,t.getFetchFunction)(r||{},e)},e),Array.isArray(e.loaders)||(e.loaders=null),e)}function i(r,t){if(!t&&r&&!Array.isArray(r))return r;var n;if(r&&(n=Array.isArray(r)?r:[r]),t&&t.loaders){var o=Array.isArray(t.loaders)?t.loaders:[t.loaders];n=n?[].concat((0,e.default)(n),(0,e.default)(o)):o}return n&&n.length?n:null}
},{"@babel/runtime/helpers/esm/toConsumableArray":"AdMH","@babel/runtime/helpers/esm/defineProperty":"iDM3","./option-utils":"Go4L"}],"EXXs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.canParseWithWorker=n,exports.default=u;var r=o(require("@babel/runtime/regenerator")),e=o(require("@babel/runtime/helpers/esm/asyncToGenerator")),a=require("@loaders.gl/loader-utils"),t=require("../api/parse");function o(r){return r&&r.__esModule?r:{default:r}}var s="2.3.7";function n(r,e,t,o){if(!a._WorkerFarm.isSupported())return!1;var s=t&&t[r.id];return!!("local"===t.worker&&s&&s.localWorkerUrl||t.worker&&s&&s.workerUrl)&&(!r.useWorker||r.useWorker(t))}function u(r,e,t,o){var n=(t||{}).worker,u=t&&t[r.id]||{},c="local"===n?u.localWorkerUrl:u.workerUrl,i="url(".concat(c,")"),p=r.name,f=l(t);t=JSON.parse(JSON.stringify(t));var d=r.version!==s?"(core version ".concat(s,")"):"";return f.process(i,"".concat(p,"-worker@").concat(r.version).concat(d),{arraybuffer:(0,a.toArrayBuffer)(e),options:t,source:"loaders.gl@".concat(s),type:"parse"})}var c=null;function l(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={};return r.maxConcurrency&&(e.maxConcurrency=r.maxConcurrency),r.onDebug&&(e.onDebug=r.onDebug),"reuseWorkers"in r&&(e.reuseWorkers=r.reuseWorkers),c||(c=new a._WorkerFarm({onMessage:i})),c.setProps(e),c}function i(r){return p.apply(this,arguments)}function p(){return(p=(0,e.default)(r.default.mark(function e(o){var s,n,u,c,l;return r.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:s=o.worker,n=o.data,u=o.resolve,c=o.reject,r.t0=n.type,r.next="done"===r.t0?4:"parse"===r.t0?6:"error"===r.t0?17:19;break;case 4:return u(n.result),r.abrupt("break",19);case 6:return r.prev=6,r.next=9,(0,t.parse)(n.arraybuffer,n.options,n.url);case 9:l=r.sent,s.postMessage({type:"parse-done",id:n.id,result:l},(0,a.getTransferList)(l)),r.next=16;break;case 13:r.prev=13,r.t1=r.catch(6),s.postMessage({type:"parse-error",id:n.id,message:r.t1.message});case 16:return r.abrupt("break",19);case 17:return c(n.message),r.abrupt("break",19);case 19:case"end":return r.stop()}},e,null,[[6,13]])}))).apply(this,arguments)}
},{"@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","@loaders.gl/loader-utils":"oHIH","../api/parse":"t8Kj"}],"W9BO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.selectLoader=m,exports.selectLoaderSync=w;var e=s(require("@babel/runtime/regenerator")),r=s(require("@babel/runtime/helpers/esm/defineProperty")),t=s(require("@babel/runtime/helpers/esm/typeof")),n=s(require("@babel/runtime/helpers/esm/toConsumableArray")),o=s(require("@babel/runtime/helpers/esm/asyncToGenerator")),i=require("@loaders.gl/loader-utils"),u=require("../loader-utils/normalize-loader"),a=require("../utils/resource-utils"),f=require("./register-loaders"),l=require("../../iterator-utils/make-iterator/blob-iterator"),c=require("../../javascript-utils/is-type");function s(e){return e&&e.__esModule?e:{default:e}}function y(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach(function(t){(0,r.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function p(e,r){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=b(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,a=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return u=e.done,e},e:function(e){a=!0,i=e},f:function(){try{u||null==t.return||t.return()}finally{if(a)throw i}}}}function b(e,r){if(e){if("string"==typeof e)return v(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?v(e,r):void 0}}function v(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var h=/\.([^.]+)$/;function m(e){return g.apply(this,arguments)}function g(){return(g=(0,o.default)(e.default.mark(function r(t){var n,o,i,u,a=arguments;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.length>1&&void 0!==a[1]?a[1]:[],o=a.length>2&&void 0!==a[2]?a[2]:{},i=a.length>3&&void 0!==a[3]?a[3]:{},!(u=w(t,n,d(d({},o),{},{nothrow:!0}),i))){e.next=6;break}return e.abrupt("return",u);case 6:if(!(0,c.isBlob)(t)){e.next=11;break}return e.next=9,(0,l.readFileSlice)(t,0,10);case 9:t=e.sent,u=w(t,n,o,i);case 11:if(u||o.nothrow){e.next=13;break}throw new Error(O(t));case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}},r)}))).apply(this,arguments)}function w(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(r&&!Array.isArray(r))return(0,u.normalizeLoader)(r);A(r=[].concat((0,n.default)(r||[]),(0,n.default)((0,f.getRegisteredLoaders)())));var i=(0,a.getResourceUrlAndType)(e),l=i.url,c=i.type,s=j(r,l||o.url);if(!(s=(s=s||q(r,c))||S(r,e))&&!t.nothrow)throw new Error(O(e));return s}function O(e){var r=(0,a.getResourceUrlAndType)(e),t=r.url,n=r.type,o="No valid loader found";return e&&(o+=' data: "'.concat(B(e),'", contentType: "').concat(n,'"')),t&&(o+=" url: ".concat(t)),o}function A(e){var r,t=p(e);try{for(t.s();!(r=t.n()).done;){var n=r.value;(0,u.normalizeLoader)(n)}}catch(o){t.e(o)}finally{t.f()}}function j(e,r){var t=r&&r.match(h),n=t&&t[1];return n&&x(e,n)}function x(e,r){r=r.toLowerCase();var t,n=p(e);try{for(n.s();!(t=n.n()).done;){var o,i=t.value,u=p(i.extensions);try{for(u.s();!(o=u.n()).done;){if(o.value.toLowerCase()===r)return i}}catch(a){u.e(a)}finally{u.f()}}}catch(a){n.e(a)}finally{n.f()}return null}function q(e,r){var t,n=p(e);try{for(n.s();!(t=n.n()).done;){var o=t.value;if(o.mimeTypes&&o.mimeTypes.includes(r))return o;if(r==="application/x.".concat(o.id))return o}}catch(i){n.e(i)}finally{n.f()}return null}function S(e,r){if(!r)return null;var t,n=p(e);try{for(n.s();!(t=n.n()).done;){var o=t.value;if("string"==typeof r){if(P(r,o))return o}else if(ArrayBuffer.isView(r)){if(L(r.buffer,r.byteOffset,o))return o}else if(r instanceof ArrayBuffer){if(L(r,0,o))return o}}}catch(i){n.e(i)}finally{n.f()}return null}function P(e,r){return r.testText&&r.testText(e)}function L(e,r,t){return(Array.isArray(t.tests)?t.tests:[t.tests]).some(function(n){return T(e,r,t,n)})}function T(e,r,n,o){if(o instanceof ArrayBuffer)return(0,i.compareArrayBuffers)(o,e,o.byteLength);switch((0,t.default)(o)){case"function":return o(e,n);case"string":return o===k(e,r,o.length);default:return!1}}function B(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if("string"==typeof e)return e.slice(0,r);if(ArrayBuffer.isView(e))return k(e.buffer,e.byteOffset,r);if(e instanceof ArrayBuffer){return k(e,0,r)}return""}function k(e,r,t){if(e.byteLength<r+t)return"";for(var n=new DataView(e),o="",i=0;i<t;i++)o+=String.fromCharCode(n.getUint8(r+i));return o}
},{"@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/defineProperty":"iDM3","@babel/runtime/helpers/esm/typeof":"zsbK","@babel/runtime/helpers/esm/toConsumableArray":"AdMH","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","@loaders.gl/loader-utils":"oHIH","../loader-utils/normalize-loader":"iWwL","../utils/resource-utils":"ABhg","./register-loaders":"k3wd","../../iterator-utils/make-iterator/blob-iterator":"SpPC","../../javascript-utils/is-type":"Oy8e"}],"t8Kj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parse=d;var e=f(require("@babel/runtime/regenerator")),r=f(require("@babel/runtime/helpers/esm/asyncToGenerator")),t=require("@loaders.gl/loader-utils"),n=require("../loader-utils/normalize-loader"),a=require("../loader-utils/option-utils"),u=require("../loader-utils/get-data"),s=require("../loader-utils/context-utils"),i=p(require("../loader-utils/parse-with-worker")),o=require("../utils/resource-utils"),l=require("./select-loader");function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function p(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=c();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var u=n?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(t,a,u):t[a]=e[a]}return t.default=e,r&&r.set(e,t),t}function f(e){return e&&e.__esModule?e:{default:e}}function d(e,r,t,n){return y.apply(this,arguments)}function y(){return(y=(0,r.default)(e.default.mark(function r(u,i,c,p){var f,y,x,g;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(0,t.assert)(!p||"string"!=typeof p,"parse no longer accepts final url"),!i||Array.isArray(i)||(0,n.isLoaderObject)(i)||(p=c,c=i,i=null),e.next=4,u;case 4:return u=e.sent,c=c||{},f=(0,o.getResourceUrlAndType)(u),y=f.url,x=(0,s.getLoaders)(i,p),e.next=10,(0,l.selectLoader)(u,x,c);case 10:if(g=e.sent){e.next=13;break}return e.abrupt("return",null);case 13:return c=(0,a.normalizeOptions)(c,g,x,y),p=(0,s.getLoaderContext)({url:y,parse:d,loaders:x},c,p),e.next=17,b(g,u,c,p);case 17:return e.abrupt("return",e.sent);case 18:case"end":return e.stop()}},r)}))).apply(this,arguments)}function b(e,r,t,n){return x.apply(this,arguments)}function x(){return(x=(0,r.default)(e.default.mark(function r(n,a,s,o){return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(0,t.validateLoaderVersion)(n),e.next=3,(0,u.getArrayBufferOrStringFromData)(a,n);case 3:if(a=e.sent,!n.parseTextSync||"string"!=typeof a){e.next=7;break}return s.dataType="text",e.abrupt("return",n.parseTextSync(a,s,o,n));case 7:if(!(0,i.canParseWithWorker)(n,a,s,o)){e.next=11;break}return e.next=10,(0,i.default)(n,a,s,o);case 10:return e.abrupt("return",e.sent);case 11:if(!n.parseText||"string"!=typeof a){e.next=15;break}return e.next=14,n.parseText(a,s,o,n);case 14:return e.abrupt("return",e.sent);case 15:if(!n.parse){e.next=19;break}return e.next=18,n.parse(a,s,o,n);case 18:return e.abrupt("return",e.sent);case 19:return(0,t.assert)(!n.parseSync),e.abrupt("return",(0,t.assert)(!1));case 21:case"end":return e.stop()}},r)}))).apply(this,arguments)}
},{"@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","@loaders.gl/loader-utils":"oHIH","../loader-utils/normalize-loader":"iWwL","../loader-utils/option-utils":"Go4L","../loader-utils/get-data":"IWzS","../loader-utils/context-utils":"AXLS","../loader-utils/parse-with-worker":"EXXs","../utils/resource-utils":"ABhg","./select-loader":"W9BO"}],"PAJp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseSync=l;var e=require("@loaders.gl/loader-utils"),r=require("./select-loader"),t=require("../loader-utils/normalize-loader"),a=require("../loader-utils/option-utils"),s=require("../loader-utils/get-data"),o=require("../loader-utils/context-utils"),n=require("../utils/resource-utils");function l(s,i,c,d){(0,e.assert)(!d||"string"!=typeof d,"parseSync no longer accepts final url"),Array.isArray(i)||(0,t.isLoaderObject)(i)||(d=c,c=i,i=null),c=c||{};var p=(0,o.getLoaders)(i,d),y=(0,r.selectLoaderSync)(s,p,c);if(!y)return null;c=(0,a.normalizeOptions)(c,y,p);var f=(0,n.getResourceUrlAndType)(s).url;return u(y,s,c,d=(0,o.getLoaderContext)({url:f,parseSync:l,loaders:i},c))}function u(e,r,t,a){if(r=(0,s.getArrayBufferOrStringFromDataSync)(r,e),e.parseTextSync&&"string"==typeof r)return e.parseTextSync(r,t,a,e);if(e.parseSync)return e.parseSync(r,t,a,e);throw new Error("".concat(e.name," loader: 'parseSync' not supported by this loader, use 'parse' instead. ").concat(a.url||""))}
},{"@loaders.gl/loader-utils":"oHIH","./select-loader":"W9BO","../loader-utils/normalize-loader":"iWwL","../loader-utils/option-utils":"Go4L","../loader-utils/get-data":"IWzS","../loader-utils/context-utils":"AXLS","../utils/resource-utils":"ABhg"}],"JjQl":[function(require,module,exports) {
"use strict";function t(t,n){var r={},e=!1;function o(r,o){return e=!0,o=new Promise(function(n){n(t[r](o))}),{done:!1,value:n(o)}}return"function"==typeof Symbol&&Symbol.iterator&&(r[Symbol.iterator]=function(){return this}),r.next=function(t){return e?(e=!1,t):o("next",t)},"function"==typeof t.throw&&(r.throw=function(t){if(e)throw e=!1,t;return o("throw",t)}),"function"==typeof t.return&&(r.return=function(t){return e?(e=!1,t):o("return",t)}),r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"tR2z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseInBatches=x;var e=m(require("@babel/runtime/regenerator")),r=m(require("@babel/runtime/helpers/esm/asyncToGenerator")),t=m(require("@babel/runtime/helpers/esm/wrapAsyncGenerator")),n=m(require("@babel/runtime/helpers/esm/awaitAsyncGenerator")),a=m(require("@babel/runtime/helpers/esm/asyncIterator")),u=m(require("@babel/runtime/helpers/esm/asyncGeneratorDelegate")),s=require("@loaders.gl/loader-utils"),o=require("../loader-utils/normalize-loader"),i=require("../loader-utils/option-utils"),l=require("../loader-utils/context-utils"),c=require("../loader-utils/get-data"),f=require("../utils/resource-utils"),p=require("./select-loader"),d=require("./parse");function m(e){return e&&e.__esModule?e:{default:e}}function y(e,r){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=h(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,s=!0,o=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return s=e.done,e},e:function(e){o=!0,u=e},f:function(){try{s||null==t.return||t.return()}finally{if(o)throw u}}}}function h(e,r){if(e){if("string"==typeof e)return b(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?b(e,r):void 0}}function b(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function x(e,r,t,n){return v.apply(this,arguments)}function v(){return(v=(0,r.default)(e.default.mark(function r(t,n,a,u){var c,m,y;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(0,s.assert)(!u||"string"!=typeof u,"parseInBatches no longer accepts final url"),Array.isArray(n)||(0,o.isLoaderObject)(n)||(u=a,a=n,n=null),e.next=4,t;case 4:return t=e.sent,a=a||{},c=(0,f.getResourceUrlAndType)(t),m=c.url,e.next=9,(0,p.selectLoader)(t,n,a);case 9:if(y=e.sent){e.next=12;break}return e.abrupt("return",null);case 12:return a=(0,i.normalizeOptions)(a,y,n,m),u=(0,l.getLoaderContext)({url:m,parseInBatches:x,parse:d.parse,loaders:n},a,u),e.next=16,g(y,t,a,u);case 16:return e.abrupt("return",e.sent);case 17:case"end":return e.stop()}},r)}))).apply(this,arguments)}function g(e,r,t,n){return w.apply(this,arguments)}function w(){return(w=(0,r.default)(e.default.mark(function r(s,o,i,l){var c,f,p,d;return e.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return d=function(){return(d=(0,t.default)(e.default.mark(function r(t){return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f;case 2:return e.delegateYield((0,u.default)((0,a.default)(t),n.default),"t0",3);case 3:case"end":return e.stop()}},r)}))).apply(this,arguments)},p=function(e){return d.apply(this,arguments)},r.next=4,I(s,o,i,l);case 4:if(c=r.sent,i.metadata){r.next=7;break}return r.abrupt("return",c);case 7:return f={batchType:"metadata",metadata:{_loader:s,_context:l},data:[],bytesUsed:0},r.abrupt("return",p(c));case 9:case"end":return r.stop()}},r)}))).apply(this,arguments)}function I(e,r,t,n){return q.apply(this,arguments)}function q(){return(q=(0,r.default)(e.default.mark(function r(a,u,o,i){var l,f,p,d,m;return e.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(m=function(){return(m=(0,t.default)(e.default.mark(function r(){var t,l;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,n.default)((0,c.getAsyncIteratorFromData)(u));case 2:return t=e.sent,e.next=5,(0,n.default)((0,s.concatenateChunksAsync)(t));case 5:return l=e.sent,e.next=8,a.parse(l,o,i,a);case 8:case"end":return e.stop()}},r)}))).apply(this,arguments)},d=function(){return m.apply(this,arguments)},!a.parseInBatches){r.next=10;break}return r.next=5,(0,c.getAsyncIteratorFromData)(u);case 5:return l=r.sent,f=A(l,o),r.next=9,a.parseInBatches(f,o,i,a);case 9:return r.abrupt("return",r.sent);case 10:if(!a.parseStreamInBatches){r.next=17;break}return r.next=13,(0,c.getReadableStream)(u);case 13:if(!(p=r.sent)){r.next=17;break}return o.transforms&&console.warn("options.transforms not implemented for loaders that use `parseStreamInBatches`"),r.abrupt("return",a.parseStreamInBatches(p,o,i));case 17:return r.next=19,d();case 19:return r.abrupt("return",r.sent);case 20:case"end":return r.stop()}},r)}))).apply(this,arguments)}function A(e,r){var t,n=e,a=y(r.transforms||[]);try{for(a.s();!(t=a.n()).done;){var u=t.value;n=(0,s.makeTransformIterator)(n,u,r)}}catch(o){a.e(o)}finally{a.f()}return n}
},{"@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","@babel/runtime/helpers/esm/wrapAsyncGenerator":"SBb5","@babel/runtime/helpers/esm/awaitAsyncGenerator":"EMU2","@babel/runtime/helpers/esm/asyncIterator":"bQZY","@babel/runtime/helpers/esm/asyncGeneratorDelegate":"JjQl","@loaders.gl/loader-utils":"oHIH","../loader-utils/normalize-loader":"iWwL","../loader-utils/option-utils":"Go4L","../loader-utils/context-utils":"AXLS","../loader-utils/get-data":"IWzS","../utils/resource-utils":"ABhg","./select-loader":"W9BO","./parse":"t8Kj"}],"CA4j":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.load=i;var e=s(require("@babel/runtime/regenerator")),r=s(require("@babel/runtime/helpers/esm/asyncToGenerator")),t=require("../../javascript-utils/is-type"),n=require("../loader-utils/normalize-loader"),a=require("../loader-utils/option-utils"),u=require("./parse");function s(e){return e&&e.__esModule?e:{default:e}}function i(e,r,t){return l.apply(this,arguments)}function l(){return(l=(0,r.default)(e.default.mark(function r(s,i,l){var o,c;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Array.isArray(i)||(0,n.isLoaderObject)(i)||(l=i,i=null),o=(0,a.getFetchFunction)(l||{}),c=s,"string"!=typeof s){e.next=9;break}return e.next=6,o(s);case 6:c=e.sent,e.next=10;break;case 9:s=null;case 10:if(!(0,t.isBlob)(s)){e.next=15;break}return e.next=13,o(s);case 13:c=e.sent,s=null;case 15:return e.next=17,(0,u.parse)(c,i,l);case 17:return e.abrupt("return",e.sent);case 18:case"end":return e.stop()}},r)}))).apply(this,arguments)}
},{"@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","../../javascript-utils/is-type":"Oy8e","../loader-utils/normalize-loader":"iWwL","../loader-utils/option-utils":"Go4L","./parse":"t8Kj"}],"C8HI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.loadInBatches=s;var e=u(require("@babel/runtime/regenerator")),r=u(require("@babel/runtime/helpers/esm/asyncToGenerator")),t=require("../loader-utils/normalize-loader"),n=require("../loader-utils/option-utils"),a=require("./parse-in-batches");function u(e){return e&&e.__esModule?e:{default:e}}function s(e,r,a){Array.isArray(r)||(0,t.isLoaderObject)(r)||(a=r,r=null);var u=(0,n.getFetchFunction)(a||{});return Array.isArray(e)?e.map(function(e){return i(e,r,a,u)}):i(e,r,a,u)}function i(e,r,t,n){return o.apply(this,arguments)}function o(){return(o=(0,r.default)(e.default.mark(function r(t,n,u,s){var i,o;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!=typeof t){e.next=8;break}return i=t,e.next=4,s(i);case 4:return o=e.sent,e.next=7,(0,a.parseInBatches)(o,n,u);case 7:return e.abrupt("return",e.sent);case 8:return e.next=10,(0,a.parseInBatches)(t,n,u);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}},r)}))).apply(this,arguments)}
},{"@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","../loader-utils/normalize-loader":"iWwL","../loader-utils/option-utils":"Go4L","./parse-in-batches":"tR2z"}],"SWoI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.encode=s,exports.encodeSync=d,exports.encodeText=f,exports.encodeInBatches=p,exports.encodeURLtoURL=h;var e=u(require("@babel/runtime/regenerator")),r=u(require("@babel/runtime/helpers/esm/asyncToGenerator")),t=u(require("@babel/runtime/helpers/esm/asyncIterator")),n=require("@loaders.gl/loader-utils"),a=require("../fetch/write-file"),c=require("../fetch/fetch-file");function u(e){return e&&e.__esModule?e:{default:e}}function o(e){return"/tmp/".concat(e)}function s(e,r,t,n){return i.apply(this,arguments)}function i(){return(i=(0,r.default)(e.default.mark(function r(u,s,i,d){var f,l,x,b,w,y,v,k,m,B,L,R,T;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!s.encode){e.next=4;break}return e.next=3,s.encode(u,i);case 3:return e.abrupt("return",e.sent);case 4:if(!s.encodeSync){e.next=6;break}return e.abrupt("return",s.encodeSync(u,i));case 6:if(!s.encodeText){e.next=12;break}return e.t0=new TextEncoder,e.next=10,s.encodeText(u,i);case 10:return e.t1=e.sent,e.abrupt("return",e.t0.encode.call(e.t0,e.t1));case 12:if(!s.encodeInBatches){e.next=51;break}f=p(u,s,i),l=[],x=!0,b=!1,e.prev=17,y=(0,t.default)(f);case 19:return e.next=21,y.next();case 21:return v=e.sent,x=v.done,e.next=25,v.value;case 25:if(k=e.sent,x){e.next=32;break}m=k,l.push(m);case 29:x=!0,e.next=19;break;case 32:e.next=38;break;case 34:e.prev=34,e.t2=e.catch(17),b=!0,w=e.t2;case 38:if(e.prev=38,e.prev=39,x||null==y.return){e.next=43;break}return e.next=43,y.return();case 43:if(e.prev=43,!b){e.next=46;break}throw w;case 46:return e.finish(43);case 47:return e.finish(38);case 48:return e.next=50,n.concatenateArrayBuffers.apply(void 0,l);case 50:return e.abrupt("return",e.sent);case 51:if(n.isBrowser||!s.encodeURLtoURL){e.next=63;break}return B=o("input"),e.next=55,(0,a.writeFile)(B,u);case 55:return L=o("output"),e.next=58,h(B,L,s,i);case 58:return R=e.sent,e.next=61,(0,c.fetchFile)(R);case 61:return T=e.sent,e.abrupt("return",T.arrayBuffer());case 63:throw new Error("Writer could not encode data");case 64:case"end":return e.stop()}},r,null,[[17,34,38,48],[39,,43,47]])}))).apply(this,arguments)}function d(e,r,t,n){if(r.encodeSync)return r.encodeSync(e,t);throw new Error("Writer could not synchronously encode data")}function f(e,r,t,n){return l.apply(this,arguments)}function l(){return(l=(0,r.default)(e.default.mark(function r(t,n,a,c){var u;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.text||!n.encodeText){e.next=4;break}return e.next=3,n.encodeText(t,a);case 3:return e.abrupt("return",e.sent);case 4:if(!n.text||!n.encode&&!n.encodeInBatches){e.next=9;break}return e.next=7,s(t,n,a);case 7:return u=e.sent,e.abrupt("return",(new TextDecoder).decode(u));case 9:throw new Error("Writer could not encode data as text");case 10:case"end":return e.stop()}},r)}))).apply(this,arguments)}function p(e,r,t,n){if(r.encodeInBatches){var a=x(e);return r.encodeInBatches(a,t)}throw new Error("Writer could not encode data in batches")}function x(e){return[{table:e,start:0,end:e.length}]}function h(e,r,t,n){return b.apply(this,arguments)}function b(){return(b=(0,r.default)(e.default.mark(function r(t,a,c,u){var o;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(0,n.resolvePath)(t),a=(0,n.resolvePath)(a),!n.isBrowser&&c.encodeURLtoURL){e.next=4;break}throw new Error;case 4:return e.next=6,c.encodeURLtoURL(t,a,u);case 6:return o=e.sent,e.abrupt("return",o);case 8:case"end":return e.stop()}},r)}))).apply(this,arguments)}
},{"@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","@babel/runtime/helpers/esm/asyncIterator":"bQZY","@loaders.gl/loader-utils":"oHIH","../fetch/write-file":"YW6i","../fetch/fetch-file":"b40H"}],"DUKs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.save=t,exports.saveSync=n;var e=require("./encode"),r=require("../fetch/write-file");function t(t,n,i,c){var o=(0,e.encode)(t,i,c,n);return(0,r.writeFile)(n,o)}function n(t,n,i,c){var o=(0,e.encodeSync)(t,i,c,n);return(0,r.writeFileSync)(n,o)}
},{"./encode":"SWoI","../fetch/write-file":"YW6i"}],"aJIU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.NullLoader=void 0;var e=s(require("@babel/runtime/regenerator")),r=s(require("@babel/runtime/helpers/esm/asyncToGenerator")),t=s(require("@babel/runtime/helpers/esm/wrapAsyncGenerator")),n=s(require("@babel/runtime/helpers/esm/awaitAsyncGenerator")),a=s(require("@babel/runtime/helpers/esm/asyncIterator")),u=s(require("@babel/runtime/helpers/esm/asyncGeneratorDelegate"));function s(e){return e&&e.__esModule?e:{default:e}}var i="2.3.7",o={id:"image",name:"Images",version:i,mimeTypes:["application/x.empty"],extensions:["null"],parse:function(){var t=(0,r.default)(e.default.mark(function r(t,n){return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}},r)}));return function(e,r){return t.apply(this,arguments)}}(),parseSync:function(e,r){return e},parseInBatches:function(){var s=(0,r.default)(e.default.mark(function r(s,i){return e.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",function(){var r=(0,t.default)(e.default.mark(function r(){return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield((0,u.default)((0,a.default)(s),n.default),"t0",1);case 1:case"end":return e.stop()}},r)}));return function(){return r.apply(this,arguments)}}()());case 1:case"end":return r.stop()}},r)}));return function(e,r){return s.apply(this,arguments)}}(),tests:[function(){return!1}],options:{}};exports.NullLoader=o;
},{"@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","@babel/runtime/helpers/esm/wrapAsyncGenerator":"SBb5","@babel/runtime/helpers/esm/awaitAsyncGenerator":"EMU2","@babel/runtime/helpers/esm/asyncIterator":"bQZY","@babel/runtime/helpers/esm/asyncGeneratorDelegate":"JjQl"}],"HD9x":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var e=r(require("@babel/runtime/regenerator")),t=r(require("@babel/runtime/helpers/esm/asyncToGenerator"));function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){return a.apply(this,arguments)}function a(){return(a=(0,t.default)(e.default.mark(function t(r,n){var a,s,o,c,i,f,l=arguments;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>2&&void 0!==l[2]?l[2]:function(){},s=l.length>3&&void 0!==l[3]?l[3]:function(){},e.next=4,r;case 4:if((r=e.sent).ok){e.next=7;break}return e.abrupt("return",r);case 7:if(o=r.body){e.next=10;break}return e.abrupt("return",r);case 10:if(c=r.headers.get("content-length"),i=c&&parseInt(c,10),c>0){e.next=14;break}return e.abrupt("return",r);case 14:if("undefined"!=typeof ReadableStream&&o.getReader){e.next=16;break}return e.abrupt("return",r);case 16:return f=new ReadableStream({start:function(e){u(e,o.getReader(),0,i,n,a,s)}}),e.abrupt("return",new Response(f));case 18:case"end":return e.stop()}},t)}))).apply(this,arguments)}function u(e,t,r,n,a,u,o){return s.apply(this,arguments)}function s(){return(s=(0,t.default)(e.default.mark(function t(r,n,a,s,o,c,i){var f,l,p,d;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.read();case 3:if(f=e.sent,l=f.done,p=f.value,!l){e.next=10;break}return c(),r.close(),e.abrupt("return");case 10:return a+=p.byteLength,d=Math.round(a/s*100),o(d,{loadedBytes:a,totalBytes:s}),r.enqueue(p),e.next=16,u(r,n,a,s,o,c,i);case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(0),r.error(e.t0),i(e.t0);case 22:case"end":return e.stop()}},t,null,[[0,18]])}))).apply(this,arguments)}
},{"@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk"}],"EeUV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("@babel/runtime/regenerator")),t=u(require("@babel/runtime/helpers/esm/asyncToGenerator")),r=u(require("@babel/runtime/helpers/esm/classCallCheck")),n=u(require("@babel/runtime/helpers/esm/createClass"));function u(e){return e&&e.__esModule?e:{default:e}}var a=function(){function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,r.default)(this,u),this._fetch=t.fetch||fetch,this.files={};for(var n=0;n<e.length;++n){var a=e[n];this.files[a.name]=a}this.fetch=this.fetch.bind(this)}return(0,n.default)(u,[{key:"fetch",value:function(){var r=(0,t.default)(e.default.mark(function t(r){var n,u,a,s=arguments;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=s.length>1&&void 0!==s[1]?s[1]:{},!r.includes("://")){e.next=4;break}return u=n.fetch||this._fetch,e.abrupt("return",u(r,n));case 4:if(!this.files[r]){e.next=9;break}return a=new Response(this.files[r]),Object.defineProperty(a,"url",{value:r}),e.abrupt("return",a);case 9:return e.abrupt("return",new Response(r,{status:400,statusText:"NOT FOUND"}));case 10:case"end":return e.stop()}},t,this)}));return function(e){return r.apply(this,arguments)}}()},{key:"readdir",value:function(){var r=(0,t.default)(e.default.mark(function t(){var r,n;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n in r=[],this.files)r.push(n);return e.abrupt("return",r);case 3:case"end":return e.stop()}},t,this)}));return function(){return r.apply(this,arguments)}}()},{key:"stat",value:function(){var r=(0,t.default)(e.default.mark(function t(r,n){var u;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(u=this.files[r]){e.next=3;break}throw new Error("No such file: ".concat(r));case 3:return e.abrupt("return",{size:u.size});case 4:case"end":return e.stop()}},t,this)}));return function(e,t){return r.apply(this,arguments)}}()},{key:"unlink",value:function(){var r=(0,t.default)(e.default.mark(function t(r){return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:delete this.files[r];case 1:case"end":return e.stop()}},t,this)}));return function(e){return r.apply(this,arguments)}}()},{key:"open",value:function(){var r=(0,t.default)(e.default.mark(function t(r){return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.files[r]);case 1:case"end":return e.stop()}},t,this)}));return function(e){return r.apply(this,arguments)}}()},{key:"read",value:function(){var r=(0,t.default)(e.default.mark(function t(r,n){var u,a,i,f,c,o,l,p,d;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u=n.buffer,a=void 0===u?null:u,i=n.offset,void 0===i?0:i,f=n.length,c=void 0===f?a.byteLength:f,o=n.position,l=void 0===o?null:o,p=r,e.next=4,s(p,l,l+c);case 4:return d=e.sent,e.abrupt("return",d);case 6:case"end":return e.stop()}},t)}));return function(e,t){return r.apply(this,arguments)}}()},{key:"close",value:function(){var r=(0,t.default)(e.default.mark(function t(r){return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},t)}));return function(e){return r.apply(this,arguments)}}()}]),u}();function s(e,t,r){return i.apply(this,arguments)}function i(){return(i=(0,t.default)(e.default.mark(function t(r,n,u){var a;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.slice(n,u),e.next=3,new Promise(function(e,t){var r=new FileReader;r.onload=function(t){return e(t.target&&t.target.result)},r.onerror=function(e){return t(e)},r.readAsArrayBuffer(a)});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},t)}))).apply(this,arguments)}exports.default=a;
},{"@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph"}],"ikKD":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"fetchFile",{enumerable:!0,get:function(){return r.fetchFile}}),Object.defineProperty(exports,"readFileSync",{enumerable:!0,get:function(){return t.readFileSync}}),Object.defineProperty(exports,"writeFile",{enumerable:!0,get:function(){return n.writeFile}}),Object.defineProperty(exports,"writeFileSync",{enumerable:!0,get:function(){return n.writeFileSync}}),Object.defineProperty(exports,"setLoaderOptions",{enumerable:!0,get:function(){return o.setLoaderOptions}}),Object.defineProperty(exports,"registerLoaders",{enumerable:!0,get:function(){return i.registerLoaders}}),Object.defineProperty(exports,"_unregisterLoaders",{enumerable:!0,get:function(){return i._unregisterLoaders}}),Object.defineProperty(exports,"parse",{enumerable:!0,get:function(){return u.parse}}),Object.defineProperty(exports,"parseSync",{enumerable:!0,get:function(){return a.parseSync}}),Object.defineProperty(exports,"parseInBatches",{enumerable:!0,get:function(){return c.parseInBatches}}),Object.defineProperty(exports,"selectLoader",{enumerable:!0,get:function(){return s.selectLoader}}),Object.defineProperty(exports,"selectLoaderSync",{enumerable:!0,get:function(){return s.selectLoaderSync}}),Object.defineProperty(exports,"load",{enumerable:!0,get:function(){return b.load}}),Object.defineProperty(exports,"loadInBatches",{enumerable:!0,get:function(){return l.loadInBatches}}),Object.defineProperty(exports,"encode",{enumerable:!0,get:function(){return p.encode}}),Object.defineProperty(exports,"encodeSync",{enumerable:!0,get:function(){return p.encodeSync}}),Object.defineProperty(exports,"encodeInBatches",{enumerable:!0,get:function(){return p.encodeInBatches}}),Object.defineProperty(exports,"encodeText",{enumerable:!0,get:function(){return p.encodeText}}),Object.defineProperty(exports,"encodeURLtoURL",{enumerable:!0,get:function(){return p.encodeURLtoURL}}),Object.defineProperty(exports,"save",{enumerable:!0,get:function(){return f.save}}),Object.defineProperty(exports,"saveSync",{enumerable:!0,get:function(){return f.saveSync}}),Object.defineProperty(exports,"makeIterator",{enumerable:!0,get:function(){return d.makeIterator}}),Object.defineProperty(exports,"NullLoader",{enumerable:!0,get:function(){return m.NullLoader}}),Object.defineProperty(exports,"setPathPrefix",{enumerable:!0,get:function(){return y.setPathPrefix}}),Object.defineProperty(exports,"getPathPrefix",{enumerable:!0,get:function(){return y.getPathPrefix}}),Object.defineProperty(exports,"resolvePath",{enumerable:!0,get:function(){return y.resolvePath}}),Object.defineProperty(exports,"RequestScheduler",{enumerable:!0,get:function(){return y.RequestScheduler}}),Object.defineProperty(exports,"isBrowser",{enumerable:!0,get:function(){return y.isBrowser}}),Object.defineProperty(exports,"isWorker",{enumerable:!0,get:function(){return y.isWorker}}),Object.defineProperty(exports,"self",{enumerable:!0,get:function(){return y.self}}),Object.defineProperty(exports,"window",{enumerable:!0,get:function(){return y.window}}),Object.defineProperty(exports,"global",{enumerable:!0,get:function(){return y.global}}),Object.defineProperty(exports,"document",{enumerable:!0,get:function(){return y.document}}),Object.defineProperty(exports,"assert",{enumerable:!0,get:function(){return y.assert}}),Object.defineProperty(exports,"forEach",{enumerable:!0,get:function(){return y.forEach}}),Object.defineProperty(exports,"concatenateChunksAsync",{enumerable:!0,get:function(){return y.concatenateChunksAsync}}),Object.defineProperty(exports,"makeTextDecoderIterator",{enumerable:!0,get:function(){return y.makeTextDecoderIterator}}),Object.defineProperty(exports,"makeTextEncoderIterator",{enumerable:!0,get:function(){return y.makeTextEncoderIterator}}),Object.defineProperty(exports,"makeLineIterator",{enumerable:!0,get:function(){return y.makeLineIterator}}),Object.defineProperty(exports,"makeNumberedLineIterator",{enumerable:!0,get:function(){return y.makeNumberedLineIterator}}),Object.defineProperty(exports,"_fetchProgress",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(exports,"_BrowserFileSystem",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(exports,"isPromise",{enumerable:!0,get:function(){return x.isPromise}}),Object.defineProperty(exports,"isIterable",{enumerable:!0,get:function(){return x.isIterable}}),Object.defineProperty(exports,"isAsyncIterable",{enumerable:!0,get:function(){return x.isAsyncIterable}}),Object.defineProperty(exports,"isIterator",{enumerable:!0,get:function(){return x.isIterator}}),Object.defineProperty(exports,"isResponse",{enumerable:!0,get:function(){return x.isResponse}}),Object.defineProperty(exports,"isReadableStream",{enumerable:!0,get:function(){return x.isReadableStream}}),Object.defineProperty(exports,"isWritableStream",{enumerable:!0,get:function(){return x.isWritableStream}});var r=require("./lib/fetch/fetch-file"),t=require("./lib/fetch/read-file"),n=require("./lib/fetch/write-file"),o=require("./lib/api/set-loader-options"),i=require("./lib/api/register-loaders"),u=require("./lib/api/parse"),a=require("./lib/api/parse-sync"),c=require("./lib/api/parse-in-batches"),s=require("./lib/api/select-loader"),b=require("./lib/api/load"),l=require("./lib/api/load-in-batches"),p=require("./lib/api/encode"),f=require("./lib/api/save"),d=require("./iterator-utils/make-iterator/make-iterator"),m=require("./null-loader"),y=require("@loaders.gl/loader-utils"),g=O(require("./lib/progress/fetch-progress")),P=O(require("./lib/filesystems/browser-filesystem")),x=require("./javascript-utils/is-type");function O(e){return e&&e.__esModule?e:{default:e}}
},{"./lib/fetch/fetch-file":"b40H","./lib/fetch/read-file":"WRQd","./lib/fetch/write-file":"YW6i","./lib/api/set-loader-options":"dAxI","./lib/api/register-loaders":"k3wd","./lib/api/parse":"t8Kj","./lib/api/parse-sync":"PAJp","./lib/api/parse-in-batches":"tR2z","./lib/api/select-loader":"W9BO","./lib/api/load":"CA4j","./lib/api/load-in-batches":"C8HI","./lib/api/encode":"SWoI","./lib/api/save":"DUKs","./iterator-utils/make-iterator/make-iterator":"ASms","./null-loader":"aJIU","@loaders.gl/loader-utils":"oHIH","./lib/progress/fetch-progress":"HD9x","./lib/filesystems/browser-filesystem":"EeUV","./javascript-utils/is-type":"Oy8e"}],"tUCp":[function(require,module,exports) {
"use strict";function e(e,r){if(!e)throw new Error(r)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"xUsy":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isImageTypeSupported=s,exports.getDefaultImageType=i;var e=require("../utils/globals"),r=e.global._parseImageNode,t="undefined"!=typeof Image,a="undefined"!=typeof ImageBitmap,n=Boolean(r),o=!!e.isBrowser||n;function s(e){switch(e){case"auto":return a||t||o;case"imagebitmap":return a;case"image":return t;case"data":return o;case"html":return t;case"ndarray":return o;default:throw new Error("@loaders.gl/images: image ".concat(e," not supported in this environment"))}}function i(){if(a)return"imagebitmap";if(t)return"image";if(o)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}
},{"../utils/globals":"TqKA"}],"fZkF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isImage=i,exports.deleteImage=r,exports.getImageType=n,exports.getImageSize=exports.getImageData=o;var e=a(require("@babel/runtime/helpers/esm/typeof")),t=a(require("../utils/assert"));function a(e){return e&&e.__esModule?e:{default:e}}function i(e){return Boolean(u(e))}function r(e){switch(n(e)){case"imagebitmap":e.close()}}function n(e){var t=u(e);if(!t)throw new Error("Not an image");return t}function o(e){switch(n(e)){case"data":return e;case"image":case"imagebitmap":var a=document.createElement("canvas"),i=a.getContext("2d");if(i)return a.width=e.width,a.height=e.height,i.drawImage(e,0,0),i.getImageData(0,0,e.width,e.height);default:return(0,t.default)(!1)}}function u(t){return"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?"imagebitmap":"undefined"!=typeof Image&&t instanceof Image?"image":t&&"object"===(0,e.default)(t)&&t.data&&t.width&&t.height?"data":null}
},{"@babel/runtime/helpers/esm/typeof":"zsbK","../utils/assert":"tUCp"}],"xgTF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isSVG=r,exports.getBlobOrSVGDataUrl=o,exports.getBlob=a;var e=/^data:image\/svg\+xml/,t=/\.svg((\?|#).*)?$/;function r(r){return r&&(e.test(r)||t.test(r))}function o(e,t){if(r(t)){var o=(new TextDecoder).decode(e);return"data:image/svg+xml;base64,".concat(btoa(o))}return a(e,t)}function a(e,t){if(r(t))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(e)])}
},{}],"ZjNq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u,exports.loadToImage=o;var e=n(require("@babel/runtime/regenerator")),r=n(require("@babel/runtime/helpers/esm/asyncToGenerator")),t=require("./svg-utils");function n(e){return e&&e.__esModule?e:{default:e}}function u(e,r,t){return a.apply(this,arguments)}function a(){return(a=(0,r.default)(e.default.mark(function r(n,u,a){var c,s,i;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c=(0,t.getBlobOrSVGDataUrl)(n,a),s=self.URL||self.webkitURL,i="string"!=typeof c&&s.createObjectURL(c),e.prev=3,e.next=6,o(i||c,u);case 6:return e.abrupt("return",e.sent);case 7:return e.prev=7,i&&s.revokeObjectURL(i),e.finish(7);case 10:case"end":return e.stop()}},r,null,[[3,,7,10]])}))).apply(this,arguments)}function o(e,r){return c.apply(this,arguments)}function c(){return(c=(0,r.default)(e.default.mark(function r(t,n){var u;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((u=new Image).src=t,!(n.image&&n.image.decode&&u.decode)){e.next=6;break}return e.next=5,u.decode();case 5:return e.abrupt("return",u);case 6:return e.next=8,new Promise(function(e,r){try{u.onload=function(){return e(u)},u.onerror=function(e){return r(new Error("Could not load image ".concat(t,": ").concat(e)))}}catch(n){r(n)}});case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}},r)}))).apply(this,arguments)}
},{"@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","./svg-utils":"xgTF"}],"Mwvl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;var e=a(require("@babel/runtime/regenerator")),r=a(require("@babel/runtime/helpers/esm/asyncToGenerator")),t=require("./svg-utils"),n=a(require("./parse-to-image"));function a(e){return e&&e.__esModule?e:{default:e}}var u={},s=!0;function i(e,r,t){return c.apply(this,arguments)}function c(){return(c=(0,r.default)(e.default.mark(function r(a,u,s){var i,c,o;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,t.isSVG)(s)){e.next=7;break}return e.next=3,(0,n.default)(a,u,s);case 3:c=e.sent,i=c,e.next=8;break;case 7:i=(0,t.getBlob)(a,s);case 8:return o=u&&u.imagebitmap,e.next=11,l(i,o);case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}},r)}))).apply(this,arguments)}function l(e){return o.apply(this,arguments)}function o(){return(o=(0,r.default)(e.default.mark(function r(t){var n,a=arguments;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!p(n=a.length>1&&void 0!==a[1]?a[1]:null)&&s||(n=null),!n){e.next=13;break}return e.prev=3,e.next=6,createImageBitmap(t,n);case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(3),console.warn(e.t0),s=!1;case 13:return e.next=15,createImageBitmap(t);case 15:return e.abrupt("return",e.sent);case 16:case"end":return e.stop()}},r,null,[[3,9]])}))).apply(this,arguments)}function p(e){for(var r in e||u)return!1;return!0}
},{"@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","./svg-utils":"xgTF","./parse-to-image":"ZjNq"}],"XFGE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getBinaryImageMetadata=n,exports.getBmpMetadata=a;var e=!1,t=!0;function n(e){var t=f(e);return r(t)||g(t)||i(t)||a(t)}function r(t){var n=f(t);return n.byteLength>=24&&2303741511===n.getUint32(0,e)?{mimeType:"image/png",width:n.getUint32(16,e),height:n.getUint32(20,e)}:null}function i(n){var r=f(n);return r.byteLength>=10&&1195984440===r.getUint32(0,e)?{mimeType:"image/gif",width:r.getUint16(6,t),height:r.getUint16(8,t)}:null}function a(n){var r=f(n);return r.byteLength>=14&&16973===r.getUint16(0,e)&&r.getUint32(2,t)===r.byteLength?{mimeType:"image/bmp",width:r.getUint32(18,t),height:r.getUint32(22,t)}:null}function g(t){var n=f(t);if(!(n.byteLength>=3&&65496===n.getUint16(0,e)&&255===n.getUint8(2)))return null;for(var r=u(),i=r.tableMarkers,a=r.sofMarkers,g=2;g+9<n.byteLength;){var h=n.getUint16(g,e);if(a.has(h))return{mimeType:"image/jpeg",height:n.getUint16(g+5,e),width:n.getUint16(g+7,e)};if(!i.has(h))return null;g+=2,g+=n.getUint16(g,e)}return null}function u(){for(var e=new Set([65499,65476,65484,65501,65534]),t=65504;t<65520;++t)e.add(t);return{tableMarkers:e,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}function f(e){if(e instanceof DataView)return e;if(ArrayBuffer.isView(e))return new DataView(e.buffer);if(e instanceof ArrayBuffer)return new DataView(e);throw new Error("toDataView")}
},{}],"wlvc":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=require("../utils/globals"),r=t(require("../utils/assert")),a=require("../category-api/binary-image-api");function t(e){return e&&e.__esModule?e:{default:e}}function u(t,u){var i=((0,a.getBinaryImageMetadata)(t)||{}).mimeType,l=e.global._parseImageNode;return(0,r.default)(l),l(t,i,u)}
},{"../utils/globals":"TqKA","../utils/assert":"tUCp","../category-api/binary-image-api":"XFGE"}],"acKO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=c;var e=p(require("@babel/runtime/regenerator")),t=p(require("@babel/runtime/helpers/esm/asyncToGenerator")),r=p(require("../utils/assert")),a=require("../category-api/image-type"),u=require("../category-api/parsed-image-api"),n=p(require("./parse-to-image")),s=p(require("./parse-to-image-bitmap")),i=p(require("./parse-to-node-image"));function p(e){return e&&e.__esModule?e:{default:e}}function c(e,t,r){return o.apply(this,arguments)}function o(){return(o=(0,t.default)(e.default.mark(function t(a,p,c){var o,d,f,m,g;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o=(p=p||{}).image||{},d=o.type||"auto",f=(c||{}).url,m=l(d),e.t0=m,e.next="imagebitmap"===e.t0?8:"image"===e.t0?12:"data"===e.t0?16:20;break;case 8:return e.next=10,(0,s.default)(a,p,f);case 10:return g=e.sent,e.abrupt("break",21);case 12:return e.next=14,(0,n.default)(a,p,f);case 14:return g=e.sent,e.abrupt("break",21);case 16:return e.next=18,(0,i.default)(a,p);case 18:return g=e.sent,e.abrupt("break",21);case 20:(0,r.default)(!1);case 21:return"data"===d&&(g=(0,u.getImageData)(g)),e.abrupt("return",g);case 23:case"end":return e.stop()}},t)}))).apply(this,arguments)}function l(e){switch(e){case"auto":case"data":return(0,a.getDefaultImageType)();default:return(0,a.isImageTypeSupported)(e),e}}
},{"@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","../utils/assert":"tUCp","../category-api/image-type":"xUsy","../category-api/parsed-image-api":"fZkF","./parse-to-image":"ZjNq","./parse-to-image-bitmap":"Mwvl","./parse-to-node-image":"wlvc"}],"Aq3y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("./lib/parsers/parse-image")),a=require("./lib/category-api/binary-image-api");function i(e){return e&&e.__esModule?e:{default:e}}var t="2.3.7",r=["png","jpg","jpeg","gif","webp","bmp","ico","svg"],g=["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],o={id:"image",name:"Images",version:t,mimeTypes:g,extensions:r,parse:e.default,tests:[function(e){return Boolean((0,a.getBinaryImageMetadata)(new DataView(e)))}],options:{image:{type:"auto",decode:!0}}},s=o;exports.default=s;
},{"./lib/parsers/parse-image":"acKO","./lib/category-api/binary-image-api":"XFGE"}],"I3ae":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.encodeImage=u;var e=n(require("@babel/runtime/regenerator")),t=n(require("@babel/runtime/helpers/esm/asyncToGenerator")),r=require("../utils/globals"),a=require("../category-api/parsed-image-api");function n(e){return e&&e.__esModule?e:{default:e}}var i=r.global._encodeImageNode;function u(e,t){return o.apply(this,arguments)}function o(){return(o=(0,t.default)(e.default.mark(function t(r,a){return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(a=a||{}).image=a.image||{},e.abrupt("return",i?i(r,{type:a.image.mimeType}):s(r,a));case 3:case"end":return e.stop()}},t)}))).apply(this,arguments)}var p=!0;function s(e,t){return c.apply(this,arguments)}function c(){return(c=(0,t.default)(e.default.mark(function t(r,n){var i,u,o,s,c,d,f,l;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.image,u=i.mimeType,o=i.jpegQuality,s=(0,a.getImageSize)(r),c=s.width,d=s.height,(f=document.createElement("canvas")).width=c,f.height=d,m(r,f),e.next=8,new Promise(function(e,t){if(o&&p)try{return void f.toBlob(e,u,o)}catch(r){p=!1}f.toBlob(e,u)});case 8:return l=e.sent,e.next=11,l.arrayBuffer();case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}},t)}))).apply(this,arguments)}function m(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(0===r&&0===a&&"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){var n=t.getContext("bitmaprenderer");if(n)return n.transferFromImageBitmap(e),t}var i=t.getContext("2d");if(e.data){var u=new Uint8ClampedArray(e.data),o=new ImageData(u,e.width,e.height);return i.putImageData(o,0,0),t}return i.drawImage(e,0,0),t}
},{"@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","../utils/globals":"TqKA","../category-api/parsed-image-api":"fZkF"}],"iXQV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./lib/encoders/encode-image"),o={name:"Images",extensions:["jpeg"],options:{image:{mimeType:"image/png",jpegQuality:null}},encode:e.encodeImage};exports.default=o;
},{"./lib/encoders/encode-image":"I3ae"}],"kCQP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.generateUrl=u;var e=n(require("@babel/runtime/helpers/esm/defineProperty")),r=require("@loaders.gl/loader-utils"),t=n(require("../utils/assert"));function n(e){return e&&e.__esModule?e:{default:e}}function o(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function c(r){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach(function(t){(0,e.default)(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))})}return r}function u(e,n,o){var u=e;"function"==typeof e&&(u=e(c(c({},n),o))),(0,t.default)("string"==typeof u);var i=n.baseUrl;return i&&(u="/"===i[i.length-1]?"".concat(i).concat(u):"".concat(i,"/").concat(u)),(0,r.resolvePath)(u)}
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","@loaders.gl/loader-utils":"oHIH","../utils/assert":"tUCp"}],"tUfq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asyncDeepMap=a,exports.mapSubtree=c;var e=n(require("@babel/runtime/regenerator")),r=n(require("@babel/runtime/helpers/esm/asyncToGenerator")),t=n(require("@babel/runtime/helpers/esm/typeof"));function n(e){return e&&e.__esModule?e:{default:e}}var u=function(e){return e&&"object"===(0,t.default)(e)};function a(e,r){return s.apply(this,arguments)}function s(){return(s=(0,r.default)(e.default.mark(function r(t,n){var u,a=arguments;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u=a.length>2&&void 0!==a[2]?a[2]:{},e.next=3,c(t,n,u);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},r)}))).apply(this,arguments)}function c(e,r,t){return i.apply(this,arguments)}function i(){return(i=(0,r.default)(e.default.mark(function r(t,n,a){var s;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!Array.isArray(t)){e.next=4;break}return e.next=3,f(t,n,a);case 3:return e.abrupt("return",e.sent);case 4:if(!u(t)){e.next=8;break}return e.next=7,p(t,n,a);case 7:return e.abrupt("return",e.sent);case 8:return s=t,e.next=11,n(s,a);case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}},r)}))).apply(this,arguments)}function p(e,r,t){return o.apply(this,arguments)}function o(){return(o=(0,r.default)(e.default.mark(function r(t,n,u){var a,s,i,p;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(p in a=[],s={},i=function(e){var r=c(t[e],n,u).then(function(r){s[e]=r});a.push(r)},t)i(p);return e.next=6,Promise.all(a);case 6:return e.abrupt("return",s);case 7:case"end":return e.stop()}},r)}))).apply(this,arguments)}function f(e,r){return l.apply(this,arguments)}function l(){return(l=(0,r.default)(e.default.mark(function r(t,n){var u,a,s=arguments;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u=s.length>2&&void 0!==s[2]?s[2]:{},a=t.map(function(e){return c(e,n,u)}),e.next=4,Promise.all(a);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},r)}))).apply(this,arguments)}
},{"@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","@babel/runtime/helpers/esm/typeof":"zsbK"}],"qUEG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.deepLoad=u,exports.shallowLoad=s;var e=n(require("@babel/runtime/regenerator")),r=n(require("@babel/runtime/helpers/esm/asyncToGenerator")),t=require("./async-deep-map");function n(e){return e&&e.__esModule?e:{default:e}}function u(e,r,t){return a.apply(this,arguments)}function a(){return(a=(0,r.default)(e.default.mark(function r(n,u,a){return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,t.asyncDeepMap)(n,function(e){return s(e,u,a)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},r)}))).apply(this,arguments)}function s(e,r,t){return c.apply(this,arguments)}function c(){return(c=(0,r.default)(e.default.mark(function r(t,n,u){var a,s;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,u.fetch);case 2:return a=e.sent,e.next=5,a.arrayBuffer();case 5:return s=e.sent,e.next=8,n(s,u);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}},r)}))).apply(this,arguments)}
},{"@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","./async-deep-map":"tUfq"}],"qXUM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.loadImage=l,exports.getImageUrls=d,exports.getMipLevels=y;var e=o(require("@babel/runtime/helpers/esm/defineProperty")),r=o(require("@babel/runtime/regenerator")),t=o(require("@babel/runtime/helpers/esm/asyncToGenerator")),n=o(require("../utils/assert")),a=o(require("../parsers/parse-image")),u=require("../category-api/parsed-image-api"),i=require("./generate-url"),s=require("./deep-load");function o(e){return e&&e.__esModule?e:{default:e}}function c(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function p(r){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){(0,e.default)(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))})}return r}function l(e){return f.apply(this,arguments)}function f(){return(f=(0,t.default)(r.default.mark(function e(t){var n,u,i=arguments;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},e.next=3,d(t,n);case 3:return u=e.sent,e.next=6,(0,s.deepLoad)(u,a.default,n);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function d(e,r){return h.apply(this,arguments)}function h(){return(h=(0,t.default)(r.default.mark(function e(t,n){var a,u,s=arguments;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=s.length>2&&void 0!==s[2]?s[2]:{},0===(u=n&&n.image&&n.image.mipLevels||0)){e.next=8;break}return e.next=5,g(t,u,n,a);case 5:e.t0=e.sent,e.next=9;break;case 8:e.t0=(0,i.generateUrl)(t,n,a);case 9:return e.abrupt("return",e.t0);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function g(e,r,t,n){return b.apply(this,arguments)}function b(){return(b=(0,t.default)(r.default.mark(function e(t,o,c,l){var f,d,h,g,b,m,O,v;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(f=[],"auto"!==o){e.next=9;break}return d=(0,i.generateUrl)(t,c,p(p({},l),{},{lod:0})),e.next=5,(0,s.shallowLoad)(d,a.default,c);case 5:h=e.sent,g=(0,u.getImageSize)(h),b=g.width,m=g.height,o=y({width:b,height:m}),f.push(d);case 9:for((0,n.default)(o>0),O=f.length;O<o;++O)v=(0,i.generateUrl)(t,c,p(p({},l),{},{lod:O})),f.push(v);return e.abrupt("return",f);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function y(e){var r=e.width,t=e.height;return 1+Math.floor(Math.log2(Math.max(r,t)))}
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","../utils/assert":"tUCp","../parsers/parse-image":"acKO","../category-api/parsed-image-api":"fZkF","./generate-url":"kCQP","./deep-load":"qUEG"}],"Ia7O":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.loadImageArray=s,exports.getImageArrayUrls=o;var e=u(require("@babel/runtime/regenerator")),r=u(require("@babel/runtime/helpers/esm/asyncToGenerator")),t=u(require("../parsers/parse-image")),n=require("./load-image"),a=require("./deep-load");function u(e){return e&&e.__esModule?e:{default:e}}function s(e,r){return i.apply(this,arguments)}function i(){return(i=(0,r.default)(e.default.mark(function r(n,u){var s,i,l=arguments;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=l.length>2&&void 0!==l[2]?l[2]:{},e.next=3,o(n,u,s);case 3:return i=e.sent,e.next=6,(0,a.deepLoad)(i,t.default,s);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},r)}))).apply(this,arguments)}function o(e,r){return l.apply(this,arguments)}function l(){return(l=(0,r.default)(e.default.mark(function r(t,a){var u,s,i,o,l=arguments;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(u=l.length>2&&void 0!==l[2]?l[2]:{},s=[],i=0;i<t;i++)o=(0,n.getImageUrls)(a,u,{index:i}),s.push(o);return e.next=5,Promise.all(s);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},r)}))).apply(this,arguments)}
},{"@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","../parsers/parse-image":"acKO","./load-image":"qXUM","./deep-load":"qUEG"}],"uxXV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getImageCubeUrls=y,exports.loadImageCube=O;var e=o(require("@babel/runtime/regenerator")),r=o(require("@babel/runtime/helpers/esm/defineProperty")),t=o(require("@babel/runtime/helpers/esm/asyncToGenerator")),n=o(require("../parsers/parse-image")),i=require("./load-image"),a=require("./deep-load");function o(e){return e&&e.__esModule?e:{default:e}}function u(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach(function(t){(0,r.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var c=34069,p=34070,f=34071,l=34072,d=34073,b=34074,g=[{face:c,direction:"right",axis:"x",sign:"positive"},{face:p,direction:"left",axis:"x",sign:"negative"},{face:f,direction:"top",axis:"y",sign:"positive"},{face:l,direction:"bottom",axis:"y",sign:"negative"},{face:d,direction:"front",axis:"z",sign:"positive"},{face:b,direction:"back",axis:"z",sign:"negative"}];function y(e,r){return v.apply(this,arguments)}function v(){return(v=(0,t.default)(e.default.mark(function r(t,n){var a,o,u,c,p;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(p in a={},o=[],u=0,c=function(e){var r=g[u],c=(0,i.getImageUrls)(t,n,s(s({},r),{},{index:u++})).then(function(r){a[e]=r});o.push(c)},g)c(p);return e.next=7,Promise.all(o);case 7:return e.abrupt("return",a);case 8:case"end":return e.stop()}},r)}))).apply(this,arguments)}function O(e){return m.apply(this,arguments)}function m(){return(m=(0,t.default)(e.default.mark(function r(t){var i,o,u=arguments;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,y(t,i);case 3:return o=e.sent,e.next=6,(0,a.deepLoad)(o,n.default,i);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},r)}))).apply(this,arguments)}
},{"@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/defineProperty":"iDM3","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","../parsers/parse-image":"acKO","./load-image":"qXUM","./deep-load":"qUEG"}],"Rdg9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isBinaryImage=a,exports.getBinaryImageMIMEType=t,exports.getBinaryImageSize=r;var e=require("../category-api/binary-image-api");function a(a,t){var r=(0,e.getBinaryImageMetadata)(a);return t?Boolean(r&&r.mimeType===t):Boolean(r)}function t(a){var t=(0,e.getBinaryImageMetadata)(a);return t?t.mimeType:null}function r(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=(0,e.getBinaryImageMetadata)(a);if(r)return{width:r.width,height:r.height};throw t=t||"unknown",new Error("invalid image data for type: ".concat(t))}
},{"../category-api/binary-image-api":"XFGE"}],"DNDh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getSupportedImageType=m,Object.defineProperty(exports,"ImageLoader",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"HTMLImageLoader",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"ImageWriter",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"getBinaryImageMetadata",{enumerable:!0,get:function(){return t.getBinaryImageMetadata}}),Object.defineProperty(exports,"isImageTypeSupported",{enumerable:!0,get:function(){return a.isImageTypeSupported}}),Object.defineProperty(exports,"getDefaultImageType",{enumerable:!0,get:function(){return a.getDefaultImageType}}),Object.defineProperty(exports,"isImage",{enumerable:!0,get:function(){return n.isImage}}),Object.defineProperty(exports,"getImageType",{enumerable:!0,get:function(){return n.getImageType}}),Object.defineProperty(exports,"getImageSize",{enumerable:!0,get:function(){return n.getImageSize}}),Object.defineProperty(exports,"getImageData",{enumerable:!0,get:function(){return n.getImageData}}),Object.defineProperty(exports,"loadImage",{enumerable:!0,get:function(){return i.loadImage}}),Object.defineProperty(exports,"loadImageArray",{enumerable:!0,get:function(){return u.loadImageArray}}),Object.defineProperty(exports,"loadImageCube",{enumerable:!0,get:function(){return g.loadImageCube}}),Object.defineProperty(exports,"isBinaryImage",{enumerable:!0,get:function(){return o.isBinaryImage}}),Object.defineProperty(exports,"getBinaryImageMIMEType",{enumerable:!0,get:function(){return o.getBinaryImageMIMEType}}),Object.defineProperty(exports,"getBinaryImageSize",{enumerable:!0,get:function(){return o.getBinaryImageSize}});var e=p(require("./image-loader")),r=p(require("./image-writer")),t=require("./lib/category-api/binary-image-api"),a=require("./lib/category-api/image-type"),n=require("./lib/category-api/parsed-image-api"),i=require("./lib/texture-api/load-image"),u=require("./lib/texture-api/load-image-array"),g=require("./lib/texture-api/load-image-cube"),o=require("./lib/deprecated/binary-image-api-deprecated");function p(e){return e&&e.__esModule?e:{default:e}}function m(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,a.getDefaultImageType)()}
},{"./image-loader":"Aq3y","./image-writer":"iXQV","./lib/category-api/binary-image-api":"XFGE","./lib/category-api/image-type":"xUsy","./lib/category-api/parsed-image-api":"fZkF","./lib/texture-api/load-image":"qXUM","./lib/texture-api/load-image-array":"Ia7O","./lib/texture-api/load-image-cube":"uxXV","./lib/deprecated/binary-image-api-deprecated":"Rdg9"}],"kvRt":[function(require,module,exports) {
function e(e){return e&&e.__esModule?e:{default:e}}module.exports=e;
},{}],"LNzP":[function(require,module,exports) {
function o(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?module.exports=o=function(o){return typeof o}:module.exports=o=function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},o(t)}module.exports=o;
},{}],"L7UA":[function(require,module,exports) {
var e=require("@babel/runtime/helpers/typeof");function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function t(t){if(t&&t.__esModule)return t;if(null===t||"object"!==e(t)&&"function"!=typeof t)return{default:t};var n=r();if(n&&n.has(t))return n.get(t);var o={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in t)if(Object.prototype.hasOwnProperty.call(t,f)){var i=u?Object.getOwnPropertyDescriptor(t,f):null;i&&(i.get||i.set)?Object.defineProperty(o,f,i):o[f]=t[f]}return o.default=t,n&&n.set(t,o),o}module.exports=t;
},{"@babel/runtime/helpers/typeof":"LNzP"}],"hdG6":[function(require,module,exports) {
var global = arguments[3];
var process = require("process");
var e=arguments[3],o=require("process"),r=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.console=exports.process=exports.document=exports.global=exports.window=exports.self=void 0;var s=r(require("@babel/runtime/helpers/typeof")),t={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==e&&e,document:"undefined"!=typeof document&&document,process:"object"===(void 0===o?"undefined":(0,s.default)(o))&&o},l=t.self||t.window||t.global;exports.self=l;var n=t.window||t.self||t.global;exports.window=n;var d=t.global||t.self||t.window;exports.global=d;var p=t.document||{};exports.document=p;var i=t.process||{};exports.process=i;var u=console;exports.console=u;
},{"@babel/runtime/helpers/interopRequireDefault":"kvRt","@babel/runtime/helpers/typeof":"LNzP","process":"kpD3"}],"ym7l":[function(require,module,exports) {
var process = require("process");
var e=require("process"),r=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var t=r(require("@babel/runtime/helpers/typeof"));function n(r){if("undefined"!=typeof window&&"object"===(0,t.default)(window.process)&&"renderer"===window.process.type)return!0;if(void 0!==e&&"object"===(0,t.default)(e.versions)&&Boolean(e.versions.electron))return!0;var n="object"===("undefined"==typeof navigator?"undefined":(0,t.default)(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent,o=r||n;return!!(o&&o.indexOf("Electron")>=0)}
},{"@babel/runtime/helpers/interopRequireDefault":"kvRt","@babel/runtime/helpers/typeof":"LNzP","process":"kpD3"}],"rXmJ":[function(require,module,exports) {
var process = require("process");
var e=require("process"),r=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i,exports.isBrowserMainThread=n;var t=r(require("@babel/runtime/helpers/typeof")),u=r(require("./is-electron"));function i(){return!("object"===(void 0===e?"undefined":(0,t.default)(e))&&"[object process]"===String(e)&&!1)||(0,u.default)()}function n(){return i()&&"undefined"!=typeof document}
},{"@babel/runtime/helpers/interopRequireDefault":"kvRt","@babel/runtime/helpers/typeof":"LNzP","./is-electron":"ym7l","process":"kpD3"}],"Vu5l":[function(require,module,exports) {
"use strict";var e=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.isMobile=o,exports.default=t;var r=require("./globals"),i=e(require("./is-browser")),n=e(require("./is-electron"));function o(){return void 0!==r.window.orientation}function t(e){if(!e&&!(0,i.default)())return"Node";if((0,n.default)(e))return"Electron";var o="undefined"!=typeof navigator?navigator:{},t=e||o.userAgent||"";if(t.indexOf("Edge")>-1)return"Edge";var u=-1!==t.indexOf("MSIE "),a=-1!==t.indexOf("Trident/");return u||a?"IE":r.window.chrome?"Chrome":r.window.safari?"Safari":r.window.mozInnerScreenX?"Firefox":"Unknown"}
},{"@babel/runtime/helpers/interopRequireDefault":"kvRt","./globals":"hdG6","./is-browser":"rXmJ","./is-electron":"ym7l"}],"f0YS":[function(require,module,exports) {
"use strict";var e=require("@babel/runtime/helpers/interopRequireDefault"),r=require("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"self",{enumerable:!0,get:function(){return t.self}}),Object.defineProperty(exports,"window",{enumerable:!0,get:function(){return t.window}}),Object.defineProperty(exports,"global",{enumerable:!0,get:function(){return t.global}}),Object.defineProperty(exports,"document",{enumerable:!0,get:function(){return t.document}}),Object.defineProperty(exports,"process",{enumerable:!0,get:function(){return t.process}}),Object.defineProperty(exports,"console",{enumerable:!0,get:function(){return t.console}}),Object.defineProperty(exports,"isBrowser",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"isBrowserMainThread",{enumerable:!0,get:function(){return n.isBrowserMainThread}}),Object.defineProperty(exports,"getBrowser",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"isMobile",{enumerable:!0,get:function(){return o.isMobile}}),Object.defineProperty(exports,"isElectron",{enumerable:!0,get:function(){return u.default}});var t=require("./globals"),n=r(require("./is-browser")),o=r(require("./get-browser")),u=e(require("./is-electron"));
},{"@babel/runtime/helpers/interopRequireDefault":"kvRt","@babel/runtime/helpers/interopRequireWildcard":"L7UA","./globals":"hdG6","./is-browser":"rXmJ","./get-browser":"Vu5l","./is-electron":"ym7l"}],"d3vq":[function(require,module,exports) {
module.exports=require("./dist/es5/env");
},{"./dist/es5/env":"f0YS"}],"jqgb":[function(require,module,exports) {
var process = require("process");
var e=require("process");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var r=n(require("@babel/runtime/helpers/esm/typeof"));function n(e){return e&&e.__esModule?e:{default:e}}function t(n){if("undefined"!=typeof window&&"object"===(0,r.default)(window.process)&&"renderer"===window.process.type)return!0;if(void 0!==e&&"object"===(0,r.default)(e.versions)&&Boolean(e.versions.electron))return!0;var t="object"===("undefined"==typeof navigator?"undefined":(0,r.default)(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent,o=n||t;return!!(o&&o.indexOf("Electron")>=0)}
},{"@babel/runtime/helpers/esm/typeof":"zsbK","process":"kpD3"}],"KFSy":[function(require,module,exports) {
var process = require("process");
var e=require("process");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n,exports.isBrowserMainThread=o;var r=u(require("@babel/runtime/helpers/esm/typeof")),t=u(require("./is-electron"));function u(e){return e&&e.__esModule?e:{default:e}}function n(){return!("object"===(void 0===e?"undefined":(0,r.default)(e))&&"[object process]"===String(e)&&!1)||(0,t.default)()}function o(){return n()&&"undefined"!=typeof document}
},{"@babel/runtime/helpers/esm/typeof":"zsbK","./is-electron":"jqgb","process":"kpD3"}],"N1St":[function(require,module,exports) {
var global = arguments[3];
var process = require("process");
var e=arguments[3],o=require("process");Object.defineProperty(exports,"__esModule",{value:!0}),exports.console=exports.process=exports.document=exports.global=exports.window=exports.self=void 0;var s=r(require("@babel/runtime/helpers/esm/typeof"));function r(e){return e&&e.__esModule?e:{default:e}}var t={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==e&&e,document:"undefined"!=typeof document&&document,process:"object"===(void 0===o?"undefined":(0,s.default)(o))&&o},n=t.self||t.window||t.global;exports.self=n;var d=t.window||t.self||t.global;exports.window=d;var l=t.global||t.self||t.window;exports.global=l;var p=t.document||{};exports.document=p;var u=t.process||{};exports.process=u;var f=console;exports.console=f;
},{"@babel/runtime/helpers/esm/typeof":"zsbK","process":"kpD3"}],"bKlm":[function(require,module,exports) {
var global = arguments[3];
var process = require("process");
var e=arguments[3],r=require("process");Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"self",{enumerable:!0,get:function(){return n.self}}),Object.defineProperty(exports,"window",{enumerable:!0,get:function(){return n.window}}),Object.defineProperty(exports,"global",{enumerable:!0,get:function(){return n.global}}),Object.defineProperty(exports,"document",{enumerable:!0,get:function(){return n.document}}),Object.defineProperty(exports,"process",{enumerable:!0,get:function(){return n.process}}),Object.defineProperty(exports,"console",{enumerable:!0,get:function(){return n.console}}),exports.isBrowser=exports.VERSION=void 0;var t=o(require("../env/is-browser")),n=require("../env/globals");function o(e){return e&&e.__esModule?e:{default:e}}var u="undefined"!=typeof __VERSION__?__VERSION__:"untranspiled source";exports.VERSION=u;var s=(0,t.default)();exports.isBrowser=s;
},{"../env/is-browser":"KFSy","../env/globals":"N1St","process":"kpD3"}],"hsjt":[function(require,module,exports) {

"use strict";var l=require("./utils/globals");l.global.probe={};
},{"./utils/globals":"bKlm"}],"wGF4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("@babel/runtime/helpers/esm/classCallCheck")),e=i(require("@babel/runtime/helpers/esm/createClass"));function i(t){return t&&t.__esModule?t:{default:t}}function s(t){try{var e=window[t],i="__storage_test__";return e.setItem(i,i),e.removeItem(i),e}catch(s){return null}}var r=function(){function i(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";(0,t.default)(this,i),this.storage=s(n),this.id=e,this.config={},Object.assign(this.config,r),this._loadConfiguration()}return(0,e.default)(i,[{key:"getConfiguration",value:function(){return this.config}},{key:"setConfiguration",value:function(t){return this.config={},this.updateConfiguration(t)}},{key:"updateConfiguration",value:function(t){if(Object.assign(this.config,t),this.storage){var e=JSON.stringify(this.config);this.storage.setItem(this.id,e)}return this}},{key:"_loadConfiguration",value:function(){var t={};if(this.storage){var e=this.storage.getItem(this.id);t=e?JSON.parse(e):{}}return Object.assign(this.config,t),this}}]),i}();exports.default=r;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph"}],"jG5g":[function(require,module,exports) {
"use strict";function t(t){return t<10?"".concat(t.toFixed(2),"ms"):t<100?"".concat(t.toFixed(1),"ms"):t<1e3?"".concat(t.toFixed(0),"ms"):"".concat((t/1e3).toFixed(2),"s")}function e(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,r=Math.max(e-t.length,0);return"".concat(" ".repeat(r)).concat(t)}function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,r=Math.max(e-t.length,0);return"".concat(t).concat(" ".repeat(r))}function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.isInteger,n=void 0!==r&&r;if(Array.isArray(t)||ArrayBuffer.isView(t))return o(t,e);if(!Number.isFinite(t))return String(t);if(Math.abs(t)<1e-16)return n?"0":"0.";if(n)return t.toFixed(0);if(Math.abs(t)>100&&Math.abs(t)<1e4)return t.toFixed(0);var a=t.toPrecision(2);return a.indexOf(".0")===a.length-2?a.slice(0,-1):a}function o(t,e){for(var r=e.maxElts,o=void 0===r?16:r,a=e.size,c=void 0===a?1:a,i="[",s=0;s<t.length&&s<o;++s)s>0&&(i+=",".concat(s%c==0?" ":"")),i+=n(t[s],e);var u=t.length>o?"...":"]";return"".concat(i).concat(u)}function a(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600,o=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>n&&(r=Math.min(r,n/t.width));var a=t.width*r,c=t.height*r,i=["font-size:1px;","padding:".concat(Math.floor(c/2),"px ").concat(Math.floor(a/2),"px;"),"line-height:".concat(c,"px;"),"background:url(".concat(o,");"),"background-size:".concat(a,"px ").concat(c,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),i]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.formatTime=t,exports.leftPad=e,exports.rightPad=r,exports.formatValue=n,exports.formatImage=a;
},{}],"FJWv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.addColor=r,exports.COLOR=void 0;var e=require("./globals"),t={BLACK:30,RED:31,GREEN:32,YELLOW:33,BLUE:34,MAGENTA:35,CYAN:36,WHITE:37,BRIGHT_BLACK:90,BRIGHT_RED:91,BRIGHT_GREEN:92,BRIGHT_YELLOW:93,BRIGHT_BLUE:94,BRIGHT_MAGENTA:95,BRIGHT_CYAN:96,BRIGHT_WHITE:97};function o(e){return"string"==typeof e?t[e.toUpperCase()]||t.WHITE:e}function r(t,r,E){return e.isBrowser||"string"!=typeof t||(r&&(r=o(r),t="[".concat(r,"m").concat(t,"[39m")),E&&(r=o(E),t="[".concat(E+10,"m").concat(t,"[49m"))),t}exports.COLOR=t;
},{"./globals":"bKlm"}],"ANz0":[function(require,module,exports) {
"use strict";function t(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=n(t))){var r=0,e=function(){};return{s:e,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i,u=!0,a=!1;return{s:function(){o=t[Symbol.iterator]()},n:function(){var t=o.next();return u=t.done,t},e:function(t){a=!0,i=t},f:function(){try{u||null==o.return||o.return()}finally{if(a)throw i}}}}function n(t,n){if(t){if("string"==typeof t)return r(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(e):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?r(t,n):void 0}}function r(t,n){(null==n||n>t.length)&&(n=t.length);for(var r=0,e=new Array(n);r<n;r++)e[r]=t[r];return e}function e(n){var r,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"],o=Object.getPrototypeOf(n),i=t(Object.getOwnPropertyNames(o));try{var u=function(){var t=r.value;"function"==typeof n[t]&&(e.find(function(n){return t===n})||(n[t]=n[t].bind(n)))};for(i.s();!(r=i.n()).done;)u()}catch(a){i.e(a)}finally{i.f()}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.autobind=e;
},{}],"zNKz":[function(require,module,exports) {
"use strict";function e(e,r){if(!e)throw new Error(r||"Assertion failed")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"dous":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=require("./globals");function r(){var r;if(e.isBrowser&&e.window.performance)r=e.window.performance.now();else if(e.process.hrtime){var o=e.process.hrtime();r=1e3*o[0]+o[1]/1e6}else r=Date.now();return r}
},{"./globals":"bKlm"}],"oukZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.normalizeArguments=k,exports.default=void 0;var e=f(require("@babel/runtime/helpers/esm/typeof")),t=f(require("@babel/runtime/helpers/esm/toConsumableArray")),o=f(require("@babel/runtime/helpers/esm/defineProperty")),n=f(require("@babel/runtime/helpers/esm/classCallCheck")),r=f(require("@babel/runtime/helpers/esm/createClass")),i=require("../utils/globals"),a=f(require("../utils/local-storage")),s=require("../utils/formatters"),u=require("../utils/color"),l=require("../utils/autobind"),c=f(require("../utils/assert")),g=f(require("../utils/hi-res-timestamp"));function f(e){return e&&e.__esModule?e:{default:e}}var d={debug:i.isBrowser&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},v={enabled:!0,level:0};function h(){}var m={},p={once:!0};function y(e){for(var t in e)for(var o in e[t])return o||"untitled";return"empty"}var b=function(){function e(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).id;(0,n.default)(this,e),this.id=t,this.VERSION=i.VERSION,this._startTs=(0,g.default)(),this._deltaTs=(0,g.default)(),this.LOG_THROTTLE_TIMEOUT=0,this._storage=new a.default("__probe-".concat(this.id,"__"),v),this.userData={},this.timeStamp("".concat(this.id," started")),(0,l.autobind)(this),Object.seal(this)}return(0,r.default)(e,[{key:"isEnabled",value:function(){return this._storage.config.enabled}},{key:"getLevel",value:function(){return this._storage.config.level}},{key:"getTotal",value:function(){return Number(((0,g.default)()-this._startTs).toPrecision(10))}},{key:"getDelta",value:function(){return Number(((0,g.default)()-this._deltaTs).toPrecision(10))}},{key:"getPriority",value:function(){return this.level}},{key:"enable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._storage.updateConfiguration({enabled:e}),this}},{key:"setLevel",value:function(e){return this._storage.updateConfiguration({level:e}),this}},{key:"assert",value:function(e,t){(0,c.default)(e,t)}},{key:"warn",value:function(e){return this._getLogFunction(0,e,d.warn,arguments,p)}},{key:"error",value:function(e){return this._getLogFunction(0,e,d.error,arguments)}},{key:"deprecated",value:function(e,t){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(t,"` instead"))}},{key:"removed",value:function(e,t){return this.error("`".concat(e,"` has been removed. Use `").concat(t,"` instead"))}},{key:"probe",value:function(e,t){return this._getLogFunction(e,t,d.log,arguments,{time:!0,once:!0})}},{key:"log",value:function(e,t){return this._getLogFunction(e,t,d.debug,arguments)}},{key:"info",value:function(e,t){return this._getLogFunction(e,t,console.info,arguments)}},{key:"once",value:function(e,t){return this._getLogFunction(e,t,d.debug||d.info,arguments,p)}},{key:"table",value:function(e,t,o){return t?this._getLogFunction(e,t,console.table||h,o&&[o],{tag:y(t)}):h}},{key:"image",value:function(e){var t=e.logLevel,o=e.priority,n=e.image,r=e.message,a=void 0===r?"":r,s=e.scale,u=void 0===s?1:s;return this._shouldLog(t||o)?i.isBrowser?E({image:n,message:a,scale:u}):w({image:n,message:a,scale:u}):h}},{key:"settings",value:function(){console.table?console.table(this._storage.config):console.log(this._storage.config)}},{key:"get",value:function(e){return this._storage.config[e]}},{key:"set",value:function(e,t){this._storage.updateConfiguration((0,o.default)({},e,t))}},{key:"time",value:function(e,t){return this._getLogFunction(e,t,console.time?console.time:console.info)}},{key:"timeEnd",value:function(e,t){return this._getLogFunction(e,t,console.timeEnd?console.timeEnd:console.info)}},{key:"timeStamp",value:function(e,t){return this._getLogFunction(e,t,console.timeStamp||h)}},{key:"group",value:function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1},n=(o=k({logLevel:e,message:t,opts:o})).collapsed;return o.method=(n?console.groupCollapsed:console.group)||console.info,this._getLogFunction(o)}},{key:"groupCollapsed",value:function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.group(e,t,Object.assign({},o,{collapsed:!0}))}},{key:"groupEnd",value:function(e){return this._getLogFunction(e,"",console.groupEnd||h)}},{key:"withGroup",value:function(e,t,o){this.group(e,t)();try{o()}finally{this.groupEnd(e)()}}},{key:"trace",value:function(){console.trace&&console.trace()}},{key:"_shouldLog",value:function(e){return this.isEnabled()&&this.getLevel()>=_(e)}},{key:"_getLogFunction",value:function(e,o,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4?arguments[4]:void 0;if(this._shouldLog(e)){var a;i=k({logLevel:e,message:o,args:r,opts:i}),n=n||i.method,(0,c.default)(n),i.total=this.getTotal(),i.delta=this.getDelta(),this._deltaTs=(0,g.default)();var s=i.tag||i.message;if(i.once){if(m[s])return h;m[s]=(0,g.default)()}return o=L(this.id,i.message,i),(a=n).bind.apply(a,[console,o].concat((0,t.default)(i.args)))}return h}},{key:"level",set:function(e){this.setLevel(e)},get:function(){return this.getLevel()}},{key:"priority",set:function(e){this.level=e},get:function(){return this.level}}]),e}();function _(t){if(!t)return 0;var o;switch((0,e.default)(t)){case"number":o=t;break;case"object":o=t.logLevel||t.priority||0;break;default:return 0}return(0,c.default)(Number.isFinite(o)&&o>=0),o}function k(t){var o=t.logLevel,n=t.message;t.logLevel=_(o);for(var r=t.args?Array.from(t.args):[];r.length&&r.shift()!==n;);switch(t.args=r,(0,e.default)(o)){case"string":case"function":void 0!==n&&r.unshift(n),t.message=o;break;case"object":Object.assign(t,o)}"function"==typeof t.message&&(t.message=t.message());var i=(0,e.default)(t.message);return(0,c.default)("string"===i||"object"===i),Object.assign(t,t.opts)}function L(e,t,o){if("string"==typeof t){var n=o.time?(0,s.leftPad)((0,s.formatTime)(o.total)):"";t=o.time?"".concat(e,": ").concat(n,"  ").concat(t):"".concat(e,": ").concat(t),t=(0,u.addColor)(t,o.color,o.background)}return t}function w(e){var t=e.image,o=(e.message,e.scale),n=void 0===o?1:o,r=null;try{r=module.require("asciify-image")}catch(i){}return r?function(){return r(t,{fit:"box",width:"".concat(Math.round(80*n),"%")}).then(function(e){return console.log(e)})}:h}function E(e){var o=e.image,n=e.message,r=void 0===n?"":n,i=e.scale,a=void 0===i?1:i;if("string"==typeof o){var u=new Image;return u.onload=function(){var e,o=(0,s.formatImage)(u,r,a);(e=console).log.apply(e,(0,t.default)(o))},u.src=o,h}var l,c=o.nodeName||"";if("img"===c.toLowerCase())return(l=console).log.apply(l,(0,t.default)((0,s.formatImage)(o,r,a))),h;if("canvas"===c.toLowerCase()){var g=new Image;return g.onload=function(){var e;return(e=console).log.apply(e,(0,t.default)((0,s.formatImage)(g,r,a)))},g.src=o.toDataURL(),h}return h}exports.default=b,b.VERSION=i.VERSION;
},{"@babel/runtime/helpers/esm/typeof":"zsbK","@babel/runtime/helpers/esm/toConsumableArray":"AdMH","@babel/runtime/helpers/esm/defineProperty":"iDM3","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","../utils/globals":"bKlm","../utils/local-storage":"wGF4","../utils/formatters":"jG5g","../utils/color":"FJWv","../utils/autobind":"ANz0","../utils/assert":"zNKz","../utils/hi-res-timestamp":"dous"}],"WSiT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isMobile=o,exports.default=t;var e=require("./globals"),r=i(require("./is-browser")),n=i(require("./is-electron"));function i(e){return e&&e.__esModule?e:{default:e}}function o(){return void 0!==e.window.orientation}function t(i){if(!i&&!(0,r.default)())return"Node";if((0,n.default)(i))return"Electron";var o="undefined"!=typeof navigator?navigator:{},t=i||o.userAgent||"";if(t.indexOf("Edge")>-1)return"Edge";var u=-1!==t.indexOf("MSIE "),d=-1!==t.indexOf("Trident/");return u||d?"IE":e.window.chrome?"Chrome":e.window.safari?"Safari":e.window.mozInnerScreenX?"Firefox":"Unknown"}
},{"./globals":"N1St","./is-browser":"KFSy","./is-electron":"jqgb"}],"TYNK":[function(require,module,exports) {
var global = arguments[3];
var process = require("process");
var e=arguments[3],r=require("process");Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Log",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"VERSION",{enumerable:!0,get:function(){return n.VERSION}}),Object.defineProperty(exports,"self",{enumerable:!0,get:function(){return o.self}}),Object.defineProperty(exports,"window",{enumerable:!0,get:function(){return o.window}}),Object.defineProperty(exports,"global",{enumerable:!0,get:function(){return o.global}}),Object.defineProperty(exports,"document",{enumerable:!0,get:function(){return o.document}}),Object.defineProperty(exports,"process",{enumerable:!0,get:function(){return o.process}}),Object.defineProperty(exports,"console",{enumerable:!0,get:function(){return o.console}}),Object.defineProperty(exports,"isBrowser",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"isBrowserMainThread",{enumerable:!0,get:function(){return u.isBrowserMainThread}}),Object.defineProperty(exports,"getBrowser",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"isMobile",{enumerable:!0,get:function(){return i.isMobile}}),Object.defineProperty(exports,"isElectron",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"assert",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"COLOR",{enumerable:!0,get:function(){return s.COLOR}}),Object.defineProperty(exports,"addColor",{enumerable:!0,get:function(){return s.addColor}}),Object.defineProperty(exports,"leftPad",{enumerable:!0,get:function(){return f.leftPad}}),Object.defineProperty(exports,"rightPad",{enumerable:!0,get:function(){return f.rightPad}}),Object.defineProperty(exports,"autobind",{enumerable:!0,get:function(){return c.autobind}}),Object.defineProperty(exports,"LocalStorage",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(exports,"getHiResTimestamp",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(exports,"Stats",{enumerable:!0,get:function(){return d.Stats}}),Object.defineProperty(exports,"Stat",{enumerable:!0,get:function(){return d.Stat}}),exports.default=void 0,require("./init");var t=y(require("./lib/log")),n=require("./utils/globals"),o=require("./env/globals"),u=O(require("./env/is-browser")),i=O(require("./env/get-browser")),a=y(require("./env/is-electron")),l=y(require("./utils/assert")),s=require("./utils/color"),f=require("./utils/formatters"),c=require("./utils/autobind"),p=y(require("./utils/local-storage")),b=y(require("./utils/hi-res-timestamp")),d=require("@probe.gl/stats");function g(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return g=function(){return e},e}function O(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=g();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var u=n?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(t,o,u):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}function y(e){return e&&e.__esModule?e:{default:e}}var P=new t.default({id:"probe.gl"});exports.default=P;
},{"./init":"hsjt","./lib/log":"oukZ","./utils/globals":"bKlm","./env/globals":"N1St","./env/is-browser":"KFSy","./env/get-browser":"WSiT","./env/is-electron":"jqgb","./utils/assert":"zNKz","./utils/color":"FJWv","./utils/formatters":"jG5g","./utils/autobind":"ANz0","./utils/local-storage":"wGF4","./utils/hi-res-timestamp":"dous","@probe.gl/stats":"SZdt","process":"kpD3"}],"GVus":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("probe.gl"),r=new e.Log({id:"deck"});exports.default=r;
},{"probe.gl":"TYNK"}],"Bw3o":[function(require,module,exports) {
"use strict";function t(t,a){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=e(t))||a&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,i=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return i=t.done,t},e:function(t){u=!0,c=t},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw c}}}}function e(t,e){if(t){if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getLoggers=void 0;var n={attributeUpdateMessages:[]},r=1,o=2,c=3,i=4,u=2,l=function(e){return{"layer.changeFlag":function(t,a,n){e.log(c,"".concat(t.id," ").concat(a,": "),n[a])()},"layer.initialize":function(t){e.log(r,"Initializing ".concat(t))()},"layer.update":function(t,a){if(a){var n=t.getChangeFlags();e.log(o,"Updating ".concat(t," because: ").concat(Object.keys(n).filter(function(t){return n[t]}).join(", ")))()}else e.log(i,"".concat(t," does not need update"))()},"layer.matched":function(t,a){a&&e.log(i,"Matched ".concat(t,", state transfered"))()},"layer.finalize":function(t){e.log(r,"Finalizing ".concat(t))()},"compositeLayer.renderLayers":function(t,a,n){a?e.log(o,"Composite layer rendered new subLayers ".concat(t),n)():e.log(i,"Composite layer reused subLayers ".concat(t),n)()},"layerManager.setLayers":function(t,a,n){a&&e.log(o,"Updating ".concat(n.length," deck layers"))()},"layerManager.activateViewport":function(t,a){e.log(c,"Viewport changed",a)()},"attributeManager.invalidate":function(t,a,n){e.log(r,n?"invalidated attributes ".concat(n," (").concat(a,") for ").concat(t.id):"invalidated all attributes for ".concat(t.id))()},"attributeManager.updateStart":function(t){n.attributeUpdateMessages.length=0,n.attributeManagerUpdateStart=Date.now()},"attributeManager.updateEnd":function(a,r){var i=Math.round(Date.now()-n.attributeManagerUpdateStart);e.groupCollapsed(o,"Updated attributes for ".concat(r," instances in ").concat(a.id," in ").concat(i,"ms"))();var u,l=t(n.attributeUpdateMessages);try{for(l.s();!(u=l.n()).done;){var s=u.value;e.log(c,s)()}}catch(d){l.e(d)}finally{l.f()}e.groupEnd(o)()},"attribute.updateStart":function(t){n.attributeUpdateStart=Date.now()},"attribute.allocate":function(t,e){var a="".concat(t.id," allocated ").concat(e);n.attributeUpdateMessages.push(a)},"attribute.updateEnd":function(t,e){var a=Math.round(Date.now()-n.attributeUpdateStart),r="".concat(t.id," updated ").concat(e," in ").concat(a,"ms");n.attributeUpdateMessages.push(r)},"deckRenderer.renderLayers":function(a,n,r){var o,c=r.pass,i=r.redrawReason,l=r.stats,s=t(n);try{for(s.s();!(o=s.n()).done;){var d=o.value,f=d.totalCount,g=d.visibleCount,p=d.compositeCount,y=d.pickableCount,b=f-p-g;e.log(u,"RENDER #".concat(a.renderCount,"   ").concat(g," (of ").concat(f," layers) to ").concat(c," because ").concat(i,"   (").concat(b," hidden, ").concat(p," composite ").concat(y," pickable)"))(),l&&l.get("Redraw Layers").add(g)}}catch(v){s.e(v)}finally{s.f()}}}};exports.getLoggers=l;
},{}],"EEoF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.register=u,exports.default=o;var e=t(require("../utils/log")),r=require("./loggers");function t(e){return e&&e.__esModule?e:{default:e}}var l={};function u(e){l=e}function o(r){var t;e.default.level>0&&l[r]&&(t=l[r]).call.apply(t,arguments)}
},{"../utils/log":"GVus","./loggers":"Bw3o"}],"DDDc":[function(require,module,exports) {
"use strict";function e(e){var t=e[0],o=e[e.length-1];return"{"===t&&"}"===o||"["===t&&"]"===o}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t={name:"JSON",extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:e,parseTextSync:JSON.parse};exports.default=t;
},{}],"N6pv":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("@loaders.gl/core"),r=require("@loaders.gl/images"),l=require("probe.gl/env"),o=i(require("../utils/log")),t=require("../debug"),a=i(require("../utils/json-loader"));function i(e){return e&&e.__esModule?e:{default:e}}var s="8.3.11",d=l.global.deck&&l.global.deck.VERSION;if(d&&d!==s)throw new Error("deck.gl - multiple versions detected: ".concat(d," vs ").concat(s));d||(l.global.deck=Object.assign(l.global.deck||{},{VERSION:s,version:s,log:o.default,_registerLoggers:t.register}),(0,e.registerLoaders)([a.default,[r.ImageLoader,{imagebitmap:{premultiplyAlpha:"none"}}]]));var u=l.global.deck;exports.default=u;
},{"@loaders.gl/core":"ikKD","@loaders.gl/images":"DNDh","probe.gl/env":"d3vq","../utils/log":"GVus","../debug":"EEoF","../utils/json-loader":"DDDc"}],"RzJJ":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.polyfillVertexArrayObject=b;var e=require("probe.gl/env"),r={};function t(r){e.global.console&&e.global.console.error&&e.global.console.error(r)}function a(r){e.global.console&&e.global.console.log&&e.global.console.log(r)}function i(e,a){r[e]=!0,void 0!==a&&t(a)}function n(e){var t=e.getError;e.getError=function(){var a;do{0!==(a=t.apply(e))&&(r[a]=!0)}while(0!==a);for(a in r)if(r[a])return delete r[a],parseInt(a,10);return 0}}var s=function e(r){var t=r.gl;this.ext=r,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(r.maxVertexAttribs);for(var a=0;a<this.attribs.length;a++){var i=new e.VertexAttrib(t);this.attribs[a]=i}this.maxAttrib=0};s.VertexAttrib=function(e){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()},s.VertexAttrib.prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};var c=function(e){var r=this;this.gl=e,n(e);var t=this.original={getParameter:e.getParameter,enableVertexAttribArray:e.enableVertexAttribArray,disableVertexAttribArray:e.disableVertexAttribArray,bindBuffer:e.bindBuffer,getVertexAttrib:e.getVertexAttrib,vertexAttribPointer:e.vertexAttribPointer};e.getParameter=function(e){return e===r.VERTEX_ARRAY_BINDING_OES?r.currentVertexArrayObject===r.defaultVertexArrayObject?null:r.currentVertexArrayObject:t.getParameter.apply(this,arguments)},e.enableVertexAttribArray=function(e){var a=r.currentVertexArrayObject;return a.maxAttrib=Math.max(a.maxAttrib,e),a.attribs[e].enabled=!0,t.enableVertexAttribArray.apply(this,arguments)},e.disableVertexAttribArray=function(e){var a=r.currentVertexArrayObject;return a.maxAttrib=Math.max(a.maxAttrib,e),a.attribs[e].enabled=!1,t.disableVertexAttribArray.apply(this,arguments)},e.bindBuffer=function(e,a){switch(e){case 34962:r.currentArrayBuffer=a;break;case 34963:r.currentVertexArrayObject.elementArrayBuffer=a}return t.bindBuffer.apply(this,arguments)},e.getVertexAttrib=function(e,a){var i=r.currentVertexArrayObject.attribs[e];switch(a){case 34975:return i.buffer;case 34338:return i.enabled;case 34339:return i.size;case 34340:return i.stride;case 34341:return i.type;case 34922:return i.normalized;default:return t.getVertexAttrib.apply(this,arguments)}},e.vertexAttribPointer=function(e,a,i,n,s,c){var b=r.currentVertexArrayObject;b.maxAttrib=Math.max(b.maxAttrib,e);var l=b.attribs[e];return l.buffer=r.currentArrayBuffer,l.size=a,l.type=i,l.normalized=n,l.stride=s,l.offset=c,l.recache(),t.vertexAttribPointer.apply(this,arguments)},e.instrumentExtension&&e.instrumentExtension(this,"OES_vertex_array_object"),e.canvas&&e.canvas.addEventListener("webglcontextrestored",function(){a("OESVertexArrayObject emulation library context restored"),r.reset_()},!0),this.reset_()};function b(e){if("function"!=typeof e.createVertexArray){var r=e.getSupportedExtensions;e.getSupportedExtensions=function(){var e=r.call(this)||[];return e.indexOf("OES_vertex_array_object")<0&&e.push("OES_vertex_array_object"),e};var t=e.getExtension;e.getExtension=function(r){var a=t.call(this,r);return a||("OES_vertex_array_object"!==r?null:(e.__OESVertexArrayObject||(this.__OESVertexArrayObject=new c(this)),this.__OESVertexArrayObject))}}}c.prototype.VERTEX_ARRAY_BINDING_OES=34229,c.prototype.reset_=function(){if(void 0!==this.vertexArrayObjects)for(var e=0;e<this.vertexArrayObjects.length;++e)this.vertexArrayObjects.isAlive=!1;var r=this.gl;this.maxVertexAttribs=r.getParameter(34921),this.defaultVertexArrayObject=new s(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)},c.prototype.createVertexArrayOES=function(){var e=new s(this);return this.vertexArrayObjects.push(e),e},c.prototype.deleteVertexArrayOES=function(e){e.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(e),1),this.currentVertexArrayObject===e&&this.bindVertexArrayOES(null)},c.prototype.isVertexArrayOES=function(e){return!!(e&&e instanceof s&&e.hasBeenBound&&e.ext===this)},c.prototype.bindVertexArrayOES=function(e){var r=this.gl;if(!e||e.isAlive){var t=this.original,a=this.currentVertexArrayObject;this.currentVertexArrayObject=e||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;var n=this.currentVertexArrayObject;if(a!==n){a&&n.elementArrayBuffer===a.elementArrayBuffer||t.bindBuffer.call(r,34963,n.elementArrayBuffer);for(var s=this.currentArrayBuffer,c=Math.max(a?a.maxAttrib:0,n.maxAttrib),b=0;b<=c;b++){var l=n.attribs[b],o=a?a.attribs[b]:null;if(a&&l.enabled===o.enabled||(l.enabled?t.enableVertexAttribArray.call(r,b):t.disableVertexAttribArray.call(r,b)),l.enabled){var u=!1;a&&l.buffer===o.buffer||(s!==l.buffer&&(t.bindBuffer.call(r,34962,l.buffer),s=l.buffer),u=!0),(u||l.cached!==o.cached)&&t.vertexAttribPointer.call(r,b,l.size,l.type,l.normalized,l.stride,l.offset)}}this.currentArrayBuffer!==s&&t.bindBuffer.call(r,34962,this.currentArrayBuffer)}}else i(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject")};
},{"probe.gl/env":"d3vq"}],"sNqS":[function(require,module,exports) {
"use strict";function r(r,e){if(!r)throw new Error(e||"luma.gl: assertion failed.")}function e(r){for(var e in r)return!1;return!0}function t(r,e){if(r===e)return!0;var t=Array.isArray(r)||ArrayBuffer.isView(r),i=Array.isArray(e)||ArrayBuffer.isView(e);if(t&&i&&r.length===e.length){for(var n=0;n<r.length;++n)if(r[n]!==e[n])return!1;return!0}return!1}Object.defineProperty(exports,"__esModule",{value:!0}),exports.assert=r,exports.isObjectEmpty=e,exports.deepArrayEqual=t;
},{}],"LoQn":[function(require,module,exports) {
"use strict";function e(e){if(e.canvas&&e.luma){var t=e.luma.canvasSizeInfo.clientWidth;return t?e.drawingBufferWidth/t:1}return 1}function t(t,i){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return n(i,e(t),t.drawingBufferWidth,t.drawingBufferHeight,r)}function i(e){var t="undefined"==typeof window?1:window.devicePixelRatio||1;return Number.isFinite(e)?e<=0?1:e:e?t:1}function n(e,t,i,n,u){var o,d=r(e[0],t,i),c=a(e[1],t,n,u),f=r(e[0]+1,t,i),h=f===i-1?f:f-1;return f=a(e[1]+1,t,n,u),u?(o=c,c=f=0===f?f:f+1):o=f===n-1?f:f-1,{x:d,y:c,width:Math.max(h-d+1,1),height:Math.max(o-c+1,1)}}function r(e,t,i){return Math.min(Math.round(e*t),i-1)}function a(e,t,i,n){return n?Math.max(0,i-1-Math.round(e*t)):Math.min(Math.round(e*t),i-1)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.cssToDeviceRatio=e,exports.cssToDevicePixels=t,exports.getDevicePixelRatio=i;
},{}],"E5mh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isWebGL=o,exports.isWebGL2=n,exports.assertWebGLContext=i,exports.assertWebGL2Context=x,exports.ERR_WEBGL2=exports.ERR_WEBGL=exports.ERR_CONTEXT=void 0;var e=require("./utils"),t="Invalid WebGLRenderingContext";exports.ERR_CONTEXT=t;var r=t;exports.ERR_WEBGL=r;var s="Requires WebGL2";function o(e){return Boolean(e&&Number.isFinite(e._version))}function n(e){return Boolean(e&&2===e._version)}function i(r){(0,e.assert)(o(r),t)}function x(t){(0,e.assert)(n(t),s)}exports.ERR_WEBGL2=s;
},{"./utils":"sNqS"}],"Oonc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"assert",{enumerable:!0,get:function(){return r.assert}}),Object.defineProperty(exports,"deepArrayEqual",{enumerable:!0,get:function(){return r.deepArrayEqual}}),Object.defineProperty(exports,"isObjectEmpty",{enumerable:!0,get:function(){return r.isObjectEmpty}}),Object.defineProperty(exports,"cssToDevicePixels",{enumerable:!0,get:function(){return t.cssToDevicePixels}}),Object.defineProperty(exports,"cssToDeviceRatio",{enumerable:!0,get:function(){return t.cssToDeviceRatio}}),Object.defineProperty(exports,"getDevicePixelRatio",{enumerable:!0,get:function(){return t.getDevicePixelRatio}}),Object.defineProperty(exports,"isWebGL",{enumerable:!0,get:function(){return i.isWebGL}}),Object.defineProperty(exports,"isWebGL2",{enumerable:!0,get:function(){return i.isWebGL2}}),exports.log=void 0;var e=require("probe.gl"),r=require("./utils"),t=require("./device-pixels"),i=require("./webgl-checks"),n=new e.Log({id:"luma.gl"});exports.log=n;
},{"probe.gl":"TYNK","./utils":"sNqS","./device-pixels":"LoQn","./webgl-checks":"E5mh"}],"pXPX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getParameterPolyfill=x;var e,t=n(require("@babel/runtime/helpers/esm/defineProperty")),u=require("../utils");function n(e){return e&&e.__esModule?e:{default:e}}var r="OES_element_index",f="WEBGL_draw_buffers",i="EXT_disjoint_timer_query",a="EXT_disjoint_timer_query_webgl2",d="EXT_texture_filter_anisotropic",l="WEBGL_debug_renderer_info",o=35723,_=4352,E=36795,s=34047,c=37445,v=37446,G=function(e){return(0,u.isWebGL2)(e)?void 0:0},T=(e={},(0,t.default)(e,3074,function(e){return(0,u.isWebGL2)(e)?void 0:36064}),(0,t.default)(e,o,function(e){return(0,u.isWebGL2)(e)?void 0:_}),(0,t.default)(e,35977,G),(0,t.default)(e,32937,G),(0,t.default)(e,E,function(e,t){var n=(0,u.isWebGL2)(e)?e.getExtension(a):e.getExtension(i);return n&&n.GPU_DISJOINT_EXT?t(n.GPU_DISJOINT_EXT):0}),(0,t.default)(e,c,function(e,t){var u=e.getExtension(l);return t(u&&u.UNMASKED_VENDOR_WEBGL||7936)}),(0,t.default)(e,v,function(e,t){var u=e.getExtension(l);return t(u&&u.UNMASKED_RENDERER_WEBGL||7937)}),(0,t.default)(e,s,function(e,t){var u=e.luma.extensions[d];return u?t(u.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1}),(0,t.default)(e,32883,G),(0,t.default)(e,35071,G),(0,t.default)(e,37447,G),(0,t.default)(e,36063,function(e,t){if(!(0,u.isWebGL2)(e)){var n=e.getExtension(f);return n?t(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}}),(0,t.default)(e,35379,G),(0,t.default)(e,35374,G),(0,t.default)(e,35377,G),(0,t.default)(e,34852,function(e){if(!(0,u.isWebGL2)(e)){var t=e.getExtension(f);return t?t.MAX_DRAW_BUFFERS_WEBGL:0}}),(0,t.default)(e,36203,function(e){return e.getExtension(r)?2147483647:65535}),(0,t.default)(e,33001,function(e){return e.getExtension(r)?16777216:65535}),(0,t.default)(e,33e3,function(e){return 16777216}),(0,t.default)(e,37157,G),(0,t.default)(e,35373,G),(0,t.default)(e,35657,G),(0,t.default)(e,36183,G),(0,t.default)(e,37137,G),(0,t.default)(e,34045,G),(0,t.default)(e,35978,G),(0,t.default)(e,35979,G),(0,t.default)(e,35968,G),(0,t.default)(e,35376,G),(0,t.default)(e,35375,G),(0,t.default)(e,35659,G),(0,t.default)(e,37154,G),(0,t.default)(e,35371,G),(0,t.default)(e,35658,G),(0,t.default)(e,35076,G),(0,t.default)(e,35077,G),(0,t.default)(e,35380,G),e);function x(e,t,u){var n=T[u],r="function"==typeof n?n(e,t,u):n;return void 0!==r?r:t(u)}
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","../utils":"Oonc"}],"tsyS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WEBGL2_CONTEXT_OVERRIDES=exports.WEBGL2_CONTEXT_POLYFILLS=void 0;var e,r=a(require("@babel/runtime/helpers/esm/defineProperty")),t=require("../utils"),n=require("./get-parameter-polyfill");function a(e){return e&&e.__esModule?e:{default:e}}var i="OES_vertex_array_object",u="ANGLE_instanced_arrays",s="WEBGL_draw_buffers",o="EXT_disjoint_timer_query",f="EXT_texture_filter_anisotropic",c="VertexArray requires WebGL2 or OES_vertex_array_object extension";function _(e,r){return{webgl2:(0,t.isWebGL2)(e),ext:e.getExtension(r)}}var d=(e={},(0,r.default)(e,i,{meta:{suffix:"OES"},createVertexArray:function(){(0,t.assert)(!1,c)},deleteVertexArray:function(){},bindVertexArray:function(){},isVertexArray:function(){return!1}}),(0,r.default)(e,u,{meta:{suffix:"ANGLE"},vertexAttribDivisor:function(e,r){(0,t.assert)(0===r,"WebGL instanced rendering not supported")},drawElementsInstanced:function(){},drawArraysInstanced:function(){}}),(0,r.default)(e,s,{meta:{suffix:"WEBGL"},drawBuffers:function(){(0,t.assert)(!1)}}),(0,r.default)(e,o,{meta:{suffix:"EXT"},createQuery:function(){(0,t.assert)(!1)},deleteQuery:function(){(0,t.assert)(!1)},beginQuery:function(){(0,t.assert)(!1)},endQuery:function(){},getQuery:function(e,r){return this.getQueryObject(e,r)},getQueryParameter:function(e,r){return this.getQueryObject(e,r)},getQueryObject:function(){}}),e);exports.WEBGL2_CONTEXT_POLYFILLS=d;var E={readBuffer:function(e,r,n){(0,t.isWebGL2)(e)&&r(n)},getVertexAttrib:function(e,r,t,n){var a,i=_(e,u),s=i.webgl2,o=i.ext;switch(n){case 35069:a=!!s&&void 0;break;case 35070:a=s||o?void 0:0}return void 0!==a?a:r(t,n)},getProgramParameter:function(e,r,n,a){if(!(0,t.isWebGL2)(e))switch(a){case 35967:return 35981;case 35971:case 35382:return 0}return r(n,a)},getInternalformatParameter:function(e,r,n,a,i){if(!(0,t.isWebGL2)(e))switch(i){case 32937:return new Int32Array([0])}return e.getInternalformatParameter(n,a,i)},getTexParameter:function(e,r,t,n){switch(n){case 34046:var a=e.luma.extensions[f];n=a&&a.TEXTURE_MAX_ANISOTROPY_EXT||34046}return r(t,n)},getParameter:n.getParameterPolyfill,hint:function(e,r,t,n){return r(t,n)}};exports.WEBGL2_CONTEXT_OVERRIDES=E;
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","../utils":"Oonc","./get-parameter-polyfill":"pXPX"}],"FLAS":[function(require,module,exports) {
var global = arguments[3];
var t=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;var e=require("./polyfill-vertex-array-object"),r=require("../utils"),n=require("./polyfill-table");function o(t){return t.luma=t.luma||{},t.luma.polyfilled||((0,e.polyfillVertexArrayObject)(t),l(t),u(t,n.WEBGL2_CONTEXT_POLYFILLS),i(t,{target:t.luma,target2:t}),t.luma.polyfilled=!0),t}var a=void 0!==t?t:window;function l(t){t.luma.extensions={};var e=t.getSupportedExtensions()||[],r=!0,n=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var i=a.value;t.luma[i]=t.getExtension(i)}}catch(u){n=!0,o=u}finally{try{r||null==l.return||l.return()}finally{if(n)throw o}}}function i(t,e){var r=e.target,o=e.target2;Object.keys(n.WEBGL2_CONTEXT_OVERRIDES).forEach(function(e){if("function"==typeof n.WEBGL2_CONTEXT_OVERRIDES[e]){var a=t[e]?t[e].bind(t):function(){},l=n.WEBGL2_CONTEXT_OVERRIDES[e].bind(null,t,a);r[e]=l,o[e]=l}})}function u(t,e){var r=!0,n=!1,o=void 0;try{for(var a,l=Object.getOwnPropertyNames(e)[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var i=a.value;"overrides"!==i&&f(t,{extension:i,target:t.luma,target2:t})}}catch(u){n=!0,o=u}finally{try{r||null==l.return||l.return()}finally{if(n)throw o}}}function f(t,e){var o=e.extension,a=e.target,l=e.target2,i=n.WEBGL2_CONTEXT_POLYFILLS[o];(0,r.assert)(i);for(var u=i.meta,f=(void 0===u?{}:u).suffix,c=void 0===f?"":f,y=t.getExtension(o),v=function(){var e=E[s],r="".concat(e).concat(c),n=null;"meta"===e||"function"==typeof t[e]||(y&&"function"==typeof y[r]?n=function(){return y[r].apply(y,arguments)}:"function"==typeof i[e]&&(n=i[e].bind(a))),n&&(a[e]=n,l[e]=n)},s=0,E=Object.keys(i);s<E.length;s++)v()}a.polyfillContext=o;
},{"./polyfill-vertex-array-object":"RzJJ","../utils":"Oonc","./polyfill-table":"tsyS"}],"d7B5":[function(require,module,exports) {
"use strict";function e(e){if(Array.isArray(e))return e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"iplO":[function(require,module,exports) {
"use strict";function e(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,l=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(a){o=!0,l=a}finally{try{n||null==u.return||u.return()}finally{if(o)throw l}}return r}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"VRdo":[function(require,module,exports) {
"use strict";function e(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"TBeo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var e=l(require("@babel/runtime/helpers/esm/arrayWithHoles")),r=l(require("@babel/runtime/helpers/esm/iterableToArrayLimit")),t=l(require("@babel/runtime/helpers/esm/unsupportedIterableToArray")),u=l(require("@babel/runtime/helpers/esm/nonIterableRest"));function l(e){return e&&e.__esModule?e:{default:e}}function a(l,a){return(0,e.default)(l)||(0,r.default)(l,a)||(0,t.default)(l,a)||(0,u.default)()}
},{"@babel/runtime/helpers/esm/arrayWithHoles":"d7B5","@babel/runtime/helpers/esm/iterableToArrayLimit":"iplO","@babel/runtime/helpers/esm/unsupportedIterableToArray":"ZzYf","@babel/runtime/helpers/esm/nonIterableRest":"VRdo"}],"tvxq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GL_PARAMETER_GETTERS=exports.GL_HOOKED_SETTERS=exports.GL_COMPOSITE_PARAMETER_SETTERS=exports.GL_PARAMETER_SETTERS=exports.GL_PARAMETER_DEFAULTS=void 0;var e,t,u,a=r(require("@babel/runtime/helpers/esm/slicedToArray")),n=r(require("@babel/runtime/helpers/esm/toConsumableArray")),l=r(require("@babel/runtime/helpers/esm/defineProperty")),f=require("../utils");function r(e){return e&&e.__esModule?e:{default:e}}var d=(e={},(0,l.default)(e,3042,!1),(0,l.default)(e,32773,new Float32Array([0,0,0,0])),(0,l.default)(e,32777,32774),(0,l.default)(e,34877,32774),(0,l.default)(e,32969,1),(0,l.default)(e,32968,0),(0,l.default)(e,32971,1),(0,l.default)(e,32970,0),(0,l.default)(e,3106,new Float32Array([0,0,0,0])),(0,l.default)(e,3107,[!0,!0,!0,!0]),(0,l.default)(e,2884,!1),(0,l.default)(e,2885,1029),(0,l.default)(e,2929,!1),(0,l.default)(e,2931,1),(0,l.default)(e,2932,513),(0,l.default)(e,2928,new Float32Array([0,1])),(0,l.default)(e,2930,!0),(0,l.default)(e,3024,!0),(0,l.default)(e,36006,null),(0,l.default)(e,2886,2305),(0,l.default)(e,33170,4352),(0,l.default)(e,2849,1),(0,l.default)(e,32823,!1),(0,l.default)(e,32824,0),(0,l.default)(e,10752,0),(0,l.default)(e,32938,1),(0,l.default)(e,32939,!1),(0,l.default)(e,3089,!1),(0,l.default)(e,3088,new Int32Array([0,0,1024,1024])),(0,l.default)(e,2960,!1),(0,l.default)(e,2961,0),(0,l.default)(e,2968,4294967295),(0,l.default)(e,36005,4294967295),(0,l.default)(e,2962,519),(0,l.default)(e,2967,0),(0,l.default)(e,2963,4294967295),(0,l.default)(e,34816,519),(0,l.default)(e,36003,0),(0,l.default)(e,36004,4294967295),(0,l.default)(e,2964,7680),(0,l.default)(e,2965,7680),(0,l.default)(e,2966,7680),(0,l.default)(e,34817,7680),(0,l.default)(e,34818,7680),(0,l.default)(e,34819,7680),(0,l.default)(e,2978,[0,0,1024,1024]),(0,l.default)(e,3333,4),(0,l.default)(e,3317,4),(0,l.default)(e,37440,!1),(0,l.default)(e,37441,!1),(0,l.default)(e,37443,37444),(0,l.default)(e,35723,4352),(0,l.default)(e,36010,null),(0,l.default)(e,35977,!1),(0,l.default)(e,3330,0),(0,l.default)(e,3332,0),(0,l.default)(e,3331,0),(0,l.default)(e,3314,0),(0,l.default)(e,32878,0),(0,l.default)(e,3316,0),(0,l.default)(e,3315,0),(0,l.default)(e,32877,0),e);exports.GL_PARAMETER_DEFAULTS=d;var c=function(e,t,u){return t?e.enable(u):e.disable(u)},i=function(e,t,u){return e.hint(u,t)},o=function(e,t,u){return e.pixelStorei(u,t)},s=function(e,t){var u=(0,f.isWebGL2)(e)?36009:36160;return e.bindFramebuffer(u,t)},p=function(e,t){return e.bindFramebuffer(36008,t)};function b(e){return Array.isArray(e)||ArrayBuffer.isView(e)}var F=(t={},(0,l.default)(t,3042,c),(0,l.default)(t,32773,function(e,t){return e.blendColor.apply(e,(0,n.default)(t))}),(0,l.default)(t,32777,"blendEquation"),(0,l.default)(t,34877,"blendEquation"),(0,l.default)(t,32969,"blendFunc"),(0,l.default)(t,32968,"blendFunc"),(0,l.default)(t,32971,"blendFunc"),(0,l.default)(t,32970,"blendFunc"),(0,l.default)(t,3106,function(e,t){return e.clearColor.apply(e,(0,n.default)(t))}),(0,l.default)(t,3107,function(e,t){return e.colorMask.apply(e,(0,n.default)(t))}),(0,l.default)(t,2884,c),(0,l.default)(t,2885,function(e,t){return e.cullFace(t)}),(0,l.default)(t,2929,c),(0,l.default)(t,2931,function(e,t){return e.clearDepth(t)}),(0,l.default)(t,2932,function(e,t){return e.depthFunc(t)}),(0,l.default)(t,2928,function(e,t){return e.depthRange.apply(e,(0,n.default)(t))}),(0,l.default)(t,2930,function(e,t){return e.depthMask(t)}),(0,l.default)(t,3024,c),(0,l.default)(t,35723,i),(0,l.default)(t,36006,s),(0,l.default)(t,2886,function(e,t){return e.frontFace(t)}),(0,l.default)(t,33170,i),(0,l.default)(t,2849,function(e,t){return e.lineWidth(t)}),(0,l.default)(t,32823,c),(0,l.default)(t,32824,"polygonOffset"),(0,l.default)(t,10752,"polygonOffset"),(0,l.default)(t,35977,c),(0,l.default)(t,32938,"sampleCoverage"),(0,l.default)(t,32939,"sampleCoverage"),(0,l.default)(t,3089,c),(0,l.default)(t,3088,function(e,t){return e.scissor.apply(e,(0,n.default)(t))}),(0,l.default)(t,2960,c),(0,l.default)(t,2961,function(e,t){return e.clearStencil(t)}),(0,l.default)(t,2968,function(e,t){return e.stencilMaskSeparate(1028,t)}),(0,l.default)(t,36005,function(e,t){return e.stencilMaskSeparate(1029,t)}),(0,l.default)(t,2962,"stencilFuncFront"),(0,l.default)(t,2967,"stencilFuncFront"),(0,l.default)(t,2963,"stencilFuncFront"),(0,l.default)(t,34816,"stencilFuncBack"),(0,l.default)(t,36003,"stencilFuncBack"),(0,l.default)(t,36004,"stencilFuncBack"),(0,l.default)(t,2964,"stencilOpFront"),(0,l.default)(t,2965,"stencilOpFront"),(0,l.default)(t,2966,"stencilOpFront"),(0,l.default)(t,34817,"stencilOpBack"),(0,l.default)(t,34818,"stencilOpBack"),(0,l.default)(t,34819,"stencilOpBack"),(0,l.default)(t,2978,function(e,t){return e.viewport.apply(e,(0,n.default)(t))}),(0,l.default)(t,3333,o),(0,l.default)(t,3317,o),(0,l.default)(t,37440,o),(0,l.default)(t,37441,o),(0,l.default)(t,37443,o),(0,l.default)(t,3330,o),(0,l.default)(t,3332,o),(0,l.default)(t,3331,o),(0,l.default)(t,36010,p),(0,l.default)(t,3314,o),(0,l.default)(t,32878,o),(0,l.default)(t,3316,o),(0,l.default)(t,3315,o),(0,l.default)(t,32877,o),(0,l.default)(t,"framebuffer",function(e,t){var u=t&&"handle"in t?t.handle:t;return e.bindFramebuffer(36160,u)}),(0,l.default)(t,"blend",function(e,t){return t?e.enable(3042):e.disable(3042)}),(0,l.default)(t,"blendColor",function(e,t){return e.blendColor.apply(e,(0,n.default)(t))}),(0,l.default)(t,"blendEquation",function(e,t){t=b(t)?t:[t,t],e.blendEquationSeparate.apply(e,(0,n.default)(t))}),(0,l.default)(t,"blendFunc",function(e,t){t=b(t)&&2===t.length?[].concat((0,n.default)(t),(0,n.default)(t)):t,e.blendFuncSeparate.apply(e,(0,n.default)(t))}),(0,l.default)(t,"clearColor",function(e,t){return e.clearColor.apply(e,(0,n.default)(t))}),(0,l.default)(t,"clearDepth",function(e,t){return e.clearDepth(t)}),(0,l.default)(t,"clearStencil",function(e,t){return e.clearStencil(t)}),(0,l.default)(t,"colorMask",function(e,t){return e.colorMask.apply(e,(0,n.default)(t))}),(0,l.default)(t,"cull",function(e,t){return t?e.enable(2884):e.disable(2884)}),(0,l.default)(t,"cullFace",function(e,t){return e.cullFace(t)}),(0,l.default)(t,"depthTest",function(e,t){return t?e.enable(2929):e.disable(2929)}),(0,l.default)(t,"depthFunc",function(e,t){return e.depthFunc(t)}),(0,l.default)(t,"depthMask",function(e,t){return e.depthMask(t)}),(0,l.default)(t,"depthRange",function(e,t){return e.depthRange.apply(e,(0,n.default)(t))}),(0,l.default)(t,"dither",function(e,t){return t?e.enable(3024):e.disable(3024)}),(0,l.default)(t,"derivativeHint",function(e,t){e.hint(35723,t)}),(0,l.default)(t,"frontFace",function(e,t){return e.frontFace(t)}),(0,l.default)(t,"mipmapHint",function(e,t){return e.hint(33170,t)}),(0,l.default)(t,"lineWidth",function(e,t){return e.lineWidth(t)}),(0,l.default)(t,"polygonOffsetFill",function(e,t){return t?e.enable(32823):e.disable(32823)}),(0,l.default)(t,"polygonOffset",function(e,t){return e.polygonOffset.apply(e,(0,n.default)(t))}),(0,l.default)(t,"sampleCoverage",function(e,t){return e.sampleCoverage.apply(e,(0,n.default)(t))}),(0,l.default)(t,"scissorTest",function(e,t){return t?e.enable(3089):e.disable(3089)}),(0,l.default)(t,"scissor",function(e,t){return e.scissor.apply(e,(0,n.default)(t))}),(0,l.default)(t,"stencilTest",function(e,t){return t?e.enable(2960):e.disable(2960)}),(0,l.default)(t,"stencilMask",function(e,t){var u=t=b(t)?t:[t,t],n=(0,a.default)(u,2),l=n[0],f=n[1];e.stencilMaskSeparate(1028,l),e.stencilMaskSeparate(1029,f)}),(0,l.default)(t,"stencilFunc",function(e,t){var u=t=b(t)&&3===t.length?[].concat((0,n.default)(t),(0,n.default)(t)):t,l=(0,a.default)(u,6),f=l[0],r=l[1],d=l[2],c=l[3],i=l[4],o=l[5];e.stencilFuncSeparate(1028,f,r,d),e.stencilFuncSeparate(1029,c,i,o)}),(0,l.default)(t,"stencilOp",function(e,t){var u=t=b(t)&&3===t.length?[].concat((0,n.default)(t),(0,n.default)(t)):t,l=(0,a.default)(u,6),f=l[0],r=l[1],d=l[2],c=l[3],i=l[4],o=l[5];e.stencilOpSeparate(1028,f,r,d),e.stencilOpSeparate(1029,c,i,o)}),(0,l.default)(t,"viewport",function(e,t){return e.viewport.apply(e,(0,n.default)(t))}),t);function E(e,t,u){return void 0!==t[e]?t[e]:u[e]}exports.GL_PARAMETER_SETTERS=F;var S={blendEquation:function(e,t,u){return e.blendEquationSeparate(E(32777,t,u),E(34877,t,u))},blendFunc:function(e,t,u){return e.blendFuncSeparate(E(32969,t,u),E(32968,t,u),E(32971,t,u),E(32970,t,u))},polygonOffset:function(e,t,u){return e.polygonOffset(E(32824,t,u),E(10752,t,u))},sampleCoverage:function(e,t,u){return e.sampleCoverage(E(32938,t,u),E(32939,t,u))},stencilFuncFront:function(e,t,u){return e.stencilFuncSeparate(1028,E(2962,t,u),E(2967,t,u),E(2963,t,u))},stencilFuncBack:function(e,t,u){return e.stencilFuncSeparate(1029,E(34816,t,u),E(36003,t,u),E(36004,t,u))},stencilOpFront:function(e,t,u){return e.stencilOpSeparate(1028,E(2964,t,u),E(2965,t,u),E(2966,t,u))},stencilOpBack:function(e,t,u){return e.stencilOpSeparate(1029,E(34817,t,u),E(34818,t,u),E(34819,t,u))}};exports.GL_COMPOSITE_PARAMETER_SETTERS=S;var v={enable:function(e,t){return e((0,l.default)({},t,!0))},disable:function(e,t){return e((0,l.default)({},t,!1))},pixelStorei:function(e,t,u){return e((0,l.default)({},t,u))},hint:function(e,t,u){return e((0,l.default)({},t,u))},bindFramebuffer:function(e,t,u){var a;switch(t){case 36160:return e((a={},(0,l.default)(a,36006,u),(0,l.default)(a,36010,u),a));case 36009:return e((0,l.default)({},36006,u));case 36008:return e((0,l.default)({},36010,u));default:return null}},blendColor:function(e,t,u,a,n){return e((0,l.default)({},32773,new Float32Array([t,u,a,n])))},blendEquation:function(e,t){var u;return e((u={},(0,l.default)(u,32777,t),(0,l.default)(u,34877,t),u))},blendEquationSeparate:function(e,t,u){var a;return e((a={},(0,l.default)(a,32777,t),(0,l.default)(a,34877,u),a))},blendFunc:function(e,t,u){var a;return e((a={},(0,l.default)(a,32969,t),(0,l.default)(a,32968,u),(0,l.default)(a,32971,t),(0,l.default)(a,32970,u),a))},blendFuncSeparate:function(e,t,u,a,n){var f;return e((f={},(0,l.default)(f,32969,t),(0,l.default)(f,32968,u),(0,l.default)(f,32971,a),(0,l.default)(f,32970,n),f))},clearColor:function(e,t,u,a,n){return e((0,l.default)({},3106,new Float32Array([t,u,a,n])))},clearDepth:function(e,t){return e((0,l.default)({},2931,t))},clearStencil:function(e,t){return e((0,l.default)({},2961,t))},colorMask:function(e,t,u,a,n){return e((0,l.default)({},3107,[t,u,a,n]))},cullFace:function(e,t){return e((0,l.default)({},2885,t))},depthFunc:function(e,t){return e((0,l.default)({},2932,t))},depthRange:function(e,t,u){return e((0,l.default)({},2928,new Float32Array([t,u])))},depthMask:function(e,t){return e((0,l.default)({},2930,t))},frontFace:function(e,t){return e((0,l.default)({},2886,t))},lineWidth:function(e,t){return e((0,l.default)({},2849,t))},polygonOffset:function(e,t,u){var a;return e((a={},(0,l.default)(a,32824,t),(0,l.default)(a,10752,u),a))},sampleCoverage:function(e,t,u){var a;return e((a={},(0,l.default)(a,32938,t),(0,l.default)(a,32939,u),a))},scissor:function(e,t,u,a,n){return e((0,l.default)({},3088,new Int32Array([t,u,a,n])))},stencilMask:function(e,t){var u;return e((u={},(0,l.default)(u,2968,t),(0,l.default)(u,36005,t),u))},stencilMaskSeparate:function(e,t,u){return e((0,l.default)({},1028===t?2968:36005,u))},stencilFunc:function(e,t,u,a){var n;return e((n={},(0,l.default)(n,2962,t),(0,l.default)(n,2967,u),(0,l.default)(n,2963,a),(0,l.default)(n,34816,t),(0,l.default)(n,36003,u),(0,l.default)(n,36004,a),n))},stencilFuncSeparate:function(e,t,u,a,n){var f;return e((f={},(0,l.default)(f,1028===t?2962:34816,u),(0,l.default)(f,1028===t?2967:36003,a),(0,l.default)(f,1028===t?2963:36004,n),f))},stencilOp:function(e,t,u,a){var n;return e((n={},(0,l.default)(n,2964,t),(0,l.default)(n,2965,u),(0,l.default)(n,2966,a),(0,l.default)(n,34817,t),(0,l.default)(n,34818,u),(0,l.default)(n,34819,a),n))},stencilOpSeparate:function(e,t,u,a,n){var f;return e((f={},(0,l.default)(f,1028===t?2964:34817,u),(0,l.default)(f,1028===t?2965:34818,a),(0,l.default)(f,1028===t?2966:34819,n),f))},viewport:function(e,t,u,a,n){return e((0,l.default)({},2978,[t,u,a,n]))}};exports.GL_HOOKED_SETTERS=v;var y=function(e,t){return e.isEnabled(t)},h=(u={},(0,l.default)(u,3042,y),(0,l.default)(u,2884,y),(0,l.default)(u,2929,y),(0,l.default)(u,3024,y),(0,l.default)(u,32823,y),(0,l.default)(u,32926,y),(0,l.default)(u,32928,y),(0,l.default)(u,3089,y),(0,l.default)(u,2960,y),(0,l.default)(u,35977,y),u);exports.GL_PARAMETER_GETTERS=h;
},{"@babel/runtime/helpers/esm/slicedToArray":"TBeo","@babel/runtime/helpers/esm/toConsumableArray":"AdMH","@babel/runtime/helpers/esm/defineProperty":"iDM3","../utils":"Oonc"}],"XIFr":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=h,exports.pushContextState=p,exports.popContextState=d;var t=i(require("@babel/runtime/helpers/esm/classCallCheck")),a=i(require("@babel/runtime/helpers/esm/createClass")),r=require("./webgl-parameter-tables"),n=require("./unified-parameter-api"),s=require("../utils");function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var a=e[t].bind(e);e[t]=function(){var t=arguments.length<=0?void 0:arguments[0];return t in e.state.cache||(e.state.cache[t]=a.apply(void 0,arguments)),e.state.enable?e.state.cache[t]:a.apply(void 0,arguments)},Object.defineProperty(e[t],"name",{value:"".concat(t,"-from-cache"),configurable:!1})}function c(e,t,a){var r=e[t].bind(e);e[t]=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];var i=a.apply(void 0,[e.state._updateCache].concat(n)),o=i.valueChanged,c=i.oldValue;return o&&r.apply(void 0,n),c},Object.defineProperty(e[t],"name",{value:"".concat(t,"-to-cache"),configurable:!1})}function l(e){var t=e.useProgram.bind(e);e.useProgram=function(a){e.state.program!==a&&(t(a),e.state.program=a)}}var u=function(){function e(a){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=s.copyState,o=void 0!==i&&i,c=s.log,l=void 0===c?function(){}:c;(0,t.default)(this,e),this.gl=a,this.program=null,this.stateStack=[],this.enable=!0,this.cache=o?(0,n.getParameters)(a):Object.assign({},r.GL_PARAMETER_DEFAULTS),this.log=l,this._updateCache=this._updateCache.bind(this),Object.seal(this)}return(0,a.default)(e,[{key:"push",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.stateStack.push({})}},{key:"pop",value:function(){(0,s.assert)(this.stateStack.length>0);var e=this.stateStack[this.stateStack.length-1];(0,n.setParameters)(this.gl,e,this.cache),this.stateStack.pop()}},{key:"_updateCache",value:function(e){var t,a=!1,r=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(var n in e){(0,s.assert)(void 0!==n);var i=e[n],o=this.cache[n];(0,s.deepArrayEqual)(i,o)||(a=!0,t=o,!r||n in r||(r[n]=o),this.cache[n]=i)}return{valueChanged:a,oldValue:t}}}]),e}();function h(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a.enable,i=void 0===n||n,h=a.copyState;if((0,s.assert)(void 0!==h),!t.state){var p=void 0!==e?e:window;for(var d in p.polyfillContext&&p.polyfillContext(t),t.state=new u(t,{copyState:h,enable:i}),l(t),r.GL_HOOKED_SETTERS){c(t,d,r.GL_HOOKED_SETTERS[d])}o(t,"getParameter"),o(t,"isEnabled")}return t.state.enable=i,t}function p(e){e.state||h(e,{copyState:!1}),e.state.push()}function d(e){(0,s.assert)(e.state),e.state.pop()}
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","./webgl-parameter-tables":"tvxq","./unified-parameter-api":"TZJt","../utils":"Oonc"}],"TZJt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setParameters=a,exports.getParameters=s,exports.resetParameters=i,exports.withParameters=n;var e=require("./webgl-parameter-tables"),t=require("./track-context-state"),r=require("../utils");function a(t,a){if((0,r.assert)((0,r.isWebGL)(t),"setParameters requires a WebGL context"),!(0,r.isObjectEmpty)(a)){var s={};for(var i in a){var n=Number(i),o=e.GL_PARAMETER_SETTERS[i];o&&("string"==typeof o?s[o]=!0:o(t,a[i],n))}var u=t.state&&t.state.cache;if(u)for(var E in s){(0,e.GL_COMPOSITE_PARAMETER_SETTERS[E])(t,a,u)}}}function s(t,r){if("number"==typeof(r=r||e.GL_PARAMETER_DEFAULTS)){var a=r,s=e.GL_PARAMETER_GETTERS[a];return s?s(t,a):t.getParameter(a)}var i=Array.isArray(r)?r:Object.keys(r),n={},o=!0,u=!1,E=void 0;try{for(var f,c=i[Symbol.iterator]();!(o=(f=c.next()).done);o=!0){var T=f.value,l=e.GL_PARAMETER_GETTERS[T];n[T]=l?l(t,Number(T)):t.getParameter(Number(T))}}catch(p){u=!0,E=p}finally{try{o||null==c.return||c.return()}finally{if(u)throw E}}return n}function i(t){a(t,e.GL_PARAMETER_DEFAULTS)}function n(e,s,i){if((0,r.isObjectEmpty)(s))return i(e);var n,o=s.nocatch,u=void 0===o||o;if((0,t.pushContextState)(e),a(e,s),u)n=i(e),(0,t.popContextState)(e);else try{n=i(e)}finally{(0,t.popContextState)(e)}return n}
},{"./webgl-parameter-tables":"tvxq","./track-context-state":"XIFr","../utils":"Oonc"}],"Ijug":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createGLContext=g,exports.instrumentGLContext=d,exports.getContextDebugInfo=u,exports.resizeGLContext=v,exports.ERR_WEBGL2=exports.ERR_WEBGL=exports.ERR_CONTEXT=void 0;var e=require("probe.gl/env"),t=r(require("../state-tracker/track-context-state")),n=require("../utils");function r(e){return e&&e.__esModule?e:{default:e}}var a="Invalid WebGLRenderingContext";exports.ERR_CONTEXT=a;var o=a;exports.ERR_WEBGL=o;var i="Requires WebGL2";exports.ERR_WEBGL2=i;var l=(0,e.isBrowser)(),c=l&&"undefined"!=typeof document,s={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,n.assert)(l,"createGLContext only available in the browser.\nCreate your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils");var t,r=e=Object.assign({},s,e),a=r.width,o=r.height;function i(t){if(e.throwOnError)throw new Error(t);return console.error(t),null}return e.onError=i,(t=h(f({canvas:e.canvas,width:a,height:o,onError:i}),e))?(b(t=d(t,e)),t):null}function d(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!r||r._instrumented)return r;r._version=r._version||m(r),r.luma=r.luma||{},r.luma.canvasSizeInfo=r.luma.canvasSizeInfo||{};var o=a=Object.assign({},s,a),i=o.manageState,c=o.debug;return i&&(0,t.default)(r,{copyState:!1,log:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.log.log.apply(n.log,[1].concat(t))()}}),l&&c&&(e.global.makeDebugContext?(r=e.global.makeDebugContext(r,a),n.log.level=Math.max(n.log.level,1)):n.log.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),r._instrumented=!0,r}function u(e){var t=e.getParameter(7936),n=e.getParameter(7937),r=e.getExtension("WEBGL_debug_renderer_info");return{vendor:r&&e.getParameter(r.UNMASKED_VENDOR_WEBGL||7936)||t,renderer:r&&e.getParameter(r.UNMASKED_RENDERER_WEBGL||7937)||n,vendorMasked:t,rendererMasked:n,version:e.getParameter(7938),shadingLanguageVersion:e.getParameter(35724)}}function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.canvas){x(e,(0,n.getDevicePixelRatio)(t.useDevicePixels),t)}else{var r=e.getExtension("STACKGL_resize_drawingbuffer");r&&"width"in t&&"height"in t&&r.resize(t.width,t.height)}}function h(e,t){var n=t.onError,r=null,a=function(e){return r=e.statusMessage||r};e.addEventListener("webglcontextcreationerror",a,!1);var o=t.webgl1,i=void 0===o||o,l=t.webgl2,c=void 0===l||l,s=null;return c&&(s=(s=s||e.getContext("webgl2",t))||e.getContext("experimental-webgl2",t)),i&&(s=(s=s||e.getContext("webgl",t))||e.getContext("experimental-webgl",t)),e.removeEventListener("webglcontextcreationerror",a,!1),s||n("Failed to create ".concat(c&&!i?"WebGL2":"WebGL"," context: ").concat(r||"Unknown error"))}function f(e){var t,n=e.canvas,r=e.width,a=void 0===r?800:r,o=e.height,i=void 0===o?600:o,l=e.onError;"string"==typeof n?(c&&"complete"===document.readyState||l("createGLContext called on canvas '".concat(n,"' before page was loaded")),t=document.getElementById(n)):n?t=n:((t=document.createElement("canvas")).id="lumagl-canvas",t.style.width=Number.isFinite(a)?"".concat(a,"px"):"100%",t.style.height=Number.isFinite(i)?"".concat(i,"px"):"100%",document.body.insertBefore(t,document.body.firstChild));return t}function b(e){var t=(0,n.isWebGL2)(e)?"WebGL2":"WebGL1",r=u(e),a=r?"(".concat(r.vendor,",").concat(r.renderer,")"):"",o=e.debug?" debug":"";n.log.info(1,"".concat(t).concat(o," context ").concat(a))()}function m(e){return"undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext?2:1}function x(e,t,r){var a="width"in r?r.width:e.canvas.clientWidth,o="height"in r?r.height:e.canvas.clientHeight;a&&o||(n.log.log(1,"Canvas clientWidth/clientHeight is 0")(),t=1,a=e.canvas.width||1,o=e.canvas.height||1),e.luma=e.luma||{},e.luma.canvasSizeInfo=e.luma.canvasSizeInfo||{};var i=e.luma.canvasSizeInfo;if(i.clientWidth!==a||i.clientHeight!==o||i.devicePixelRatio!==t){var l=t,c=Math.floor(a*l),s=Math.floor(o*l);e.canvas.width=c,e.canvas.height=s,e.drawingBufferWidth===c&&e.drawingBufferHeight===s||(n.log.warn("Device pixel ratio clamped")(),l=Math.min(e.drawingBufferWidth/a,e.drawingBufferHeight/o),e.canvas.width=Math.floor(a*l),e.canvas.height=Math.floor(o*l)),Object.assign(e.luma.canvasSizeInfo,{clientWidth:a,clientHeight:o,devicePixelRatio:t})}}
},{"probe.gl/env":"d3vq","../state-tracker/track-context-state":"XIFr","../utils":"Oonc"}],"lAom":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"polyfillContext",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"getParameters",{enumerable:!0,get:function(){return t.getParameters}}),Object.defineProperty(exports,"setParameters",{enumerable:!0,get:function(){return t.setParameters}}),Object.defineProperty(exports,"resetParameters",{enumerable:!0,get:function(){return t.resetParameters}}),Object.defineProperty(exports,"withParameters",{enumerable:!0,get:function(){return t.withParameters}}),Object.defineProperty(exports,"trackContextState",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"pushContextState",{enumerable:!0,get:function(){return r.pushContextState}}),Object.defineProperty(exports,"popContextState",{enumerable:!0,get:function(){return r.popContextState}}),Object.defineProperty(exports,"createGLContext",{enumerable:!0,get:function(){return n.createGLContext}}),Object.defineProperty(exports,"resizeGLContext",{enumerable:!0,get:function(){return n.resizeGLContext}}),Object.defineProperty(exports,"instrumentGLContext",{enumerable:!0,get:function(){return n.instrumentGLContext}}),Object.defineProperty(exports,"getContextDebugInfo",{enumerable:!0,get:function(){return n.getContextDebugInfo}}),Object.defineProperty(exports,"log",{enumerable:!0,get:function(){return o.log}}),Object.defineProperty(exports,"cssToDeviceRatio",{enumerable:!0,get:function(){return o.cssToDeviceRatio}}),Object.defineProperty(exports,"cssToDevicePixels",{enumerable:!0,get:function(){return o.cssToDevicePixels}}),Object.defineProperty(exports,"isWebGL",{enumerable:!0,get:function(){return o.isWebGL}}),Object.defineProperty(exports,"isWebGL2",{enumerable:!0,get:function(){return o.isWebGL2}});var e=a(require("./polyfill/polyfill-context")),t=require("./state-tracker/unified-parameter-api"),r=i(require("./state-tracker/track-context-state")),n=require("./context/context"),o=require("./utils");function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}function a(e){return e&&e.__esModule?e:{default:e}}
},{"./polyfill/polyfill-context":"FLAS","./state-tracker/unified-parameter-api":"TZJt","./state-tracker/track-context-state":"XIFr","./context/context":"Ijug","./utils":"Oonc"}],"HGnm":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.lumaStats=void 0;var e=s(require("@babel/runtime/helpers/esm/classCallCheck")),l=s(require("@babel/runtime/helpers/esm/createClass")),t=require("@luma.gl/gltools"),a=require("probe.gl"),r=require("probe.gl/env");function s(e){return e&&e.__esModule?e:{default:e}}var o="8.3.2",u="set luma.log.level=1 (or higher) to trace rendering",n=function(){function t(){(0,e.default)(this,t),this.stats=new Map}return(0,l.default)(t,[{key:"get",value:function(e){return this.stats.has(e)||this.stats.set(e,new a.Stats({id:e})),this.stats.get(e)}}]),t}(),i=new n;if(exports.lumaStats=i,r.global.luma&&r.global.luma.VERSION!==o)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(r.global.luma.VERSION," vs ").concat(o));r.global.luma||((0,r.isBrowser)()&&t.log.log(1,"luma.gl ".concat(o," - ").concat(u))(),r.global.luma=r.global.luma||{VERSION:o,version:o,log:t.log,stats:i,globals:{modules:{},nodeIO:{}}});var g=r.global.luma;exports.default=g;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@luma.gl/gltools":"lAom","probe.gl":"TYNK","probe.gl/env":"d3vq"}],"AGkC":[function(require,module,exports) {
"use strict";function e(e){return"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(e):setTimeout(e,1e3/60)}function n(e){return"undefined"!=typeof window&&window.cancelAnimationFrame?window.cancelAnimationFrame(e):clearTimeout(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.requestAnimationFrame=e,exports.cancelAnimationFrame=n;
},{}],"yDUI":[function(require,module,exports) {
"use strict";function e(e,r){if(!e)throw new Error(r||"luma.gl: assertion failed.")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"oMrl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=require("probe.gl/env");function r(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"IE"===(0,e.getBrowser)(r.userAgent)}
},{"probe.gl/env":"d3vq"}],"OhKi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.uid=n,exports.isPowerOfTwo=u,exports.isObjectEmpty=o;var e=r(require("./assert"));function r(e){return e&&e.__esModule?e:{default:e}}var t={};function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";t[e]=t[e]||1;var r=t[e]++;return"".concat(e,"-").concat(r)}function u(r){return(0,e.default)("number"==typeof r,"Input must be a number"),r&&0==(r&r-1)}function o(e){var r=!0;for(var t in e){r=!1;break}return r}
},{"./assert":"yDUI"}],"Ijwg":[function(require,module,exports) {
"use strict";function e(e,t){for(var i=t.maxElts,n=void 0===i?16:i,a=t.size,o=void 0===a?1:a,s="[",u=0;u<e.length&&u<n;++u)u>0&&(s+=",".concat(u%o==0?" ":"")),s+=r(e[u],t);var f=e.length>n?"...":"]";return"".concat(s).concat(f)}function r(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.isInteger,n=void 0!==i&&i;if(Array.isArray(r)||ArrayBuffer.isView(r))return e(r,t);if(!Number.isFinite(r))return String(r);if(Math.abs(r)<1e-16)return n?"0":"0.";if(n)return r.toFixed(0);if(Math.abs(r)>100&&Math.abs(r)<1e4)return r.toFixed(0);var a=r.toPrecision(2);return a.indexOf(".0")===a.length-2?a.slice(0,-1):a}Object.defineProperty(exports,"__esModule",{value:!0}),exports.formatValue=r;
},{}],"EgC4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stubRemovedMethods=o;var e=require("@luma.gl/gltools");function o(o,t,r,a){var c="See luma.gl ".concat(r," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),u=Object.getPrototypeOf(o);a.forEach(function(o){u.methodName||(u[o]=function(){throw e.log.removed("Calling removed method ".concat(t,".").concat(o,": "),c)(),new Error(o)})})}
},{"@luma.gl/gltools":"lAom"}],"vBG1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.checkProps=o;var c=require("@luma.gl/gltools");function o(o,e,r){var a=r.removedProps,t=void 0===a?{}:a,n=r.deprecatedProps,i=void 0===n?{}:n,d=r.replacedProps,v=void 0===d?{}:d;for(var l in t)if(l in e){var s=t[l]?"".concat(o,".").concat(t[l]):"N/A";c.log.removed("".concat(o,".").concat(l),s)()}for(var p in i)if(p in e){var f=i[p];c.log.deprecated("".concat(o,".").concat(p),"".concat(o,".").concat(f))()}var u=null;for(var g in v)if(g in e){var P=v[g];c.log.deprecated("".concat(o,".").concat(g),"".concat(o,".").concat(P))(),(u=u||Object.assign({},e))[P]=e[g],delete u[g]}return u||e}
},{"@luma.gl/gltools":"lAom"}],"CgZv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"assert",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"isOldIE",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"uid",{enumerable:!0,get:function(){return t.uid}}),Object.defineProperty(exports,"isPowerOfTwo",{enumerable:!0,get:function(){return t.isPowerOfTwo}}),Object.defineProperty(exports,"isObjectEmpty",{enumerable:!0,get:function(){return t.isObjectEmpty}}),Object.defineProperty(exports,"formatValue",{enumerable:!0,get:function(){return u.formatValue}}),Object.defineProperty(exports,"stubRemovedMethods",{enumerable:!0,get:function(){return o.stubRemovedMethods}}),Object.defineProperty(exports,"checkProps",{enumerable:!0,get:function(){return n.checkProps}});var e=i(require("./assert")),r=i(require("./is-old-ie")),t=require("./utils"),u=require("./format-value"),o=require("./stub-methods"),n=require("./check-props");function i(e){return e&&e.__esModule?e:{default:e}}
},{"./assert":"yDUI","./is-old-ie":"oMrl","./utils":"OhKi","./format-value":"Ijwg","./stub-methods":"EgC4","./check-props":"vBG1"}],"SdWy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.assertWebGLContext=R,exports.assertWebGL2Context=i,exports.ERR_WEBGL2=exports.ERR_WEBGL=exports.ERR_CONTEXT=void 0;var e=require("../utils"),t=require("@luma.gl/gltools"),r="Invalid WebGLRenderingContext";exports.ERR_CONTEXT=r;var s=r;exports.ERR_WEBGL=s;var o="Requires WebGL2";function R(s){(0,e.assert)((0,t.isWebGL)(s),r)}function i(r){(0,e.assert)((0,t.isWebGL2)(r),o)}exports.ERR_WEBGL2=o;
},{"../utils":"CgZv","@luma.gl/gltools":"lAom"}],"MBUn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getGLTypeFromTypedArray=e,exports.getTypedArrayFromGLType=t,exports.flipRows=a,exports.scalePixels=n;var r="Failed to deduce GL constant from typed array";function e(e){switch(ArrayBuffer.isView(e)?e.constructor:e){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(r)}}function t(r){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).clamped,t=void 0===e||e;switch(r){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return t?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function a(r){var e=r.data,t=r.width,a=r.height,n=r.bytesPerPixel,s=void 0===n?4:n,o=r.temp,i=t*s;o=o||new Uint8Array(i);for(var c=0;c<a/2;++c){var y=c*i,u=(a-c-1)*i;o.set(e.subarray(y,y+i)),e.copyWithin(y,u,u+i),e.set(o,u)}}function n(r){for(var e=r.data,t=r.width,a=r.height,n=Math.round(t/2),s=Math.round(a/2),o=new Uint8Array(n*s*4),i=0;i<s;i++)for(var c=0;c<n;c++)for(var y=0;y<4;y++)o[4*(i*n+c)+y]=e[4*(2*i*t+2*c)+y];return{data:o,width:n,height:s}}
},{}],"UyRF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getKeyValue=r,exports.getKey=t,exports.getKeyType=n;var e=require("../utils");function r(r,t){if("string"!=typeof t)return t;var n=Number(t);if(!isNaN(n))return n;var i=r[t=t.replace(/^.*\./,"")];return(0,e.assert)(void 0!==i,"Accessing undefined constant GL.".concat(t)),i}function t(e,r){for(var t in r=Number(r),e)if(e[t]===r)return"GL.".concat(t);return String(r)}function n(r,t){for(var n in(0,e.assert)(void 0!==t,"undefined key"),t=Number(t),r)if(r[n]===t)return"GL.".concat(n);return String(t)}
},{"../utils":"CgZv"}],"GZNE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"assertWebGLContext",{enumerable:!0,get:function(){return e.assertWebGLContext}}),Object.defineProperty(exports,"assertWebGL2Context",{enumerable:!0,get:function(){return e.assertWebGL2Context}}),Object.defineProperty(exports,"requestAnimationFrame",{enumerable:!0,get:function(){return r.requestAnimationFrame}}),Object.defineProperty(exports,"cancelAnimationFrame",{enumerable:!0,get:function(){return r.cancelAnimationFrame}}),Object.defineProperty(exports,"getGLTypeFromTypedArray",{enumerable:!0,get:function(){return t.getGLTypeFromTypedArray}}),Object.defineProperty(exports,"getTypedArrayFromGLType",{enumerable:!0,get:function(){return t.getTypedArrayFromGLType}}),Object.defineProperty(exports,"flipRows",{enumerable:!0,get:function(){return t.flipRows}}),Object.defineProperty(exports,"scalePixels",{enumerable:!0,get:function(){return t.scalePixels}}),Object.defineProperty(exports,"getKeyValue",{enumerable:!0,get:function(){return n.getKeyValue}}),Object.defineProperty(exports,"getKey",{enumerable:!0,get:function(){return n.getKey}}),Object.defineProperty(exports,"getKeyType",{enumerable:!0,get:function(){return n.getKeyType}}),Object.defineProperty(exports,"cloneTextureFrom",{enumerable:!0,get:function(){return o.cloneTextureFrom}});var e=require("./webgl-checks"),r=require("./request-animation-frame"),t=require("./typed-array-utils"),n=require("./constants-to-keys"),o=require("./texture-utils");
},{"./webgl-checks":"SdWy","./request-animation-frame":"AGkC","./typed-array-utils":"MBUn","./constants-to-keys":"UyRF","./texture-utils":"oR6C"}],"DwD3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("@babel/runtime/helpers/esm/classCallCheck")),t=s(require("@babel/runtime/helpers/esm/createClass")),n=require("@luma.gl/gltools"),r=require("../init"),i=require("../webgl-utils"),a=require("../utils");function s(e){return e&&e.__esModule?e:{default:e}}var o="Resource subclass must define virtual methods",u=function(){function s(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,e.default)(this,s),(0,i.assertWebGLContext)(t);var r=n.id,o=n.userData,u=void 0===o?{}:o;this.gl=t,this.id=r||(0,a.uid)(this.constructor.name),this.userData=u,this._bound=!1,this._handle=n.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}return(0,t.default)(s,[{key:"toString",value:function(){return"".concat(this.constructor.name,"(").concat(this.id,")")}},{key:"delete",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).deleteChildren,t=void 0!==e&&e,n=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,n&&t&&n.filter(Boolean).forEach(function(e){e.delete()}),this}},{key:"bind",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;return"function"!=typeof t?(this._bindHandle(t),this):(this._bound?e=t():(this._bindHandle(this.handle),this._bound=!0,e=t(),this._bound=!1,this._bindHandle(null)),e)}},{key:"unbind",value:function(){this.bind(null)}},{key:"getParameter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=(0,i.getKeyValue)(this.gl,e),(0,a.assert)(e);var r=(this.constructor.PARAMETERS||{})[e];if(r){var s=(0,n.isWebGL2)(this.gl);if(!((!("webgl2"in r)||s)&&(!("extension"in r)||this.gl.getExtension(r.extension)))){var o=r.webgl1,u="webgl2"in r?r.webgl2:r.webgl1;return s?u:o}}return this._getParameter(e,t)}},{key:"getParameters",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},r=t.parameters,a=t.keys,s=this.constructor.PARAMETERS||{},o=(0,n.isWebGL2)(this.gl),u={},l=r||Object.keys(s),h=!0,c=!1,d=void 0;try{for(var g,v=l[Symbol.iterator]();!(h=(g=v.next()).done);h=!0){var m=g.value,y=s[m];if(y&&(!("webgl2"in y)||o)&&(!("extension"in y)||this.gl.getExtension(y.extension))){var f=a?(0,i.getKey)(this.gl,m):m;u[f]=this.getParameter(m,e),a&&"GLenum"===y.type&&(u[f]=(0,i.getKey)(this.gl,u[f]))}}}catch(b){c=!0,d=b}finally{try{h||null==v.return||v.return()}finally{if(c)throw d}}return u}},{key:"setParameter",value:function(e,t){e=(0,i.getKeyValue)(this.gl,e),(0,a.assert)(e);var r=(this.constructor.PARAMETERS||{})[e];if(r){var s=(0,n.isWebGL2)(this.gl);if(!((!("webgl2"in r)||s)&&(!("extension"in r)||this.gl.getExtension(r.extension))))throw new Error("Parameter not available on this platform");"GLenum"===r.type&&(t=(0,i.getKeyValue)(t))}return this._setParameter(e,t),this}},{key:"setParameters",value:function(e){for(var t in e)this.setParameter(t,e[t]);return this}},{key:"stubRemovedMethods",value:function(e,t,n){return(0,a.stubRemovedMethods)(this,e,t,n)}},{key:"initialize",value:function(e){}},{key:"_createHandle",value:function(){throw new Error(o)}},{key:"_deleteHandle",value:function(){throw new Error(o)}},{key:"_bindHandle",value:function(){throw new Error(o)}},{key:"_getOptsFromHandle",value:function(){throw new Error(o)}},{key:"_getParameter",value:function(e,t){throw new Error(o)}},{key:"_setParameter",value:function(e,t){throw new Error(o)}},{key:"_context",value:function(){return this.gl.luma=this.gl.luma||{},this.gl.luma}},{key:"_addStats",value:function(){var e=this.constructor.name,t=r.lumaStats.get("Resource Counts");t.get("Resources Created").incrementCount(),t.get("".concat(e,"s Created")).incrementCount(),t.get("".concat(e,"s Active")).incrementCount()}},{key:"_removeStats",value:function(){var e=this.constructor.name;r.lumaStats.get("Resource Counts").get("".concat(e,"s Active")).decrementCount()}},{key:"_trackAllocatedMemory",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.constructor.name,n=r.lumaStats.get("Memory Usage");n.get("GPU Memory").addCount(e),n.get("".concat(t," Memory")).addCount(e),this.byteLength=e}},{key:"_trackDeallocatedMemory",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.constructor.name,t=r.lumaStats.get("Memory Usage");t.get("GPU Memory").subtractCount(this.byteLength),t.get("".concat(e," Memory")).subtractCount(this.byteLength),this.byteLength=0}},{key:"handle",get:function(){return this._handle}}]),s}();exports.default=u;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@luma.gl/gltools":"lAom","../init":"HGnm","../webgl-utils":"GZNE","../utils":"CgZv"}],"cs7m":[function(require,module,exports) {
"use strict";function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"b6xa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=r(require("@babel/runtime/helpers/esm/setPrototypeOf")),t=r(require("@babel/runtime/helpers/esm/isNativeReflectConstruct"));function r(e){return e&&e.__esModule?e:{default:e}}function u(r,l,n){return(0,t.default)()?exports.default=u=Reflect.construct:exports.default=u=function(t,r,u){var l=[null];l.push.apply(l,r);var n=new(Function.bind.apply(t,l));return u&&(0,e.default)(n,u.prototype),n},u.apply(null,arguments)}
},{"@babel/runtime/helpers/esm/setPrototypeOf":"N60M","@babel/runtime/helpers/esm/isNativeReflectConstruct":"cs7m"}],"OEzr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DEFAULT_ACCESSOR_VALUES=exports.default=void 0;var e=n(require("@babel/runtime/helpers/esm/construct")),t=n(require("@babel/runtime/helpers/esm/classCallCheck")),i=n(require("@babel/runtime/helpers/esm/createClass")),r=require("../webgl-utils"),s=require("../utils");function n(e){return e&&e.__esModule?e:{default:e}}var o={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1};exports.DEFAULT_ACCESSOR_VALUES=o;var d={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}},u=function(){function n(){var e=this;(0,t.default)(this,n);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];r.forEach(function(t){return e._assign(t)}),Object.freeze(this)}return(0,i.default)(n,null,[{key:"getBytesPerElement",value:function(e){return(0,r.getTypedArrayFromGLType)(e.type||5126).BYTES_PER_ELEMENT}},{key:"getBytesPerVertex",value:function(e){return(0,s.assert)(e.size),(0,r.getTypedArrayFromGLType)(e.type||5126).BYTES_PER_ELEMENT*e.size}},{key:"resolve",value:function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return(0,e.default)(n,[o].concat(i))}}]),(0,i.default)(n,[{key:"toString",value:function(){return JSON.stringify(this)}},{key:"_assign",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return void 0!==(e=(0,s.checkProps)("Accessor",e,d)).type&&(this.type=e.type,5124!==e.type&&5125!==e.type||(this.integer=!0)),void 0!==e.size&&(this.size=e.size),void 0!==e.offset&&(this.offset=e.offset),void 0!==e.stride&&(this.stride=e.stride),void 0!==e.normalized&&(this.normalized=e.normalized),void 0!==e.integer&&(this.integer=e.integer),void 0!==e.divisor&&(this.divisor=e.divisor),void 0!==e.buffer&&(this.buffer=e.buffer),void 0!==e.index&&("boolean"==typeof index?this.index=e.index?1:0:this.index=e.index),void 0!==e.instanced&&(this.divisor=e.instanced?1:0),void 0!==e.isInstanced&&(this.divisor=e.isInstanced?1:0),this}},{key:"BYTES_PER_ELEMENT",get:function(){return n.getBytesPerElement(this)}},{key:"BYTES_PER_VERTEX",get:function(){return n.getBytesPerVertex(this)}}]),n}();exports.default=u;
},{"@babel/runtime/helpers/esm/construct":"b6xa","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","../webgl-utils":"GZNE","../utils":"CgZv"}],"d4ii":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=c(require("@babel/runtime/helpers/esm/classCallCheck")),t=c(require("@babel/runtime/helpers/esm/createClass")),s=c(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),r=c(require("@babel/runtime/helpers/esm/getPrototypeOf")),a=c(require("@babel/runtime/helpers/esm/assertThisInitialized")),i=c(require("@babel/runtime/helpers/esm/inherits")),n=c(require("./resource")),u=c(require("./accessor")),l=require("../webgl-utils"),h=require("@luma.gl/gltools"),o=require("../utils");function c(e){return e&&e.__esModule?e:{default:e}}var d=10,f={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},g={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:f},b={removedProps:f},y=function(n){function c(t){var i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,e.default)(this,c),(i=(0,s.default)(this,(0,r.default)(c).call(this,t,n))).stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),i.target=n.target||(i.gl.webgl2?36662:34962),i.initialize(n),Object.seal((0,a.default)(i)),i}return(0,i.default)(c,n),(0,t.default)(c,[{key:"getElementCount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/u.default.getBytesPerElement(e))}},{key:"getVertexCount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/u.default.getBytesPerVertex(e))}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e=(0,o.checkProps)("Buffer",e,g),this.usage=e.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},e,e.accessor)),e.data?this._setData(e.data,e.offset,e.byteLength):this._setByteLength(e.byteLength||0),this}},{key:"setProps",value:function(e){return"accessor"in(e=(0,o.checkProps)("Buffer",e,b))&&this.setAccessor(e.accessor),this}},{key:"setAccessor",value:function(e){return delete(e=Object.assign({},e)).buffer,this.accessor=new u.default(e),this}},{key:"reallocate",value:function(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}},{key:"setData",value:function(e){return this.initialize(e)}},{key:"subData",value:function(e){ArrayBuffer.isView(e)&&(e={data:e});var t=e,s=t.data,r=t.offset,a=void 0===r?0:r,i=t.srcOffset,n=void 0===i?0:i,u=e.byteLength||e.length;(0,o.assert)(s);var h=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(h,this.handle),0!==n||void 0!==u?((0,l.assertWebGL2Context)(this.gl),this.gl.bufferSubData(this.target,a,s,n,u)):this.gl.bufferSubData(h,a,s),this.gl.bindBuffer(h,null),this.debugData=null,this._inferType(s),this}},{key:"copyData",value:function(e){var t=e.sourceBuffer,s=e.readOffset,r=void 0===s?0:s,a=e.writeOffset,i=void 0===a?0:a,n=e.size,u=this.gl;return(0,l.assertWebGL2Context)(u),u.bindBuffer(36662,t.handle),u.bindBuffer(36663,this.handle),u.copyBufferSubData(36662,36663,r,i,n),u.bindBuffer(36662,null),u.bindBuffer(36663,null),this.debugData=null,this}},{key:"getData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dstData,s=void 0===t?null:t,r=e.srcByteOffset,a=void 0===r?0:r,i=e.dstOffset,n=void 0===i?0:i,u=e.length,h=void 0===u?0:u;(0,l.assertWebGL2Context)(this.gl);var c,d,f=(0,l.getTypedArrayFromGLType)(this.accessor.type||5126,{clamped:!1}),g=this._getAvailableElementCount(a),b=n;s?c=(d=s.length)-b:d=b+(c=Math.min(g,h||g));var y=Math.min(g,c);return h=h||y,(0,o.assert)(h<=y),s=s||new f(d),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,a,s,n,h),this.gl.bindBuffer(36662,null),s}},{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,s=void 0===t?this.target:t,r=e.index,a=void 0===r?this.accessor&&this.accessor.index:r,i=e.offset,n=void 0===i?0:i,u=e.size;return 35345===s||35982===s?void 0!==u?this.gl.bindBufferRange(s,a,this.handle,n,u):((0,o.assert)(0===n),this.gl.bindBufferBase(s,a,this.handle)):this.gl.bindBuffer(s,this.handle),this}},{key:"unbind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,s=void 0===t?this.target:t,r=e.index,a=void 0===r?this.accessor&&this.accessor.index:r;return 35345===s||35982===s?this.gl.bindBufferBase(s,a,null):this.gl.bindBuffer(s,null),this}},{key:"getDebugData",value:function(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(d,this.byteLength)}),{data:this.debugData,changed:!0})}},{key:"invalidateDebugData",value:function(){this.debugData=null}},{key:"_setData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.byteLength+t;(0,o.assert)(ArrayBuffer.isView(e)),this._trackDeallocatedMemory();var r=this._getTarget();this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,s,this.usage),this.gl.bufferSubData(r,t,e),this.gl.bindBuffer(r,null),this.debugData=e.slice(0,d),this.bytesUsed=s,this._trackAllocatedMemory(s);var a=(0,l.getGLTypeFromTypedArray)(e);return(0,o.assert)(a),this.setAccessor(new u.default(this.accessor,{type:a})),this}},{key:"_setByteLength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;(0,o.assert)(e>=0),this._trackDeallocatedMemory();var s=e;0===e&&(s=new Float32Array(0));var r=this._getTarget();return this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,s,t),this.gl.bindBuffer(r,null),this.usage=t,this.debugData=null,this.bytesUsed=e,this._trackAllocatedMemory(e),this}},{key:"_getTarget",value:function(){return this.gl.webgl2?36663:this.target}},{key:"_getAvailableElementCount",value:function(e){var t=e/(0,l.getTypedArrayFromGLType)(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-t}},{key:"_inferType",value:function(e){this.accessor.type||this.setAccessor(new u.default(this.accessor,{type:(0,l.getGLTypeFromTypedArray)(e)}))}},{key:"_createHandle",value:function(){return this.gl.createBuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}},{key:"_getParameter",value:function(e){this.gl.bindBuffer(this.target,this.handle);var t=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),t}},{key:"setByteLength",value:function(e){return h.log.deprecated("setByteLength","reallocate")(),this.reallocate(e)}},{key:"updateAccessor",value:function(e){return h.log.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new u.default(this.accessor,e),this}},{key:"type",get:function(){return h.log.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}},{key:"bytes",get:function(){return h.log.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}}]),c}(n.default);exports.default=y;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/assertThisInitialized":"Rs9H","@babel/runtime/helpers/esm/inherits":"RnSb","./resource":"DwD3","./accessor":"OEzr","../webgl-utils":"GZNE","@luma.gl/gltools":"lAom","../utils":"CgZv"}],"PH5D":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isFormatSupported=s,exports.isLinearFilteringSupported=i,exports.TYPE_SIZES=exports.DATA_FORMAT_CHANNELS=exports.TEXTURE_FORMATS=void 0;var t,e,a,r=u(require("@babel/runtime/helpers/esm/defineProperty")),l=require("@luma.gl/gltools");function u(t){return t&&t.__esModule?t:{default:t}}var d=(t={},(0,r.default)(t,6407,{dataFormat:6407,types:[5121,33635]}),(0,r.default)(t,6408,{dataFormat:6408,types:[5121,32819,32820]}),(0,r.default)(t,6406,{dataFormat:6406,types:[5121]}),(0,r.default)(t,6409,{dataFormat:6409,types:[5121]}),(0,r.default)(t,6410,{dataFormat:6410,types:[5121]}),(0,r.default)(t,33326,{dataFormat:6403,types:[5126],gl2:!0}),(0,r.default)(t,33328,{dataFormat:33319,types:[5126],gl2:!0}),(0,r.default)(t,34837,{dataFormat:6407,types:[5126],gl2:!0}),(0,r.default)(t,34836,{dataFormat:6408,types:[5126],gl2:!0}),t);exports.TEXTURE_FORMATS=d;var f=(e={},(0,r.default)(e,6403,1),(0,r.default)(e,36244,1),(0,r.default)(e,33319,2),(0,r.default)(e,33320,2),(0,r.default)(e,6407,3),(0,r.default)(e,36248,3),(0,r.default)(e,6408,4),(0,r.default)(e,36249,4),(0,r.default)(e,6402,1),(0,r.default)(e,34041,1),(0,r.default)(e,6406,1),(0,r.default)(e,6409,1),(0,r.default)(e,6410,2),e);exports.DATA_FORMAT_CHANNELS=f;var o=(a={},(0,r.default)(a,5126,4),(0,r.default)(a,5125,4),(0,r.default)(a,5124,4),(0,r.default)(a,5123,2),(0,r.default)(a,5122,2),(0,r.default)(a,5131,2),(0,r.default)(a,5120,1),(0,r.default)(a,5121,1),a);function s(t,e){var a=d[e];if(!a)return!1;if(void 0===a.gl1&&void 0===a.gl2)return!0;var r=(0,l.isWebGL2)(t)&&a.gl2||a.gl1;return"string"==typeof r?t.getExtension(r):r}function i(t,e){var a=d[e];switch(a&&a.types[0]){case 5126:return t.getExtension("OES_texture_float_linear");case 5131:return t.getExtension("OES_texture_half_float_linear");default:return!0}}exports.TYPE_SIZES=o;
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","@luma.gl/gltools":"lAom"}],"GqKp":[function(require,module,exports) {


"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=g(require("@babel/runtime/helpers/esm/classCallCheck")),t=g(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),i=g(require("@babel/runtime/helpers/esm/getPrototypeOf")),a=g(require("@babel/runtime/helpers/esm/createClass")),r=g(require("@babel/runtime/helpers/esm/inherits")),s=g(require("./resource")),h=g(require("./buffer")),d=require("./texture-formats"),o=require("@luma.gl/gltools"),n=require("probe.gl/env"),u=require("../webgl-utils"),l=require("../utils");function g(e){return e&&e.__esModule?e:{default:e}}var m=[9729,9728],p=n.global.WebGLBuffer||function(){},c=function(s){function n(a,r){var s;(0,e.default)(this,n);var h=r.id,d=void 0===h?(0,l.uid)("texture"):h,o=r.handle,u=r.target;return(s=(0,t.default)(this,(0,i.default)(n).call(this,a,{id:d,handle:o}))).target=u,s.textureUnit=void 0,s.loaded=!1,s.width=void 0,s.height=void 0,s.depth=void 0,s.format=void 0,s.type=void 0,s.dataFormat=void 0,s.border=void 0,s.textureUnit=void 0,s.mipmaps=void 0,s}return(0,r.default)(n,s),(0,a.default)(n,null,[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.format,a=t.linearFiltering,r=!0;return i&&(r=(r=r&&(0,d.isFormatSupported)(e,i))&&(!a||(0,d.isLinearFilteringSupported)(e,i))),r}}]),(0,a.default)(n,[{key:"toString",value:function(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}},{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.data;if(i instanceof Promise)return i.then(function(i){return e.initialize(Object.assign({},t,{pixels:i,data:i}))}),this;var a=t.pixels,r=void 0===a?null:a,s=t.format,h=void 0===s?6408:s,d=t.border,n=void 0===d?0:d,u=t.recreate,l=void 0!==u&&u,g=t.parameters,m=void 0===g?{}:g,p=t.pixelStore,c=void 0===p?{}:p,f=t.textureUnit,v=void 0===f?void 0:f,b=t.mipmaps,T=void 0===b||b;i||(i=r);var y=t.width,x=t.height,w=t.dataFormat,_=t.type,P=t.depth,k=void 0===P?0:P,F=this._deduceParameters({format:h,type:_,dataFormat:w,compressed:!1,data:i,width:y,height:x});return y=F.width,x=F.height,w=F.dataFormat,_=F.type,this.width=y,this.height=x,this.depth=k,this.format=h,this.type=_,this.dataFormat=w,this.border=n,this.textureUnit=v,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),T&&this._isNPOT()&&(o.log.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),T=!1,this._updateForNPOT(m)),this.mipmaps=T,this.setImageData({data:i,width:y,height:x,depth:k,format:h,type:_,dataFormat:w,border:n,mipmaps:T,parameters:c}),T&&this.generateMipmap(),this.setParameters(m),l&&(this.data=i),this}},{key:"resize",value:function(e){var t=e.height,i=e.width,a=e.mipmaps,r=void 0!==a&&a;return i!==this.width||t!==this.height?this.initialize({width:i,height:t,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:r}):this}},{key:"generateMipmap",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isNPOT()?(o.log.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),(0,o.withParameters)(this.gl,t,function(){e.gl.generateMipmap(e.target)}),this.gl.bindTexture(this.target,null),this)}},{key:"setImageData",value:function(e){this._trackDeallocatedMemory("Texture");var t=e.target,i=void 0===t?this.target:t,a=e.pixels,r=void 0===a?null:a,s=e.level,h=void 0===s?0:s,n=e.format,g=void 0===n?this.format:n,m=e.border,p=void 0===m?this.border:m,c=e.offset,f=void 0===c?0:c,v=e.parameters,b=void 0===v?{}:v,T=e.data,y=void 0===T?null:T,x=e.type,w=void 0===x?this.type:x,_=e.width,P=void 0===_?this.width:_,k=e.height,F=void 0===k?this.height:k,E=e.dataFormat,I=void 0===E?this.dataFormat:E,D=e.compressed,L=void 0!==D&&D;y||(y=r);var M=this._deduceParameters({format:g,type:w,dataFormat:I,compressed:L,data:y,width:P,height:F});w=M.type,I=M.dataFormat,L=M.compressed,P=M.width,F=M.height;var S=this.gl;S.bindTexture(this.target,this.handle);var O,U=this._getDataType({data:y,compressed:L});if(y=U.data,O=U.dataType,(0,o.withParameters)(this.gl,b,function(){switch(O){case"null":S.texImage2D(i,h,g,P,F,p,I,w,y);break;case"typed-array":S.texImage2D(i,h,g,P,F,p,I,w,y,f);break;case"buffer":(0,u.assertWebGL2Context)(S),S.bindBuffer(35052,y.handle||y),S.texImage2D(i,h,g,P,F,p,I,w,f),S.bindBuffer(35052,null);break;case"browser-object":(0,o.isWebGL2)(S)?S.texImage2D(i,h,g,P,F,p,I,w,y):S.texImage2D(i,h,g,I,w,y);break;case"compressed":S.compressedTexImage2D(i,h,g,P,F,p,y);break;default:(0,l.assert)(!1,"Unknown image data type")}}),y&&y.byteLength)this._trackAllocatedMemory(y.byteLength,"Texture");else{var A=d.DATA_FORMAT_CHANNELS[this.dataFormat]||4,R=d.TYPE_SIZES[this.type]||1;this._trackAllocatedMemory(this.width*this.height*A*R,"Texture")}return this.loaded=!0,this}},{key:"setSubImageData",value:function(e){var t=this,i=e.target,a=void 0===i?this.target:i,r=e.pixels,s=void 0===r?null:r,d=e.data,n=void 0===d?null:d,g=e.x,m=void 0===g?0:g,c=e.y,f=void 0===c?0:c,v=e.width,b=void 0===v?this.width:v,T=e.height,y=void 0===T?this.height:T,x=e.level,w=void 0===x?0:x,_=e.format,P=void 0===_?this.format:_,k=e.type,F=void 0===k?this.type:k,E=e.dataFormat,I=void 0===E?this.dataFormat:E,D=e.compressed,L=void 0!==D&&D,M=e.offset,S=void 0===M?0:M,O=e.border,U=(void 0===O&&this.border,e.parameters),A=void 0===U?{}:U,R=this._deduceParameters({format:P,type:F,dataFormat:I,compressed:L,data:n,width:b,height:y});if(F=R.type,I=R.dataFormat,L=R.compressed,b=R.width,y=R.height,(0,l.assert)(0===this.depth,"texSubImage not supported for 3D textures"),n||(n=s),n&&n.data){var N=n;n=N.data,b=N.shape[0],y=N.shape[1]}n instanceof h.default&&(n=n.handle),this.gl.bindTexture(this.target,this.handle),(0,o.withParameters)(this.gl,A,function(){L?t.gl.compressedTexSubImage2D(a,w,m,f,b,y,P,n):null===n?t.gl.texSubImage2D(a,w,m,f,b,y,I,F,null):ArrayBuffer.isView(n)?t.gl.texSubImage2D(a,w,m,f,b,y,I,F,n,S):n instanceof p?((0,u.assertWebGL2Context)(t.gl),t.gl.bindBuffer(35052,n),t.gl.texSubImage2D(a,w,m,f,b,y,I,F,S),t.gl.bindBuffer(35052,null)):(0,o.isWebGL2)(t.gl)?t.gl.texSubImage2D(a,w,m,f,b,y,I,F,n):t.gl.texSubImage2D(a,w,m,f,I,F,n)}),this.gl.bindTexture(this.target,null)}},{key:"copyFramebuffer",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return o.log.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}},{key:"getActiveUnit",value:function(){return this.gl.getParameter(34016)-33984}},{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit,t=this.gl;return void 0!==e&&(this.textureUnit=e,t.activeTexture(33984+e)),t.bindTexture(this.target,this.handle),e}},{key:"unbind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit,t=this.gl;return void 0!==e&&(this.textureUnit=e,t.activeTexture(33984+e)),t.bindTexture(this.target,null),e}},{key:"_getDataType",value:function(e){var t=e.data,i=e.compressed;return void 0!==i&&i?{data:t,dataType:"compressed"}:null===t?{data:t,dataType:"null"}:ArrayBuffer.isView(t)?{data:t,dataType:"typed-array"}:t instanceof h.default?{data:t.handle,dataType:"buffer"}:t instanceof p?{data:t,dataType:"buffer"}:{data:t,dataType:"browser-object"}}},{key:"_deduceParameters",value:function(e){var t=e.format,i=e.data,a=e.width,r=e.height,s=e.dataFormat,h=e.type,o=e.compressed,n=d.TEXTURE_FORMATS[t];s=s||n&&n.dataFormat,h=h||n&&n.types[0],o=o||n&&n.compressed;var u=this._deduceImageSize(i,a,r);return{dataFormat:s,type:h,compressed:o,width:a=u.width,height:r=u.height,format:t,data:i}}},{key:"_deduceImageSize",value:function(e,t,i){var a;return a="undefined"!=typeof ImageData&&e instanceof ImageData?{width:e.width,height:e.height}:"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement?{width:e.naturalWidth,height:e.naturalHeight}:"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement?{width:e.width,height:e.height}:"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?{width:e.width,height:e.height}:"undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement?{width:e.videoWidth,height:e.videoHeight}:e?{width:t,height:i}:{width:t>=0?t:1,height:i>=0?i:1},(0,l.assert)(a,"Could not deduced texture size"),(0,l.assert)(void 0===t||a.width===t,"Deduced texture width does not match supplied width"),(0,l.assert)(void 0===i||a.height===i,"Deduced texture height does not match supplied height"),a}},{key:"_createHandle",value:function(){return this.gl.createTexture()}},{key:"_deleteHandle",value:function(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}},{key:"_getParameter",value:function(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);var t=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),t}}},{key:"_setParameter",value:function(e,t){switch(this.gl.bindTexture(this.target,this.handle),t=this._getNPOTParam(e,t),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,t);break;case 4096:case 4097:(0,l.assert)(!1);break;default:this.gl.texParameteri(this.target,e,t)}return this.gl.bindTexture(this.target,null),this}},{key:"_isNPOT",value:function(){return!(0,o.isWebGL2)(this.gl)&&(!(!this.width||!this.height)&&(!(0,l.isPowerOfTwo)(this.width)||!(0,l.isPowerOfTwo)(this.height)))}},{key:"_updateForNPOT",value:function(e){void 0===e[this.gl.TEXTURE_MIN_FILTER]&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===e[this.gl.TEXTURE_WRAP_S]&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===e[this.gl.TEXTURE_WRAP_T]&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}},{key:"_getNPOTParam",value:function(e,t){if(this._isNPOT())switch(e){case 10241:-1===m.indexOf(t)&&(t=9729);break;case 10242:case 10243:33071!==t&&(t=33071)}return t}}]),n}(s.default);exports.default=c;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","./resource":"DwD3","./buffer":"d4ii","./texture-formats":"PH5D","@luma.gl/gltools":"lAom","probe.gl/env":"d3vq","../webgl-utils":"GZNE","../utils":"CgZv"}],"QQ37":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setPathPrefix=t,exports.loadFile=n,exports.loadImage=o;var r=require("../utils"),e="";function t(r){e=r}function n(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,r.assert)("string"==typeof t),t=e+t;var o=n.dataType||"text";return fetch(t,n).then(function(r){return r[o]()})}function o(t,n){return(0,r.assert)("string"==typeof t),t=e+t,new Promise(function(r,e){try{var o=new Image;o.onload=function(){return r(o)},o.onerror=function(){return e(new Error("Could not load image ".concat(t,".")))},o.crossOrigin=n&&n.crossOrigin||"anonymous",o.src=t}catch(i){e(i)}})}
},{"../utils":"CgZv"}],"YE27":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("@babel/runtime/helpers/esm/classCallCheck")),t=o(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),r=o(require("@babel/runtime/helpers/esm/getPrototypeOf")),i=o(require("@babel/runtime/helpers/esm/assertThisInitialized")),s=o(require("@babel/runtime/helpers/esm/createClass")),a=o(require("@babel/runtime/helpers/esm/inherits")),u=o(require("./texture")),l=require("../webgl-utils"),n=require("../utils/load-file");function o(e){return e&&e.__esModule?e:{default:e}}var d=function(o){function d(s){var a,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,e.default)(this,d),(0,l.assertWebGLContext)(s),(u instanceof Promise||"string"==typeof u)&&(u={data:u}),"string"==typeof u.data&&(u=Object.assign({},u,{data:(0,n.loadImage)(u.data)})),(a=(0,t.default)(this,(0,r.default)(d).call(this,s,Object.assign({},u,{target:3553})))).initialize(u),Object.seal((0,i.default)(a)),a}return(0,a.default)(d,o),(0,s.default)(d,null,[{key:"isSupported",value:function(e,t){return u.default.isSupported(e,t)}}]),d}(u.default);exports.default=d;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/assertThisInitialized":"Rs9H","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","./texture":"GqKp","../webgl-utils":"GZNE","../utils/load-file":"QQ37"}],"eOjF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=h(require("@babel/runtime/regenerator")),t=h(require("@babel/runtime/helpers/esm/asyncToGenerator")),a=h(require("@babel/runtime/helpers/esm/classCallCheck")),r=h(require("@babel/runtime/helpers/esm/createClass")),i=h(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),s=h(require("@babel/runtime/helpers/esm/getPrototypeOf")),n=h(require("@babel/runtime/helpers/esm/assertThisInitialized")),u=h(require("@babel/runtime/helpers/esm/inherits")),l=require("@luma.gl/gltools"),o=h(require("./texture")),d=require("../webgl-utils");function h(e){return e&&e.__esModule?e:{default:e}}var m=[34069,34070,34071,34072,34073,34074],p=function(o){function h(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,a.default)(this,h),(0,d.assertWebGLContext)(e),(t=(0,i.default)(this,(0,s.default)(h).call(this,e,Object.assign({},r,{target:34067})))).initialize(r),Object.seal((0,n.default)(t)),t}return(0,u.default)(h,o),(0,r.default)(h,[{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.mipmaps,r=void 0===a||a,i=t.parameters,s=void 0===i?{}:i;this.opts=t,this.setCubeMapImageData(t).then(function(){e.loaded=!0,r&&e.generateMipmap(t),e.setParameters(s)})}},{key:"subImage",value:function(e){var t=e.face,a=e.data,r=e.x,i=void 0===r?0:r,s=e.y,n=void 0===s?0:s,u=e.mipmapLevel,l=void 0===u?0:u;return this._subImage({target:t,data:a,x:i,y:n,mipmapLevel:l})}},{key:"setCubeMapImageData",value:function(){var a=(0,t.default)(e.default.mark(function t(a){var r,i,s,n,u,o,d,h,p,c,f,b,v,g=this;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.width,i=a.height,s=a.pixels,n=a.data,u=a.border,o=void 0===u?0:u,d=a.format,h=void 0===d?6408:d,p=a.type,c=void 0===p?5121:p,f=this.gl,b=s||n,e.next=5,Promise.all(m.map(function(e){var t=b[e];return Promise.all(Array.isArray(t)?t:[t])}));case 5:v=e.sent,this.bind(),m.forEach(function(e,t){v[t].length>1&&!1!==g.opts.mipmaps&&l.log.warn("".concat(g.id," has mipmap and multiple LODs."))(),v[t].forEach(function(t,a){r&&i?f.texImage2D(e,a,h,r,i,o,h,c,t):f.texImage2D(e,a,h,h,c,t)})}),this.unbind();case 9:case"end":return e.stop()}},t,this)}));return function(e){return a.apply(this,arguments)}}()},{key:"setImageDataForFace",value:function(e){var t=this,a=e.face,r=e.width,i=e.height,s=e.pixels,n=e.data,u=e.border,l=void 0===u?0:u,o=e.format,d=void 0===o?6408:o,h=e.type,m=void 0===h?5121:h,p=this.gl,c=s||n;return this.bind(),c instanceof Promise?c.then(function(r){return t.setImageDataForFace(Object.assign({},e,{face:a,data:r,pixels:r}))}):this.width||this.height?p.texImage2D(a,0,d,r,i,l,d,m,c):p.texImage2D(a,0,d,d,m,c),this}}]),h}(o.default);exports.default=p,p.FACES=m;
},{"@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/assertThisInitialized":"Rs9H","@babel/runtime/helpers/esm/inherits":"RnSb","@luma.gl/gltools":"lAom","./texture":"GqKp","../webgl-utils":"GZNE"}],"mmMI":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("@babel/runtime/helpers/esm/classCallCheck")),t=n(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),r=n(require("@babel/runtime/helpers/esm/getPrototypeOf")),i=n(require("@babel/runtime/helpers/esm/assertThisInitialized")),a=n(require("@babel/runtime/helpers/esm/createClass")),l=n(require("@babel/runtime/helpers/esm/inherits")),s=require("@luma.gl/gltools"),u=require("../webgl-utils"),d=n(require("./texture")),o=require("./texture-formats"),h=n(require("./buffer"));function n(e){return e&&e.__esModule?e:{default:e}}var f=function(d){function n(a){var l,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,e.default)(this,n),(0,u.assertWebGL2Context)(a),s=Object.assign({depth:1},s,{target:32879,unpackFlipY:!1}),(l=(0,t.default)(this,(0,r.default)(n).call(this,a,s))).initialize(s),Object.seal((0,i.default)(l)),l}return(0,l.default)(n,d),(0,a.default)(n,null,[{key:"isSupported",value:function(e){return(0,s.isWebGL2)(e)}}]),(0,a.default)(n,[{key:"setImageData",value:function(e){var t=this,r=e.level,i=void 0===r?0:r,a=e.dataFormat,l=void 0===a?6408:a,u=e.width,d=e.height,n=e.depth,f=void 0===n?1:n,b=e.border,m=void 0===b?0:b,c=e.format,g=e.type,p=void 0===g?5121:g,v=e.offset,x=void 0===v?0:v,y=e.data,q=e.parameters,_=void 0===q?{}:q;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),(0,s.withParameters)(this.gl,_,function(){ArrayBuffer.isView(y)&&t.gl.texImage3D(t.target,i,l,u,d,f,m,c,p,y),y instanceof h.default&&(t.gl.bindBuffer(35052,y.handle),t.gl.texImage3D(t.target,i,l,u,d,f,m,c,p,x))}),y&&y.byteLength)this._trackAllocatedMemory(y.byteLength,"Texture");else{var T=o.DATA_FORMAT_CHANNELS[this.dataFormat]||4,k=o.TYPE_SIZES[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*T*k,"Texture")}return this.loaded=!0,this}}]),n}(d.default);exports.default=f;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/assertThisInitialized":"Rs9H","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","@luma.gl/gltools":"lAom","../webgl-utils":"GZNE","./texture":"GqKp","./texture-formats":"PH5D","./buffer":"d4ii"}],"OGhC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=t(require("@babel/runtime/helpers/esm/getPrototypeOf"));function t(e){return e&&e.__esModule?e:{default:e}}function r(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&null!==(t=(0,e.default)(t)););return t}
},{"@babel/runtime/helpers/esm/getPrototypeOf":"cYjN"}],"KGqu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=t(require("@babel/runtime/helpers/esm/superPropBase"));function t(e){return e&&e.__esModule?e:{default:e}}function r(t,u,l){return"undefined"!=typeof Reflect&&Reflect.get?exports.default=r=Reflect.get:exports.default=r=function(t,r,u){var l=(0,e.default)(t,r);if(l){var f=Object.getOwnPropertyDescriptor(l,r);return f.get?f.get.call(u):f.value}},r(t,u,l||t)}
},{"@babel/runtime/helpers/esm/superPropBase":"OGhC"}],"miHD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var p,l=e(require("@babel/runtime/helpers/esm/defineProperty"));function e(p){return p&&p.__esModule?p:{default:p}}var t="EXT_color_buffer_float",u=(p={},(0,l.default)(p,33189,{bpp:2}),(0,l.default)(p,33190,{gl2:!0,bpp:3}),(0,l.default)(p,36012,{gl2:!0,bpp:4}),(0,l.default)(p,36168,{bpp:1}),(0,l.default)(p,34041,{bpp:4}),(0,l.default)(p,35056,{gl2:!0,bpp:4}),(0,l.default)(p,36013,{gl2:!0,bpp:5}),(0,l.default)(p,32854,{bpp:2}),(0,l.default)(p,36194,{bpp:2}),(0,l.default)(p,32855,{bpp:2}),(0,l.default)(p,33321,{gl2:!0,bpp:1}),(0,l.default)(p,33330,{gl2:!0,bpp:1}),(0,l.default)(p,33329,{gl2:!0,bpp:1}),(0,l.default)(p,33332,{gl2:!0,bpp:2}),(0,l.default)(p,33331,{gl2:!0,bpp:2}),(0,l.default)(p,33334,{gl2:!0,bpp:4}),(0,l.default)(p,33333,{gl2:!0,bpp:4}),(0,l.default)(p,33323,{gl2:!0,bpp:2}),(0,l.default)(p,33336,{gl2:!0,bpp:2}),(0,l.default)(p,33335,{gl2:!0,bpp:2}),(0,l.default)(p,33338,{gl2:!0,bpp:4}),(0,l.default)(p,33337,{gl2:!0,bpp:4}),(0,l.default)(p,33340,{gl2:!0,bpp:8}),(0,l.default)(p,33339,{gl2:!0,bpp:8}),(0,l.default)(p,32849,{gl2:!0,bpp:3}),(0,l.default)(p,32856,{gl2:!0,bpp:4}),(0,l.default)(p,32857,{gl2:!0,bpp:4}),(0,l.default)(p,36220,{gl2:!0,bpp:4}),(0,l.default)(p,36238,{gl2:!0,bpp:4}),(0,l.default)(p,36975,{gl2:!0,bpp:4}),(0,l.default)(p,36214,{gl2:!0,bpp:8}),(0,l.default)(p,36232,{gl2:!0,bpp:8}),(0,l.default)(p,36226,{gl2:!0,bpp:16}),(0,l.default)(p,36208,{gl2:!0,bpp:16}),(0,l.default)(p,33325,{gl2:t,bpp:2}),(0,l.default)(p,33327,{gl2:t,bpp:4}),(0,l.default)(p,34842,{gl2:t,bpp:8}),(0,l.default)(p,33326,{gl2:t,bpp:4}),(0,l.default)(p,33328,{gl2:t,bpp:8}),(0,l.default)(p,34836,{gl2:t,bpp:16}),(0,l.default)(p,35898,{gl2:t,bpp:4}),p);exports.default=u;
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3"}],"baET":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=f(require("@babel/runtime/helpers/esm/classCallCheck")),t=f(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),r=f(require("@babel/runtime/helpers/esm/getPrototypeOf")),i=f(require("@babel/runtime/helpers/esm/assertThisInitialized")),a=f(require("@babel/runtime/helpers/esm/createClass")),s=f(require("@babel/runtime/helpers/esm/inherits")),l=f(require("./resource")),u=f(require("./renderbuffer-formats")),n=require("@luma.gl/gltools"),h=require("../utils");function f(e){return e&&e.__esModule?e:{default:e}}function o(e,t,r){var i=r[t];if(!i)return!1;var a=(0,n.isWebGL2)(e)&&i.gl2||i.gl1;return"string"==typeof a?e.getExtension(a):a}var d=function(l){function f(a){var s,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,e.default)(this,f),(s=(0,t.default)(this,(0,r.default)(f).call(this,a,l))).initialize(l),Object.seal((0,i.default)(s)),s}return(0,s.default)(f,l),(0,a.default)(f,null,[{key:"isSupported",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{format:null}).format;return!t||o(e,t,u.default)}},{key:"getSamplesForFormat",value:function(e,t){var r=t.format;return e.getInternalformatParameter(36161,r,32937)}}]),(0,a.default)(f,[{key:"initialize",value:function(e){var t=e.format,r=e.width,i=void 0===r?1:r,a=e.height,s=void 0===a?1:a,l=e.samples,f=void 0===l?0:l;return(0,h.assert)(t,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),0!==f&&(0,n.isWebGL2)(this.gl)?this.gl.renderbufferStorageMultisample(36161,f,t,i,s):this.gl.renderbufferStorage(36161,t,i,s),this.format=t,this.width=i,this.height=s,this.samples=f,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*u.default[this.format].bpp),this}},{key:"resize",value:function(e){var t=e.width,r=e.height;return t!==this.width||r!==this.height?this.initialize({width:t,height:r,format:this.format,samples:this.samples}):this}},{key:"_createHandle",value:function(){return this.gl.createRenderbuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}},{key:"_bindHandle",value:function(e){this.gl.bindRenderbuffer(36161,e)}},{key:"_syncHandle",value:function(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}},{key:"_getParameter",value:function(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}}]),f}(l.default);exports.default=d;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/assertThisInitialized":"Rs9H","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","./resource":"DwD3","./renderbuffer-formats":"miHD","@luma.gl/gltools":"lAom","../utils":"CgZv"}],"ztYM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clear=d,exports.clearBuffer=b;var e=t(require("@babel/runtime/helpers/esm/slicedToArray")),r=require("@luma.gl/gltools"),a=require("../webgl-utils"),l=require("../utils");function t(e){return e&&e.__esModule?e:{default:e}}var u=256,f=1024,i=16384,c=6144,s=6145,o=6146,n=34041,v="clear: bad arguments";function d(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=a.framebuffer,c=void 0===t?null:t,s=a.color,o=void 0===s?null:s,n=a.depth,d=void 0===n?null:n,b=a.stencil,m=void 0===b?null:b,h={};c&&(h.framebuffer=c);var B=0;o&&(B|=i,!0!==o&&(h.clearColor=o)),d&&(B|=u,!0!==d&&(h.clearDepth=d)),m&&(B|=f,!0!==d&&(h.clearStencil=d)),(0,l.assert)(0!==B,v),(0,r.withParameters)(e,h,function(){e.clear(B)})}function b(t){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},f=u.framebuffer,i=void 0===f?null:f,d=u.buffer,b=void 0===d?c:d,m=u.drawBuffer,h=void 0===m?0:m,B=u.value,p=void 0===B?[0,0,0,0]:B;(0,a.assertWebGL2Context)(t),(0,r.withParameters)(t,{framebuffer:i},function(){switch(b){case c:switch(p.constructor){case Int32Array:t.clearBufferiv(b,h,p);break;case Uint32Array:t.clearBufferuiv(b,h,p);break;case Float32Array:default:t.clearBufferfv(b,h,p)}break;case s:t.clearBufferfv(s,0,[p]);break;case o:t.clearBufferiv(o,0,[p]);break;case n:var r=(0,e.default)(p,2),a=r[0],u=r[1];t.clearBufferfi(n,0,a,u);break;default:(0,l.assert)(!1,v)}})}
},{"@babel/runtime/helpers/esm/slicedToArray":"TBeo","@luma.gl/gltools":"lAom","../webgl-utils":"GZNE","../utils":"CgZv"}],"BCIn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.glFormatToComponents=r,exports.glTypeToBytes=s;var e=require("../utils");function r(r){switch(r){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return(0,e.assert)(!1),0}}function s(r){switch(r){case 5121:return 1;case 33635:case 32819:case 32820:return 2;case 5126:return 4;default:return(0,e.assert)(!1),0}}
},{"../utils":"CgZv"}],"DmZq":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.readPixelsToArray=s,exports.readPixelsToBuffer=l,exports.copyToDataUrl=c,exports.copyToImage=g,exports.copyToTexture=m,exports.blit=v;var e=n(require("./buffer")),r=n(require("./framebuffer")),t=n(require("./texture")),a=require("@luma.gl/gltools"),i=require("../webgl-utils"),o=require("../webgl-utils/typed-array-utils"),u=require("../webgl-utils/format-utils"),d=require("../webgl-utils/texture-utils"),f=require("../utils");function n(e){return e&&e.__esModule?e:{default:e}}function s(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=r.sourceX,a=void 0===t?0:t,i=r.sourceY,u=void 0===i?0:i,d=r.sourceFormat,n=void 0===d?6408:d,s=r.sourceAttachment,l=void 0===s?36064:s,c=r.target,g=void 0===c?null:c,m=r.sourceWidth,v=r.sourceHeight,p=r.sourceType,F=h(e),y=F.framebuffer,x=F.deleteFramebuffer;(0,f.assert)(y);var w=y.gl,T=y.handle,A=y.attachments;m=m||y.width,v=v||y.height,36064===l&&null===T&&(l=1028),(0,f.assert)(A[l]),g=b(g,p=p||A[l].type,n,m,v),p=p||(0,o.getGLTypeFromTypedArray)(g);var I=w.bindFramebuffer(36160,T);return w.readPixels(a,u,m,v,n,p,g),w.bindFramebuffer(36160,I||null),x&&y.delete(),g}function l(r,t){var o=t.sourceX,d=void 0===o?0:o,n=t.sourceY,s=void 0===n?0:n,l=t.sourceFormat,c=void 0===l?6408:l,g=t.target,m=void 0===g?null:g,v=t.targetByteOffset,b=void 0===v?0:v,p=t.sourceWidth,F=t.sourceHeight,y=t.sourceType,x=h(r),w=x.framebuffer,T=x.deleteFramebuffer;(0,f.assert)(w);var A=w.gl;if(p=p||w.width,F=F||w.height,(0,i.assertWebGL2Context)(A),y=y||(m?m.type:5121),!m){var I=(0,u.glFormatToComponents)(c),q=(0,u.glTypeToBytes)(y),B=b+p*F*I*q;m=new e.default(A,{byteLength:B,accessor:{type:y,size:I}})}return m.bind({target:35051}),(0,a.withParameters)(A,{framebuffer:w},function(){A.readPixels(d,s,p,F,c,y,b)}),m.unbind({target:35051}),T&&w.delete(),m}function c(e){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=r.sourceAttachment,a=void 0===t?36064:t,o=r.targetMaxHeight,u=void 0===o?Number.MAX_SAFE_INTEGER:o,d=s(e,{sourceAttachment:a}),f=e.width,n=e.height;n>u;){var l=(0,i.scalePixels)({data:d,width:f,height:n});d=l.data,f=l.width,n=l.height}(0,i.flipRows)({data:d,width:f,height:n});var c=document.createElement("canvas");c.width=f,c.height=n;var g=c.getContext("2d"),m=g.createImageData(f,n);return m.data.set(d),g.putImageData(m,0,0),c.toDataURL()}function g(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=r.sourceAttachment,a=void 0===t?36064:t,i=r.targetImage,o=void 0===i?null:i,u=c(e,{sourceAttachment:a});return(o=o||new Image).src=u,o}function m(e,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=a.sourceX,o=void 0===i?0:i,u=a.sourceY,d=void 0===u?0:u,n=a.targetX,s=a.targetY,l=a.targetZ,c=a.targetMipmaplevel,g=void 0===c?0:c,m=a.targetInternalFormat,v=void 0===m?6408:m,b=a.width,p=a.height,F=h(e),y=F.framebuffer,x=F.deleteFramebuffer;(0,f.assert)(y);var w=y.gl,T=y.handle,A=void 0!==n||void 0!==s||void 0!==l;n=n||0,s=s||0,l=l||0;var I=w.bindFramebuffer(36160,T);(0,f.assert)(r);var q=null;if(r instanceof t.default&&(q=r,b=Number.isFinite(b)?b:q.width,p=Number.isFinite(p)?p:q.height,q.bind(0),r=q.target),A)switch(r){case 3553:case 34067:w.copyTexSubImage2D(r,g,n,s,o,d,b,p);break;case 35866:case 32879:w.copyTexSubImage3D(r,g,n,s,l,o,d,b,p)}else w.copyTexImage2D(r,g,v,o,d,b,p,0);return q&&q.unbind(),w.bindFramebuffer(36160,I||null),x&&y.delete(),q}function v(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=t.sourceAttachment,u=void 0===o?36064:o,d=t.sourceX0,n=void 0===d?0:d,s=t.sourceY0,l=void 0===s?0:s,c=t.sourceX1,g=t.sourceY1,m=t.targetX0,v=void 0===m?0:m,b=t.targetY0,p=void 0===b?0:b,F=t.targetX1,y=t.targetY1,x=t.color,w=void 0===x||x,T=t.depth,A=void 0!==T&&T,I=t.stencil,q=void 0!==I&&I,B=t.mask,X=void 0===B?0:B,L=t.filter,Y=void 0===L?9728:L,_=h(e),D=_.framebuffer,P=_.deleteFramebuffer,C=h(r),G=C.framebuffer,E=C.deleteFramebuffer;(0,f.assert)(D),(0,f.assert)(G);var M=G.gl,R=G.handle,N=G.width,O=G.height,W=G.readBuffer;(0,i.assertWebGL2Context)(M),D.handle||36064!==u||(u=1028),w&&(X|=16384),A&&(X|=256),q&&(X|=1024),(P||E)&&1280&X&&(X=16384,a.log.warn("Blitting from or into a Texture object, forcing mask to GL.COLOR_BUFFER_BIT")()),(0,f.assert)(X),c=void 0===c?D.width:c,g=void 0===g?D.height:g,F=void 0===F?N:F,y=void 0===y?O:y;var k=M.bindFramebuffer(36009,R),H=M.bindFramebuffer(36008,D.handle);return M.readBuffer(u),M.blitFramebuffer(n,l,c,g,v,p,F,y,X,Y),M.readBuffer(W),M.bindFramebuffer(36008,H||null),M.bindFramebuffer(36009,k||null),P&&D.delete(),E&&G.delete(),G}function h(e){return e instanceof r.default?{framebuffer:e,deleteFramebuffer:!1}:{framebuffer:(0,d.toFramebuffer)(e),deleteFramebuffer:!0}}function b(e,r,t,a,i){return e||(r=r||5121,new((0,o.getTypedArrayFromGLType)(r,{clamped:!1}))(a*i*(0,u.glFormatToComponents)(t)))}
},{"./buffer":"d4ii","./framebuffer":"QRT8","./texture":"GqKp","@luma.gl/gltools":"lAom","../webgl-utils":"GZNE","../webgl-utils/typed-array-utils":"MBUn","../webgl-utils/format-utils":"BCIn","../webgl-utils/texture-utils":"oR6C","../utils":"CgZv"}],"IlXB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var l,e=g(require("@babel/runtime/helpers/esm/defineProperty"));function g(l){return l&&l.__esModule?l:{default:l}}var t=(l={},(0,e.default)(l,33902,{gl1:new Float32Array([1,1])}),(0,e.default)(l,33901,{gl1:new Float32Array([1,1])}),(0,e.default)(l,3379,{gl1:64,gl2:2048}),(0,e.default)(l,34076,{gl1:16}),(0,e.default)(l,34930,{gl1:8}),(0,e.default)(l,35661,{gl1:8}),(0,e.default)(l,35660,{gl1:0}),(0,e.default)(l,34024,{gl1:1}),(0,e.default)(l,36348,{gl1:8}),(0,e.default)(l,34921,{gl1:8}),(0,e.default)(l,36347,{gl1:128}),(0,e.default)(l,36349,{gl1:16}),(0,e.default)(l,3386,{gl1:new Int32Array([0,0])}),(0,e.default)(l,32883,{gl1:0,gl2:256}),(0,e.default)(l,35071,{gl1:0,gl2:256}),(0,e.default)(l,37447,{gl1:0,gl2:0}),(0,e.default)(l,36063,{gl1:0,gl2:4}),(0,e.default)(l,35379,{gl1:0,gl2:0}),(0,e.default)(l,35374,{gl1:0,gl2:0}),(0,e.default)(l,35377,{gl1:0,gl2:0}),(0,e.default)(l,34852,{gl1:0,gl2:4}),(0,e.default)(l,36203,{gl1:0,gl2:0}),(0,e.default)(l,33001,{gl1:0,gl2:0}),(0,e.default)(l,33e3,{gl1:0,gl2:0}),(0,e.default)(l,37157,{gl1:0,gl2:0}),(0,e.default)(l,35373,{gl1:0,gl2:0}),(0,e.default)(l,35657,{gl1:0,gl2:0}),(0,e.default)(l,36183,{gl1:0,gl2:0}),(0,e.default)(l,37137,{gl1:0,gl2:0}),(0,e.default)(l,34045,{gl1:0,gl2:0}),(0,e.default)(l,35978,{gl1:0,gl2:0}),(0,e.default)(l,35979,{gl1:0,gl2:0}),(0,e.default)(l,35968,{gl1:0,gl2:0}),(0,e.default)(l,35376,{gl1:0,gl2:0}),(0,e.default)(l,35375,{gl1:0,gl2:0}),(0,e.default)(l,35659,{gl1:0,gl2:0}),(0,e.default)(l,37154,{gl1:0,gl2:0}),(0,e.default)(l,35371,{gl1:0,gl2:0}),(0,e.default)(l,35658,{gl1:0,gl2:0}),(0,e.default)(l,35076,{gl1:0,gl2:-8,negative:!0}),(0,e.default)(l,35077,{gl1:0,gl2:7}),(0,e.default)(l,35380,{gl1:0,gl2:0}),l);exports.default=t;
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3"}],"JRcT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getContextLimits=n,exports.getGLContextInfo=u,exports.getContextInfo=a;var e=l(require("@babel/runtime/helpers/esm/defineProperty")),i=l(require("./webgl-limits-table")),t=require("@luma.gl/gltools");function l(e){return e&&e.__esModule?e:{default:e}}function n(e){if(e.luma=e.luma||{},!e.luma.limits){e.luma.limits={},e.luma.webgl1MinLimits={},e.luma.webgl2MinLimits={};var l=(0,t.isWebGL2)(e);for(var n in i.default){var u=i.default[n],a=u.gl1,r="gl2"in u?u.gl2:u.gl1,s=l?r:a,m="gl2"in u&&!l||"extension"in u&&!e.getExtension(u.extension)?s:e.getParameter(n);e.luma.limits[n]=m,e.luma.webgl1MinLimits[n]=a,e.luma.webgl2MinLimits[n]=r}}return e.luma.limits}function u(i){i.luma=i.luma||{};var l,n=(0,t.getContextDebugInfo)(i);i.luma.info||(i.luma.info=(l={},(0,e.default)(l,37445,n.vendor),(0,e.default)(l,37446,n.renderer),(0,e.default)(l,7936,n.vendorMasked),(0,e.default)(l,7937,n.rendererMasked),(0,e.default)(l,7938,n.version),(0,e.default)(l,35724,n.shadingLanguageVersion),l));return i.luma.info}function a(e){return Object.assign((0,t.getContextDebugInfo)(e),{limits:n(e),info:u(e),webgl1MinLimits:e.luma.webgl1MinLimits,webgl2MinLimits:e.luma.webgl2MinLimits})}
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","./webgl-limits-table":"IlXB","@luma.gl/gltools":"lAom"}],"UMAV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.FEATURES=void 0;var _,E=L(require("@babel/runtime/helpers/esm/defineProperty")),T=L(require("../classes/framebuffer")),e=L(require("../classes/texture-2d"));function L(_){return _&&_.__esModule?_:{default:_}}var R={WEBGL2:"WEBGL2",VERTEX_ARRAY_OBJECT:"VERTEX_ARRAY_OBJECT",TIMER_QUERY:"TIMER_QUERY",INSTANCED_RENDERING:"INSTANCED_RENDERING",MULTIPLE_RENDER_TARGETS:"MULTIPLE_RENDER_TARGETS",ELEMENT_INDEX_UINT32:"ELEMENT_INDEX_UINT32",BLEND_EQUATION_MINMAX:"BLEND_EQUATION_MINMAX",FLOAT_BLEND:"FLOAT_BLEND",COLOR_ENCODING_SRGB:"COLOR_ENCODING_SRGB",TEXTURE_DEPTH:"TEXTURE_DEPTH",TEXTURE_FLOAT:"TEXTURE_FLOAT",TEXTURE_HALF_FLOAT:"TEXTURE_HALF_FLOAT",TEXTURE_FILTER_LINEAR_FLOAT:"TEXTURE_FILTER_LINEAR_FLOAT",TEXTURE_FILTER_LINEAR_HALF_FLOAT:"TEXTURE_FILTER_LINEAR_HALF_FLOAT",TEXTURE_FILTER_ANISOTROPIC:"TEXTURE_FILTER_ANISOTROPIC",COLOR_ATTACHMENT_RGBA32F:"COLOR_ATTACHMENT_RGBA32F",COLOR_ATTACHMENT_FLOAT:"COLOR_ATTACHMENT_FLOAT",COLOR_ATTACHMENT_HALF_FLOAT:"COLOR_ATTACHMENT_HALF_FLOAT",GLSL_FRAG_DATA:"GLSL_FRAG_DATA",GLSL_FRAG_DEPTH:"GLSL_FRAG_DEPTH",GLSL_DERIVATIVES:"GLSL_DERIVATIVES",GLSL_TEXTURE_LOD:"GLSL_TEXTURE_LOD"};function t(_){var L=new e.default(_,{format:6408,type:5126,dataFormat:6408}),R=new T.default(_,{id:"test-framebuffer",check:!1,attachments:(0,E.default)({},36064,L)}),t=R.getStatus();return L.delete(),R.delete(),36053===t}exports.FEATURES=R;var A=(_={},(0,E.default)(_,R.WEBGL2,[!1,!0]),(0,E.default)(_,R.VERTEX_ARRAY_OBJECT,["OES_vertex_array_object",!0]),(0,E.default)(_,R.TIMER_QUERY,["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"]),(0,E.default)(_,R.INSTANCED_RENDERING,["ANGLE_instanced_arrays",!0]),(0,E.default)(_,R.MULTIPLE_RENDER_TARGETS,["WEBGL_draw_buffers",!0]),(0,E.default)(_,R.ELEMENT_INDEX_UINT32,["OES_element_index_uint",!0]),(0,E.default)(_,R.BLEND_EQUATION_MINMAX,["EXT_blend_minmax",!0]),(0,E.default)(_,R.FLOAT_BLEND,["EXT_float_blend"]),(0,E.default)(_,R.COLOR_ENCODING_SRGB,["EXT_sRGB",!0]),(0,E.default)(_,R.TEXTURE_DEPTH,["WEBGL_depth_texture",!0]),(0,E.default)(_,R.TEXTURE_FLOAT,["OES_texture_float",!0]),(0,E.default)(_,R.TEXTURE_HALF_FLOAT,["OES_texture_half_float",!0]),(0,E.default)(_,R.TEXTURE_FILTER_LINEAR_FLOAT,["OES_texture_float_linear"]),(0,E.default)(_,R.TEXTURE_FILTER_LINEAR_HALF_FLOAT,["OES_texture_half_float_linear"]),(0,E.default)(_,R.TEXTURE_FILTER_ANISOTROPIC,["EXT_texture_filter_anisotropic"]),(0,E.default)(_,R.COLOR_ATTACHMENT_RGBA32F,[t,"EXT_color_buffer_float"]),(0,E.default)(_,R.COLOR_ATTACHMENT_FLOAT,[!1,"EXT_color_buffer_float"]),(0,E.default)(_,R.COLOR_ATTACHMENT_HALF_FLOAT,["EXT_color_buffer_half_float"]),(0,E.default)(_,R.GLSL_FRAG_DATA,["WEBGL_draw_buffers",!0]),(0,E.default)(_,R.GLSL_FRAG_DEPTH,["EXT_frag_depth",!0]),(0,E.default)(_,R.GLSL_DERIVATIVES,["OES_standard_derivatives",!0]),(0,E.default)(_,R.GLSL_TEXTURE_LOD,["EXT_shader_texture_lod",!0]),_);exports.default=A;
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","../classes/framebuffer":"QRT8","../classes/texture-2d":"YE27"}],"qa8S":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hasFeature=l,exports.hasFeatures=n,exports.getFeatures=o;var e=t(require("./webgl-features-table")),r=require("@luma.gl/gltools"),a=require("../utils");function t(e){return e&&e.__esModule?e:{default:e}}var u=2;function l(e,r){return n(e,r)}function n(e,r){return(r=Array.isArray(r)?r:[r]).every(function(r){return s(e,r)})}function o(r){for(var a in r.luma=r.luma||{},r.luma.caps=r.luma.caps||{},e.default)void 0===r.luma.caps[a]&&(r.luma.caps[a]=s(r,a));return r.luma.caps}function s(e,a){return e.luma=e.luma||{},e.luma.caps=e.luma.caps||{},void 0===e.luma.caps[a]&&(e.luma.caps[a]=i(e,a)),e.luma.caps[a]||r.log.log(u,"Feature: ".concat(a," not supported"))(),e.luma.caps[a]}function i(t,u){var l,n=e.default[u];(0,a.assert)(n,u);var o=(0,r.isWebGL2)(t)&&n[1]||n[0];if("function"==typeof o)l=o(t);else if(Array.isArray(o)){l=!0;var s=!0,i=!1,c=void 0;try{for(var f,p=o[Symbol.iterator]();!(s=(f=p.next()).done);s=!0){var m=f.value;l=l&&Boolean(t.getExtension(m))}}catch(v){i=!0,c=v}finally{try{s||null==p.return||p.return()}finally{if(i)throw c}}}else"string"==typeof o?l=Boolean(t.getExtension(o)):"boolean"==typeof o?l=o:(0,a.assert)(!1);return l}
},{"./webgl-features-table":"UMAV","@luma.gl/gltools":"lAom","../utils":"CgZv"}],"tGta":[function(require,module,exports) {
"use strict";function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n="undefined"!=typeof window&&window.navigator||{},t=e.userAgent||n.userAgent||"",r=-1!==t.indexOf("MSIE "),d=-1!==t.indexOf("Trident/");return r||d}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"CuwP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;var e=a(require("./check-old-ie")),r=a(require("./webgl-features-table")),t=require("../utils");function a(e){return e&&e.__esModule?e:{default:e}}var u={};function i(a,i){var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.default[i];if((0,t.assert)(n,i),!(0,e.default)(d))return!0;if(i in u)return u[i];var l=n[0],o="#extension GL_".concat(l," : enable\nvoid main(void) {}"),s=a.createShader(35633);a.shaderSource(s,o),a.compileShader(s);var c=a.getShaderParameter(s,35713);return a.deleteShader(s),u[i]=c,c}
},{"./check-old-ie":"tGta","./webgl-features-table":"UMAV","../utils":"CgZv"}],"QnT2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"getContextInfo",{enumerable:!0,get:function(){return e.getContextInfo}}),Object.defineProperty(exports,"getGLContextInfo",{enumerable:!0,get:function(){return e.getGLContextInfo}}),Object.defineProperty(exports,"getContextLimits",{enumerable:!0,get:function(){return e.getContextLimits}}),Object.defineProperty(exports,"FEATURES",{enumerable:!0,get:function(){return t.FEATURES}}),Object.defineProperty(exports,"hasFeature",{enumerable:!0,get:function(){return r.hasFeature}}),Object.defineProperty(exports,"hasFeatures",{enumerable:!0,get:function(){return r.hasFeatures}}),Object.defineProperty(exports,"getFeatures",{enumerable:!0,get:function(){return r.getFeatures}}),Object.defineProperty(exports,"canCompileGLGSExtension",{enumerable:!0,get:function(){return n.default}});var e=require("./limits"),t=require("./webgl-features-table"),r=require("./features"),n=u(require("./check-glsl-extension"));function u(e){return e&&e.__esModule?e:{default:e}}
},{"./limits":"JRcT","./webgl-features-table":"UMAV","./features":"qa8S","./check-glsl-extension":"CuwP"}],"QRT8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FRAMEBUFFER_ATTACHMENT_PARAMETERS=exports.default=void 0;var e=y(require("@babel/runtime/helpers/esm/defineProperty")),t=y(require("@babel/runtime/helpers/esm/slicedToArray")),r=y(require("@babel/runtime/helpers/esm/classCallCheck")),a=y(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),i=y(require("@babel/runtime/helpers/esm/assertThisInitialized")),n=y(require("@babel/runtime/helpers/esm/getPrototypeOf")),u=y(require("@babel/runtime/helpers/esm/get")),l=y(require("@babel/runtime/helpers/esm/createClass")),s=y(require("@babel/runtime/helpers/esm/inherits")),f=require("@luma.gl/gltools"),h=y(require("./resource")),o=y(require("./texture-2d")),d=y(require("./renderbuffer")),c=require("./clear"),g=require("./copy-and-blit.js"),m=require("../features"),v=require("../webgl-utils"),b=require("../utils");function y(e){return e&&e.__esModule?e:{default:e}}var p="Multiple render targets not supported",T=function(h){function y(e){var t,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,r.default)(this,y),(t=(0,a.default)(this,(0,n.default)(y).call(this,e,u))).width=null,t.height=null,t.attachments={},t.readBuffer=36064,t.drawBuffers=[36064],t.ownResources=[],t.initialize(u),Object.seal((0,i.default)(t)),t}return(0,s.default)(y,h),(0,l.default)(y,[{key:"MAX_COLOR_ATTACHMENTS",get:function(){return this.gl.getParameter(this.gl.MAX_COLOR_ATTACHMENTS)}},{key:"MAX_DRAW_BUFFERS",get:function(){return this.gl.getParameter(this.gl.MAX_DRAW_BUFFERS)}}],[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.colorBufferFloat,a=t.colorBufferHalfFloat,i=!0;return r&&(i=Boolean(e.getExtension("EXT_color_buffer_float")||e.getExtension("WEBGL_color_buffer_float")||e.getExtension("OES_texture_float"))),a&&(i=i&&Boolean(e.getExtension("EXT_color_buffer_float")||e.getExtension("EXT_color_buffer_half_float"))),i}},{key:"getDefaultFramebuffer",value:function(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new y(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}}]),(0,l.default)(y,[{key:"initialize",value:function(e){var t=e.width,r=void 0===t?1:t,a=e.height,i=void 0===a?1:a,n=e.attachments,u=void 0===n?null:n,l=e.color,s=void 0===l||l,f=e.depth,h=void 0===f||f,o=e.stencil,d=void 0!==o&&o,c=e.check,g=void 0===c||c,m=e.readBuffer,v=e.drawBuffers;if((0,b.assert)(r>=0&&i>=0,"Width and height need to be integers"),this.width=r,this.height=i,u)for(var y in u){var p=u[y];(Array.isArray(p)?p[0]:p).resize({width:r,height:i})}else u=this._createDefaultAttachments(s,h,d,r,i);this.update({clearAttachments:!0,attachments:u,readBuffer:m,drawBuffers:v}),u&&g&&this.checkStatus()}},{key:"delete",value:function(){var e=!0,t=!1,r=void 0;try{for(var a,i=this.ownResources[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){a.value.delete()}}catch(l){t=!0,r=l}finally{try{e||null==i.return||i.return()}finally{if(t)throw r}}(0,u.default)((0,n.default)(y.prototype),"delete",this).call(this)}},{key:"update",value:function(e){var t=e.attachments,r=void 0===t?{}:t,a=e.readBuffer,i=e.drawBuffers,n=e.clearAttachments,u=void 0!==n&&n,l=e.resizeAttachments,s=void 0===l||l;this.attach(r,{clearAttachments:u,resizeAttachments:s});var f=this.gl,h=f.bindFramebuffer(36160,this.handle);return a&&this._setReadBuffer(a),i&&this._setDrawBuffers(i),f.bindFramebuffer(36160,h||null),this}},{key:"resize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width,r=e.height;if(null===this.handle)return(0,b.assert)(void 0===t&&void 0===r),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;for(var a in void 0===t&&(t=this.gl.drawingBufferWidth),void 0===r&&(r=this.gl.drawingBufferHeight),t!==this.width&&r!==this.height&&f.log.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(t,"x").concat(r))(),this.attachments)this.attachments[a].resize({width:t,height:r});return this.width=t,this.height=r,this}},{key:"attach",value:function(e){var r=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=a.clearAttachments,n=void 0!==i&&i,u=a.resizeAttachments,l=void 0===u||u,s={};n&&Object.keys(this.attachments).forEach(function(e){s[e]=null}),Object.assign(s,e);var f=this.gl.bindFramebuffer(36160,this.handle);for(var h in s){(0,b.assert)(void 0!==h,"Misspelled framebuffer binding point?");var o=Number(h),c=s[o],g=c;if(g)if(g instanceof d.default)this._attachRenderbuffer({attachment:o,renderbuffer:g});else if(Array.isArray(c)){var m=(0,t.default)(c,3),v=m[0],y=m[1],p=void 0===y?0:y,T=m[2],w=void 0===T?0:T;g=v,this._attachTexture({attachment:o,texture:v,layer:p,level:w})}else this._attachTexture({attachment:o,texture:g,layer:0,level:0});else this._unattach(o);l&&g&&g.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,f||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter(function(e){return!r.attachments[e]}).forEach(function(e){delete r.attachments[e]})}},{key:"checkStatus",value:function(){this.gl;var e=this.getStatus();if(36053!==e)throw new Error(k(e));return this}},{key:"getStatus",value:function(){var e=this.gl,t=e.bindFramebuffer(36160,this.handle),r=e.checkFramebufferStatus(36160);return e.bindFramebuffer(36160,t||null),r}},{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.color,r=e.depth,a=e.stencil,i=e.drawBuffers,n=void 0===i?[]:i,u=this.gl.bindFramebuffer(36160,this.handle);return(t||r||a)&&(0,c.clear)(this.gl,{color:t,depth:r,stencil:a}),n.forEach(function(e,t){(0,c.clearBuffer)({drawBuffer:t,value:e})}),this.gl.bindFramebuffer(36160,u||null),this}},{key:"readPixels",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return f.log.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}},{key:"readPixelsToBuffer",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return f.log.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}},{key:"copyToDataUrl",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return f.log.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}},{key:"copyToImage",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return f.log.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}},{key:"copyToTexture",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return f.log.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}},{key:"blit",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return f.log.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}},{key:"invalidate",value:function(e){var t=e.attachments,r=void 0===t?[]:t,a=e.x,i=void 0===a?0:a,n=e.y,u=void 0===n?0:n,l=e.width,s=e.height,f=this.gl;(0,v.assertWebGL2Context)(f);var h=f.bindFramebuffer(36008,this.handle);return 0===i&&0===u&&void 0===l&&void 0===s?f.invalidateFramebuffer(36008,r):f.invalidateFramebuffer(36008,r,i,u,l,s),f.bindFramebuffer(36008,h),this}},{key:"getAttachmentParameter",value:function(e,t,r){var a=this._getAttachmentParameterFallback(t);return null===a&&(this.gl.bindFramebuffer(36160,this.handle),a=this.gl.getFramebufferAttachmentParameter(36160,e,t),this.gl.bindFramebuffer(36160,null)),r&&a>1e3&&(a=(0,v.getKey)(this.gl,a)),a}},{key:"getAttachmentParameters",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36064,t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[],a={},i=!0,n=!1,u=void 0;try{for(var l,s=r[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var f=l.value;a[t?(0,v.getKey)(this.gl,f):f]=this.getAttachmentParameter(e,f,t)}}catch(h){n=!0,u=h}finally{try{i||null==s.return||s.return()}finally{if(n)throw u}}return a}},{key:"getParameters",value:function(){for(var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t={},r=0,a=Object.keys(this.attachments);r<a.length;r++){var i=a[r],n=Number(i);t[e?(0,v.getKey)(this.gl,n):n]=this.getAttachmentParameters(n,e)}return t}},{key:"show",value:function(){return"undefined"!=typeof window&&window.open((0,g.copyToDataUrl)(this),"luma-debug-texture"),this}},{key:"log",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e>f.log.level||"undefined"==typeof window)return this;t=t||"Framebuffer ".concat(this.id);var r=(0,g.copyToDataUrl)(this,{maxHeight:100});return f.log.image({logLevel:e,message:t,image:r},t)(),this}},{key:"bind",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).target,t=void 0===e?36160:e;return this.gl.bindFramebuffer(t,this.handle),this}},{key:"unbind",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).target,t=void 0===e?36160:e;return this.gl.bindFramebuffer(t,null),this}},{key:"_createDefaultAttachments",value:function(t,r,a,i,n){var u,l=null;t&&((l=l||{})[36064]=new o.default(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:i,height:n,mipmaps:!1,parameters:(u={},(0,e.default)(u,10241,9729),(0,e.default)(u,10240,9729),(0,e.default)(u,10242,33071),(0,e.default)(u,10243,33071),u)}),this.ownResources.push(l[36064]));return r&&a?((l=l||{})[33306]=new d.default(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:i,height:111}),this.ownResources.push(l[33306])):r?((l=l||{})[36096]=new d.default(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:i,height:n}),this.ownResources.push(l[36096])):a&&(0,b.assert)(!1),l}},{key:"_unattach",value:function(e){var t=this.attachments[e];t&&(t instanceof d.default?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}},{key:"_attachRenderbuffer",value:function(e){var t=e.attachment,r=void 0===t?36064:t,a=e.renderbuffer;this.gl.framebufferRenderbuffer(36160,r,36161,a.handle),this.attachments[r]=a}},{key:"_attachTexture",value:function(e){var t=e.attachment,r=void 0===t?36064:t,a=e.texture,i=e.layer,n=e.level,u=this.gl;switch(u.bindTexture(a.target,a.handle),a.target){case 35866:case 32879:u.framebufferTextureLayer(36160,r,a.target,n,i);break;case 34067:var l=w(i);u.framebufferTexture2D(36160,r,l,a.handle,n);break;case 3553:u.framebufferTexture2D(36160,r,3553,a.handle,n);break;default:(0,b.assert)(!1,"Illegal texture type")}u.bindTexture(a.target,null),this.attachments[r]=a}},{key:"_setReadBuffer",value:function(e){var t=this.gl;(0,f.isWebGL2)(t)?t.readBuffer(e):(0,b.assert)(36064===e||1029===e,p),this.readBuffer=e}},{key:"_setDrawBuffers",value:function(e){var t=this.gl;if((0,f.isWebGL2)(t))t.drawBuffers(e);else{var r=t.getExtension("WEBGL.draw_buffers");r?r.drawBuffersWEBGL(e):(0,b.assert)(1===e.length&&(36064===e[0]||1029===e[0]),p)}this.drawBuffers=e}},{key:"_getAttachmentParameterFallback",value:function(e){var t=(0,m.getFeatures)(this.gl);switch(e){case 36052:return t.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return t.WEBGL2?null:8;case 33297:return t.WEBGL2?null:5125;case 33296:return t.WEBGL2||t.EXT_sRGB?null:9729;default:return null}}},{key:"_createHandle",value:function(){return this.gl.createFramebuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteFramebuffer(this.handle)}},{key:"_bindHandle",value:function(e){return this.gl.bindFramebuffer(36160,e)}},{key:"color",get:function(){return this.attachments[36064]||null}},{key:"texture",get:function(){return this.attachments[36064]||null}},{key:"depth",get:function(){return this.attachments[36096]||this.attachments[33306]||null}},{key:"stencil",get:function(){return this.attachments[36128]||this.attachments[33306]||null}}]),y}(h.default);function w(e){return e<34069?e+34069:e}function k(e){return(T.STATUS||{})[e]||"Framebuffer error ".concat(e)}exports.default=T;var _=[36049,36048,33296,33298,33299,33300,33301,33302,33303];exports.FRAMEBUFFER_ATTACHMENT_PARAMETERS=_,T.ATTACHMENT_PARAMETERS=_;
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","@babel/runtime/helpers/esm/slicedToArray":"TBeo","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/assertThisInitialized":"Rs9H","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/get":"KGqu","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","@luma.gl/gltools":"lAom","./resource":"DwD3","./texture-2d":"YE27","./renderbuffer":"baET","./clear":"ztYM","./copy-and-blit.js":"DmZq","../features":"QnT2","../webgl-utils":"GZNE","../utils":"CgZv"}],"oR6C":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cloneTextureFrom=n,exports.toFramebuffer=o;var e=i(require("@babel/runtime/helpers/esm/defineProperty")),t=i(require("../classes/texture-2d")),r=i(require("../classes/texture-cube")),a=i(require("../classes/texture-3d")),s=i(require("../classes/framebuffer")),u=require("../utils");function i(e){return e&&e.__esModule?e:{default:e}}function n(e,s){(0,u.assert)(e instanceof t.default||e instanceof r.default||e instanceof a.default);var i=e.constructor,n=e.gl,o=e.width,f=e.height,d=e.format,c=e.type,l=e.dataFormat,m=e.border,h=e.mipmaps;return new i(n,Object.assign({width:o,height:f,format:d,type:c,dataFormat:l,border:m,mipmaps:h},s))}function o(t,r){var a=t.gl,u=t.width,i=t.height,n=t.id;return new s.default(a,Object.assign({},r,{id:"framebuffer-for-".concat(n),width:u,height:i,attachments:(0,e.default)({},36064,t)}))}
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","../classes/texture-2d":"YE27","../classes/texture-cube":"eOjF","../classes/texture-3d":"mmMI","../classes/framebuffer":"QRT8","../utils":"CgZv"}],"WHl0":[function(require,module,exports) {
"use strict";function e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed",n=e.match(/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/);return n?n[1]:t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"OBvR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=35632,t=35633;function r(r){switch(r){case e:return"fragment";case t:return"vertex";default:return"unknown type"}}
},{}],"fowk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e,exports.parseGLSLCompilerError=a;var r=t(require("./get-shader-name")),n=t(require("./get-shader-type-name"));function t(r){return r&&r.__esModule?r:{default:r}}function e(r,n,t){var e=a(r,n,t),o=e.shaderName,c=e.errors,i=e.warnings;return"GLSL compilation error in ".concat(o,"\n\n").concat(c,"\n").concat(i)}function a(t,e,a,i){for(var s=t.split(/\r?\n/),u={},l={},f=i||(0,r.default)(e)||"(unnamed)",g="".concat((0,n.default)(a)," shader ").concat(f),p=0;p<s.length;p++){var d=s[p];if(!(d.length<=1)){var h=d.split(":"),v=h[0],m=parseInt(h[2],10);if(isNaN(m))throw new Error("GLSL compilation error in ".concat(g,": ").concat(t));"WARNING"!==v?u[m]=d:l[m]=d}}var L=c(e);return{shaderName:g,errors:o(u,L),warnings:o(l,L)}}function o(r,n){for(var t="",e=0;e<n.length;e++){var a=n[e];if((r[e+3]||r[e+2]||r[e+1])&&(t+="".concat(a,"\n"),r[e+1])){var o=r[e+1],c=o.split(":",3),s=c[0],u=parseInt(c[1],10)||0,l=o.substring(c.join(":").length+1).trim();t+=i("^^^ ".concat(s,": ").concat(l,"\n\n"),u)}}return t}function c(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ",e=r.split(/\r?\n/),a=String(e.length+n-1).length;return e.map(function(r,e){var o=e+n,c=String(o).length;return i(o,a-c)+t+r})}function i(r,n){for(var t="",e=0;e<n;++e)t+=" ";return"".concat(t).concat(r)}
},{"./get-shader-name":"WHl0","./get-shader-type-name":"OBvR"}],"ZDha":[function(require,module,exports) {
"use strict";function e(e){var t=100,r=e.match(/[^\s]+/g);if(r.length>=2&&"#version"===r[0]){var s=parseInt(r[1],10);Number.isFinite(s)&&(t=s)}return t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"bJJz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"formatGLSLCompilerError",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"parseGLSLCompilerError",{enumerable:!0,get:function(){return e.parseGLSLCompilerError}}),Object.defineProperty(exports,"getShaderName",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"getShaderVersion",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"getShaderTypeName",{enumerable:!0,get:function(){return n.default}});var e=a(require("./format-glsl-error")),r=o(require("./get-shader-name")),t=o(require("./get-shader-version")),n=o(require("./get-shader-type-name"));function o(e){return e&&e.__esModule?e:{default:e}}function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function a(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(t,o,a):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}
},{"./format-glsl-error":"fowk","./get-shader-name":"WHl0","./get-shader-version":"ZDha","./get-shader-type-name":"OBvR"}],"Mfxg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FragmentShader=exports.VertexShader=exports.Shader=void 0;var e=h(require("@babel/runtime/helpers/esm/classCallCheck")),r=h(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),t=h(require("@babel/runtime/helpers/esm/getPrototypeOf")),a=h(require("@babel/runtime/helpers/esm/createClass")),s=h(require("@babel/runtime/helpers/esm/inherits")),n=require("@luma.gl/gltools"),i=require("../glsl-utils"),u=require("../webgl-utils"),l=require("../utils"),o=h(require("./resource"));function h(e){return e&&e.__esModule?e:{default:e}}var c="Shader: GLSL source code must be a JavaScript string",d=function(o){function h(a,s){var n;(0,e.default)(this,h),(0,u.assertWebGLContext)(a),(0,l.assert)("string"==typeof s.source,c);var o=(0,i.getShaderName)(s.source,null)||s.id||(0,l.uid)("unnamed ".concat(h.getTypeName(s.shaderType)));return(n=(0,r.default)(this,(0,t.default)(h).call(this,a,{id:o}))).shaderType=s.shaderType,n.source=s.source,n.initialize(s),n}return(0,s.default)(h,o),(0,a.default)(h,null,[{key:"getTypeName",value:function(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return(0,l.assert)(!1),"unknown"}}}]),(0,a.default)(h,[{key:"initialize",value:function(e){var r=e.source,t=(0,i.getShaderName)(r,null);t&&(this.id=(0,l.uid)(t)),this._compile(r)}},{key:"getParameter",value:function(e){return this.gl.getShaderParameter(this.handle,e)}},{key:"toString",value:function(){return"".concat(h.getTypeName(this.shaderType),":").concat(this.id)}},{key:"getName",value:function(){return(0,i.getShaderName)(this.source)||"unnamed-shader"}},{key:"getSource",value:function(){return this.gl.getShaderSource(this.handle)}},{key:"getTranslatedSource",value:function(){var e=this.gl.getExtension("WEBGL.debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL.debug_shaders not implemented"}},{key:"_compile",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.source;if(e.startsWith("#version ")||(e="#version 100\n".concat(e)),this.source=e,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){var r=this.gl.getShaderInfoLog(this.handle),t=(0,i.parseGLSLCompilerError)(r,this.source,this.shaderType,this.id),a=t.shaderName,s=t.errors,u=t.warnings;throw n.log.error("GLSL compilation errors in ".concat(a,"\n").concat(s))(),n.log.warn("GLSL compilation warnings in ".concat(a,"\n").concat(u))(),new Error("GLSL compilation errors in ".concat(a))}}},{key:"_deleteHandle",value:function(){this.gl.deleteShader(this.handle)}},{key:"_getOptsFromHandle",value:function(){return{type:this.getParameter(35663),source:this.getSource()}}}]),h}(o.default);exports.Shader=d;var g=function(n){function i(a,s){return(0,e.default)(this,i),"string"==typeof s&&(s={source:s}),(0,r.default)(this,(0,t.default)(i).call(this,a,Object.assign({},s,{shaderType:35633})))}return(0,s.default)(i,n),(0,a.default)(i,[{key:"_createHandle",value:function(){return this.gl.createShader(35633)}}]),i}(d);exports.VertexShader=g;var f=function(n){function i(a,s){return(0,e.default)(this,i),"string"==typeof s&&(s={source:s}),(0,r.default)(this,(0,t.default)(i).call(this,a,Object.assign({},s,{shaderType:35632})))}return(0,s.default)(i,n),(0,a.default)(i,[{key:"_createHandle",value:function(){return this.gl.createShader(35632)}}]),i}(d);exports.FragmentShader=f;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","@luma.gl/gltools":"lAom","../glsl-utils":"bJJz","../webgl-utils":"GZNE","../utils":"CgZv","./resource":"DwD3"}],"DC0O":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseUniformName=h,exports.getUniformSetter=y,exports.checkUniformValues=p,exports.copyUniform=A;var n,r=l(require("@babel/runtime/helpers/esm/defineProperty")),e=require("@luma.gl/gltools"),u=l(require("./framebuffer")),i=l(require("./renderbuffer")),t=l(require("./texture")),f=require("../utils");function l(n){return n&&n.__esModule?n:{default:n}}var a=(n={},(0,r.default)(n,5126,U.bind(null,"uniform1fv",s,1,B)),(0,r.default)(n,35664,U.bind(null,"uniform2fv",s,2,B)),(0,r.default)(n,35665,U.bind(null,"uniform3fv",s,3,B)),(0,r.default)(n,35666,U.bind(null,"uniform4fv",s,4,B)),(0,r.default)(n,5124,U.bind(null,"uniform1iv",b,1,B)),(0,r.default)(n,35667,U.bind(null,"uniform2iv",b,2,B)),(0,r.default)(n,35668,U.bind(null,"uniform3iv",b,3,B)),(0,r.default)(n,35669,U.bind(null,"uniform4iv",b,4,B)),(0,r.default)(n,35670,U.bind(null,"uniform1iv",b,1,B)),(0,r.default)(n,35671,U.bind(null,"uniform2iv",b,2,B)),(0,r.default)(n,35672,U.bind(null,"uniform3iv",b,3,B)),(0,r.default)(n,35673,U.bind(null,"uniform4iv",b,4,B)),(0,r.default)(n,35674,U.bind(null,"uniformMatrix2fv",s,4,q)),(0,r.default)(n,35675,U.bind(null,"uniformMatrix3fv",s,9,q)),(0,r.default)(n,35676,U.bind(null,"uniformMatrix4fv",s,16,q)),(0,r.default)(n,35678,M),(0,r.default)(n,35680,M),(0,r.default)(n,5125,U.bind(null,"uniform1uiv",x,1,B)),(0,r.default)(n,36294,U.bind(null,"uniform2uiv",x,2,B)),(0,r.default)(n,36295,U.bind(null,"uniform3uiv",x,3,B)),(0,r.default)(n,36296,U.bind(null,"uniform4uiv",x,4,B)),(0,r.default)(n,35685,U.bind(null,"uniformMatrix2x3fv",s,6,q)),(0,r.default)(n,35686,U.bind(null,"uniformMatrix2x4fv",s,8,q)),(0,r.default)(n,35687,U.bind(null,"uniformMatrix3x2fv",s,6,q)),(0,r.default)(n,35688,U.bind(null,"uniformMatrix3x4fv",s,12,q)),(0,r.default)(n,35689,U.bind(null,"uniformMatrix4x2fv",s,8,q)),(0,r.default)(n,35690,U.bind(null,"uniformMatrix4x3fv",s,12,q)),(0,r.default)(n,35679,M),(0,r.default)(n,35682,M),(0,r.default)(n,36289,M),(0,r.default)(n,36292,M),(0,r.default)(n,36293,M),(0,r.default)(n,36298,M),(0,r.default)(n,36299,M),(0,r.default)(n,36300,M),(0,r.default)(n,36303,M),(0,r.default)(n,36306,M),(0,r.default)(n,36307,M),(0,r.default)(n,36308,M),(0,r.default)(n,36311,M),n),o={},d={},m={},c=[0];function v(n,r,u,i){1===r&&"boolean"==typeof n&&(n=n?1:0),Number.isFinite(n)&&(c[0]=n,n=c);var t=n.length;if(t%r&&e.log.warn("Uniform size should be multiples of ".concat(r),n)(),n instanceof u)return n;var f=i[t];f||(f=new u(t),i[t]=f);for(var l=0;l<t;l++)f[l]=n[l];return f}function s(n,r){return v(n,r,Float32Array,o)}function b(n,r){return v(n,r,Int32Array,d)}function x(n,r){return v(n,r,Uint32Array,m)}function h(n){if("]"!==n[n.length-1])return{name:n,length:1,isArray:!1};var r=n.match(/([^[]*)(\[[0-9]+\])?/);if(!r||r.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(n));return{name:r[1],length:r[2]||1,isArray:Boolean(r[2])}}function y(n,r,e){var u=a[e.type];if(!u)throw new Error("Unknown GLSL uniform type ".concat(e.type));return u().bind(null,n,r)}function p(n,r,e){for(var u in n){var i=n[u];if((!e||Boolean(e[u]))&&!g(i))throw r=r?"".concat(r," "):"",console.error("".concat(r," Bad uniform ").concat(u),i),new Error("".concat(r," Bad uniform ").concat(u))}return!0}function g(n){return Array.isArray(n)||ArrayBuffer.isView(n)?w(n):!!isFinite(n)||(!0===n||!1===n||(n instanceof t.default||(n instanceof i.default||n instanceof u.default&&Boolean(n.texture))))}function w(n){if(0===n.length)return!1;for(var r=Math.min(n.length,16),e=0;e<r;++e)if(!Number.isFinite(n[e]))return!1;return!0}function A(n,r,e){if(Array.isArray(e)||ArrayBuffer.isView(e))if(n[r])for(var u=n[r],i=0,t=e.length;i<t;++i)u[i]=e[i];else n[r]=e.slice();else n[r]=e}function M(){var n=null;return function(r,e,u){var i=n!==u;return i&&(r.uniform1i(e,u),n=u),i}}function U(n,r,e,u){var i=null,t=null;return function(l,a,o){var d=r(o,e),m=d.length,c=!1;if(null===i)i=new Float32Array(m),t=m,c=!0;else{(0,f.assert)(t===m,"Uniform length cannot change.");for(var v=0;v<m;++v)if(d[v]!==i[v]){c=!0;break}}return c&&(u(l,n,a,d),i.set(d)),c}}function B(n,r,e,u){n[r](e,u)}function q(n,r,e,u){n[r](e,!1,u)}
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","@luma.gl/gltools":"lAom","./framebuffer":"QRT8","./renderbuffer":"baET","./texture":"GqKp","../utils":"CgZv"}],"r3DH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getPrimitiveDrawMode=J,exports.getPrimitiveCount=K,exports.getVertexCount=N,exports.decomposeCompositeGLType=Q,exports.getCompositeGLType=R;var e,t=u(require("@babel/runtime/helpers/esm/slicedToArray")),r=u(require("@babel/runtime/helpers/esm/defineProperty")),a=require("../utils");function u(e){return e&&e.__esModule?e:{default:e}}var s=5120,c=5121,n=5122,l=5123,d=0,f=1,o=2,i=3,v=4,m=5,p=6,x=5126,b=35664,w=35665,y=35666,C=5124,h=35667,M=35668,g=35669,P=5125,T=36294,_=36295,q=36296,G=35670,L=35671,j=35672,A=35673,D=35674,O=35675,V=35676,k=35685,z=35686,B=35687,E=35688,F=35689,H=35690,I=(e={},(0,r.default)(e,x,[x,1,"float"]),(0,r.default)(e,b,[x,2,"vec2"]),(0,r.default)(e,w,[x,3,"vec3"]),(0,r.default)(e,y,[x,4,"vec4"]),(0,r.default)(e,C,[C,1,"int"]),(0,r.default)(e,h,[C,2,"ivec2"]),(0,r.default)(e,M,[C,3,"ivec3"]),(0,r.default)(e,g,[C,4,"ivec4"]),(0,r.default)(e,P,[P,1,"uint"]),(0,r.default)(e,T,[P,2,"uvec2"]),(0,r.default)(e,_,[P,3,"uvec3"]),(0,r.default)(e,q,[P,4,"uvec4"]),(0,r.default)(e,G,[x,1,"bool"]),(0,r.default)(e,L,[x,2,"bvec2"]),(0,r.default)(e,j,[x,3,"bvec3"]),(0,r.default)(e,A,[x,4,"bvec4"]),(0,r.default)(e,D,[x,8,"mat2"]),(0,r.default)(e,k,[x,8,"mat2x3"]),(0,r.default)(e,z,[x,8,"mat2x4"]),(0,r.default)(e,O,[x,12,"mat3"]),(0,r.default)(e,B,[x,12,"mat3x2"]),(0,r.default)(e,E,[x,12,"mat3x4"]),(0,r.default)(e,V,[x,16,"mat4"]),(0,r.default)(e,F,[x,16,"mat4x2"]),(0,r.default)(e,H,[x,16,"mat4x3"]),e);function J(e){switch(e){case d:return d;case f:case i:case o:return f;case v:case m:case p:return v;default:return(0,a.assert)(!1),0}}function K(e){var t=e.drawMode,r=e.vertexCount;switch(t){case d:case o:return r;case f:return r/2;case i:return r-1;case v:return r/3;case m:case p:return r-2;default:return(0,a.assert)(!1),0}}function N(e){var t=e.drawMode,r=K({drawMode:t,vertexCount:e.vertexCount});switch(J(t)){case d:return r;case f:return 2*r;case v:return 3*r;default:return(0,a.assert)(!1),0}}function Q(e){var r=I[e];if(!r)return null;var a=(0,t.default)(r,2);return{type:a[0],components:a[1]}}function R(e,r){switch(e){case s:case c:case n:case l:e=x}for(var a in I){var u=(0,t.default)(I[a],3),d=u[0],f=u[1],o=u[2];if(d===e&&f===r)return{glType:a,name:o}}return null}
},{"@babel/runtime/helpers/esm/slicedToArray":"TBeo","@babel/runtime/helpers/esm/defineProperty":"iDM3","../utils":"CgZv"}],"MOlP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=n(require("@babel/runtime/helpers/esm/classCallCheck")),e=n(require("@babel/runtime/helpers/esm/createClass")),r=n(require("./accessor")),i=require("@luma.gl/gltools"),a=require("../webgl-utils/attribute-utils");function n(t){return t&&t.__esModule?t:{default:t}}var o=function(){function n(e){(0,t.default)(this,n),this.id=e.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(e),this._readVaryingsFromProgram(e)}return(0,e.default)(n,[{key:"getAttributeInfo",value:function(t){var e=Number(t);return Number.isFinite(e)?this.attributeInfosByLocation[e]:this.attributeInfosByName[t]||null}},{key:"getAttributeLocation",value:function(t){var e=this.getAttributeInfo(t);return e?e.location:-1}},{key:"getAttributeAccessor",value:function(t){var e=this.getAttributeInfo(t);return e?e.accessor:null}},{key:"getVaryingInfo",value:function(t){var e=Number(t);return Number.isFinite(e)?this.varyingInfos[e]:this.varyingInfosByName[t]||null}},{key:"getVaryingIndex",value:function(t){var e=this.getVaryingInfo();return e?e.location:-1}},{key:"getVaryingAccessor",value:function(t){var e=this.getVaryingInfo();return e?e.accessor:null}},{key:"_readAttributesFromProgram",value:function(t){for(var e=t.gl,r=e.getProgramParameter(t.handle,35721),i=0;i<r;i++){var a=e.getActiveAttrib(t.handle,i),n=a.name,o=a.type,s=a.size,u=e.getAttribLocation(t.handle,n);u>=0&&this._addAttribute(u,n,o,s)}this.attributeInfos.sort(function(t,e){return t.location-e.location})}},{key:"_readVaryingsFromProgram",value:function(t){var e=t.gl;if((0,i.isWebGL2)(e)){for(var r=e.getProgramParameter(t.handle,35971),a=0;a<r;a++){var n=e.getTransformFeedbackVarying(t.handle,a),o=n.name,s=n.type,u=n.size;this._addVarying(a,o,s,u)}this.varyingInfos.sort(function(t,e){return t.location-e.location})}}},{key:"_addAttribute",value:function(t,e,i,n){var o=(0,a.decomposeCompositeGLType)(i),s={type:o.type,size:n*o.components};this._inferProperties(t,e,s);var u={location:t,name:e,accessor:new r.default(s)};this.attributeInfos.push(u),this.attributeInfosByLocation[t]=u,this.attributeInfosByName[u.name]=u}},{key:"_inferProperties",value:function(t,e,r){/instance/i.test(e)&&(r.divisor=1)}},{key:"_addVarying",value:function(t,e,i,n){var o=(0,a.decomposeCompositeGLType)(i),s=o.type,u=o.components,l={location:t,name:e,accessor:new r.default({type:s,size:n*u})};this.varyingInfos.push(l),this.varyingInfosByName[l.name]=l}}]),n}();exports.default=o;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","./accessor":"OEzr","@luma.gl/gltools":"lAom","../webgl-utils/attribute-utils":"r3DH"}],"mrLl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=b(require("@babel/runtime/helpers/esm/classCallCheck")),t=b(require("@babel/runtime/helpers/esm/createClass")),r=b(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),i=b(require("@babel/runtime/helpers/esm/assertThisInitialized")),n=b(require("@babel/runtime/helpers/esm/getPrototypeOf")),a=b(require("@babel/runtime/helpers/esm/get")),s=b(require("@babel/runtime/helpers/esm/inherits")),o=b(require("./resource")),u=b(require("./texture")),l=b(require("./framebuffer")),h=require("./uniforms"),d=require("./shader"),f=b(require("./program-configuration")),g=require("@luma.gl/gltools"),m=require("../webgl-utils"),c=require("../webgl-utils/attribute-utils"),v=require("../utils");function b(e){return e&&e.__esModule?e:{default:e}}var x=4,_=35981,y=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"],k=function(o){function b(t){var a,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,e.default)(this,b),(a=(0,r.default)(this,(0,n.default)(b).call(this,t,s))).stubRemovedMethods("Program","v6.0",y),a._isCached=!1,a.initialize(s),Object.seal((0,i.default)(a)),a._setId(s.id),a}return(0,s.default)(b,o),(0,t.default)(b,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.hash,r=e.vs,i=e.fs,n=e.varyings,a=e.bufferMode,s=void 0===a?_:a;return this.hash=t||"",this.vs="string"==typeof r?new d.VertexShader(this.gl,{id:"".concat(e.id,"-vs"),source:r}):r,this.fs="string"==typeof i?new d.FragmentShader(this.gl,{id:"".concat(e.id,"-fs"),source:i}):i,(0,v.assert)(this.vs instanceof d.VertexShader),(0,v.assert)(this.fs instanceof d.FragmentShader),this.uniforms={},this._textureUniforms={},this._texturesRenderable=!0,n&&n.length>0&&((0,m.assertWebGL2Context)(this.gl),this.varyings=n,this.gl.transformFeedbackVaryings(this.handle,n,s)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new f.default(this),this.setProps(e)}},{key:"delete",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isCached?this:(0,a.default)((0,n.default)(b.prototype),"delete",this).call(this,e)}},{key:"setProps",value:function(e){return"uniforms"in e&&this.setUniforms(e.uniforms),this}},{key:"draw",value:function(e){var t=this,r=e.logPriority,i=e.drawMode,n=void 0===i?4:i,a=e.vertexCount,s=e.offset,o=void 0===s?0:s,u=e.start,l=e.end,h=e.isIndexed,d=void 0!==h&&h,f=e.indexType,b=void 0===f?5123:f,x=e.instanceCount,_=void 0===x?0:x,y=e.isInstanced,k=void 0===y?_>0:y,p=e.vertexArray,P=void 0===p?null:p,U=e.transformFeedback,w=e.framebuffer,I=e.parameters,S=void 0===I?{}:I,A=e.uniforms,q=e.samplers;if((A||q)&&(g.log.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(A||{})),g.log.priority>=r){var C=w?w.id:"default",L="mode=".concat((0,m.getKey)(this.gl,n)," verts=").concat(a," ")+"instances=".concat(_," indexType=").concat((0,m.getKey)(this.gl,b)," ")+"isInstanced=".concat(k," isIndexed=").concat(d," ")+"Framebuffer=".concat(C);g.log.log(r,L)()}return(0,v.assert)(P),this.gl.useProgram(this.handle),!(!this._areTexturesRenderable()||0===a||k&&0===_)&&(P.bindForDraw(a,_,function(){if(void 0!==w&&(S=Object.assign({},S,{framebuffer:w})),U){var e=(0,c.getPrimitiveDrawMode)(n);U.begin(e)}t._bindTextures(),(0,g.withParameters)(t.gl,S,function(){d&&k?t.gl.drawElementsInstanced(n,a,b,o,_):d&&(0,g.isWebGL2)(t.gl)&&!isNaN(u)&&!isNaN(l)?t.gl.drawRangeElements(n,u,l,a,b,o):d?t.gl.drawElements(n,a,b,o):k?t.gl.drawArraysInstanced(n,o,a,_):t.gl.drawArrays(n,o,a)}),U&&U.end()}),!0)}},{key:"setUniforms",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var t in g.log.priority>=2&&(0,h.checkUniformValues)(e,this.id,this._uniformSetters),this.gl.useProgram(this.handle),e){var r=e[t],i=this._uniformSetters[t];if(i){var n=r,a=!1;if(n instanceof l.default&&(n=n.texture),n instanceof u.default)if(a=this.uniforms[t]!==r){void 0===i.textureIndex&&(i.textureIndex=this._textureIndexCounter++);var s=n,o=i.textureIndex;s.bind(o),n=o,s.loaded||(this._texturesRenderable=!1),this._textureUniforms[t]=s}else n=i.textureIndex;else this._textureUniforms[t]&&delete this._textureUniforms[t];(i(n)||a)&&(0,h.copyUniform)(this.uniforms,t,r)}}return this}},{key:"_areTexturesRenderable",value:function(){if(this._texturesRenderable)return!0;for(var e in this._texturesRenderable=!0,this._textureUniforms){var t=this._textureUniforms[e];this._texturesRenderable=this._texturesRenderable&&t.loaded}return this._texturesRenderable}},{key:"_bindTextures",value:function(){for(var e in this._textureUniforms){var t=this._uniformSetters[e].textureIndex;this._textureUniforms[e].bind(t)}}},{key:"_createHandle",value:function(){return this.gl.createProgram()}},{key:"_deleteHandle",value:function(){this.gl.deleteProgram(this.handle)}},{key:"_getOptionsFromHandle",value:function(e){var t=this.gl.getAttachedShaders(e),r={},i=!0,n=!1,a=void 0;try{for(var s,o=t[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var u=s.value;switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:r.vs=new d.VertexShader({handle:u});break;case 35632:r.fs=new d.FragmentShader({handle:u})}}}catch(l){n=!0,a=l}finally{try{i||null==o.return||o.return()}finally{if(n)throw a}}return r}},{key:"_getParameter",value:function(e){return this.gl.getProgramParameter(this.handle,e)}},{key:"_setId",value:function(e){if(!e){var t=this._getName();this.id=(0,v.uid)(t)}}},{key:"_getName",value:function(){var e=this.vs.getName()||this.fs.getName();return e=(e=e.replace(/shader/i,""))?"".concat(e,"-program"):"program"}},{key:"_compileAndLink",value:function(){var e=this.gl;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),g.log.time(x,"linkProgram for ".concat(this._getName()))(),e.linkProgram(this.handle),g.log.timeEnd(x,"linkProgram for ".concat(this._getName()))(),e.debug||g.log.level>0){if(!e.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(e.getProgramInfoLog(this.handle)));if(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(e.getProgramInfoLog(this.handle)))}}},{key:"_readUniformLocationsFromLinkedProgram",value:function(){var e=this.gl;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(var t=0;t<this._uniformCount;t++){var r=this.gl.getActiveUniform(this.handle,t),i=(0,h.parseUniformName)(r.name),n=i.name,a=i.isArray,s=e.getUniformLocation(this.handle,n);if(this._uniformSetters[n]=(0,h.getUniformSetter)(e,s,r,a),r.size>1)for(var o=0;o<r.size;o++)s=e.getUniformLocation(this.handle,"".concat(n,"[").concat(o,"]")),this._uniformSetters["".concat(n,"[").concat(o,"]")]=(0,h.getUniformSetter)(e,s,r,a)}this._textureIndexCounter=0}},{key:"getActiveUniforms",value:function(e,t){return this.gl.getActiveUniforms(this.handle,e,t)}},{key:"getUniformBlockIndex",value:function(e){return this.gl.getUniformBlockIndex(this.handle,e)}},{key:"getActiveUniformBlockParameter",value:function(e,t){return this.gl.getActiveUniformBlockParameter(this.handle,e,t)}},{key:"uniformBlockBinding",value:function(e,t){this.gl.uniformBlockBinding(this.handle,e,t)}}]),b}(o.default);exports.default=k;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/assertThisInitialized":"Rs9H","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/get":"KGqu","@babel/runtime/helpers/esm/inherits":"RnSb","./resource":"DwD3","./texture":"GqKp","./framebuffer":"QRT8","./uniforms":"DC0O","./shader":"Mfxg","./program-configuration":"MOlP","@luma.gl/gltools":"lAom","../webgl-utils":"GZNE","../webgl-utils/attribute-utils":"r3DH","../utils":"CgZv"}],"utYa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=h(require("@babel/runtime/helpers/esm/classCallCheck")),t=h(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),r=h(require("@babel/runtime/helpers/esm/getPrototypeOf")),i=h(require("@babel/runtime/helpers/esm/assertThisInitialized")),n=h(require("@babel/runtime/helpers/esm/createClass")),u=h(require("@babel/runtime/helpers/esm/inherits")),l=h(require("./resource")),s=require("../features"),a=require("@luma.gl/gltools"),o=require("../utils");function h(e){return e&&e.__esModule?e:{default:e}}var g=34918,d=34919,c=35007,f=36795,m=35976,v=35887,y=36202,b=function(l){function h(n){var u,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,e.default)(this,h),(u=(0,t.default)(this,(0,r.default)(h).call(this,n,l))).target=null,u._queryPending=!1,u._pollingPromise=null,Object.seal((0,i.default)(u)),u}return(0,u.default)(h,l),(0,n.default)(h,null,[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=(0,a.isWebGL2)(e),i=(0,s.hasFeatures)(e,s.FEATURES.TIMER_QUERY),n=r||i,u=!0,l=!1,h=void 0;try{for(var g,d=t[Symbol.iterator]();!(u=(g=d.next()).done);u=!0){switch(g.value){case"queries":n=n&&r;break;case"timers":n=n&&i;break;default:(0,o.assert)(!1)}}}catch(c){l=!0,h=c}finally{try{u||null==d.return||d.return()}finally{if(l)throw h}}return n}}]),(0,n.default)(h,[{key:"beginTimeElapsedQuery",value:function(){return this.begin(c)}},{key:"beginOcclusionQuery",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).conservative,t=void 0!==e&&e;return this.begin(t?y:v)}},{key:"beginTransformFeedbackQuery",value:function(){return this.begin(m)}},{key:"begin",value:function(e){return this._queryPending?this:(this.target=e,this.gl.beginQuery(this.target,this.handle),this)}},{key:"end",value:function(){return this._queryPending?this:(this.target&&(this.gl.endQuery(this.target),this.target=null,this._queryPending=!0),this)}},{key:"isResultAvailable",value:function(){if(!this._queryPending)return!1;var e=this.gl.getQueryParameter(this.handle,d);return e&&(this._queryPending=!1),e}},{key:"isTimerDisjoint",value:function(){return this.gl.getParameter(f)}},{key:"getResult",value:function(){return this.gl.getQueryParameter(this.handle,g)}},{key:"getTimerMilliseconds",value:function(){return this.getResult()/1e6}},{key:"createPoll",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;var r=0;return this._pollingPromise=new Promise(function(i,n){requestAnimationFrame(function u(){e.isResultAvailable()?(i(e.getResult()),e._pollingPromise=null):r++>t?(n("Timed out"),e._pollingPromise=null):requestAnimationFrame(u)})}),this._pollingPromise}},{key:"_createHandle",value:function(){return h.isSupported(this.gl)?this.gl.createQuery():null}},{key:"_deleteHandle",value:function(){this.gl.deleteQuery(this.handle)}}]),h}(l.default);exports.default=b;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/assertThisInitialized":"Rs9H","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","./resource":"DwD3","../features":"QnT2","@luma.gl/gltools":"lAom","../utils":"CgZv"}],"us29":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=b(require("@babel/runtime/helpers/esm/classCallCheck")),i=b(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),t=b(require("@babel/runtime/helpers/esm/getPrototypeOf")),n=b(require("@babel/runtime/helpers/esm/assertThisInitialized")),r=b(require("@babel/runtime/helpers/esm/createClass")),u=b(require("@babel/runtime/helpers/esm/inherits")),s=require("@luma.gl/gltools"),f=b(require("./resource")),a=b(require("./buffer")),l=require("../webgl-utils"),o=require("../utils");function b(e){return e&&e.__esModule?e:{default:e}}var d=function(f){function b(r){var u,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,e.default)(this,b),(0,l.assertWebGL2Context)(r),(u=(0,i.default)(this,(0,t.default)(b).call(this,r,s))).initialize(s),u.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal((0,n.default)(u)),u}return(0,u.default)(b,f),(0,r.default)(b,null,[{key:"isSupported",value:function(e){return(0,s.isWebGL2)(e)}}]),(0,r.default)(b,[{key:"initialize",value:function(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,(0,o.isObjectEmpty)(this.buffers)||this.bind(function(){return e._unbindBuffers()}),this.setProps(i),this}},{key:"setProps",value:function(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}},{key:"setBuffers",value:function(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.bind(function(){for(var t in i)e.setBuffer(t,i[t])}),this}},{key:"setBuffer",value:function(e,i){var t=this,n=this._getVaryingIndex(e),r=this._getBufferParams(i),u=r.buffer,f=r.byteSize,a=r.byteOffset;return n<0?(this.unused[e]=u,s.log.warn(function(){return"".concat(t.id," unused varying buffer ").concat(e)})(),this):(this.buffers[n]=i,this.bindOnUse||this._bindBuffer(n,u,a,f),this)}},{key:"begin",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}},{key:"end",value:function(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}},{key:"_getBufferParams",value:function(e){var i,t,n;return e instanceof a.default==!1?(n=e.buffer,t=e.byteSize,i=e.byteOffset):n=e,void 0===i&&void 0===t||(i=i||0,t=t||n.byteLength-i),{buffer:n,byteOffset:i,byteSize:t}}},{key:"_getVaryingInfo",value:function(e){return this.configuration&&this.configuration.getVaryingInfo(e)}},{key:"_getVaryingIndex",value:function(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;var i=Number(e);return Number.isFinite(i)?i:-1}},{key:"_bindBuffers",value:function(){if(this.bindOnUse)for(var e in this.buffers){var i=this._getBufferParams(this.buffers[e]),t=i.buffer,n=i.byteSize,r=i.byteOffset;this._bindBuffer(e,t,r,n)}}},{key:"_unbindBuffers",value:function(){if(this.bindOnUse)for(var e in this.buffers)this._bindBuffer(e,null)}},{key:"_bindBuffer",value:function(e,i){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3?arguments[3]:void 0,r=i&&i.handle;return r&&void 0!==n?this.gl.bindBufferRange(35982,e,r,t,n):this.gl.bindBufferBase(35982,e,r),this}},{key:"_createHandle",value:function(){return this.gl.createTransformFeedback()}},{key:"_deleteHandle",value:function(){this.gl.deleteTransformFeedback(this.handle)}},{key:"_bindHandle",value:function(e){this.gl.bindTransformFeedback(36386,this.handle)}}]),b}(f.default);exports.default=d;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/assertThisInitialized":"Rs9H","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","@luma.gl/gltools":"lAom","./resource":"DwD3","./buffer":"d4ii","../webgl-utils":"GZNE","../utils":"CgZv"}],"vUP6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getScratchArrayBuffer=t,exports.getScratchArray=e,exports.fillArray=n;var r=null;function t(t){return(!r||r.byteLength<t)&&(r=new ArrayBuffer(t)),r}function e(r,e){return new r(t(r.BYTES_PER_ELEMENT*e),0,e)}function n(r){for(var t=r.target,e=r.source,n=r.start,o=void 0===n?0:n,u=r.count,c=void 0===u?1:u,i=e.length,a=c*i,f=0,s=o;f<i;f++)t[s++]=e[f];for(;f<a;)f<a-f?(t.copyWithin(o+f,o,o+f),f*=2):(t.copyWithin(o+f,o,o+a-f),f=a);return t}
},{}],"R2V4":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=h(require("@babel/runtime/helpers/esm/classCallCheck")),t=h(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),r=h(require("@babel/runtime/helpers/esm/assertThisInitialized")),a=h(require("@babel/runtime/helpers/esm/getPrototypeOf")),i=h(require("@babel/runtime/helpers/esm/get")),u=h(require("@babel/runtime/helpers/esm/createClass")),n=h(require("@babel/runtime/helpers/esm/inherits")),s=h(require("./resource")),l=h(require("./buffer")),f=require("@luma.gl/gltools"),o=require("../utils/array-utils-flat"),b=require("../utils"),c=require("probe.gl");function h(e){return e&&e.__esModule?e:{default:e}}var v="elements must be GL.ELEMENT_ARRAY_BUFFER",A=function(s){function h(i){var u,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,e.default)(this,h);var s=n.id||n.program&&n.program.id;return(u=(0,t.default)(this,(0,a.default)(h).call(this,i,Object.assign({},n,{id:s})))).buffer=null,u.bufferValue=null,u.isDefaultArray=n.isDefaultArray||!1,u.initialize(n),Object.seal((0,r.default)(u)),u}return(0,n.default)(h,s),(0,u.default)(h,null,[{key:"isSupported",value:function(e){return!(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).constantAttributeZero||((0,f.isWebGL2)(e)||"Chrome"===(0,c.getBrowser)())}},{key:"getDefaultArray",value:function(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new h(e,{handle:null,isDefaultArray:!0})),e.luma.defaultVertexArray}},{key:"getMaxAttributes",value:function(e){return h.MAX_ATTRIBUTES=h.MAX_ATTRIBUTES||e.getParameter(34921),h.MAX_ATTRIBUTES}},{key:"setConstant",value:function(e,t,r){switch(r.constructor){case Float32Array:h._setConstantFloatArray(e,t,r);break;case Int32Array:h._setConstantIntArray(e,t,r);break;case Uint32Array:h._setConstantUintArray(e,t,r);break;default:(0,b.assert)(!1)}}}]),(0,u.default)(h,[{key:"delete",value:function(){(0,i.default)((0,a.default)(h.prototype),"delete",this).call(this),this.buffer&&this.buffer.delete()}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.setProps(e)}},{key:"setProps",value:function(e){return this}},{key:"setElementBuffer",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(0,b.assert)(!t||34963===t.target,v),this.bind(function(){e.gl.bindBuffer(34963,t?t.handle:null)}),this}},{key:"setBuffer",value:function(e,t,r){if(34963===t.target)return this.setElementBuffer(t,r);var a=r.size,i=r.type,u=r.stride,n=r.offset,s=r.normalized,l=r.integer,o=r.divisor,c=this.gl;return e=Number(e),this.bind(function(){c.bindBuffer(34962,t.handle),l?((0,b.assert)((0,f.isWebGL2)(c)),c.vertexAttribIPointer(e,a,i,u,n)):c.vertexAttribPointer(e,a,i,s,u,n),c.enableVertexAttribArray(e),c.vertexAttribDivisor(e,o||0)}),this}},{key:"enable",value:function(e){var t=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!r&&0===e&&!h.isSupported(this.gl,{constantAttributeZero:!0})||(e=Number(e),this.bind(function(){return r?t.gl.enableVertexAttribArray(e):t.gl.disableVertexAttribArray(e)})),this}},{key:"getConstantBuffer",value:function(e,t,r){var a=this._normalizeConstantArrayValue(t,r),i=a.byteLength*e,u=a.length*e,n=!this.buffer;if(this.buffer=this.buffer||new l.default(this.gl,i),n=(n=n||this.buffer.reallocate(i))||!this._compareConstantArrayValues(a,this.bufferValue)){var s=(0,o.getScratchArray)(t.constructor,u);(0,o.fillArray)({target:s,source:a,start:0,count:u}),this.buffer.subData(s),this.bufferValue=t}return this.buffer}},{key:"_normalizeConstantArrayValue",value:function(e,t){return Array.isArray(e)?new Float32Array(e):e}},{key:"_compareConstantArrayValues",value:function(e,t){if(!e||!t||e.length!==t.length||e.constructor!==t.constructor)return!1;for(var r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}},{key:"_createHandle",value:function(){return this.gl.createVertexArray()}},{key:"_deleteHandle",value:function(e){return this.gl.deleteVertexArray(e),[this.elements]}},{key:"_bindHandle",value:function(e){this.gl.bindVertexArray(e)}},{key:"_getParameter",value:function(e,t){var r=this,a=t.location;return(0,b.assert)(Number.isFinite(a)),this.bind(function(){switch(e){case 34373:return r.gl.getVertexAttribOffset(a,e);default:return r.gl.getVertexAttrib(a,e)}})}},{key:"MAX_ATTRIBUTES",get:function(){return h.getMaxAttributes(this.gl)}}],[{key:"_setConstantFloatArray",value:function(e,t,r){switch(r.length){case 1:e.vertexAttrib1fv(t,r);break;case 2:e.vertexAttrib2fv(t,r);break;case 3:e.vertexAttrib3fv(t,r);break;case 4:e.vertexAttrib4fv(t,r);break;default:(0,b.assert)(!1)}}},{key:"_setConstantIntArray",value:function(e,t,r){switch((0,b.assert)((0,f.isWebGL2)(e)),r.length){case 1:e.vertexAttribI1iv(t,r);break;case 2:e.vertexAttribI2iv(t,r);break;case 3:e.vertexAttribI3iv(t,r);break;case 4:e.vertexAttribI4iv(t,r);break;default:(0,b.assert)(!1)}}},{key:"_setConstantUintArray",value:function(e,t,r){switch((0,b.assert)((0,f.isWebGL2)(e)),r.length){case 1:e.vertexAttribI1uiv(t,r);break;case 2:e.vertexAttribI2uiv(t,r);break;case 3:e.vertexAttribI3uiv(t,r);break;case 4:e.vertexAttribI4uiv(t,r);break;default:(0,b.assert)(!1)}}}]),h}(s.default);exports.default=A;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/assertThisInitialized":"Rs9H","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/get":"KGqu","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","./resource":"DwD3","./buffer":"d4ii","@luma.gl/gltools":"lAom","../utils/array-utils-flat":"vUP6","../utils":"CgZv","probe.gl":"TYNK"}],"uoYk":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("@babel/runtime/helpers/esm/classCallCheck")),t=u(require("@babel/runtime/helpers/esm/createClass")),r=require("@luma.gl/gltools"),s=u(require("./accessor")),i=u(require("./buffer")),n=u(require("./vertex-array-object")),a=require("../utils");function u(e){return e&&e.__esModule?e:{default:e}}var o="VertexArray: attributes must be Buffers or constants (i.e. typed array)",l=/^(.+)__LOCATION_([0-9]+)$/,c=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"],f=function(){function u(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,e.default)(this,u);var s=r.id||r.program&&r.program.id;this.id=s,this.gl=t,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new n.default(t),(0,a.stubRemovedMethods)(this,"VertexArray","v6.0",c),this.initialize(r),Object.seal(this)}return(0,t.default)(u,[{key:"delete",value:function(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}},{key:"reset",value:function(){this.elements=null,this.elementsAccessor=null;var e=this.vertexArrayObject.MAX_ATTRIBUTES;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}},{key:"setProps",value:function(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}},{key:"clearDrawParams",value:function(){this.drawParams=null}},{key:"getDrawParams",value:function(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}},{key:"setAttributes",value:function(e){var t=this;return Object.assign(this.attributes,e),this.vertexArrayObject.bind(function(){for(var r in e){var s=e[r];t._setAttribute(r,s)}t.gl.bindBuffer(34962,null)}),this}},{key:"setElementBuffer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.elements=e,this.elementsAccessor=t,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(e,t),this}},{key:"setBuffer",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(34963===t.target)return this.setElementBuffer(t,r);var s=this._resolveLocationAndAccessor(e,t,t.accessor,r),i=s.location,n=s.accessor;return i>=0&&(this.values[i]=t,this.accessors[i]=n,this.clearDrawParams(),this.vertexArrayObject.setBuffer(i,t,n)),this}},{key:"setConstant",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=this._resolveLocationAndAccessor(e,t,Object.assign({size:t.length},r)),i=s.location,n=s.accessor;return i>=0&&(t=this.vertexArrayObject._normalizeConstantArrayValue(t,n),this.values[i]=t,this.accessors[i]=n,this.clearDrawParams(),this.vertexArrayObject.enable(i,!1)),this}},{key:"unbindBuffers",value:function(){var e=this;return this.vertexArrayObject.bind(function(){e.elements&&e.vertexArrayObject.setElementBuffer(null),e.buffer=e.buffer||new i.default(e.gl,{accessor:{size:4}});for(var t=0;t<e.vertexArrayObject.MAX_ATTRIBUTES;t++)e.values[t]instanceof i.default&&(e.gl.disableVertexAttribArray(t),e.gl.bindBuffer(34962,e.buffer.handle),e.gl.vertexAttribPointer(t,1,5126,!1,0,0))}),this}},{key:"bindBuffers",value:function(){var e=this;return this.vertexArrayObject.bind(function(){e.elements&&e.setElementBuffer(e.elements);for(var t=0;t<e.vertexArrayObject.MAX_ATTRIBUTES;t++){var r=e.values[t];r instanceof i.default&&e.setBuffer(t,r)}}),this}},{key:"bindForDraw",value:function(e,t,r){var s,i=this;return this.vertexArrayObject.bind(function(){i._setConstantAttributes(e,t),s=r()}),s}},{key:"_resolveLocationAndAccessor",value:function(e,t,i,n){var u=this,o=this._getAttributeIndex(e),l=o.location,c=o.name;if(!Number.isFinite(l)||l<0)return this.unused[e]=t,r.log.once(3,function(){return"unused value ".concat(e," in ").concat(u.id)})(),this;var f=this._getAttributeInfo(c||l);if(!f)return{location:-1,accessor:null};var h=this.accessors[l]||{},v=s.default.resolve(f.accessor,h,i,n),d=v.size,b=v.type;return(0,a.assert)(Number.isFinite(d)&&Number.isFinite(b)),{location:l,accessor:v}}},{key:"_getAttributeInfo",value:function(e){return this.configuration&&this.configuration.getAttributeInfo(e)}},{key:"_getAttributeIndex",value:function(e){var t=Number(e);if(Number.isFinite(t))return{location:t};var r=l.exec(e),s=r?r[1]:e,i=r?Number(r[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(s)+i,name:s}:{location:-1}}},{key:"_setAttribute",value:function(e,t){if(t instanceof i.default)this.setBuffer(e,t);else if(Array.isArray(t)&&t.length&&t[0]instanceof i.default){var r=t[0],s=t[1];this.setBuffer(e,r,s)}else if(ArrayBuffer.isView(t)||Array.isArray(t)){var n=t;this.setConstant(e,n)}else{if(!(t.buffer instanceof i.default))throw new Error(o);var a=t;this.setBuffer(e,a.buffer,a)}}},{key:"_setConstantAttributes",value:function(e,t){var r=Math.max(0|e,0|t),s=this.values[0];ArrayBuffer.isView(s)&&this._setConstantAttributeZero(s,r);for(var i=1;i<this.vertexArrayObject.MAX_ATTRIBUTES;i++)s=this.values[i],ArrayBuffer.isView(s)&&this._setConstantAttribute(i,s)}},{key:"_setConstantAttributeZero",value:function(e,t){if(n.default.isSupported(this.gl,{constantAttributeZero:!0}))this._setConstantAttribute(0,e);else{var r=this.vertexArrayObject.getConstantBuffer(t,e);this.vertexArrayObject.setBuffer(0,r,this.accessors[0])}}},{key:"_setConstantAttribute",value:function(e,t){n.default.setConstant(this.gl,e,t)}},{key:"_updateDrawParams",value:function(){for(var e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0},t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)this._updateDrawParamsForLocation(e,t);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}},{key:"_updateDrawParamsForLocation",value:function(e,t){var r=this.values[t],s=this.accessors[t];if(r){var n=s.divisor>0;if(e.isInstanced=e.isInstanced||n,r instanceof i.default){var a=r;if(n){var u=a.getVertexCount(s);e.instanceCount=Math.min(e.instanceCount,u)}else{var o=a.getVertexCount(s);e.vertexCount=Math.min(e.vertexCount,o)}}}}},{key:"setElements",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r.log.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,t)}}]),u}();exports.default=f;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@luma.gl/gltools":"lAom","./accessor":"OEzr","./buffer":"d4ii","./vertex-array-object":"R2V4","../utils":"CgZv"}],"ZKrJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("@babel/runtime/helpers/esm/defineProperty")),t=a(require("@babel/runtime/helpers/esm/classCallCheck")),r=a(require("@babel/runtime/helpers/esm/createClass")),s=require("../webgl-utils/attribute-utils"),i=require("../utils");function a(e){return e&&e.__esModule?e:{default:e}}var u="UniformBufferLayout illegal argument",n=5126,l=5124,f=5125,o=function(){function a(r){var s;for(var i in(0,t.default)(this,a),this.layout={},this.size=0,r)this._addUniform(i,r[i]);this.size+=(4-this.size%4)%4;var u=new Float32Array(this.size);this.typedArray=(s={},(0,e.default)(s,n,u),(0,e.default)(s,l,new Int32Array(u.buffer)),(0,e.default)(s,f,new Uint32Array(u.buffer)),s)}return(0,r.default)(a,[{key:"getBytes",value:function(){return 4*this.size}},{key:"getData",value:function(){return this.typedArray[n]}},{key:"getSubData",value:function(e){var t,r;if(void 0===e)t=this.data,r=0;else{var s=this.offsets[e],i=s+this.sizes[e];t=this.data.subarray(s,i),r=4*s}return{data:t,offset:r}}},{key:"setUniforms",value:function(e){for(var t in e)this._setValue(t,e[t]);return this}},{key:"_setValue",value:function(e,t){var r=this.layout[e];(0,i.assert)(r,"UniformLayoutStd140 illegal argument");var s=this.typedArray[r.type];1===r.size?s[r.offset]=t:s.set(t,r.offset)}},{key:"_addUniform",value:function(e,t){var r=(0,s.decomposeCompositeGLType)(t);(0,i.assert)(r,u);var a=r.type,n=r.components;this.size=this._alignTo(this.size,n);var l=this.size;this.size+=n,this.layout[e]={type:a,size:n,offset:l}}},{key:"_alignTo",value:function(e,t){switch(t){case 1:return e;case 2:return e+e%2;default:return e+(4-e%4)%4}}}]),a}();exports.default=o;
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","../webgl-utils/attribute-utils":"r3DH","../utils":"CgZv"}],"VDWA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDebugTableForUniforms=t;var e=n(require("@babel/runtime/helpers/esm/defineProperty")),r=require("../utils");function n(e){return e&&e.__esModule?e:{default:e}}function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.header,u=void 0===t?"Uniforms":t,o=n.program,i=n.uniforms,l=n.undefinedOnly,f=void 0!==l&&l;(0,r.assert)(o);var d=o._uniformSetters,m={},v=Object.keys(d).sort(),y=0,s=!0,c=!1,h=void 0;try{for(var b,O=v[Symbol.iterator]();!(s=(b=O.next()).done);s=!0){var p=b.value;p.match(".*_.*")||p.match(".*Matrix")||a({table:m,header:u,uniforms:i,uniformName:p,undefinedOnly:f})&&y++}}catch(A){c=!0,h=A}finally{try{s||null==O.return||O.return()}finally{if(c)throw h}}var x=!0,N=!1,T=void 0;try{for(var _,S=v[Symbol.iterator]();!(x=(_=S.next()).done);x=!0){var g=_.value;g.match(".*Matrix")&&a({table:m,header:u,uniforms:i,uniformName:g,undefinedOnly:f})&&y++}}catch(A){N=!0,T=A}finally{try{x||null==S.return||S.return()}finally{if(N)throw T}}var D=!0,M=!1,U=void 0;try{for(var w,P=v[Symbol.iterator]();!(D=(w=P.next()).done);D=!0){var V=w.value;m[V]||a({table:m,header:u,uniforms:i,uniformName:V,undefinedOnly:f})&&y++}}catch(A){M=!0,U=A}finally{try{D||null==P.return||P.return()}finally{if(M)throw U}}var j=0,q={};if(!f)for(var E in i){var k=i[E];m[E]||(j++,q[E]=(0,e.default)({Type:"NOT USED: ".concat(k)},u,(0,r.formatValue)(k)))}return{table:m,count:y,unusedTable:q,unusedCount:j}}function a(n){var t,a=n.table,o=n.header,i=n.uniforms,l=n.uniformName,f=n.undefinedOnly,d=i[l],m=u(d);return(!f||!m)&&(a[l]=(t={},(0,e.default)(t,o,m?(0,r.formatValue)(d):"N/A"),(0,e.default)(t,"Uniform Type",m?d:"NOT PROVIDED"),t),!0)}function u(e){return null!=e}
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","../utils":"CgZv"}],"TDxR":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDebugTableForVertexArray=o;var e=c(require("@babel/runtime/helpers/esm/defineProperty")),t=c(require("../classes/buffer")),r=require("../webgl-utils"),a=require("../webgl-utils/attribute-utils"),n=require("../utils");function c(e){return e&&e.__esModule?e:{default:e}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.vertexArray,r=e.header,a=void 0===r?"Attributes":r;if(!t.configuration)return{};var n={};t.elements&&(n.ELEMENT_ARRAY_BUFFER=i(t,t.elements,null,a));var c=t.values;for(var o in c){var l=t._getAttributeInfo(o);if(l){var s="".concat(o,": ").concat(l.name),f=t.accessors[l.location];f&&(s="".concat(o,": ").concat(u(l.name,f))),n[s]=i(t,c[o],f,a)}}return n}function i(a,c,o,i){var u,l,s=a.gl;if(!c)return l={},(0,e.default)(l,i,"null"),(0,e.default)(l,"Format ","N/A"),l;var f,d,g,v="NOT PROVIDED",b="N/A",m="N/A",y="N/A";if(o&&(v=o.type,b=o.size,f=-1!==(v=String(v).replace("Array","")).indexOf("nt")),c instanceof t.default){var A,p,E=c,_=E.getDebugData(),x=_.data;if(d=_.modified?"*":"",g=x,m=(y=E.byteLength)/x.BYTES_PER_ELEMENT/b,o){var N=o.divisor>0;p="".concat(N?"I ":"P "," ").concat(m," (x").concat(b,"=").concat(y," bytes ").concat((0,r.getKey)(s,v),")")}else f=!0,p="".concat(y," bytes");return A={},(0,e.default)(A,i,"".concat(d).concat((0,n.formatValue)(g,{size:b,isInteger:f}))),(0,e.default)(A,"Format ",p),A}return g=c,b=c.length,f=-1!==(v=String(c.constructor.name).replace("Array","")).indexOf("nt"),u={},(0,e.default)(u,i,"".concat((0,n.formatValue)(g,{size:b,isInteger:f})," (constant)")),(0,e.default)(u,"Format ","".concat(b,"x").concat(v," (constant)")),u}function u(e,t){var r=t.type,n=t.size,c=(0,a.getCompositeGLType)(r,n);return c?"".concat(e," (").concat(c.name,")"):e}
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","../classes/buffer":"d4ii","../webgl-utils":"GZNE","../webgl-utils/attribute-utils":"r3DH","../utils":"CgZv"}],"jWha":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDebugTableForProgramConfiguration=a;var r=t(require("@babel/runtime/helpers/esm/defineProperty")),e=require("../webgl-utils/attribute-utils");function t(r){return r&&r.__esModule?r:{default:r}}function a(e){var t={},a="Accessors for ".concat(e.id),o=!0,i=!1,u=void 0;try{for(var l,c=e.attributeInfos[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var s=l.value;if(s){var f=n(s);t["in ".concat(f)]=(0,r.default)({},a,JSON.stringify(s.accessor))}}}catch(h){i=!0,u=h}finally{try{o||null==c.return||c.return()}finally{if(i)throw u}}var y=!0,v=!1,d=void 0;try{for(var b,g=e.varyingInfos[Symbol.iterator]();!(y=(b=g.next()).done);y=!0){var m=b.value;if(m){var p=n(m);t["out ".concat(p)]=(0,r.default)({},a,JSON.stringify(m.accessor))}}}catch(h){v=!0,d=h}finally{try{y||null==g.return||g.return()}finally{if(v)throw d}}return t}function n(r){var t=r.accessor,a=t.type,n=t.size,o=(0,e.getCompositeGLType)(a,n);return o?"".concat(o.name," ").concat(r.name):r.name}
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","../webgl-utils/attribute-utils":"r3DH"}],"KdJH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"lumaStats",{enumerable:!0,get:function(){return e.lumaStats}}),Object.defineProperty(exports,"requestAnimationFrame",{enumerable:!0,get:function(){return r.requestAnimationFrame}}),Object.defineProperty(exports,"cancelAnimationFrame",{enumerable:!0,get:function(){return r.cancelAnimationFrame}}),Object.defineProperty(exports,"cloneTextureFrom",{enumerable:!0,get:function(){return t.cloneTextureFrom}}),Object.defineProperty(exports,"getKeyValue",{enumerable:!0,get:function(){return n.getKeyValue}}),Object.defineProperty(exports,"getKey",{enumerable:!0,get:function(){return n.getKey}}),Object.defineProperty(exports,"getContextInfo",{enumerable:!0,get:function(){return u.getContextInfo}}),Object.defineProperty(exports,"getGLContextInfo",{enumerable:!0,get:function(){return u.getGLContextInfo}}),Object.defineProperty(exports,"getContextLimits",{enumerable:!0,get:function(){return u.getContextLimits}}),Object.defineProperty(exports,"FEATURES",{enumerable:!0,get:function(){return o.FEATURES}}),Object.defineProperty(exports,"hasFeature",{enumerable:!0,get:function(){return a.hasFeature}}),Object.defineProperty(exports,"hasFeatures",{enumerable:!0,get:function(){return a.hasFeatures}}),Object.defineProperty(exports,"getFeatures",{enumerable:!0,get:function(){return a.getFeatures}}),Object.defineProperty(exports,"canCompileGLGSExtension",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"Accessor",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"Buffer",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(exports,"Shader",{enumerable:!0,get:function(){return c.Shader}}),Object.defineProperty(exports,"VertexShader",{enumerable:!0,get:function(){return c.VertexShader}}),Object.defineProperty(exports,"FragmentShader",{enumerable:!0,get:function(){return c.FragmentShader}}),Object.defineProperty(exports,"Program",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"Framebuffer",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(exports,"Renderbuffer",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(exports,"Texture2D",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(exports,"TextureCube",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(exports,"clear",{enumerable:!0,get:function(){return m.clear}}),Object.defineProperty(exports,"clearBuffer",{enumerable:!0,get:function(){return m.clearBuffer}}),Object.defineProperty(exports,"readPixelsToArray",{enumerable:!0,get:function(){return x.readPixelsToArray}}),Object.defineProperty(exports,"readPixelsToBuffer",{enumerable:!0,get:function(){return x.readPixelsToBuffer}}),Object.defineProperty(exports,"copyToDataUrl",{enumerable:!0,get:function(){return x.copyToDataUrl}}),Object.defineProperty(exports,"copyToImage",{enumerable:!0,get:function(){return x.copyToImage}}),Object.defineProperty(exports,"copyToTexture",{enumerable:!0,get:function(){return x.copyToTexture}}),Object.defineProperty(exports,"blit",{enumerable:!0,get:function(){return x.blit}}),Object.defineProperty(exports,"Query",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(exports,"Texture3D",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(exports,"TransformFeedback",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(exports,"VertexArrayObject",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(exports,"VertexArray",{enumerable:!0,get:function(){return q.default}}),Object.defineProperty(exports,"UniformBufferLayout",{enumerable:!0,get:function(){return F.default}}),Object.defineProperty(exports,"setPathPrefix",{enumerable:!0,get:function(){return T.setPathPrefix}}),Object.defineProperty(exports,"loadFile",{enumerable:!0,get:function(){return T.loadFile}}),Object.defineProperty(exports,"loadImage",{enumerable:!0,get:function(){return T.loadImage}}),Object.defineProperty(exports,"getShaderName",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(exports,"getShaderVersion",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(exports,"log",{enumerable:!0,get:function(){return A.log}}),Object.defineProperty(exports,"assert",{enumerable:!0,get:function(){return U.default}}),Object.defineProperty(exports,"uid",{enumerable:!0,get:function(){return C.uid}}),Object.defineProperty(exports,"isObjectEmpty",{enumerable:!0,get:function(){return C.isObjectEmpty}}),Object.defineProperty(exports,"parseUniformName",{enumerable:!0,get:function(){return D.parseUniformName}}),Object.defineProperty(exports,"getUniformSetter",{enumerable:!0,get:function(){return D.getUniformSetter}}),Object.defineProperty(exports,"getDebugTableForUniforms",{enumerable:!0,get:function(){return V.getDebugTableForUniforms}}),Object.defineProperty(exports,"getDebugTableForVertexArray",{enumerable:!0,get:function(){return I.getDebugTableForVertexArray}}),Object.defineProperty(exports,"getDebugTableForProgramConfiguration",{enumerable:!0,get:function(){return E.getDebugTableForProgramConfiguration}});var e=require("./init"),r=require("./webgl-utils/request-animation-frame"),t=require("./webgl-utils/texture-utils"),n=require("./webgl-utils/constants-to-keys"),u=require("./features/limits"),o=require("./features/webgl-features-table"),a=require("./features/features"),i=v(require("./features/check-glsl-extension")),f=v(require("./classes/accessor")),s=v(require("./classes/buffer")),c=require("./classes/shader"),l=v(require("./classes/program")),b=v(require("./classes/framebuffer")),p=v(require("./classes/renderbuffer")),g=v(require("./classes/texture-2d")),d=v(require("./classes/texture-cube")),m=require("./classes/clear"),x=require("./classes/copy-and-blit"),y=v(require("./classes/query")),P=v(require("./classes/texture-3d")),j=v(require("./classes/transform-feedback")),O=v(require("./classes/vertex-array-object")),q=v(require("./classes/vertex-array")),F=v(require("./classes/uniform-buffer-layout")),T=require("./utils/load-file"),h=v(require("./glsl-utils/get-shader-name")),S=v(require("./glsl-utils/get-shader-version")),A=require("@luma.gl/gltools"),U=v(require("./utils/assert")),C=require("./utils/utils"),D=require("./classes/uniforms"),V=require("./debug/debug-uniforms"),I=require("./debug/debug-vertex-array"),E=require("./debug/debug-program-configuration");function v(e){return e&&e.__esModule?e:{default:e}}
},{"./init":"HGnm","./webgl-utils/request-animation-frame":"AGkC","./webgl-utils/texture-utils":"oR6C","./webgl-utils/constants-to-keys":"UyRF","./features/limits":"JRcT","./features/webgl-features-table":"UMAV","./features/features":"qa8S","./features/check-glsl-extension":"CuwP","./classes/accessor":"OEzr","./classes/buffer":"d4ii","./classes/shader":"Mfxg","./classes/program":"mrLl","./classes/framebuffer":"QRT8","./classes/renderbuffer":"baET","./classes/texture-2d":"YE27","./classes/texture-cube":"eOjF","./classes/clear":"ztYM","./classes/copy-and-blit":"DmZq","./classes/query":"utYa","./classes/texture-3d":"mmMI","./classes/transform-feedback":"us29","./classes/vertex-array-object":"R2V4","./classes/vertex-array":"uoYk","./classes/uniform-buffer-layout":"ZKrJ","./utils/load-file":"QQ37","./glsl-utils/get-shader-name":"WHl0","./glsl-utils/get-shader-version":"ZDha","@luma.gl/gltools":"lAom","./utils/assert":"yDUI","./utils/utils":"OhKi","./classes/uniforms":"DC0O","./debug/debug-uniforms":"VDWA","./debug/debug-vertex-array":"TDxR","./debug/debug-program-configuration":"jWha"}],"HQLj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("@babel/runtime/helpers/esm/typeof")),i=u(require("@babel/runtime/regenerator")),t=u(require("@babel/runtime/helpers/esm/asyncToGenerator")),n=u(require("@babel/runtime/helpers/esm/classCallCheck")),s=u(require("@babel/runtime/helpers/esm/createClass")),a=require("@luma.gl/gltools"),r=require("@luma.gl/webgl"),o=require("probe.gl/env");function u(e){return e&&e.__esModule?e:{default:e}}var l=(0,o.isBrowser)()&&"undefined"!=typeof document,h=0,m=function(){function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,n.default)(this,o);var i=e.onCreateContext,t=void 0===i?function(e){return(0,a.createGLContext)(e)}:i,s=e.onAddHTML,u=void 0===s?null:s,l=e.onInitialize,m=void 0===l?function(){}:l,d=e.onRender,p=void 0===d?function(){}:d,f=e.onFinalize,c=void 0===f?function(){}:f,v=e.onError,g=e.gl,_=void 0===g?null:g,y=e.glOptions,w=void 0===y?{}:y,P=e.debug,b=void 0!==P&&P,k=e.createFramebuffer,F=void 0!==k&&k,x=e.autoResizeViewport,R=void 0===x||x,z=e.autoResizeDrawingBuffer,D=void 0===z||z,T=e.stats,C=void 0===T?r.lumaStats.get("animation-loop-".concat(h++)):T,L=e.useDevicePixels,A=void 0===L||L;"useDevicePixelRatio"in e&&(r.log.deprecated("useDevicePixelRatio","useDevicePixels")(),A=e.useDevicePixelRatio),this.props={onCreateContext:t,onAddHTML:u,onInitialize:m,onRender:p,onFinalize:c,onError:v,gl:_,glOptions:w,debug:b,createFramebuffer:F},this.gl=_,this.needsRedraw=null,this.timeline=null,this.stats=C,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:R,autoResizeDrawingBuffer:D,useDevicePixels:A}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}return(0,s.default)(o,[{key:"delete",value:function(){this.stop(),this._setDisplay(null)}},{key:"setNeedsRedraw",value:function(e){return(0,r.assert)("string"==typeof e),this.needsRedraw=this.needsRedraw||e,this}},{key:"setProps",value:function(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}},{key:"start",value:function(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._running)return this;this._running=!0;var t=this._getPageLoadPromise().then(function(){return!e._running||e._initialized?null:(e._createWebGLContext(i),e._createFramebuffer(),e._startEventHandling(),e._initializeCallbackData(),e._updateCallbackData(),e._resizeCanvasDrawingBuffer(),e._resizeViewport(),e._gpuTimeQuery=r.Query.isSupported(e.gl,["timers"])?new r.Query(e.gl):null,e._initialized=!0,e.onInitialize(e.animationProps))}).then(function(i){e._running&&(e._addCallbackData(i||{}),!1!==i&&e._startLoop())});return this.props.onError&&t.catch(this.props.onError),this}},{key:"redraw",value:function(){return this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers(),this}},{key:"stop",value:function(){return this._running&&(this._finalizeCallbackData(),(0,r.cancelAnimationFrame)(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}},{key:"attachTimeline",value:function(e){return this.timeline=e,this.timeline}},{key:"detachTimeline",value:function(){this.timeline=null}},{key:"waitForRender",value:function(){var e=this;return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(function(i){e._resolveNextFrame=i})),this._nextFramePromise}},{key:"toDataURL",value:function(){var e=(0,t.default)(i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setNeedsRedraw("toDataURL"),e.next=3,this.waitForRender();case 3:return e.abrupt("return",this.gl.canvas.toDataURL());case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"onCreateContext",value:function(){var e;return(e=this.props).onCreateContext.apply(e,arguments)}},{key:"onInitialize",value:function(){var e;return(e=this.props).onInitialize.apply(e,arguments)}},{key:"onRender",value:function(){var e;return(e=this.props).onRender.apply(e,arguments)}},{key:"onFinalize",value:function(){var e;return(e=this.props).onFinalize.apply(e,arguments)}},{key:"getHTMLControlValue",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=document.getElementById(e);return t?Number(t.value):i}},{key:"setViewParameters",value:function(){return r.log.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}},{key:"_startLoop",value:function(){var e=this;(0,r.cancelAnimationFrame)(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(function i(){e._running&&(e.redraw(),e._animationFrameId=e._requestAnimationFrame(i))})}},{key:"_getPageLoadPromise",value:function(){return this._pageLoadPromise||(this._pageLoadPromise=l?new Promise(function(e,i){l&&"complete"===document.readyState?e(document):window.addEventListener("load",function(){e(document)})}):Promise.resolve({})),this._pageLoadPromise}},{key:"_setDisplay",value:function(e){this.display&&(this.display.delete(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}},{key:"_requestAnimationFrame",value:function(e){this.display&&this.display.requestAnimationFrame(e)||(0,r.requestAnimationFrame)(e)}},{key:"_renderFrame",value:function(){var e;this.display?(e=this.display)._renderFrame.apply(e,arguments):this.onRender.apply(this,arguments)}},{key:"_clearNeedsRedraw",value:function(){this.needsRedraw=null}},{key:"_setupFrame",value:function(){this._onSetupFrame?this._onSetupFrame(this.animationProps):(this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer())}},{key:"_initializeCallbackData",value:function(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}},{key:"_updateCallbackData",value:function(){var e=this._getSizeAndAspect(),i=e.width,t=e.height,n=e.aspect;i===this.animationProps.width&&t===this.animationProps.height||this.setNeedsRedraw("drawing buffer resized"),n!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=i,this.animationProps.height=t,this.animationProps.aspect=n,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}},{key:"_finalizeCallbackData",value:function(){this.onFinalize(this.animationProps)}},{key:"_addCallbackData",value:function(i){"object"===(0,e.default)(i)&&null!==i&&(this.animationProps=Object.assign({},this.animationProps,i))}},{key:"_createWebGLContext",value:function(e){if(this.offScreen=e.canvas&&"undefined"!=typeof OffscreenCanvas&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,this.props.glOptions),this.gl=this.props.gl?(0,a.instrumentGLContext)(this.props.gl,e):this.onCreateContext(e),!(0,a.isWebGL)(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");(0,a.resetParameters)(this.gl),this._createInfoDiv()}},{key:"_createInfoDiv",value:function(){if(this.gl.canvas&&this.props.onAddHTML){var e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";var i=document.createElement("div");i.style.position="absolute",i.style.left="10px",i.style.bottom="10px",i.style.width="300px",i.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(i);var t=this.props.onAddHTML(i);t&&(i.innerHTML=t)}}},{key:"_getSizeAndAspect",value:function(){var e=this.gl.drawingBufferWidth,i=this.gl.drawingBufferHeight,t=1,n=this.gl.canvas;return n&&n.clientHeight?t=n.clientWidth/n.clientHeight:e>0&&i>0&&(t=e/i),{width:e,height:i,aspect:t}}},{key:"_resizeViewport",value:function(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}},{key:"_resizeCanvasDrawingBuffer",value:function(){this.autoResizeDrawingBuffer&&(0,a.resizeGLContext)(this.gl,{useDevicePixels:this.useDevicePixels})}},{key:"_createFramebuffer",value:function(){this.props.createFramebuffer&&(this.framebuffer=new r.Framebuffer(this.gl))}},{key:"_resizeFramebuffer",value:function(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}},{key:"_beginTimers",value:function(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}},{key:"_endTimers",value:function(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}},{key:"_startEventHandling",value:function(){var e=this.gl.canvas;e&&(e.addEventListener("mousemove",this._onMousemove),e.addEventListener("mouseleave",this._onMouseleave))}},{key:"_onMousemove",value:function(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}},{key:"_onMouseleave",value:function(e){this.animationProps._mousePosition=null}}]),o}();exports.default=m;
},{"@babel/runtime/helpers/esm/typeof":"zsbK","@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@luma.gl/gltools":"lAom","@luma.gl/webgl":"KdJH","probe.gl/env":"d3vq"}],"A8gs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FRAGMENT_SHADER=exports.VERTEX_SHADER=void 0;var e="vs";exports.VERTEX_SHADER=e;var r="fs";exports.FRAGMENT_SHADER=r;
},{}],"fG4k":[function(require,module,exports) {
"use strict";function e(e,r){if(!e)throw new Error(r||"shadertools: assertion failed.")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"JUP5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"assert",{enumerable:!0,get:function(){return e.default}});var e=r(require("./assert"));function r(e){return e&&e.__esModule?e:{default:e}}
},{"./assert":"fG4k"}],"p0tA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parsePropTypes=a;var e=r(require("@babel/runtime/helpers/esm/typeof"));function r(e){return e&&e.__esModule?e:{default:e}}var t={number:{validate:function(e,r){return Number.isFinite(e)&&(!("max"in r)||e<=r.max)&&(!("min"in r)||e>=r.min)}},array:{validate:function(e,r){return Array.isArray(e)||ArrayBuffer.isView(e)}}};function a(e){var r={};for(var t in e){var a=n(e[t]);r[t]=a}return r}function n(e){var r=i(e);return"object"===r?e?"type"in e?Object.assign({},e,t[e.type]):"value"in e?(r=i(e.value),Object.assign({type:r},e,t[r])):{type:"object",value:e}:{type:"object",value:null}:Object.assign({type:r,value:e},t[r])}function i(r){return Array.isArray(r)||ArrayBuffer.isView(r)?"array":(0,e.default)(r)}
},{"@babel/runtime/helpers/esm/typeof":"zsbK"}],"X8lP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.normalizeShaderModule=u,exports.default=void 0;var e=r(require("@babel/runtime/helpers/esm/classCallCheck")),t=r(require("@babel/runtime/helpers/esm/createClass")),n=require("../utils"),i=require("./filters/prop-types");function r(e){return e&&e.__esModule?e:{default:e}}var s="vs",a="fs",o=function(){function r(t){var s=t.name,a=t.vs,o=t.fs,u=t.dependencies,f=void 0===u?[]:u,d=t.uniforms,l=t.getUniforms,v=t.deprecations,h=void 0===v?[]:v,p=t.defines,m=void 0===p?{}:p,g=t.inject,y=void 0===g?{}:g,U=t.vertexShader,k=t.fragmentShader;(0,e.default)(this,r),(0,n.assert)("string"==typeof s),this.name=s,this.vs=a||U,this.fs=o||k,this.getModuleUniforms=l,this.dependencies=f,this.deprecations=this._parseDeprecationDefinitions(h),this.defines=m,this.injections=c(y),d&&(this.uniforms=(0,i.parsePropTypes)(d))}return(0,t.default)(r,[{key:"getModuleSource",value:function(e){var t;switch(e){case s:t=this.vs||"";break;case a:t=this.fs||"";break;default:(0,n.assert)(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),"\n").concat(t,"// END MODULE_").concat(this.name,"\n\n")}},{key:"getUniforms",value:function(e,t){return this.getModuleUniforms?this.getModuleUniforms(e,t):this.uniforms?this._defaultGetUniforms(e):{}}},{key:"getDefines",value:function(){return this.defines}},{key:"checkDeprecations",value:function(e,t){this.deprecations.forEach(function(n){n.regex.test(e)&&(n.deprecated?t.deprecated(n.old,n.new)():t.removed(n.old,n.new)())})}},{key:"_parseDeprecationDefinitions",value:function(e){return e.forEach(function(e){switch(e.type){case"function":e.regex=new RegExp("\\b".concat(e.old,"\\("));break;default:e.regex=new RegExp("".concat(e.type," ").concat(e.old,";"))}}),e}},{key:"_defaultGetUniforms",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},i=this.uniforms;for(var r in i){var s=i[r];r in e&&!s.private?(s.validate&&(0,n.assert)(s.validate(e[r],s),"".concat(this.name,": invalid ").concat(r)),t[r]=e[r]):t[r]=s.value}return t}}]),r}();function u(e){if(!e.normalized&&(e.normalized=!0,e.uniforms&&!e.getUniforms)){var t=new o(e);e.getUniforms=t.getUniforms.bind(t)}return e}function c(e){var t={vs:{},fs:{}};for(var n in e){var i=e[n];"string"==typeof i&&(i={injection:i}),t[n.slice(0,2)][n]=i}return t}exports.default=o;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","../utils":"JUP5","./filters/prop-types":"p0tA"}],"vIC4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resolveModules=t,exports.TEST_EXPORTS=void 0;var e=n(require("./shader-module")),r=require("../utils");function n(e){return e&&e.__esModule?e:{default:e}}function t(e){return o(u(e))}function o(e){var r={},n={};return a({modules:e,level:0,moduleMap:r,moduleDepth:n}),Object.keys(n).sort(function(e,r){return n[r]-n[e]}).map(function(e){return r[e]})}function a(e){var r=e.modules,n=e.level,t=e.moduleMap,o=e.moduleDepth;if(n>=5)throw new Error("Possible loop in shader dependency graph");var u=!0,d=!1,l=void 0;try{for(var i,s=r[Symbol.iterator]();!(u=(i=s.next()).done);u=!0){var c=i.value;t[c.name]=c,(void 0===o[c.name]||o[c.name]<n)&&(o[c.name]=n)}}catch(S){d=!0,l=S}finally{try{u||null==s.return||s.return()}finally{if(d)throw l}}var p=!0,m=!1,f=void 0;try{for(var v,h=r[Symbol.iterator]();!(p=(v=h.next()).done);p=!0){var y=v.value;y.dependencies&&a({modules:y.dependencies,level:n+1,moduleMap:t,moduleDepth:o})}}catch(S){m=!0,f=S}finally{try{p||null==h.return||h.return()}finally{if(m)throw f}}}function u(n,t){return n.map(function(n){return n instanceof e.default?n:((0,r.assert)("string"!=typeof n,"Shader module use by name is deprecated. Import shader module '".concat(n,"' and use it directly.")),(0,r.assert)(n.name,"shader module has no name"),(n=new e.default(n)).dependencies=u(n.dependencies),n)})}var d={getShaderDependencies:o,getDependencyGraph:a};exports.TEST_EXPORTS=d;
},{"./shader-module":"X8lP","../utils":"JUP5"}],"w4sN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getContextInfo=c,exports.canCompileGLGSExtension=f,exports.hasFeatures=h,exports.FEATURES=void 0;var e=t(require("./is-old-ie")),r=t(require("./assert"));function t(e){return e&&e.__esModule?e:{default:e}}var a=7936,n=7937,o=7938,i=35724,u={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},d={};function s(e){return Boolean(e&&2===e._version)}function c(e){var r=e.getExtension("WEBGL_debug_renderer_info"),t=e.getParameter(r&&r.UNMASKED_VENDOR_WEBGL||a),u=e.getParameter(r&&r.UNMASKED_RENDERER_WEBGL||n);return{gpuVendor:E(t,u),vendor:t,renderer:u,version:e.getParameter(o),shadingLanguageVersion:e.getParameter(i)}}function E(e,r){return e.match(/NVIDIA/i)||r.match(/NVIDIA/i)?"NVIDIA":e.match(/INTEL/i)||r.match(/INTEL/i)?"INTEL":e.match(/AMD/i)||r.match(/AMD/i)||e.match(/ATI/i)||r.match(/ATI/i)?"AMD":"UNKNOWN GPU"}exports.FEATURES=d,Object.keys(u).forEach(function(e){d[e]=e});var _={};function f(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=u[a];if((0,r.default)(o,a),!(0,e.default)(n))return!0;if(a in _)return _[a];var i=o[0],d=n.behavior||"enable",s="#extension GL_".concat(i," : ").concat(d,"\nvoid main(void) {}"),c=t.createShader(35633);t.shaderSource(c,s),t.compileShader(c);var E=t.getShaderParameter(c,35713);return t.deleteShader(c),_[a]=E,E}function v(e,t){var a=u[t];(0,r.default)(a,t);var n=s(e)&&a[1]||a[0],o="string"==typeof n?Boolean(e.getExtension(n)):n;return(0,r.default)(!1===o||!0===o),o}function h(e,r){return(r=Array.isArray(r)?r:[r]).every(function(r){return v(e,r)})}
},{"./is-old-ie":"tGta","./assert":"fG4k"}],"iiHz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getPlatformShaderDefines=n,exports.getVersionDefines=t;var e=require("../utils/webgl-info");function n(n){switch((0,e.getContextInfo)(n).gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}function t(n,t,i){var r="#if (__VERSION__ > 120)\n\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return(0,e.hasFeatures)(n,e.FEATURES.GLSL_FRAG_DEPTH)&&(r+="// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),(0,e.hasFeatures)(n,e.FEATURES.GLSL_DERIVATIVES)&&(0,e.canCompileGLGSExtension)(n,e.FEATURES.GLSL_DERIVATIVES)&&(r+="// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define DERIVATIVES\n#endif\n"),(0,e.hasFeatures)(n,e.FEATURES.GLSL_FRAG_DATA)&&(0,e.canCompileGLGSExtension)(n,e.FEATURES.GLSL_FRAG_DATA,{behavior:"require"})&&(r+="// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define DRAW_BUFFERS\n#endif\n"),(0,e.hasFeatures)(n,e.FEATURES.GLSL_TEXTURE_LOD)&&(r+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n# define TEXTURE_LOD\n#define texture2DLod texture2DLodEXT\n#define texture2DProjLod texture2DProjLodEXT\n#define texture2DProjLod texture2DProjLodEXT\n#define textureCubeLod textureCubeLodEXT\n#define texture2DGrad texture2DGradEXT\n#define texture2DProjGrad texture2DProjGradEXT\n#define texture2DProjGrad texture2DProjGradEXT\n#define textureCubeGrad textureCubeGradEXT\n#endif\n"),r}
},{"../utils/webgl-info":"w4sN"}],"qukd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MODULE_INJECTORS_FS=exports.MODULE_INJECTORS_VS=void 0;var o="#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n";exports.MODULE_INJECTORS_VS=o;var r="#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n";exports.MODULE_INJECTORS_FS=r;
},{}],"VTdi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=f,exports.combineInjects=E,exports.DECLARATION_INJECT_MARKER=void 0;var e,r=c(require("@babel/runtime/helpers/esm/defineProperty")),n=require("../modules/module-injectors"),t=require("./constants"),a=require("../utils");function c(e){return e&&e.__esModule?e:{default:e}}var o=(e={},(0,r.default)(e,t.VERTEX_SHADER,n.MODULE_INJECTORS_VS),(0,r.default)(e,t.FRAGMENT_SHADER,n.MODULE_INJECTORS_FS),e),s="__LUMA_INJECT_DECLARATIONS__";exports.DECLARATION_INJECT_MARKER=s;var u=/void\s+main\s*\([^)]*\)\s*\{\n?/,i=/}\n?[^{}]*$/,l=[];function f(e,r,n,a){var c=r===t.VERTEX_SHADER,f=function(r){var t=n[r];t.sort(function(e,r){return e.order-r.order}),l.length=t.length;for(var a=0,o=t.length;a<o;++a)l[a]=t[a].injection;var f="".concat(l.join("\n"),"\n");switch(r){case"vs:#decl":c&&(e=e.replace(s,f));break;case"vs:#main-start":c&&(e=e.replace(u,function(e){return e+f}));break;case"vs:#main-end":c&&(e=e.replace(i,function(e){return f+e}));break;case"fs:#decl":c||(e=e.replace(s,f));break;case"fs:#main-start":c||(e=e.replace(u,function(e){return e+f}));break;case"fs:#main-end":c||(e=e.replace(i,function(e){return f+e}));break;default:e=e.replace(r,function(e){return e+f})}};for(var E in n)f(E);return e=e.replace(s,""),a&&(e=e.replace(/\}\s*$/,function(e){return e+o[r]})),e}function E(e){var r={};return(0,a.assert)(Array.isArray(e)&&e.length>1),e.forEach(function(e){for(var n in e)r[n]=r[n]?"".concat(r[n],"\n").concat(e[n]):e[n]}),r}
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","../modules/module-injectors":"qukd","./constants":"A8gs","../utils":"JUP5"}],"hdw8":[function(require,module,exports) {
"use strict";function e(e,t,c){switch(t){case 300:return c?r(e):u(e);case 100:return c?n(e):a(e);default:throw new Error("unknown GLSL version ".concat(t))}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;var t=/^[ \t]*out[ \t]+vec4[ \t]+(\w+)[ \t]*;\s+/m;function r(e){return e.replace(/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,"#version 300 es\n").replace(/^[ \t]*attribute[ \t]+(.+;)/gm,"in $1").replace(/^[ \t]*varying[ \t]+(.+;)/gm,"out $1").replace(/\btexture2D\(/g,"texture(").replace(/\btextureCube\(+/g,"texture(").replace(/\btexture2DLodEXT\(/g,"textureLod(").replace(/\btextureCubeLodEXT\(/g,"textureLod(")}function u(e){return e.replace(/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,"#version 300 es\n").replace(/^[ \t]*varying[ \t]+(.+;)/gm,"in $1").replace(/\btexture2D\(/g,"texture(").replace(/\btextureCube\(/g,"texture(").replace(/\btexture2DLodEXT\(/g,"textureLod(").replace(/\btextureCubeLodEXT\(/g,"textureLod(")}function n(e){return e.replace(/^#version[ \t]+300[ \t]+es/,"#version 100").replace(/^[ \t]*in[ \t]+(.+;)/gm,"attribute $1").replace(/^[ \t]*out[ \t]+(.+;)/gm,"varying $1").replace(/\btexture\(/g,"texture2D(").replace(/\btextureLod\(/g,"texture2DLodEXT(")}function a(e){var r=(e=e.replace(/^#version[ \t]+300[ \t]+es/,"#version 100").replace(/^[ \t]*in[ \t]+/gm,"varying ").replace(/\btexture\(/g,"texture2D(").replace(/\btextureLod\(/g,"texture2DLodEXT(")).match(t);if(r){var u=r[1];e=e.replace(t,"").replace(new RegExp("\\b".concat(u,"\\b"),"g"),"gl_FragColor")}return e}
},{}],"aMxS":[function(require,module,exports) {
var define;
var e;Object.defineProperty(exports,"__esModule",{value:!0}),exports.assembleShaders=g;var r,n=v(require("@babel/runtime/helpers/esm/slicedToArray")),t=v(require("@babel/runtime/helpers/esm/defineProperty")),o=require("./constants"),a=require("./resolve-modules"),i=require("./platform-defines"),c=l(require("./inject-shader")),u=v(require("./transpile-shader")),s=require("../utils");function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function l(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=f();if(r&&r.has(e))return r.get(e);var n={},t=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=t?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function v(e){return e&&e.__esModule?e:{default:e}}var d="\n\n".concat(c.DECLARATION_INJECT_MARKER,"\n\n"),p=(r={},(0,t.default)(r,o.VERTEX_SHADER,"vertex"),(0,t.default)(r,o.FRAGMENT_SHADER,"fragment"),r),y="precision highp float;\n\n";function g(e,r){var n=r.vs,t=r.fs,i=(0,a.resolveModules)(r.modules||[]);return{gl:e,vs:h(e,Object.assign({},r,{source:n,type:o.VERTEX_SHADER,modules:i})),fs:h(e,Object.assign({},r,{source:t,type:o.FRAGMENT_SHADER,modules:i})),getUniforms:E(i)}}function h(e,r){var n=r.id,t=r.source,a=r.type,f=r.modules,l=r.defines,v=void 0===l?{}:l,p=r.hookFunctions,g=void 0===p?[]:p,h=r.inject,E=void 0===h?{}:h,_=r.transpileToGLSL100,D=void 0!==_&&_,R=r.prologue,S=void 0===R||R,M=r.log;(0,s.assert)("string"==typeof t,"shader source must be a string");var P=a===o.VERTEX_SHADER,T=t.split("\n"),w=100,N="",q=t;0===T[0].indexOf("#version ")?(w=300,N=T[0],q=T.slice(1).join("\n")):N="#version ".concat(w);var x={};f.forEach(function(e){Object.assign(x,e.getDefines())}),Object.assign(x,v);var H=S?"".concat(N,"\n").concat(m({id:n,source:t,type:a}),"\n").concat(b({type:a}),"\n").concat((0,i.getPlatformShaderDefines)(e),"\n").concat((0,i.getVersionDefines)(e,w,!P),"\n").concat(j(x),"\n").concat(P?"":y,"\n"):"".concat(N,"\n");g=A(g);var k={},C={},F={};for(var I in E){var L="string"==typeof E[I]?{injection:E[I],order:0}:E[I],U=I.match(/^(v|f)s:(#)?([\w-]+)$/);if(U){var V=U[2],G=U[3];V?"decl"===G?C[I]=[L]:F[I]=[L]:k[I]=[L]}else F[I]=[L]}var X=!0,W=!1,$=void 0;try{for(var J,K=f[Symbol.iterator]();!(X=(J=K.next()).done);X=!0){var Y=J.value;M&&Y.checkDeprecations(q,M),H+=Y.getModuleSource(a,w);var z=Y.injections[a];for(var B in z){var Q=B.match(/^(v|f)s:#([\w-]+)$/);if(Q){var Z="decl"===Q[2]?C:F;Z[B]=Z[B]||[],Z[B].push(z[B])}else k[B]=k[B]||[],k[B].push(z[B])}}}catch(ee){W=!0,$=ee}finally{try{X||null==K.return||K.return()}finally{if(W)throw $}}return H+=d,H=(0,c.default)(H,a,C),H+=O(g[a],k),H+=q,H=(0,c.default)(H,a,F),H=(0,u.default)(H,D?100:w,P)}function E(e){return function(r){var n={},t=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(t=(i=c.next()).done);t=!0){var u=i.value.getUniforms(r,n);Object.assign(n,u)}}catch(s){o=!0,a=s}finally{try{t||null==c.return||c.return()}finally{if(o)throw a}}return n}}function b(e){var r=e.type;return"\n#define SHADER_TYPE_".concat(p[r].toUpperCase(),"\n")}function m(e){var r=e.id,n=e.source,t=e.type;return r&&"string"==typeof r&&-1===n.indexOf("SHADER_NAME")?"\n#define SHADER_NAME ".concat(r,"_").concat(p[t],"\n\n"):""}function j(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=0,n="";for(var t in e){0===r&&(n+="\n// APPLICATION DEFINES\n"),r++;var o=e[t];(o||Number.isFinite(o))&&(n+="#define ".concat(t.toUpperCase()," ").concat(e[t],"\n"))}return 0===r&&(n+="\n"),n}function O(e,r){var n="";for(var t in e){var o=e[t];if(n+="void ".concat(o.signature," {\n"),o.header&&(n+="  ".concat(o.header)),r[t]){var a=r[t];a.sort(function(e,r){return e.order-r.order});var i=!0,c=!1,u=void 0;try{for(var s,f=a[Symbol.iterator]();!(i=(s=f.next()).done);i=!0){var l=s.value;n+="  ".concat(l.injection,"\n")}}catch(v){c=!0,u=v}finally{try{i||null==f.return||f.return()}finally{if(c)throw u}}}o.footer&&(n+="  ".concat(o.footer)),n+="}\n"}return n}function A(e){var r={vs:{},fs:{}};return e.forEach(function(e){var t;"string"!=typeof e?e=(t=e).hook:t={};var o=(e=e.trim()).split(":"),a=(0,n.default)(o,2),i=a[0],c=a[1],u=e.replace(/\(.+/,"");r[i][u]=Object.assign(t,{signature:c})}),r}
},{"@babel/runtime/helpers/esm/slicedToArray":"TBeo","@babel/runtime/helpers/esm/defineProperty":"iDM3","./constants":"A8gs","./resolve-modules":"vIC4","./platform-defines":"iiHz","./inject-shader":"VTdi","./transpile-shader":"hdw8","../utils":"JUP5"}],"uzoD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getQualifierDetails=o,exports.getPassthroughFS=u,exports.typeToChannelSuffix=s,exports.typeToChannelCount=i,exports.convertToVec4=l;var e=n(require("@babel/runtime/helpers/esm/slicedToArray")),t=require("../utils");function n(e){return e&&e.__esModule?e:{default:e}}var r="void main() {gl_FragColor = vec4(0);}",c="out vec4 transform_output;\nvoid main() {\n  transform_output = vec4(0);\n}",a="#version 300 es\n".concat(c);function o(t,n){n=Array.isArray(n)?n:[n];var r=t.replace(/^\s+/,"").split(/\s+/),c=(0,e.default)(r,3),a=c[0],o=c[1],u=c[2];return n.includes(a)&&o&&u?{qualifier:a,type:o,name:u.split(";")[0]}:null}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.version,n=void 0===t?100:t,o=e.input,u=e.inputType,s=e.output;if(!o)return 300===n?a:n>300?"#version ".concat(n,"\n").concat(c):r;var i=l(o,u);return n>=300?"#version ".concat(n," ").concat(300===n?"es":"","\nin ").concat(u," ").concat(o,";\nout vec4 ").concat(s,";\nvoid main() {\n  ").concat(s," = ").concat(i,";\n}"):"varying ".concat(u," ").concat(o,";\nvoid main() {\n  gl_FragColor = ").concat(i,";\n}")}function s(e){switch(e){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return(0,t.assert)(!1),null}}function i(e){switch(e){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return(0,t.assert)(!1),null}}function l(e,n){switch(n){case"float":return"vec4(".concat(e,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(e,", 0.0, 1.0)");case"vec3":return"vec4(".concat(e,", 1.0)");case"vec4":return e;default:return(0,t.assert)(!1),null}}
},{"@babel/runtime/helpers/esm/slicedToArray":"TBeo","../utils":"JUP5"}],"rSwV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 0.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 0.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",t={name:"fp32",vs:n,fs:null};exports.default=t;
},{}],"MlO6":[function(require,module,exports) {
"use strict";function r(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=Math.fround(r),n=r-o;return t[e]=o,t[e+1]=n,t}function t(r){return r-Math.fround(r)}function e(t){for(var e=new Float32Array(32),o=0;o<4;++o)for(var n=0;n<4;++n){var f=4*o+n;r(t[4*n+o],e,2*f)}return e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.fp64ify=r,exports.fp64LowPart=t,exports.fp64ifyMatrix4=e;
},{}],"ObaP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="uniform float ONE;\nvec2 split(float a) {\n  const float SPLIT = 4097.0;\n  float t = a * SPLIT;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float a_hi = t * ONE - (t - a);\n  float a_lo = a * ONE - a_hi;\n#else\n  float a_hi = t - (t - a);\n  float a_lo = a - a_hi;\n#endif\n  return vec2(a_hi, a_lo);\n}\nvec2 split2(vec2 a) {\n  vec2 b = split(a.x);\n  b.y += a.y;\n  return b;\n}\nvec2 quickTwoSum(float a, float b) {\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float sum = (a + b) * ONE;\n  float err = b - (sum - a) * ONE;\n#else\n  float sum = a + b;\n  float err = b - (sum - a);\n#endif\n  return vec2(sum, err);\n}\nvec2 twoSum(float a, float b) {\n  float s = (a + b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float v = (s * ONE - a) * ONE;\n  float err = (a - (s - v) * ONE) * ONE * ONE * ONE + (b - v);\n#else\n  float v = s - a;\n  float err = (a - (s - v)) + (b - v);\n#endif\n  return vec2(s, err);\n}\n\nvec2 twoSub(float a, float b) {\n  float s = (a - b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float v = (s * ONE - a) * ONE;\n  float err = (a - (s - v) * ONE) * ONE * ONE * ONE - (b + v);\n#else\n  float v = s - a;\n  float err = (a - (s - v)) - (b + v);\n#endif\n  return vec2(s, err);\n}\n\nvec2 twoSqr(float a) {\n  float prod = a * a;\n  vec2 a_fp64 = split(a);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float err = ((a_fp64.x * a_fp64.x - prod) * ONE + 2.0 * a_fp64.x *\n    a_fp64.y * ONE * ONE) + a_fp64.y * a_fp64.y * ONE * ONE * ONE;\n#else\n  float err = ((a_fp64.x * a_fp64.x - prod) + 2.0 * a_fp64.x * a_fp64.y) + a_fp64.y * a_fp64.y;\n#endif\n  return vec2(prod, err);\n}\n\nvec2 twoProd(float a, float b) {\n  float prod = a * b;\n  vec2 a_fp64 = split(a);\n  vec2 b_fp64 = split(b);\n  float err = ((a_fp64.x * b_fp64.x - prod) + a_fp64.x * b_fp64.y +\n    a_fp64.y * b_fp64.x) + a_fp64.y * b_fp64.y;\n  return vec2(prod, err);\n}\n\nvec2 sum_fp64(vec2 a, vec2 b) {\n  vec2 s, t;\n  s = twoSum(a.x, b.x);\n  t = twoSum(a.y, b.y);\n  s.y += t.x;\n  s = quickTwoSum(s.x, s.y);\n  s.y += t.y;\n  s = quickTwoSum(s.x, s.y);\n  return s;\n}\n\nvec2 sub_fp64(vec2 a, vec2 b) {\n  vec2 s, t;\n  s = twoSub(a.x, b.x);\n  t = twoSub(a.y, b.y);\n  s.y += t.x;\n  s = quickTwoSum(s.x, s.y);\n  s.y += t.y;\n  s = quickTwoSum(s.x, s.y);\n  return s;\n}\n\nvec2 mul_fp64(vec2 a, vec2 b) {\n  vec2 prod = twoProd(a.x, b.x);\n  prod.y += a.x * b.y;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  prod = split2(prod);\n#endif\n  prod = quickTwoSum(prod.x, prod.y);\n  prod.y += a.y * b.x;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  prod = split2(prod);\n#endif\n  prod = quickTwoSum(prod.x, prod.y);\n  return prod;\n}\n\nvec2 div_fp64(vec2 a, vec2 b) {\n  float xn = 1.0 / b.x;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  vec2 yn = mul_fp64(a, vec2(xn, 0));\n#else\n  vec2 yn = a * xn;\n#endif\n  float diff = (sub_fp64(a, mul_fp64(b, yn))).x;\n  vec2 prod = twoProd(xn, diff);\n  return sum_fp64(yn, prod);\n}\n\nvec2 sqrt_fp64(vec2 a) {\n  if (a.x == 0.0 && a.y == 0.0) return vec2(0.0, 0.0);\n  if (a.x < 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\n\n  float x = 1.0 / sqrt(a.x);\n  float yn = a.x * x;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  vec2 yn_sqr = twoSqr(yn) * ONE;\n#else\n  vec2 yn_sqr = twoSqr(yn);\n#endif\n  float diff = sub_fp64(a, yn_sqr).x;\n  vec2 prod = twoProd(x * 0.5, diff);\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  return sum_fp64(split(yn), prod);\n#else\n  return sum_fp64(vec2(yn, 0.0), prod);\n#endif\n}\n";exports.default=n;
},{}],"yYYN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="const vec2 E_FP64 = vec2(2.7182817459106445e+00, 8.254840366817007e-08);\nconst vec2 LOG2_FP64 = vec2(0.6931471824645996e+00, -1.9046542121259336e-09);\nconst vec2 PI_FP64 = vec2(3.1415927410125732, -8.742278012618954e-8);\nconst vec2 TWO_PI_FP64 = vec2(6.2831854820251465, -1.7484556025237907e-7);\nconst vec2 PI_2_FP64 = vec2(1.5707963705062866, -4.371139006309477e-8);\nconst vec2 PI_4_FP64 = vec2(0.7853981852531433, -2.1855695031547384e-8);\nconst vec2 PI_16_FP64 = vec2(0.19634954631328583, -5.463923757886846e-9);\nconst vec2 PI_16_2_FP64 = vec2(0.39269909262657166, -1.0927847515773692e-8);\nconst vec2 PI_16_3_FP64 = vec2(0.5890486240386963, -1.4906100798128818e-9);\nconst vec2 PI_180_FP64 = vec2(0.01745329238474369, 1.3519960498364902e-10);\n\nconst vec2 SIN_TABLE_0_FP64 = vec2(0.19509032368659973, -1.6704714833615242e-9);\nconst vec2 SIN_TABLE_1_FP64 = vec2(0.3826834261417389, 6.22335089017767e-9);\nconst vec2 SIN_TABLE_2_FP64 = vec2(0.5555702447891235, -1.1769521357507529e-8);\nconst vec2 SIN_TABLE_3_FP64 = vec2(0.7071067690849304, 1.2101617041793133e-8);\n\nconst vec2 COS_TABLE_0_FP64 = vec2(0.9807852506637573, 2.9739473106360492e-8);\nconst vec2 COS_TABLE_1_FP64 = vec2(0.9238795042037964, 2.8307490351764386e-8);\nconst vec2 COS_TABLE_2_FP64 = vec2(0.8314695954322815, 1.6870263741530778e-8);\nconst vec2 COS_TABLE_3_FP64 = vec2(0.7071067690849304, 1.2101617152815436e-8);\n\nconst vec2 INVERSE_FACTORIAL_3_FP64 = vec2(1.666666716337204e-01, -4.967053879312289e-09);\nconst vec2 INVERSE_FACTORIAL_4_FP64 = vec2(4.16666679084301e-02, -1.2417634698280722e-09);\nconst vec2 INVERSE_FACTORIAL_5_FP64 = vec2(8.333333767950535e-03, -4.34617203337595e-10);\nconst vec2 INVERSE_FACTORIAL_6_FP64 = vec2(1.3888889225199819e-03, -3.3631094437103215e-11);\nconst vec2 INVERSE_FACTORIAL_7_FP64 = vec2(1.9841270113829523e-04,  -2.725596874933456e-12);\nconst vec2 INVERSE_FACTORIAL_8_FP64 = vec2(2.4801587642286904e-05, -3.406996025904184e-13);\nconst vec2 INVERSE_FACTORIAL_9_FP64 = vec2(2.75573188446287533e-06, 3.7935713937038186e-14);\nconst vec2 INVERSE_FACTORIAL_10_FP64 = vec2(2.755731998149713e-07, -7.575112367869873e-15);\n\nfloat nint(float d) {\n    if (d == floor(d)) return d;\n    return floor(d + 0.5);\n}\n\nvec2 nint_fp64(vec2 a) {\n    float hi = nint(a.x);\n    float lo;\n    vec2 tmp;\n    if (hi == a.x) {\n        lo = nint(a.y);\n        tmp = quickTwoSum(hi, lo);\n    } else {\n        lo = 0.0;\n        if (abs(hi - a.x) == 0.5 && a.y < 0.0) {\n            hi -= 1.0;\n        }\n        tmp = vec2(hi, lo);\n    }\n    return tmp;\n}\n\nvec2 exp_fp64(vec2 a) {\n\n  const int k_power = 4;\n  const float k = 16.0;\n\n  const float inv_k = 1.0 / k;\n\n  if (a.x <= -88.0) return vec2(0.0, 0.0);\n  if (a.x >= 88.0) return vec2(1.0 / 0.0, 1.0 / 0.0);\n  if (a.x == 0.0 && a.y == 0.0) return vec2(1.0, 0.0);\n  if (a.x == 1.0 && a.y == 0.0) return E_FP64;\n\n  float m = floor(a.x / LOG2_FP64.x + 0.5);\n  vec2 r = sub_fp64(a, mul_fp64(LOG2_FP64, vec2(m, 0.0))) * inv_k;\n  vec2 s, t, p;\n\n  p = mul_fp64(r, r);\n  s = sum_fp64(r, p * 0.5);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_3_FP64);\n\n  s = sum_fp64(s, t);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_4_FP64);\n\n  s = sum_fp64(s, t);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_5_FP64);\n\n\n\n\n\n\n  s = sum_fp64(s, t);\n  for (int i = 0; i < k_power; i++) {\n    s = sum_fp64(s * 2.0, mul_fp64(s, s));\n  }\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n  s = sum_fp64(s, vec2(ONE, 0.0));\n#else\n  s = sum_fp64(s, vec2(1.0, 0.0));\n#endif\n\n  return s * pow(2.0, m);\n}\n\nvec2 log_fp64(vec2 a)\n{\n  if (a.x == 1.0 && a.y == 0.0) return vec2(0.0, 0.0);\n  if (a.x <= 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\n  vec2 x = vec2(log(a.x), 0.0);\n  vec2 s;\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n  s = vec2(ONE, 0.0);\n#else\n  s = vec2(1.0, 0.0);\n#endif\n\n  x = sub_fp64(sum_fp64(x, mul_fp64(a, exp_fp64(-x))), s);\n  return x;\n}\n\nvec2 sin_taylor_fp64(vec2 a) {\n  vec2 r, s, t, x;\n\n  if (a.x == 0.0 && a.y == 0.0) {\n    return vec2(0.0, 0.0);\n  }\n\n  x = -mul_fp64(a, a);\n  s = a;\n  r = a;\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_3_FP64);\n  s = sum_fp64(s, t);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_5_FP64);\n  s = sum_fp64(s, t);\n\n\n\n\n\n\n  return s;\n}\n\nvec2 cos_taylor_fp64(vec2 a) {\n  vec2 r, s, t, x;\n\n  if (a.x == 0.0 && a.y == 0.0) {\n    return vec2(1.0, 0.0);\n  }\n\n  x = -mul_fp64(a, a);\n  r = x;\n  s = sum_fp64(vec2(1.0, 0.0), r * 0.5);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_4_FP64);\n  s = sum_fp64(s, t);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_6_FP64);\n  s = sum_fp64(s, t);\n\n\n\n\n\n\n  return s;\n}\n\nvoid sincos_taylor_fp64(vec2 a, out vec2 sin_t, out vec2 cos_t) {\n  if (a.x == 0.0 && a.y == 0.0) {\n    sin_t = vec2(0.0, 0.0);\n    cos_t = vec2(1.0, 0.0);\n  }\n\n  sin_t = sin_taylor_fp64(a);\n  cos_t = sqrt_fp64(sub_fp64(vec2(1.0, 0.0), mul_fp64(sin_t, sin_t)));\n}\n\nvec2 sin_fp64(vec2 a) {\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(0.0, 0.0);\n    }\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n\n    if (k == 0) {\n        if (j == 0) {\n            return sin_taylor_fp64(t);\n        } else if (j == 1) {\n            return cos_taylor_fp64(t);\n        } else if (j == -1) {\n            return -cos_taylor_fp64(t);\n        } else {\n            return -sin_taylor_fp64(t);\n        }\n    }\n\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n    if (abs(float(abs_k) - 1.0) < 0.5) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs(float(abs_k) - 2.0) < 0.5) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs(float(abs_k) - 3.0) < 0.5) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs(float(abs_k) - 4.0) < 0.5) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#else\n    if (abs_k == 1) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs_k == 2) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs_k == 3) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs_k == 4) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#endif\n\n    vec2 sin_t, cos_t;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n\n\n    vec2 result = vec2(0.0, 0.0);\n    if (j == 0) {\n        if (k > 0) {\n            result = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        }\n    } else if (j == 1) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            result = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    } else if (j == -1) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        } else {\n            result = -sum_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        }\n    } else {\n        if (k > 0) {\n            result = -sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(v, cos_t), mul_fp64(u, sin_t));\n        }\n    }\n\n    return result;\n}\n\nvec2 cos_fp64(vec2 a) {\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(1.0, 0.0);\n    }\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n\n    if (k == 0) {\n        if (j == 0) {\n            return cos_taylor_fp64(t);\n        } else if (j == 1) {\n            return -sin_taylor_fp64(t);\n        } else if (j == -1) {\n            return sin_taylor_fp64(t);\n        } else {\n            return -cos_taylor_fp64(t);\n        }\n    }\n\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n    if (abs(float(abs_k) - 1.0) < 0.5) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs(float(abs_k) - 2.0) < 0.5) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs(float(abs_k) - 3.0) < 0.5) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs(float(abs_k) - 4.0) < 0.5) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#else\n    if (abs_k == 1) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs_k == 2) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs_k == 3) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs_k == 4) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#endif\n\n    vec2 sin_t, cos_t;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n    vec2 result = vec2(0.0, 0.0);\n    if (j == 0) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            result = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    } else if (j == 1) {\n        if (k > 0) {\n            result = -sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(v, cos_t), mul_fp64(u, sin_t));\n        }\n    } else if (j == -1) {\n        if (k > 0) {\n            result = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        }\n    } else {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        } else {\n            result = -sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    }\n\n    return result;\n}\n\nvec2 tan_fp64(vec2 a) {\n    vec2 sin_a;\n    vec2 cos_a;\n\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(0.0, 0.0);\n    }\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n    vec2 sin_t, cos_t;\n    vec2 s, c;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0_FP64;\n            v = SIN_TABLE_0_FP64;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1_FP64;\n            v = SIN_TABLE_1_FP64;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2_FP64;\n            v = SIN_TABLE_2_FP64;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3_FP64;\n            v = SIN_TABLE_3_FP64;\n        }\n#else\n        if (abs_k == 1) {\n            u = COS_TABLE_0_FP64;\n            v = SIN_TABLE_0_FP64;\n        } else if (abs_k == 2) {\n            u = COS_TABLE_1_FP64;\n            v = SIN_TABLE_1_FP64;\n        } else if (abs_k == 3) {\n            u = COS_TABLE_2_FP64;\n            v = SIN_TABLE_2_FP64;\n        } else if (abs_k == 4) {\n            u = COS_TABLE_3_FP64;\n            v = SIN_TABLE_3_FP64;\n        }\n#endif\n        if (k > 0) {\n            s = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n            c = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            s = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n            c = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return div_fp64(sin_a, cos_a);\n}\n\nvec2 radians_fp64(vec2 degree) {\n  return mul_fp64(degree, PI_180_FP64);\n}\n\nvec2 mix_fp64(vec2 a, vec2 b, float x) {\n  vec2 range = sub_fp64(b, a);\n  return sum_fp64(a, mul_fp64(range, vec2(x, 0.0)));\n}\n\nvoid vec2_sum_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = sum_fp64(a[0], b[0]);\n    out_val[1] = sum_fp64(a[1], b[1]);\n}\n\nvoid vec2_sub_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = sub_fp64(a[0], b[0]);\n    out_val[1] = sub_fp64(a[1], b[1]);\n}\n\nvoid vec2_mul_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = mul_fp64(a[0], b[0]);\n    out_val[1] = mul_fp64(a[1], b[1]);\n}\n\nvoid vec2_div_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = div_fp64(a[0], b[0]);\n    out_val[1] = div_fp64(a[1], b[1]);\n}\n\nvoid vec2_mix_fp64(vec2 x[2], vec2 y[2], float a, out vec2 out_val[2]) {\n  vec2 range[2];\n  vec2_sub_fp64(y, x, range);\n  vec2 portion[2];\n  portion[0] = range[0] * a;\n  portion[1] = range[1] * a;\n  vec2_sum_fp64(x, portion, out_val);\n}\n\nvec2 vec2_length_fp64(vec2 x[2]) {\n  return sqrt_fp64(sum_fp64(mul_fp64(x[0], x[0]), mul_fp64(x[1], x[1])));\n}\n\nvoid vec2_normalize_fp64(vec2 x[2], out vec2 out_val[2]) {\n  vec2 length = vec2_length_fp64(x);\n  vec2 length_vec2[2];\n  length_vec2[0] = length;\n  length_vec2[1] = length;\n\n  vec2_div_fp64(x, length_vec2, out_val);\n}\n\nvec2 vec2_distance_fp64(vec2 x[2], vec2 y[2]) {\n  vec2 diff[2];\n  vec2_sub_fp64(x, y, diff);\n  return vec2_length_fp64(diff);\n}\n\nvec2 vec2_dot_fp64(vec2 a[2], vec2 b[2]) {\n  vec2 v[2];\n\n  v[0] = mul_fp64(a[0], b[0]);\n  v[1] = mul_fp64(a[1], b[1]);\n\n  return sum_fp64(v[0], v[1]);\n}\nvoid vec3_sub_fp64(vec2 a[3], vec2 b[3], out vec2 out_val[3]) {\n  for (int i = 0; i < 3; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvoid vec3_sum_fp64(vec2 a[3], vec2 b[3], out vec2 out_val[3]) {\n  for (int i = 0; i < 3; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvec2 vec3_length_fp64(vec2 x[3]) {\n  return sqrt_fp64(sum_fp64(sum_fp64(mul_fp64(x[0], x[0]), mul_fp64(x[1], x[1])),\n    mul_fp64(x[2], x[2])));\n}\n\nvec2 vec3_distance_fp64(vec2 x[3], vec2 y[3]) {\n  vec2 diff[3];\n  vec3_sub_fp64(x, y, diff);\n  return vec3_length_fp64(diff);\n}\nvoid vec4_fp64(vec4 a, out vec2 out_val[4]) {\n  out_val[0].x = a[0];\n  out_val[0].y = 0.0;\n\n  out_val[1].x = a[1];\n  out_val[1].y = 0.0;\n\n  out_val[2].x = a[2];\n  out_val[2].y = 0.0;\n\n  out_val[3].x = a[3];\n  out_val[3].y = 0.0;\n}\n\nvoid vec4_scalar_mul_fp64(vec2 a[4], vec2 b, out vec2 out_val[4]) {\n  out_val[0] = mul_fp64(a[0], b);\n  out_val[1] = mul_fp64(a[1], b);\n  out_val[2] = mul_fp64(a[2], b);\n  out_val[3] = mul_fp64(a[3], b);\n}\n\nvoid vec4_sum_fp64(vec2 a[4], vec2 b[4], out vec2 out_val[4]) {\n  for (int i = 0; i < 4; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvoid vec4_dot_fp64(vec2 a[4], vec2 b[4], out vec2 out_val) {\n  vec2 v[4];\n\n  v[0] = mul_fp64(a[0], b[0]);\n  v[1] = mul_fp64(a[1], b[1]);\n  v[2] = mul_fp64(a[2], b[2]);\n  v[3] = mul_fp64(a[3], b[3]);\n\n  out_val = sum_fp64(sum_fp64(v[0], v[1]), sum_fp64(v[2], v[3]));\n}\n\nvoid mat4_vec4_mul_fp64(vec2 b[16], vec2 a[4], out vec2 out_val[4]) {\n  vec2 tmp[4];\n\n  for (int i = 0; i < 4; i++)\n  {\n    for (int j = 0; j < 4; j++)\n    {\n      tmp[j] = b[j + i * 4];\n    }\n    vec4_dot_fp64(a, tmp, out_val[i]);\n  }\n}\n";exports.default=n;
},{}],"mLAB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"fp64ify",{enumerable:!0,get:function(){return e.fp64ify}}),Object.defineProperty(exports,"fp64LowPart",{enumerable:!0,get:function(){return e.fp64LowPart}}),Object.defineProperty(exports,"fp64ifyMatrix4",{enumerable:!0,get:function(){return e.fp64ifyMatrix4}}),exports.default=exports.fp64arithmetic=void 0;var e=require("./fp64-utils"),t=f(require("./fp64-arithmetic.glsl")),r=f(require("./fp64-functions.glsl"));function f(e){return e&&e.__esModule?e:{default:e}}var i={ONE:1};function p(){return i}var n={name:"fp64-arithmetic",vs:t.default,fs:null,getUniforms:p,fp64ify:e.fp64ify,fp64LowPart:e.fp64LowPart};exports.fp64arithmetic=n;var a={name:"fp64",vs:r.default,fs:null,dependencies:[n],fp64ify:e.fp64ify,fp64LowPart:e.fp64LowPart,fp64ifyMatrix4:e.fp64ifyMatrix4};exports.default=a;
},{"./fp64-utils":"MlO6","./fp64-arithmetic.glsl":"ObaP","./fp64-functions.glsl":"yYYN"}],"YXhZ":[function(require,module,exports) {
"use strict";function e(e,t){if(!e)throw new Error("math.gl assertion ".concat(t))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"wKVf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.configure=s,exports.formatValue=f,exports.isArray=l,exports.clone=h,exports.toRadians=d,exports.toDegrees=g,exports.radians=M,exports.degrees=b,exports.sin=m,exports.cos=v,exports.tan=y,exports.asin=E,exports.acos=P,exports.atan=q,exports.clamp=I,exports.lerp=N,exports.equals=O,exports.exactEquals=L,exports.withEpsilon=S,exports.config=void 0;var r=u(require("@babel/runtime/helpers/esm/typeof")),t=u(require("@babel/runtime/helpers/esm/construct")),n=u(require("@babel/runtime/helpers/esm/toConsumableArray")),e=u(require("./assert"));function u(r){return r&&r.__esModule?r:{default:r}}var o=1/Math.PI*180,i=1/180*Math.PI,a={};function s(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var t in r)(0,e.default)(t in a),a[t]=r[t];return a}function c(r){return Math.round(r/a.EPSILON)*a.EPSILON}function f(r){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).precision,n=void 0===t?a.precision||4:t;return r=c(r),"".concat(parseFloat(r.toPrecision(n)))}function l(r){return Array.isArray(r)||ArrayBuffer.isView(r)&&!(r instanceof DataView)}function p(r){return r.clone?r.clone():new Array(r.length)}function h(r){return r.clone?r.clone():(0,t.default)(Array,(0,n.default)(r))}function x(r,t,n){if(l(r)){n=n||p(r);for(var e=0;e<n.length&&e<r.length;++e)n[e]=t(r[e],e,n);return n}return t(r)}function d(r){return M(r)}function g(r){return b(r)}function M(r,t){return x(r,function(r){return r*i},t)}function b(r,t){return x(r,function(r){return r*o},t)}function m(r){return x(r,function(r){return Math.sin(r)})}function v(r){return x(r,function(r){return Math.cos(r)})}function y(r){return x(r,function(r){return Math.tan(r)})}function E(r){return x(r,function(r){return Math.asin(r)})}function P(r){return x(r,function(r){return Math.acos(r)})}function q(r){return x(r,function(r){return Math.atan(r)})}function I(r,t,n){return x(r,function(r){return Math.max(t,Math.min(n,r))})}function N(r,t,n){return l(r)?r.map(function(r,e){return N(r,t[e],n)}):n*t+(1-n)*r}function O(r,t,n){var e=a.EPSILON;n&&(a.EPSILON=n);try{if(r===t)return!0;if(l(r)&&l(t)){if(r.length!==t.length)return!1;for(var u=0;u<r.length;++u)if(!O(r[u],t[u]))return!1;return!0}return r&&r.equals?r.equals(t):t&&t.equals?t.equals(r):!(!Number.isFinite(r)||!Number.isFinite(t))&&Math.abs(r-t)<=a.EPSILON*Math.max(1,Math.abs(r),Math.abs(t))}finally{a.EPSILON=e}}function L(t,n){if(t===n)return!0;if(t&&"object"===(0,r.default)(t)&&n&&"object"===(0,r.default)(n)){if(t.constructor!==n.constructor)return!1;if(t.exactEquals)return t.exactEquals(n)}if(l(t)&&l(n)){if(t.length!==n.length)return!1;for(var e=0;e<t.length;++e)if(!L(t[e],n[e]))return!1;return!0}return!1}function S(r,t){var n,e=a.EPSILON;a.EPSILON=r;try{n=t()}finally{a.EPSILON=e}return n}exports.config=a,a.EPSILON=1e-12,a.debug=!1,a.precision=4,a.printTypes=!1,a.printDegrees=!1,a.printRowMajor=!0;
},{"@babel/runtime/helpers/esm/typeof":"zsbK","@babel/runtime/helpers/esm/construct":"b6xa","@babel/runtime/helpers/esm/toConsumableArray":"AdMH","./assert":"YXhZ"}],"AMtw":[function(require,module,exports) {
"use strict";function e(e){return-1!==Function.toString.call(e).indexOf("[native code]")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"Hj0I":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;var e=n(require("@babel/runtime/helpers/esm/getPrototypeOf")),t=n(require("@babel/runtime/helpers/esm/setPrototypeOf")),r=n(require("@babel/runtime/helpers/esm/isNativeFunction")),u=n(require("@babel/runtime/helpers/esm/construct"));function n(e){return e&&e.__esModule?e:{default:e}}function o(n){var i="function"==typeof Map?new Map:void 0;return exports.default=o=function(n){if(null===n||!(0,r.default)(n))return n;if("function"!=typeof n)throw new TypeError("Super expression must either be null or a function");if(void 0!==i){if(i.has(n))return i.get(n);i.set(n,o)}function o(){return(0,u.default)(n,arguments,(0,e.default)(this).constructor)}return o.prototype=Object.create(n.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),(0,t.default)(o,n)},o(n)}
},{"@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/setPrototypeOf":"N60M","@babel/runtime/helpers/esm/isNativeFunction":"AMtw","@babel/runtime/helpers/esm/construct":"b6xa"}],"cPa0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=h(require("@babel/runtime/helpers/esm/classCallCheck")),e=h(require("@babel/runtime/helpers/esm/createClass")),r=h(require("@babel/runtime/helpers/esm/inherits")),i=h(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),n=h(require("@babel/runtime/helpers/esm/getPrototypeOf")),u=h(require("@babel/runtime/helpers/esm/wrapNativeSuper")),a=require("../../lib/common"),s=h(require("../../lib/assert"));function h(t){return t&&t.__esModule?t:{default:t}}function c(t){var e=o();return function(){var r,u=(0,n.default)(t);if(e){var a=(0,n.default)(this).constructor;r=Reflect.construct(u,arguments,a)}else r=u.apply(this,arguments);return(0,i.default)(this,r)}}function o(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}var l=function(i){(0,r.default)(u,i);var n=c(u);function u(){return(0,t.default)(this,u),n.apply(this,arguments)}return(0,e.default)(u,[{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"from",value:function(t){return Array.isArray(t)?this.copy(t):this.fromObject(t)}},{key:"fromArray",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=0;r<this.ELEMENTS;++r)this[r]=t[r+e];return this.check()}},{key:"to",value:function(t){return t===this?this:(0,a.isArray)(t)?this.toArray(t):this.toObject(t)}},{key:"toTarget",value:function(t){return t?this.to(t):this}},{key:"toArray",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=0;r<this.ELEMENTS;++r)t[e+r]=this[r];return t}},{key:"toFloat32Array",value:function(){return new Float32Array(this)}},{key:"toString",value:function(){return this.formatString(a.config)}},{key:"formatString",value:function(t){for(var e="",r=0;r<this.ELEMENTS;++r)e+=(r>0?", ":"")+(0,a.formatValue)(this[r],t);return"".concat(t.printTypes?this.constructor.name:"","[").concat(e,"]")}},{key:"equals",value:function(t){if(!t||this.length!==t.length)return!1;for(var e=0;e<this.ELEMENTS;++e)if(!(0,a.equals)(this[e],t[e]))return!1;return!0}},{key:"exactEquals",value:function(t){if(!t||this.length!==t.length)return!1;for(var e=0;e<this.ELEMENTS;++e)if(this[e]!==t[e])return!1;return!0}},{key:"negate",value:function(){for(var t=0;t<this.ELEMENTS;++t)this[t]=-this[t];return this.check()}},{key:"lerp",value:function(t,e,r){void 0===r&&(r=e,e=t,t=this);for(var i=0;i<this.ELEMENTS;++i){var n=t[i];this[i]=n+r*(e[i]-n)}return this.check()}},{key:"min",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=Math.min(t[e],this[e]);return this.check()}},{key:"max",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=Math.max(t[e],this[e]);return this.check()}},{key:"clamp",value:function(t,e){for(var r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],t[r]),e[r]);return this.check()}},{key:"add",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var i=0,n=e;i<n.length;i++)for(var u=n[i],a=0;a<this.ELEMENTS;++a)this[a]+=u[a];return this.check()}},{key:"subtract",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var i=0,n=e;i<n.length;i++)for(var u=n[i],a=0;a<this.ELEMENTS;++a)this[a]-=u[a];return this.check()}},{key:"scale",value:function(t){if(Array.isArray(t))return this.multiply(t);for(var e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}},{key:"sub",value:function(t){return this.subtract(t)}},{key:"setScalar",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=t;return this.check()}},{key:"addScalar",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]+=t;return this.check()}},{key:"subScalar",value:function(t){return this.addScalar(-t)}},{key:"multiplyScalar",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}},{key:"divideScalar",value:function(t){return this.scale(1/t)}},{key:"clampScalar",value:function(t,e){for(var r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],t),e);return this.check()}},{key:"multiplyByScalar",value:function(t){return this.scale(t)}},{key:"check",value:function(){if(a.config.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}},{key:"validate",value:function(){for(var t=this.length===this.ELEMENTS,e=0;e<this.ELEMENTS;++e)t=t&&Number.isFinite(this[e]);return t}},{key:"ELEMENTS",get:function(){return(0,s.default)(!1),0}},{key:"RANK",get:function(){return(0,s.default)(!1),0}},{key:"elements",get:function(){return this}}]),u}((0,u.default)(Array));exports.default=l;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/wrapNativeSuper":"Hj0I","../../lib/common":"wKVf","../../lib/assert":"YXhZ"}],"imS9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.validateVector=r,exports.checkNumber=n,exports.checkVector=t,exports.deprecated=i;var e=require("./common");function r(e,r){if(e.length!==r)return!1;for(var n=0;n<e.length;++n)if(!Number.isFinite(e[n]))return!1;return!0}function n(e){if(!Number.isFinite(e))throw new Error("Invalid number ".concat(e));return e}function t(n,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(e.config.debug&&!r(n,t))throw new Error("math.gl: ".concat(o," some fields set to invalid numbers'"));return n}var o={};function i(e,r){o[e]||(o[e]=!0,console.warn("".concat(e," has been removed in version ").concat(r,", see upgrade guide for more information")))}
},{"./common":"wKVf"}],"BKjK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=c(require("@babel/runtime/helpers/esm/classCallCheck")),t=c(require("@babel/runtime/helpers/esm/createClass")),r=c(require("@babel/runtime/helpers/esm/inherits")),u=c(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),n=c(require("@babel/runtime/helpers/esm/getPrototypeOf")),i=c(require("./math-array")),a=require("../../lib/validators"),s=c(require("../../lib/assert"));function c(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=l();return function(){var r,i=(0,n.default)(e);if(t){var a=(0,n.default)(this).constructor;r=Reflect.construct(i,arguments,a)}else r=i.apply(this,arguments);return(0,u.default)(this,r)}}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var h=function(u){(0,r.default)(i,u);var n=o(i);function i(){return(0,e.default)(this,i),n.apply(this,arguments)}return(0,t.default)(i,[{key:"copy",value:function(e){return(0,s.default)(!1),this}},{key:"len",value:function(){return Math.sqrt(this.lengthSquared())}},{key:"magnitude",value:function(){return this.len()}},{key:"lengthSquared",value:function(){for(var e=0,t=0;t<this.ELEMENTS;++t)e+=this[t]*this[t];return e}},{key:"magnitudeSquared",value:function(){return this.lengthSquared()}},{key:"distance",value:function(e){return Math.sqrt(this.distanceSquared(e))}},{key:"distanceSquared",value:function(e){for(var t=0,r=0;r<this.ELEMENTS;++r){var u=this[r]-e[r];t+=u*u}return(0,a.checkNumber)(t)}},{key:"dot",value:function(e){for(var t=0,r=0;r<this.ELEMENTS;++r)t+=this[r]*e[r];return(0,a.checkNumber)(t)}},{key:"normalize",value:function(){var e=this.magnitude();if(0!==e)for(var t=0;t<this.ELEMENTS;++t)this[t]/=e;return this.check()}},{key:"multiply",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var u=0,n=t;u<n.length;u++)for(var i=n[u],a=0;a<this.ELEMENTS;++a)this[a]*=i[a];return this.check()}},{key:"divide",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var u=0,n=t;u<n.length;u++)for(var i=n[u],a=0;a<this.ELEMENTS;++a)this[a]/=i[a];return this.check()}},{key:"lengthSq",value:function(){return this.lengthSquared()}},{key:"distanceTo",value:function(e){return this.distance(e)}},{key:"distanceToSquared",value:function(e){return this.distanceSquared(e)}},{key:"getComponent",value:function(e){return(0,s.default)(e>=0&&e<this.ELEMENTS,"index is out of range"),(0,a.checkNumber)(this[e])}},{key:"setComponent",value:function(e,t){return(0,s.default)(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=t,this.check()}},{key:"addVectors",value:function(e,t){return this.copy(e).add(t)}},{key:"subVectors",value:function(e,t){return this.copy(e).subtract(t)}},{key:"multiplyVectors",value:function(e,t){return this.copy(e).multiply(t)}},{key:"addScaledVector",value:function(e,t){return this.add(new this.constructor(e).multiplyScalar(t))}},{key:"x",get:function(){return this[0]},set:function(e){this[0]=(0,a.checkNumber)(e)}},{key:"y",get:function(){return this[1]},set:function(e){this[1]=(0,a.checkNumber)(e)}}]),i}(i.default);exports.default=h;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","./math-array":"cPa0","../../lib/validators":"imS9","../../lib/assert":"YXhZ"}],"XJqx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setMatrixArrayType=e,exports.toRadian=s,exports.equals=n,exports.RANDOM=exports.ARRAY_TYPE=exports.EPSILON=void 0;var t=1e-6;exports.EPSILON=t;var r="undefined"!=typeof Float32Array?Float32Array:Array;exports.ARRAY_TYPE=r;var a=Math.random;function e(t){exports.ARRAY_TYPE=r=t}exports.RANDOM=a;var o=Math.PI/180;function s(t){return t*o}function n(r,a){return Math.abs(r-a)<=t*Math.max(1,Math.abs(r),Math.abs(a))}Math.hypot||(Math.hypot=function(){for(var t=0,r=arguments.length;r--;)t+=arguments[r]*arguments[r];return Math.sqrt(t)});
},{}],"XSo1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=n,exports.clone=o,exports.fromValues=a,exports.copy=u,exports.set=s,exports.add=i,exports.subtract=c,exports.multiply=p,exports.divide=f,exports.ceil=x,exports.floor=h,exports.min=v,exports.max=M,exports.round=l,exports.scale=d,exports.scaleAndAdd=m,exports.distance=b,exports.squaredDistance=y,exports.length=P,exports.squaredLength=q,exports.negate=A,exports.inverse=O,exports.normalize=g,exports.dot=E,exports.cross=R,exports.lerp=j,exports.random=Y,exports.transformMat2=_,exports.transformMat2d=w,exports.transformMat3=D,exports.transformMat4=L,exports.rotate=T,exports.angle=I,exports.zero=N,exports.str=k,exports.exactEquals=z,exports.equals=S,exports.forEach=exports.sqrLen=exports.sqrDist=exports.dist=exports.div=exports.mul=exports.sub=exports.len=void 0;var t=e(require("./common.js"));function r(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return r=function(){return t},t}function e(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=r();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var u=o?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}function n(){var r=new t.ARRAY_TYPE(2);return t.ARRAY_TYPE!=Float32Array&&(r[0]=0,r[1]=0),r}function o(r){var e=new t.ARRAY_TYPE(2);return e[0]=r[0],e[1]=r[1],e}function a(r,e){var n=new t.ARRAY_TYPE(2);return n[0]=r,n[1]=e,n}function u(t,r){return t[0]=r[0],t[1]=r[1],t}function s(t,r,e){return t[0]=r,t[1]=e,t}function i(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t}function c(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t}function p(t,r,e){return t[0]=r[0]*e[0],t[1]=r[1]*e[1],t}function f(t,r,e){return t[0]=r[0]/e[0],t[1]=r[1]/e[1],t}function x(t,r){return t[0]=Math.ceil(r[0]),t[1]=Math.ceil(r[1]),t}function h(t,r){return t[0]=Math.floor(r[0]),t[1]=Math.floor(r[1]),t}function v(t,r,e){return t[0]=Math.min(r[0],e[0]),t[1]=Math.min(r[1],e[1]),t}function M(t,r,e){return t[0]=Math.max(r[0],e[0]),t[1]=Math.max(r[1],e[1]),t}function l(t,r){return t[0]=Math.round(r[0]),t[1]=Math.round(r[1]),t}function d(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t}function m(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t}function b(t,r){var e=r[0]-t[0],n=r[1]-t[1];return Math.hypot(e,n)}function y(t,r){var e=r[0]-t[0],n=r[1]-t[1];return e*e+n*n}function P(t){var r=t[0],e=t[1];return Math.hypot(r,e)}function q(t){var r=t[0],e=t[1];return r*r+e*e}function A(t,r){return t[0]=-r[0],t[1]=-r[1],t}function O(t,r){return t[0]=1/r[0],t[1]=1/r[1],t}function g(t,r){var e=r[0],n=r[1],o=e*e+n*n;return o>0&&(o=1/Math.sqrt(o)),t[0]=r[0]*o,t[1]=r[1]*o,t}function E(t,r){return t[0]*r[0]+t[1]*r[1]}function R(t,r,e){var n=r[0]*e[1]-r[1]*e[0];return t[0]=t[1]=0,t[2]=n,t}function j(t,r,e,n){var o=r[0],a=r[1];return t[0]=o+n*(e[0]-o),t[1]=a+n*(e[1]-a),t}function Y(r,e){e=e||1;var n=2*t.RANDOM()*Math.PI;return r[0]=Math.cos(n)*e,r[1]=Math.sin(n)*e,r}function _(t,r,e){var n=r[0],o=r[1];return t[0]=e[0]*n+e[2]*o,t[1]=e[1]*n+e[3]*o,t}function w(t,r,e){var n=r[0],o=r[1];return t[0]=e[0]*n+e[2]*o+e[4],t[1]=e[1]*n+e[3]*o+e[5],t}function D(t,r,e){var n=r[0],o=r[1];return t[0]=e[0]*n+e[3]*o+e[6],t[1]=e[1]*n+e[4]*o+e[7],t}function L(t,r,e){var n=r[0],o=r[1];return t[0]=e[0]*n+e[4]*o+e[12],t[1]=e[1]*n+e[5]*o+e[13],t}function T(t,r,e,n){var o=r[0]-e[0],a=r[1]-e[1],u=Math.sin(n),s=Math.cos(n);return t[0]=o*s-a*u+e[0],t[1]=o*u+a*s+e[1],t}function I(t,r){var e=t[0],n=t[1],o=r[0],a=r[1],u=Math.sqrt(e*e+n*n)*Math.sqrt(o*o+a*a),s=u&&(e*o+n*a)/u;return Math.acos(Math.min(Math.max(s,-1),1))}function N(t){return t[0]=0,t[1]=0,t}function k(t){return"vec2("+t[0]+", "+t[1]+")"}function z(t,r){return t[0]===r[0]&&t[1]===r[1]}function S(r,e){var n=r[0],o=r[1],a=e[0],u=e[1];return Math.abs(n-a)<=t.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(o-u)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))}var W=P;exports.len=W;var F=c;exports.sub=F;var V=p;exports.mul=V;var B=f;exports.div=B;var C=b;exports.dist=C;var G=y;exports.sqrDist=G;var H=q;exports.sqrLen=H;var J=function(){var t=n();return function(r,e,n,o,a,u){var s,i;for(e||(e=2),n||(n=0),i=o?Math.min(o*e+n,r.length):r.length,s=n;s<i;s+=e)t[0]=r[s],t[1]=r[s+1],a(t,t,u),r[s]=t[0],r[s+1]=t[1];return r}}();exports.forEach=J;
},{"./common.js":"XJqx"}],"q1wk":[function(require,module,exports) {
"use strict";function r(r,t,e){var n=t[0],o=t[1],a=e[3]*n+e[7]*o||1;return r[0]=(e[0]*n+e[4]*o)/a,r[1]=(e[1]*n+e[5]*o)/a,r}function t(r,t,e){var n=t[0],o=t[1],a=t[2],s=e[3]*n+e[7]*o+e[11]*a||1;return r[0]=(e[0]*n+e[4]*o+e[8]*a)/s,r[1]=(e[1]*n+e[5]*o+e[9]*a)/s,r[2]=(e[2]*n+e[6]*o+e[10]*a)/s,r}function e(r,t,e){var n=t[0],o=t[1];return r[0]=e[0]*n+e[2]*o,r[1]=e[1]*n+e[3]*o,r[2]=t[2],r}function n(r,t,e){var n=t[0],o=t[1];return r[0]=e[0]*n+e[2]*o,r[1]=e[1]*n+e[3]*o,r[2]=t[2],r[3]=t[3],r}function o(r,t,e){var n=t[0],o=t[1],a=t[2];return r[0]=e[0]*n+e[3]*o+e[6]*a,r[1]=e[1]*n+e[4]*o+e[7]*a,r[2]=e[2]*n+e[5]*o+e[8]*a,r[3]=t[3],r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.vec2_transformMat4AsVector=r,exports.vec3_transformMat4AsVector=t,exports.vec3_transformMat2=e,exports.vec4_transformMat2=n,exports.vec4_transformMat3=o;
},{}],"JnVj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=h(require("@babel/runtime/helpers/esm/classCallCheck")),t=h(require("@babel/runtime/helpers/esm/createClass")),r=h(require("@babel/runtime/helpers/esm/inherits")),n=h(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),i=h(require("@babel/runtime/helpers/esm/getPrototypeOf")),u=h(require("./base/vector")),c=require("../lib/common"),s=require("../lib/validators"),a=l(require("gl-matrix/vec2")),o=require("../lib/gl-matrix-extras");function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function l(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var u=n?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(r,i,u):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}function h(e){return e&&e.__esModule?e:{default:e}}function y(e){var t=p();return function(){var r,u=(0,i.default)(e);if(t){var c=(0,i.default)(this).constructor;r=Reflect.construct(u,arguments,c)}else r=u.apply(this,arguments);return(0,n.default)(this,r)}}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var v=function(n){(0,r.default)(u,n);var i=y(u);function u(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(0,e.default)(this,u),t=i.call(this,2),(0,c.isArray)(r)&&1===arguments.length?t.copy(r):(c.config.debug&&((0,s.checkNumber)(r),(0,s.checkNumber)(n)),t[0]=r,t[1]=n),t}return(0,t.default)(u,[{key:"set",value:function(e,t){return this[0]=e,this[1]=t,this.check()}},{key:"copy",value:function(e){return this[0]=e[0],this[1]=e[1],this.check()}},{key:"fromObject",value:function(e){return c.config.debug&&((0,s.checkNumber)(e.x),(0,s.checkNumber)(e.y)),this[0]=e.x,this[1]=e.y,this.check()}},{key:"toObject",value:function(e){return e.x=this[0],e.y=this[1],e}},{key:"horizontalAngle",value:function(){return Math.atan2(this.y,this.x)}},{key:"verticalAngle",value:function(){return Math.atan2(this.x,this.y)}},{key:"transform",value:function(e){return this.transformAsPoint(e)}},{key:"transformAsPoint",value:function(e){return a.transformMat4(this,this,e),this.check()}},{key:"transformAsVector",value:function(e){return(0,o.vec2_transformMat4AsVector)(this,this,e),this.check()}},{key:"transformByMatrix3",value:function(e){return a.transformMat3(this,this,e),this.check()}},{key:"transformByMatrix2x3",value:function(e){return a.transformMat2d(this,this,e),this.check()}},{key:"transformByMatrix2",value:function(e){return a.transformMat2(this,this,e),this.check()}},{key:"ELEMENTS",get:function(){return 2}}]),u}(u.default);exports.default=v;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","./base/vector":"BKjK","../lib/common":"wKVf","../lib/validators":"imS9","gl-matrix/vec2":"XSo1","../lib/gl-matrix-extras":"q1wk"}],"AWBd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=n,exports.clone=o,exports.length=a,exports.fromValues=s,exports.copy=u,exports.set=i,exports.add=c,exports.subtract=p,exports.multiply=f,exports.divide=x,exports.ceil=h,exports.floor=M,exports.min=v,exports.max=l,exports.round=d,exports.scale=m,exports.scaleAndAdd=b,exports.distance=y,exports.squaredDistance=O,exports.squaredLength=P,exports.negate=q,exports.inverse=A,exports.normalize=g,exports.dot=E,exports.cross=R,exports.lerp=Y,exports.hermite=j,exports.bezier=_,exports.random=w,exports.transformMat4=D,exports.transformMat3=L,exports.transformQuat=N,exports.rotateX=I,exports.rotateY=T,exports.rotateZ=z,exports.angle=S,exports.zero=k,exports.str=W,exports.exactEquals=F,exports.equals=Q,exports.forEach=exports.sqrLen=exports.len=exports.sqrDist=exports.dist=exports.div=exports.mul=exports.sub=void 0;var t=e(require("./common.js"));function r(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return r=function(){return t},t}function e(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=r();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var s=o?Object.getOwnPropertyDescriptor(t,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}function n(){var r=new t.ARRAY_TYPE(3);return t.ARRAY_TYPE!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r}function o(r){var e=new t.ARRAY_TYPE(3);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e}function a(t){var r=t[0],e=t[1],n=t[2];return Math.hypot(r,e,n)}function s(r,e,n){var o=new t.ARRAY_TYPE(3);return o[0]=r,o[1]=e,o[2]=n,o}function u(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t}function i(t,r,e,n){return t[0]=r,t[1]=e,t[2]=n,t}function c(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t}function p(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t}function f(t,r,e){return t[0]=r[0]*e[0],t[1]=r[1]*e[1],t[2]=r[2]*e[2],t}function x(t,r,e){return t[0]=r[0]/e[0],t[1]=r[1]/e[1],t[2]=r[2]/e[2],t}function h(t,r){return t[0]=Math.ceil(r[0]),t[1]=Math.ceil(r[1]),t[2]=Math.ceil(r[2]),t}function M(t,r){return t[0]=Math.floor(r[0]),t[1]=Math.floor(r[1]),t[2]=Math.floor(r[2]),t}function v(t,r,e){return t[0]=Math.min(r[0],e[0]),t[1]=Math.min(r[1],e[1]),t[2]=Math.min(r[2],e[2]),t}function l(t,r,e){return t[0]=Math.max(r[0],e[0]),t[1]=Math.max(r[1],e[1]),t[2]=Math.max(r[2],e[2]),t}function d(t,r){return t[0]=Math.round(r[0]),t[1]=Math.round(r[1]),t[2]=Math.round(r[2]),t}function m(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t}function b(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t[2]=r[2]+e[2]*n,t}function y(t,r){var e=r[0]-t[0],n=r[1]-t[1],o=r[2]-t[2];return Math.hypot(e,n,o)}function O(t,r){var e=r[0]-t[0],n=r[1]-t[1],o=r[2]-t[2];return e*e+n*n+o*o}function P(t){var r=t[0],e=t[1],n=t[2];return r*r+e*e+n*n}function q(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t}function A(t,r){return t[0]=1/r[0],t[1]=1/r[1],t[2]=1/r[2],t}function g(t,r){var e=r[0],n=r[1],o=r[2],a=e*e+n*n+o*o;return a>0&&(a=1/Math.sqrt(a)),t[0]=r[0]*a,t[1]=r[1]*a,t[2]=r[2]*a,t}function E(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]}function R(t,r,e){var n=r[0],o=r[1],a=r[2],s=e[0],u=e[1],i=e[2];return t[0]=o*i-a*u,t[1]=a*s-n*i,t[2]=n*u-o*s,t}function Y(t,r,e,n){var o=r[0],a=r[1],s=r[2];return t[0]=o+n*(e[0]-o),t[1]=a+n*(e[1]-a),t[2]=s+n*(e[2]-s),t}function j(t,r,e,n,o,a){var s=a*a,u=s*(2*a-3)+1,i=s*(a-2)+a,c=s*(a-1),p=s*(3-2*a);return t[0]=r[0]*u+e[0]*i+n[0]*c+o[0]*p,t[1]=r[1]*u+e[1]*i+n[1]*c+o[1]*p,t[2]=r[2]*u+e[2]*i+n[2]*c+o[2]*p,t}function _(t,r,e,n,o,a){var s=1-a,u=s*s,i=a*a,c=u*s,p=3*a*u,f=3*i*s,x=i*a;return t[0]=r[0]*c+e[0]*p+n[0]*f+o[0]*x,t[1]=r[1]*c+e[1]*p+n[1]*f+o[1]*x,t[2]=r[2]*c+e[2]*p+n[2]*f+o[2]*x,t}function w(r,e){e=e||1;var n=2*t.RANDOM()*Math.PI,o=2*t.RANDOM()-1,a=Math.sqrt(1-o*o)*e;return r[0]=Math.cos(n)*a,r[1]=Math.sin(n)*a,r[2]=o*e,r}function D(t,r,e){var n=r[0],o=r[1],a=r[2],s=e[3]*n+e[7]*o+e[11]*a+e[15];return s=s||1,t[0]=(e[0]*n+e[4]*o+e[8]*a+e[12])/s,t[1]=(e[1]*n+e[5]*o+e[9]*a+e[13])/s,t[2]=(e[2]*n+e[6]*o+e[10]*a+e[14])/s,t}function L(t,r,e){var n=r[0],o=r[1],a=r[2];return t[0]=n*e[0]+o*e[3]+a*e[6],t[1]=n*e[1]+o*e[4]+a*e[7],t[2]=n*e[2]+o*e[5]+a*e[8],t}function N(t,r,e){var n=e[0],o=e[1],a=e[2],s=e[3],u=r[0],i=r[1],c=r[2],p=o*c-a*i,f=a*u-n*c,x=n*i-o*u,h=o*x-a*f,M=a*p-n*x,v=n*f-o*p,l=2*s;return p*=l,f*=l,x*=l,h*=2,M*=2,v*=2,t[0]=u+p+h,t[1]=i+f+M,t[2]=c+x+v,t}function I(t,r,e,n){var o=[],a=[];return o[0]=r[0]-e[0],o[1]=r[1]-e[1],o[2]=r[2]-e[2],a[0]=o[0],a[1]=o[1]*Math.cos(n)-o[2]*Math.sin(n),a[2]=o[1]*Math.sin(n)+o[2]*Math.cos(n),t[0]=a[0]+e[0],t[1]=a[1]+e[1],t[2]=a[2]+e[2],t}function T(t,r,e,n){var o=[],a=[];return o[0]=r[0]-e[0],o[1]=r[1]-e[1],o[2]=r[2]-e[2],a[0]=o[2]*Math.sin(n)+o[0]*Math.cos(n),a[1]=o[1],a[2]=o[2]*Math.cos(n)-o[0]*Math.sin(n),t[0]=a[0]+e[0],t[1]=a[1]+e[1],t[2]=a[2]+e[2],t}function z(t,r,e,n){var o=[],a=[];return o[0]=r[0]-e[0],o[1]=r[1]-e[1],o[2]=r[2]-e[2],a[0]=o[0]*Math.cos(n)-o[1]*Math.sin(n),a[1]=o[0]*Math.sin(n)+o[1]*Math.cos(n),a[2]=o[2],t[0]=a[0]+e[0],t[1]=a[1]+e[1],t[2]=a[2]+e[2],t}function S(t,r){var e=t[0],n=t[1],o=t[2],a=r[0],s=r[1],u=r[2],i=Math.sqrt(e*e+n*n+o*o)*Math.sqrt(a*a+s*s+u*u),c=i&&E(t,r)/i;return Math.acos(Math.min(Math.max(c,-1),1))}function k(t){return t[0]=0,t[1]=0,t[2]=0,t}function W(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function F(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]}function Q(r,e){var n=r[0],o=r[1],a=r[2],s=e[0],u=e[1],i=e[2];return Math.abs(n-s)<=t.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(o-u)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(a-i)<=t.EPSILON*Math.max(1,Math.abs(a),Math.abs(i))}var V=p;exports.sub=V;var X=f;exports.mul=X;var Z=x;exports.div=Z;var B=y;exports.dist=B;var C=O;exports.sqrDist=C;var G=a;exports.len=G;var H=P;exports.sqrLen=H;var J=function(){var t=n();return function(r,e,n,o,a,s){var u,i;for(e||(e=3),n||(n=0),i=o?Math.min(o*e+n,r.length):r.length,u=n;u<i;u+=e)t[0]=r[u],t[1]=r[u+1],t[2]=r[u+2],a(t,t,s),r[u]=t[0],r[u+1]=t[1],r[u+2]=t[2];return r}}();exports.forEach=J;
},{"./common.js":"XJqx"}],"WGSx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=l(require("@babel/runtime/helpers/esm/classCallCheck")),t=l(require("@babel/runtime/helpers/esm/createClass")),r=l(require("@babel/runtime/helpers/esm/inherits")),n=l(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),i=l(require("@babel/runtime/helpers/esm/getPrototypeOf")),u=l(require("./base/vector")),c=require("../lib/common"),s=require("../lib/validators"),o=h(require("gl-matrix/vec3")),a=require("../lib/gl-matrix-extras");function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function h(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var u=n?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(r,i,u):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}function l(e){return e&&e.__esModule?e:{default:e}}function y(e){var t=v();return function(){var r,u=(0,i.default)(e);if(t){var c=(0,i.default)(this).constructor;r=Reflect.construct(u,arguments,c)}else r=u.apply(this,arguments);return(0,n.default)(this,r)}}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var k=[0,0,0],m={},b=function(n){(0,r.default)(u,n);var i=y(u);function u(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,e.default)(this,u),t=i.call(this,-0,-0,-0),1===arguments.length&&(0,c.isArray)(r)?t.copy(r):(c.config.debug&&((0,s.checkNumber)(r),(0,s.checkNumber)(n),(0,s.checkNumber)(o)),t[0]=r,t[1]=n,t[2]=o),t}return(0,t.default)(u,null,[{key:"ZERO",get:function(){return m.ZERO=m.ZERO||Object.freeze(new u(0,0,0,0))}}]),(0,t.default)(u,[{key:"set",value:function(e,t,r){return this[0]=e,this[1]=t,this[2]=r,this.check()}},{key:"copy",value:function(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}},{key:"fromObject",value:function(e){return c.config.debug&&((0,s.checkNumber)(e.x),(0,s.checkNumber)(e.y),(0,s.checkNumber)(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}},{key:"toObject",value:function(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}},{key:"angle",value:function(e){return o.angle(this,e)}},{key:"cross",value:function(e){return o.cross(this,this,e),this.check()}},{key:"rotateX",value:function(e){var t=e.radians,r=e.origin,n=void 0===r?k:r;return o.rotateX(this,this,n,t),this.check()}},{key:"rotateY",value:function(e){var t=e.radians,r=e.origin,n=void 0===r?k:r;return o.rotateY(this,this,n,t),this.check()}},{key:"rotateZ",value:function(e){var t=e.radians,r=e.origin,n=void 0===r?k:r;return o.rotateZ(this,this,n,t),this.check()}},{key:"transform",value:function(e){return this.transformAsPoint(e)}},{key:"transformAsPoint",value:function(e){return o.transformMat4(this,this,e),this.check()}},{key:"transformAsVector",value:function(e){return(0,a.vec3_transformMat4AsVector)(this,this,e),this.check()}},{key:"transformByMatrix3",value:function(e){return o.transformMat3(this,this,e),this.check()}},{key:"transformByMatrix2",value:function(e){return(0,a.vec3_transformMat2)(this,this,e),this.check()}},{key:"transformByQuaternion",value:function(e){return o.transformQuat(this,this,e),this.check()}},{key:"ELEMENTS",get:function(){return 3}},{key:"z",get:function(){return this[2]},set:function(e){this[2]=(0,s.checkNumber)(e)}}]),u}(u.default);exports.default=b;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","./base/vector":"BKjK","../lib/common":"wKVf","../lib/validators":"imS9","gl-matrix/vec3":"AWBd","../lib/gl-matrix-extras":"q1wk"}],"T9bv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=l(require("@babel/runtime/helpers/esm/classCallCheck")),t=l(require("@babel/runtime/helpers/esm/createClass")),r=l(require("@babel/runtime/helpers/esm/inherits")),n=l(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),u=l(require("@babel/runtime/helpers/esm/getPrototypeOf")),i=l(require("./base/vector")),c=require("../lib/common"),s=require("../lib/validators"),o=h(require("gl-matrix/vec3")),a=require("../lib/gl-matrix-extras");function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function h(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var i=n?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(r,u,i):r[u]=e[u]}return r.default=e,t&&t.set(e,r),r}function l(e){return e&&e.__esModule?e:{default:e}}function y(e){var t=b();return function(){var r,i=(0,u.default)(e);if(t){var c=(0,u.default)(this).constructor;r=Reflect.construct(i,arguments,c)}else r=i.apply(this,arguments);return(0,n.default)(this,r)}}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var m={},p=function(n){(0,r.default)(i,n);var u=y(i);function i(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return(0,e.default)(this,i),t=u.call(this,-0,-0,-0,-0),(0,c.isArray)(r)&&1===arguments.length?t.copy(r):(c.config.debug&&((0,s.checkNumber)(r),(0,s.checkNumber)(n),(0,s.checkNumber)(o),(0,s.checkNumber)(a)),t[0]=r,t[1]=n,t[2]=o,t[3]=a),t}return(0,t.default)(i,null,[{key:"ZERO",get:function(){return m.ZERO=m.ZERO||Object.freeze(new i(0,0,0,0))}}]),(0,t.default)(i,[{key:"set",value:function(e,t,r,n){return this[0]=e,this[1]=t,this[2]=r,this[3]=n,this.check()}},{key:"copy",value:function(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}},{key:"fromObject",value:function(e){return c.config.debug&&((0,s.checkNumber)(e.x),(0,s.checkNumber)(e.y),(0,s.checkNumber)(e.z),(0,s.checkNumber)(e.w)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this[3]=e.w,this}},{key:"toObject",value:function(e){return e.x=this[0],e.y=this[1],e.z=this[2],e.w=this[3],e}},{key:"transform",value:function(e){return o.transformMat4(this,this,e),this.check()}},{key:"transformByMatrix3",value:function(e){return(0,a.vec4_transformMat3)(this,this,e),this.check()}},{key:"transformByMatrix2",value:function(e){return(0,a.vec4_transformMat2)(this,this,e),this.check()}},{key:"transformByQuaternion",value:function(e){return o.transformQuat(this,this,e),this.check()}},{key:"applyMatrix4",value:function(e){return e.transform(this,this),this}},{key:"ELEMENTS",get:function(){return 4}},{key:"z",get:function(){return this[2]},set:function(e){this[2]=(0,s.checkNumber)(e)}},{key:"w",get:function(){return this[3]},set:function(e){this[3]=(0,s.checkNumber)(e)}}]),i}(i.default);exports.default=p;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","./base/vector":"BKjK","../lib/common":"wKVf","../lib/validators":"imS9","gl-matrix/vec3":"AWBd","../lib/gl-matrix-extras":"q1wk"}],"rnPl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=l(require("@babel/runtime/helpers/esm/classCallCheck")),t=l(require("@babel/runtime/helpers/esm/createClass")),r=l(require("@babel/runtime/helpers/esm/inherits")),n=l(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),u=l(require("@babel/runtime/helpers/esm/getPrototypeOf")),i=l(require("./math-array")),s=require("../../lib/validators"),o=require("../../lib/common");function l(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=c();return function(){var r,i=(0,u.default)(e);if(t){var s=(0,u.default)(this).constructor;r=Reflect.construct(i,arguments,s)}else r=i.apply(this,arguments);return(0,n.default)(this,r)}}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var f=function(n){(0,r.default)(i,n);var u=a(i);function i(){return(0,e.default)(this,i),u.apply(this,arguments)}return(0,t.default)(i,[{key:"toString",value:function(){var e="[";if(o.config.printRowMajor){e+="row-major:";for(var t=0;t<this.RANK;++t)for(var r=0;r<this.RANK;++r)e+=" ".concat(this[r*this.RANK+t])}else{e+="column-major:";for(var n=0;n<this.ELEMENTS;++n)e+=" ".concat(this[n])}return e+="]"}},{key:"getElementIndex",value:function(e,t){return t*this.RANK+e}},{key:"getElement",value:function(e,t){return this[t*this.RANK+e]}},{key:"setElement",value:function(e,t,r){return this[t*this.RANK+e]=(0,s.checkNumber)(r),this}},{key:"getColumn",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Array(this.RANK).fill(-0),r=e*this.RANK,n=0;n<this.RANK;++n)t[n]=this[r+n];return t}},{key:"setColumn",value:function(e,t){for(var r=e*this.RANK,n=0;n<this.RANK;++n)this[r+n]=t[n];return this}}]),i}(i.default);exports.default=f;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","./math-array":"cPa0","../../lib/validators":"imS9","../../lib/common":"wKVf"}],"vtQf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=a,exports.fromMat4=e,exports.clone=o,exports.copy=u,exports.fromValues=s,exports.set=i,exports.identity=c,exports.transpose=f,exports.invert=p,exports.adjoint=M,exports.determinant=x,exports.multiply=h,exports.translate=b,exports.rotate=l,exports.scale=m,exports.fromTranslation=v,exports.fromRotation=P,exports.fromScaling=O,exports.fromMat2d=d,exports.fromQuat=y,exports.normalFromMat4=E,exports.projection=S,exports.str=A,exports.frob=j,exports.add=I,exports.subtract=L,exports.multiplyScalar=N,exports.multiplyScalarAndAdd=R,exports.exactEquals=Y,exports.equals=_,exports.sub=exports.mul=void 0;var t=n(require("./common.js"));function r(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return r=function(){return t},t}function n(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=r();if(n&&n.has(t))return n.get(t);var a={},e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var u=e?Object.getOwnPropertyDescriptor(t,o):null;u&&(u.get||u.set)?Object.defineProperty(a,o,u):a[o]=t[o]}return a.default=t,n&&n.set(t,a),a}function a(){var r=new t.ARRAY_TYPE(9);return t.ARRAY_TYPE!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r}function e(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[4],t[4]=r[5],t[5]=r[6],t[6]=r[8],t[7]=r[9],t[8]=r[10],t}function o(r){var n=new t.ARRAY_TYPE(9);return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n}function u(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t}function s(r,n,a,e,o,u,s,i,c){var f=new t.ARRAY_TYPE(9);return f[0]=r,f[1]=n,f[2]=a,f[3]=e,f[4]=o,f[5]=u,f[6]=s,f[7]=i,f[8]=c,f}function i(t,r,n,a,e,o,u,s,i,c){return t[0]=r,t[1]=n,t[2]=a,t[3]=e,t[4]=o,t[5]=u,t[6]=s,t[7]=i,t[8]=c,t}function c(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function f(t,r){if(t===r){var n=r[1],a=r[2],e=r[5];t[1]=r[3],t[2]=r[6],t[3]=n,t[5]=r[7],t[6]=a,t[7]=e}else t[0]=r[0],t[1]=r[3],t[2]=r[6],t[3]=r[1],t[4]=r[4],t[5]=r[7],t[6]=r[2],t[7]=r[5],t[8]=r[8];return t}function p(t,r){var n=r[0],a=r[1],e=r[2],o=r[3],u=r[4],s=r[5],i=r[6],c=r[7],f=r[8],p=f*u-s*c,M=-f*o+s*i,x=c*o-u*i,h=n*p+a*M+e*x;return h?(h=1/h,t[0]=p*h,t[1]=(-f*a+e*c)*h,t[2]=(s*a-e*u)*h,t[3]=M*h,t[4]=(f*n-e*i)*h,t[5]=(-s*n+e*o)*h,t[6]=x*h,t[7]=(-c*n+a*i)*h,t[8]=(u*n-a*o)*h,t):null}function M(t,r){var n=r[0],a=r[1],e=r[2],o=r[3],u=r[4],s=r[5],i=r[6],c=r[7],f=r[8];return t[0]=u*f-s*c,t[1]=e*c-a*f,t[2]=a*s-e*u,t[3]=s*i-o*f,t[4]=n*f-e*i,t[5]=e*o-n*s,t[6]=o*c-u*i,t[7]=a*i-n*c,t[8]=n*u-a*o,t}function x(t){var r=t[0],n=t[1],a=t[2],e=t[3],o=t[4],u=t[5],s=t[6],i=t[7],c=t[8];return r*(c*o-u*i)+n*(-c*e+u*s)+a*(i*e-o*s)}function h(t,r,n){var a=r[0],e=r[1],o=r[2],u=r[3],s=r[4],i=r[5],c=r[6],f=r[7],p=r[8],M=n[0],x=n[1],h=n[2],b=n[3],l=n[4],m=n[5],v=n[6],P=n[7],O=n[8];return t[0]=M*a+x*u+h*c,t[1]=M*e+x*s+h*f,t[2]=M*o+x*i+h*p,t[3]=b*a+l*u+m*c,t[4]=b*e+l*s+m*f,t[5]=b*o+l*i+m*p,t[6]=v*a+P*u+O*c,t[7]=v*e+P*s+O*f,t[8]=v*o+P*i+O*p,t}function b(t,r,n){var a=r[0],e=r[1],o=r[2],u=r[3],s=r[4],i=r[5],c=r[6],f=r[7],p=r[8],M=n[0],x=n[1];return t[0]=a,t[1]=e,t[2]=o,t[3]=u,t[4]=s,t[5]=i,t[6]=M*a+x*u+c,t[7]=M*e+x*s+f,t[8]=M*o+x*i+p,t}function l(t,r,n){var a=r[0],e=r[1],o=r[2],u=r[3],s=r[4],i=r[5],c=r[6],f=r[7],p=r[8],M=Math.sin(n),x=Math.cos(n);return t[0]=x*a+M*u,t[1]=x*e+M*s,t[2]=x*o+M*i,t[3]=x*u-M*a,t[4]=x*s-M*e,t[5]=x*i-M*o,t[6]=c,t[7]=f,t[8]=p,t}function m(t,r,n){var a=n[0],e=n[1];return t[0]=a*r[0],t[1]=a*r[1],t[2]=a*r[2],t[3]=e*r[3],t[4]=e*r[4],t[5]=e*r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t}function v(t,r){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=r[0],t[7]=r[1],t[8]=1,t}function P(t,r){var n=Math.sin(r),a=Math.cos(r);return t[0]=a,t[1]=n,t[2]=0,t[3]=-n,t[4]=a,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function O(t,r){return t[0]=r[0],t[1]=0,t[2]=0,t[3]=0,t[4]=r[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function d(t,r){return t[0]=r[0],t[1]=r[1],t[2]=0,t[3]=r[2],t[4]=r[3],t[5]=0,t[6]=r[4],t[7]=r[5],t[8]=1,t}function y(t,r){var n=r[0],a=r[1],e=r[2],o=r[3],u=n+n,s=a+a,i=e+e,c=n*u,f=a*u,p=a*s,M=e*u,x=e*s,h=e*i,b=o*u,l=o*s,m=o*i;return t[0]=1-p-h,t[3]=f-m,t[6]=M+l,t[1]=f+m,t[4]=1-c-h,t[7]=x-b,t[2]=M-l,t[5]=x+b,t[8]=1-c-p,t}function E(t,r){var n=r[0],a=r[1],e=r[2],o=r[3],u=r[4],s=r[5],i=r[6],c=r[7],f=r[8],p=r[9],M=r[10],x=r[11],h=r[12],b=r[13],l=r[14],m=r[15],v=n*s-a*u,P=n*i-e*u,O=n*c-o*u,d=a*i-e*s,y=a*c-o*s,E=e*c-o*i,S=f*b-p*h,A=f*l-M*h,j=f*m-x*h,I=p*l-M*b,L=p*m-x*b,N=M*m-x*l,R=v*N-P*L+O*I+d*j-y*A+E*S;return R?(R=1/R,t[0]=(s*N-i*L+c*I)*R,t[1]=(i*j-u*N-c*A)*R,t[2]=(u*L-s*j+c*S)*R,t[3]=(e*L-a*N-o*I)*R,t[4]=(n*N-e*j+o*A)*R,t[5]=(a*j-n*L-o*S)*R,t[6]=(b*E-l*y+m*d)*R,t[7]=(l*O-h*E-m*P)*R,t[8]=(h*y-b*O+m*v)*R,t):null}function S(t,r,n){return t[0]=2/r,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function A(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function j(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function I(t,r,n){return t[0]=r[0]+n[0],t[1]=r[1]+n[1],t[2]=r[2]+n[2],t[3]=r[3]+n[3],t[4]=r[4]+n[4],t[5]=r[5]+n[5],t[6]=r[6]+n[6],t[7]=r[7]+n[7],t[8]=r[8]+n[8],t}function L(t,r,n){return t[0]=r[0]-n[0],t[1]=r[1]-n[1],t[2]=r[2]-n[2],t[3]=r[3]-n[3],t[4]=r[4]-n[4],t[5]=r[5]-n[5],t[6]=r[6]-n[6],t[7]=r[7]-n[7],t[8]=r[8]-n[8],t}function N(t,r,n){return t[0]=r[0]*n,t[1]=r[1]*n,t[2]=r[2]*n,t[3]=r[3]*n,t[4]=r[4]*n,t[5]=r[5]*n,t[6]=r[6]*n,t[7]=r[7]*n,t[8]=r[8]*n,t}function R(t,r,n,a){return t[0]=r[0]+n[0]*a,t[1]=r[1]+n[1]*a,t[2]=r[2]+n[2]*a,t[3]=r[3]+n[3]*a,t[4]=r[4]+n[4]*a,t[5]=r[5]+n[5]*a,t[6]=r[6]+n[6]*a,t[7]=r[7]+n[7]*a,t[8]=r[8]+n[8]*a,t}function Y(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]&&t[4]===r[4]&&t[5]===r[5]&&t[6]===r[6]&&t[7]===r[7]&&t[8]===r[8]}function _(r,n){var a=r[0],e=r[1],o=r[2],u=r[3],s=r[4],i=r[5],c=r[6],f=r[7],p=r[8],M=n[0],x=n[1],h=n[2],b=n[3],l=n[4],m=n[5],v=n[6],P=n[7],O=n[8];return Math.abs(a-M)<=t.EPSILON*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(e-x)<=t.EPSILON*Math.max(1,Math.abs(e),Math.abs(x))&&Math.abs(o-h)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(u-b)<=t.EPSILON*Math.max(1,Math.abs(u),Math.abs(b))&&Math.abs(s-l)<=t.EPSILON*Math.max(1,Math.abs(s),Math.abs(l))&&Math.abs(i-m)<=t.EPSILON*Math.max(1,Math.abs(i),Math.abs(m))&&Math.abs(c-v)<=t.EPSILON*Math.max(1,Math.abs(c),Math.abs(v))&&Math.abs(f-P)<=t.EPSILON*Math.max(1,Math.abs(f),Math.abs(P))&&Math.abs(p-O)<=t.EPSILON*Math.max(1,Math.abs(p),Math.abs(O))}var w=h;exports.mul=w;var g=L;exports.sub=g;
},{"./common.js":"XJqx"}],"YefV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=y(require("@babel/runtime/helpers/esm/classCallCheck")),e=y(require("@babel/runtime/helpers/esm/createClass")),r=y(require("@babel/runtime/helpers/esm/inherits")),i=y(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),n=y(require("@babel/runtime/helpers/esm/getPrototypeOf")),u=y(require("./base/matrix")),s=require("../lib/validators"),a=require("../lib/gl-matrix-extras"),c=l(require("gl-matrix/mat3")),o=l(require("gl-matrix/vec2")),h=l(require("gl-matrix/vec3"));function f(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return f=function(){return t},t}function l(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=f();if(e&&e.has(t))return e.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var u=i?Object.getOwnPropertyDescriptor(t,n):null;u&&(u.get||u.set)?Object.defineProperty(r,n,u):r[n]=t[n]}return r.default=t,e&&e.set(t,r),r}function y(t){return t&&t.__esModule?t:{default:t}}function p(t){var e=k();return function(){var r,u=(0,n.default)(t);if(e){var s=(0,n.default)(this).constructor;r=Reflect.construct(u,arguments,s)}else r=u.apply(this,arguments);return(0,i.default)(this,r)}}function k(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}var m=Object.freeze([1,0,0,0,1,0,0,0,1]),v=Object.freeze([0,0,0,0,0,0,0,0,0]),O=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL1ROW0:3,COL1ROW1:4,COL1ROW2:5,COL2ROW0:6,COL2ROW1:7,COL2ROW2:8}),d={},b=function(i){(0,r.default)(u,i);var n=p(u);function u(e){var r;return(0,t.default)(this,u),r=n.call(this,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(e)?r.copy(e):r.identity(),r}return(0,e.default)(u,[{key:"ELEMENTS",get:function(){return 9}},{key:"RANK",get:function(){return 3}},{key:"INDICES",get:function(){return O}}],[{key:"IDENTITY",get:function(){return d.IDENTITY=d.IDENTITY||Object.freeze(new u(m)),d.IDENTITY}},{key:"ZERO",get:function(){return d.ZERO=d.ZERO||Object.freeze(new u(v)),d.ZERO}}]),(0,e.default)(u,[{key:"copy",value:function(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this.check()}},{key:"set",value:function(t,e,r,i,n,u,s,a,c){return this[0]=t,this[1]=e,this[2]=r,this[3]=i,this[4]=n,this[5]=u,this[6]=s,this[7]=a,this[8]=c,this.check()}},{key:"setRowMajor",value:function(t,e,r,i,n,u,s,a,c){return this[0]=t,this[1]=i,this[2]=s,this[3]=e,this[4]=n,this[5]=a,this[6]=r,this[7]=u,this[8]=c,this.check()}},{key:"determinant",value:function(){return c.determinant(this)}},{key:"identity",value:function(){return this.copy(m)}},{key:"fromQuaternion",value:function(t){return c.fromQuat(this,t),this.check()}},{key:"transpose",value:function(){return c.transpose(this,this),this.check()}},{key:"invert",value:function(){return c.invert(this,this),this.check()}},{key:"multiplyLeft",value:function(t){return c.multiply(this,t,this),this.check()}},{key:"multiplyRight",value:function(t){return c.multiply(this,this,t),this.check()}},{key:"rotate",value:function(t){return c.rotate(this,this,t),this.check()}},{key:"scale",value:function(t){return Array.isArray(t)?c.scale(this,this,t):c.scale(this,this,[t,t,t]),this.check()}},{key:"translate",value:function(t){return c.translate(this,this,t),this.check()}},{key:"transform",value:function(t,e){switch(t.length){case 2:e=o.transformMat3(e||[-0,-0],t,this);break;case 3:e=h.transformMat3(e||[-0,-0,-0],t,this);break;case 4:e=(0,a.vec4_transformMat3)(e||[-0,-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return(0,s.checkVector)(e,t.length),e}},{key:"transformVector",value:function(t,e){return(0,s.deprecated)("Matrix3.transformVector"),this.transform(t,e)}},{key:"transformVector2",value:function(t,e){return(0,s.deprecated)("Matrix3.transformVector"),this.transform(t,e)}},{key:"transformVector3",value:function(t,e){return(0,s.deprecated)("Matrix3.transformVector"),this.transform(t,e)}}]),u}(u.default);exports.default=b;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","./base/matrix":"rnPl","../lib/validators":"imS9","../lib/gl-matrix-extras":"q1wk","gl-matrix/mat3":"vtQf","gl-matrix/vec2":"XSo1","gl-matrix/vec3":"AWBd"}],"w3aR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=n,exports.clone=e,exports.copy=o,exports.fromValues=s,exports.set=u,exports.identity=h,exports.transpose=M,exports.invert=i,exports.adjoint=c,exports.determinant=p,exports.multiply=f,exports.translate=x,exports.scale=b,exports.rotate=l,exports.rotateX=v,exports.rotateY=m,exports.rotateZ=P,exports.fromTranslation=O,exports.fromScaling=E,exports.fromRotation=S,exports.fromXRotation=y,exports.fromYRotation=I,exports.fromZRotation=L,exports.fromRotationTranslation=N,exports.fromQuat2=R,exports.getTranslation=d,exports.getScaling=g,exports.getRotation=A,exports.fromRotationTranslationScale=Y,exports.fromRotationTranslationScaleOrigin=T,exports.fromQuat=w,exports.frustum=_,exports.perspective=j,exports.perspectiveFromFieldOfView=q,exports.ortho=D,exports.lookAt=k,exports.targetTo=F,exports.str=Q,exports.frob=V,exports.add=W,exports.subtract=X,exports.multiplyScalar=Z,exports.multiplyScalarAndAdd=z,exports.exactEquals=B,exports.equals=C,exports.sub=exports.mul=void 0;var t=r(require("./common.js"));function a(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return a=function(){return t},t}function r(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var r=a();if(r&&r.has(t))return r.get(t);var n={},e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var s=e?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=t[o]}return n.default=t,r&&r.set(t,n),n}function n(){var a=new t.ARRAY_TYPE(16);return t.ARRAY_TYPE!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0),a[0]=1,a[5]=1,a[10]=1,a[15]=1,a}function e(a){var r=new t.ARRAY_TYPE(16);return r[0]=a[0],r[1]=a[1],r[2]=a[2],r[3]=a[3],r[4]=a[4],r[5]=a[5],r[6]=a[6],r[7]=a[7],r[8]=a[8],r[9]=a[9],r[10]=a[10],r[11]=a[11],r[12]=a[12],r[13]=a[13],r[14]=a[14],r[15]=a[15],r}function o(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t}function s(a,r,n,e,o,s,u,h,M,i,c,p,f,x,b,l){var v=new t.ARRAY_TYPE(16);return v[0]=a,v[1]=r,v[2]=n,v[3]=e,v[4]=o,v[5]=s,v[6]=u,v[7]=h,v[8]=M,v[9]=i,v[10]=c,v[11]=p,v[12]=f,v[13]=x,v[14]=b,v[15]=l,v}function u(t,a,r,n,e,o,s,u,h,M,i,c,p,f,x,b,l){return t[0]=a,t[1]=r,t[2]=n,t[3]=e,t[4]=o,t[5]=s,t[6]=u,t[7]=h,t[8]=M,t[9]=i,t[10]=c,t[11]=p,t[12]=f,t[13]=x,t[14]=b,t[15]=l,t}function h(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function M(t,a){if(t===a){var r=a[1],n=a[2],e=a[3],o=a[6],s=a[7],u=a[11];t[1]=a[4],t[2]=a[8],t[3]=a[12],t[4]=r,t[6]=a[9],t[7]=a[13],t[8]=n,t[9]=o,t[11]=a[14],t[12]=e,t[13]=s,t[14]=u}else t[0]=a[0],t[1]=a[4],t[2]=a[8],t[3]=a[12],t[4]=a[1],t[5]=a[5],t[6]=a[9],t[7]=a[13],t[8]=a[2],t[9]=a[6],t[10]=a[10],t[11]=a[14],t[12]=a[3],t[13]=a[7],t[14]=a[11],t[15]=a[15];return t}function i(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],s=a[4],u=a[5],h=a[6],M=a[7],i=a[8],c=a[9],p=a[10],f=a[11],x=a[12],b=a[13],l=a[14],v=a[15],m=r*u-n*s,P=r*h-e*s,O=r*M-o*s,E=n*h-e*u,S=n*M-o*u,y=e*M-o*h,I=i*b-c*x,L=i*l-p*x,N=i*v-f*x,R=c*l-p*b,d=c*v-f*b,g=p*v-f*l,A=m*g-P*d+O*R+E*N-S*L+y*I;return A?(A=1/A,t[0]=(u*g-h*d+M*R)*A,t[1]=(e*d-n*g-o*R)*A,t[2]=(b*y-l*S+v*E)*A,t[3]=(p*S-c*y-f*E)*A,t[4]=(h*N-s*g-M*L)*A,t[5]=(r*g-e*N+o*L)*A,t[6]=(l*O-x*y-v*P)*A,t[7]=(i*y-p*O+f*P)*A,t[8]=(s*d-u*N+M*I)*A,t[9]=(n*N-r*d-o*I)*A,t[10]=(x*S-b*O+v*m)*A,t[11]=(c*O-i*S-f*m)*A,t[12]=(u*L-s*R-h*I)*A,t[13]=(r*R-n*L+e*I)*A,t[14]=(b*P-x*E-l*m)*A,t[15]=(i*E-c*P+p*m)*A,t):null}function c(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],s=a[4],u=a[5],h=a[6],M=a[7],i=a[8],c=a[9],p=a[10],f=a[11],x=a[12],b=a[13],l=a[14],v=a[15];return t[0]=u*(p*v-f*l)-c*(h*v-M*l)+b*(h*f-M*p),t[1]=-(n*(p*v-f*l)-c*(e*v-o*l)+b*(e*f-o*p)),t[2]=n*(h*v-M*l)-u*(e*v-o*l)+b*(e*M-o*h),t[3]=-(n*(h*f-M*p)-u*(e*f-o*p)+c*(e*M-o*h)),t[4]=-(s*(p*v-f*l)-i*(h*v-M*l)+x*(h*f-M*p)),t[5]=r*(p*v-f*l)-i*(e*v-o*l)+x*(e*f-o*p),t[6]=-(r*(h*v-M*l)-s*(e*v-o*l)+x*(e*M-o*h)),t[7]=r*(h*f-M*p)-s*(e*f-o*p)+i*(e*M-o*h),t[8]=s*(c*v-f*b)-i*(u*v-M*b)+x*(u*f-M*c),t[9]=-(r*(c*v-f*b)-i*(n*v-o*b)+x*(n*f-o*c)),t[10]=r*(u*v-M*b)-s*(n*v-o*b)+x*(n*M-o*u),t[11]=-(r*(u*f-M*c)-s*(n*f-o*c)+i*(n*M-o*u)),t[12]=-(s*(c*l-p*b)-i*(u*l-h*b)+x*(u*p-h*c)),t[13]=r*(c*l-p*b)-i*(n*l-e*b)+x*(n*p-e*c),t[14]=-(r*(u*l-h*b)-s*(n*l-e*b)+x*(n*h-e*u)),t[15]=r*(u*p-h*c)-s*(n*p-e*c)+i*(n*h-e*u),t}function p(t){var a=t[0],r=t[1],n=t[2],e=t[3],o=t[4],s=t[5],u=t[6],h=t[7],M=t[8],i=t[9],c=t[10],p=t[11],f=t[12],x=t[13],b=t[14],l=t[15];return(a*s-r*o)*(c*l-p*b)-(a*u-n*o)*(i*l-p*x)+(a*h-e*o)*(i*b-c*x)+(r*u-n*s)*(M*l-p*f)-(r*h-e*s)*(M*b-c*f)+(n*h-e*u)*(M*x-i*f)}function f(t,a,r){var n=a[0],e=a[1],o=a[2],s=a[3],u=a[4],h=a[5],M=a[6],i=a[7],c=a[8],p=a[9],f=a[10],x=a[11],b=a[12],l=a[13],v=a[14],m=a[15],P=r[0],O=r[1],E=r[2],S=r[3];return t[0]=P*n+O*u+E*c+S*b,t[1]=P*e+O*h+E*p+S*l,t[2]=P*o+O*M+E*f+S*v,t[3]=P*s+O*i+E*x+S*m,P=r[4],O=r[5],E=r[6],S=r[7],t[4]=P*n+O*u+E*c+S*b,t[5]=P*e+O*h+E*p+S*l,t[6]=P*o+O*M+E*f+S*v,t[7]=P*s+O*i+E*x+S*m,P=r[8],O=r[9],E=r[10],S=r[11],t[8]=P*n+O*u+E*c+S*b,t[9]=P*e+O*h+E*p+S*l,t[10]=P*o+O*M+E*f+S*v,t[11]=P*s+O*i+E*x+S*m,P=r[12],O=r[13],E=r[14],S=r[15],t[12]=P*n+O*u+E*c+S*b,t[13]=P*e+O*h+E*p+S*l,t[14]=P*o+O*M+E*f+S*v,t[15]=P*s+O*i+E*x+S*m,t}function x(t,a,r){var n,e,o,s,u,h,M,i,c,p,f,x,b=r[0],l=r[1],v=r[2];return a===t?(t[12]=a[0]*b+a[4]*l+a[8]*v+a[12],t[13]=a[1]*b+a[5]*l+a[9]*v+a[13],t[14]=a[2]*b+a[6]*l+a[10]*v+a[14],t[15]=a[3]*b+a[7]*l+a[11]*v+a[15]):(n=a[0],e=a[1],o=a[2],s=a[3],u=a[4],h=a[5],M=a[6],i=a[7],c=a[8],p=a[9],f=a[10],x=a[11],t[0]=n,t[1]=e,t[2]=o,t[3]=s,t[4]=u,t[5]=h,t[6]=M,t[7]=i,t[8]=c,t[9]=p,t[10]=f,t[11]=x,t[12]=n*b+u*l+c*v+a[12],t[13]=e*b+h*l+p*v+a[13],t[14]=o*b+M*l+f*v+a[14],t[15]=s*b+i*l+x*v+a[15]),t}function b(t,a,r){var n=r[0],e=r[1],o=r[2];return t[0]=a[0]*n,t[1]=a[1]*n,t[2]=a[2]*n,t[3]=a[3]*n,t[4]=a[4]*e,t[5]=a[5]*e,t[6]=a[6]*e,t[7]=a[7]*e,t[8]=a[8]*o,t[9]=a[9]*o,t[10]=a[10]*o,t[11]=a[11]*o,t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t}function l(a,r,n,e){var o,s,u,h,M,i,c,p,f,x,b,l,v,m,P,O,E,S,y,I,L,N,R,d,g=e[0],A=e[1],Y=e[2],T=Math.hypot(g,A,Y);return T<t.EPSILON?null:(g*=T=1/T,A*=T,Y*=T,o=Math.sin(n),u=1-(s=Math.cos(n)),h=r[0],M=r[1],i=r[2],c=r[3],p=r[4],f=r[5],x=r[6],b=r[7],l=r[8],v=r[9],m=r[10],P=r[11],O=g*g*u+s,E=A*g*u+Y*o,S=Y*g*u-A*o,y=g*A*u-Y*o,I=A*A*u+s,L=Y*A*u+g*o,N=g*Y*u+A*o,R=A*Y*u-g*o,d=Y*Y*u+s,a[0]=h*O+p*E+l*S,a[1]=M*O+f*E+v*S,a[2]=i*O+x*E+m*S,a[3]=c*O+b*E+P*S,a[4]=h*y+p*I+l*L,a[5]=M*y+f*I+v*L,a[6]=i*y+x*I+m*L,a[7]=c*y+b*I+P*L,a[8]=h*N+p*R+l*d,a[9]=M*N+f*R+v*d,a[10]=i*N+x*R+m*d,a[11]=c*N+b*R+P*d,r!==a&&(a[12]=r[12],a[13]=r[13],a[14]=r[14],a[15]=r[15]),a)}function v(t,a,r){var n=Math.sin(r),e=Math.cos(r),o=a[4],s=a[5],u=a[6],h=a[7],M=a[8],i=a[9],c=a[10],p=a[11];return a!==t&&(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[4]=o*e+M*n,t[5]=s*e+i*n,t[6]=u*e+c*n,t[7]=h*e+p*n,t[8]=M*e-o*n,t[9]=i*e-s*n,t[10]=c*e-u*n,t[11]=p*e-h*n,t}function m(t,a,r){var n=Math.sin(r),e=Math.cos(r),o=a[0],s=a[1],u=a[2],h=a[3],M=a[8],i=a[9],c=a[10],p=a[11];return a!==t&&(t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[0]=o*e-M*n,t[1]=s*e-i*n,t[2]=u*e-c*n,t[3]=h*e-p*n,t[8]=o*n+M*e,t[9]=s*n+i*e,t[10]=u*n+c*e,t[11]=h*n+p*e,t}function P(t,a,r){var n=Math.sin(r),e=Math.cos(r),o=a[0],s=a[1],u=a[2],h=a[3],M=a[4],i=a[5],c=a[6],p=a[7];return a!==t&&(t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[0]=o*e+M*n,t[1]=s*e+i*n,t[2]=u*e+c*n,t[3]=h*e+p*n,t[4]=M*e-o*n,t[5]=i*e-s*n,t[6]=c*e-u*n,t[7]=p*e-h*n,t}function O(t,a){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=a[0],t[13]=a[1],t[14]=a[2],t[15]=1,t}function E(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=a[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function S(a,r,n){var e,o,s,u=n[0],h=n[1],M=n[2],i=Math.hypot(u,h,M);return i<t.EPSILON?null:(u*=i=1/i,h*=i,M*=i,e=Math.sin(r),s=1-(o=Math.cos(r)),a[0]=u*u*s+o,a[1]=h*u*s+M*e,a[2]=M*u*s-h*e,a[3]=0,a[4]=u*h*s-M*e,a[5]=h*h*s+o,a[6]=M*h*s+u*e,a[7]=0,a[8]=u*M*s+h*e,a[9]=h*M*s-u*e,a[10]=M*M*s+o,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a)}function y(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function I(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function L(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function N(t,a,r){var n=a[0],e=a[1],o=a[2],s=a[3],u=n+n,h=e+e,M=o+o,i=n*u,c=n*h,p=n*M,f=e*h,x=e*M,b=o*M,l=s*u,v=s*h,m=s*M;return t[0]=1-(f+b),t[1]=c+m,t[2]=p-v,t[3]=0,t[4]=c-m,t[5]=1-(i+b),t[6]=x+l,t[7]=0,t[8]=p+v,t[9]=x-l,t[10]=1-(i+f),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function R(a,r){var n=new t.ARRAY_TYPE(3),e=-r[0],o=-r[1],s=-r[2],u=r[3],h=r[4],M=r[5],i=r[6],c=r[7],p=e*e+o*o+s*s+u*u;return p>0?(n[0]=2*(h*u+c*e+M*s-i*o)/p,n[1]=2*(M*u+c*o+i*e-h*s)/p,n[2]=2*(i*u+c*s+h*o-M*e)/p):(n[0]=2*(h*u+c*e+M*s-i*o),n[1]=2*(M*u+c*o+i*e-h*s),n[2]=2*(i*u+c*s+h*o-M*e)),N(a,r,n),a}function d(t,a){return t[0]=a[12],t[1]=a[13],t[2]=a[14],t}function g(t,a){var r=a[0],n=a[1],e=a[2],o=a[4],s=a[5],u=a[6],h=a[8],M=a[9],i=a[10];return t[0]=Math.hypot(r,n,e),t[1]=Math.hypot(o,s,u),t[2]=Math.hypot(h,M,i),t}function A(a,r){var n=new t.ARRAY_TYPE(3);g(n,r);var e=1/n[0],o=1/n[1],s=1/n[2],u=r[0]*e,h=r[1]*o,M=r[2]*s,i=r[4]*e,c=r[5]*o,p=r[6]*s,f=r[8]*e,x=r[9]*o,b=r[10]*s,l=u+c+b,v=0;return l>0?(v=2*Math.sqrt(l+1),a[3]=.25*v,a[0]=(p-x)/v,a[1]=(f-M)/v,a[2]=(h-i)/v):u>c&&u>b?(v=2*Math.sqrt(1+u-c-b),a[3]=(p-x)/v,a[0]=.25*v,a[1]=(h+i)/v,a[2]=(f+M)/v):c>b?(v=2*Math.sqrt(1+c-u-b),a[3]=(f-M)/v,a[0]=(h+i)/v,a[1]=.25*v,a[2]=(p+x)/v):(v=2*Math.sqrt(1+b-u-c),a[3]=(h-i)/v,a[0]=(f+M)/v,a[1]=(p+x)/v,a[2]=.25*v),a}function Y(t,a,r,n){var e=a[0],o=a[1],s=a[2],u=a[3],h=e+e,M=o+o,i=s+s,c=e*h,p=e*M,f=e*i,x=o*M,b=o*i,l=s*i,v=u*h,m=u*M,P=u*i,O=n[0],E=n[1],S=n[2];return t[0]=(1-(x+l))*O,t[1]=(p+P)*O,t[2]=(f-m)*O,t[3]=0,t[4]=(p-P)*E,t[5]=(1-(c+l))*E,t[6]=(b+v)*E,t[7]=0,t[8]=(f+m)*S,t[9]=(b-v)*S,t[10]=(1-(c+x))*S,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function T(t,a,r,n,e){var o=a[0],s=a[1],u=a[2],h=a[3],M=o+o,i=s+s,c=u+u,p=o*M,f=o*i,x=o*c,b=s*i,l=s*c,v=u*c,m=h*M,P=h*i,O=h*c,E=n[0],S=n[1],y=n[2],I=e[0],L=e[1],N=e[2],R=(1-(b+v))*E,d=(f+O)*E,g=(x-P)*E,A=(f-O)*S,Y=(1-(p+v))*S,T=(l+m)*S,w=(x+P)*y,_=(l-m)*y,j=(1-(p+b))*y;return t[0]=R,t[1]=d,t[2]=g,t[3]=0,t[4]=A,t[5]=Y,t[6]=T,t[7]=0,t[8]=w,t[9]=_,t[10]=j,t[11]=0,t[12]=r[0]+I-(R*I+A*L+w*N),t[13]=r[1]+L-(d*I+Y*L+_*N),t[14]=r[2]+N-(g*I+T*L+j*N),t[15]=1,t}function w(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],s=r+r,u=n+n,h=e+e,M=r*s,i=n*s,c=n*u,p=e*s,f=e*u,x=e*h,b=o*s,l=o*u,v=o*h;return t[0]=1-c-x,t[1]=i+v,t[2]=p-l,t[3]=0,t[4]=i-v,t[5]=1-M-x,t[6]=f+b,t[7]=0,t[8]=p+l,t[9]=f-b,t[10]=1-M-c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function _(t,a,r,n,e,o,s){var u=1/(r-a),h=1/(e-n),M=1/(o-s);return t[0]=2*o*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*h,t[6]=0,t[7]=0,t[8]=(r+a)*u,t[9]=(e+n)*h,t[10]=(s+o)*M,t[11]=-1,t[12]=0,t[13]=0,t[14]=s*o*2*M,t[15]=0,t}function j(t,a,r,n,e){var o,s=1/Math.tan(a/2);return t[0]=s/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=e&&e!==1/0?(o=1/(n-e),t[10]=(e+n)*o,t[14]=2*e*n*o):(t[10]=-1,t[14]=-2*n),t}function q(t,a,r,n){var e=Math.tan(a.upDegrees*Math.PI/180),o=Math.tan(a.downDegrees*Math.PI/180),s=Math.tan(a.leftDegrees*Math.PI/180),u=Math.tan(a.rightDegrees*Math.PI/180),h=2/(s+u),M=2/(e+o);return t[0]=h,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=M,t[6]=0,t[7]=0,t[8]=-(s-u)*h*.5,t[9]=(e-o)*M*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t}function D(t,a,r,n,e,o,s){var u=1/(a-r),h=1/(n-e),M=1/(o-s);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*h,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*M,t[11]=0,t[12]=(a+r)*u,t[13]=(e+n)*h,t[14]=(s+o)*M,t[15]=1,t}function k(a,r,n,e){var o,s,u,M,i,c,p,f,x,b,l=r[0],v=r[1],m=r[2],P=e[0],O=e[1],E=e[2],S=n[0],y=n[1],I=n[2];return Math.abs(l-S)<t.EPSILON&&Math.abs(v-y)<t.EPSILON&&Math.abs(m-I)<t.EPSILON?h(a):(p=l-S,f=v-y,x=m-I,o=O*(x*=b=1/Math.hypot(p,f,x))-E*(f*=b),s=E*(p*=b)-P*x,u=P*f-O*p,(b=Math.hypot(o,s,u))?(o*=b=1/b,s*=b,u*=b):(o=0,s=0,u=0),M=f*u-x*s,i=x*o-p*u,c=p*s-f*o,(b=Math.hypot(M,i,c))?(M*=b=1/b,i*=b,c*=b):(M=0,i=0,c=0),a[0]=o,a[1]=M,a[2]=p,a[3]=0,a[4]=s,a[5]=i,a[6]=f,a[7]=0,a[8]=u,a[9]=c,a[10]=x,a[11]=0,a[12]=-(o*l+s*v+u*m),a[13]=-(M*l+i*v+c*m),a[14]=-(p*l+f*v+x*m),a[15]=1,a)}function F(t,a,r,n){var e=a[0],o=a[1],s=a[2],u=n[0],h=n[1],M=n[2],i=e-r[0],c=o-r[1],p=s-r[2],f=i*i+c*c+p*p;f>0&&(i*=f=1/Math.sqrt(f),c*=f,p*=f);var x=h*p-M*c,b=M*i-u*p,l=u*c-h*i;return(f=x*x+b*b+l*l)>0&&(x*=f=1/Math.sqrt(f),b*=f,l*=f),t[0]=x,t[1]=b,t[2]=l,t[3]=0,t[4]=c*l-p*b,t[5]=p*x-i*l,t[6]=i*b-c*x,t[7]=0,t[8]=i,t[9]=c,t[10]=p,t[11]=0,t[12]=e,t[13]=o,t[14]=s,t[15]=1,t}function Q(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function V(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function W(t,a,r){return t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t[3]=a[3]+r[3],t[4]=a[4]+r[4],t[5]=a[5]+r[5],t[6]=a[6]+r[6],t[7]=a[7]+r[7],t[8]=a[8]+r[8],t[9]=a[9]+r[9],t[10]=a[10]+r[10],t[11]=a[11]+r[11],t[12]=a[12]+r[12],t[13]=a[13]+r[13],t[14]=a[14]+r[14],t[15]=a[15]+r[15],t}function X(t,a,r){return t[0]=a[0]-r[0],t[1]=a[1]-r[1],t[2]=a[2]-r[2],t[3]=a[3]-r[3],t[4]=a[4]-r[4],t[5]=a[5]-r[5],t[6]=a[6]-r[6],t[7]=a[7]-r[7],t[8]=a[8]-r[8],t[9]=a[9]-r[9],t[10]=a[10]-r[10],t[11]=a[11]-r[11],t[12]=a[12]-r[12],t[13]=a[13]-r[13],t[14]=a[14]-r[14],t[15]=a[15]-r[15],t}function Z(t,a,r){return t[0]=a[0]*r,t[1]=a[1]*r,t[2]=a[2]*r,t[3]=a[3]*r,t[4]=a[4]*r,t[5]=a[5]*r,t[6]=a[6]*r,t[7]=a[7]*r,t[8]=a[8]*r,t[9]=a[9]*r,t[10]=a[10]*r,t[11]=a[11]*r,t[12]=a[12]*r,t[13]=a[13]*r,t[14]=a[14]*r,t[15]=a[15]*r,t}function z(t,a,r,n){return t[0]=a[0]+r[0]*n,t[1]=a[1]+r[1]*n,t[2]=a[2]+r[2]*n,t[3]=a[3]+r[3]*n,t[4]=a[4]+r[4]*n,t[5]=a[5]+r[5]*n,t[6]=a[6]+r[6]*n,t[7]=a[7]+r[7]*n,t[8]=a[8]+r[8]*n,t[9]=a[9]+r[9]*n,t[10]=a[10]+r[10]*n,t[11]=a[11]+r[11]*n,t[12]=a[12]+r[12]*n,t[13]=a[13]+r[13]*n,t[14]=a[14]+r[14]*n,t[15]=a[15]+r[15]*n,t}function B(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]&&t[4]===a[4]&&t[5]===a[5]&&t[6]===a[6]&&t[7]===a[7]&&t[8]===a[8]&&t[9]===a[9]&&t[10]===a[10]&&t[11]===a[11]&&t[12]===a[12]&&t[13]===a[13]&&t[14]===a[14]&&t[15]===a[15]}function C(a,r){var n=a[0],e=a[1],o=a[2],s=a[3],u=a[4],h=a[5],M=a[6],i=a[7],c=a[8],p=a[9],f=a[10],x=a[11],b=a[12],l=a[13],v=a[14],m=a[15],P=r[0],O=r[1],E=r[2],S=r[3],y=r[4],I=r[5],L=r[6],N=r[7],R=r[8],d=r[9],g=r[10],A=r[11],Y=r[12],T=r[13],w=r[14],_=r[15];return Math.abs(n-P)<=t.EPSILON*Math.max(1,Math.abs(n),Math.abs(P))&&Math.abs(e-O)<=t.EPSILON*Math.max(1,Math.abs(e),Math.abs(O))&&Math.abs(o-E)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(E))&&Math.abs(s-S)<=t.EPSILON*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(u-y)<=t.EPSILON*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(h-I)<=t.EPSILON*Math.max(1,Math.abs(h),Math.abs(I))&&Math.abs(M-L)<=t.EPSILON*Math.max(1,Math.abs(M),Math.abs(L))&&Math.abs(i-N)<=t.EPSILON*Math.max(1,Math.abs(i),Math.abs(N))&&Math.abs(c-R)<=t.EPSILON*Math.max(1,Math.abs(c),Math.abs(R))&&Math.abs(p-d)<=t.EPSILON*Math.max(1,Math.abs(p),Math.abs(d))&&Math.abs(f-g)<=t.EPSILON*Math.max(1,Math.abs(f),Math.abs(g))&&Math.abs(x-A)<=t.EPSILON*Math.max(1,Math.abs(x),Math.abs(A))&&Math.abs(b-Y)<=t.EPSILON*Math.max(1,Math.abs(b),Math.abs(Y))&&Math.abs(l-T)<=t.EPSILON*Math.max(1,Math.abs(l),Math.abs(T))&&Math.abs(v-w)<=t.EPSILON*Math.max(1,Math.abs(v),Math.abs(w))&&Math.abs(m-_)<=t.EPSILON*Math.max(1,Math.abs(m),Math.abs(_))}var G=f;exports.mul=G;var H=X;exports.sub=H;
},{"./common.js":"XJqx"}],"zWbG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=n,exports.clone=o,exports.fromValues=a,exports.copy=u,exports.set=s,exports.add=i,exports.subtract=c,exports.multiply=p,exports.divide=f,exports.ceil=x,exports.floor=h,exports.min=M,exports.max=l,exports.round=v,exports.scale=d,exports.scaleAndAdd=m,exports.distance=b,exports.squaredDistance=O,exports.length=y,exports.squaredLength=A,exports.negate=P,exports.inverse=R,exports.normalize=q,exports.dot=E,exports.cross=g,exports.lerp=w,exports.random=D,exports.transformMat4=j,exports.transformQuat=N,exports.zero=Y,exports.str=_,exports.exactEquals=L,exports.equals=I,exports.forEach=exports.sqrLen=exports.len=exports.sqrDist=exports.dist=exports.div=exports.mul=exports.sub=void 0;var t=e(require("./common.js"));function r(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return r=function(){return t},t}function e(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=r();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var u=o?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}function n(){var r=new t.ARRAY_TYPE(4);return t.ARRAY_TYPE!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0,r[3]=0),r}function o(r){var e=new t.ARRAY_TYPE(4);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e}function a(r,e,n,o){var a=new t.ARRAY_TYPE(4);return a[0]=r,a[1]=e,a[2]=n,a[3]=o,a}function u(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t}function s(t,r,e,n,o){return t[0]=r,t[1]=e,t[2]=n,t[3]=o,t}function i(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t[3]=r[3]+e[3],t}function c(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t[3]=r[3]-e[3],t}function p(t,r,e){return t[0]=r[0]*e[0],t[1]=r[1]*e[1],t[2]=r[2]*e[2],t[3]=r[3]*e[3],t}function f(t,r,e){return t[0]=r[0]/e[0],t[1]=r[1]/e[1],t[2]=r[2]/e[2],t[3]=r[3]/e[3],t}function x(t,r){return t[0]=Math.ceil(r[0]),t[1]=Math.ceil(r[1]),t[2]=Math.ceil(r[2]),t[3]=Math.ceil(r[3]),t}function h(t,r){return t[0]=Math.floor(r[0]),t[1]=Math.floor(r[1]),t[2]=Math.floor(r[2]),t[3]=Math.floor(r[3]),t}function M(t,r,e){return t[0]=Math.min(r[0],e[0]),t[1]=Math.min(r[1],e[1]),t[2]=Math.min(r[2],e[2]),t[3]=Math.min(r[3],e[3]),t}function l(t,r,e){return t[0]=Math.max(r[0],e[0]),t[1]=Math.max(r[1],e[1]),t[2]=Math.max(r[2],e[2]),t[3]=Math.max(r[3],e[3]),t}function v(t,r){return t[0]=Math.round(r[0]),t[1]=Math.round(r[1]),t[2]=Math.round(r[2]),t[3]=Math.round(r[3]),t}function d(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t[3]=r[3]*e,t}function m(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t[2]=r[2]+e[2]*n,t[3]=r[3]+e[3]*n,t}function b(t,r){var e=r[0]-t[0],n=r[1]-t[1],o=r[2]-t[2],a=r[3]-t[3];return Math.hypot(e,n,o,a)}function O(t,r){var e=r[0]-t[0],n=r[1]-t[1],o=r[2]-t[2],a=r[3]-t[3];return e*e+n*n+o*o+a*a}function y(t){var r=t[0],e=t[1],n=t[2],o=t[3];return Math.hypot(r,e,n,o)}function A(t){var r=t[0],e=t[1],n=t[2],o=t[3];return r*r+e*e+n*n+o*o}function P(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t[3]=-r[3],t}function R(t,r){return t[0]=1/r[0],t[1]=1/r[1],t[2]=1/r[2],t[3]=1/r[3],t}function q(t,r){var e=r[0],n=r[1],o=r[2],a=r[3],u=e*e+n*n+o*o+a*a;return u>0&&(u=1/Math.sqrt(u)),t[0]=e*u,t[1]=n*u,t[2]=o*u,t[3]=a*u,t}function E(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]+t[3]*r[3]}function g(t,r,e,n){var o=e[0]*n[1]-e[1]*n[0],a=e[0]*n[2]-e[2]*n[0],u=e[0]*n[3]-e[3]*n[0],s=e[1]*n[2]-e[2]*n[1],i=e[1]*n[3]-e[3]*n[1],c=e[2]*n[3]-e[3]*n[2],p=r[0],f=r[1],x=r[2],h=r[3];return t[0]=f*c-x*i+h*s,t[1]=-p*c+x*u-h*a,t[2]=p*i-f*u+h*o,t[3]=-p*s+f*a-x*o,t}function w(t,r,e,n){var o=r[0],a=r[1],u=r[2],s=r[3];return t[0]=o+n*(e[0]-o),t[1]=a+n*(e[1]-a),t[2]=u+n*(e[2]-u),t[3]=s+n*(e[3]-s),t}function D(r,e){var n,o,a,u,s,i;e=e||1;do{s=(n=2*t.RANDOM()-1)*n+(o=2*t.RANDOM()-1)*o}while(s>=1);do{i=(a=2*t.RANDOM()-1)*a+(u=2*t.RANDOM()-1)*u}while(i>=1);var c=Math.sqrt((1-s)/i);return r[0]=e*n,r[1]=e*o,r[2]=e*a*c,r[3]=e*u*c,r}function j(t,r,e){var n=r[0],o=r[1],a=r[2],u=r[3];return t[0]=e[0]*n+e[4]*o+e[8]*a+e[12]*u,t[1]=e[1]*n+e[5]*o+e[9]*a+e[13]*u,t[2]=e[2]*n+e[6]*o+e[10]*a+e[14]*u,t[3]=e[3]*n+e[7]*o+e[11]*a+e[15]*u,t}function N(t,r,e){var n=r[0],o=r[1],a=r[2],u=e[0],s=e[1],i=e[2],c=e[3],p=c*n+s*a-i*o,f=c*o+i*n-u*a,x=c*a+u*o-s*n,h=-u*n-s*o-i*a;return t[0]=p*c+h*-u+f*-i-x*-s,t[1]=f*c+h*-s+x*-u-p*-i,t[2]=x*c+h*-i+p*-s-f*-u,t[3]=r[3],t}function Y(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function _(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function L(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]}function I(r,e){var n=r[0],o=r[1],a=r[2],u=r[3],s=e[0],i=e[1],c=e[2],p=e[3];return Math.abs(n-s)<=t.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(o-i)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(i))&&Math.abs(a-c)<=t.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(u-p)<=t.EPSILON*Math.max(1,Math.abs(u),Math.abs(p))}var S=c;exports.sub=S;var T=p;exports.mul=T;var k=f;exports.div=k;var z=b;exports.dist=z;var W=O;exports.sqrDist=W;var F=y;exports.len=F;var Q=A;exports.sqrLen=Q;var V=function(){var t=n();return function(r,e,n,o,a,u){var s,i;for(e||(e=4),n||(n=0),i=o?Math.min(o*e+n,r.length):r.length,s=n;s<i;s+=e)t[0]=r[s],t[1]=r[s+1],t[2]=r[s+2],t[3]=r[s+3],a(t,t,u),r[s]=t[0],r[s+1]=t[1],r[s+2]=t[2],r[s+3]=t[3];return r}}();exports.forEach=V;
},{"./common.js":"XJqx"}],"of13":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=k(require("@babel/runtime/helpers/esm/slicedToArray")),e=k(require("@babel/runtime/helpers/esm/classCallCheck")),r=k(require("@babel/runtime/helpers/esm/createClass")),i=k(require("@babel/runtime/helpers/esm/inherits")),n=k(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),s=k(require("@babel/runtime/helpers/esm/getPrototypeOf")),h=require("../lib/validators"),a=k(require("./base/matrix")),o=require("../lib/gl-matrix-extras"),u=y(require("gl-matrix/mat4")),c=y(require("gl-matrix/vec2")),l=y(require("gl-matrix/vec3")),f=y(require("gl-matrix/vec4"));function v(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return v=function(){return t},t}function y(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=v();if(e&&e.has(t))return e.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var s=i?Object.getOwnPropertyDescriptor(t,n):null;s&&(s.get||s.set)?Object.defineProperty(r,n,s):r[n]=t[n]}return r.default=t,e&&e.set(t,r),r}function k(t){return t&&t.__esModule?t:{default:t}}function d(t){var e=p();return function(){var r,i=(0,s.default)(t);if(e){var h=(0,s.default)(this).constructor;r=Reflect.construct(i,arguments,h)}else r=i.apply(this,arguments);return(0,n.default)(this,r)}}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}var m=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),O=Object.freeze([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),g=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL0ROW3:3,COL1ROW0:4,COL1ROW1:5,COL1ROW2:6,COL1ROW3:7,COL2ROW0:8,COL2ROW1:9,COL2ROW2:10,COL2ROW3:11,COL3ROW0:12,COL3ROW1:13,COL3ROW2:14,COL3ROW3:15}),b={},R=function(n){(0,i.default)(a,n);var s=d(a);function a(t){var r;return(0,e.default)(this,a),r=s.call(this,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(t)?r.copy(t):r.identity(),r}return(0,r.default)(a,[{key:"INDICES",get:function(){return g}},{key:"ELEMENTS",get:function(){return 16}},{key:"RANK",get:function(){return 4}}],[{key:"IDENTITY",get:function(){return b.IDENTITY=b.IDENTITY||Object.freeze(new a(m)),b.IDENTITY}},{key:"ZERO",get:function(){return b.ZERO=b.ZERO||Object.freeze(new a(O)),b.ZERO}}]),(0,r.default)(a,[{key:"copy",value:function(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this[9]=t[9],this[10]=t[10],this[11]=t[11],this[12]=t[12],this[13]=t[13],this[14]=t[14],this[15]=t[15],this.check()}},{key:"set",value:function(t,e,r,i,n,s,h,a,o,u,c,l,f,v,y,k){return this[0]=t,this[1]=e,this[2]=r,this[3]=i,this[4]=n,this[5]=s,this[6]=h,this[7]=a,this[8]=o,this[9]=u,this[10]=c,this[11]=l,this[12]=f,this[13]=v,this[14]=y,this[15]=k,this.check()}},{key:"setRowMajor",value:function(t,e,r,i,n,s,h,a,o,u,c,l,f,v,y,k){return this[0]=t,this[1]=n,this[2]=o,this[3]=f,this[4]=e,this[5]=s,this[6]=u,this[7]=v,this[8]=r,this[9]=h,this[10]=c,this[11]=y,this[12]=i,this[13]=a,this[14]=l,this[15]=k,this.check()}},{key:"toRowMajor",value:function(t){return t[0]=this[0],t[1]=this[4],t[2]=this[8],t[3]=this[12],t[4]=this[1],t[5]=this[5],t[6]=this[9],t[7]=this[13],t[8]=this[2],t[9]=this[6],t[10]=this[10],t[11]=this[14],t[12]=this[3],t[13]=this[7],t[14]=this[11],t[15]=this[15],t}},{key:"identity",value:function(){return this.copy(m)}},{key:"fromQuaternion",value:function(t){return u.fromQuat(this,t),this.check()}},{key:"frustum",value:function(t){var e=t.left,r=t.right,i=t.bottom,n=t.top,s=t.near,h=t.far;return h===1/0?a._computeInfinitePerspectiveOffCenter(this,e,r,i,n,s):u.frustum(this,e,r,i,n,s,h),this.check()}},{key:"lookAt",value:function(t,e,r){if(1===arguments.length){var i=t;t=i.eye,e=i.center,r=i.up}return e=e||[0,0,0],r=r||[0,1,0],u.lookAt(this,t,e,r),this.check()}},{key:"ortho",value:function(t){var e=t.left,r=t.right,i=t.bottom,n=t.top,s=t.near,h=void 0===s?.1:s,a=t.far,o=void 0===a?500:a;return u.ortho(this,e,r,i,n,h,o),this.check()}},{key:"orthographic",value:function(t){var e=t.fovy,r=void 0===e?45*Math.PI/180:e,i=t.aspect,n=void 0===i?1:i,s=t.focalDistance,h=void 0===s?1:s,o=t.near,u=void 0===o?.1:o,c=t.far,l=void 0===c?500:c;if(r>2*Math.PI)throw Error("radians");var f=r/2,v=h*Math.tan(f),y=v*n;return(new a).ortho({left:-y,right:y,bottom:-v,top:v,near:u,far:l})}},{key:"perspective",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.fovy,r=void 0===e?void 0:e,i=t.fov,n=void 0===i?45*Math.PI/180:i,s=t.aspect,h=void 0===s?1:s,a=t.near,o=void 0===a?.1:a,c=t.far,l=void 0===c?500:c;if((r=r||n)>2*Math.PI)throw Error("radians");return u.perspective(this,r,h,o,l),this.check()}},{key:"determinant",value:function(){return u.determinant(this)}},{key:"getScale",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0];return t[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),t[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),t[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),t}},{key:"getTranslation",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0];return t[0]=this[12],t[1]=this[13],t[2]=this[14],t}},{key:"getRotation",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=this.getScale(e||[-0,-0,-0]),i=1/r[0],n=1/r[1],s=1/r[2];return t[0]=this[0]*i,t[1]=this[1]*n,t[2]=this[2]*s,t[3]=0,t[4]=this[4]*i,t[5]=this[5]*n,t[6]=this[6]*s,t[7]=0,t[8]=this[8]*i,t[9]=this[9]*n,t[10]=this[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},{key:"getRotationMatrix3",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0,-0,-0,-0,-0,-0,-0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=this.getScale(e||[-0,-0,-0]),i=1/r[0],n=1/r[1],s=1/r[2];return t[0]=this[0]*i,t[1]=this[1]*n,t[2]=this[2]*s,t[3]=this[4]*i,t[4]=this[5]*n,t[5]=this[6]*s,t[6]=this[8]*i,t[7]=this[9]*n,t[8]=this[10]*s,t}},{key:"transpose",value:function(){return u.transpose(this,this),this.check()}},{key:"invert",value:function(){return u.invert(this,this),this.check()}},{key:"multiplyLeft",value:function(t){return u.multiply(this,t,this),this.check()}},{key:"multiplyRight",value:function(t){return u.multiply(this,this,t),this.check()}},{key:"rotateX",value:function(t){return u.rotateX(this,this,t),this.check()}},{key:"rotateY",value:function(t){return u.rotateY(this,this,t),this.check()}},{key:"rotateZ",value:function(t){return u.rotateZ(this,this,t),this.check()}},{key:"rotateXYZ",value:function(e){var r=(0,t.default)(e,3),i=r[0],n=r[1],s=r[2];return this.rotateX(i).rotateY(n).rotateZ(s)}},{key:"rotateAxis",value:function(t,e){return u.rotate(this,this,t,e),this.check()}},{key:"scale",value:function(t){return Array.isArray(t)?u.scale(this,this,t):u.scale(this,this,[t,t,t]),this.check()}},{key:"translate",value:function(t){return u.translate(this,this,t),this.check()}},{key:"transform",value:function(t,e){return 4===t.length?(e=f.transformMat4(e||[-0,-0,-0,-0],t,this),(0,h.checkVector)(e,4),e):this.transformAsPoint(t,e)}},{key:"transformAsPoint",value:function(t,e){switch(t.length){case 2:e=c.transformMat4(e||[-0,-0],t,this);break;case 3:e=l.transformMat4(e||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return(0,h.checkVector)(e,t.length),e}},{key:"transformAsVector",value:function(t,e){switch(t.length){case 2:e=(0,o.vec2_transformMat4AsVector)(e||[-0,-0],t,this);break;case 3:e=(0,o.vec3_transformMat4AsVector)(e||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return(0,h.checkVector)(e,t.length),e}},{key:"makeRotationX",value:function(t){return this.identity().rotateX(t)}},{key:"makeTranslation",value:function(t,e,r){return this.identity().translate([t,e,r])}},{key:"transformPoint",value:function(t,e){return(0,h.deprecated)("Matrix4.transformPoint","3.0"),this.transformAsPoint(t,e)}},{key:"transformVector",value:function(t,e){return(0,h.deprecated)("Matrix4.transformVector","3.0"),this.transformAsPoint(t,e)}},{key:"transformDirection",value:function(t,e){return(0,h.deprecated)("Matrix4.transformDirection","3.0"),this.transformAsVector(t,e)}}],[{key:"_computeInfinitePerspectiveOffCenter",value:function(t,e,r,i,n,s){var h=2*s/(r-e),a=2*s/(n-i),o=(r+e)/(r-e),u=(n+i)/(n-i),c=-2*s;return t[0]=h,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=o,t[9]=u,t[10]=-1,t[11]=-1,t[12]=0,t[13]=0,t[14]=c,t[15]=0,t}}]),a}(a.default);exports.default=R;
},{"@babel/runtime/helpers/esm/slicedToArray":"TBeo","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","../lib/validators":"imS9","./base/matrix":"rnPl","../lib/gl-matrix-extras":"q1wk","gl-matrix/mat4":"w3aR","gl-matrix/vec2":"XSo1","gl-matrix/vec3":"AWBd","gl-matrix/vec4":"zWbG"}],"KdRW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=s,exports.identity=u,exports.setAxisAngle=p,exports.getAxisAngle=c,exports.getAngle=i,exports.multiply=x,exports.rotateX=l,exports.rotateY=f,exports.rotateZ=v,exports.calculateW=h,exports.exp=M,exports.ln=q,exports.pow=d,exports.slerp=m,exports.random=g,exports.invert=y,exports.conjugate=P,exports.fromMat3=A,exports.fromEuler=O,exports.str=j,exports.setAxes=exports.sqlerp=exports.rotationTo=exports.equals=exports.exactEquals=exports.normalize=exports.sqrLen=exports.squaredLength=exports.len=exports.length=exports.lerp=exports.dot=exports.scale=exports.mul=exports.add=exports.set=exports.copy=exports.fromValues=exports.clone=void 0;var t=n(require("./common.js")),r=n(require("./mat3.js")),e=n(require("./vec3.js")),o=n(require("./vec4.js"));function a(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return a=function(){return t},t}function n(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var r=a();if(r&&r.has(t))return r.get(t);var e={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var s=o?Object.getOwnPropertyDescriptor(t,n):null;s&&(s.get||s.set)?Object.defineProperty(e,n,s):e[n]=t[n]}return e.default=t,r&&r.set(t,e),e}function s(){var r=new t.ARRAY_TYPE(4);return t.ARRAY_TYPE!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r[3]=1,r}function u(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function p(t,r,e){e*=.5;var o=Math.sin(e);return t[0]=o*r[0],t[1]=o*r[1],t[2]=o*r[2],t[3]=Math.cos(e),t}function c(r,e){var o=2*Math.acos(e[3]),a=Math.sin(o/2);return a>t.EPSILON?(r[0]=e[0]/a,r[1]=e[1]/a,r[2]=e[2]/a):(r[0]=1,r[1]=0,r[2]=0),o}function i(t,r){var e=D(t,r);return Math.acos(2*e*e-1)}function x(t,r,e){var o=r[0],a=r[1],n=r[2],s=r[3],u=e[0],p=e[1],c=e[2],i=e[3];return t[0]=o*i+s*u+a*c-n*p,t[1]=a*i+s*p+n*u-o*c,t[2]=n*i+s*c+o*p-a*u,t[3]=s*i-o*u-a*p-n*c,t}function l(t,r,e){e*=.5;var o=r[0],a=r[1],n=r[2],s=r[3],u=Math.sin(e),p=Math.cos(e);return t[0]=o*p+s*u,t[1]=a*p+n*u,t[2]=n*p-a*u,t[3]=s*p-o*u,t}function f(t,r,e){e*=.5;var o=r[0],a=r[1],n=r[2],s=r[3],u=Math.sin(e),p=Math.cos(e);return t[0]=o*p-n*u,t[1]=a*p+s*u,t[2]=n*p+o*u,t[3]=s*p-a*u,t}function v(t,r,e){e*=.5;var o=r[0],a=r[1],n=r[2],s=r[3],u=Math.sin(e),p=Math.cos(e);return t[0]=o*p+a*u,t[1]=a*p-o*u,t[2]=n*p+s*u,t[3]=s*p-n*u,t}function h(t,r){var e=r[0],o=r[1],a=r[2];return t[0]=e,t[1]=o,t[2]=a,t[3]=Math.sqrt(Math.abs(1-e*e-o*o-a*a)),t}function M(t,r){var e=r[0],o=r[1],a=r[2],n=r[3],s=Math.sqrt(e*e+o*o+a*a),u=Math.exp(n),p=s>0?u*Math.sin(s)/s:0;return t[0]=e*p,t[1]=o*p,t[2]=a*p,t[3]=u*Math.cos(s),t}function q(t,r){var e=r[0],o=r[1],a=r[2],n=r[3],s=Math.sqrt(e*e+o*o+a*a),u=s>0?Math.atan2(s,n)/s:0;return t[0]=e*u,t[1]=o*u,t[2]=a*u,t[3]=.5*Math.log(e*e+o*o+a*a+n*n),t}function d(t,r,e){return q(t,r),_(t,t,e),M(t,t),t}function m(r,e,o,a){var n,s,u,p,c,i=e[0],x=e[1],l=e[2],f=e[3],v=o[0],h=o[1],M=o[2],q=o[3];return(s=i*v+x*h+l*M+f*q)<0&&(s=-s,v=-v,h=-h,M=-M,q=-q),1-s>t.EPSILON?(n=Math.acos(s),u=Math.sin(n),p=Math.sin((1-a)*n)/u,c=Math.sin(a*n)/u):(p=1-a,c=a),r[0]=p*i+c*v,r[1]=p*x+c*h,r[2]=p*l+c*M,r[3]=p*f+c*q,r}function g(r){var e=t.RANDOM(),o=t.RANDOM(),a=t.RANDOM(),n=Math.sqrt(1-e),s=Math.sqrt(e);return r[0]=n*Math.sin(2*Math.PI*o),r[1]=n*Math.cos(2*Math.PI*o),r[2]=s*Math.sin(2*Math.PI*a),r[3]=s*Math.cos(2*Math.PI*a),r}function y(t,r){var e=r[0],o=r[1],a=r[2],n=r[3],s=e*e+o*o+a*a+n*n,u=s?1/s:0;return t[0]=-e*u,t[1]=-o*u,t[2]=-a*u,t[3]=n*u,t}function P(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t[3]=r[3],t}function A(t,r){var e,o=r[0]+r[4]+r[8];if(o>0)e=Math.sqrt(o+1),t[3]=.5*e,e=.5/e,t[0]=(r[5]-r[7])*e,t[1]=(r[6]-r[2])*e,t[2]=(r[1]-r[3])*e;else{var a=0;r[4]>r[0]&&(a=1),r[8]>r[3*a+a]&&(a=2);var n=(a+1)%3,s=(a+2)%3;e=Math.sqrt(r[3*a+a]-r[3*n+n]-r[3*s+s]+1),t[a]=.5*e,e=.5/e,t[3]=(r[3*n+s]-r[3*s+n])*e,t[n]=(r[3*n+a]+r[3*a+n])*e,t[s]=(r[3*s+a]+r[3*a+s])*e}return t}function O(t,r,e,o){var a=.5*Math.PI/180;r*=a,e*=a,o*=a;var n=Math.sin(r),s=Math.cos(r),u=Math.sin(e),p=Math.cos(e),c=Math.sin(o),i=Math.cos(o);return t[0]=n*p*i-s*u*c,t[1]=s*u*i+n*p*c,t[2]=s*p*c-n*u*i,t[3]=s*p*i+n*u*c,t}function j(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var b=o.clone;exports.clone=b;var E=o.fromValues;exports.fromValues=E;var I=o.copy;exports.copy=I;var L=o.set;exports.set=L;var R=o.add;exports.add=R;var w=x;exports.mul=w;var _=o.scale;exports.scale=_;var D=o.dot;exports.dot=D;var N=o.lerp;exports.lerp=N;var V=o.length;exports.length=V;var Y=V;exports.len=Y;var z=o.squaredLength;exports.squaredLength=z;var T=z;exports.sqrLen=T;var W=o.normalize;exports.normalize=W;var k=o.exactEquals;exports.exactEquals=k;var S=o.equals;exports.equals=S;var F=function(){var t=e.create(),r=e.fromValues(1,0,0),o=e.fromValues(0,1,0);return function(a,n,s){var u=e.dot(n,s);return u<-.999999?(e.cross(t,r,n),e.len(t)<1e-6&&e.cross(t,o,n),e.normalize(t,t),p(a,t,Math.PI),a):u>.999999?(a[0]=0,a[1]=0,a[2]=0,a[3]=1,a):(e.cross(t,n,s),a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=1+u,W(a,a))}}();exports.rotationTo=F;var X=function(){var t=s(),r=s();return function(e,o,a,n,s,u){return m(t,o,s,u),m(r,a,n,u),m(e,t,r,2*u*(1-u)),e}}();exports.sqlerp=X;var Z=function(){var t=r.create();return function(r,e,o,a){return t[0]=o[0],t[3]=o[1],t[6]=o[2],t[1]=a[0],t[4]=a[1],t[7]=a[2],t[2]=-e[0],t[5]=-e[1],t[8]=-e[2],W(r,A(r,t))}}();exports.setAxes=Z;
},{"./common.js":"XJqx","./mat3.js":"vtQf","./vec3.js":"AWBd","./vec4.js":"zWbG"}],"T1TH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=f(require("@babel/runtime/helpers/esm/classCallCheck")),e=f(require("@babel/runtime/helpers/esm/createClass")),r=f(require("@babel/runtime/helpers/esm/inherits")),i=f(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),n=f(require("@babel/runtime/helpers/esm/getPrototypeOf")),u=f(require("./base/math-array")),s=require("../lib/validators"),c=f(require("../lib/assert")),o=l(require("gl-matrix/quat")),h=l(require("gl-matrix/vec4"));function a(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return a=function(){return t},t}function l(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=a();if(e&&e.has(t))return e.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var u=i?Object.getOwnPropertyDescriptor(t,n):null;u&&(u.get||u.set)?Object.defineProperty(r,n,u):r[n]=t[n]}return r.default=t,e&&e.set(t,r),r}function f(t){return t&&t.__esModule?t:{default:t}}function y(t){var e=k();return function(){var r,u=(0,n.default)(t);if(e){var s=(0,n.default)(this).constructor;r=Reflect.construct(u,arguments,s)}else r=u.apply(this,arguments);return(0,i.default)(this,r)}}function k(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}var v=[0,0,0,1],p=function(i){(0,r.default)(u,i);var n=y(u);function u(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return(0,t.default)(this,u),e=n.call(this,-0,-0,-0,-0),Array.isArray(r)&&1===arguments.length?e.copy(r):e.set(r,i,s,c),e}return(0,e.default)(u,[{key:"copy",value:function(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this.check()}},{key:"set",value:function(t,e,r,i){return this[0]=t,this[1]=e,this[2]=r,this[3]=i,this.check()}},{key:"fromMatrix3",value:function(t){return o.fromMat3(this,t),this.check()}},{key:"identity",value:function(){return o.identity(this),this.check()}},{key:"fromAxisRotation",value:function(t,e){return o.setAxisAngle(this,t,e),this.check()}},{key:"setAxisAngle",value:function(t,e){return this.fromAxisRotation(t,e)}},{key:"len",value:function(){return o.length(this)}},{key:"lengthSquared",value:function(){return o.squaredLength(this)}},{key:"dot",value:function(t,e){if(void 0!==e)throw new Error("Quaternion.dot only takes one argument");return o.dot(this,t)}},{key:"rotationTo",value:function(t,e){return o.rotationTo(this,t,e),this.check()}},{key:"add",value:function(t,e){if(void 0!==e)throw new Error("Quaternion.add only takes one argument");return o.add(this,this,t),this.check()}},{key:"calculateW",value:function(){return o.calculateW(this,this),this.check()}},{key:"conjugate",value:function(){return o.conjugate(this,this),this.check()}},{key:"invert",value:function(){return o.invert(this,this),this.check()}},{key:"lerp",value:function(t,e,r){return o.lerp(this,t,e,r),this.check()}},{key:"multiplyRight",value:function(t,e){return(0,c.default)(!e),o.multiply(this,this,t),this.check()}},{key:"multiplyLeft",value:function(t,e){return(0,c.default)(!e),o.multiply(this,t,this),this.check()}},{key:"normalize",value:function(){var t=this.len(),e=t>0?1/t:0;return this[0]=this[0]*e,this[1]=this[1]*e,this[2]=this[2]*e,this[3]=this[3]*e,0===t&&(this[3]=1),this.check()}},{key:"rotateX",value:function(t){return o.rotateX(this,this,t),this.check()}},{key:"rotateY",value:function(t){return o.rotateY(this,this,t),this.check()}},{key:"rotateZ",value:function(t){return o.rotateZ(this,this,t),this.check()}},{key:"scale",value:function(t){return o.scale(this,this,t),this.check()}},{key:"slerp",value:function(t,e,r){switch(arguments.length){case 1:var i=arguments[0],n=i.start;t=void 0===n?v:n,e=i.target,r=i.ratio;break;case 2:var u=Array.prototype.slice.call(arguments);e=u[0],r=u[1],t=this}return o.slerp(this,t,e,r),this.check()}},{key:"transformVector4",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;return h.transformQuat(e,t,this),(0,s.checkVector)(e,4)}},{key:"lengthSq",value:function(){return this.lengthSquared()}},{key:"setFromAxisAngle",value:function(t,e){return this.setAxisAngle(t,e)}},{key:"premultiply",value:function(t,e){return this.multiplyLeft(t,e)}},{key:"multiply",value:function(t,e){return this.multiplyRight(t,e)}},{key:"ELEMENTS",get:function(){return 4}},{key:"x",get:function(){return this[0]},set:function(t){this[0]=(0,s.checkNumber)(t)}},{key:"y",get:function(){return this[1]},set:function(t){this[1]=(0,s.checkNumber)(t)}},{key:"z",get:function(){return this[2]},set:function(t){this[2]=(0,s.checkNumber)(t)}},{key:"w",get:function(){return this[3]},set:function(t){this[3]=(0,s.checkNumber)(t)}}]),u}(u.default);exports.default=p;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","./base/math-array":"cPa0","../lib/validators":"imS9","../lib/assert":"YXhZ","gl-matrix/quat":"KdRW","gl-matrix/vec4":"zWbG"}],"XSGy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={EPSILON1:.1,EPSILON2:.01,EPSILON3:.001,EPSILON4:1e-4,EPSILON5:1e-5,EPSILON6:1e-6,EPSILON7:1e-7,EPSILON8:1e-8,EPSILON9:1e-9,EPSILON10:1e-10,EPSILON11:1e-11,EPSILON12:1e-12,EPSILON13:1e-13,EPSILON14:1e-14,EPSILON15:1e-15,EPSILON16:1e-16,EPSILON17:1e-17,EPSILON18:1e-18,EPSILON19:1e-19,EPSILON20:1e-20,PI_OVER_TWO:Math.PI/2,PI_OVER_FOUR:Math.PI/4,PI_OVER_SIX:Math.PI/6,TWO_PI:2*Math.PI};exports.default=e;
},{}],"xqJO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=h(require("@babel/runtime/helpers/esm/slicedToArray")),e=h(require("@babel/runtime/helpers/esm/classCallCheck")),i=h(require("@babel/runtime/helpers/esm/createClass")),r=require("../lib/common"),a=h(require("./vector3")),n=u(require("gl-matrix/vec3"));function s(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return s=function(){return t},t}function u(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=s();if(e&&e.has(t))return e.get(t);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var n=r?Object.getOwnPropertyDescriptor(t,a):null;n&&(n.get||n.set)?Object.defineProperty(i,a,n):i[a]=t[a]}return i.default=t,e&&e.set(t,i),i}function h(t){return t&&t.__esModule?t:{default:t}}var o=1e-6,c=6371e3,d=function(){function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.phi,r=void 0===i?0:i,a=t.theta,n=void 0===a?0:a,u=t.radius,h=void 0===u?1:u,o=t.bearing,d=void 0===o?void 0:o,l=t.pitch,f=void 0===l?void 0:l,p=t.altitude,v=void 0===p?void 0:p,y=t.radiusScale,g=void 0===y?c:y;(0,e.default)(this,s),this.phi=r,this.theta=n,this.radius=h||v||1,this.radiusScale=g||1,void 0!==d&&(this.bearing=d),void 0!==f&&(this.pitch=f),this.check()}return(0,i.default)(s,[{key:"toString",value:function(){return this.formatString(r.config)}},{key:"formatString",value:function(t){var e=t.printTypes,i=void 0!==e&&e,a=r.formatValue;return"".concat(i?"Spherical":"","[rho:").concat(a(this.radius),",theta:").concat(a(this.theta),",phi:").concat(a(this.phi),"]")}},{key:"equals",value:function(t){return(0,r.equals)(this.radius,t.radius)&&(0,r.equals)(this.theta,t.theta)&&(0,r.equals)(this.phi,t.phi)}},{key:"exactEquals",value:function(t){return this.radius===t.radius&&this.theta===t.theta&&this.phi===t.phi}},{key:"set",value:function(t,e,i){return this.radius=t,this.phi=e,this.theta=i,this.check()}},{key:"clone",value:function(){return(new s).copy(this)}},{key:"copy",value:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this.check()}},{key:"fromLngLatZ",value:function(e){var i=(0,t.default)(e,3),a=i[0],n=i[1],s=i[2];this.radius=1+s/this.radiusScale,this.phi=(0,r.radians)(n),this.theta=(0,r.radians)(a)}},{key:"fromVector3",value:function(t){return this.radius=n.length(t),this.radius>0&&(this.theta=Math.atan2(t[0],t[1]),this.phi=Math.acos((0,r.clamp)(t[2]/this.radius,-1,1))),this.check()}},{key:"toVector3",value:function(){return new a.default(0,0,this.radius).rotateX({radians:this.theta}).rotateZ({radians:this.phi})}},{key:"makeSafe",value:function(){return this.phi=Math.max(o,Math.min(Math.PI-o,this.phi)),this}},{key:"check",value:function(){if(!(Number.isFinite(this.phi)&&Number.isFinite(this.theta)&&this.radius>0))throw new Error("SphericalCoordinates: some fields set to invalid numbers");return this}},{key:"bearing",get:function(){return 180-(0,r.degrees)(this.phi)},set:function(t){this.phi=Math.PI-(0,r.radians)(t)}},{key:"pitch",get:function(){return(0,r.degrees)(this.theta)},set:function(t){this.theta=(0,r.radians)(t)}},{key:"longitude",get:function(){return(0,r.degrees)(this.phi)}},{key:"latitude",get:function(){return(0,r.degrees)(this.theta)}},{key:"lng",get:function(){return(0,r.degrees)(this.phi)}},{key:"lat",get:function(){return(0,r.degrees)(this.theta)}},{key:"z",get:function(){return(this.radius-1)*this.radiusScale}}]),s}();exports.default=d;
},{"@babel/runtime/helpers/esm/slicedToArray":"TBeo","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","../lib/common":"wKVf","./vector3":"WGSx","gl-matrix/vec3":"AWBd"}],"t6Su":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=c(require("@babel/runtime/helpers/esm/slicedToArray")),e=c(require("@babel/runtime/helpers/esm/classCallCheck")),r=c(require("@babel/runtime/helpers/esm/createClass")),i=c(require("@babel/runtime/helpers/esm/inherits")),n=c(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),a=c(require("@babel/runtime/helpers/esm/getPrototypeOf")),s=c(require("./base/math-array")),h=require("../lib/common"),u=require("../lib/validators"),o=c(require("./quaternion"));function c(t){return t&&t.__esModule?t:{default:t}}function l(t){var e=f();return function(){var r,i=(0,a.default)(t);if(e){var s=(0,a.default)(this).constructor;r=Reflect.construct(i,arguments,s)}else r=i.apply(this,arguments);return(0,n.default)(this,r)}}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}var k="Unknown Euler angle order",v=.99999;function y(t){return t>=0&&t<6}function b(t){if(t<0&&t>=6)throw new Error(k);return t}var M=function(n){(0,i.default)(s,n);var a=l(s);function s(){var t,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:s.DefaultOrder;((0,e.default)(this,s),t=a.call(this,-0,-0,-0,-0),arguments.length>0&&Array.isArray(arguments[0]))?(r=t).fromVector3.apply(r,arguments):t.set(i,n,h,u);return t}return(0,r.default)(s,[{key:"ELEMENTS",get:function(){return 4}}],[{key:"rotationOrder",value:function(t){return s.RotationOrders[t]}},{key:"ZYX",get:function(){return 0}},{key:"YXZ",get:function(){return 1}},{key:"XZY",get:function(){return 2}},{key:"ZXY",get:function(){return 3}},{key:"YZX",get:function(){return 4}},{key:"XYZ",get:function(){return 5}},{key:"RollPitchYaw",get:function(){return 0}},{key:"DefaultOrder",get:function(){return s.ZYX}},{key:"RotationOrders",get:function(){return["ZYX","YXZ","XZY","ZXY","YZX","XYZ"]}}]),(0,r.default)(s,[{key:"fromQuaternion",value:function(e){var r=(0,t.default)(e,4),i=r[0],n=r[1],a=r[2],h=r[3],u=n*n,o=-2*(u+a*a)+1,c=2*(i*n+h*a),l=-2*(i*a-h*n),f=2*(n*a+h*i),k=-2*(i*i+u)+1;return l=(l=l>1?1:l)<-1?-1:l,new s(Math.atan2(f,k),Math.asin(l),Math.atan2(c,o),s.RollPitchYaw)}},{key:"copy",value:function(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=Number.isFinite(t[3])||this.order,this.check()}},{key:"set",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0;return this[0]=t,this[1]=e,this[2]=r,this[3]=Number.isFinite(i)?i:this[3],this.check()}},{key:"validate",value:function(){return y(this[3])&&Number.isFinite(this[0])&&Number.isFinite(this[1])&&Number.isFinite(this[2])}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this[0],t[e+1]=this[1],t[e+2]=this[2],t}},{key:"toArray4",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this[0],t[e+1]=this[1],t[e+2]=this[2],t[e+3]=this[3],t}},{key:"toVector3",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0];return t[0]=this[0],t[1]=this[1],t[2]=this[2],t}},{key:"fromVector3",value:function(t,e){return this.set(t[0],t[1],t[2],Number.isFinite(e)?e:this[3])}},{key:"fromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this[0]=t[0+e],this[1]=t[1+e],this[2]=t[2+e],void 0!==t[3]&&(this[3]=t[3]),this.check()}},{key:"fromRollPitchYaw",value:function(t,e,r){return this.set(t,e,r,s.ZYX)}},{key:"fromRotationMatrix",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.DefaultOrder;return this._fromRotationMatrix(t,e),this.check()}},{key:"getRotationMatrix",value:function(t){return this._getRotationMatrix(t)}},{key:"getQuaternion",value:function(){var t=new o.default;switch(this[4]){case s.XYZ:return t.rotateX(this[0]).rotateY(this[1]).rotateZ(this[2]);case s.YXZ:return t.rotateY(this[0]).rotateX(this[1]).rotateZ(this[2]);case s.ZXY:return t.rotateZ(this[0]).rotateX(this[1]).rotateY(this[2]);case s.ZYX:return t.rotateZ(this[0]).rotateY(this[1]).rotateX(this[2]);case s.YZX:return t.rotateY(this[0]).rotateZ(this[1]).rotateX(this[2]);case s.XZY:return t.rotateX(this[0]).rotateZ(this[1]).rotateY(this[2]);default:throw new Error(k)}}},{key:"_fromRotationMatrix",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.DefaultOrder,r=t.elements,i=r[0],n=r[4],a=r[8],u=r[1],o=r[5],c=r[9],l=r[2],f=r[6],y=r[10];switch(e=e||this[3]){case s.XYZ:this[1]=Math.asin((0,h.clamp)(a,-1,1)),Math.abs(a)<v?(this[0]=Math.atan2(-c,y),this[2]=Math.atan2(-n,i)):(this[0]=Math.atan2(f,o),this[2]=0);break;case s.YXZ:this[0]=Math.asin(-(0,h.clamp)(c,-1,1)),Math.abs(c)<v?(this[1]=Math.atan2(a,y),this[2]=Math.atan2(u,o)):(this[1]=Math.atan2(-l,i),this[2]=0);break;case s.ZXY:this[0]=Math.asin((0,h.clamp)(f,-1,1)),Math.abs(f)<v?(this[1]=Math.atan2(-l,y),this[2]=Math.atan2(-n,o)):(this[1]=0,this[2]=Math.atan2(u,i));break;case s.ZYX:this[1]=Math.asin(-(0,h.clamp)(l,-1,1)),Math.abs(l)<v?(this[0]=Math.atan2(f,y),this[2]=Math.atan2(u,i)):(this[0]=0,this[2]=Math.atan2(-n,o));break;case s.YZX:this[2]=Math.asin((0,h.clamp)(u,-1,1)),Math.abs(u)<v?(this[0]=Math.atan2(-c,o),this[1]=Math.atan2(-l,i)):(this[0]=0,this[1]=Math.atan2(a,y));break;case s.XZY:this[2]=Math.asin(-(0,h.clamp)(n,-1,1)),Math.abs(n)<v?(this[0]=Math.atan2(f,o),this[1]=Math.atan2(a,i)):(this[0]=Math.atan2(-c,y),this[1]=0);break;default:throw new Error(k)}return this[3]=e,this}},{key:"_getRotationMatrix",value:function(t){var e=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],r=this.x,i=this.y,n=this.z,a=Math.cos(r),h=Math.cos(i),u=Math.cos(n),o=Math.sin(r),c=Math.sin(i),l=Math.sin(n);switch(this[3]){case s.XYZ:var f=a*u,v=a*l,y=o*u,b=o*l;e[0]=h*u,e[4]=-h*l,e[8]=c,e[1]=v+y*c,e[5]=f-b*c,e[9]=-o*h,e[2]=b-f*c,e[6]=y+v*c,e[10]=a*h;break;case s.YXZ:var M=h*u,d=h*l,m=c*u,g=c*l;e[0]=M+g*o,e[4]=m*o-d,e[8]=a*c,e[1]=a*l,e[5]=a*u,e[9]=-o,e[2]=d*o-m,e[6]=g+M*o,e[10]=a*h;break;case s.ZXY:var Y=h*u,X=h*l,Z=c*u,p=c*l;e[0]=Y-p*o,e[4]=-a*l,e[8]=Z+X*o,e[1]=X+Z*o,e[5]=a*u,e[9]=p-Y*o,e[2]=-a*c,e[6]=o,e[10]=a*h;break;case s.ZYX:var w=a*u,N=a*l,R=o*u,x=o*l;e[0]=h*u,e[4]=R*c-N,e[8]=w*c+x,e[1]=h*l,e[5]=x*c+w,e[9]=N*c-R,e[2]=-c,e[6]=o*h,e[10]=a*h;break;case s.YZX:var q=a*h,O=a*c,E=o*h,_=o*c;e[0]=h*u,e[4]=_-q*l,e[8]=E*l+O,e[1]=l,e[5]=a*u,e[9]=-o*u,e[2]=-c*u,e[6]=O*l+E,e[10]=q-_*l;break;case s.XZY:var A=a*h,D=a*c,F=o*h,P=o*c;e[0]=h*u,e[4]=-l,e[8]=c*u,e[1]=A*l+P,e[5]=a*u,e[9]=D*l-F,e[2]=F*l-D,e[6]=o*u,e[10]=P*l+A;break;default:throw new Error(k)}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{key:"toQuaternion",value:function(){var t=Math.cos(.5*this.yaw),e=Math.sin(.5*this.yaw),r=Math.cos(.5*this.roll),i=Math.sin(.5*this.roll),n=Math.cos(.5*this.pitch),a=Math.sin(.5*this.pitch),s=t*r*n+e*i*a,h=t*i*n-e*r*a,u=t*r*a+e*i*n,c=e*r*n-t*i*a;return new o.default(h,u,c,s)}},{key:"x",get:function(){return this[0]},set:function(t){this[0]=(0,u.checkNumber)(t)}},{key:"y",get:function(){return this[1]},set:function(t){this[1]=(0,u.checkNumber)(t)}},{key:"z",get:function(){return this[2]},set:function(t){this[2]=(0,u.checkNumber)(t)}},{key:"alpha",get:function(){return this[0]},set:function(t){this[0]=(0,u.checkNumber)(t)}},{key:"beta",get:function(){return this[1]},set:function(t){this[1]=(0,u.checkNumber)(t)}},{key:"gamma",get:function(){return this[2]},set:function(t){this[2]=(0,u.checkNumber)(t)}},{key:"phi",get:function(){return this[0]},set:function(t){this[0]=(0,u.checkNumber)(t)}},{key:"theta",get:function(){return this[1]},set:function(t){this[1]=(0,u.checkNumber)(t)}},{key:"psi",get:function(){return this[2]},set:function(t){this[2]=(0,u.checkNumber)(t)}},{key:"roll",get:function(){return this[0]},set:function(t){this[0]=(0,u.checkNumber)(t)}},{key:"pitch",get:function(){return this[1]},set:function(t){this[1]=(0,u.checkNumber)(t)}},{key:"yaw",get:function(){return this[2]},set:function(t){this[2]=(0,u.checkNumber)(t)}},{key:"order",get:function(){return this[3]},set:function(t){this[3]=b(t)}}]),s}(s.default);exports.default=M;
},{"@babel/runtime/helpers/esm/slicedToArray":"TBeo","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","./base/math-array":"cPa0","../lib/common":"wKVf","../lib/validators":"imS9","./quaternion":"T1TH"}],"m8sA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("@babel/runtime/helpers/esm/classCallCheck")),i=r(require("@babel/runtime/helpers/esm/createClass")),e=r(require("./matrix4")),n=r(require("./vector3")),o=r(require("./euler"));function r(t){return t&&t.__esModule?t:{default:t}}var a=function(){function r(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=i.x,a=void 0===e?0:e,s=i.y,u=void 0===s?0:s,l=i.z,h=void 0===l?0:l,f=i.roll,c=void 0===f?0:f,y=i.pitch,p=void 0===y?0:y,d=i.yaw,v=void 0===d?0:d,g=i.position,x=void 0===g?void 0:g,m=i.orientation,M=void 0===m?void 0:m;(0,t.default)(this,r),Array.isArray(x)&&3===x.length?this.position=new n.default(x):this.position=new n.default(a,u,h),Array.isArray(M)&&4===M.length?this.orientation=new o.default(M,M[3]):this.orientation=new o.default(c,p,v,o.default.RollPitchYaw)}return(0,i.default)(r,[{key:"getPosition",value:function(){return this.position}},{key:"getOrientation",value:function(){return this.orientation}},{key:"equals",value:function(t){return!!t&&(this.position.equals(t.position)&&this.orientation.equals(t.orientation))}},{key:"exactEquals",value:function(t){return!!t&&(this.position.exactEquals(t.position)&&this.orientation.exactEquals(t.orientation))}},{key:"getTransformationMatrix",value:function(){var t=Math.sin(this.roll),i=Math.sin(this.pitch),n=Math.sin(this.yaw),o=Math.cos(this.roll),r=Math.cos(this.pitch),a=Math.cos(this.yaw);return(new e.default).setRowMajor(a*r,-n*o+a*i*t,n*t+a*i*o,this.x,n*r,a*o+n*i*t,-a*t+n*i*o,this.y,-i,r*t,r*o,this.z,0,0,0,1)}},{key:"getTransformationMatrixFromPose",value:function(t){return(new e.default).multiplyRight(this.getTransformationMatrix()).multiplyRight(t.getTransformationMatrix().invert())}},{key:"getTransformationMatrixToPose",value:function(t){return(new e.default).multiplyRight(t.getTransformationMatrix()).multiplyRight(this.getTransformationMatrix().invert())}},{key:"x",get:function(){return this.position.x},set:function(t){this.position.x=t}},{key:"y",get:function(){return this.position.y},set:function(t){this.position.y=t}},{key:"z",get:function(){return this.position.z},set:function(t){this.position.z=t}},{key:"roll",get:function(){return this.orientation.roll},set:function(t){this.orientation.roll=t}},{key:"pitch",get:function(){return this.orientation.pitch},set:function(t){this.orientation.pitch=t}},{key:"yaw",get:function(){return this.orientation.yaw},set:function(t){this.orientation.yaw=t}}]),r}();exports.default=a;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","./matrix4":"of13","./vector3":"WGSx","./euler":"t6Su"}],"dwLx":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"config",{enumerable:!0,get:function(){return r.config}}),Object.defineProperty(exports,"configure",{enumerable:!0,get:function(){return r.configure}}),Object.defineProperty(exports,"formatValue",{enumerable:!0,get:function(){return r.formatValue}}),Object.defineProperty(exports,"isArray",{enumerable:!0,get:function(){return r.isArray}}),Object.defineProperty(exports,"clone",{enumerable:!0,get:function(){return r.clone}}),Object.defineProperty(exports,"equals",{enumerable:!0,get:function(){return r.equals}}),Object.defineProperty(exports,"exactEquals",{enumerable:!0,get:function(){return r.exactEquals}}),Object.defineProperty(exports,"toRadians",{enumerable:!0,get:function(){return r.toRadians}}),Object.defineProperty(exports,"toDegrees",{enumerable:!0,get:function(){return r.toDegrees}}),Object.defineProperty(exports,"radians",{enumerable:!0,get:function(){return r.radians}}),Object.defineProperty(exports,"degrees",{enumerable:!0,get:function(){return r.degrees}}),Object.defineProperty(exports,"sin",{enumerable:!0,get:function(){return r.sin}}),Object.defineProperty(exports,"cos",{enumerable:!0,get:function(){return r.cos}}),Object.defineProperty(exports,"tan",{enumerable:!0,get:function(){return r.tan}}),Object.defineProperty(exports,"asin",{enumerable:!0,get:function(){return r.asin}}),Object.defineProperty(exports,"acos",{enumerable:!0,get:function(){return r.acos}}),Object.defineProperty(exports,"atan",{enumerable:!0,get:function(){return r.atan}}),Object.defineProperty(exports,"clamp",{enumerable:!0,get:function(){return r.clamp}}),Object.defineProperty(exports,"lerp",{enumerable:!0,get:function(){return r.lerp}}),Object.defineProperty(exports,"withEpsilon",{enumerable:!0,get:function(){return r.withEpsilon}}),Object.defineProperty(exports,"Vector2",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"Vector3",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"Vector4",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"Matrix3",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"Matrix4",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"Quaternion",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"checkNumber",{enumerable:!0,get:function(){return c.checkNumber}}),Object.defineProperty(exports,"_MathUtils",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(exports,"_SphericalCoordinates",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"_Pose",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"_Euler",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(exports,"assert",{enumerable:!0,get:function(){return b.default}});var r=require("./lib/common"),t=d(require("./classes/vector2")),n=d(require("./classes/vector3")),o=d(require("./classes/vector4")),u=d(require("./classes/matrix3")),i=d(require("./classes/matrix4")),a=d(require("./classes/quaternion")),c=require("./lib/validators"),s=d(require("./lib/math-utils")),f=d(require("./classes/spherical-coordinates")),l=d(require("./classes/pose")),p=d(require("./classes/euler")),b=d(require("./lib/assert"));function d(e){return e&&e.__esModule?e:{default:e}}var g={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==e&&e},m=g.global||g.self||g.window;m.mathgl={config:r.config};
},{"./lib/common":"wKVf","./classes/vector2":"JnVj","./classes/vector3":"WGSx","./classes/vector4":"T9bv","./classes/matrix3":"YefV","./classes/matrix4":"of13","./classes/quaternion":"T1TH","./lib/validators":"imS9","./lib/math-utils":"XSGy","./classes/spherical-coordinates":"xqJO","./classes/pose":"m8sA","./classes/euler":"t6Su","./lib/assert":"YXhZ"}],"xAaq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@math.gl/core");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&(r in exports&&exports[r]===e[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}}))});
},{"@math.gl/core":"dwLx"}],"zjhX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var o=require("math.gl"),i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],n={modelMatrix:i,viewMatrix:i,projectionMatrix:i,cameraPositionWorld:[0,0,0]};function r(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,r=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],{});return void 0!==i.modelMatrix&&(r.modelMatrix=i.modelMatrix),void 0!==i.viewMatrix&&(r.viewMatrix=i.viewMatrix),void 0!==i.projectionMatrix&&(r.projectionMatrix=i.projectionMatrix),void 0!==i.cameraPositionWorld&&(r.cameraPositionWorld=i.cameraPositionWorld),void 0===i.projectionMatrix&&void 0===i.viewMatrix||(r.viewProjectionMatrix=new o.Matrix4(i.projectionMatrix).multiplyRight(i.viewMatrix)),r}var t="varying vec4 project_vPositionWorld;\nvarying vec3 project_vNormalWorld;\n\nvec4 project_getPosition_World() {\n  return project_vPositionWorld;\n}\n\nvec3 project_getNormal_World() {\n  return project_vNormalWorld;\n}\n",e="".concat(t,"\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewProjectionMatrix;\nuniform vec3 cameraPositionWorld;\n\nstruct World {\n  vec3 position;\n  vec3 normal;\n};\n\nWorld world;\n\nvoid project_setPosition(vec4 position) {\n  project_vPositionWorld = position;\n}\n\nvoid project_setNormal(vec3 normal) {\n  project_vNormalWorld = normal;\n}\n\nvoid project_setPositionAndNormal_World(vec3 position, vec3 normal) {\n  world.position = position;\n  world.normal = normal;\n}\n\nvoid project_setPositionAndNormal_Model(vec3 position, vec3 normal) {\n  world.position = (modelMatrix * vec4(position, 1.)).xyz;\n  world.normal = mat3(modelMatrix) * normal;\n}\n\nvec4 project_model_to_clipspace(vec4 position) {\n  return viewProjectionMatrix * modelMatrix * position;\n}\n\nvec4 project_model_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * modelMatrix * vec4(position, 1.);\n}\n\nvec4 project_world_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * vec4(position, 1.);\n}\n\nvec4 project_view_to_clipspace(vec3 position) {\n  return projectionMatrix * vec4(position, 1.);\n}\n\nvec4 project_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * vec4(position, 1.);\n}\n"),c="\n".concat(t),a={name:"project",getUniforms:r,vs:e,fs:c};exports.default=a;
},{"math.gl":"xAaq"}],"HCaU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\n\nstruct AmbientLight {\n vec3 color;\n};\n\nstruct PointLight {\n vec3 color;\n vec3 position;\n vec3 attenuation;\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\n\nuniform bool lighting_uEnabled;\n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n#endif\n";exports.default=n;
},{}],"ob8R":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("./lights.glsl"));function i(t){return t&&t.__esModule?t:{default:t}}var n={name:"lights",vs:t.default,fs:t.default,getUniforms:g,defines:{MAX_LIGHTS:3}};exports.default=n;var e={};function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.color,n=void 0===i?[0,0,0]:i,e=t.intensity,o=void 0===e?1:e;return n.map(function(t){return t*o/255})}function r(t){var i=t.ambientLight,n=t.pointLights,e=void 0===n?[]:n,r=t.directionalLights,g=void 0===r?[]:r,a={};return a["lighting_uAmbientLight.color"]=i?o(i):[0,0,0],e.forEach(function(t,i){a["lighting_uPointLight[".concat(i,"].color")]=o(t),a["lighting_uPointLight[".concat(i,"].position")]=t.position,a["lighting_uPointLight[".concat(i,"].attenuation")]=t.attenuation||[1,0,0]}),a.lighting_uPointLightCount=e.length,g.forEach(function(t,i){a["lighting_uDirectionalLight[".concat(i,"].color")]=o(t),a["lighting_uDirectionalLight[".concat(i,"].direction")]=t.direction}),a.lighting_uDirectionalLightCount=g.length,a}function g(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e;if("lightSources"in t){var i=t.lightSources||{},n=i.ambientLight,o=i.pointLights,a=i.directionalLights;return n||o&&o.length>0||a&&a.length>0?Object.assign({},r({ambientLight:n,pointLights:o,directionalLights:a}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in t){var l={pointLights:[],directionalLights:[]},h=!0,u=!1,c=void 0;try{for(var s,d=(t.lights||[])[Symbol.iterator]();!(h=(s=d.next()).done);h=!0){var f=s.value;switch(f.type){case"ambient":l.ambientLight=f;break;case"directional":l.directionalLights.push(f);break;case"point":l.pointLights.push(f)}}}catch(L){u=!0,c=L}finally{try{h||null==d.return||d.return()}finally{if(u)throw c}}return g({lightSources:l})}return{}}
},{"./lights.glsl":"HCaU"}],"VcTg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("../project/project"));function r(e){return e&&e.__esModule?e:{default:e}}var t=new Float32Array([1,1,2]),i={lightDirection:t};function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,r={};return e.lightDirection&&(r.dirlight_uLightDirection=e.lightDirection),r}var n=null,l="uniform vec3 dirlight_uLightDirection;\nvec4 dirlight_filterColor(vec4 color) {\n  vec3 normal = project_getNormal_World();\n  float d = abs(dot(normalize(normal), normalize(dirlight_uLightDirection)));\n  return vec4(color.rgb * d, color.a);\n}\n",c={name:"dirlight",vs:n,fs:l,getUniforms:o,dependencies:[e.default]};exports.default=c;
},{"../project/project":"zjhX"}],"flfn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var i=new Uint8Array([0,255,255,255]),n={pickingSelectedColor:null,pickingHighlightColor:i,pickingActive:!1,pickingAttribute:!1};function o(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,o={};if(void 0!==i.pickingSelectedColor)if(i.pickingSelectedColor){var e=i.pickingSelectedColor.slice(0,3);o.picking_uSelectedColorValid=1,o.picking_uSelectedColor=e}else o.picking_uSelectedColorValid=0;if(i.pickingHighlightColor){var l=Array.from(i.pickingHighlightColor,function(i){return i/255});Number.isFinite(l[3])||(l[3]=1),o.picking_uHighlightColor=l}return void 0!==i.pickingActive&&(o.picking_uActive=Boolean(i.pickingActive),o.picking_uAttribute=Boolean(i.pickingAttribute)),o}var e="uniform bool picking_uActive;\nuniform bool picking_uAttribute;\nuniform vec3 picking_uSelectedColor;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Avalid;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool picking_isColorValid(vec3 color) {\n  return dot(color, vec3(1.0)) > 0.001;\n}\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  if (picking_uActive) {\n    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\n\n    if (!picking_uAttribute) {\n      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;\n    }\n  } else {\n    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));\n  }\n}\n\nvoid picking_setPickingAttribute(float value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.r = value;\n  }\n}\nvoid picking_setPickingAttribute(vec2 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rg = value;\n  }\n}\nvoid picking_setPickingAttribute(vec3 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rgb = value;\n  }\n}\n",l="uniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Avalid;\nvec4 picking_filterHighlightColor(vec4 color) {\n  if (picking_uActive) {\n    return color;\n  }\n  bool selected = bool(picking_vRGBcolor_Avalid.a);\n\n  if (selected) {\n    float highLightAlpha = picking_uHighlightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  if (picking_uActive) {\n    if (picking_vRGBcolor_Avalid.a == 0.0) {\n      discard;\n    }\n    return picking_vRGBcolor_Avalid;\n  }\n  return color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n",c={name:"picking",vs:e,fs:l,getUniforms:o};exports.default=c;
},{}],"bRsz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var i="\nuniform float lighting_uAmbient;\nuniform float lighting_uDiffuse;\nuniform float lighting_uShininess;\nuniform vec3  lighting_uSpecularColor;\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\n    vec3 halfway_direction = normalize(light_direction + view_direction);\n    float lambertian = dot(light_direction, normal_worldspace);\n    float specular = 0.0;\n    if (lambertian > 0.0) {\n      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\n      specular = pow(specular_angle, lighting_uShininess);\n    }\n    lambertian = max(lambertian, 0.0);\n    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;\n}\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = surfaceColor;\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n\nvec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = vec3(0, 0, 0);\n  vec3 surfaceColor = vec3(0, 0, 0);\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n";exports.default=i;
},{}],"VXHj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.phongLighting=exports.gouraudLighting=void 0;var i=n(require("../lights/lights")),e=n(require("./phong-lighting.glsl"));function n(i){return i&&i.__esModule?i:{default:i}}var t={name:"gouraud-lighting",dependencies:[i.default],vs:e.default,defines:{LIGHTING_VERTEX:1},getUniforms:o};exports.gouraudLighting=t;var r={name:"phong-lighting",dependencies:[i.default],fs:e.default,defines:{LIGHTING_FRAGMENT:1},getUniforms:o};exports.phongLighting=r;var g={};function u(i){var e=i.ambient,n=void 0===e?.35:e,t=i.diffuse,r=void 0===t?.6:t,g=i.shininess,u=void 0===g?32:g,o=i.specularColor;return{lighting_uAmbient:n,lighting_uDiffuse:r,lighting_uShininess:u,lighting_uSpecularColor:(void 0===o?[30,30,30]:o).map(function(i){return i/255})}}function o(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g;if(!("material"in i))return{};var e=i.material;return e?u(e):{lighting_uEnabled:!1}}
},{"../lights/lights":"ob8R","./phong-lighting.glsl":"bRsz"}],"tuDT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="uniform mat4 u_MVPMatrix;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_NormalMatrix;\n\nvarying vec3 pbr_vPosition;\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n# ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n# else\nvarying vec3 pbr_vNormal;\n# endif\n#endif\n\nvoid pbr_setPositionNormalTangentUV(vec4 position, vec4 normal, vec4 tangent, vec2 uv)\n{\n  vec4 pos = u_ModelMatrix * position;\n  pbr_vPosition = vec3(pos.xyz) / pos.w;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\n  vec3 normalW = normalize(vec3(u_NormalMatrix * vec4(normal.xyz, 0.0)));\n  vec3 tangentW = normalize(vec3(u_ModelMatrix * vec4(tangent.xyz, 0.0)));\n  vec3 bitangentW = cross(normalW, tangentW) * tangent.w;\n  pbr_vTBN = mat3(tangentW, bitangentW, normalW);\n#else\n  pbr_vNormal = normalize(vec3(u_ModelMatrix * vec4(normal.xyz, 0.0)));\n#endif\n#endif\n\n#ifdef HAS_UV\n  pbr_vUV = uv;\n#else\n  pbr_vUV = vec2(0.,0.);\n#endif\n}\n";exports.default=n;
},{}],"VAQj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="#if (__VERSION__ < 300)\n#extension GL_EXT_shader_texture_lod: enable\n#extension GL_OES_standard_derivatives : enable\n#endif\n\n\n#if (__VERSION__ < 300)\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL1COND; INCR)\n#else\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL2COND; INCR)\n#endif\n\nprecision highp float;\n\nuniform bool pbr_uUnlit;\n\n#ifdef USE_IBL\nuniform samplerCube u_DiffuseEnvSampler;\nuniform samplerCube u_SpecularEnvSampler;\nuniform sampler2D u_brdfLUT;\nuniform vec2 u_ScaleIBLAmbient;\n#endif\n\n#ifdef HAS_BASECOLORMAP\nuniform sampler2D u_BaseColorSampler;\n#endif\n#ifdef HAS_NORMALMAP\nuniform sampler2D u_NormalSampler;\nuniform float u_NormalScale;\n#endif\n#ifdef HAS_EMISSIVEMAP\nuniform sampler2D u_EmissiveSampler;\nuniform vec3 u_EmissiveFactor;\n#endif\n#ifdef HAS_METALROUGHNESSMAP\nuniform sampler2D u_MetallicRoughnessSampler;\n#endif\n#ifdef HAS_OCCLUSIONMAP\nuniform sampler2D u_OcclusionSampler;\nuniform float u_OcclusionStrength;\n#endif\n\n#ifdef ALPHA_CUTOFF\nuniform float u_AlphaCutoff;\n#endif\n\nuniform vec2 u_MetallicRoughnessValues;\nuniform vec4 u_BaseColorFactor;\n\nuniform vec3 u_Camera;\n#ifdef PBR_DEBUG\nuniform vec4 u_ScaleDiffBaseMR;\nuniform vec4 u_ScaleFGDSpec;\n#endif\n\nvarying vec3 pbr_vPosition;\n\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n#else\nvarying vec3 pbr_vNormal;\n#endif\n#endif\n\n\nstruct PBRInfo\n{\n  float NdotL;\n  float NdotV;\n  float NdotH;\n  float LdotH;\n  float VdotH;\n  float perceptualRoughness;\n  float metalness;\n  vec3 reflectance0;\n  vec3 reflectance90;\n  float alphaRoughness;\n  vec3 diffuseColor;\n  vec3 specularColor;\n  vec3 n;\n  vec3 v;\n};\n\nconst float M_PI = 3.141592653589793;\nconst float c_MinRoughness = 0.04;\n\nvec4 SRGBtoLINEAR(vec4 srgbIn)\n{\n#ifdef MANUAL_SRGB\n#ifdef SRGB_FAST_APPROXIMATION\n  vec3 linOut = pow(srgbIn.xyz,vec3(2.2));\n#else\n  vec3 bLess = step(vec3(0.04045),srgbIn.xyz);\n  vec3 linOut = mix( srgbIn.xyz/vec3(12.92), pow((srgbIn.xyz+vec3(0.055))/vec3(1.055),vec3(2.4)), bLess );\n#endif\n  return vec4(linOut,srgbIn.w);;\n#else\n  return srgbIn;\n#endif\n}\n\nvec3 getNormal()\n{\n#ifndef HAS_TANGENTS\n  vec3 pos_dx = dFdx(pbr_vPosition);\n  vec3 pos_dy = dFdy(pbr_vPosition);\n  vec3 tex_dx = dFdx(vec3(pbr_vUV, 0.0));\n  vec3 tex_dy = dFdy(vec3(pbr_vUV, 0.0));\n  vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);\n\n#ifdef HAS_NORMALS\n  vec3 ng = normalize(pbr_vNormal);\n#else\n  vec3 ng = cross(pos_dx, pos_dy);\n#endif\n\n  t = normalize(t - ng * dot(ng, t));\n  vec3 b = normalize(cross(ng, t));\n  mat3 tbn = mat3(t, b, ng);\n#else\n  mat3 tbn = pbr_vTBN;\n#endif\n\n#ifdef HAS_NORMALMAP\n  vec3 n = texture2D(u_NormalSampler, pbr_vUV).rgb;\n  n = normalize(tbn * ((2.0 * n - 1.0) * vec3(u_NormalScale, u_NormalScale, 1.0)));\n#else\n  vec3 n = normalize(tbn[2].xyz);\n#endif\n\n  return n;\n}\n\n\n#ifdef USE_IBL\nvec3 getIBLContribution(PBRInfo pbrInputs, vec3 n, vec3 reflection)\n{\n  float mipCount = 9.0;\n  float lod = (pbrInputs.perceptualRoughness * mipCount);\n  vec3 brdf = SRGBtoLINEAR(texture2D(u_brdfLUT,\n    vec2(pbrInputs.NdotV, 1.0 - pbrInputs.perceptualRoughness))).rgb;\n  vec3 diffuseLight = SRGBtoLINEAR(textureCube(u_DiffuseEnvSampler, n)).rgb;\n\n#ifdef USE_TEX_LOD\n  vec3 specularLight = SRGBtoLINEAR(textureCubeLodEXT(u_SpecularEnvSampler, reflection, lod)).rgb;\n#else\n  vec3 specularLight = SRGBtoLINEAR(textureCube(u_SpecularEnvSampler, reflection)).rgb;\n#endif\n\n  vec3 diffuse = diffuseLight * pbrInputs.diffuseColor;\n  vec3 specular = specularLight * (pbrInputs.specularColor * brdf.x + brdf.y);\n  diffuse *= u_ScaleIBLAmbient.x;\n  specular *= u_ScaleIBLAmbient.y;\n\n  return diffuse + specular;\n}\n#endif\n\n\nvec3 diffuse(PBRInfo pbrInputs)\n{\n  return pbrInputs.diffuseColor / M_PI;\n}\n\nvec3 specularReflection(PBRInfo pbrInputs)\n{\n  return pbrInputs.reflectance0 +\n    (pbrInputs.reflectance90 - pbrInputs.reflectance0) *\n    pow(clamp(1.0 - pbrInputs.VdotH, 0.0, 1.0), 5.0);\n}\n\n\n\nfloat geometricOcclusion(PBRInfo pbrInputs)\n{\n  float NdotL = pbrInputs.NdotL;\n  float NdotV = pbrInputs.NdotV;\n  float r = pbrInputs.alphaRoughness;\n\n  float attenuationL = 2.0 * NdotL / (NdotL + sqrt(r * r + (1.0 - r * r) * (NdotL * NdotL)));\n  float attenuationV = 2.0 * NdotV / (NdotV + sqrt(r * r + (1.0 - r * r) * (NdotV * NdotV)));\n  return attenuationL * attenuationV;\n}\n\n\n\n\n\nfloat microfacetDistribution(PBRInfo pbrInputs)\n{\n  float roughnessSq = pbrInputs.alphaRoughness * pbrInputs.alphaRoughness;\n  float f = (pbrInputs.NdotH * roughnessSq - pbrInputs.NdotH) * pbrInputs.NdotH + 1.0;\n  return roughnessSq / (M_PI * f * f);\n}\n\nvoid PBRInfo_setAmbientLight(inout PBRInfo pbrInputs) {\n  pbrInputs.NdotL = 1.0;\n  pbrInputs.NdotH = 0.0;\n  pbrInputs.LdotH = 0.0;\n  pbrInputs.VdotH = 1.0;\n}\n\nvoid PBRInfo_setDirectionalLight(inout PBRInfo pbrInputs, vec3 lightDirection) {\n  vec3 n = pbrInputs.n;\n  vec3 v = pbrInputs.v;\n  vec3 l = normalize(lightDirection);\n  vec3 h = normalize(l+v);\n\n  pbrInputs.NdotL = clamp(dot(n, l), 0.001, 1.0);\n  pbrInputs.NdotH = clamp(dot(n, h), 0.0, 1.0);\n  pbrInputs.LdotH = clamp(dot(l, h), 0.0, 1.0);\n  pbrInputs.VdotH = clamp(dot(v, h), 0.0, 1.0);\n}\n\nvoid PBRInfo_setPointLight(inout PBRInfo pbrInputs, PointLight pointLight) {\n  vec3 light_direction = normalize(pointLight.position - pbr_vPosition);\n  PBRInfo_setDirectionalLight(pbrInputs, light_direction);\n}\n\nvec3 calculateFinalColor(PBRInfo pbrInputs, vec3 lightColor) {\n  vec3 F = specularReflection(pbrInputs);\n  float G = geometricOcclusion(pbrInputs);\n  float D = microfacetDistribution(pbrInputs);\n  vec3 diffuseContrib = (1.0 - F) * diffuse(pbrInputs);\n  vec3 specContrib = F * G * D / (4.0 * pbrInputs.NdotL * pbrInputs.NdotV);\n  return pbrInputs.NdotL * lightColor * (diffuseContrib + specContrib);\n}\n\nvec4 pbr_filterColor(vec4 colorUnused)\n{\n#ifdef HAS_BASECOLORMAP\n  vec4 baseColor = SRGBtoLINEAR(texture2D(u_BaseColorSampler, pbr_vUV)) * u_BaseColorFactor;\n#else\n  vec4 baseColor = u_BaseColorFactor;\n#endif\n\n#ifdef ALPHA_CUTOFF\n  if (baseColor.a < u_AlphaCutoff) {\n    discard;\n  }\n#endif\n\n  vec3 color = vec3(0, 0, 0);\n\n  if(pbr_uUnlit){\n    color.rgb = baseColor.rgb;\n  }\n  else{\n\n\n    float perceptualRoughness = u_MetallicRoughnessValues.y;\n    float metallic = u_MetallicRoughnessValues.x;\n#ifdef HAS_METALROUGHNESSMAP\n\n    vec4 mrSample = texture2D(u_MetallicRoughnessSampler, pbr_vUV);\n    perceptualRoughness = mrSample.g * perceptualRoughness;\n    metallic = mrSample.b * metallic;\n#endif\n    perceptualRoughness = clamp(perceptualRoughness, c_MinRoughness, 1.0);\n    metallic = clamp(metallic, 0.0, 1.0);\n\n    float alphaRoughness = perceptualRoughness * perceptualRoughness;\n\n    vec3 f0 = vec3(0.04);\n    vec3 diffuseColor = baseColor.rgb * (vec3(1.0) - f0);\n    diffuseColor *= 1.0 - metallic;\n    vec3 specularColor = mix(f0, baseColor.rgb, metallic);\n    float reflectance = max(max(specularColor.r, specularColor.g), specularColor.b);\n\n\n\n    float reflectance90 = clamp(reflectance * 25.0, 0.0, 1.0);\n    vec3 specularEnvironmentR0 = specularColor.rgb;\n    vec3 specularEnvironmentR90 = vec3(1.0, 1.0, 1.0) * reflectance90;\n\n    vec3 n = getNormal();\n    vec3 v = normalize(u_Camera - pbr_vPosition);\n\n    float NdotV = clamp(abs(dot(n, v)), 0.001, 1.0);\n    vec3 reflection = -normalize(reflect(v, n));\n\n    PBRInfo pbrInputs = PBRInfo(\n      0.0,\n      NdotV,\n      0.0,\n      0.0,\n      0.0,\n      perceptualRoughness,\n      metallic,\n      specularEnvironmentR0,\n      specularEnvironmentR90,\n      alphaRoughness,\n      diffuseColor,\n      specularColor,\n      n,\n      v\n    );\n\n#ifdef USE_LIGHTS\n    PBRInfo_setAmbientLight(pbrInputs);\n    color += calculateFinalColor(pbrInputs, lighting_uAmbientLight.color);\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uDirectionalLightCount, i++) {\n      if (i < lighting_uDirectionalLightCount) {\n        PBRInfo_setDirectionalLight(pbrInputs, lighting_uDirectionalLight[i].direction);\n        color += calculateFinalColor(pbrInputs, lighting_uDirectionalLight[i].color);\n      }\n    }\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uPointLightCount, i++) {\n      if (i < lighting_uPointLightCount) {\n        PBRInfo_setPointLight(pbrInputs, lighting_uPointLight[i]);\n        float attenuation = getPointLightAttenuation(lighting_uPointLight[i], distance(lighting_uPointLight[i].position, pbr_vPosition));\n        color += calculateFinalColor(pbrInputs, lighting_uPointLight[i].color / attenuation);\n      }\n    }\n#endif\n#ifdef USE_IBL\n    color += getIBLContribution(pbrInputs, n, reflection);\n#endif\n#ifdef HAS_OCCLUSIONMAP\n    float ao = texture2D(u_OcclusionSampler, pbr_vUV).r;\n    color = mix(color, color * ao, u_OcclusionStrength);\n#endif\n\n#ifdef HAS_EMISSIVEMAP\n    vec3 emissive = SRGBtoLINEAR(texture2D(u_EmissiveSampler, pbr_vUV)).rgb * u_EmissiveFactor;\n    color += emissive;\n#endif\n\n#ifdef PBR_DEBUG\n\n\n\n\n\n    color = mix(color, baseColor.rgb, u_ScaleDiffBaseMR.y);\n    color = mix(color, vec3(metallic), u_ScaleDiffBaseMR.z);\n    color = mix(color, vec3(perceptualRoughness), u_ScaleDiffBaseMR.w);\n#endif\n\n  }\n\n  return vec4(pow(color,vec3(1.0/2.2)), baseColor.a);\n}\n";exports.default=n;
},{}],"rSII":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=l(require("../lights/lights")),r=l(require("./pbr-vertex.glsl")),t=l(require("./pbr-fragment.glsl"));function l(e){return e&&e.__esModule?e:{default:e}}var s={name:"pbr",vs:r.default,fs:t.default,defines:{LIGHTING_FRAGMENT:1},dependencies:[e.default]};exports.default=s;
},{"../lights/lights":"ob8R","./pbr-vertex.glsl":"tuDT","./pbr-fragment.glsl":"VAQj"}],"ovj4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r="uniform float brightness;\nuniform float contrast;\n\nvec4 brightnessContrast_filterColor(vec4 color) {\n  color.rgb += brightness;\n  if (contrast > 0.0) {\n    color.rgb = (color.rgb - 0.5) / (1.0 - contrast) + 0.5;\n  } else {\n    color.rgb = (color.rgb - 0.5) * (1.0 + contrast) + 0.5;\n  }\n  return color;\n}\n\nvec4 brightnessContrast_filterColor(vec4 color, vec2 texSize, vec2 texCoords) {\n  return brightnessContrast_filterColor(color);\n}\n",o={brightness:{value:0,min:-1,max:1},contrast:{value:0,min:-1,max:1}},t={name:"brightnessContrast",uniforms:o,fs:r,passes:[{filter:!0}]};exports.default=t;
},{}],"DeLB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="uniform float strength;\n\nvec4 denoise_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {\n  float adjustedExponent = 3. + 200. * pow(1. - strength, 4.);\n\n  vec4 center = texture2D(texture, texCoord);\n  vec4 color = vec4(0.0);\n  float total = 0.0;\n  for (float x = -4.0; x <= 4.0; x += 1.0) {\n    for (float y = -4.0; y <= 4.0; y += 1.0) {\n      vec4 sample = texture2D(texture, texCoord + vec2(x, y) / texSize);\n      float weight = 1.0 - abs(dot(sample.rgb - center.rgb, vec3(0.25)));\n      weight = pow(weight, adjustedExponent);\n      color += sample * weight;\n      total += weight;\n    }\n  }\n\n  return color / total;\n}\n",t={strength:{value:.5,min:0,max:.1,adjust:function(e){return.53+200*Math.pow(1-e,4)}}},o={name:"denoise",uniforms:t,fs:e,passes:[{sampler:!0},{sampler:!0}]};exports.default=o;
},{}],"mhBu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var o="uniform float hue;\nuniform float saturation;\n\nvec4 hueSaturation_filterColor(vec4 color) {\n  float angle = hue * 3.14159265;\n  float s = sin(angle), c = cos(angle);\n  vec3 weights = (vec3(2.0 * c, -sqrt(3.0) * s - c, sqrt(3.0) * s - c) + 1.0) / 3.0;\n  float len = length(color.rgb);\n  color.rgb = vec3(\n    dot(color.rgb, weights.xyz),\n    dot(color.rgb, weights.zxy),\n    dot(color.rgb, weights.yzx)\n  );\n  float average = (color.r + color.g + color.b) / 3.0;\n  if (saturation > 0.0) {\n    color.rgb += (average - color.rgb) * (1.0 - 1.0 / (1.001 - saturation));\n  } else {\n    color.rgb += (average - color.rgb) * (-saturation);\n  }\n\n  return color;\n}\n\nvec4 hueSaturation_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {\n  return hueSaturation_filterColor(color);\n}\n",r={hue:{value:0,min:-1,max:1},saturation:{value:0,min:-1,max:1}},e={name:"hueSaturation",uniforms:r,fs:o,passes:[{filter:!0}]};exports.default=e;
},{}],"KzQ2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var o="uniform float amount;\n\nfloat rand(vec2 co) {\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec4 noise_filterColor(vec4 color, vec2 texCoord) {\n  float diff = (rand(texCoord) - 0.5) * amount;\n  color.r += diff;\n  color.g += diff;\n  color.b += diff;\n  return color;\n}\n\nvec4 noise_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {\n  return noise_filterColor(color, texCoord);\n}\n",e={amount:{value:.5,min:0,max:1}},r={name:"noise",uniforms:e,fs:o,passes:[{filter:!0}]};exports.default=r;
},{}],"JxpC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var o="uniform float amount;\n\nvec4 sepia_filterColor(vec4 color) {\n  float r = color.r;\n  float g = color.g;\n  float b = color.b;\n\n  color.r =\n    min(1.0, (r * (1.0 - (0.607 * amount))) + (g * (0.769 * amount)) + (b * (0.189 * amount)));\n  color.g = min(1.0, (r * 0.349 * amount) + (g * (1.0 - (0.314 * amount))) + (b * 0.168 * amount));\n  color.b = min(1.0, (r * 0.272 * amount) + (g * 0.534 * amount) + (b * (1.0 - (0.869 * amount))));\n\n  return color;\n}\n\nvec4 sepia_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {\n  return sepia_filterColor(color);\n}\n",n={amount:{value:.5,min:0,max:1}},r={name:"sepia",uniforms:n,fs:o,passes:[{filter:!0}]};exports.default=r;
},{}],"btkn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var o="uniform float amount;\n\nvec4 vibrance_filterColor(vec4 color) {\n  float average = (color.r + color.g + color.b) / 3.0;\n  float mx = max(color.r, max(color.g, color.b));\n  float amt = (mx - average) * (-amount * 3.0);\n  color.rgb = mix(color.rgb, vec3(mx), amt);\n  return color;\n}\n\nvec4 vibrance_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {\n  return vibrance_filterColor(color);\n}\n",r={amount:{value:0,min:-1,max:1}},e={name:"vibrance",uniforms:r,fs:o,passes:[{filter:!0}]};exports.default=e;
},{}],"Sh3N":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="uniform float radius;\nuniform float amount;\n\nvec4 vignette_filterColor(vec4 color, vec2 texCoord) {\n  float dist = distance(texCoord, vec2(0.5, 0.5));\n  float ratio = smoothstep(0.8, radius * 0.799, dist * (amount + radius));\n  return color.rgba * ratio + (1.0 - ratio)*vec4(0.0, 0.0, 0.0, 1.0);\n}\n\nvec4 vignette_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {\n  return vignette_filterColor(color, texCoord);\n}\n",o={radius:{value:.5,min:0,max:1},amount:{value:.5,min:0,max:1}},t={name:"vignette",fs:e,uniforms:o,passes:[{filter:!0}]};exports.default=t;
},{}],"LZIL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="float random(vec3 scale, float seed) {\n  return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n",r={name:"random",fs:e};exports.default=r;
},{}],"wmQF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("../utils/random"));function t(e){return e&&e.__esModule?e:{default:e}}var r="uniform float blurRadius;\nuniform float gradientRadius;\nuniform vec2 start;\nuniform vec2 end;\nuniform bool invert;\n\nvec2 tiltShift_getDelta(vec2 texSize) {\n  vec2 vector = normalize((end - start) * texSize);\n  return invert ? vec2(-vector.y, vector.x) : vector;\n}\n\nvec4 tiltShift_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {\n  vec4 color = vec4(0.0);\n  float total = 0.0;\n  float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n\n  vec2 normal = normalize(vec2((start.y - end.y) * texSize.y, (end.x - start.x) * texSize.x));\n  float radius = smoothstep(0.0, 1.0,\n    abs(dot(texCoord * texSize - start * texSize, normal)) / gradientRadius) * blurRadius;\n\n  for (float t = -30.0; t <= 30.0; t++) {\n    float percent = (t + offset - 0.5) / 30.0;\n    float weight = 1.0 - abs(percent);\n    vec4 sample = texture2D(texture, texCoord + tiltShift_getDelta(texSize) / texSize * percent * radius);\n    sample.rgb *= sample.a;\n\n    color += sample * weight;\n    total += weight;\n  }\n\n  color = color / total;\n  color.rgb /= color.a + 0.00001;\n\n  return color;\n}\n",n={blurRadius:{value:15,min:0,max:50},gradientRadius:{value:200,min:0,max:400},start:[0,0],end:[1,1],invert:{value:!1,private:!0}},o={name:"tiltShift",uniforms:n,fs:r,dependencies:[e.default],passes:[{sampler:!0,uniforms:{invert:!1}},{sampler:!0,uniforms:{invert:!0}}]};exports.default=o;
},{"../utils/random":"LZIL"}],"EFsp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("../utils/random"));function t(e){return e&&e.__esModule?e:{default:e}}var r="uniform float radius;\nuniform vec2 delta;\n\nvec4 triangleBlur_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {\n  vec2 adjustedDelta = delta * radius / texSize;\n\n  vec4 color = vec4(0.0);\n  float total = 0.0;\n  float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n\n  for (float t = -30.0; t <= 30.0; t++) {\n    float percent = (t + offset - 0.5) / 30.0;\n    float weight = 1.0 - abs(percent);\n    vec4 sample = texture2D(texture, texCoord + adjustedDelta * percent);\n    sample.rgb *= sample.a;\n\n    color += sample * weight;\n    total += weight;\n  }\n\n  color = color / total;\n  color.rgb /= color.a + 0.00001;\n\n  return color;\n}\n",a={radius:{value:20,min:0,softMax:100},delta:{value:[1,0],private:!0}},o={name:"triangleBlur",uniforms:a,fs:r,dependencies:[e.default],passes:[{sampler:!0,uniforms:{delta:[1,0]}},{sampler:!0,uniforms:{delta:[0,1]}}]};exports.default=o;
},{"../utils/random":"LZIL"}],"rXar":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("../utils/random"));function t(e){return e&&e.__esModule?e:{default:e}}var o="\nuniform vec2 center;\nuniform float strength;\n\nvec4 zoomBlur_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {\n  vec4 color = vec4(0.0);\n  float total = 0.0;\n  vec2 toCenter = center * texSize - texCoord * texSize;\n  float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n\n  for (float t = 0.0; t <= 40.0; t++) {\n    float percent = (t + offset) / 40.0;\n    float weight = 4.0 * (percent - percent * percent);\n    vec4 sample = texture2D(texture, texCoord + toCenter * percent * strength / texSize);\n    sample.rgb *= sample.a;\n\n    color += sample * weight;\n    total += weight;\n  }\n\n  color = color / total;\n  color.rgb /= color.a + 0.00001;\n\n  return color;\n}\n",r={center:[.5,.5],strength:{value:.3,min:0,softMax:1}},n={name:"zoomBlur",uniforms:r,fs:o,dependencies:[e.default],passes:[{sampler:!0}]};exports.default=n;
},{"../utils/random":"LZIL"}],"F4id":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="uniform vec2 center;\nuniform float angle;\nuniform float size;\n\nfloat scale = 3.1514 / size;\n\nfloat pattern(float angle, vec2 texSize, vec2 texCoord) {\n  float s = sin(angle), c = cos(angle);\n  vec2 tex = texCoord * texSize - center * texSize;\n  vec2 point = vec2(\n\tc * tex.x - s * tex.y,\n\ts * tex.x + c * tex.y\n  ) * scale;\n  return (sin(point.x) * sin(point.y)) * 4.0;\n}\n\nvec4 colorHalftone_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {\n  vec3 cmy = 1.0 - color.rgb;\n  float k = min(cmy.x, min(cmy.y, cmy.z));\n  cmy = (cmy - k) / (1.0 - k);\n  cmy = clamp(\n\tcmy * 10.0 - 3.0 + vec3(\n    pattern(angle + 0.26179, texSize, texCoord),\n\t  pattern(angle + 1.30899, texSize, texCoord),\n    pattern(angle, texSize, texCoord)\n  ),\n\t0.0,\n\t1.0\n  );\n  k = clamp(k * 10.0 - 5.0 + pattern(angle + 0.78539, texSize, texCoord), 0.0, 1.0);\n  return vec4(1.0 - cmy - k, color.a);\n}\n",n={center:[.5,.5],angle:{value:1.1,softMin:0,softMax:Math.PI/2},size:{value:4,min:1,softMin:3,softMax:20}},t={name:"colorHalftone",uniforms:n,fs:e,passes:[{filter:!0}]};exports.default=t;
},{}],"YSaf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="uniform vec2 center;\nuniform float angle;\nuniform float size;\n\nfloat pattern(vec2 texSize, vec2 texCoord) {\n  float scale = 3.1415 / size;\n\n  float s = sin(angle), c = cos(angle);\n  vec2 tex = texCoord * texSize - center * texSize;\n  vec2 point = vec2(\n    c * tex.x - s * tex.y,\n    s * tex.x + c * tex.y\n  ) * scale;\n  return (sin(point.x) * sin(point.y)) * 4.0;\n}\n\nvec4 dotScreen_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {\n  float average = (color.r + color.g + color.b) / 3.0;\n  return vec4(vec3(average * 10.0 - 5.0 + pattern(texSize, texCoord)), color.a);\n}\n",t={center:[.5,.5],angle:{value:1.1,softMin:0,softMax:Math.PI/2},size:{value:3,min:1,softMin:3,softMax:20}},n={name:"dotScreen",uniforms:t,fs:e,passes:[{filter:!0}]};exports.default=n;
},{}],"fiRy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("../utils/random"));function t(e){return e&&e.__esModule?e:{default:e}}var o="uniform float radius;\nuniform vec2 delta;\n\nvec4 edgeWork_sampleColor1(sampler2D source, vec2 texSize, vec2 texCoord) {\n  vec2 relativeDelta = radius * delta / texSize;\n\n  vec2 color = vec2(0.0);\n  vec2 total = vec2(0.0);\n  float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n\n  for (float t = -30.0; t <= 30.0; t++) {\n    float percent = (t + offset - 0.5) / 30.0;\n    float weight = 1.0 - abs(percent);\n    vec3 sampleColor = texture2D(source, texCoord + relativeDelta * percent).rgb;\n    float average = (sampleColor.r + sampleColor.g + sampleColor.b) / 3.0;\n    color.x += average * weight;\n    total.x += weight;\n    if (abs(t) < 15.0) {\n      weight = weight * 2.0 - 1.0;\n      color.y += average * weight;\n      total.y += weight;\n    }\n  }\n  return vec4(color / total, 0.0, 1.0);\n}\n\nvec4 edgeWork_sampleColor2(sampler2D source, vec2 texSize, vec2 texCoord) {\n  vec2 relativeDelta = radius * delta / texSize;\n\n  vec2 color = vec2(0.0);\n  vec2 total = vec2(0.0);\n  float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n\n  for (float t = -30.0; t <= 30.0; t++) {\n    float percent = (t + offset - 0.5) / 30.0;\n    float weight = 1.0 - abs(percent);\n    vec2 sampleColor = texture2D(source, texCoord + relativeDelta * percent).xy;\n    color.x += sampleColor.x * weight;\n    total.x += weight;\n    if (abs(t) < 15.0) {\n      weight = weight * 2.0 - 1.0;\n      color.y += sampleColor.y * weight;\n      total.y += weight;\n    }\n  }\n  float c = clamp(10000.0 * (color.y / total.y - color.x / total.x) + 0.5, 0.0, 1.0);\n  return vec4(c, c, c, 1.0);\n}\n",r={radius:{value:2,min:1,softMax:50},delta:{value:[1,0],private:!0}},a={name:"edgeWork",uniforms:r,fs:o,dependencies:[e.default],passes:[{sampler:"edgeWork_sampleColor1",uniforms:{delta:[1,0]}},{sampler:"edgeWork_sampleColor2",uniforms:{delta:[0,1]}}]};exports.default=a;
},{"../utils/random":"LZIL"}],"BYth":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="uniform vec2 center;\nuniform float scale;\n\nvec4 hexagonalPixelate_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {\n  vec2 tex = (texCoord * texSize - center * texSize) / scale;\n  tex.y /= 0.866025404;\n  tex.x -= tex.y * 0.5;\n\n  vec2 a;\n  if (tex.x + tex.y - floor(tex.x) - floor(tex.y) < 1.0) {\n    a = vec2(floor(tex.x), floor(tex.y));\n  }\n  else a = vec2(ceil(tex.x), ceil(tex.y));\n  vec2 b = vec2(ceil(tex.x), floor(tex.y));\n  vec2 c = vec2(floor(tex.x), ceil(tex.y));\n\n  vec3 TEX = vec3(tex.x, tex.y, 1.0 - tex.x - tex.y);\n  vec3 A = vec3(a.x, a.y, 1.0 - a.x - a.y);\n  vec3 B = vec3(b.x, b.y, 1.0 - b.x - b.y);\n  vec3 C = vec3(c.x, c.y, 1.0 - c.x - c.y);\n\n  float alen = length(TEX - A);\n  float blen = length(TEX - B);\n  float clen = length(TEX - C);\n\n  vec2 choice;\n  if (alen < blen) {\n    if (alen < clen) choice = a;\n    else choice = c;\n  } else {\n    if (blen < clen) choice = b;\n    else choice = c;\n  }\n\n  choice.x += choice.y * 0.5;\n  choice.y *= 0.866025404;\n  choice *= scale / texSize;\n\n  return texture2D(texture, choice + center);\n}\n",n={center:{value:[.5,.5],hint:"screenspace"},scale:{value:10,min:1,softMin:5,softMax:50}},c={name:"hexagonalPixelate",uniforms:n,fs:e,passes:[{sampler:!0}]};exports.default=c;
},{}],"RIi1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="uniform float strength;\n\nvec4 ink_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {\n  vec2 dx = vec2(1.0 / texSize.x, 0.0);\n  vec2 dy = vec2(0.0, 1.0 / texSize.y);\n  vec4 color = texture2D(texture, texCoord);\n  float bigTotal = 0.0;\n  float smallTotal = 0.0;\n  vec3 bigAverage = vec3(0.0);\n  vec3 smallAverage = vec3(0.0);\n  for (float x = -2.0; x <= 2.0; x += 1.0) {\n    for (float y = -2.0; y <= 2.0; y += 1.0) {\n      vec3 sample = texture2D(texture, texCoord + dx * x + dy * y).rgb;\n      bigAverage += sample;\n      bigTotal += 1.0;\n      if (abs(x) + abs(y) < 2.0) {\n        smallAverage += sample;\n        smallTotal += 1.0;\n      }\n    }\n  }\n  vec3 edge = max(vec3(0.0), bigAverage / bigTotal - smallAverage / smallTotal);\n  float power = strength * strength * strength * strength * strength;\n  return vec4(color.rgb - dot(edge, edge) * power * 100000.0, color.a);\n}\n",t={strength:{value:.25,min:0,softMax:1}},r={name:"ink",uniforms:t,fs:e,passes:[{sampler:!0}]};exports.default=r;
},{}],"EkJM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="vec4 warp_sampleColor(sampler2D texture, vec2 texSize, vec2 coord) {\n  vec4 color = texture2D(texture, coord / texSize);\n  vec2 clampedCoord = clamp(coord, vec2(0.0), texSize);\n  if (coord != clampedCoord) {\n    color.a *= max(0.0, 1.0 - length(coord - clampedCoord));\n  }\n\n  return color;\n}\n",o={name:"warp",fs:e};exports.default=o;
},{}],"Lqif":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("./warp"));function n(e){return e&&e.__esModule?e:{default:e}}var r="uniform float radius;\nuniform float strength;\nuniform vec2 center;\n\nvec2 bulgePinch_warp(vec2 coord, vec2 texCenter) {\n  coord -= texCenter;\n  float distance = length(coord);\n  if (distance < radius) {\n    float percent = distance / radius;\n    if (strength > 0.0) {\n      coord *= mix(1.0, smoothstep(0.0, radius / distance, percent), strength * 0.75);\n    } else {\n      coord *= mix(1.0, pow(percent, 1.0 + strength * 0.75) * radius / distance, 1.0 - percent);\n    }\n  }\n  coord += texCenter;\n  return coord;\n}\n\nvec4 bulgePinch_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {\n  vec2 coord = texCoord * texSize;\n  coord = bulgePinch_warp(coord, center * texSize);\n\n  return warp_sampleColor(texture, texSize, coord);\n}\n",t={center:[.5,.5],radius:{value:200,min:1,softMax:600},strength:{value:.5,min:-1,max:1}},o={name:"bulgePinch",fs:r,uniforms:t,dependencies:[e.default],passes:[{sampler:!0}]};exports.default=o;
},{"./warp":"EkJM"}],"ySHc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./warp"));function r(e){return e&&e.__esModule?e:{default:e}}var n="uniform float radius;\nuniform float angle;\nuniform vec2 center;\n\nvec2 swirl_warp(vec2 coord, vec2 texCenter) {\n  coord -= texCenter;\n  float distance = length(coord);\n  if (distance < radius) {\n    float percent = (radius - distance) / radius;\n    float theta = percent * percent * angle;\n    float s = sin(theta);\n    float c = cos(theta);\n    coord = vec2(\n      coord.x * c - coord.y * s,\n      coord.x * s + coord.y * c\n    );\n  }\n  coord += texCenter;\n  return coord;\n}\n\nvec4 swirl_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {\n  vec2 coord = texCoord * texSize;\n  coord = swirl_warp(coord, center * texSize);\n\n  return warp_sampleColor(texture, texSize, coord);\n}\n",o={center:[.5,.5],radius:{value:200,min:1,softMax:600},angle:{value:3,softMin:-25,softMax:25}},t={name:"swirl",uniforms:o,fs:n,dependencies:[e.default],passes:[{sampler:!0}]};exports.default=t;
},{"./warp":"EkJM"}],"RDdh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\n#define FXAA_QUALITY_PRESET 29\n\n#if (FXAA_QUALITY_PRESET == 10)\n    #define FXAA_QUALITY_PS 3\n    #define FXAA_QUALITY_P0 1.5\n    #define FXAA_QUALITY_P1 3.0\n    #define FXAA_QUALITY_P2 12.0\n#endif\n#if (FXAA_QUALITY_PRESET == 11)\n    #define FXAA_QUALITY_PS 4\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 3.0\n    #define FXAA_QUALITY_P3 12.0\n#endif\n#if (FXAA_QUALITY_PRESET == 12)\n    #define FXAA_QUALITY_PS 5\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 4.0\n    #define FXAA_QUALITY_P4 12.0\n#endif\n#if (FXAA_QUALITY_PRESET == 13)\n    #define FXAA_QUALITY_PS 6\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 4.0\n    #define FXAA_QUALITY_P5 12.0\n#endif\n#if (FXAA_QUALITY_PRESET == 14)\n    #define FXAA_QUALITY_PS 7\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 4.0\n    #define FXAA_QUALITY_P6 12.0\n#endif\n#if (FXAA_QUALITY_PRESET == 15)\n    #define FXAA_QUALITY_PS 8\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 2.0\n    #define FXAA_QUALITY_P6 4.0\n    #define FXAA_QUALITY_P7 12.0\n#endif\n#if (FXAA_QUALITY_PRESET == 20)\n    #define FXAA_QUALITY_PS 3\n    #define FXAA_QUALITY_P0 1.5\n    #define FXAA_QUALITY_P1 2.0\n    #define FXAA_QUALITY_P2 8.0\n#endif\n#if (FXAA_QUALITY_PRESET == 21)\n    #define FXAA_QUALITY_PS 4\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 8.0\n#endif\n#if (FXAA_QUALITY_PRESET == 22)\n    #define FXAA_QUALITY_PS 5\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 8.0\n#endif\n#if (FXAA_QUALITY_PRESET == 23)\n    #define FXAA_QUALITY_PS 6\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 8.0\n#endif\n#if (FXAA_QUALITY_PRESET == 24)\n    #define FXAA_QUALITY_PS 7\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 3.0\n    #define FXAA_QUALITY_P6 8.0\n#endif\n#if (FXAA_QUALITY_PRESET == 25)\n    #define FXAA_QUALITY_PS 8\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 2.0\n    #define FXAA_QUALITY_P6 4.0\n    #define FXAA_QUALITY_P7 8.0\n#endif\n#if (FXAA_QUALITY_PRESET == 26)\n    #define FXAA_QUALITY_PS 9\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 2.0\n    #define FXAA_QUALITY_P6 2.0\n    #define FXAA_QUALITY_P7 4.0\n    #define FXAA_QUALITY_P8 8.0\n#endif\n#if (FXAA_QUALITY_PRESET == 27)\n    #define FXAA_QUALITY_PS 10\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 2.0\n    #define FXAA_QUALITY_P6 2.0\n    #define FXAA_QUALITY_P7 2.0\n    #define FXAA_QUALITY_P8 4.0\n    #define FXAA_QUALITY_P9 8.0\n#endif\n#if (FXAA_QUALITY_PRESET == 28)\n    #define FXAA_QUALITY_PS 11\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 2.0\n    #define FXAA_QUALITY_P6 2.0\n    #define FXAA_QUALITY_P7 2.0\n    #define FXAA_QUALITY_P8 2.0\n    #define FXAA_QUALITY_P9 4.0\n    #define FXAA_QUALITY_P10 8.0\n#endif\n#if (FXAA_QUALITY_PRESET == 29)\n    #define FXAA_QUALITY_PS 12\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 2.0\n    #define FXAA_QUALITY_P6 2.0\n    #define FXAA_QUALITY_P7 2.0\n    #define FXAA_QUALITY_P8 2.0\n    #define FXAA_QUALITY_P9 2.0\n    #define FXAA_QUALITY_P10 4.0\n    #define FXAA_QUALITY_P11 8.0\n#endif\n#if (FXAA_QUALITY_PRESET == 39)\n    #define FXAA_QUALITY_PS 12\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.0\n    #define FXAA_QUALITY_P2 1.0\n    #define FXAA_QUALITY_P3 1.0\n    #define FXAA_QUALITY_P4 1.0\n    #define FXAA_QUALITY_P5 1.5\n    #define FXAA_QUALITY_P6 2.0\n    #define FXAA_QUALITY_P7 2.0\n    #define FXAA_QUALITY_P8 2.0\n    #define FXAA_QUALITY_P9 2.0\n    #define FXAA_QUALITY_P10 4.0\n    #define FXAA_QUALITY_P11 8.0\n#endif\n\n#define FxaaBool bool\n#define FxaaFloat float\n#define FxaaFloat2 vec2\n#define FxaaFloat3 vec3\n#define FxaaFloat4 vec4\n#define FxaaHalf float\n#define FxaaHalf2 vec2\n#define FxaaHalf3 vec3\n#define FxaaHalf4 vec4\n#define FxaaInt2 vec2\n#define FxaaTex sampler2D\n\n#define FxaaSat(x) clamp(x, 0.0, 1.0)\n#define FxaaTexTop(t, p) texture2D(t, p)\n#define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r))\n\nFxaaFloat FxaaLuma_(FxaaFloat4 rgba) { return dot(rgba.rgb, vec3(0.2126, 0.7152, 0.0722)); }\n\nFxaaFloat4 FxaaPixelShader_(\n\n\n    FxaaFloat2 pos,\n\n\n\n\n    FxaaTex tex,\n\n\n\n\n    FxaaFloat2 fxaaQualityRcpFrame,\n\n\n\n\n\n\n\n\n\n\n    FxaaFloat fxaaQualitySubpix,\n\n\n\n\n\n\n\n\n\n    FxaaFloat fxaaQualityEdgeThreshold,\n\n\n\n\n\n\n\n\n\n\n\n\n\n    FxaaFloat fxaaQualityEdgeThresholdMin\n) {\n    FxaaFloat2 posM;\n    posM.x = pos.x;\n    posM.y = pos.y;\n    FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);\n    #define lumaM rgbyM.y\n    FxaaFloat lumaS = FxaaLuma_(FxaaTexOff(tex, posM, FxaaInt2( 0, 1), fxaaQualityRcpFrame.xy));\n    FxaaFloat lumaE = FxaaLuma_(FxaaTexOff(tex, posM, FxaaInt2( 1, 0), fxaaQualityRcpFrame.xy));\n    FxaaFloat lumaN = FxaaLuma_(FxaaTexOff(tex, posM, FxaaInt2( 0,-1), fxaaQualityRcpFrame.xy));\n    FxaaFloat lumaW = FxaaLuma_(FxaaTexOff(tex, posM, FxaaInt2(-1, 0), fxaaQualityRcpFrame.xy));\n    FxaaFloat maxSM = max(lumaS, lumaM);\n    FxaaFloat minSM = min(lumaS, lumaM);\n    FxaaFloat maxESM = max(lumaE, maxSM);\n    FxaaFloat minESM = min(lumaE, minSM);\n    FxaaFloat maxWN = max(lumaN, lumaW);\n    FxaaFloat minWN = min(lumaN, lumaW);\n    FxaaFloat rangeMax = max(maxWN, maxESM);\n    FxaaFloat rangeMin = min(minWN, minESM);\n    FxaaFloat rangeMaxScaled = rangeMax * fxaaQualityEdgeThreshold;\n    FxaaFloat range = rangeMax - rangeMin;\n    FxaaFloat rangeMaxClamped = max(fxaaQualityEdgeThresholdMin, rangeMaxScaled);\n    FxaaBool earlyExit = range < rangeMaxClamped;\n    if(earlyExit)\n        return rgbyM;\n    FxaaFloat lumaNW = FxaaLuma_(FxaaTexOff(tex, posM, FxaaInt2(-1,-1), fxaaQualityRcpFrame.xy));\n    FxaaFloat lumaSE = FxaaLuma_(FxaaTexOff(tex, posM, FxaaInt2( 1, 1), fxaaQualityRcpFrame.xy));\n    FxaaFloat lumaNE = FxaaLuma_(FxaaTexOff(tex, posM, FxaaInt2( 1,-1), fxaaQualityRcpFrame.xy));\n    FxaaFloat lumaSW = FxaaLuma_(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));\n    FxaaFloat lumaNS = lumaN + lumaS;\n    FxaaFloat lumaWE = lumaW + lumaE;\n    FxaaFloat subpixRcpRange = 1.0/range;\n    FxaaFloat subpixNSWE = lumaNS + lumaWE;\n    FxaaFloat edgeHorz1 = (-2.0 * lumaM) + lumaNS;\n    FxaaFloat edgeVert1 = (-2.0 * lumaM) + lumaWE;\n    FxaaFloat lumaNESE = lumaNE + lumaSE;\n    FxaaFloat lumaNWNE = lumaNW + lumaNE;\n    FxaaFloat edgeHorz2 = (-2.0 * lumaE) + lumaNESE;\n    FxaaFloat edgeVert2 = (-2.0 * lumaN) + lumaNWNE;\n    FxaaFloat lumaNWSW = lumaNW + lumaSW;\n    FxaaFloat lumaSWSE = lumaSW + lumaSE;\n    FxaaFloat edgeHorz4 = (abs(edgeHorz1) * 2.0) + abs(edgeHorz2);\n    FxaaFloat edgeVert4 = (abs(edgeVert1) * 2.0) + abs(edgeVert2);\n    FxaaFloat edgeHorz3 = (-2.0 * lumaW) + lumaNWSW;\n    FxaaFloat edgeVert3 = (-2.0 * lumaS) + lumaSWSE;\n    FxaaFloat edgeHorz = abs(edgeHorz3) + edgeHorz4;\n    FxaaFloat edgeVert = abs(edgeVert3) + edgeVert4;\n    FxaaFloat subpixNWSWNESE = lumaNWSW + lumaNESE;\n    FxaaFloat lengthSign = fxaaQualityRcpFrame.x;\n    FxaaBool horzSpan = edgeHorz >= edgeVert;\n    FxaaFloat subpixA = subpixNSWE * 2.0 + subpixNWSWNESE;\n    if(!horzSpan) lumaN = lumaW;\n    if(!horzSpan) lumaS = lumaE;\n    if(horzSpan) lengthSign = fxaaQualityRcpFrame.y;\n    FxaaFloat subpixB = (subpixA * (1.0/12.0)) - lumaM;\n    FxaaFloat gradientN = lumaN - lumaM;\n    FxaaFloat gradientS = lumaS - lumaM;\n    FxaaFloat lumaNN = lumaN + lumaM;\n    FxaaFloat lumaSS = lumaS + lumaM;\n    FxaaBool pairN = abs(gradientN) >= abs(gradientS);\n    FxaaFloat gradient = max(abs(gradientN), abs(gradientS));\n    if(pairN) lengthSign = -lengthSign;\n    FxaaFloat subpixC = FxaaSat(abs(subpixB) * subpixRcpRange);\n    FxaaFloat2 posB;\n    posB.x = posM.x;\n    posB.y = posM.y;\n    FxaaFloat2 offNP;\n    offNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;\n    offNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;\n    if(!horzSpan) posB.x += lengthSign * 0.5;\n    if( horzSpan) posB.y += lengthSign * 0.5;\n    FxaaFloat2 posN;\n    posN.x = posB.x - offNP.x * FXAA_QUALITY_P0;\n    posN.y = posB.y - offNP.y * FXAA_QUALITY_P0;\n    FxaaFloat2 posP;\n    posP.x = posB.x + offNP.x * FXAA_QUALITY_P0;\n    posP.y = posB.y + offNP.y * FXAA_QUALITY_P0;\n    FxaaFloat subpixD = ((-2.0)*subpixC) + 3.0;\n    FxaaFloat lumaEndN = FxaaLuma_(FxaaTexTop(tex, posN));\n    FxaaFloat subpixE = subpixC * subpixC;\n    FxaaFloat lumaEndP = FxaaLuma_(FxaaTexTop(tex, posP));\n    if(!pairN) lumaNN = lumaSS;\n    FxaaFloat gradientScaled = gradient * 1.0/4.0;\n    FxaaFloat lumaMM = lumaM - lumaNN * 0.5;\n    FxaaFloat subpixF = subpixD * subpixE;\n    FxaaBool lumaMLTZero = lumaMM < 0.0;\n    lumaEndN -= lumaNN * 0.5;\n    lumaEndP -= lumaNN * 0.5;\n    FxaaBool doneN = abs(lumaEndN) >= gradientScaled;\n    FxaaBool doneP = abs(lumaEndP) >= gradientScaled;\n    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P1;\n    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P1;\n    FxaaBool doneNP = (!doneN) || (!doneP);\n    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P1;\n    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P1;\n    if(doneNP) {\n        if(!doneN) lumaEndN = FxaaLuma_(FxaaTexTop(tex, posN.xy));\n        if(!doneP) lumaEndP = FxaaLuma_(FxaaTexTop(tex, posP.xy));\n        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n        doneN = abs(lumaEndN) >= gradientScaled;\n        doneP = abs(lumaEndP) >= gradientScaled;\n        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P2;\n        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P2;\n        doneNP = (!doneN) || (!doneP);\n        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P2;\n        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P2;\n        #if (FXAA_QUALITY_PS > 3)\n        if(doneNP) {\n            if(!doneN) lumaEndN = FxaaLuma_(FxaaTexTop(tex, posN.xy));\n            if(!doneP) lumaEndP = FxaaLuma_(FxaaTexTop(tex, posP.xy));\n            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n            doneN = abs(lumaEndN) >= gradientScaled;\n            doneP = abs(lumaEndP) >= gradientScaled;\n            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P3;\n            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P3;\n            doneNP = (!doneN) || (!doneP);\n            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P3;\n            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P3;\n            #if (FXAA_QUALITY_PS > 4)\n            if(doneNP) {\n                if(!doneN) lumaEndN = FxaaLuma_(FxaaTexTop(tex, posN.xy));\n                if(!doneP) lumaEndP = FxaaLuma_(FxaaTexTop(tex, posP.xy));\n                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                doneN = abs(lumaEndN) >= gradientScaled;\n                doneP = abs(lumaEndP) >= gradientScaled;\n                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P4;\n                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P4;\n                doneNP = (!doneN) || (!doneP);\n                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P4;\n                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P4;\n                #if (FXAA_QUALITY_PS > 5)\n                if(doneNP) {\n                    if(!doneN) lumaEndN = FxaaLuma_(FxaaTexTop(tex, posN.xy));\n                    if(!doneP) lumaEndP = FxaaLuma_(FxaaTexTop(tex, posP.xy));\n                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                    doneN = abs(lumaEndN) >= gradientScaled;\n                    doneP = abs(lumaEndP) >= gradientScaled;\n                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P5;\n                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P5;\n                    doneNP = (!doneN) || (!doneP);\n                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P5;\n                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P5;\n                    #if (FXAA_QUALITY_PS > 6)\n                    if(doneNP) {\n                        if(!doneN) lumaEndN = FxaaLuma_(FxaaTexTop(tex, posN.xy));\n                        if(!doneP) lumaEndP = FxaaLuma_(FxaaTexTop(tex, posP.xy));\n                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                        doneN = abs(lumaEndN) >= gradientScaled;\n                        doneP = abs(lumaEndP) >= gradientScaled;\n                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P6;\n                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P6;\n                        doneNP = (!doneN) || (!doneP);\n                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P6;\n                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P6;\n                        #if (FXAA_QUALITY_PS > 7)\n                        if(doneNP) {\n                            if(!doneN) lumaEndN = FxaaLuma_(FxaaTexTop(tex, posN.xy));\n                            if(!doneP) lumaEndP = FxaaLuma_(FxaaTexTop(tex, posP.xy));\n                            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                            doneN = abs(lumaEndN) >= gradientScaled;\n                            doneP = abs(lumaEndP) >= gradientScaled;\n                            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P7;\n                            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P7;\n                            doneNP = (!doneN) || (!doneP);\n                            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P7;\n                            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P7;\n    #if (FXAA_QUALITY_PS > 8)\n    if(doneNP) {\n        if(!doneN) lumaEndN = FxaaLuma_(FxaaTexTop(tex, posN.xy));\n        if(!doneP) lumaEndP = FxaaLuma_(FxaaTexTop(tex, posP.xy));\n        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n        doneN = abs(lumaEndN) >= gradientScaled;\n        doneP = abs(lumaEndP) >= gradientScaled;\n        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P8;\n        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P8;\n        doneNP = (!doneN) || (!doneP);\n        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P8;\n        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P8;\n        #if (FXAA_QUALITY_PS > 9)\n        if(doneNP) {\n            if(!doneN) lumaEndN = FxaaLuma_(FxaaTexTop(tex, posN.xy));\n            if(!doneP) lumaEndP = FxaaLuma_(FxaaTexTop(tex, posP.xy));\n            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n            doneN = abs(lumaEndN) >= gradientScaled;\n            doneP = abs(lumaEndP) >= gradientScaled;\n            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P9;\n            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P9;\n            doneNP = (!doneN) || (!doneP);\n            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P9;\n            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P9;\n            #if (FXAA_QUALITY_PS > 10)\n            if(doneNP) {\n                if(!doneN) lumaEndN = FxaaLuma_(FxaaTexTop(tex, posN.xy));\n                if(!doneP) lumaEndP = FxaaLuma_(FxaaTexTop(tex, posP.xy));\n                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                doneN = abs(lumaEndN) >= gradientScaled;\n                doneP = abs(lumaEndP) >= gradientScaled;\n                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P10;\n                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P10;\n                doneNP = (!doneN) || (!doneP);\n                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P10;\n                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P10;\n                #if (FXAA_QUALITY_PS > 11)\n                if(doneNP) {\n                    if(!doneN) lumaEndN = FxaaLuma_(FxaaTexTop(tex, posN.xy));\n                    if(!doneP) lumaEndP = FxaaLuma_(FxaaTexTop(tex, posP.xy));\n                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                    doneN = abs(lumaEndN) >= gradientScaled;\n                    doneP = abs(lumaEndP) >= gradientScaled;\n                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P11;\n                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P11;\n                    doneNP = (!doneN) || (!doneP);\n                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P11;\n                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P11;\n                    #if (FXAA_QUALITY_PS > 12)\n                    if(doneNP) {\n                        if(!doneN) lumaEndN = FxaaLuma_(FxaaTexTop(tex, posN.xy));\n                        if(!doneP) lumaEndP = FxaaLuma_(FxaaTexTop(tex, posP.xy));\n                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                        doneN = abs(lumaEndN) >= gradientScaled;\n                        doneP = abs(lumaEndP) >= gradientScaled;\n                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P12;\n                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P12;\n                        doneNP = (!doneN) || (!doneP);\n                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P12;\n                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P12;\n                    }\n                    #endif\n                }\n                #endif\n            }\n            #endif\n        }\n        #endif\n    }\n    #endif\n                        }\n                        #endif\n                    }\n                    #endif\n                }\n                #endif\n            }\n            #endif\n        }\n        #endif\n    }\n    FxaaFloat dstN = posM.x - posN.x;\n    FxaaFloat dstP = posP.x - posM.x;\n    if(!horzSpan) dstN = posM.y - posN.y;\n    if(!horzSpan) dstP = posP.y - posM.y;\n    FxaaBool goodSpanN = (lumaEndN < 0.0) != lumaMLTZero;\n    FxaaFloat spanLength = (dstP + dstN);\n    FxaaBool goodSpanP = (lumaEndP < 0.0) != lumaMLTZero;\n    FxaaFloat spanLengthRcp = 1.0/spanLength;\n    FxaaBool directionN = dstN < dstP;\n    FxaaFloat dst = min(dstN, dstP);\n    FxaaBool goodSpan = directionN ? goodSpanN : goodSpanP;\n    FxaaFloat subpixG = subpixF * subpixF;\n    FxaaFloat pixelOffset = (dst * (-spanLengthRcp)) + 0.5;\n    FxaaFloat subpixH = subpixG * fxaaQualitySubpix;\n    FxaaFloat pixelOffsetGood = goodSpan ? pixelOffset : 0.0;\n    FxaaFloat pixelOffsetSubpix = max(pixelOffsetGood, subpixH);\n    if(!horzSpan) posM.x += pixelOffsetSubpix * lengthSign;\n    if( horzSpan) posM.y += pixelOffsetSubpix * lengthSign;\n    return FxaaTexTop(tex, posM);\n}\n\nvec4 fxaa_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {\n    const float fxaa_QualitySubpix = 0.5;\n    const float fxaa_QualityEdgeThreshold = 0.125;\n    const float fxaa_QualityEdgeThresholdMin = 0.0833;\n\n    return FxaaPixelShader_(\n        texCoord,\n        texture,\n        vec2(1.0) / texSize,\n        fxaa_QualitySubpix,\n        fxaa_QualityEdgeThreshold,\n        fxaa_QualityEdgeThresholdMin\n    );\n}\n",a={name:"fxaa",uniforms:{},fs:n,passes:[{sampler:!0}]};exports.default=a;
},{}],"hgD9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="attribute float transform_elementID;\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n",r={name:"transform",vs:e,fs:null};exports.default=r;
},{}],"wMsA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"fp32",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"fp64",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"fp64arithmetic",{enumerable:!0,get:function(){return r.fp64arithmetic}}),Object.defineProperty(exports,"project",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"lights",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"dirlight",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"picking",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"gouraudLighting",{enumerable:!0,get:function(){return o.gouraudLighting}}),Object.defineProperty(exports,"phongLighting",{enumerable:!0,get:function(){return o.phongLighting}}),Object.defineProperty(exports,"pbr",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"brightnessContrast",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"denoise",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"hueSaturation",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(exports,"noise",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(exports,"sepia",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(exports,"vibrance",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(exports,"vignette",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(exports,"tiltShift",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(exports,"triangleBlur",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(exports,"zoomBlur",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(exports,"colorHalftone",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(exports,"dotScreen",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(exports,"edgeWork",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(exports,"hexagonalPixelate",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(exports,"ink",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(exports,"bulgePinch",{enumerable:!0,get:function(){return q.default}}),Object.defineProperty(exports,"swirl",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(exports,"fxaa",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(exports,"_transform",{enumerable:!0,get:function(){return w.default}});var e=L(require("./fp32/fp32")),r=M(require("./fp64/fp64")),t=L(require("./project/project")),n=L(require("./lights/lights")),u=L(require("./dirlight/dirlight")),i=L(require("./picking/picking")),o=require("./phong-lighting/phong-lighting"),f=L(require("./pbr/pbr")),l=L(require("./adjust-filters/brightnesscontrast")),a=L(require("./adjust-filters/denoise")),p=L(require("./adjust-filters/huesaturation")),c=L(require("./adjust-filters/noise")),s=L(require("./adjust-filters/sepia")),d=L(require("./adjust-filters/vibrance")),b=L(require("./adjust-filters/vignette")),g=L(require("./blur-filters/tiltshift")),j=L(require("./blur-filters/triangleblur")),y=L(require("./blur-filters/zoomblur")),O=L(require("./fun-filters/colorhalftone")),x=L(require("./fun-filters/dotscreen")),P=L(require("./fun-filters/edgework")),m=L(require("./fun-filters/hexagonalpixelate")),h=L(require("./fun-filters/ink")),q=L(require("./warp-filters/bulgepinch")),v=L(require("./warp-filters/swirl")),k=L(require("./fxaa/fxaa")),w=L(require("./transform/transform"));function _(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return _=function(){return e},e}function M(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=_();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var i=n?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(t,u,i):t[u]=e[u]}return t.default=e,r&&r.set(e,t),t}function L(e){return e&&e.__esModule?e:{default:e}}
},{"./fp32/fp32":"rSwV","./fp64/fp64":"mLAB","./project/project":"zjhX","./lights/lights":"ob8R","./dirlight/dirlight":"VcTg","./picking/picking":"flfn","./phong-lighting/phong-lighting":"VXHj","./pbr/pbr":"rSII","./adjust-filters/brightnesscontrast":"ovj4","./adjust-filters/denoise":"DeLB","./adjust-filters/huesaturation":"mhBu","./adjust-filters/noise":"KzQ2","./adjust-filters/sepia":"JxpC","./adjust-filters/vibrance":"btkn","./adjust-filters/vignette":"Sh3N","./blur-filters/tiltshift":"wmQF","./blur-filters/triangleblur":"EFsp","./blur-filters/zoomblur":"rXar","./fun-filters/colorhalftone":"F4id","./fun-filters/dotscreen":"YSaf","./fun-filters/edgework":"fiRy","./fun-filters/hexagonalpixelate":"BYth","./fun-filters/ink":"RIi1","./warp-filters/bulgepinch":"Lqif","./warp-filters/swirl":"ySHc","./fxaa/fxaa":"RDdh","./transform/transform":"hgD9"}],"Pzgo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={assembleShaders:!0,combineInjects:!0,normalizeShaderModule:!0,getQualifierDetails:!0,getPassthroughFS:!0,typeToChannelSuffix:!0,typeToChannelCount:!0,convertToVec4:!0};Object.defineProperty(exports,"assembleShaders",{enumerable:!0,get:function(){return r.assembleShaders}}),Object.defineProperty(exports,"combineInjects",{enumerable:!0,get:function(){return t.combineInjects}}),Object.defineProperty(exports,"normalizeShaderModule",{enumerable:!0,get:function(){return n.normalizeShaderModule}}),Object.defineProperty(exports,"getQualifierDetails",{enumerable:!0,get:function(){return o.getQualifierDetails}}),Object.defineProperty(exports,"getPassthroughFS",{enumerable:!0,get:function(){return o.getPassthroughFS}}),Object.defineProperty(exports,"typeToChannelSuffix",{enumerable:!0,get:function(){return o.typeToChannelSuffix}}),Object.defineProperty(exports,"typeToChannelCount",{enumerable:!0,get:function(){return o.typeToChannelCount}}),Object.defineProperty(exports,"convertToVec4",{enumerable:!0,get:function(){return o.convertToVec4}});var r=require("./lib/assemble-shaders"),t=require("./lib/inject-shader"),n=require("./lib/shader-module"),o=require("./utils/shader-utils"),u=require("./modules");Object.keys(u).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===u[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return u[r]}}))});
},{"./lib/assemble-shaders":"aMxS","./lib/inject-shader":"VTdi","./lib/shader-module":"X8lP","./utils/shader-utils":"uzoD","./modules":"wMsA"}],"BP7a":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("@babel/runtime/helpers/esm/classCallCheck")),t=r(require("@babel/runtime/helpers/esm/createClass")),s=require("@luma.gl/shadertools"),a=require("@luma.gl/webgl");function r(e){return e&&e.__esModule?e:{default:e}}var n=function(){function r(t){(0,e.default)(this,r),this.gl=t,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}return(0,t.default)(r,null,[{key:"getDefaultProgramManager",value:function(e){return e.luma=e.luma||{},e.luma.defaultProgramManager=e.luma.defaultProgramManager||new r(e),e.luma.defaultProgramManager}}]),(0,t.default)(r,[{key:"addDefaultModule",value:function(e){this._defaultModules.find(function(t){return t.name===e.name})||this._defaultModules.push(e),this.stateHash++}},{key:"removeDefaultModule",value:function(e){var t="string"==typeof e?e:e.name;this._defaultModules=this._defaultModules.filter(function(e){return e.name!==t}),this.stateHash++}},{key:"addShaderHook",value:function(e,t){t&&(e=Object.assign(t,{hook:e})),this._hookFunctions.push(e),this.stateHash++}},{key:"get",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.vs,n=void 0===r?"":r,o=t.fs,i=void 0===o?"":o,u=t.defines,h=void 0===u?{}:u,l=t.inject,f=void 0===l?{}:l,d=t.varyings,c=void 0===d?[]:d,g=t.bufferMode,_=void 0===g?35981:g,v=t.transpileToGLSL100,m=void 0!==v&&v,y=this._getModuleList(t.modules),p=this._getHash(n),M=this._getHash(i),k=y.map(function(t){return e._getHash(t.name)}).sort(),C=c.map(function(t){return e._getHash(t)}),H=Object.keys(h).sort(),b=Object.keys(f).sort(),j=[],w=[],L=!0,P=!1,S=void 0;try{for(var U,x=H[Symbol.iterator]();!(L=(U=x.next()).done);L=!0){var q=U.value;j.push(this._getHash(q)),j.push(this._getHash(h[q]))}}catch(V){P=!0,S=V}finally{try{L||null==x.return||x.return()}finally{if(P)throw S}}var D=!0,F=!1,O=void 0;try{for(var T,G=b[Symbol.iterator]();!(D=(T=G.next()).done);D=!0){var A=T.value;w.push(this._getHash(A)),w.push(this._getHash(f[A]))}}catch(V){F=!0,O=V}finally{try{D||null==G.return||G.return()}finally{if(F)throw O}}var B="".concat(p,"/").concat(M,"D").concat(j.join("/"),"M").concat(k.join("/"),"I").concat(w.join("/"),"V").concat(C.join("/"),"H").concat(this.stateHash,"B").concat(_).concat(m?"T":"");if(!this._programCache[B]){var I=(0,s.assembleShaders)(this.gl,{vs:n,fs:i,modules:y,inject:f,defines:h,hookFunctions:this._hookFunctions,transpileToGLSL100:m});this._programCache[B]=new a.Program(this.gl,{hash:B,vs:I.vs,fs:I.fs,varyings:c,bufferMode:_}),this._getUniforms[B]=I.getUniforms||function(e){},this._useCounts[B]=0}return this._useCounts[B]++,this._programCache[B]}},{key:"getUniforms",value:function(e){return this._getUniforms[e.hash]||null}},{key:"release",value:function(e){var t=e.hash;this._useCounts[t]--,0===this._useCounts[t]&&(this._programCache[t].delete(),delete this._programCache[t],delete this._getUniforms[t],delete this._useCounts[t])}},{key:"_getHash",value:function(e){return void 0===this._hashes[e]&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}},{key:"_getModuleList",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=new Array(this._defaultModules.length+e.length),s={},a=0,r=0,n=this._defaultModules.length;r<n;++r){var o=this._defaultModules[r],i=o.name;t[a++]=o,s[i]=!0}for(var u=0,h=e.length;u<h;++u){var l=e[u],f=l.name;s[f]||(t[a++]=l,s[f]=!0)}return t.length=a,t}}]),r}();exports.default=n;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@luma.gl/shadertools":"Pzgo","@luma.gl/webgl":"KdJH"}],"EV9w":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=t(require("@babel/runtime/helpers/esm/defineProperty"));function t(e){return e&&e.__esModule?e:{default:e}}function r(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?Object(arguments[r]):{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(r){(0,e.default)(t,r,n[r])})}return t}
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3"}],"sgeN":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getBuffersFromGeometry=i,exports.inferAttributeAccessor=o;var e=s(require("@babel/runtime/helpers/esm/objectSpread")),r=require("@luma.gl/webgl");function s(e){return e&&e.__esModule?e:{default:e}}var t={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function i(s,t,i){var n={},c=t.indices;for(var u in t.attributes){var d=t.attributes[u],f=a(u,i);if("indices"===u)c=d;else if(d.constant)n[f]=d.value;else{var v=d.value,l=(0,e.default)({},d);delete l.value,n[f]=[new r.Buffer(s,v),l],o(u,l)}}if(c){var b=c.value||c;(0,r.assert)(b instanceof Uint16Array||b instanceof Uint32Array,'attribute array for "indices" must be of integer type');var x={size:1,isIndexed:void 0===c.isIndexed||c.isIndexed};n.indices=[new r.Buffer(s,{data:b,target:34963}),x]}return n}function a(e,r){var s=(r||{}).attributeMap,i=void 0===s?t:s;return i&&i[e]||e}function o(e,s){var t;switch(e){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":t="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":t="vectors"}switch(t){case"vectors":s.size=s.size||3;break;case"uvs":s.size=s.size||2}(0,r.assert)(Number.isFinite(s.size),"attribute ".concat(e," needs size"))}
},{"@babel/runtime/helpers/esm/objectSpread":"EV9w","@luma.gl/webgl":"KdJH"}],"EKUN":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("@babel/runtime/helpers/esm/defineProperty")),t=o(require("@babel/runtime/helpers/esm/classCallCheck")),r=o(require("@babel/runtime/helpers/esm/createClass")),s=require("@luma.gl/gltools"),i=o(require("./program-manager")),a=require("@luma.gl/webgl"),n=require("./model-utils");function o(e){return e&&e.__esModule?e:{default:e}}var u=2,d=1e4,g="Model needs drawMode and vertexCount",l=function(){},f={},h=function(){function o(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,t.default)(this,o);var i=r.id,n=void 0===i?(0,a.uid)("model"):i;(0,a.assert)((0,s.isWebGL)(e)),this.id=n,this.gl=e,this.id=r.id||(0,a.uid)("Model"),this.lastLogTime=0,this.initialize(r)}return(0,r.default)(o,[{key:"initialize",value:function(e){this.props={},this.programManager=e.programManager||i.default.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;var t=e.program,r=void 0===t?null:t,s=e.vs,n=e.fs,o=e.modules,u=e.defines,d=e.inject,l=e.varyings,f=e.bufferMode,h=e.transpileToGLSL100;this.programProps={program:r,vs:s,fs:n,modules:o,defines:u,inject:d,varyings:l,bufferMode:f,transpileToGLSL100:h},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(e.moduleSettings))),this.drawMode=void 0!==e.drawMode?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced||e.instanceCount>0,this._setModelProps(e),this.geometry={},(0,a.assert)(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),g)}},{key:"setProps",value:function(e){this._setModelProps(e)}},{key:"delete",value:function(){for(var e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}},{key:"getDrawMode",value:function(){return this.drawMode}},{key:"getVertexCount",value:function(){return this.vertexCount}},{key:"getInstanceCount",value:function(){return this.instanceCount}},{key:"getAttributes",value:function(){return this.attributes}},{key:"getProgram",value:function(){return this.program}},{key:"setProgram",value:function(e){var t=e.program,r=e.vs,s=e.fs,i=e.modules,a=e.defines,n=e.inject,o=e.varyings,u=e.bufferMode,d=e.transpileToGLSL100;this.programProps={program:t,vs:r,fs:s,modules:i,defines:a,inject:n,varyings:o,bufferMode:u,transpileToGLSL100:d},this._programDirty=!0}},{key:"getUniforms",value:function(){return this.uniforms}},{key:"setDrawMode",value:function(e){return this.drawMode=e,this}},{key:"setVertexCount",value:function(e){return(0,a.assert)(Number.isFinite(e)),this.vertexCount=e,this}},{key:"setInstanceCount",value:function(e){return(0,a.assert)(Number.isFinite(e)),this.instanceCount=e,this}},{key:"setGeometry",value:function(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=(0,n.getBuffersFromGeometry)(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}},{key:"setAttributes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,a.isObjectEmpty)(e))return this;var t={};for(var r in e){var s=e[r];t[r]=s.getValue?s.getValue():s}return this.vertexArray.setAttributes(t),this}},{key:"setUniforms",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(this.uniforms,e),this}},{key:"getModuleUniforms",value:function(e){this._checkProgram();var t=this.programManager.getUniforms(this.program);return t?t(e):{}}},{key:"updateModuleSettings",value:function(e){var t=this.getModuleUniforms(e||{});return this.setUniforms(t)}},{key:"clear",value:function(e){return(0,a.clear)(this.program.gl,e),this}},{key:"draw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._checkProgram();var t,r=e.moduleSettings,s=void 0===r?null:r,i=e.framebuffer,n=e.uniforms,o=void 0===n?{}:n,d=e.attributes,g=void 0===d?{}:d,h=e.transformFeedback,m=void 0===h?this.transformFeedback:h,v=e.parameters,c=void 0===v?{}:v,p=e.vertexArray,b=void 0===p?this.vertexArray:p;this.setAttributes(g),this.updateModuleSettings(s),this.setUniforms(o),a.log.priority>=u&&(t=this._logDrawCallStart(u));var y=this.vertexArray.getDrawParams(),M=this.props,k=M.isIndexed,_=void 0===k?y.isIndexed:k,x=M.indexType,w=void 0===x?y.indexType:x,C=M.indexOffset,A=void 0===C?y.indexOffset:C,P=M.vertexArrayInstanced;(void 0===P?y.isInstanced:P)&&!this.isInstanced&&a.log.warn("Found instanced attributes on non-instanced model",this.id)();var D=this.isInstanced,U=this.instanceCount,O=this.props,j=O.onBeforeRender,B=void 0===j?l:j,F=O.onAfterRender,S=void 0===F?l:F;B(),this.program.setUniforms(this.uniforms);var L=this.program.draw(Object.assign(f,e,{logPriority:t,uniforms:null,framebuffer:i,parameters:c,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:b,transformFeedback:m,isIndexed:_,indexType:w,isInstanced:D,instanceCount:U,offset:_?A:0}));return S(),a.log.priority>=u&&this._logDrawCallEnd(t,b,i),L}},{key:"transform",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.discard,s=void 0===r||r,i=t.feedbackBuffers,a=t.unbindModels,n=void 0===a?[]:a,o=t.parameters;i&&this._setFeedbackBuffers(i),s&&(o=Object.assign({},o,(0,e.default)({},35977,s))),n.forEach(function(e){return e.vertexArray.unbindBuffers()});try{this.draw(Object.assign({},t,{parameters:o}))}finally{n.forEach(function(e){return e.vertexArray.bindBuffers()})}return this}},{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a.log.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}},{key:"_setModelProps",value:function(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}},{key:"_checkProgram",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this._programDirty||this.programManager.stateHash!==this._programManagerState){var e=this.programProps.program;if(e)this._managedProgram=!1;else{var t=this.programProps,r=t.vs,s=t.fs,i=t.modules,n=t.inject,o=t.defines,u=t.varyings,d=t.bufferMode,g=t.transpileToGLSL100;e=this.programManager.get({vs:r,fs:s,modules:i,inject:n,defines:o,varyings:u,bufferMode:d,transpileToGLSL100:g}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}(0,a.assert)(e instanceof a.Program,"Model needs a program"),this._programDirty=!1,e!==this.program&&(this.program=e,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new a.VertexArray(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}}},{key:"_deleteGeometryBuffers",value:function(){for(var e in this.geometryBuffers){var t=this.geometryBuffers[e][0]||this.geometryBuffers[e];t instanceof a.Buffer&&t.delete()}}},{key:"_setAnimationProps",value:function(e){if(this.animated){(0,a.assert)(e,"Model.draw(): animated uniforms but no animationProps");var t=this._evaluateAnimateUniforms(e);Object.assign(this.uniforms,t)}}},{key:"_setFeedbackBuffers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,a.isObjectEmpty)(e))return this;var t=this.program.gl;return this.transformFeedback=this.transformFeedback||new a.TransformFeedback(t,{program:this.program}),this.transformFeedback.setBuffers(e),this}},{key:"_logDrawCallStart",value:function(e){var t=e>3?0:d;if(!(Date.now()-this.lastLogTime<t))return this.lastLogTime=Date.now(),a.log.group(u,">>> DRAWING MODEL ".concat(this.id),{collapsed:a.log.level<=2})(),e}},{key:"_logDrawCallEnd",value:function(e,t,r,s){if(void 0!==e){var i=(0,a.getDebugTableForVertexArray)({vertexArray:t,header:"".concat(this.id," attributes"),attributes:this._attributes}),n=(0,a.getDebugTableForUniforms)({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,r)}),o=n.table,d=n.unusedTable,g=n.unusedCount,l=(0,a.getDebugTableForUniforms)({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,r),undefinedOnly:!0}),f=l.table;l.count>0&&a.log.log("MISSING UNIFORMS",Object.keys(f))(),g>0&&a.log.log("UNUSED UNIFORMS",Object.keys(d))();var h=(0,a.getDebugTableForProgramConfiguration)(this.vertexArray.configuration);a.log.table(e,i)(),a.log.table(e,o)(),a.log.table(e+1,h)(),s&&s.log({logLevel:u,message:"Rendered to ".concat(s.id)}),a.log.groupEnd(u,">>> DRAWING MODEL ".concat(this.id))()}}}]),o}();exports.default=h;
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@luma.gl/gltools":"lAom","./program-manager":"BP7a","@luma.gl/webgl":"KdJH","./model-utils":"sgeN"}],"VzDO":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("@babel/runtime/helpers/esm/classCallCheck")),s=i(require("@babel/runtime/helpers/esm/createClass")),r=require("@luma.gl/gltools"),t=require("@luma.gl/webgl");function i(e){return e&&e.__esModule?e:{default:e}}var n=function(){function i(s){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,e.default)(this,i),this.gl=s,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(r),Object.seal(this)}return(0,s.default)(i,[{key:"setupResources",value:function(e){var s=!0,r=!1,t=void 0;try{for(var i,n=this.bindings[Symbol.iterator]();!(s=(i=n.next()).done);s=!0){var u=i.value;this._setupTransformFeedback(u,e)}}catch(a){r=!0,t=a}finally{try{s||null==n.return||n.return()}finally{if(r)throw t}}}},{key:"updateModelProps",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=this.varyings;return s.length>0&&(e=Object.assign({},e,{varyings:s})),e}},{key:"getDrawOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=this.bindings[this.currentIndex],r=s.sourceBuffers,t=s.transformFeedback;return{attributes:Object.assign({},r,e.attributes),transformFeedback:t}}},{key:"swap",value:function(){return!!this.feedbackMap&&(this.currentIndex=this._getNextIndex(),!0)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(e)}},{key:"getBuffer",value:function(e){var s=this.bindings[this.currentIndex].feedbackBuffers,r=e?s[e]:null;return r?r instanceof t.Buffer?r:r.buffer:null}},{key:"getData",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).varyingName,s=this.getBuffer(e);return s?s.getData():null}},{key:"delete",value:function(){for(var e in this.resources)this.resources[e].delete()}},{key:"_initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(e),this.varyings=e.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&(0,t.assert)((0,r.isWebGL2)(this.gl))}},{key:"_getFeedbackBuffers",value:function(e){var s=e.sourceBuffers,r=void 0===s?{}:s,t={};if(this.bindings[this.currentIndex]&&Object.assign(t,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(var i in this.feedbackMap){var n=this.feedbackMap[i];i in r&&(t[n]=i)}for(var u in Object.assign(t,e.feedbackBuffers),t){var a=t[u];if("string"==typeof a){var f=r[a],c=f.byteLength,d=f.usage,o=f.accessor;t[u]=this._createNewBuffer(u,{byteLength:c,usage:d,accessor:o})}}return t}},{key:"_setupBuffers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=e.sourceBuffers,r=void 0===s?null:s;Object.assign(this.feedbackMap,e.feedbackMap);var t=this._getFeedbackBuffers(e);this._updateBindings({sourceBuffers:r,feedbackBuffers:t})}},{key:"_setupTransformFeedback",value:function(e,s){var r=s.model.program;e.transformFeedback=new t.TransformFeedback(this.gl,{program:r,buffers:e.feedbackBuffers})}},{key:"_updateBindings",value:function(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this.feedbackMap){var s=this._swapBuffers(this.bindings[this.currentIndex]),r=s.sourceBuffers,t=s.feedbackBuffers,i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceBuffers:r,feedbackBuffers:t})}}},{key:"_updateBinding",value:function(e,s){return e?(Object.assign(e.sourceBuffers,s.sourceBuffers),Object.assign(e.feedbackBuffers,s.feedbackBuffers),e.transformFeedback&&e.transformFeedback.setBuffers(e.feedbackBuffers),e):{sourceBuffers:Object.assign({},s.sourceBuffers),feedbackBuffers:Object.assign({},s.feedbackBuffers)}}},{key:"_swapBuffers",value:function(e){if(!this.feedbackMap)return null;var s=Object.assign({},e.sourceBuffers),r=Object.assign({},e.feedbackBuffers);for(var i in this.feedbackMap){var n=this.feedbackMap[i];s[i]=e.feedbackBuffers[n],r[n]=e.sourceBuffers[i],(0,t.assert)(r[n]instanceof t.Buffer)}return{sourceBuffers:s,feedbackBuffers:r}}},{key:"_createNewBuffer",value:function(e,s){var r=new t.Buffer(this.gl,s);return this.resources[e]&&this.resources[e].delete(),this.resources[e]=r,r}},{key:"_getNextIndex",value:function(){return(this.currentIndex+1)%2}}]),i}();exports.default=n;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@luma.gl/gltools":"lAom","@luma.gl/webgl":"KdJH"}],"eVnT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.updateForTextures=c,exports.getSizeUniforms=i,exports.getVaryingType=s,exports.processAttributeDefinition=l;var e=require("@luma.gl/webgl"),t=require("@luma.gl/shadertools"),r="transform_uSampler_",n="transform_uSize_",a="transform_position";function c(r){var c=r.vs,i=r.sourceTextureMap,o=r.targetTextureVarying,u=r.targetTexture,f=Object.keys(i).length,m=null,p={},v=c,g={};if(f>0||o){var x=v.split("\n"),T=x.slice();if(x.forEach(function(e,r,n){if(f>0){var a=l(e,i);if(a){var c=a.updatedLine,u=a.inject;T[r]=c,g=(0,t.combineInjects)([g,u]),Object.assign(p,a.samplerTextureMap),f--}}o&&!m&&(m=s(e,o))}),o){(0,e.assert)(u);var d="".concat(n).concat(o),y={"vs:#decl":"uniform vec2 ".concat(d,";\n"),"vs:#main-start":"     vec2 ".concat(a," = transform_getPos(").concat(d,");\n     gl_Position = vec4(").concat(a,", 0, 1.);\n")};g=(0,t.combineInjects)([g,y])}v=T.join("\n")}return{vs:v,targetTextureType:m,inject:g,samplerTextureMap:p}}function i(e){var t,r,a=e.sourceTextureMap,c=e.targetTextureVarying,i=e.targetTexture,o={};for(var u in c&&(t=i.width,r=i.height,o["".concat(n).concat(c)]=[t,r]),a){var s=a[u];t=s.width,r=s.height,o["".concat(n).concat(u)]=[t,r]}return o}function o(e){return(0,t.getQualifierDetails)(e,["attribute","in"])}function u(e){var t="".concat(r).concat(e),a="".concat(n).concat(e);return{samplerName:t,sizeName:a,uniformDeclerations:"  uniform sampler2D ".concat(t,";\n  uniform vec2 ").concat(a,";")}}function s(e,r){var n=(0,t.getQualifierDetails)(e,["varying","out"]);return n&&n.name===r?n.type:null}function l(e,r){var n={},a=o(e);if(!a)return null;var c=a.type,i=a.name;if(i&&r[i]){var s="// ".concat(e," => Replaced by Transform with a sampler"),l=u(i),f=l.samplerName,m=l.sizeName,p=l.uniformDeclerations,v=(0,t.typeToChannelSuffix)(c),g="  ".concat(c," ").concat(i," = transform_getInput(").concat(f,", ").concat(m,").").concat(v,";\n");return n[f]=i,{updatedLine:s,inject:{"vs:#decl":p,"vs:#main-start":g},samplerTextureMap:n}}return null}
},{"@luma.gl/webgl":"KdJH","@luma.gl/shadertools":"Pzgo"}],"bMvh":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,t=n(require("@babel/runtime/helpers/esm/classCallCheck")),r=n(require("@babel/runtime/helpers/esm/createClass")),u=n(require("@babel/runtime/helpers/esm/defineProperty")),s=require("@luma.gl/webgl"),i=require("@luma.gl/shadertools"),a=require("./transform-shader-utils");function n(e){return e&&e.__esModule?e:{default:e}}var h=(e={},(0,u.default)(e,10241,9728),(0,u.default)(e,10240,9728),(0,u.default)(e,10242,33071),(0,u.default)(e,10243,33071),e),o="transform_output",f=function(){function e(r){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,t.default)(this,e),this.gl=r,this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(u),Object.seal(this)}return(0,r.default)(e,[{key:"updateModelProps",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._processVertexShader(e);return Object.assign({},e,t)}},{key:"getDrawOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.bindings[this.currentIndex],r=t.sourceBuffers,u=t.sourceTextures,s=t.framebuffer,i=t.targetTexture,n=Object.assign({},r,e.attributes),h=Object.assign({},e.uniforms),o=Object.assign({},e.parameters),f=e.discard;if(this.hasSourceTextures||this.hasTargetTexture){for(var l in n.transform_elementID=this.elementIDBuffer,this.samplerTextureMap){var x=this.samplerTextureMap[l];h[l]=u[x]}this._setSourceTextureParameters();var c=(0,a.getSizeUniforms)({sourceTextureMap:u,targetTextureVarying:this.targetTextureVarying,targetTexture:i});Object.assign(h,c)}return this.hasTargetTexture&&(f=!1,o.viewport=[0,0,s.width,s.height]),{attributes:n,framebuffer:s,uniforms:h,discard:f,parameters:o}}},{key:"swap",value:function(){return!!this._swapTexture&&(this.currentIndex=this._getNextIndex(),!0)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupTextures(e)}},{key:"getTargetTexture",value:function(){return this.bindings[this.currentIndex].targetTexture}},{key:"getData",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).packed,t=void 0!==e&&e,r=this.bindings[this.currentIndex].framebuffer,u=(0,s.readPixelsToArray)(r);if(!t)return u;for(var a=u.constructor,n=(0,i.typeToChannelCount)(this.targetTextureType),h=new a(u.length*n/4),o=0,f=0;f<u.length;f+=4)for(var l=0;l<n;l++)h[o++]=u[f+l];return h}},{key:"getFramebuffer",value:function(){return this.bindings[this.currentIndex].framebuffer}},{key:"delete",value:function(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}},{key:"_initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e._targetTextureVarying,r=e._swapTexture;this._swapTexture=r,this.targetTextureVarying=t,this.hasTargetTexture=t,this._setupTextures(e)}},{key:"_createTargetTexture",value:function(e){var t=e.sourceTextures,r=e.textureOrReference;if(r instanceof s.Texture2D)return r;var u=t[r];return u?(this._targetRefTexName=r,this._createNewTexture(u)):null}},{key:"_setupTextures",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.sourceBuffers,r=e._sourceTextures,u=void 0===r?{}:r,s=e._targetTexture,i=this._createTargetTexture({sourceTextures:u,textureOrReference:s});this.hasSourceTextures=this.hasSourceTextures||u&&Object.keys(u).length>0,this._updateBindings({sourceBuffers:t,sourceTextures:u,targetTexture:i}),"elementCount"in e&&this._updateElementIDBuffer(e.elementCount)}},{key:"_updateElementIDBuffer",value:function(e){if(!("number"!=typeof e||this.elementCount>=e)){var t=new Float32Array(e);t.forEach(function(e,t,r){r[t]=t}),this.elementIDBuffer?this.elementIDBuffer.setData({data:t}):this.elementIDBuffer=new s.Buffer(this.gl,{data:t,accessor:{size:1}}),this.elementCount=e}}},{key:"_updateBindings",value:function(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this._swapTexture){var t=this._swapTextures(this.bindings[this.currentIndex]),r=t.sourceTextures,u=t.targetTexture,s=this._getNextIndex();this.bindings[s]=this._updateBinding(this.bindings[s],{sourceTextures:r,targetTexture:u})}}},{key:"_updateBinding",value:function(e,t){var r=t.sourceBuffers,i=t.sourceTextures,a=t.targetTexture;if(e||(e={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(e.sourceTextures,i),Object.assign(e.sourceBuffers,r),a){e.targetTexture=a;var n=a.width,h=a.height,o=e.framebuffer;o?(o.update({attachments:(0,u.default)({},36064,a),resizeAttachments:!1}),o.resize({width:n,height:h})):e.framebuffer=new s.Framebuffer(this.gl,{id:"".concat(this.id||"transform","-framebuffer"),width:n,height:h,attachments:(0,u.default)({},36064,a)})}return e}},{key:"_setSourceTextureParameters",value:function(){var e=this.currentIndex,t=this.bindings[e].sourceTextures;for(var r in t)t[r].setParameters(h)}},{key:"_swapTextures",value:function(e){if(!this._swapTexture)return null;var t=Object.assign({},e.sourceTextures);return t[this._swapTexture]=e.targetTexture,{sourceTextures:t,targetTexture:e.sourceTextures[this._swapTexture]}}},{key:"_createNewTexture",value:function(e){var t,r=(0,s.cloneTextureFrom)(e,{parameters:(t={},(0,u.default)(t,10241,9728),(0,u.default)(t,10240,9728),(0,u.default)(t,10242,33071),(0,u.default)(t,10243,33071),t),pixelStore:(0,u.default)({},37440,!1)});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=r,r}},{key:"_getNextIndex",value:function(){return(this.currentIndex+1)%2}},{key:"_processVertexShader",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.bindings[this.currentIndex],r=t.sourceTextures,u=t.targetTexture,n=(0,a.updateForTextures)({vs:e.vs,sourceTextureMap:r,targetTextureVarying:this.targetTextureVarying,targetTexture:u}),h=n.vs,f=n.uniforms,l=n.targetTextureType,x=n.inject,c=n.samplerTextureMap,d=(0,i.combineInjects)([e.inject||{},x]);return this.targetTextureType=l,this.samplerTextureMap=c,{vs:h,fs:e._fs||(0,i.getPassthroughFS)({version:(0,s.getShaderVersion)(h),input:this.targetTextureVarying,inputType:l,output:o}),modules:this.hasSourceTextures||this.targetTextureVarying?[i._transform].concat(e.modules||[]):e.modules,uniforms:f,inject:d}}}]),e}();exports.default=f;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/defineProperty":"iDM3","@luma.gl/webgl":"KdJH","@luma.gl/shadertools":"Pzgo","./transform-shader-utils":"eVnT"}],"XhAc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("@babel/runtime/helpers/esm/classCallCheck")),r=i(require("@babel/runtime/helpers/esm/createClass")),t=require("@luma.gl/shadertools"),n=i(require("./buffer-transform")),a=i(require("./texture-transform")),u=require("@luma.gl/gltools"),o=require("@luma.gl/webgl"),l=i(require("../lib/model"));function i(e){return e&&e.__esModule?e:{default:e}}var s=function(){function i(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,e.default)(this,i),this.gl=r,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(t),Object.seal(this)}return(0,r.default)(i,null,[{key:"isSupported",value:function(e){return(0,u.isWebGL2)(e)}}]),(0,r.default)(i,[{key:"delete",value:function(){var e=this.model,r=this.bufferTransform,t=this.textureTransform;e&&e.delete(),r&&r.delete(),t&&t.delete()}},{key:"run",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.clearRenderTarget,t=void 0===r||r,n=this._updateDrawOptions(e);t&&n.framebuffer&&n.framebuffer.clear({color:!0}),this.model.transform(n)}},{key:"swap",value:function(){var e=!1,r=[this.bufferTransform,this.textureTransform].filter(Boolean),t=!0,n=!1,a=void 0;try{for(var u,l=r[Symbol.iterator]();!(t=(u=l.next()).done);t=!0){var i=u.value;e=e||i.swap()}}catch(s){n=!0,a=s}finally{try{t||null==l.return||l.return()}finally{if(n)throw a}}(0,o.assert)(e,"Nothing to swap")}},{key:"getBuffer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.bufferTransform&&this.bufferTransform.getBuffer(e)}},{key:"getData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=[this.bufferTransform,this.textureTransform].filter(Boolean),t=!0,n=!1,a=void 0;try{for(var u,o=r[Symbol.iterator]();!(t=(u=o.next()).done);t=!0){var l=u.value.getData(e);if(l)return l}}catch(i){n=!0,a=i}finally{try{t||null==o.return||o.return()}finally{if(n)throw a}}return null}},{key:"getFramebuffer",value:function(){return this.textureTransform&&this.textureTransform.getFramebuffer()}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"elementCount"in e&&this.model.setVertexCount(e.elementCount);var r=[this.bufferTransform,this.textureTransform].filter(Boolean),t=!0,n=!1,a=void 0;try{for(var u,o=r[Symbol.iterator]();!(t=(u=o.next()).done);t=!0){u.value.update(e)}}catch(l){n=!0,a=l}finally{try{t||null==o.return||o.return()}finally{if(n)throw a}}}},{key:"_initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=this.gl;this._buildResourceTransforms(r,e),e=this._updateModelProps(e),this.model=new l.default(r,Object.assign({},e,{fs:e.fs||(0,t.getPassthroughFS)({version:(0,o.getShaderVersion)(e.vs)}),id:e.id||"transform-model",drawMode:e.drawMode||0,vertexCount:e.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}},{key:"_updateModelProps",value:function(e){var r=Object.assign({},e),t=[this.bufferTransform,this.textureTransform].filter(Boolean),n=!0,a=!1,u=void 0;try{for(var o,l=t[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){r=o.value.updateModelProps(r)}}catch(i){a=!0,u=i}finally{try{n||null==l.return||l.return()}finally{if(a)throw u}}return r}},{key:"_buildResourceTransforms",value:function(e,r){f(r)&&(this.bufferTransform=new n.default(e,r)),d(r)&&(this.textureTransform=new a.default(e,r)),(0,o.assert)(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}},{key:"_updateDrawOptions",value:function(e){var r=Object.assign({},e),t=[this.bufferTransform,this.textureTransform].filter(Boolean),n=!0,a=!1,u=void 0;try{for(var o,l=t[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var i=o.value;r=Object.assign(r,i.getDrawOptions(r))}}catch(s){a=!0,u=s}finally{try{n||null==l.return||l.return()}finally{if(a)throw u}}return r}}]),i}();function f(e){return!((0,o.isObjectEmpty)(e.feedbackBuffers)&&(0,o.isObjectEmpty)(e.feedbackMap)&&!(e.varyings&&e.varyings.length>0))}function d(e){return!((0,o.isObjectEmpty)(e._sourceTextures)&&!e._targetTexture&&!e._targetTextureVarying)}exports.default=s;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@luma.gl/shadertools":"Pzgo","./buffer-transform":"VzDO","./texture-transform":"bMvh","@luma.gl/gltools":"lAom","@luma.gl/webgl":"KdJH","../lib/model":"EKUN"}],"zvF0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.DRAW_MODE=void 0;var e=s(require("@babel/runtime/helpers/esm/objectSpread")),t=s(require("@babel/runtime/helpers/esm/classCallCheck")),i=s(require("@babel/runtime/helpers/esm/createClass")),r=require("@luma.gl/webgl");function s(e){return e&&e.__esModule?e:{default:e}}var u={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};exports.DRAW_MODE=u;var n=function(){function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,t.default)(this,s);var i=e.id,n=void 0===i?(0,r.uid)("geometry"):i,a=e.drawMode,d=void 0===a?u.TRIANGLES:a,o=e.attributes,l=void 0===o?{}:o,c=e.indices,h=void 0===c?null:c,v=e.vertexCount,f=void 0===v?null:v;this.id=n,this.drawMode=0|d,this.attributes={},this.userData={},this._setAttributes(l,h),this.vertexCount=f||this._calculateVertexCount(this.attributes,this.indices)}return(0,i.default)(s,null,[{key:"DRAW_MODE",get:function(){return u}}]),(0,i.default)(s,[{key:"getVertexCount",value:function(){return this.vertexCount}},{key:"getAttributes",value:function(){return this.indices?(0,e.default)({indices:this.indices},this.attributes):this.attributes}},{key:"_print",value:function(e){return"Geometry ".concat(this.id," attribute ").concat(e)}},{key:"_setAttributes",value:function(e,t){for(var i in t&&(this.indices=ArrayBuffer.isView(t)?{value:t,size:1}:t),e){var s=e[i];s=ArrayBuffer.isView(s)?{value:s}:s,(0,r.assert)(ArrayBuffer.isView(s.value),"".concat(this._print(i),": must be typed array or object with value as typed array")),"POSITION"!==i&&"positions"!==i||s.size||(s.size=3),"indices"===i?((0,r.assert)(!this.indices),this.indices=s):this.attributes[i]=s}return this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}},{key:"_calculateVertexCount",value:function(e,t){if(t)return t.value.length;var i=1/0;for(var s in e){var u=e[s],n=u.value,a=u.size;!u.constant&&n&&a>=1&&(i=Math.min(i,n.length/a))}return(0,r.assert)(Number.isFinite(i)),i}},{key:"mode",get:function(){return this.drawMode}}]),s}();exports.default=n;
},{"@babel/runtime/helpers/esm/objectSpread":"EV9w","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@luma.gl/webgl":"KdJH"}],"BsEj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=l(require("@babel/runtime/helpers/esm/objectSpread")),r=l(require("@babel/runtime/helpers/esm/classCallCheck")),t=l(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),a=l(require("@babel/runtime/helpers/esm/getPrototypeOf")),i=l(require("@babel/runtime/helpers/esm/inherits")),u=l(require("../geometry/geometry")),o=require("@luma.gl/webgl");function l(e){return e&&e.__esModule?e:{default:e}}var s={x:[2,0,1],y:[0,1,2],z:[1,2,0]},d=function(u){function l(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.default)(this,l);var u=i.id,s=void 0===u?(0,o.uid)("truncated-code-geometry"):u,d=n(i),v=d.indices,b=d.attributes;return(0,t.default)(this,(0,a.default)(l).call(this,(0,e.default)({},i,{id:s,indices:v,attributes:(0,e.default)({},b,i.attributes)})))}return(0,i.default)(l,u),l}(u.default);function n(e){for(var r=e.bottomRadius,t=void 0===r?0:r,a=e.topRadius,i=void 0===a?0:a,u=e.height,o=void 0===u?1:u,l=e.nradial,d=void 0===l?10:l,n=e.nvertical,v=void 0===n?10:n,b=e.verticalAxis,f=void 0===b?"y":b,c=e.topCap,h=void 0!==c&&c,m=e.bottomCap,p=void 0!==m&&m,y=(h?2:0)+(p?2:0),g=(d+1)*(v+1+y),q=Math.atan2(t-i,o),M=Math.sin,O=Math.cos,A=Math.PI,C=O(q),w=M(q),x=h?-2:0,R=v+(p?2:0),_=d+1,z=new Uint16Array(d*(v+y)*6),P=s[f],F=new Float32Array(3*g),I=new Float32Array(3*g),j=new Float32Array(2*g),N=0,S=0,T=x;T<=R;T++){var k=T/v,D=o*k,E=void 0;T<0?(D=0,k=1,E=t):T>v?(D=o,k=1,E=i):E=t+T/v*(i-t),-2!==T&&T!==v+2||(E=0,k=0),D-=o/2;for(var L=0;L<_;L++){var U=M(L*A*2/d),X=O(L*A*2/d);F[N+P[0]]=U*E,F[N+P[1]]=D,F[N+P[2]]=X*E,I[N+P[0]]=T<0||T>v?0:U*C,I[N+P[1]]=T<0?-1:T>v?1:w,I[N+P[2]]=T<0||T>v?0:X*C,j[S+0]=L/d,j[S+1]=k,S+=2,N+=3}}for(var B=0;B<v+y;B++)for(var G=0;G<d;G++){var H=6*(B*d+G);z[H+0]=_*(B+0)+0+G,z[H+1]=_*(B+0)+1+G,z[H+2]=_*(B+1)+1+G,z[H+3]=_*(B+0)+0+G,z[H+4]=_*(B+1)+1+G,z[H+5]=_*(B+1)+0+G}return{indices:z,attributes:{POSITION:{size:3,value:F},NORMAL:{size:3,value:I},TEXCOORD_0:{size:2,value:j}}}}exports.default=d;
},{"@babel/runtime/helpers/esm/objectSpread":"EV9w","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/inherits":"RnSb","../geometry/geometry":"zvF0","@luma.gl/webgl":"KdJH"}],"wztz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("@babel/runtime/helpers/esm/objectSpread")),r=a(require("@babel/runtime/helpers/esm/classCallCheck")),t=a(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),u=a(require("@babel/runtime/helpers/esm/getPrototypeOf")),i=a(require("@babel/runtime/helpers/esm/inherits")),l=a(require("./truncated-cone-geometry")),o=require("@luma.gl/webgl");function a(e){return e&&e.__esModule?e:{default:e}}var s=function(l){function a(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.default)(this,a);var l=i.id,s=void 0===l?(0,o.uid)("cone-geometry"):l,d=i.radius,n=void 0===d?1:d,p=i.cap,b=void 0===p||p;return(0,t.default)(this,(0,u.default)(a).call(this,(0,e.default)({},i,{id:s,topRadius:0,topCap:Boolean(b),bottomCap:Boolean(b),bottomRadius:n})))}return(0,i.default)(a,l),a}(l.default);exports.default=s;
},{"@babel/runtime/helpers/esm/objectSpread":"EV9w","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/inherits":"RnSb","./truncated-cone-geometry":"BsEj","@luma.gl/webgl":"KdJH"}],"bmDE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("@babel/runtime/helpers/esm/objectSpread")),r=s(require("@babel/runtime/helpers/esm/classCallCheck")),t=s(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),a=s(require("@babel/runtime/helpers/esm/getPrototypeOf")),l=s(require("@babel/runtime/helpers/esm/inherits")),u=s(require("../geometry/geometry")),i=require("@luma.gl/webgl");function s(e){return e&&e.__esModule?e:{default:e}}var n=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),o=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),d=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),b=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]),f={POSITION:{size:3,value:new Float32Array(o)},NORMAL:{size:3,value:new Float32Array(d)},TEXCOORD_0:{size:2,value:new Float32Array(b)}},m=function(u){function s(){var l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.default)(this,s);var u=l.id,o=void 0===u?(0,i.uid)("cube-geometry"):u;return(0,t.default)(this,(0,a.default)(s).call(this,(0,e.default)({},l,{id:o,indices:{size:1,value:new Uint16Array(n)},attributes:(0,e.default)({},f,l.attributes)})))}return(0,l.default)(s,u),s}(u.default);exports.default=m;
},{"@babel/runtime/helpers/esm/objectSpread":"EV9w","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/inherits":"RnSb","../geometry/geometry":"zvF0","@luma.gl/webgl":"KdJH"}],"fC4C":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("@babel/runtime/helpers/esm/objectSpread")),r=a(require("@babel/runtime/helpers/esm/classCallCheck")),t=a(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),u=a(require("@babel/runtime/helpers/esm/getPrototypeOf")),i=a(require("@babel/runtime/helpers/esm/inherits")),l=a(require("./truncated-cone-geometry")),s=require("@luma.gl/webgl");function a(e){return e&&e.__esModule?e:{default:e}}var d=function(l){function a(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.default)(this,a);var l=i.id,d=void 0===l?(0,s.uid)("cylinder-geometry"):l,o=i.radius,n=void 0===o?1:o;return(0,t.default)(this,(0,u.default)(a).call(this,(0,e.default)({},i,{id:d,bottomRadius:n,topRadius:n})))}return(0,i.default)(a,l),a}(l.default);exports.default=d;
},{"@babel/runtime/helpers/esm/objectSpread":"EV9w","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/inherits":"RnSb","./truncated-cone-geometry":"BsEj","@luma.gl/webgl":"KdJH"}],"IaOA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=l(require("@babel/runtime/helpers/esm/objectSpread")),t=l(require("@babel/runtime/helpers/esm/classCallCheck")),r=l(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),a=l(require("@babel/runtime/helpers/esm/getPrototypeOf")),u=l(require("@babel/runtime/helpers/esm/inherits")),s=require("math.gl"),i=l(require("../geometry/geometry")),n=require("@luma.gl/webgl");function l(e){return e&&e.__esModule?e:{default:e}}var o=[-1,0,0,0,1,0,0,0,-1,0,0,1,0,-1,0,1,0,0],h=[3,4,5,3,5,1,3,1,0,3,0,4,4,0,2,4,2,5,2,0,1,5,2,1],c=function(s){function i(){var u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,t.default)(this,i);var s=u.id,l=void 0===s?(0,n.uid)("ico-sphere-geometry"):s,o=d(u),h=o.indices,c=o.attributes;return(0,r.default)(this,(0,a.default)(i).call(this,(0,e.default)({},u,{id:l,indices:h,attributes:(0,e.default)({},c,u.attributes)})))}return(0,u.default)(i,s),i}(i.default);function d(e){var t=e.iterations,r=void 0===t?0:t,a=Math.PI,u=2*a,i=[].concat(o),n=[].concat(h);i.push(),n.push();for(var l,c=(l={},function(e,t){var r=(e*=3)>(t*=3)?e:t,a="".concat(e<t?e:t,"|").concat(r);if(a in l)return l[a];var u=i[e],s=i[e+1],n=i[e+2],o=(u+i[t])/2,h=(s+i[t+1])/2,c=(n+i[t+2])/2,d=Math.sqrt(o*o+h*h+c*c);return o/=d,h/=d,c/=d,i.push(o,h,c),l[a]=i.length/3-1}),d=0;d<r;d++){for(var p=[],v=0;v<n.length;v+=3){var f=c(n[v+0],n[v+1]),b=c(n[v+1],n[v+2]),g=c(n[v+2],n[v+0]);p.push(g,n[v+0],f,f,n[v+1],b,b,n[v+2],g,f,b,g)}n=p}for(var m=new Array(i.length),y=new Array(i.length/3*2),M=n.length-3;M>=0;M-=3){var q=n[M+0],z=n[M+1],w=n[M+2],x=3*q,A=3*z,O=3*w,_=2*q,C=2*z,P=2*w,F=i[x+0],I=i[x+1],R=i[x+2],j=Math.acos(R/Math.sqrt(F*F+I*I+R*R))/a,N=1-(Math.atan2(I,F)+a)/u,S=i[A+0],T=i[A+1],k=i[A+2],D=Math.acos(k/Math.sqrt(S*S+T*T+k*k))/a,E=1-(Math.atan2(T,S)+a)/u,L=i[O+0],U=i[O+1],V=i[O+2],X=Math.acos(V/Math.sqrt(L*L+U*U+V*V))/a,B=1-(Math.atan2(U,L)+a)/u,G=[L-S,U-T,V-k],H=[F-S,I-T,R-k],J=new s.Vector3(G).cross(H).normalize(),K=void 0;(0===N||0===E||0===B)&&(0===N||N>.5)&&(0===E||E>.5)&&(0===B||B>.5)&&(i.push(i[x+0],i[x+1],i[x+2]),K=i.length/3-1,n.push(K),y[2*K+0]=1,y[2*K+1]=j,m[3*K+0]=J.x,m[3*K+1]=J.y,m[3*K+2]=J.z,i.push(i[A+0],i[A+1],i[A+2]),K=i.length/3-1,n.push(K),y[2*K+0]=1,y[2*K+1]=D,m[3*K+0]=J.x,m[3*K+1]=J.y,m[3*K+2]=J.z,i.push(i[O+0],i[O+1],i[O+2]),K=i.length/3-1,n.push(K),y[2*K+0]=1,y[2*K+1]=X,m[3*K+0]=J.x,m[3*K+1]=J.y,m[3*K+2]=J.z),m[x+0]=m[A+0]=m[O+0]=J.x,m[x+1]=m[A+1]=m[O+1]=J.y,m[x+2]=m[A+2]=m[O+2]=J.z,y[_+0]=N,y[_+1]=j,y[C+0]=E,y[C+1]=D,y[P+0]=B,y[P+1]=X}return{indices:{size:1,value:new Uint16Array(n)},attributes:{POSITION:{size:3,value:new Float32Array(i)},NORMAL:{size:3,value:new Float32Array(m)},TEXCOORD_0:{size:2,value:new Float32Array(y)}}}}exports.default=c;
},{"@babel/runtime/helpers/esm/objectSpread":"EV9w","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/inherits":"RnSb","math.gl":"xAaq","../geometry/geometry":"zvF0","@luma.gl/webgl":"KdJH"}],"CGNT":[function(require,module,exports) {
"use strict";function e(e){var r=e.indices,t=e.attributes;if(!r)return e;var a=r.value.length,n={};for(var s in t){var u=t[s],i=u.constant,o=u.value,v=u.size;if(!i&&v){for(var c=new o.constructor(a*v),f=0;f<a;++f)for(var l=r.value[f],d=0;d<v;d++)c[f*v+d]=o[l*v+d];n[s]={size:v,value:c}}}return{attributes:Object.assign({},t,n)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.unpackIndexedGeometry=e;
},{}],"oQ0j":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("@babel/runtime/helpers/esm/objectSpread")),r=o(require("@babel/runtime/helpers/esm/classCallCheck")),t=o(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),a=o(require("@babel/runtime/helpers/esm/getPrototypeOf")),i=o(require("@babel/runtime/helpers/esm/inherits")),u=o(require("../geometry/geometry")),l=require("../geometry/geometry-utils"),n=require("@luma.gl/webgl");function o(e){return e&&e.__esModule?e:{default:e}}var s=function(u){function l(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.default)(this,l);var u=i.id,o=void 0===u?(0,n.uid)("plane-geometry"):u,s=d(i),c=s.indices,f=s.attributes;return(0,t.default)(this,(0,a.default)(l).call(this,(0,e.default)({},i,{id:o,indices:c,attributes:(0,e.default)({},f,i.attributes)})))}return(0,i.default)(l,u),l}(u.default);function d(e){var r=e.type,t=void 0===r?"x,y":r,a=e.offset,i=void 0===a?0:a,u=e.flipCull,n=void 0!==u&&u,o=e.unpack,s=void 0!==o&&o,d=t.split(","),c=e["".concat(d[0],"len")]||1,f=e["".concat(d[1],"len")]||1,v=e["n".concat(d[0])]||1,b=e["n".concat(d[1])]||1,p=(v+1)*(b+1),m=new Float32Array(3*p),y=new Float32Array(3*p),h=new Float32Array(2*p);n&&(c=-c);for(var g=0,w=0,q=0;q<=b;q++)for(var k=0;k<=v;k++){var x=k/v,O=q/b;switch(h[g+0]=n?1-x:x,h[g+1]=O,t){case"x,y":m[w+0]=c*x-.5*c,m[w+1]=f*O-.5*f,m[w+2]=i,y[w+0]=0,y[w+1]=0,y[w+2]=n?1:-1;break;case"x,z":m[w+0]=c*x-.5*c,m[w+1]=i,m[w+2]=f*O-.5*f,y[w+0]=0,y[w+1]=n?1:-1,y[w+2]=0;break;case"y,z":m[w+0]=i,m[w+1]=c*x-.5*c,m[w+2]=f*O-.5*f,y[w+0]=n?1:-1,y[w+1]=0,y[w+2]=0;break;default:throw new Error("PlaneGeometry: unknown type")}g+=2,w+=3}for(var z=v+1,A=new Uint16Array(v*b*6),C=0;C<b;C++)for(var _=0;_<v;_++){var P=6*(C*v+_);A[P+0]=(C+0)*z+_,A[P+1]=(C+1)*z+_,A[P+2]=(C+0)*z+_+1,A[P+3]=(C+1)*z+_,A[P+4]=(C+1)*z+_+1,A[P+5]=(C+0)*z+_+1}var F={indices:{size:1,value:A},attributes:{POSITION:{size:3,value:m},NORMAL:{size:3,value:y},TEXCOORD_0:{size:2,value:h}}};return s?(0,l.unpackIndexedGeometry)(F):F}exports.default=s;
},{"@babel/runtime/helpers/esm/objectSpread":"EV9w","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/inherits":"RnSb","../geometry/geometry":"zvF0","../geometry/geometry-utils":"CGNT","@luma.gl/webgl":"KdJH"}],"clhU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=l(require("@babel/runtime/helpers/esm/objectSpread")),r=l(require("@babel/runtime/helpers/esm/classCallCheck")),t=l(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),a=l(require("@babel/runtime/helpers/esm/getPrototypeOf")),i=l(require("@babel/runtime/helpers/esm/inherits")),u=l(require("../geometry/geometry")),s=require("@luma.gl/webgl");function l(e){return e&&e.__esModule?e:{default:e}}var n=function(u){function l(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.default)(this,l);var u=i.id,n=void 0===u?(0,s.uid)("sphere-geometry"):u,d=o(i),f=d.indices,v=d.attributes;return(0,t.default)(this,(0,a.default)(l).call(this,(0,e.default)({},i,{id:n,indices:f,attributes:(0,e.default)({},v,i.attributes)})))}return(0,i.default)(l,u),l}(u.default);function o(e){var r=e.nlat,t=void 0===r?10:r,a=e.nlong,i=void 0===a?10:a,u=e.radius,s=void 0===u?1:u,l=Math.PI-0,n=2*Math.PI-0,o=(t+1)*(i+1);if("number"==typeof s){var d=s;s=function(e,r,t,a,i){return d}}for(var f=new Float32Array(3*o),v=new Float32Array(3*o),b=new Float32Array(2*o),h=new(o>65535?Uint32Array:Uint16Array)(t*i*6),c=0;c<=t;c++)for(var m=0;m<=i;m++){var p=m/i,y=c/t,M=m+c*(i+1),g=2*M,q=3*M,O=n*p,A=l*y,w=Math.sin(O),P=Math.cos(O),_=Math.sin(A),z=P*_,C=Math.cos(A),I=w*_,x=s(z,C,I,p,y);f[q+0]=x*z,f[q+1]=x*C,f[q+2]=x*I,v[q+0]=z,v[q+1]=C,v[q+2]=I,b[g+0]=p,b[g+1]=1-y}for(var F=i+1,R=0;R<i;R++)for(var j=0;j<t;j++){var N=6*(R*t+j);h[N+0]=j*F+R,h[N+1]=j*F+R+1,h[N+2]=(j+1)*F+R,h[N+3]=(j+1)*F+R,h[N+4]=j*F+R+1,h[N+5]=(j+1)*F+R+1}return{indices:{size:1,value:h},attributes:{POSITION:{size:3,value:f},NORMAL:{size:3,value:v},TEXCOORD_0:{size:2,value:b}}}}exports.default=n;
},{"@babel/runtime/helpers/esm/objectSpread":"EV9w","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/inherits":"RnSb","../geometry/geometry":"zvF0","@luma.gl/webgl":"KdJH"}],"r0ew":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Timeline=void 0;var e=n(require("@babel/runtime/helpers/esm/slicedToArray")),t=n(require("@babel/runtime/helpers/esm/classCallCheck")),i=n(require("@babel/runtime/helpers/esm/createClass"));function n(e){return e&&e.__esModule?e:{default:e}}var a=1,r=1,l=function(){function n(){(0,t.default)(this,n),this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}return(0,i.default)(n,[{key:"addChannel",value:function(e){var t=e.delay,i=void 0===t?0:t,n=e.duration,r=void 0===n?Number.POSITIVE_INFINITY:n,l=e.rate,s=void 0===l?1:l,u=e.repeat,h=a++,o={time:0,delay:i,duration:r,rate:s,repeat:void 0===u?1:u};return this._setChannelTime(o,this.time),this.channels.set(h,o),h}},{key:"removeChannel",value:function(t){this.channels.delete(t);var i=!0,n=!1,a=void 0;try{for(var r,l=this.animations[Symbol.iterator]();!(i=(r=l.next()).done);i=!0){var s=(0,e.default)(r.value,2),u=s[0];s[1].channel===t&&this.detachAnimation(u)}}catch(h){n=!0,a=h}finally{try{i||null==l.return||l.return()}finally{if(n)throw a}}}},{key:"isFinished",value:function(e){var t=this.channels.get(e);return void 0!==t&&this.time>=t.delay+t.duration*t.repeat}},{key:"getTime",value:function(e){if(void 0===e)return this.time;var t=this.channels.get(e);return void 0===t?-1:t.time}},{key:"setTime",value:function(e){this.time=Math.max(0,e);var t=this.channels.values(),i=!0,n=!1,a=void 0;try{for(var r,l=t[Symbol.iterator]();!(i=(r=l.next()).done);i=!0){var s=r.value;this._setChannelTime(s,this.time)}}catch(T){n=!0,a=T}finally{try{i||null==l.return||l.return()}finally{if(n)throw a}}var u=this.animations.values(),h=!0,o=!1,m=void 0;try{for(var v,d=u[Symbol.iterator]();!(h=(v=d.next()).done);h=!0){var c=v.value,y=c.animation,f=c.channel;y.setTime(this.getTime(f))}}catch(T){o=!0,m=T}finally{try{h||null==d.return||d.return()}finally{if(o)throw m}}}},{key:"play",value:function(){this.playing=!0}},{key:"pause",value:function(){this.playing=!1,this.lastEngineTime=-1}},{key:"reset",value:function(){this.setTime(0)}},{key:"attachAnimation",value:function(e,t){var i=r++;return this.animations.set(i,{animation:e,channel:t}),e.setTime(this.getTime(t)),i}},{key:"detachAnimation",value:function(e){this.animations.delete(e)}},{key:"update",value:function(e){this.playing&&(-1===this.lastEngineTime&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}},{key:"_setChannelTime",value:function(e,t){var i=t-e.delay;i>=e.duration*e.repeat?e.time=e.duration*e.rate:(e.time=Math.max(0,i)%e.duration,e.time*=e.rate)}}]),n}();exports.Timeline=l;
},{"@babel/runtime/helpers/esm/slicedToArray":"TBeo","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph"}],"dLHe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.KeyFrames=void 0;var e=s(require("@babel/runtime/helpers/esm/classCallCheck")),t=s(require("@babel/runtime/helpers/esm/createClass"));function s(e){return e&&e.__esModule?e:{default:e}}var i=function(){function s(t){(0,e.default)(this,s),this._lastTime=-1,this.startIndex=-1,this.endIndex=-1,this.factor=0,this.times=[],this.values=[],this.setKeyFrames(t),this.setTime(0)}return(0,t.default)(s,[{key:"setKeyFrames",value:function(e){var t=e.length;this.times.length=t,this.values.length=t;for(var s=0;s<t;++s)this.times[s]=e[s][0],this.values[s]=e[s][1];this._calculateKeys(this._lastTime)}},{key:"setTime",value:function(e){(e=Math.max(0,e))!==this._lastTime&&(this._calculateKeys(e),this._lastTime=e)}},{key:"getStartTime",value:function(){return this.times[this.startIndex]}},{key:"getEndTime",value:function(){return this.times[this.endIndex]}},{key:"getStartData",value:function(){return this.values[this.startIndex]}},{key:"getEndData",value:function(){return this.values[this.endIndex]}},{key:"_calculateKeys",value:function(e){var t=0,s=this.times.length;for(t=0;t<s-2&&!(this.times[t+1]>e);++t);this.startIndex=t,this.endIndex=t+1;var i=this.times[this.startIndex],a=this.times[this.endIndex];this.factor=Math.min(Math.max(0,(e-i)/(a-i)),1)}}]),s}();exports.KeyFrames=i;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph"}],"KnxK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("@babel/runtime/helpers/esm/classCallCheck")),t=n(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),r=n(require("@babel/runtime/helpers/esm/getPrototypeOf")),i=n(require("@babel/runtime/helpers/esm/inherits")),a=n(require("../lib/model")),o=n(require("../geometry/geometry"));function n(e){return e&&e.__esModule?e:{default:e}}var u="attribute vec2 aClipSpacePosition;\nattribute vec2 aTexCoord;\nattribute vec2 aCoordinate;\n\nvarying vec2 position;\nvarying vec2 coordinate;\nvarying vec2 uv;\n\nvoid main(void) {\n  gl_Position = vec4(aClipSpacePosition, 0., 1.);\n  position = aClipSpacePosition;\n  coordinate = aCoordinate;\n  uv = aTexCoord;\n}\n",l=[-1,-1,1,-1,-1,1,1,1],s=function(a){function n(i,a){var s;(0,e.default)(this,n);var d=l.map(function(e){return-1===e?0:e});return(s=(0,t.default)(this,(0,r.default)(n).call(this,i,Object.assign({},a,{vs:u,geometry:new o.default({drawMode:5,vertexCount:4,attributes:{aClipSpacePosition:{size:2,value:new Float32Array(l)},aTexCoord:{size:2,value:new Float32Array(d)},aCoordinate:{size:2,value:new Float32Array(d)}}})})))).setVertexCount(4),s}return(0,i.default)(n,a),n}(a.default);exports.default=s;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/inherits":"RnSb","../lib/model":"EKUN","../geometry/geometry":"zvF0"}],"YENE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"AnimationLoop",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"Model",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"ProgramManager",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"Transform",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"Geometry",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"ConeGeometry",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"CubeGeometry",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"CylinderGeometry",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"IcoSphereGeometry",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(exports,"PlaneGeometry",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"SphereGeometry",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"TruncatedConeGeometry",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(exports,"Timeline",{enumerable:!0,get:function(){return p.Timeline}}),Object.defineProperty(exports,"KeyFrames",{enumerable:!0,get:function(){return d.KeyFrames}}),Object.defineProperty(exports,"ClipSpace",{enumerable:!0,get:function(){return y.default}});var e=s(require("./lib/animation-loop")),r=s(require("./lib/model")),t=s(require("./lib/program-manager")),n=s(require("./transform/transform")),o=s(require("./geometry/geometry")),u=s(require("./geometries/cone-geometry")),i=s(require("./geometries/cube-geometry")),a=s(require("./geometries/cylinder-geometry")),m=s(require("./geometries/ico-sphere-geometry")),f=s(require("./geometries/plane-geometry")),l=s(require("./geometries/sphere-geometry")),c=s(require("./geometries/truncated-cone-geometry")),p=require("./animation/timeline"),d=require("./animation/key-frames"),y=s(require("./utils/clip-space"));function s(e){return e&&e.__esModule?e:{default:e}}
},{"./lib/animation-loop":"HQLj","./lib/model":"EKUN","./lib/program-manager":"BP7a","./transform/transform":"XhAc","./geometry/geometry":"zvF0","./geometries/cone-geometry":"wztz","./geometries/cube-geometry":"bmDE","./geometries/cylinder-geometry":"fC4C","./geometries/ico-sphere-geometry":"IaOA","./geometries/plane-geometry":"oQ0j","./geometries/sphere-geometry":"clhU","./geometries/truncated-cone-geometry":"BsEj","./animation/timeline":"r0ew","./animation/key-frames":"dLHe","./utils/clip-space":"KnxK"}],"prL8":[function(require,module,exports) {
"use strict";exports.byteLength=u,exports.toByteArray=i,exports.fromByteArray=d;for(var r=[],t=[],e="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,a=n.length;o<a;++o)r[o]=n[o],t[n.charCodeAt(o)]=o;function h(r){var t=r.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=r.indexOf("=");return-1===e&&(e=t),[e,e===t?0:4-e%4]}function u(r){var t=h(r),e=t[0],n=t[1];return 3*(e+n)/4-n}function c(r,t,e){return 3*(t+e)/4-e}function i(r){var n,o,a=h(r),u=a[0],i=a[1],f=new e(c(r,u,i)),A=0,d=i>0?u-4:u;for(o=0;o<d;o+=4)n=t[r.charCodeAt(o)]<<18|t[r.charCodeAt(o+1)]<<12|t[r.charCodeAt(o+2)]<<6|t[r.charCodeAt(o+3)],f[A++]=n>>16&255,f[A++]=n>>8&255,f[A++]=255&n;return 2===i&&(n=t[r.charCodeAt(o)]<<2|t[r.charCodeAt(o+1)]>>4,f[A++]=255&n),1===i&&(n=t[r.charCodeAt(o)]<<10|t[r.charCodeAt(o+1)]<<4|t[r.charCodeAt(o+2)]>>2,f[A++]=n>>8&255,f[A++]=255&n),f}function f(t){return r[t>>18&63]+r[t>>12&63]+r[t>>6&63]+r[63&t]}function A(r,t,e){for(var n,o=[],a=t;a<e;a+=3)n=(r[a]<<16&16711680)+(r[a+1]<<8&65280)+(255&r[a+2]),o.push(f(n));return o.join("")}function d(t){for(var e,n=t.length,o=n%3,a=[],h=0,u=n-o;h<u;h+=16383)a.push(A(t,h,h+16383>u?u:h+16383));return 1===o?(e=t[n-1],a.push(r[e>>2]+r[e<<4&63]+"==")):2===o&&(e=(t[n-2]<<8)+t[n-1],a.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),a.join("")}t["-".charCodeAt(0)]=62,t["_".charCodeAt(0)]=63;
},{}],"iism":[function(require,module,exports) {
exports.read=function(a,o,t,r,h){var M,p,w=8*h-r-1,f=(1<<w)-1,e=f>>1,i=-7,N=t?h-1:0,n=t?-1:1,s=a[o+N];for(N+=n,M=s&(1<<-i)-1,s>>=-i,i+=w;i>0;M=256*M+a[o+N],N+=n,i-=8);for(p=M&(1<<-i)-1,M>>=-i,i+=r;i>0;p=256*p+a[o+N],N+=n,i-=8);if(0===M)M=1-e;else{if(M===f)return p?NaN:1/0*(s?-1:1);p+=Math.pow(2,r),M-=e}return(s?-1:1)*p*Math.pow(2,M-r)},exports.write=function(a,o,t,r,h,M){var p,w,f,e=8*M-h-1,i=(1<<e)-1,N=i>>1,n=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,s=r?0:M-1,u=r?1:-1,l=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(w=isNaN(o)?1:0,p=i):(p=Math.floor(Math.log(o)/Math.LN2),o*(f=Math.pow(2,-p))<1&&(p--,f*=2),(o+=p+N>=1?n/f:n*Math.pow(2,1-N))*f>=2&&(p++,f/=2),p+N>=i?(w=0,p=i):p+N>=1?(w=(o*f-1)*Math.pow(2,h),p+=N):(w=o*Math.pow(2,N-1)*Math.pow(2,h),p=0));h>=8;a[t+s]=255&w,s+=u,w/=256,h-=8);for(p=p<<h|w,e+=h;e>0;a[t+s]=255&p,s+=u,p/=256,e-=8);a[t+s-u]|=128*l};
},{}],"BOve":[function(require,module,exports) {
var r={}.toString;module.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)};
},{}],"XyCw":[function(require,module,exports) {

var global = arguments[3];
var t=arguments[3],r=require("base64-js"),e=require("ieee754"),n=require("isarray");function i(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(r){return!1}}function o(){return f.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(t,r){if(o()<r)throw new RangeError("Invalid typed array length");return f.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(r)).__proto__=f.prototype:(null===t&&(t=new f(r)),t.length=r),t}function f(t,r,e){if(!(f.TYPED_ARRAY_SUPPORT||this instanceof f))return new f(t,r,e);if("number"==typeof t){if("string"==typeof r)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return s(this,t,r,e)}function s(t,r,e,n){if("number"==typeof r)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&r instanceof ArrayBuffer?g(t,r,e,n):"string"==typeof r?l(t,r,e):y(t,r)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function a(t,r,e,n){return h(r),r<=0?u(t,r):void 0!==e?"string"==typeof n?u(t,r).fill(e,n):u(t,r).fill(e):u(t,r)}function c(t,r){if(h(r),t=u(t,r<0?0:0|w(r)),!f.TYPED_ARRAY_SUPPORT)for(var e=0;e<r;++e)t[e]=0;return t}function l(t,r,e){if("string"==typeof e&&""!==e||(e="utf8"),!f.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var n=0|v(r,e),i=(t=u(t,n)).write(r,e);return i!==n&&(t=t.slice(0,i)),t}function p(t,r){var e=r.length<0?0:0|w(r.length);t=u(t,e);for(var n=0;n<e;n+=1)t[n]=255&r[n];return t}function g(t,r,e,n){if(r.byteLength,e<0||r.byteLength<e)throw new RangeError("'offset' is out of bounds");if(r.byteLength<e+(n||0))throw new RangeError("'length' is out of bounds");return r=void 0===e&&void 0===n?new Uint8Array(r):void 0===n?new Uint8Array(r,e):new Uint8Array(r,e,n),f.TYPED_ARRAY_SUPPORT?(t=r).__proto__=f.prototype:t=p(t,r),t}function y(t,r){if(f.isBuffer(r)){var e=0|w(r.length);return 0===(t=u(t,e)).length?t:(r.copy(t,0,0,e),t)}if(r){if("undefined"!=typeof ArrayBuffer&&r.buffer instanceof ArrayBuffer||"length"in r)return"number"!=typeof r.length||W(r.length)?u(t,0):p(t,r);if("Buffer"===r.type&&n(r.data))return p(t,r.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function w(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function d(t){return+t!=t&&(t=0),f.alloc(+t)}function v(t,r){if(f.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var e=t.length;if(0===e)return 0;for(var n=!1;;)switch(r){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":case void 0:return $(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*e;case"hex":return e>>>1;case"base64":return K(t).length;default:if(n)return $(t).length;r=(""+r).toLowerCase(),n=!0}}function E(t,r,e){var n=!1;if((void 0===r||r<0)&&(r=0),r>this.length)return"";if((void 0===e||e>this.length)&&(e=this.length),e<=0)return"";if((e>>>=0)<=(r>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return x(this,r,e);case"utf8":case"utf-8":return Y(this,r,e);case"ascii":return L(this,r,e);case"latin1":case"binary":return D(this,r,e);case"base64":return S(this,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,r,e);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function b(t,r,e){var n=t[r];t[r]=t[e],t[e]=n}function R(t,r,e,n,i){if(0===t.length)return-1;if("string"==typeof e?(n=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,isNaN(e)&&(e=i?0:t.length-1),e<0&&(e=t.length+e),e>=t.length){if(i)return-1;e=t.length-1}else if(e<0){if(!i)return-1;e=0}if("string"==typeof r&&(r=f.from(r,n)),f.isBuffer(r))return 0===r.length?-1:_(t,r,e,n,i);if("number"==typeof r)return r&=255,f.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,r,e):Uint8Array.prototype.lastIndexOf.call(t,r,e):_(t,[r],e,n,i);throw new TypeError("val must be string, number or Buffer")}function _(t,r,e,n,i){var o,u=1,f=t.length,s=r.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||r.length<2)return-1;u=2,f/=2,s/=2,e/=2}function h(t,r){return 1===u?t[r]:t.readUInt16BE(r*u)}if(i){var a=-1;for(o=e;o<f;o++)if(h(t,o)===h(r,-1===a?0:o-a)){if(-1===a&&(a=o),o-a+1===s)return a*u}else-1!==a&&(o-=o-a),a=-1}else for(e+s>f&&(e=f-s),o=e;o>=0;o--){for(var c=!0,l=0;l<s;l++)if(h(t,o+l)!==h(r,l)){c=!1;break}if(c)return o}return-1}function A(t,r,e,n){e=Number(e)||0;var i=t.length-e;n?(n=Number(n))>i&&(n=i):n=i;var o=r.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var u=0;u<n;++u){var f=parseInt(r.substr(2*u,2),16);if(isNaN(f))return u;t[e+u]=f}return u}function m(t,r,e,n){return Q($(r,t.length-e),t,e,n)}function P(t,r,e,n){return Q(G(r),t,e,n)}function T(t,r,e,n){return P(t,r,e,n)}function B(t,r,e,n){return Q(K(r),t,e,n)}function U(t,r,e,n){return Q(H(r,t.length-e),t,e,n)}function S(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function Y(t,r,e){e=Math.min(t.length,e);for(var n=[],i=r;i<e;){var o,u,f,s,h=t[i],a=null,c=h>239?4:h>223?3:h>191?2:1;if(i+c<=e)switch(c){case 1:h<128&&(a=h);break;case 2:128==(192&(o=t[i+1]))&&(s=(31&h)<<6|63&o)>127&&(a=s);break;case 3:o=t[i+1],u=t[i+2],128==(192&o)&&128==(192&u)&&(s=(15&h)<<12|(63&o)<<6|63&u)>2047&&(s<55296||s>57343)&&(a=s);break;case 4:o=t[i+1],u=t[i+2],f=t[i+3],128==(192&o)&&128==(192&u)&&128==(192&f)&&(s=(15&h)<<18|(63&o)<<12|(63&u)<<6|63&f)>65535&&s<1114112&&(a=s)}null===a?(a=65533,c=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),i+=c}return O(n)}exports.Buffer=f,exports.SlowBuffer=d,exports.INSPECT_MAX_BYTES=50,f.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:i(),exports.kMaxLength=o(),f.poolSize=8192,f._augment=function(t){return t.__proto__=f.prototype,t},f.from=function(t,r,e){return s(null,t,r,e)},f.TYPED_ARRAY_SUPPORT&&(f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0})),f.alloc=function(t,r,e){return a(null,t,r,e)},f.allocUnsafe=function(t){return c(null,t)},f.allocUnsafeSlow=function(t){return c(null,t)},f.isBuffer=function(t){return!(null==t||!t._isBuffer)},f.compare=function(t,r){if(!f.isBuffer(t)||!f.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(t===r)return 0;for(var e=t.length,n=r.length,i=0,o=Math.min(e,n);i<o;++i)if(t[i]!==r[i]){e=t[i],n=r[i];break}return e<n?-1:n<e?1:0},f.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(t,r){if(!n(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return f.alloc(0);var e;if(void 0===r)for(r=0,e=0;e<t.length;++e)r+=t[e].length;var i=f.allocUnsafe(r),o=0;for(e=0;e<t.length;++e){var u=t[e];if(!f.isBuffer(u))throw new TypeError('"list" argument must be an Array of Buffers');u.copy(i,o),o+=u.length}return i},f.byteLength=v,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<t;r+=2)b(this,r,r+1);return this},f.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<t;r+=4)b(this,r,r+3),b(this,r+1,r+2);return this},f.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<t;r+=8)b(this,r,r+7),b(this,r+1,r+6),b(this,r+2,r+5),b(this,r+3,r+4);return this},f.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?Y(this,0,t):E.apply(this,arguments)},f.prototype.equals=function(t){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===f.compare(this,t)},f.prototype.inspect=function(){var t="",r=exports.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},f.prototype.compare=function(t,r,e,n,i){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=0),void 0===e&&(e=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),r<0||e>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&r>=e)return 0;if(n>=i)return-1;if(r>=e)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),u=(e>>>=0)-(r>>>=0),s=Math.min(o,u),h=this.slice(n,i),a=t.slice(r,e),c=0;c<s;++c)if(h[c]!==a[c]){o=h[c],u=a[c];break}return o<u?-1:u<o?1:0},f.prototype.includes=function(t,r,e){return-1!==this.indexOf(t,r,e)},f.prototype.indexOf=function(t,r,e){return R(this,t,r,e,!0)},f.prototype.lastIndexOf=function(t,r,e){return R(this,t,r,e,!1)},f.prototype.write=function(t,r,e,n){if(void 0===r)n="utf8",e=this.length,r=0;else if(void 0===e&&"string"==typeof r)n=r,e=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r|=0,isFinite(e)?(e|=0,void 0===n&&(n="utf8")):(n=e,e=void 0)}var i=this.length-r;if((void 0===e||e>i)&&(e=i),t.length>0&&(e<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return A(this,t,r,e);case"utf8":case"utf-8":return m(this,t,r,e);case"ascii":return P(this,t,r,e);case"latin1":case"binary":return T(this,t,r,e);case"base64":return B(this,t,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,t,r,e);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function O(t){var r=t.length;if(r<=I)return String.fromCharCode.apply(String,t);for(var e="",n=0;n<r;)e+=String.fromCharCode.apply(String,t.slice(n,n+=I));return e}function L(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(127&t[i]);return n}function D(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(t[i]);return n}function x(t,r,e){var n=t.length;(!r||r<0)&&(r=0),(!e||e<0||e>n)&&(e=n);for(var i="",o=r;o<e;++o)i+=Z(t[o]);return i}function C(t,r,e){for(var n=t.slice(r,e),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function M(t,r,e){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+r>e)throw new RangeError("Trying to access beyond buffer length")}function k(t,r,e,n,i,o){if(!f.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>i||r<o)throw new RangeError('"value" argument is out of bounds');if(e+n>t.length)throw new RangeError("Index out of range")}function N(t,r,e,n){r<0&&(r=65535+r+1);for(var i=0,o=Math.min(t.length-e,2);i<o;++i)t[e+i]=(r&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function z(t,r,e,n){r<0&&(r=4294967295+r+1);for(var i=0,o=Math.min(t.length-e,4);i<o;++i)t[e+i]=r>>>8*(n?i:3-i)&255}function F(t,r,e,n,i,o){if(e+n>t.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function j(t,r,n,i,o){return o||F(t,r,n,4,3.4028234663852886e38,-3.4028234663852886e38),e.write(t,r,n,i,23,4),n+4}function q(t,r,n,i,o){return o||F(t,r,n,8,1.7976931348623157e308,-1.7976931348623157e308),e.write(t,r,n,i,52,8),n+8}f.prototype.slice=function(t,r){var e,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(r=void 0===r?n:~~r)<0?(r+=n)<0&&(r=0):r>n&&(r=n),r<t&&(r=t),f.TYPED_ARRAY_SUPPORT)(e=this.subarray(t,r)).__proto__=f.prototype;else{var i=r-t;e=new f(i,void 0);for(var o=0;o<i;++o)e[o]=this[o+t]}return e},f.prototype.readUIntLE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n},f.prototype.readUIntBE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t+--r],i=1;r>0&&(i*=256);)n+=this[t+--r]*i;return n},f.prototype.readUInt8=function(t,r){return r||M(t,1,this.length),this[t]},f.prototype.readUInt16LE=function(t,r){return r||M(t,2,this.length),this[t]|this[t+1]<<8},f.prototype.readUInt16BE=function(t,r){return r||M(t,2,this.length),this[t]<<8|this[t+1]},f.prototype.readUInt32LE=function(t,r){return r||M(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},f.prototype.readUInt32BE=function(t,r){return r||M(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},f.prototype.readIntLE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*r)),n},f.prototype.readIntBE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=r,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*r)),o},f.prototype.readInt8=function(t,r){return r||M(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},f.prototype.readInt16LE=function(t,r){r||M(t,2,this.length);var e=this[t]|this[t+1]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt16BE=function(t,r){r||M(t,2,this.length);var e=this[t+1]|this[t]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt32LE=function(t,r){return r||M(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},f.prototype.readInt32BE=function(t,r){return r||M(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},f.prototype.readFloatLE=function(t,r){return r||M(t,4,this.length),e.read(this,t,!0,23,4)},f.prototype.readFloatBE=function(t,r){return r||M(t,4,this.length),e.read(this,t,!1,23,4)},f.prototype.readDoubleLE=function(t,r){return r||M(t,8,this.length),e.read(this,t,!0,52,8)},f.prototype.readDoubleBE=function(t,r){return r||M(t,8,this.length),e.read(this,t,!1,52,8)},f.prototype.writeUIntLE=function(t,r,e,n){(t=+t,r|=0,e|=0,n)||k(this,t,r,e,Math.pow(2,8*e)-1,0);var i=1,o=0;for(this[r]=255&t;++o<e&&(i*=256);)this[r+o]=t/i&255;return r+e},f.prototype.writeUIntBE=function(t,r,e,n){(t=+t,r|=0,e|=0,n)||k(this,t,r,e,Math.pow(2,8*e)-1,0);var i=e-1,o=1;for(this[r+i]=255&t;--i>=0&&(o*=256);)this[r+i]=t/o&255;return r+e},f.prototype.writeUInt8=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,1,255,0),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[r]=255&t,r+1},f.prototype.writeUInt16LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):N(this,t,r,!0),r+2},f.prototype.writeUInt16BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):N(this,t,r,!1),r+2},f.prototype.writeUInt32LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=255&t):z(this,t,r,!0),r+4},f.prototype.writeUInt32BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):z(this,t,r,!1),r+4},f.prototype.writeIntLE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);k(this,t,r,e,i-1,-i)}var o=0,u=1,f=0;for(this[r]=255&t;++o<e&&(u*=256);)t<0&&0===f&&0!==this[r+o-1]&&(f=1),this[r+o]=(t/u>>0)-f&255;return r+e},f.prototype.writeIntBE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);k(this,t,r,e,i-1,-i)}var o=e-1,u=1,f=0;for(this[r+o]=255&t;--o>=0&&(u*=256);)t<0&&0===f&&0!==this[r+o+1]&&(f=1),this[r+o]=(t/u>>0)-f&255;return r+e},f.prototype.writeInt8=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,1,127,-128),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[r]=255&t,r+1},f.prototype.writeInt16LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):N(this,t,r,!0),r+2},f.prototype.writeInt16BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):N(this,t,r,!1),r+2},f.prototype.writeInt32LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,2147483647,-2147483648),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24):z(this,t,r,!0),r+4},f.prototype.writeInt32BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):z(this,t,r,!1),r+4},f.prototype.writeFloatLE=function(t,r,e){return j(this,t,r,!0,e)},f.prototype.writeFloatBE=function(t,r,e){return j(this,t,r,!1,e)},f.prototype.writeDoubleLE=function(t,r,e){return q(this,t,r,!0,e)},f.prototype.writeDoubleBE=function(t,r,e){return q(this,t,r,!1,e)},f.prototype.copy=function(t,r,e,n){if(e||(e=0),n||0===n||(n=this.length),r>=t.length&&(r=t.length),r||(r=0),n>0&&n<e&&(n=e),n===e)return 0;if(0===t.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(e<0||e>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-r<n-e&&(n=t.length-r+e);var i,o=n-e;if(this===t&&e<r&&r<n)for(i=o-1;i>=0;--i)t[i+r]=this[i+e];else if(o<1e3||!f.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+r]=this[i+e];else Uint8Array.prototype.set.call(t,this.subarray(e,e+o),r);return o},f.prototype.fill=function(t,r,e,n){if("string"==typeof t){if("string"==typeof r?(n=r,r=0,e=this.length):"string"==typeof e&&(n=e,e=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!f.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(r<0||this.length<r||this.length<e)throw new RangeError("Out of range index");if(e<=r)return this;var o;if(r>>>=0,e=void 0===e?this.length:e>>>0,t||(t=0),"number"==typeof t)for(o=r;o<e;++o)this[o]=t;else{var u=f.isBuffer(t)?t:$(new f(t,n).toString()),s=u.length;for(o=0;o<e-r;++o)this[o+r]=u[o%s]}return this};var V=/[^+\/0-9A-Za-z-_]/g;function X(t){if((t=J(t).replace(V,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}function J(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Z(t){return t<16?"0"+t.toString(16):t.toString(16)}function $(t,r){var e;r=r||1/0;for(var n=t.length,i=null,o=[],u=0;u<n;++u){if((e=t.charCodeAt(u))>55295&&e<57344){if(!i){if(e>56319){(r-=3)>-1&&o.push(239,191,189);continue}if(u+1===n){(r-=3)>-1&&o.push(239,191,189);continue}i=e;continue}if(e<56320){(r-=3)>-1&&o.push(239,191,189),i=e;continue}e=65536+(i-55296<<10|e-56320)}else i&&(r-=3)>-1&&o.push(239,191,189);if(i=null,e<128){if((r-=1)<0)break;o.push(e)}else if(e<2048){if((r-=2)<0)break;o.push(e>>6|192,63&e|128)}else if(e<65536){if((r-=3)<0)break;o.push(e>>12|224,e>>6&63|128,63&e|128)}else{if(!(e<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;o.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}}return o}function G(t){for(var r=[],e=0;e<t.length;++e)r.push(255&t.charCodeAt(e));return r}function H(t,r){for(var e,n,i,o=[],u=0;u<t.length&&!((r-=2)<0);++u)n=(e=t.charCodeAt(u))>>8,i=e%256,o.push(i),o.push(n);return o}function K(t){return r.toByteArray(X(t))}function Q(t,r,e,n){for(var i=0;i<n&&!(i+e>=r.length||i>=t.length);++i)r[i+e]=t[i];return i}function W(t){return t!=t}
},{"base64-js":"prL8","ieee754":"iism","isarray":"BOve","buffer":"XyCw"}],"iuAK":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"createGLContext",{enumerable:!0,get:function(){return r.createGLContext}}),Object.defineProperty(exports,"instrumentGLContext",{enumerable:!0,get:function(){return r.instrumentGLContext}}),Object.defineProperty(exports,"isWebGL",{enumerable:!0,get:function(){return r.isWebGL}}),Object.defineProperty(exports,"isWebGL2",{enumerable:!0,get:function(){return r.isWebGL2}}),Object.defineProperty(exports,"getParameters",{enumerable:!0,get:function(){return r.getParameters}}),Object.defineProperty(exports,"setParameters",{enumerable:!0,get:function(){return r.setParameters}}),Object.defineProperty(exports,"withParameters",{enumerable:!0,get:function(){return r.withParameters}}),Object.defineProperty(exports,"resetParameters",{enumerable:!0,get:function(){return r.resetParameters}}),Object.defineProperty(exports,"cssToDeviceRatio",{enumerable:!0,get:function(){return r.cssToDeviceRatio}}),Object.defineProperty(exports,"cssToDevicePixels",{enumerable:!0,get:function(){return r.cssToDevicePixels}}),Object.defineProperty(exports,"lumaStats",{enumerable:!0,get:function(){return t.lumaStats}}),Object.defineProperty(exports,"FEATURES",{enumerable:!0,get:function(){return t.FEATURES}}),Object.defineProperty(exports,"hasFeature",{enumerable:!0,get:function(){return t.hasFeature}}),Object.defineProperty(exports,"hasFeatures",{enumerable:!0,get:function(){return t.hasFeatures}}),Object.defineProperty(exports,"Buffer",{enumerable:!0,get:function(){return t.Buffer}}),Object.defineProperty(exports,"Program",{enumerable:!0,get:function(){return t.Program}}),Object.defineProperty(exports,"Framebuffer",{enumerable:!0,get:function(){return t.Framebuffer}}),Object.defineProperty(exports,"Renderbuffer",{enumerable:!0,get:function(){return t.Renderbuffer}}),Object.defineProperty(exports,"Texture2D",{enumerable:!0,get:function(){return t.Texture2D}}),Object.defineProperty(exports,"TextureCube",{enumerable:!0,get:function(){return t.TextureCube}}),Object.defineProperty(exports,"clear",{enumerable:!0,get:function(){return t.clear}}),Object.defineProperty(exports,"readPixelsToArray",{enumerable:!0,get:function(){return t.readPixelsToArray}}),Object.defineProperty(exports,"readPixelsToBuffer",{enumerable:!0,get:function(){return t.readPixelsToBuffer}}),Object.defineProperty(exports,"cloneTextureFrom",{enumerable:!0,get:function(){return t.cloneTextureFrom}}),Object.defineProperty(exports,"copyToTexture",{enumerable:!0,get:function(){return t.copyToTexture}}),Object.defineProperty(exports,"Texture3D",{enumerable:!0,get:function(){return t.Texture3D}}),Object.defineProperty(exports,"TransformFeedback",{enumerable:!0,get:function(){return t.TransformFeedback}}),Object.defineProperty(exports,"log",{enumerable:!0,get:function(){return t.log}}),Object.defineProperty(exports,"assert",{enumerable:!0,get:function(){return t.assert}}),Object.defineProperty(exports,"uid",{enumerable:!0,get:function(){return t.uid}}),Object.defineProperty(exports,"AnimationLoop",{enumerable:!0,get:function(){return n.AnimationLoop}}),Object.defineProperty(exports,"Model",{enumerable:!0,get:function(){return n.Model}}),Object.defineProperty(exports,"Transform",{enumerable:!0,get:function(){return n.Transform}}),Object.defineProperty(exports,"ProgramManager",{enumerable:!0,get:function(){return n.ProgramManager}}),Object.defineProperty(exports,"Timeline",{enumerable:!0,get:function(){return n.Timeline}}),Object.defineProperty(exports,"Geometry",{enumerable:!0,get:function(){return n.Geometry}}),Object.defineProperty(exports,"ClipSpace",{enumerable:!0,get:function(){return n.ClipSpace}}),Object.defineProperty(exports,"ConeGeometry",{enumerable:!0,get:function(){return n.ConeGeometry}}),Object.defineProperty(exports,"CubeGeometry",{enumerable:!0,get:function(){return n.CubeGeometry}}),Object.defineProperty(exports,"CylinderGeometry",{enumerable:!0,get:function(){return n.CylinderGeometry}}),Object.defineProperty(exports,"IcoSphereGeometry",{enumerable:!0,get:function(){return n.IcoSphereGeometry}}),Object.defineProperty(exports,"PlaneGeometry",{enumerable:!0,get:function(){return n.PlaneGeometry}}),Object.defineProperty(exports,"SphereGeometry",{enumerable:!0,get:function(){return n.SphereGeometry}}),Object.defineProperty(exports,"TruncatedConeGeometry",{enumerable:!0,get:function(){return n.TruncatedConeGeometry}}),Object.defineProperty(exports,"normalizeShaderModule",{enumerable:!0,get:function(){return o.normalizeShaderModule}}),Object.defineProperty(exports,"fp32",{enumerable:!0,get:function(){return o.fp32}}),Object.defineProperty(exports,"fp64",{enumerable:!0,get:function(){return o.fp64}}),Object.defineProperty(exports,"project",{enumerable:!0,get:function(){return o.project}}),Object.defineProperty(exports,"dirlight",{enumerable:!0,get:function(){return o.dirlight}}),Object.defineProperty(exports,"picking",{enumerable:!0,get:function(){return o.picking}}),Object.defineProperty(exports,"gouraudLighting",{enumerable:!0,get:function(){return o.gouraudLighting}}),Object.defineProperty(exports,"phongLighting",{enumerable:!0,get:function(){return o.phongLighting}}),Object.defineProperty(exports,"pbr",{enumerable:!0,get:function(){return o.pbr}});var r=require("@luma.gl/gltools"),t=require("@luma.gl/webgl"),n=require("@luma.gl/engine"),o=require("@luma.gl/shadertools");
},{"@luma.gl/gltools":"lAom","@luma.gl/webgl":"KdJH","@luma.gl/engine":"YENE","@luma.gl/shadertools":"Pzgo","buffer":"XyCw"}],"uFGI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\nstruct VertexGeometry {\n  vec4 position;\n  vec3 worldPosition;\n  vec3 worldPositionAlt;\n  vec3 normal;\n  vec2 uv;\n  vec3 pickingColor;\n} geometry;\n",t="\n#define SMOOTH_EDGE_RADIUS 0.5\n\nstruct FragmentGeometry {\n  vec2 uv;\n} geometry;\n\nfloat smoothedge(float edge, float x) {\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\n}\n",n={name:"geometry",vs:e,fs:t};exports.default=n;
},{}],"ysbg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EVENTS=exports.PROJECTION_MODE=exports.COORDINATE_SYSTEM=void 0;var e=E(require("../utils/log"));function E(e){return e&&e.__esModule?e:{default:e}}var r={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};exports.COORDINATE_SYSTEM=r,Object.defineProperty(r,"IDENTITY",{get:function(){return e.default.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")()||0}});var T={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0};exports.PROJECTION_MODE=T;var t={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}};exports.EVENTS=t;
},{"../utils/log":"GVus"}],"HHu4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var o=require("../../lib/constants"),n=Object.keys(o.COORDINATE_SYSTEM).map(function(n){return"const int COORDINATE_SYSTEM_".concat(n," = ").concat(o.COORDINATE_SYSTEM[n],";")}).join(""),e=Object.keys(o.PROJECTION_MODE).map(function(n){return"const int PROJECTION_MODE_".concat(n," = ").concat(o.PROJECTION_MODE[n],";")}).join(""),t="".concat(n,"\n").concat(e,"\n\nuniform int project_uCoordinateSystem;\nuniform int project_uProjectionMode;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform float project_uAntimeridian;\nuniform vec3 project_uCommonUnitsPerMeter;\nuniform vec3 project_uCommonUnitsPerWorldUnit;\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec3 project_uCoordinateOrigin;\n\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec3 ZERO_64_LOW = vec3(0.0);\nconst float EARTH_RADIUS = 6370972.0;\nconst float GLOBE_RADIUS = 256.0;\nfloat project_size(float meters) {\n  return meters * project_uCommonUnitsPerMeter.z;\n}\n\nvec2 project_size(vec2 meters) {\n  return meters * project_uCommonUnitsPerMeter.xy;\n}\n\nvec3 project_size(vec3 meters) {\n  return meters * project_uCommonUnitsPerMeter;\n}\n\nvec4 project_size(vec4 meters) {\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\n}\nvec3 project_normal(vec3 vector) {\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\n  return normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\n}\n\nvec4 project_offset_(vec4 offset) {\n  float dy = offset.y;\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n    dy = clamp(dy, -1., 1.);\n  }\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\nvec2 project_mercator_(vec2 lnglat) {\n  float x = lnglat.x;\n  if (project_uWrapLongitude) {\n    x = mod(x - project_uAntimeridian, 360.0) + project_uAntimeridian;\n  }\n  float y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))\n  );\n}\n\nvec3 project_globe_(vec3 lnglatz) {\n  float lambda = radians(lnglatz.x);\n  float phi = radians(lnglatz.y);\n  float cosPhi = cos(phi);\n  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\n\n  return vec3(\n    sin(lambda) * cosPhi,\n    -cos(lambda) * cosPhi,\n    sin(phi)\n  ) * D;\n}\nvec4 project_position(vec4 position, vec3 position64Low) {\n  vec4 position_world = project_uModelMatrix * position;\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_mercator_(position_world.xy) * WORLD_SCALE,\n        project_size(position_world.z),\n        position_world.w\n      );\n    }\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\n      position_world.xyz += project_uCoordinateOrigin;\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_globe_(position_world.xyz),\n        position_world.w\n      );\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\n    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\n    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\n    position_world.xyz -= project_uCoordinateOrigin;\n  }\n  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));\n}\n\nvec4 project_position(vec4 position) {\n  return project_position(position, ZERO_64_LOW);\n}\n\nvec3 project_position(vec3 position, vec3 position64Low) {\n  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);\n  return projected_position.xyz;\n}\n\nvec3 project_position(vec3 position) {\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\n  return projected_position.xyz;\n}\n\nvec2 project_position(vec2 position) {\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\n  return projected_position.xy;\n}\n\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\n  return viewProjectionMatrix * position + center;\n}\nvec4 project_common_position_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\n}\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\n  return offset * project_uFocalDistance;\n}\n\nfloat project_size_to_pixel(float meters) {\n  return project_size(meters) * project_uScale;\n}\nfloat project_pixel_size(float pixels) {\n  return pixels / project_uScale;\n}\nvec2 project_pixel_size(vec2 pixels) {\n  return pixels / project_uScale;\n}\nmat3 project_get_orientation_matrix(vec3 up) {\n  vec3 uz = normalize(up);\n  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));\n  vec3 uy = cross(uz, ux);\n  return mat3(ux, uy, uz);\n}\n\nbool project_needs_rotation(vec3 commonPosition, out mat3 transform) {\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    transform = project_get_orientation_matrix(commonPosition);\n    return true;\n  }\n  return false;\n}\n");exports.default=t;
},{"../../lib/constants":"ysbg"}],"uXG5":[function(require,module,exports) {
"use strict";function r(r,e){if(r===e)return!0;if(Array.isArray(r)){var t=r.length;if(!e||e.length!==t)return!1;for(var n=0;n<t;n++)if(r[n]!==e[n])return!1;return!0}return!1}function e(e){var t,n={};return function(u){for(var f in u)if(!r(u[f],n[f])){t=e(u),n=u;break}return t}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"Txat":[function(require,module,exports) {
"use strict";function e(e,r){if(!e)throw new Error(r||"deck.gl: assertion failed.")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"iWu9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getOffsetOrigin=E,exports.getUniformsFromViewport=T;var e=c(require("gl-matrix/mat4")),t=c(require("gl-matrix/vec4")),r=require("../../lib/constants"),o=n(require("../../utils/memoize")),i=n(require("../../utils/assert"));function n(e){return e&&e.__esModule?e:{default:e}}function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function c(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var n=o?Object.getOwnPropertyDescriptor(e,i):null;n&&(n.get||n.set)?Object.defineProperty(r,i,n):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}var u=[0,0,0,0],s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],O=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],d=[0,0,0],p=[0,0,0],l=(0,o.default)(_);function E(e,t){var o,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p,n=i,a=!0;switch(o=t===r.COORDINATE_SYSTEM.LNGLAT_OFFSETS||t===r.COORDINATE_SYSTEM.METER_OFFSETS?i:e.isGeospatial?[Math.fround(e.longitude),Math.fround(e.latitude),0]:null,e.projectionMode){case r.PROJECTION_MODE.WEB_MERCATOR:t!==r.COORDINATE_SYSTEM.LNGLAT&&t!==r.COORDINATE_SYSTEM.CARTESIAN||(a=!1);break;case r.PROJECTION_MODE.WEB_MERCATOR_AUTO_OFFSET:t===r.COORDINATE_SYSTEM.LNGLAT?n=o:t===r.COORDINATE_SYSTEM.CARTESIAN&&(n=[Math.fround(e.center[0]),Math.fround(e.center[1]),0],o=e.unprojectPosition(n),n[0]-=i[0],n[1]-=i[1],n[2]-=i[2]);break;case r.PROJECTION_MODE.IDENTITY:n=e.position.map(Math.fround);break;case r.PROJECTION_MODE.GLOBE:a=!1,o=null;break;default:a=!1}return n[2]=n[2]||0,{geospatialOrigin:o,shaderCoordinateOrigin:n,offsetMode:a}}function M(r,o,i){var n=r.viewMatrixUncentered,a=r.projectionMatrix,c=r.viewMatrix,O=r.viewProjectionMatrix,d=u,p=r.cameraPosition,l=E(r,o,i),M=l.geospatialOrigin,T=l.shaderCoordinateOrigin;if(l.offsetMode){var _=r.projectPosition(M||T);p=[p[0]-_[0],p[1]-_[1],p[2]-_[2]],_[3]=1,d=t.transformMat4([],_,O),c=n||c,O=e.multiply([],a,c),O=e.multiply([],O,s)}return{viewMatrix:c,viewProjectionMatrix:O,projectionCenter:d,cameraPosCommon:p,shaderCoordinateOrigin:T,geospatialOrigin:M}}function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.viewport,o=e.devicePixelRatio,n=void 0===o?1:o,a=e.modelMatrix,c=void 0===a?null:a,u=e.coordinateSystem,s=void 0===u?r.COORDINATE_SYSTEM.DEFAULT:u,d=e.coordinateOrigin,p=e.autoWrapLongitude,E=void 0!==p&&p;e.projectionMode,e.positionOrigin;(0,i.default)(t),s===r.COORDINATE_SYSTEM.DEFAULT&&(s=t.isGeospatial?r.COORDINATE_SYSTEM.LNGLAT:r.COORDINATE_SYSTEM.CARTESIAN);var M=l({viewport:t,devicePixelRatio:n,coordinateSystem:s,coordinateOrigin:d});return M.project_uWrapLongitude=E,M.project_uModelMatrix=c||O,M}function _(e){var t=e.viewport,o=e.devicePixelRatio,i=e.coordinateSystem,n=M(t,i,e.coordinateOrigin),a=n.projectionCenter,c=n.viewProjectionMatrix,u=n.cameraPosCommon,s=n.shaderCoordinateOrigin,O=n.geospatialOrigin,p=t.getDistanceScales(),l=[t.width*o,t.height*o],E={project_uCoordinateSystem:i,project_uProjectionMode:t.projectionMode,project_uCoordinateOrigin:s,project_uCenter:a,project_uAntimeridian:(t.longitude||0)-180,project_uViewportSize:l,project_uDevicePixelRatio:o,project_uFocalDistance:t.focalDistance||1,project_uCommonUnitsPerMeter:p.unitsPerMeter,project_uCommonUnitsPerWorldUnit:p.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:d,project_uScale:t.scale,project_uViewProjectionMatrix:c,project_uCameraPosition:u};if(O){var T=t.getDistanceScales(O);switch(i){case r.COORDINATE_SYSTEM.METER_OFFSETS:E.project_uCommonUnitsPerWorldUnit=T.unitsPerMeter,E.project_uCommonUnitsPerWorldUnit2=T.unitsPerMeter2;break;case r.COORDINATE_SYSTEM.LNGLAT:case r.COORDINATE_SYSTEM.LNGLAT_OFFSETS:E.project_uCommonUnitsPerWorldUnit=T.unitsPerDegree,E.project_uCommonUnitsPerWorldUnit2=T.unitsPerDegree2;break;case r.COORDINATE_SYSTEM.CARTESIAN:E.project_uCommonUnitsPerWorldUnit=[1,1,T.unitsPerMeter[2]],E.project_uCommonUnitsPerWorldUnit2=[0,0,T.unitsPerMeter2[2]]}}return E}
},{"gl-matrix/mat4":"w3aR","gl-matrix/vec4":"zWbG","../../lib/constants":"ysbg","../../utils/memoize":"uXG5","../../utils/assert":"Txat"}],"NVOm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("@luma.gl/core"),r=o(require("./project.glsl")),t=require("./viewport-uniforms");function o(e){return e&&e.__esModule?e:{default:e}}var u={};function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;return e.viewport?(0,t.getUniformsFromViewport)(e):{}}var n={name:"project",dependencies:[e.fp32],vs:r.default,getUniforms:i};exports.default=n;
},{"@luma.gl/core":"iuAK","./project.glsl":"HHu4","./viewport-uniforms":"iWu9"}],"qxVk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var o=e(require("../project/project"));function e(o){return o&&o.__esModule?o:{default:o}}var t="\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\n) {\n  vec3 projectedPosition = project_position(position, position64Low);\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    // offset is specified as ENU\n    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe\n    mat3 rotation = project_get_orientation_matrix(projectedPosition);\n    offset = rotation * offset;\n  }\n  commonPosition = vec4(projectedPosition + offset, 1.0);\n  return project_common_position_to_clipspace(commonPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\n}\n",i={name:"project32",dependencies:[o.default],vs:t};exports.default=i;
},{"../project/project":"NVOm"}],"AE6F":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createMat4=n,exports.transformVector=o,exports.mod=u,exports.lerp=a;var e=t(require("gl-matrix/vec4"));function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function t(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var a=o?Object.getOwnPropertyDescriptor(e,u):null;a&&(a.get||a.set)?Object.defineProperty(n,u,a):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}function n(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function o(r,t){var n=e.transformMat4([],t,r);return e.scale(n,n,1/n[3]),n}function u(e,r){var t=e%r;return t<0?r+t:t}function a(e,r,t){return t*r+(1-t)*e}
},{"gl-matrix/vec4":"zWbG"}],"zuem":[function(require,module,exports) {
"use strict";function e(e,r){if(!e)throw new Error(r||"@math.gl/web-mercator: assertion failed.")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"eDN9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.zoomToScale=M,exports.scaleToZoom=g,exports.lngLatToWorld=m,exports.worldToLngLat=b,exports.getMeterZoom=x,exports.getDistanceScales=P,exports.addMetersToLngLat=F,exports.getViewMatrix=N,exports.getProjectionParameters=w,exports.getProjectionMatrix=y,exports.worldToPixels=j,exports.pixelsToWorld=O;var e=l(require("@babel/runtime/helpers/esm/slicedToArray")),t=require("./math-utils"),r=o(require("gl-matrix/mat4")),i=o(require("gl-matrix/vec2")),a=o(require("gl-matrix/vec3")),n=l(require("./assert"));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=i?Object.getOwnPropertyDescriptor(e,a):null;n&&(n.get||n.set)?Object.defineProperty(r,a,n):r[a]=e[a]}return r.default=e,t&&t.set(e,r),r}function l(e){return e&&e.__esModule?e:{default:e}}var s=Math.PI,c=s/4,f=s/180,d=180/s,p=512,h=4003e4,v=1.5;function M(e){return Math.pow(2,e)}function g(e){return Math.log2(e)}function m(t){var r=(0,e.default)(t,2),i=r[0],a=r[1];(0,n.default)(Number.isFinite(i)),(0,n.default)(Number.isFinite(a)&&a>=-90&&a<=90,"invalid latitude");var u=a*f;return[p*(i*f+s)/(2*s),p*(s+Math.log(Math.tan(c+.5*u)))/(2*s)]}function b(t){var r=(0,e.default)(t,2),i=r[0],a=r[1],n=i/p*(2*s)-s,u=2*(Math.atan(Math.exp(a/p*(2*s)-s))-c);return[n*d,u*d]}function x(e){var t=e.latitude;(0,n.default)(Number.isFinite(t));var r=Math.cos(t*f);return g(h*r)-9}function P(e){var t=e.latitude,r=e.longitude,i=e.highPrecision,a=void 0!==i&&i;(0,n.default)(Number.isFinite(t)&&Number.isFinite(r));var u={},o=p,l=Math.cos(t*f),s=o/360,c=s/l,d=o/h/l;if(u.unitsPerMeter=[d,d,d],u.metersPerUnit=[1/d,1/d,1/d],u.unitsPerDegree=[s,c,d],u.degreesPerUnit=[1/s,1/c,1/d],a){var v=f*Math.tan(t*f)/l,M=s*v/2,g=o/h*v,m=g/c*d;u.unitsPerDegree2=[0,M,g],u.unitsPerMeter2=[m,0,m]}return u}function F(t,r){var i=(0,e.default)(t,3),a=i[0],n=i[1],u=i[2],o=(0,e.default)(r,3),l=o[0],s=o[1],c=o[2],f=P({longitude:a,latitude:n,highPrecision:!0}),d=f.unitsPerMeter,p=f.unitsPerMeter2,h=m(t);h[0]+=l*(d[0]+p[0]*s),h[1]+=s*(d[1]+p[1]*s);var v=b(h),M=(u||0)+(c||0);return Number.isFinite(u)||Number.isFinite(c)?[v[0],v[1],M]:v}function N(e){var i=e.height,n=e.pitch,u=e.bearing,o=e.altitude,l=e.scale,s=e.center,c=void 0===s?null:s,d=(0,t.createMat4)();return r.translate(d,d,[0,0,-o]),r.rotateX(d,d,-n*f),r.rotateZ(d,d,u*f),l/=i,r.scale(d,d,[l,l,l]),c&&r.translate(d,d,a.negate([],c)),d}function w(e){var t=e.width,r=e.height,i=e.altitude,a=void 0===i?v:i,n=e.pitch,u=void 0===n?0:n,o=e.nearZMultiplier,l=void 0===o?1:o,s=e.farZMultiplier,c=void 0===s?1:s,d=u*f,p=Math.atan(.5/a),h=Math.sin(p)*a/Math.sin(Math.min(Math.max(Math.PI/2-d-p,.01),Math.PI-.01));return{fov:2*p,aspect:t/r,focalDistance:a,near:l,far:(Math.sin(d)*h+a)*c}}function y(e){var t=e.width,i=e.height,a=e.pitch,n=w({width:t,height:i,altitude:e.altitude,pitch:a,nearZMultiplier:e.nearZMultiplier,farZMultiplier:e.farZMultiplier}),u=n.fov,o=n.aspect,l=n.near,s=n.far;return r.perspective([],u,o,l,s)}function j(r,i){var a=(0,e.default)(r,3),u=a[0],o=a[1],l=a[2],s=void 0===l?0:l;return(0,n.default)(Number.isFinite(u)&&Number.isFinite(o)&&Number.isFinite(s)),(0,t.transformVector)(i,[u,o,s,1])}function O(r,a){var u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=(0,e.default)(r,3),l=o[0],s=o[1],c=o[2];if((0,n.default)(Number.isFinite(l)&&Number.isFinite(s),"invalid pixel coordinate"),Number.isFinite(c))return(0,t.transformVector)(a,[l,s,c,1]);var f=(0,t.transformVector)(a,[l,s,0,1]),d=(0,t.transformVector)(a,[l,s,1,1]),p=f[2],h=d[2],v=p===h?0:((u||0)-p)/(h-p);return i.lerp([],f,d,v)}
},{"@babel/runtime/helpers/esm/slicedToArray":"TBeo","./math-utils":"AE6F","gl-matrix/mat4":"w3aR","gl-matrix/vec2":"XSo1","gl-matrix/vec3":"AWBd","./assert":"zuem"}],"Lip1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var t=o(require("@babel/runtime/helpers/esm/slicedToArray")),e=o(require("./web-mercator-viewport")),i=o(require("./assert"));function o(t){return t&&t.__esModule?t:{default:t}}function r(o){var r=o.width,a=o.height,u=o.bounds,d=o.minExtent,l=void 0===d?0:d,s=o.maxZoom,n=void 0===s?24:s,m=o.padding,h=void 0===m?0:m,b=o.offset,f=void 0===b?[0,0]:b,p=(0,t.default)(u,2),M=(0,t.default)(p[0],2),g=M[0],v=M[1],c=(0,t.default)(p[1],2),x=c[0],F=c[1];if(Number.isFinite(h)){h={top:h,bottom:h,left:h,right:h}}else(0,i.default)(Number.isFinite(h.top)&&Number.isFinite(h.bottom)&&Number.isFinite(h.left)&&Number.isFinite(h.right));var N=new e.default({width:r,height:a,longitude:0,latitude:0,zoom:0}),w=N.project([g,F]),j=N.project([x,v]),_=[Math.max(Math.abs(j[0]-w[0]),l),Math.max(Math.abs(j[1]-w[1]),l)],q=[r-h.left-h.right-2*Math.abs(f[0]),a-h.top-h.bottom-2*Math.abs(f[1])];(0,i.default)(q[0]>0&&q[1]>0);var z=q[0]/_[0],y=q[1]/_[1],A=(h.right-h.left)/2/z,E=(h.bottom-h.top)/2/y,O=[(j[0]+w[0])/2+A,(j[1]+w[1])/2+E],P=N.unproject(O),T=Math.min(n,N.zoom+Math.log2(Math.abs(Math.min(z,y))));return(0,i.default)(Number.isFinite(T)),{longitude:P[0],latitude:P[1],zoom:T}}
},{"@babel/runtime/helpers/esm/slicedToArray":"TBeo","./web-mercator-viewport":"btK9","./assert":"zuem"}],"tHha":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var e=require("./web-mercator-utils"),t=o(require("gl-matrix/vec2")),r=require("./math-utils");function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=n();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}var i=Math.PI/180;function a(e){var t,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=e.width,a=e.height,c=e.unproject,f={targetZ:n},l=c([0,a],f),p=c([o,a],f);return Math.atan(.5/e.altitude)>(90-e.pitch)*i-.01?(t=u(e,0,n),r=u(e,o,n)):(t=c([0,0],f),r=c([o,0],f)),[l,p,r,t]}function u(n,o,i){var a=n.pixelUnprojectionMatrix,u=(0,r.transformVector)(a,[o,0,1,1]),c=(0,r.transformVector)(a,[o,n.height,1,1]),f=(i*n.distanceScales.unitsPerMeter[2]-u[2])/(c[2]-u[2]),l=t.lerp([],u,c,f),p=(0,e.worldToLngLat)(l);return p[2]=i,p}
},{"./web-mercator-utils":"eDN9","gl-matrix/vec2":"XSo1","./math-utils":"AE6F"}],"btK9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=d(require("@babel/runtime/helpers/esm/toConsumableArray")),e=d(require("@babel/runtime/helpers/esm/slicedToArray")),i=d(require("@babel/runtime/helpers/esm/classCallCheck")),r=d(require("@babel/runtime/helpers/esm/createClass")),n=require("./math-utils"),o=require("./web-mercator-utils"),a=d(require("./fit-bounds")),u=d(require("./get-bounds")),l=c(require("gl-matrix/mat4")),s=c(require("gl-matrix/vec2"));function h(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return h=function(){return t},t}function c(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=h();if(e&&e.has(t))return e.get(t);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var o=r?Object.getOwnPropertyDescriptor(t,n):null;o&&(o.get||o.set)?Object.defineProperty(i,n,o):i[n]=t[n]}return i.default=t,e&&e.set(t,i),i}function d(t){return t&&t.__esModule?t:{default:t}}var p=function(){function h(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{width:1,height:1},e=t.width,r=t.height,n=t.latitude,a=void 0===n?0:n,u=t.longitude,l=void 0===u?0:u,s=t.zoom,c=void 0===s?0:s,d=t.pitch,p=void 0===d?0:d,f=t.bearing,v=void 0===f?0:f,g=t.altitude,M=void 0===g?1.5:g,j=t.nearZMultiplier,m=void 0===j?.02:j,x=t.farZMultiplier,y=void 0===x?1.01:x;(0,i.default)(this,h),e=e||1,r=r||1;var b=(0,o.zoomToScale)(c);M=Math.max(.75,M);var w=(0,o.lngLatToWorld)([l,a]);w[2]=0,this.projectionMatrix=(0,o.getProjectionMatrix)({width:e,height:r,pitch:p,altitude:M,nearZMultiplier:m,farZMultiplier:y}),this.viewMatrix=(0,o.getViewMatrix)({height:r,scale:b,center:w,pitch:p,bearing:v,altitude:M}),this.width=e,this.height=r,this.scale=b,this.latitude=a,this.longitude=l,this.zoom=c,this.pitch=p,this.bearing=v,this.altitude=M,this.center=w,this.distanceScales=(0,o.getDistanceScales)(this),this._initMatrices(),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),Object.freeze(this)}return(0,r.default)(h,[{key:"_initMatrices",value:function(){var t=this.width,e=this.height,i=this.projectionMatrix,r=this.viewMatrix,o=(0,n.createMat4)();l.multiply(o,o,i),l.multiply(o,o,r),this.viewProjectionMatrix=o;var a=(0,n.createMat4)();l.scale(a,a,[t/2,-e/2,1]),l.translate(a,a,[1,-1,0]),l.multiply(a,a,o);var u=l.invert((0,n.createMat4)(),a);if(!u)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=a,this.pixelUnprojectionMatrix=u}},{key:"equals",value:function(t){return t instanceof h&&(t.width===this.width&&t.height===this.height&&l.equals(t.projectionMatrix,this.projectionMatrix)&&l.equals(t.viewMatrix,this.viewMatrix))}},{key:"project",value:function(t){var i=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).topLeft,r=void 0===i||i,n=this.projectPosition(t),a=(0,o.worldToPixels)(n,this.pixelProjectionMatrix),u=(0,e.default)(a,2),l=u[0],s=u[1],h=r?s:this.height-s;return 2===t.length?[l,h]:[l,h,a[2]]}},{key:"unproject",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.topLeft,n=void 0===r||r,a=i.targetZ,u=void 0===a?void 0:a,l=(0,e.default)(t,3),s=l[0],h=l[1],c=l[2],d=n?h:this.height-h,p=u&&u*this.distanceScales.unitsPerMeter[2],f=(0,o.pixelsToWorld)([s,d,c],this.pixelUnprojectionMatrix,p),v=this.unprojectPosition(f),g=(0,e.default)(v,3),M=g[0],j=g[1],m=g[2];return Number.isFinite(c)?[M,j,m]:Number.isFinite(u)?[M,j,u]:[M,j]}},{key:"projectPosition",value:function(t){var i=(0,o.lngLatToWorld)(t),r=(0,e.default)(i,2);return[r[0],r[1],(t[2]||0)*this.distanceScales.unitsPerMeter[2]]}},{key:"unprojectPosition",value:function(t){var i=(0,o.worldToLngLat)(t),r=(0,e.default)(i,2);return[r[0],r[1],(t[2]||0)*this.distanceScales.metersPerUnit[2]]}},{key:"projectFlat",value:function(t){return(0,o.lngLatToWorld)(t)}},{key:"unprojectFlat",value:function(t){return(0,o.worldToLngLat)(t)}},{key:"getMapCenterByLngLatPosition",value:function(t){var e=t.lngLat,i=t.pos,r=(0,o.pixelsToWorld)(i,this.pixelUnprojectionMatrix),n=(0,o.lngLatToWorld)(e),a=s.add([],n,s.negate([],r)),u=s.add([],this.center,a);return(0,o.worldToLngLat)(u)}},{key:"getLocationAtPoint",value:function(t){var e=t.lngLat,i=t.pos;return this.getMapCenterByLngLatPosition({lngLat:e,pos:i})}},{key:"fitBounds",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.width,r=this.height,n=(0,a.default)(Object.assign({width:i,height:r,bounds:t},e));return new h({width:i,height:r,longitude:n.longitude,latitude:n.latitude,zoom:n.zoom})}},{key:"getBounds",value:function(e){var i=this.getBoundingRegion(e),r=Math.min.apply(Math,(0,t.default)(i.map(function(t){return t[0]}))),n=Math.max.apply(Math,(0,t.default)(i.map(function(t){return t[0]})));return[[r,Math.min.apply(Math,(0,t.default)(i.map(function(t){return t[1]})))],[n,Math.max.apply(Math,(0,t.default)(i.map(function(t){return t[1]})))]]}},{key:"getBoundingRegion",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,u.default)(this,t.z||0)}}]),h}();exports.default=p;
},{"@babel/runtime/helpers/esm/toConsumableArray":"AdMH","@babel/runtime/helpers/esm/slicedToArray":"TBeo","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","./math-utils":"AE6F","./web-mercator-utils":"eDN9","./fit-bounds":"Lip1","./get-bounds":"tHha","gl-matrix/mat4":"w3aR","gl-matrix/vec2":"XSo1"}],"BccJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=o(require("./web-mercator-viewport")),t=require("./math-utils");function o(e){return e&&e.__esModule?e:{default:e}}var i=85.05113,r=-85.05113;function u(o){var u=o.width,d=o.height,a=o.longitude,l=o.latitude,h=o.zoom,n=o.pitch,c=void 0===n?0:n,g=o.bearing,p=void 0===g?0:g;(a<-180||a>180)&&(a=(0,t.mod)(a+180,360)-180),(p<-180||p>180)&&(p=(0,t.mod)(p+180,360)-180);var m=new e.default({width:u,height:d,longitude:a,latitude:l,zoom:h}),v=m.project([a,i])[1],w=m.project([a,r])[1],f=0;return w-v<d&&(h+=Math.log2(d/(w-v)),v=(m=new e.default({width:u,height:d,longitude:a,latitude:l,zoom:h})).project([a,i])[1],w=m.project([a,r])[1]),v>0?f=v:w<d&&(f=w-d),f&&(l=m.unproject([u/2,d/2+f])[1]),{width:u,height:d,longitude:a,latitude:l,zoom:h,pitch:c,bearing:p}}
},{"./web-mercator-viewport":"btK9","./math-utils":"AE6F"}],"Ytqr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=s,exports.getFlyToDuration=h;var t=require("./math-utils"),e=require("./web-mercator-utils"),r=o(require("gl-matrix/vec2"));function n(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return n=function(){return t},t}function o(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=n();if(e&&e.has(t))return e.get(t);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var u=o?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(r,a,u):r[a]=t[a]}return r.default=t,e&&e.set(t,r),r}function a(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=u(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return i=t.done,t},e:function(t){l=!0,a=t},f:function(){try{i||null==r.return||r.return()}finally{if(l)throw a}}}}function u(t,e){if(t){if("string"==typeof t)return i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var l=.01,c=["longitude","latitude","zoom"],f={curve:1.414,speed:1.2};function s(n,o,u){var i={},f=d(n,o,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}),s=f.startZoom,h=f.startCenterXY,p=f.uDelta,v=f.w0,y=f.u1,m=f.S,g=f.rho,b=f.rho2,M=f.r0;if(y<l){var w,O=a(c);try{for(O.s();!(w=O.n()).done;){var j=w.value,S=n[j],x=o[j];i[j]=(0,t.lerp)(S,x,u)}}catch(W){O.e(W)}finally{O.f()}return i}var T=u*m,z=Math.cosh(M)/Math.cosh(M+g*T),A=v*((Math.cosh(M)*Math.tanh(M+g*T)-Math.sinh(M))/b)/y,D=1/z,P=s+(0,e.scaleToZoom)(D),q=r.scale([],p,A);r.add(q,q,h);var L=(0,e.worldToLngLat)(q);return i.longitude=L[0],i.latitude=L[1],i.zoom=P,i}function h(t,e){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n=Object.assign({},f,n),a=o.screenSpeed,u=o.speed,i=o.maxDuration,l=d(t,e,n),c=l.S,s=l.rho,h=1e3*c;return r=Number.isFinite(a)?h/(a/s):h/u,Number.isFinite(i)&&r>i?0:r}function d(t,n,o){var a=(o=Object.assign({},f,o)).curve,u=t.zoom,i=[t.longitude,t.latitude],c=(0,e.zoomToScale)(u),s=n.zoom,h=[n.longitude,n.latitude],d=(0,e.zoomToScale)(s-u),p=(0,e.lngLatToWorld)(i),v=(0,e.lngLatToWorld)(h),y=r.sub([],v,p),m=Math.max(t.width,t.height),g=m/d,b=r.length(y)*c,M=Math.max(b,l),w=a*a,O=(g*g-m*m+w*w*M*M)/(2*m*w*M),j=(g*g-m*m-w*w*M*M)/(2*g*w*M),S=Math.log(Math.sqrt(O*O+1)-O),x=Math.log(Math.sqrt(j*j+1)-j);return{startZoom:u,startCenterXY:p,uDelta:y,w0:m,u1:b,S:(x-S)/a,rho:a,rho2:w,r0:S,r1:x}}
},{"./math-utils":"AE6F","./web-mercator-utils":"eDN9","gl-matrix/vec2":"XSo1"}],"PqV4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"default",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"WebMercatorViewport",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"getBounds",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"fitBounds",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"normalizeViewportProps",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"flyToViewport",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"getFlyToDuration",{enumerable:!0,get:function(){return n.getFlyToDuration}}),Object.defineProperty(exports,"lngLatToWorld",{enumerable:!0,get:function(){return u.lngLatToWorld}}),Object.defineProperty(exports,"worldToLngLat",{enumerable:!0,get:function(){return u.worldToLngLat}}),Object.defineProperty(exports,"worldToPixels",{enumerable:!0,get:function(){return u.worldToPixels}}),Object.defineProperty(exports,"pixelsToWorld",{enumerable:!0,get:function(){return u.pixelsToWorld}}),Object.defineProperty(exports,"zoomToScale",{enumerable:!0,get:function(){return u.zoomToScale}}),Object.defineProperty(exports,"scaleToZoom",{enumerable:!0,get:function(){return u.scaleToZoom}}),Object.defineProperty(exports,"getMeterZoom",{enumerable:!0,get:function(){return u.getMeterZoom}}),Object.defineProperty(exports,"getDistanceScales",{enumerable:!0,get:function(){return u.getDistanceScales}}),Object.defineProperty(exports,"addMetersToLngLat",{enumerable:!0,get:function(){return u.addMetersToLngLat}}),Object.defineProperty(exports,"getViewMatrix",{enumerable:!0,get:function(){return u.getViewMatrix}}),Object.defineProperty(exports,"getProjectionMatrix",{enumerable:!0,get:function(){return u.getProjectionMatrix}}),Object.defineProperty(exports,"getProjectionParameters",{enumerable:!0,get:function(){return u.getProjectionParameters}});var e=c(require("./web-mercator-viewport")),t=c(require("./get-bounds")),r=c(require("./fit-bounds")),o=c(require("./normalize-viewport-props")),n=a(require("./fly-to-viewport")),u=require("./web-mercator-utils");function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function a(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var u=o?Object.getOwnPropertyDescriptor(e,n):null;u&&(u.get||u.set)?Object.defineProperty(r,n,u):r[n]=e[n]}return r.default=e,t&&t.set(e,r),r}function c(e){return e&&e.__esModule?e:{default:e}}
},{"./web-mercator-viewport":"btK9","./get-bounds":"tHha","./fit-bounds":"Lip1","./normalize-viewport-props":"BccJ","./fly-to-viewport":"Ytqr","./web-mercator-utils":"eDN9"}],"gw95":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var o=s(require("@babel/runtime/helpers/esm/toConsumableArray")),t=s(require("@babel/runtime/helpers/esm/slicedToArray")),a=require("../../lib/constants"),n=s(require("../project/project")),e=require("math.gl"),r=s(require("../../utils/memoize")),i=require("@math.gl/web-mercator");function s(o){return o&&o.__esModule?o:{default:o}}function h(o,t){var a;if("undefined"==typeof Symbol||null==o[Symbol.iterator]){if(Array.isArray(o)||(a=d(o))||t&&o&&"number"==typeof o.length){a&&(o=a);var n=0,e=function(){};return{s:e,n:function(){return n>=o.length?{done:!0}:{done:!1,value:o[n++]}},e:function(o){throw o},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,s=!1;return{s:function(){a=o[Symbol.iterator]()},n:function(){var o=a.next();return i=o.done,o},e:function(o){s=!0,r=o},f:function(){try{i||null==a.return||a.return()}finally{if(s)throw r}}}}function d(o,t){if(o){if("string"==typeof o)return u(o,t);var a=Object.prototype.toString.call(o).slice(8,-1);return"Object"===a&&o.constructor&&(a=o.constructor.name),"Map"===a||"Set"===a?Array.from(o):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?u(o,t):void 0}}function u(o,t){(null==t||t>o.length)&&(t=o.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=o[a];return n}var w="\nconst int max_lights = 2;\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\nuniform vec4 shadow_uProjectCenters[max_lights];\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform int shadow_uLightId;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\n  if (shadow_uDrawShadowMap) {\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\n  }\n  if (shadow_uUseShadowMap) {\n    for (int i = 0; i < max_lights; i++) {\n      if(i < int(shadow_uLightCount)) {\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\n      }\n    }\n  }\n  return gl_Position;\n}\n",c="\nconst int max_lights = 2;\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform sampler2D shadow_uShadowMap0;\nuniform sampler2D shadow_uShadowMap1;\nuniform vec4 shadow_uColor;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\n\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\n\n  float z = dot(rgbaDepth, bitUnpackShift);\n  return smoothstep(0.001, 0.01, position.z - z);\n}\n\nvec4 shadow_filterShadowColor(vec4 color) {\n  if (shadow_uDrawShadowMap) {\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\n    return rgbaDepth;\n  }\n  if (shadow_uUseShadowMap) {\n    float shadowAlpha = 0.0;\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\n    if(shadow_uLightCount > 1.0) {\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\n    }\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\n\n    return vec4(\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\n      blendedAlpha\n    );\n  }\n  return color;\n}\n",l=(0,r.default)(g),p=(0,r.default)(M),f=[0,0,0,1],_=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function m(o,a){var n=(0,t.default)(o,3),e=n[0],r=n[1],s=n[2],h=(0,i.pixelsToWorld)([e,r,s],a);return Number.isFinite(s)?h:[h[0],h[1],0]}function g(o){var t=o.viewport,a=o.center;return new e.Matrix4(t.viewProjectionMatrix).invert().transform(a)}function M(t){var a,n=t.viewport,r=t.shadowMatrices,i=[],s=n.pixelUnprojectionMatrix,d=n.isGeospatial?void 0:1,u=[[0,0,d],[n.width,0,d],[0,n.height,d],[n.width,n.height,d],[0,0,-1],[n.width,0,-1],[0,n.height,-1],[n.width,n.height,-1]].map(function(o){return m(o,s)}),w=h(r);try{var c=function(){var t=a.value,r=t.clone().translate(new e.Vector3(n.center).negate()),s=u.map(function(o){return r.transform(o)}),h=(new e.Matrix4).ortho({left:Math.min.apply(Math,(0,o.default)(s.map(function(o){return o[0]}))),right:Math.max.apply(Math,(0,o.default)(s.map(function(o){return o[0]}))),bottom:Math.min.apply(Math,(0,o.default)(s.map(function(o){return o[1]}))),top:Math.max.apply(Math,(0,o.default)(s.map(function(o){return o[1]}))),near:Math.min.apply(Math,(0,o.default)(s.map(function(o){return-o[2]}))),far:Math.max.apply(Math,(0,o.default)(s.map(function(o){return-o[2]})))});i.push(h.multiplyRight(t))};for(w.s();!(a=w.n()).done;)c()}catch(l){w.e(l)}finally{w.f()}return i}function v(){for(var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={shadow_uDrawShadowMap:Boolean(o.drawToShadowMap),shadow_uUseShadowMap:!!o.shadowMaps&&o.shadowMaps.length>0,shadow_uColor:o.shadowColor||f,shadow_uLightId:o.shadowLightId||0,shadow_uLightCount:o.shadowMatrices.length},r=l({viewport:o.viewport,center:t.project_uCenter}),i=[],s=p({shadowMatrices:o.shadowMatrices,viewport:o.viewport}).slice(),h=0;h<o.shadowMatrices.length;h++){var d=s[h],u=d.clone().translate(new e.Vector3(o.viewport.center).negate());t.project_uCoordinateSystem===a.COORDINATE_SYSTEM.LNGLAT&&t.project_uProjectionMode===a.PROJECTION_MODE.WEB_MERCATOR?(s[h]=u,i[h]=r):(s[h]=d.clone().multiplyRight(_),i[h]=u.transform(r))}for(var w=0;w<s.length;w++)n["shadow_uViewProjectionMatrices[".concat(w,"]")]=s[w],n["shadow_uProjectCenters[".concat(w,"]")]=i[w],o.shadowMaps&&o.shadowMaps.length>0?n["shadow_uShadowMap".concat(w)]=o.shadowMaps[w]:n["shadow_uShadowMap".concat(w)]=o.dummyShadowMap;return n}var b={name:"shadow",dependencies:[n.default],vs:w,fs:c,inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    position = shadow_setVertexPosition(geometry.position);\n    ","fs:DECKGL_FILTER_COLOR":"\n    color = shadow_filterShadowColor(color);\n    "},getUniforms:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(o.drawToShadowMap||o.shadowMaps&&o.shadowMaps.length>0){var a={},n=o.shadowEnabled;return(void 0===n||n)&&o.shadowMatrices&&o.shadowMatrices.length>0?Object.assign(a,v(o,t)):Object.assign(a,{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1}),a}return{}}};exports.default=b;
},{"@babel/runtime/helpers/esm/toConsumableArray":"AdMH","@babel/runtime/helpers/esm/slicedToArray":"TBeo","../../lib/constants":"ysbg","../project/project":"NVOm","math.gl":"xAaq","../../utils/memoize":"uXG5","@math.gl/web-mercator":"PqV4"}],"Vaj8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var i=require("@luma.gl/core"),e=Object.assign({inject:{"vs:DECKGL_FILTER_COLOR":"\n    picking_setPickingColor(geometry.pickingColor);\n    // for picking depth values\n    picking_setPickingAttribute(geometry.position.z);\n    ","fs:DECKGL_FILTER_COLOR":{order:99,injection:"\n    // use highlight color if this fragment belongs to the selected object.\n    color = picking_filterHighlightColor(color);\n\n    // use picking color if rendering to picking FBO.\n    color = picking_filterPickingColor(color);\n      "}}},i.picking);exports.default=e;
},{"@luma.gl/core":"iuAK"}],"vZnx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createProgramManager=d,Object.defineProperty(exports,"gouraudLighting",{enumerable:!0,get:function(){return e.gouraudLighting}}),Object.defineProperty(exports,"phongLighting",{enumerable:!0,get:function(){return e.phongLighting}}),Object.defineProperty(exports,"project",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"project32",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"shadow",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"picking",{enumerable:!0,get:function(){return u.default}});var e=require("@luma.gl/core"),r=a(require("./misc/geometry")),t=a(require("./project/project")),n=a(require("./project32/project32")),o=a(require("./shadow/shadow")),u=a(require("./picking/picking"));function a(e){return e&&e.__esModule?e:{default:e}}function i(e,r){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=c(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,a=!0,i=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return a=e.done,e},e:function(e){i=!0,u=e},f:function(){try{a||null==t.return||t.return()}finally{if(i)throw u}}}}function c(e,r){if(e){if("string"==typeof e)return f(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?f(e,r):void 0}}function f(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var l=[r.default,t.default],g=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function d(r){var t,n=e.ProgramManager.getDefaultProgramManager(r),o=i(l);try{for(o.s();!(t=o.n()).done;){var u=t.value;n.addDefaultModule(u)}}catch(d){o.e(d)}finally{o.f()}var a,c=i(g);try{for(c.s();!(a=c.n()).done;){var f=a.value;n.addShaderHook(f)}}catch(d){c.e(d)}finally{c.f()}return n}
},{"@luma.gl/core":"iuAK","./misc/geometry":"uFGI","./project/project":"NVOm","./project32/project32":"qxVk","./shadow/shadow":"gw95","./picking/picking":"Vaj8"}],"kPtk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AmbientLight=void 0;var e=t(require("@babel/runtime/helpers/esm/classCallCheck"));function t(e){return e&&e.__esModule?e:{default:e}}var i=[255,255,255],r=1,s=0,n=function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,e.default)(this,t);var o=n.color,a=void 0===o?i:o,l=n.intensity,d=void 0===l?r:l;this.id=n.id||"ambient-".concat(s++),this.color=a,this.intensity=d,this.type="ambient"};exports.AmbientLight=n;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP"}],"n3wt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DirectionalLight=void 0;var e=r(require("@babel/runtime/helpers/esm/classCallCheck")),t=r(require("@babel/runtime/helpers/esm/createClass")),i=require("math.gl");function r(e){return e&&e.__esModule?e:{default:e}}var o=[255,255,255],n=1,s=[0,0,-1],a=0,l=function(){function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,e.default)(this,r);var l=t.color,c=void 0===l?o:l,d=t.intensity,u=void 0===d?n:d,h=t.direction,v=void 0===h?s:h,f=t._shadow,p=void 0!==f&&f;this.id=t.id||"directional-".concat(a++),this.color=c,this.intensity=u,this.type="directional",this.direction=new i.Vector3(v).normalize().toArray(),this.shadow=p}return(0,t.default)(r,[{key:"getProjectedLight",value:function(){return this}}]),r}();exports.DirectionalLight=l;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","math.gl":"xAaq"}],"Z10T":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("@babel/runtime/helpers/esm/classCallCheck")),t=r(require("@babel/runtime/helpers/esm/createClass"));function r(e){return e&&e.__esModule?e:{default:e}}var u=function(){function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,e.default)(this,r);var u=t.id,s=void 0===u?"effect":u;this.id=s,this.props={},Object.assign(this.props,t)}return(0,t.default)(r,[{key:"preRender",value:function(){}},{key:"getModuleParameters",value:function(){}},{key:"cleanup",value:function(){}}]),r}();exports.default=u;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph"}],"ay01":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("@babel/runtime/helpers/esm/classCallCheck")),t=s(require("@babel/runtime/helpers/esm/createClass"));function s(e){return e&&e.__esModule?e:{default:e}}var r=function(){function s(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,e.default)(this,s);var i=r.id,u=void 0===i?"pass":i;this.id=u,this.gl=t,this.props={},Object.assign(this.props,r)}return(0,t.default)(s,[{key:"setProps",value:function(e){Object.assign(this.props,e)}},{key:"render",value:function(){}},{key:"cleanup",value:function(){}}]),s}();exports.default=r;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph"}],"oM9Q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.layerIndexResolver=y,exports.default=void 0;var e=u(require("@babel/runtime/helpers/esm/classCallCheck")),r=u(require("@babel/runtime/helpers/esm/createClass")),t=u(require("@babel/runtime/helpers/esm/inherits")),a=u(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),n=u(require("@babel/runtime/helpers/esm/getPrototypeOf")),i=u(require("./pass")),o=require("@luma.gl/core"),s=u(require("../utils/log"));function u(e){return e&&e.__esModule?e:{default:e}}function l(e,r){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=c(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==t.return||t.return()}finally{if(s)throw i}}}}function c(e,r){if(e){if("string"==typeof e)return f(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?f(e,r):void 0}}function f(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,a=new Array(r);t<r;t++)a[t]=e[t];return a}function v(e){var r=p();return function(){var t,i=(0,n.default)(e);if(r){var o=(0,n.default)(this).constructor;t=Reflect.construct(i,arguments,o)}else t=i.apply(this,arguments);return(0,a.default)(this,t)}}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var d=function(a){(0,t.default)(i,a);var n=v(i);function i(){return(0,e.default)(this,i),n.apply(this,arguments)}return(0,r.default)(i,[{key:"render",value:function(e){var r=this.gl;return(0,o.setParameters)(r,{framebuffer:e.target}),this._drawLayers(e)}},{key:"_drawLayers",value:function(e){var r=e.viewports,t=e.views,a=e.onViewportActive,n=e.clearCanvas,i=void 0===n||n,o=this.gl;i&&m(o);var s,u=[],c=l(r);try{for(c.s();!(s=c.n()).done;){var f=s.value,v=f.viewport||f,p=t&&t[v.id];a(v);var d=this._getDrawLayerParams(v,e);e.view=p;var y,h=l(v.subViewports||[v]);try{for(h.s();!(y=h.n()).done;){var g=y.value;e.viewport=g;var w=this._drawLayersInViewport(o,e,d);u.push(w)}}catch(b){h.e(b)}finally{h.f()}}}catch(b){c.e(b)}finally{c.f()}return u}},{key:"_getDrawLayerParams",value:function(e,r){for(var t=r.layers,a=r.pass,n=void 0===a?"unknown":a,i=r.layerFilter,o=r.effects,s=r.moduleParameters,u=[],l=y(),c=0;c<t.length;c++){var f=t[c],v=this._shouldDrawLayer(f,e,n,i),p={shouldDrawLayer:v,layerRenderIndex:l(f,v)};v&&(p.moduleParameters=this._getModuleParameters(f,o,n,s),p.layerParameters=this.getLayerParameters(f,c)),u[c]=p}return u}},{key:"_drawLayersInViewport",value:function(e,r,t){var a=r.layers,n=r.onError,i=r.viewport,u=r.view,l=h(e,{viewport:i});if(u&&u.props.clear){var c=!0===u.props.clear?{color:!0,depth:!0}:u.props.clear;(0,o.withParameters)(e,{scissorTest:!0,scissor:l},function(){return(0,o.clear)(e,c)})}var f={totalCount:a.length,visibleCount:0,compositeCount:0,pickableCount:0};(0,o.setParameters)(e,{viewport:l});for(var v=0;v<a.length;v++){var p=a[v],d=t[v],y=d.shouldDrawLayer,m=d.layerRenderIndex,g=d.moduleParameters,w=d.layerParameters;if(y&&p.props.pickable&&f.pickableCount++,p.isComposite)f.compositeCount++;else if(y){f.visibleCount++,g.viewport=i;try{p.drawLayer({moduleParameters:g,uniforms:{layerIndex:m},parameters:w})}catch(b){n?n(b,p):s.default.error("error during drawing of ".concat(p),b)()}}}return f}},{key:"shouldDrawLayer",value:function(e){return!0}},{key:"getModuleParameters",value:function(e,r){return null}},{key:"getLayerParameters",value:function(e,r){return e.props.parameters}},{key:"_shouldDrawLayer",value:function(e,r,t,a){var n=this.shouldDrawLayer(e)&&e.props.visible;return n&&a&&(n=a({layer:e,viewport:r,isPicking:t.startsWith("picking"),renderPass:t})),n&&e.activateViewport(r),n}},{key:"_getModuleParameters",value:function(e,r,t,a){var n=Object.assign(Object.create(e.props),{autoWrapLongitude:e.wrapLongitude,viewport:e.context.viewport,mousePosition:e.context.mousePosition,pickingActive:0,devicePixelRatio:(0,o.cssToDeviceRatio)(this.gl)});if(r){var i,s=l(r);try{for(s.s();!(i=s.n()).done;){var u=i.value;Object.assign(n,u.getModuleParameters(e))}}catch(c){s.e(c)}finally{s.f()}}return Object.assign(n,this.getModuleParameters(e,r),a)}}]),i}(i.default);function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t={};return function a(n,i){var o,s=n.props._offset,u=n.id,l=n.parent&&n.parent.id;if(!l||l in r||a(n.parent,!1),l in t){var c=t[l]=t[l]||y(r[l],r);o=c(n,i),t[u]=c}else Number.isFinite(s)?(o=s+(r[l]||0),t[u]=null):o=e;return i&&o>=e&&(e=o+1),r[u]=o,o}}function h(e,r){var t=r.viewport,a=e.canvas?e.canvas.clientHeight||e.canvas.height:100,n=t,i=(0,o.cssToDeviceRatio)(e);return[n.x*i,(a-n.y-n.height)*i,n.width*i,n.height*i]}function m(e){var r=e.drawingBufferWidth,t=e.drawingBufferHeight;(0,o.setParameters)(e,{viewport:[0,0,r,t]}),e.clear(16640)}exports.default=d;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","./pass":"ay01","@luma.gl/core":"iuAK","../utils/log":"GVus"}],"STtv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("@babel/runtime/helpers/esm/defineProperty")),t=o(require("@babel/runtime/helpers/esm/classCallCheck")),r=o(require("@babel/runtime/helpers/esm/createClass")),u=o(require("@babel/runtime/helpers/esm/get")),a=o(require("@babel/runtime/helpers/esm/inherits")),n=o(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),i=o(require("@babel/runtime/helpers/esm/getPrototypeOf")),s=o(require("./layers-pass")),l=require("@luma.gl/core");function o(e){return e&&e.__esModule?e:{default:e}}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);t&&(u=u.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,u)}return r}function h(t){for(var r=1;r<arguments.length;r++){var u=null!=arguments[r]?arguments[r]:{};r%2?f(Object(u),!0).forEach(function(r){(0,e.default)(t,r,u[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(u)):f(Object(u)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(u,e))})}return t}function c(e){var t=d();return function(){var r,u=(0,i.default)(e);if(t){var a=(0,i.default)(this).constructor;r=Reflect.construct(u,arguments,a)}else r=u.apply(this,arguments);return(0,n.default)(this,r)}}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var p=function(n){(0,a.default)(o,n);var s=c(o);function o(r,u){var a,n,i;return(0,t.default)(this,o),(i=s.call(this,r,u)).shadowMap=new l.Texture2D(r,{width:1,height:1,parameters:(a={},(0,e.default)(a,10241,9729),(0,e.default)(a,10240,9729),(0,e.default)(a,10242,33071),(0,e.default)(a,10243,33071),a)}),i.depthBuffer=new l.Renderbuffer(r,{format:33189,width:1,height:1}),i.fbo=new l.Framebuffer(r,{id:"shadowmap",width:1,height:1,attachments:(n={},(0,e.default)(n,36064,i.shadowMap),(0,e.default)(n,36096,i.depthBuffer),n)}),i}return(0,r.default)(o,[{key:"render",value:function(e){var t=this,r=this.fbo;(0,l.withParameters)(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},function(){var a=e.viewports[0],n=(0,l.cssToDeviceRatio)(t.gl),s=a.width*n,f=a.height*n;s===r.width&&f===r.height||r.resize({width:s,height:f}),(0,u.default)((0,i.default)(o.prototype),"render",t).call(t,h(h({},e),{},{target:r,pass:"shadow"}))})}},{key:"shouldDrawLayer",value:function(e){return!1!==e.props.shadowEnabled}},{key:"getModuleParameters",value:function(){return{drawToShadowMap:!0}}},{key:"delete",value:function(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}]),o}(s.default);exports.default=p;
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/get":"KGqu","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","./layers-pass":"oM9Q","@luma.gl/core":"iuAK"}],"MByF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=c(require("@babel/runtime/helpers/esm/classCallCheck")),t=c(require("@babel/runtime/helpers/esm/createClass")),r=c(require("@babel/runtime/helpers/esm/inherits")),a=c(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),i=c(require("@babel/runtime/helpers/esm/getPrototypeOf")),n=require("@luma.gl/core"),s=require("./ambient-light"),o=require("./directional-light"),h=c(require("../../lib/effect")),l=require("math.gl"),u=c(require("../../passes/shadow-pass")),d=c(require("../../shaderlib/shadow/shadow"));function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=g(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,s=!0,o=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return s=e.done,e},e:function(e){o=!0,n=e},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw n}}}}function g(e,t){if(e){if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function m(e){var t=w();return function(){var r,n=(0,i.default)(e);if(t){var s=(0,i.default)(this).constructor;r=Reflect.construct(n,arguments,s)}else r=n.apply(this,arguments);return(0,a.default)(this,r)}}function w(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var y={color:[255,255,255],intensity:1},v=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],M=[0,0,0,200/255],b=function(a){(0,r.default)(h,a);var i=m(h);function h(t){var r;for(var a in(0,e.default)(this,h),(r=i.call(this,t)).ambientLight=null,r.directionalLights=[],r.pointLights=[],r.shadowColor=M,r.shadowPasses=[],r.shadowMaps=[],r.dummyShadowMap=null,r.shadow=!1,r.programManager=null,t){var n=t[a];switch(n.type){case"ambient":r.ambientLight=n;break;case"directional":r.directionalLights.push(n);break;case"point":r.pointLights.push(n)}}return r._applyDefaultLights(),r.shadow=r.directionalLights.some(function(e){return e.shadow}),r}return(0,t.default)(h,[{key:"preRender",value:function(e,t){var r=t.layers,a=t.layerFilter,i=t.viewports,s=t.onViewportActive,o=t.views;if(this.shadow){this.shadowMatrices=this._createLightMatrix(),0===this.shadowPasses.length&&this._createShadowPasses(e),this.programManager||(this.programManager=n.ProgramManager.getDefaultProgramManager(e),d.default&&this.programManager.addDefaultModule(d.default)),this.dummyShadowMap||(this.dummyShadowMap=new n.Texture2D(e,{width:1,height:1}));for(var h=0;h<this.shadowPasses.length;h++){this.shadowPasses[h].render({layers:r,layerFilter:a,viewports:i,onViewportActive:s,views:o,moduleParameters:{shadowLightId:h,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}}},{key:"getModuleParameters",value:function(e){var t=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return t.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(function(t){return t.getProjectedLight({layer:e})}),pointLights:this.pointLights.map(function(t){return t.getProjectedLight({layer:e})})},t}},{key:"cleanup",value:function(){var e,t=f(this.shadowPasses);try{for(t.s();!(e=t.n()).done;){e.value.delete()}}catch(r){t.e(r)}finally{t.f()}this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(d.default),this.programManager=null)}},{key:"_createLightMatrix",value:function(){var e,t=[],r=f(this.directionalLights);try{for(r.s();!(e=r.n()).done;){var a=e.value,i=(new l.Matrix4).lookAt({eye:new l.Vector3(a.direction).negate()});t.push(i)}}catch(n){r.e(n)}finally{r.f()}return t}},{key:"_createShadowPasses",value:function(e){for(var t=0;t<this.directionalLights.length;t++){var r=new u.default(e);this.shadowPasses[t]=r,this.shadowMaps[t]=r.shadowMap}}},{key:"_applyDefaultLights",value:function(){var e=this.ambientLight,t=this.pointLights,r=this.directionalLights;e||0!==t.length||0!==r.length||(this.ambientLight=new s.AmbientLight(y),this.directionalLights.push(new o.DirectionalLight(v[0]),new o.DirectionalLight(v[1])))}}]),h}(h.default);exports.default=b;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@luma.gl/core":"iuAK","./ambient-light":"kPtk","./directional-light":"n3wt","../../lib/effect":"Z10T","math.gl":"xAaq","../../passes/shadow-pass":"STtv","../../shaderlib/shadow/shadow":"gw95"}],"yeLJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.TypedArrayManager=void 0;var e=t(require("@babel/runtime/helpers/esm/classCallCheck")),r=t(require("@babel/runtime/helpers/esm/createClass"));function t(e){return e&&e.__esModule?e:{default:e}}var i=function(){function t(r){(0,e.default)(this,t),this._pool=[],this.props={overAlloc:2,poolSize:100},this.setProps(r)}return(0,r.default)(t,[{key:"setProps",value:function(e){Object.assign(this.props,e)}},{key:"allocate",value:function(e,r,t){var i,n=t.size,o=void 0===n?1:n,s=t.type,a=t.padding,l=void 0===a?0:a,u=t.copy,f=void 0!==u&&u,p=t.initialize,c=void 0!==p&&p,h=t.maxCount,v=s||e&&e.constructor||Float32Array,d=r*o+l;if(ArrayBuffer.isView(e)){if(d<=e.length)return e;if(d*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new v(e.buffer,0,d)}h&&(i=h*o+l);var y=this._allocate(v,d,c,i);return e&&f?y.set(e):c||y.fill(0,0,4),this._release(e),y}},{key:"release",value:function(e){this._release(e)}},{key:"_allocate",value:function(e,r,t,i){var n=Math.max(Math.ceil(r*this.props.overAlloc),1);n>i&&(n=i);var o=this._pool,s=e.BYTES_PER_ELEMENT*n,a=o.findIndex(function(e){return e.byteLength>=s});if(a>=0){var l=new e(o.splice(a,1)[0],0,n);return t&&l.fill(0),l}return new e(n)}},{key:"_release",value:function(e){if(ArrayBuffer.isView(e)){var r=this._pool,t=e.buffer,i=t.byteLength,n=r.findIndex(function(e){return e.byteLength>=i});n<0?r.push(t):(n>0||r.length<this.props.poolSize)&&r.splice(n,0,t),r.length>this.props.poolSize&&r.shift()}}}]),t}();exports.TypedArrayManager=i;var n=new i;exports.default=n;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph"}],"ki6G":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createMat4=a,exports.mod=o,exports.extractCameraVectors=n,exports.getFrustumPlanes=m,exports.fp64LowPart=y,exports.toDoublePrecisionArray=f;var e=t(require("./typed-array-manager")),r=require("math.gl");function t(e){return e&&e.__esModule?e:{default:e}}function a(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function o(e,r){var t=e%r;return t<0?r+t:t}function n(e){var r=e.viewMatrix,t=e.viewMatrixInverse;return{eye:[t[12],t[13],t[14]],direction:[-r[2],-r[6],-r[10]],up:[r[1],r[5],r[9]],right:[r[0],r[4],r[8]]}}var c,s=new r.Vector3,i=new r.Vector3,d=new r.Vector3,l=new r.Vector3,u=new r.Vector3,p=new r.Vector3,v=new r.Vector3;function m(e){var t=e.aspect,a=e.near,o=e.far,n=e.fovyRadians,c=e.position,m=e.direction,y=e.up,f=e.right;i.copy(m);var w=1/i.len();i.normalize(),s.copy(c),d.copy(y);var x=1/d.len();d.normalize(),l.copy(f).normalize();var V=2*Math.tan(n/2)*a*x,b=V*t;u.copy(i).scale(a*w).add(s),p.copy(i).scale(o*w).add(s);var z=i.clone().negate(),g=z.dot(u),h={near:{distance:g,normal:z},far:{distance:i.dot(p),normal:i.clone()}};return v.copy(l).scale(.5*b).add(u).subtract(s).normalize(),z=new r.Vector3(v).cross(d),g=s.dot(z),h.right={normal:z,distance:g},v.copy(l).scale(.5*-b).add(u).subtract(s).normalize(),z=new r.Vector3(d).cross(v),g=s.dot(z),h.left={normal:z,distance:g},v.copy(d).scale(.5*V).add(u).subtract(s).normalize(),z=new r.Vector3(l).cross(v),g=s.dot(z),h.top={normal:z,distance:g},v.copy(d).scale(.5*-V).add(u).subtract(s).normalize(),z=new r.Vector3(v).cross(l),g=s.dot(z),h.bottom={normal:z,distance:g},h}function y(e){return e-Math.fround(e)}function f(r,t){var a=t.size,o=void 0===a?1:a,n=t.startIndex,s=void 0===n?0:n,i=t.endIndex;Number.isFinite(i)||(i=r.length);var d=(i-s)/o;c=e.default.allocate(c,d,{type:Float32Array,size:2*o});for(var l=s,u=0;l<i;){for(var p=0;p<o;p++){var v=r[l++];c[u+p]=v,c[u+p+o]=y(v)}u+=2*o}return c.subarray(0,d*o*2)}
},{"./typed-array-manager":"yeLJ","math.gl":"xAaq"}],"HjGN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=u(require("@babel/runtime/helpers/esm/slicedToArray")),e=u(require("@babel/runtime/helpers/esm/classCallCheck")),i=u(require("@babel/runtime/helpers/esm/createClass")),r=u(require("../utils/log")),s=require("../utils/math-utils"),a=require("math.gl"),n=l(require("gl-matrix/mat4")),o=require("@math.gl/web-mercator"),h=require("../lib/constants");function c(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return c=function(){return t},t}function l(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=c();if(e&&e.has(t))return e.get(t);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){var a=r?Object.getOwnPropertyDescriptor(t,s):null;a&&(a.get||a.set)?Object.defineProperty(i,s,a):i[s]=t[s]}return i.default=t,e&&e.set(t,i),i}function u(t){return t&&t.__esModule?t:{default:t}}var d=Math.PI/180,p=(0,s.createMat4)(),v=[0,0,0],f=0,M={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]},m=function(){function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,e.default)(this,c);var i=t.id,r=void 0===i?null:i,s=t.x,a=void 0===s?0:s,n=t.y,o=void 0===n?0:n,h=t.width,l=void 0===h?1:h,u=t.height,d=void 0===u?1:u;this.id=r||this.constructor.displayName||"viewport",this.x=a,this.y=o,this.width=l||1,this.height=d||1,this._frustumPlanes={},this._initViewMatrix(t),this._initProjectionMatrix(t),this._initPixelMatrices(),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return(0,i.default)(c,[{key:"equals",value:function(t){return t instanceof c&&(this===t||t.width===this.width&&t.height===this.height&&t.scale===this.scale&&(0,a.equals)(t.projectionMatrix,this.projectionMatrix)&&(0,a.equals)(t.viewMatrix,this.viewMatrix))}},{key:"project",value:function(e){var i=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).topLeft,r=void 0===i||i,s=this.projectPosition(e),a=(0,o.worldToPixels)(s,this.pixelProjectionMatrix),n=(0,t.default)(a,2),h=n[0],c=n[1],l=r?c:this.height-c;return 2===e.length?[h,l]:[h,l,a[2]]}},{key:"unproject",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.topLeft,s=void 0===r||r,a=i.targetZ,n=(0,t.default)(e,3),h=n[0],c=n[1],l=n[2],u=s?c:this.height-c,d=a&&a*this.distanceScales.unitsPerMeter[2],p=(0,o.pixelsToWorld)([h,u,l],this.pixelUnprojectionMatrix,d),v=this.unprojectPosition(p),f=(0,t.default)(v,3),M=f[0],m=f[1],x=f[2];return Number.isFinite(l)?[M,m,x]:Number.isFinite(a)?[M,m,a]:[M,m]}},{key:"projectPosition",value:function(e){var i=this.projectFlat(e),r=(0,t.default)(i,2);return[r[0],r[1],(e[2]||0)*this.distanceScales.unitsPerMeter[2]]}},{key:"unprojectPosition",value:function(e){var i=this.unprojectFlat(e),r=(0,t.default)(i,2);return[r[0],r[1],(e[2]||0)*this.distanceScales.metersPerUnit[2]]}},{key:"projectFlat",value:function(t){return this.isGeospatial?(0,o.lngLatToWorld)(t):t}},{key:"unprojectFlat",value:function(t){return this.isGeospatial?(0,o.worldToLngLat)(t):t}},{key:"getBounds",value:function(){var t={targetZ:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).z||0},e=this.unproject([0,0],t),i=this.unproject([this.width,0],t),r=this.unproject([0,this.height],t),s=this.unproject([this.width,this.height],t);return[Math.min(e[0],i[0],r[0],s[0]),Math.min(e[1],i[1],r[1],s[1]),Math.max(e[0],i[0],r[0],s[0]),Math.max(e[1],i[1],r[1],s[1])]}},{key:"getDistanceScales",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return t?(0,o.getDistanceScales)({longitude:t[0],latitude:t[1],highPrecision:!0}):this.distanceScales}},{key:"containsPixel",value:function(t){var e=t.x,i=t.y,r=t.width,s=void 0===r?1:r,a=t.height,n=void 0===a?1:a;return e<this.x+this.width&&this.x<e+s&&i<this.y+this.height&&this.y<i+n}},{key:"getFrustumPlanes",value:function(){if(this._frustumPlanes.near)return this._frustumPlanes;var t=this.projectionProps,e=t.near,i=t.far,r=t.fovyRadians,a=t.aspect;return Object.assign(this._frustumPlanes,(0,s.getFrustumPlanes)({aspect:a,near:e,far:i,fovyRadians:r,position:this.cameraPosition,direction:this.cameraDirection,up:this.cameraUp,right:this.cameraRight})),this._frustumPlanes}},{key:"getCameraPosition",value:function(){return this.cameraPosition}},{key:"getCameraDirection",value:function(){return this.cameraDirection}},{key:"getCameraUp",value:function(){return this.cameraUp}},{key:"_createProjectionMatrix",value:function(t){var e=t.orthographic,i=t.fovyRadians,r=t.aspect,s=t.focalDistance,n=t.near,o=t.far;return e?(new a.Matrix4).orthographic({fovy:i,aspect:r,focalDistance:s,near:n,far:o}):(new a.Matrix4).perspective({fovy:i,aspect:r,near:n,far:o})}},{key:"_initViewMatrix",value:function(t){var e=t.viewMatrix,i=void 0===e?p:e,r=t.longitude,s=void 0===r?null:r,n=t.latitude,h=void 0===n?null:n,c=t.zoom,l=void 0===c?null:c,u=t.position,d=void 0===u?null:u,m=t.modelMatrix,x=void 0===m?null:m,g=t.focalDistance,P=void 0===g?1:g,j=t.distanceScales,y=void 0===j?null:j;this.isGeospatial=Number.isFinite(h)&&Number.isFinite(s),this.zoom=l,Number.isFinite(this.zoom)||(this.zoom=this.isGeospatial?(0,o.getMeterZoom)({latitude:h})+Math.log2(P):f);var w=Math.pow(2,this.zoom);this.scale=w,this.distanceScales=this.isGeospatial?(0,o.getDistanceScales)({latitude:h,longitude:s}):y||M,this.focalDistance=P,this.distanceScales.metersPerUnit=new a.Vector3(this.distanceScales.metersPerUnit),this.distanceScales.unitsPerMeter=new a.Vector3(this.distanceScales.unitsPerMeter),this.position=v,this.meterOffset=v,d&&(this.position=d,this.modelMatrix=x,this.meterOffset=x?x.transformVector(d):d),this.isGeospatial?(this.longitude=s,this.latitude=h,this.center=this._getCenterInWorld({longitude:s,latitude:h})):this.center=d?this.projectPosition(d):[0,0,0],this.viewMatrixUncentered=i,this.viewMatrix=(new a.Matrix4).multiplyRight(this.viewMatrixUncentered).translate(new a.Vector3(this.center||v).negate())}},{key:"_getCenterInWorld",value:function(t){var e=t.longitude,i=t.latitude,r=this.meterOffset,s=this.distanceScales,n=new a.Vector3(this.projectPosition([e,i,0]));if(r){var o=new a.Vector3(r).scale(s.unitsPerMeter);n.add(o)}return n}},{key:"_initProjectionMatrix",value:function(t){var e=t.projectionMatrix,i=void 0===e?null:e,r=t.orthographic,s=void 0!==r&&r,a=t.fovyRadians,n=t.fovy,o=void 0===n?75:n,h=t.near,c=void 0===h?.1:h,l=t.far,u=void 0===l?1e3:l,p=t.focalDistance,v=void 0===p?1:p;this.projectionProps={orthographic:s,fovyRadians:a||o*d,aspect:this.width/this.height,focalDistance:v,near:c,far:u},this.projectionMatrix=i||this._createProjectionMatrix(this.projectionProps)}},{key:"_initPixelMatrices",value:function(){var t=(0,s.createMat4)();n.multiply(t,t,this.projectionMatrix),n.multiply(t,t,this.viewMatrix),this.viewProjectionMatrix=t,this.viewMatrixInverse=n.invert([],this.viewMatrix)||this.viewMatrix;var e=(0,s.extractCameraVectors)({viewMatrix:this.viewMatrix,viewMatrixInverse:this.viewMatrixInverse}),i=e.eye,a=e.direction,o=e.up,h=e.right;this.cameraPosition=i,this.cameraDirection=a,this.cameraUp=o,this.cameraRight=h;var c=(0,s.createMat4)(),l=(0,s.createMat4)();n.scale(c,c,[this.width/2,-this.height/2,1]),n.translate(c,c,[1,-1,0]),n.multiply(l,c,this.viewProjectionMatrix),this.pixelProjectionMatrix=l,this.viewportMatrix=c,this.pixelUnprojectionMatrix=n.invert((0,s.createMat4)(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||r.default.warn("Pixel project matrix not invertible")()}},{key:"metersPerPixel",get:function(){return this.distanceScales.metersPerUnit[2]/this.scale}},{key:"projectionMode",get:function(){return this.isGeospatial?this.zoom<12?h.PROJECTION_MODE.WEB_MERCATOR:h.PROJECTION_MODE.WEB_MERCATOR_AUTO_OFFSET:h.PROJECTION_MODE.IDENTITY}}]),c}();exports.default=m,m.displayName="Viewport";
},{"@babel/runtime/helpers/esm/slicedToArray":"TBeo","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","../utils/log":"GVus","../utils/math-utils":"ki6G","math.gl":"xAaq","gl-matrix/mat4":"w3aR","@math.gl/web-mercator":"PqV4","../lib/constants":"ysbg"}],"Rf6Y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=p(require("@babel/runtime/helpers/esm/defineProperty")),t=p(require("@babel/runtime/helpers/esm/classCallCheck")),r=p(require("@babel/runtime/helpers/esm/createClass")),i=p(require("@babel/runtime/helpers/esm/assertThisInitialized")),n=p(require("@babel/runtime/helpers/esm/inherits")),o=p(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),a=p(require("@babel/runtime/helpers/esm/getPrototypeOf")),u=p(require("./viewport")),l=require("@math.gl/web-mercator"),s=h(require("gl-matrix/vec2")),c=require("math.gl");function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function h(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=i?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=e[n]}return r.default=e,t&&t.set(e,r),r}function p(e){return e&&e.__esModule?e:{default:e}}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function g(t){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?d(Object(i),!0).forEach(function(r){(0,e.default)(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):d(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function b(e){var t=v();return function(){var r,i=(0,a.default)(e);if(t){var n=(0,a.default)(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return(0,o.default)(this,r)}}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var y=function(e){(0,n.default)(a,e);var o=b(a);function a(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,t.default)(this,a);var n=r.latitude,u=void 0===n?0:n,s=r.longitude,f=void 0===s?0:s,h=r.zoom,p=void 0===h?11:h,d=r.pitch,g=void 0===d?0:d,b=r.bearing,v=void 0===b?0:b,y=r.nearZMultiplier,m=void 0===y?.1:y,w=r.farZMultiplier,O=void 0===w?1.01:w,j=r.orthographic,M=void 0!==j&&j,P=r.repeat,x=void 0!==P&&P,q=r.worldOffset,_=void 0===q?0:q,D=r.width,k=r.height,z=r.altitude,L=void 0===z?1.5:z,V=Math.pow(2,p);D=D||1,k=k||1,L=Math.max(.75,L);var R=(0,l.getProjectionParameters)({width:D,height:k,pitch:g,altitude:L,nearZMultiplier:m,farZMultiplier:O}),B=R.fov,C=R.aspect,T=R.focalDistance,W=R.near,Z=R.far,S=(0,l.getViewMatrix)({height:k,pitch:g,bearing:v,scale:V,altitude:L});_&&(S=(new c.Matrix4).translate([512*_,0,0]).multiplyLeft(S));var E=Object.assign({},r,{width:D,height:k,viewMatrix:S,longitude:f,latitude:u,zoom:p,orthographic:M,fovyRadians:B,aspect:C,focalDistance:M?T:1,near:W,far:Z});return(e=o.call(this,E)).latitude=u,e.longitude=f,e.zoom=p,e.pitch=g,e.bearing=v,e.altitude=L,e.orthographic=M,e._subViewports=x?[]:null,Object.freeze((0,i.default)(e)),e}return(0,r.default)(a,[{key:"addMetersToLngLat",value:function(e,t){return(0,l.addMetersToLngLat)(e,t)}},{key:"getMapCenterByLngLatPosition",value:function(e){var t=e.lngLat,r=e.pos,i=(0,l.pixelsToWorld)(r,this.pixelUnprojectionMatrix),n=this.projectFlat(t),o=s.add([],n,s.negate([],i)),a=s.add([],this.center,o);return this.unprojectFlat(a)}},{key:"getBounds",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,l.getBounds)(this,e.z||0);return[Math.min(t[0][0],t[1][0],t[2][0],t[3][0]),Math.min(t[0][1],t[1][1],t[2][1],t[3][1]),Math.max(t[0][0],t[1][0],t[2][0],t[3][0]),Math.max(t[0][1],t[1][1],t[2][1],t[3][1])]}},{key:"fitBounds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.width,i=this.height,n=(0,l.fitBounds)(Object.assign({width:r,height:i,bounds:e},t));return new a({width:r,height:i,longitude:n.longitude,latitude:n.latitude,zoom:n.zoom})}},{key:"subViewports",get:function(){if(this._subViewports&&!this._subViewports.length)for(var e=this.getBounds(),t=Math.floor((e[0]+180)/360),r=Math.ceil((e[2]-180)/360),i=t;i<=r;i++){var n=i?new a(g(g({},this),{},{worldOffset:i})):this;this._subViewports.push(n)}return this._subViewports}}]),a}(u.default);exports.default=y,y.displayName="WebMercatorViewport";
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/assertThisInitialized":"Rs9H","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","./viewport":"HjGN","@math.gl/web-mercator":"PqV4","gl-matrix/vec2":"XSo1","math.gl":"xAaq"}],"AJ0f":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getWorldPosition=O,exports.projectPosition=l;var e=f(require("@babel/runtime/helpers/esm/slicedToArray")),r=require("../../lib/constants"),t=require("./viewport-uniforms"),o=f(require("../../viewports/web-mercator-viewport")),i=u(require("gl-matrix/vec4")),n=u(require("gl-matrix/vec3")),a=require("@math.gl/web-mercator");function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s();if(r&&r.has(e))return r.get(e);var t={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var n=o?Object.getOwnPropertyDescriptor(e,i):null;n&&(n.get||n.set)?Object.defineProperty(t,i,n):t[i]=e[i]}return t.default=e,r&&r.set(e,t),t}function f(e){return e&&e.__esModule?e:{default:e}}function c(r,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=t.projectPosition(r);if(i&&t instanceof o.default){var a=(0,e.default)(r,3),s=a[0],u=a[1],f=a[2],c=void 0===f?0:f,d=t.getDistanceScales([s,u]);n[2]=c*d.unitsPerMeter[2]}return n}function d(e){var t=Object.assign({},e),o=e.coordinateSystem,i=e.viewport,n=e.coordinateOrigin,a=e.fromCoordinateSystem,s=e.fromCoordinateOrigin;return o===r.COORDINATE_SYSTEM.DEFAULT&&(o=i.isGeospatial?r.COORDINATE_SYSTEM.LNGLAT:r.COORDINATE_SYSTEM.CARTESIAN),void 0===a&&(t.fromCoordinateSystem=o),void 0===s&&(t.fromCoordinateOrigin=n),t.coordinateSystem=o,t}function O(t,o){var n=o.viewport,s=o.modelMatrix,u=o.coordinateSystem,f=o.coordinateOrigin,d=o.offsetMode,O=(0,e.default)(t,3),l=O[0],p=O[1],S=O[2],v=void 0===S?0:S;if(s){var m=i.transformMat4([],[l,p,v,1],s),T=(0,e.default)(m,3);l=T[0],p=T[1],v=T[2]}switch(u){case r.COORDINATE_SYSTEM.LNGLAT:return c([l,p,v],n,d);case r.COORDINATE_SYSTEM.LNGLAT_OFFSETS:return c([l+f[0],p+f[1],v+(f[2]||0)],n,d);case r.COORDINATE_SYSTEM.METER_OFFSETS:return c((0,a.addMetersToLngLat)(f,[l,p,v]),n,d);case r.COORDINATE_SYSTEM.CARTESIAN:default:return n.isGeospatial?[l+f[0],p+f[1],v+f[2]]:n.projectPosition([l,p,v])}}function l(e,r){var o=d(r),i=o.viewport,a=o.coordinateSystem,s=o.coordinateOrigin,u=o.modelMatrix,f=o.fromCoordinateSystem,c=o.fromCoordinateOrigin,l=(0,t.getOffsetOrigin)(i,a,s),p=l.geospatialOrigin,S=l.shaderCoordinateOrigin,v=l.offsetMode,m=O(e,{viewport:i,modelMatrix:u,coordinateSystem:f,coordinateOrigin:c,offsetMode:v});if(v){var T=i.projectPosition(p||S);n.sub(m,m,T)}return m}
},{"@babel/runtime/helpers/esm/slicedToArray":"TBeo","../../lib/constants":"ysbg","./viewport-uniforms":"iWu9","../../viewports/web-mercator-viewport":"Rf6Y","gl-matrix/vec4":"zWbG","gl-matrix/vec3":"AWBd","@math.gl/web-mercator":"PqV4"}],"CFZ8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("@babel/runtime/helpers/esm/defineProperty")),t=s(require("@babel/runtime/helpers/esm/classCallCheck")),r=s(require("@babel/runtime/helpers/esm/createClass"));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function n(t){for(var r=1;r<arguments.length;r++){var s=null!=arguments[r]?arguments[r]:{};r%2?u(Object(s),!0).forEach(function(r){(0,e.default)(t,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):u(Object(s)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}var o=function(){function e(r,s){(0,t.default)(this,e),this.opts=s,this.source=r}return(0,r.default)(e,[{key:"getValue",value:function(){var e=this.source.getBuffer(),t=this.getAccessor();if(e)return[e,t];var r=this.source.value,s=t.size,u=r;if(r&&r.length!==s){u=new Float32Array(s);for(var n=t.elementOffset||0,o=0;o<s;++o)u[o]=r[n+o]}return u}},{key:"getAccessor",value:function(){return n(n({},this.source.getAccessor()),this.opts)}},{key:"value",get:function(){return this.source.value}}]),e}();exports.default=o;
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph"}],"SsHL":[function(require,module,exports) {
"use strict";function r(r){switch(r){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.glArrayFromType=r;
},{}],"WlAL":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=l(require("@babel/runtime/helpers/esm/classCallCheck")),t=l(require("@babel/runtime/helpers/esm/createClass")),r=l(require("@babel/runtime/helpers/esm/defineProperty")),s=require("@luma.gl/core"),a=l(require("./shader-attribute")),i=require("./gl-utils"),n=l(require("../../utils/typed-array-manager")),u=require("../../utils/math-utils"),f=l(require("../../utils/log"));function l(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function c(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?o(Object(s),!0).forEach(function(t){(0,r.default)(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function h(e){return e.stride||e.size*e.bytesPerElement}function b(e,t){t.offset&&f.default.removed("shaderAttribute.offset","vertexOffset, elementOffset")();var r=h(e),s=("vertexOffset"in t?t.vertexOffset:e.vertexOffset||0)*r+(t.elementOffset||0)*e.bytesPerElement+(e.offset||0);return c(c({},t),{},{offset:s,stride:r})}function y(e,t){var r=b(e,t);return{high:r,low:c(c({},r),{},{offset:r.offset+4*e.size})}}var d=function(){function l(t,r){(0,e.default)(this,l),this.gl=t,this.id=r.id,this.size=r.size;var a=r.logicalType||r.type,n=5130===a,u=r.defaultValue;u=Number.isFinite(u)?[u]:u||new Array(this.size).fill(0),r.defaultValue=u;var f=a;n?f=5126:!f&&r.isIndexed?f=t&&(0,s.hasFeature)(t,s.FEATURES.ELEMENT_INDEX_UINT32)?5125:5123:f||(f=5126),r.logicalType=a,r.type=f;var o=(0,i.glArrayFromType)(a||f||5126);this.shaderAttributes={},this.doublePrecision=n,n&&!1===r.fp64&&(o=Float32Array),r.bytesPerElement=o.BYTES_PER_ELEMENT,this.defaultType=o,this.value=null,this.settings=r,this.state={externalBuffer:null,bufferAccessor:r,allocatedValue:null,constant:!1},this._buffer=null,this.setData(r)}return(0,t.default)(l,[{key:"delete",value:function(){this._buffer&&(this._buffer.delete(),this._buffer=null),n.default.release(this.state.allocatedValue)}},{key:"getShaderAttributes",value:function(e,t){if(this.doublePrecision){var s={},i=this.value instanceof Float64Array,n=y(this.getAccessor(),t||{});return s[e]=new a.default(this,n.high),s["".concat(e,"64Low")]=i?new a.default(this,n.low):new Float32Array(this.size),s}if(t){var u=b(this.getAccessor(),t);return(0,r.default)({},e,new a.default(this,u))}return(0,r.default)({},e,this)}},{key:"getBuffer",value:function(){return this.state.constant?null:this.state.externalBuffer||this._buffer}},{key:"getValue",value:function(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}},{key:"getAccessor",value:function(){return this.state.bufferAccessor}},{key:"setData",value:function(e){var t=this.state;ArrayBuffer.isView(e)?e={value:e}:e instanceof s.Buffer&&(e={buffer:e});var r=c(c({},this.settings),e);if(t.bufferAccessor=r,e.constant){var a=e.value;if(a=this._normalizeValue(a,[],0),this.settings.normalized&&(a=this._normalizeConstant(a)),!(!t.constant||!this._areValuesEqual(a,this.value)))return!1;t.externalBuffer=null,t.constant=!0,this.value=a}else if(e.buffer){var i=e.buffer;t.externalBuffer=i,t.constant=!1,this.value=e.value;var n=e.value instanceof Float64Array;r.type=e.type||i.accessor.type,r.bytesPerElement=i.accessor.BYTES_PER_ELEMENT*(n?2:1),r.stride=h(r)}else if(e.value){this._checkExternalBuffer(e);var f=e.value;t.externalBuffer=null,t.constant=!1,this.value=f,r.bytesPerElement=f.BYTES_PER_ELEMENT,r.stride=h(r);var l=this.buffer,o=this.byteOffset;this.doublePrecision&&f instanceof Float64Array&&(f=(0,u.toDoublePrecisionArray)(f,r));var b=f.byteLength+o+2*r.stride;l.byteLength<b&&l.reallocate(b),l.setAccessor(null),l.subData({data:f,offset:o}),r.type=e.type||l.accessor.type}return!0}},{key:"updateSubBuffer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.value,r=e.startOffset,s=void 0===r?0:r,a=e.endOffset;this.buffer.subData({data:this.doublePrecision&&t instanceof Float64Array?(0,u.toDoublePrecisionArray)(t,{size:this.size,startIndex:s,endIndex:a}):t.subarray(s,a),offset:s*t.BYTES_PER_ELEMENT+this.byteOffset})}},{key:"allocate",value:function(e){var t=e.numInstances,r=e.copy,s=void 0!==r&&r,a=this.state,i=a.allocatedValue,f=n.default.allocate(i,t+1,{size:this.size,type:this.defaultType,copy:s});this.value=f;var l=this.buffer,o=this.byteOffset;return l.byteLength<f.byteLength+o&&(l.reallocate(f.byteLength+o),s&&i&&l.subData({data:i instanceof Float64Array?(0,u.toDoublePrecisionArray)(i,this):i,offset:o})),a.allocatedValue=f,a.constant=!1,a.externalBuffer=null,a.bufferAccessor=this.settings,!0}},{key:"_checkExternalBuffer",value:function(e){var t=e.value;if(!e.constant&&t){var r=this.defaultType,s=!1;if(this.doublePrecision&&(s=t.BYTES_PER_ELEMENT<4),s)throw new Error("Attribute ".concat(this.id," does not support ").concat(t.constructor.name));t instanceof r||!this.settings.normalized||"normalized"in e||f.default.warn("Attribute ".concat(this.id," is normalized"))()}}},{key:"_normalizeConstant",value:function(e){switch(this.settings.type){case 5120:return new Float32Array(e).map(function(e){return(e+128)/255*2-1});case 5122:return new Float32Array(e).map(function(e){return(e+32768)/65535*2-1});case 5121:return new Float32Array(e).map(function(e){return e/255});case 5123:return new Float32Array(e).map(function(e){return e/65535});default:return e}}},{key:"_normalizeValue",value:function(e,t,r){var s=this.settings,a=s.defaultValue,i=s.size;if(Number.isFinite(e))return t[r]=e,t;if(!e)return t[r]=a[0],t;switch(i){case 4:t[r+3]=Number.isFinite(e[3])?e[3]:a[3];case 3:t[r+2]=Number.isFinite(e[2])?e[2]:a[2];case 2:t[r+1]=Number.isFinite(e[1])?e[1]:a[1];case 1:t[r+0]=Number.isFinite(e[0])?e[0]:a[0];break;default:for(var n=i;--n>=0;)t[r+n]=Number.isFinite(e[n])?e[n]:a[n]}return t}},{key:"_areValuesEqual",value:function(e,t){if(!e||!t)return!1;for(var r=this.size,s=0;s<r;s++)if(e[s]!==t[s])return!1;return!0}},{key:"buffer",get:function(){if(!this._buffer){var e=this.settings,t=e.isIndexed,r=e.type;this._buffer=new s.Buffer(this.gl,{id:this.id,target:t?34963:34962,accessor:{type:r}})}return this._buffer}},{key:"byteOffset",get:function(){var e=this.getAccessor();return e.vertexOffset?e.vertexOffset*h(e):0}}]),l}();exports.default=d;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/defineProperty":"iDM3","@luma.gl/core":"iuAK","./shader-attribute":"CFZ8","./gl-utils":"SsHL","../../utils/typed-array-manager":"yeLJ","../../utils/math-utils":"ki6G","../../utils/log":"GVus"}],"kai7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createIterable=t,exports.isAsyncIterable=n,exports.getAccessorFromBuffer=o;var r=[],e=[];function t(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,a=r,i={index:-1,data:t,target:[]};return t?"function"==typeof t[Symbol.iterator]?a=t:t.length>0&&(e.length=t.length,a=e):a=r,(n>0||Number.isFinite(o))&&(a=(Array.isArray(a)?a:Array.from(a)).slice(n,o),i.index=n-1),{iterable:a,objectInfo:i}}function n(r){return r&&r[Symbol.asyncIterator]}function o(r,e){var t=e.size,n=e.stride,o=e.offset,a=e.startIndices,i=e.nested,s=r.BYTES_PER_ELEMENT,f=n?n/s:t,c=o?o/s:0,l=Math.floor((r.length-c)/f);return function(e,n){var o=n.index,s=n.target;if(!a){for(var u=o*f+c,v=0;v<t;v++)s[v]=r[u+v];return s}var y,d=a[o],b=a[o+1]||l;if(i){y=new Array(b-d);for(var g=d;g<b;g++){var h=g*f+c;s=new Array(t);for(var x=0;x<t;x++)s[x]=r[h+x];y[g-d]=s}}else if(f===t)y=r.subarray(d*t+c,b*t+c);else{y=new r.constructor((b-d)*t);for(var A=0,p=d;p<b;p++)for(var m=p*f+c,E=0;E<t;E++)y[A++]=r[m+E]}return y}}
},{}],"gSVO":[function(require,module,exports) {
"use strict";function r(r){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0};return Array.isArray(r)?t(r,e,[]):e(r)?[r]:[]}function t(r,e,n){for(var o=-1;++o<r.length;){var i=r[o];Array.isArray(i)?t(i,e,n):e(i)&&n.push(i)}return n}function e(r){for(var t=r.target,e=r.source,n=r.start,o=void 0===n?0:n,i=r.count,u=void 0===i?1:i,a=e.length,s=u*a,c=0,f=o;c<a;c++)t[f++]=e[c];for(;c<s;)c<s-c?(t.copyWithin(o+c,o,o+c),c*=2):(t.copyWithin(o+c,o,o+s-c),c=s);return t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.flatten=r,exports.fillArray=e;
},{}],"UFya":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.add=t,exports.FULL=exports.EMPTY=void 0;var r=[];exports.EMPTY=r;var e=[[0,1/0]];function t(r,t){if(r===e)return r;if(t[0]<0&&(t[0]=0),t[0]>=t[1])return r;for(var s=[],o=r.length,p=0,a=0;a<o;a++){var u=r[a];u[1]<t[0]?(s.push(u),p=a+1):u[0]>t[1]?s.push(u):t=[Math.min(u[0],t[0]),Math.max(u[1],t[1])]}return s.splice(p,0,t),s}exports.FULL=e;
},{}],"LUSB":[function(require,module,exports) {
"use strict";function t(t){var e=t.source,r=t.target,a=t.start,s=void 0===a?0:a,n=t.end,i=t.size,o=t.getData;n=n||r.length;var u=e.length,g=n-s;if(u>g)r.set(e.subarray(0,g),s);else if(r.set(e,s),o)for(var c=u;c<g;)for(var f=o(c,e),v=0;v<i;v++)r[s+c]=f[v]||0,c++}function e(e){var r=e.source,a=e.target,s=e.size,n=e.getData,i=e.sourceStartIndices,o=e.targetStartIndices;if(!Array.isArray(o))return t({source:r,target:a,size:s,getData:n}),a;for(var u=0,g=0,c=n&&function(t,e){return n(t+g,e)},f=Math.min(i.length,o.length),v=1;v<f;v++){var d=i[v]*s,l=o[v]*s;t({source:r.subarray(u,d),target:a,start:g,end:l,size:s,getData:c}),u=d,g=l}return g<a.length&&t({source:[],target:a,start:g,size:s,getData:c}),a}Object.defineProperty(exports,"__esModule",{value:!0}),exports.padArray=e;
},{}],"pb8L":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.normalizeTransitionSettings=r,exports.getSourceBufferAttribute=n,exports.getAttributeTypeFromSize=a,exports.cycleBuffers=i,exports.getAttributeBufferLength=s,exports.padBuffer=o;var t=require("../../utils/array-utils"),e={interpolation:{duration:0,easing:function(t){return t}},spring:{stiffness:.05,damping:.5}};function r(t,r){return t?(Number.isFinite(t)&&(t={duration:t}),t.type=t.type||"interpolation",Object.assign({},e[t.type],r,t)):null}function n(t,e){return e.getBuffer()?[e.getBuffer(),{divisor:0,size:e.size,normalized:e.settings.normalized}]:e.value}function a(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(t,'"'))}}function i(t){t.push(t.shift())}function s(t,e){var r=t.doublePrecision,n=t.settings,a=t.value,i=t.size,s=r&&a instanceof Float64Array?2:1;return(n.noAlloc?a.length:e*i)*s}function o(e){var r=e.buffer,n=e.numInstances,a=e.attribute,i=e.fromLength,o=e.fromStartIndices,u=e.getData,f=void 0===u?function(t){return t}:u,c=a.doublePrecision&&a.value instanceof Float64Array?2:1,l=a.size*c,g=a.byteOffset,d=a.startIndices,p=o&&d,y=s(a,n),b=a.state.constant;if(p||!(i>=y)){var v=b?a.value:a.getBuffer().getData({srcByteOffset:g});if(a.settings.normalized&&!b){var z=f;f=function(t,e){return a._normalizeConstant(z(t,e))}}var h=b?function(t,e){return f(v,e)}:function(t,e){return f(v.subarray(t,t+l),e)},m=r.getData({length:i}),A=new Float32Array(y);(0,t.padArray)({source:m,target:A,sourceStartIndices:o,targetStartIndices:d,size:l,getData:h}),r.byteLength<A.byteLength+g&&r.reallocate(A.byteLength+g),r.subData({data:A,offset:g})}}
},{"../../utils/array-utils":"LUSB"}],"btRH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=y(require("@babel/runtime/helpers/esm/defineProperty")),t=y(require("@babel/runtime/helpers/esm/slicedToArray")),r=y(require("@babel/runtime/helpers/esm/classCallCheck")),a=y(require("@babel/runtime/helpers/esm/createClass")),n=y(require("@babel/runtime/helpers/esm/get")),s=y(require("@babel/runtime/helpers/esm/inherits")),i=y(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),u=y(require("@babel/runtime/helpers/esm/getPrototypeOf")),l=y(require("./data-column")),o=y(require("../../utils/assert")),c=require("../../utils/iterable-utils"),f=require("../../utils/flatten"),d=p(require("../../utils/range")),h=require("./attribute-transition-utils");function v(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return v=function(){return e},e}function p(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=v();if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var s=a?Object.getOwnPropertyDescriptor(e,n):null;s&&(s.get||s.set)?Object.defineProperty(r,n,s):r[n]=e[n]}return r.default=e,t&&t.set(e,r),r}function y(e){return e&&e.__esModule?e:{default:e}}function b(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=g(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,u=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,s=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw s}}}}function g(e,t){if(e){if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function A(e){var t=w();return function(){var r,a=(0,u.default)(e);if(t){var n=(0,u.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,i.default)(this,r)}}function w(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var R=function(i){(0,s.default)(v,i);var l=A(v);function v(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,r.default)(this,v),t=l.call(this,e,a);var n=a.transition,s=void 0!==n&&n,i=a.noAlloc,u=void 0!==i&&i,o=a.update,c=void 0===o?null:o,f=a.accessor,h=void 0===f?null:f,p=a.transform,y=void 0===p?null:p,b=a.startIndices,g=void 0===b?null:b;return Object.assign(t.settings,{transition:s,noAlloc:u,update:c||h&&t._autoUpdater,accessor:h,transform:y}),Object.assign(t.state,{lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:d.FULL,startIndices:g}),Object.seal(t.settings),Object.seal(t.state),t._validateAttributeUpdaters(),t}return(0,a.default)(v,[{key:"needsUpdate",value:function(){return this.state.needsUpdate}},{key:"needsRedraw",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).clearChangedFlags,t=void 0!==e&&e,r=this.state.needsRedraw;return this.state.needsRedraw=r&&!t,r}},{key:"getUpdateTriggers",value:function(){var e=this.settings.accessor;return[this.id].concat("function"!=typeof e&&e||[])}},{key:"supportsTransition",value:function(){return Boolean(this.settings.transition)}},{key:"getTransitionSetting",value:function(e){var t=this.settings.accessor,r=this.settings.transition;if(!this.supportsTransition())return null;var a=Array.isArray(t)?e[t.find(function(t){return e[t]})]:e[t];return(0,h.normalizeTransitionSettings)(a,r)}},{key:"setNeedsUpdate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id,t=arguments.length>1?arguments[1]:void 0;if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),t){var r=t.startRow,a=void 0===r?0:r,n=t.endRow,s=void 0===n?1/0:n;this.state.updateRanges=d.add(this.state.updateRanges,[a,s])}else this.state.updateRanges=d.FULL}},{key:"clearNeedsUpdate",value:function(){this.state.needsUpdate=!1,this.state.updateRanges=d.EMPTY}},{key:"setNeedsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id;this.state.needsRedraw=this.state.needsRedraw||e}},{key:"update",value:function(e){this.setData(e)}},{key:"allocate",value:function(e){var t=this.state,r=this.settings;return!r.noAlloc&&(!!r.update&&((0,o.default)(Number.isFinite(e)),(0,n.default)((0,u.default)(v.prototype),"allocate",this).call(this,{numInstances:e,copy:t.updateRanges!==d.FULL}),!0))}},{key:"updateBuffer",value:function(e){var r=e.numInstances,a=e.data,s=e.props,i=e.context;if(!this.needsUpdate())return!1;var l=this.state.updateRanges,o=this.settings,c=o.update,f=o.noAlloc,d=!0;if(c){var h,p=b(l);try{for(p.s();!(h=p.n()).done;){var y=(0,t.default)(h.value,2),g=y[0],m=y[1];c.call(i,this,{data:a,startRow:g,endRow:m,props:s,numInstances:r})}}catch(x){p.e(x)}finally{p.f()}if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant});else{var A,w=b(l);try{for(w.s();!(A=w.n()).done;){var R=(0,t.default)(A.value,2),k=R[0],O=R[1],U=Number.isFinite(k)?this.getVertexOffset(k):0,N=Number.isFinite(O)?this.getVertexOffset(O):f||!Number.isFinite(r)?this.value.length:r*this.size;(0,n.default)((0,u.default)(v.prototype),"updateSubBuffer",this).call(this,{startOffset:U,endOffset:N})}}catch(x){w.e(x)}finally{w.f()}}else;this._checkAttributeArray()}else d=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),d}},{key:"setConstantValue",value:function(e){return void 0!==e&&"function"!=typeof e&&(this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}},{key:"setExternalBuffer",value:function(e){var t=this.state;return e?(this.clearNeedsUpdate(),t.lastExternalBuffer===e||(t.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e),!0)):(t.lastExternalBuffer=null,!1)}},{key:"setBinaryValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=this.state,a=this.settings;if(!e)return r.binaryValue=null,r.binaryAccessor=null,!1;if(a.noAlloc)return!1;if(r.binaryValue===e)return this.clearNeedsUpdate(),!0;if(r.binaryValue=e,this.setNeedsRedraw(),ArrayBuffer.isView(e)&&(e={value:e}),a.transform||t!==this.startIndices){(0,o.default)(ArrayBuffer.isView(e.value),"invalid ".concat(a.accessor));var n=e.size&&e.size!==this.size;return r.binaryAccessor=(0,c.getAccessorFromBuffer)(e.value,{size:e.size||this.size,stride:e.stride,offset:e.offset,startIndices:t,nested:n}),!1}return this.clearNeedsUpdate(),this.setData(e),!0}},{key:"getVertexOffset",value:function(e){var t=this.startIndices;return(t?t[e]:e)*this.size}},{key:"getShaderAttributes",value:function(){var t=this.settings.shaderAttributes||(0,e.default)({},this.id,null),r={};for(var a in t)Object.assign(r,(0,n.default)((0,u.default)(v.prototype),"getShaderAttributes",this).call(this,a,t[a]));return r}},{key:"_autoUpdater",value:function(e,t){var r=t.data,a=t.startRow,n=t.endRow,s=t.props,i=t.numInstances;if(!e.constant){var u=e.settings,l=e.state,d=e.value,h=e.size,v=e.startIndices,p=u.accessor,y=u.transform,g=l.binaryAccessor||("function"==typeof p?p:s[p]);(0,o.default)("function"==typeof g,'accessor "'.concat(p,'" is not a function'));var m,A=e.getVertexOffset(a),w=(0,c.createIterable)(r,a,n),R=w.iterable,k=w.objectInfo,O=b(R);try{for(O.s();!(m=O.n()).done;){var U=m.value;k.index++;var N=g(U,k);if(y&&(N=y.call(this,N)),v){var x=(k.index<v.length-1?v[k.index+1]:i)-v[k.index];if(N&&Array.isArray(N[0])){var I,j=A,V=b(N);try{for(V.s();!(I=V.n()).done;){var _=I.value;e._normalizeValue(_,d,j),j+=h}}catch(q){V.e(q)}finally{V.f()}}else N&&N.length>h?d.set(N,A):(e._normalizeValue(N,k.target,0),(0,f.fillArray)({target:d,source:k.target,start:A,count:x}));A+=x*h}else e._normalizeValue(N,d,A),A+=h}}catch(q){O.e(q)}finally{O.f()}}}},{key:"_validateAttributeUpdaters",value:function(){var e=this.settings;if(!(e.noAlloc||"function"==typeof e.update))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}},{key:"_checkAttributeArray",value:function(){var e=this.value,t=Math.min(4,this.size);if(e&&e.length>=t){var r=!0;switch(t){case 4:r=r&&Number.isFinite(e[3]);case 3:r=r&&Number.isFinite(e[2]);case 2:r=r&&Number.isFinite(e[1]);case 1:r=r&&Number.isFinite(e[0]);break;default:r=!1}if(!r)throw new Error("Illegal attribute generated for ".concat(this.id))}}},{key:"startIndices",get:function(){return this.state.startIndices},set:function(e){this.state.startIndices=e}}]),v}(l.default);exports.default=R;
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","@babel/runtime/helpers/esm/slicedToArray":"TBeo","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/get":"KGqu","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","./data-column":"WlAL","../../utils/assert":"Txat","../../utils/iterable-utils":"kai7","../../utils/flatten":"gSVO","../../utils/range":"UFya","./attribute-transition-utils":"pb8L"}],"yDoV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("@babel/runtime/helpers/esm/classCallCheck")),t=i(require("@babel/runtime/helpers/esm/createClass"));function i(e){return e&&e.__esModule?e:{default:e}}function n(){}var s={onStart:n,onUpdate:n,onInterrupt:n,onEnd:n},r=function(){function i(t){(0,e.default)(this,i),this._inProgress=!1,this._handle=null,this.timeline=t,this.settings={}}return(0,t.default)(i,[{key:"start",value:function(e){this.cancel(),this.settings=Object.assign({},s,e),this._inProgress=!0,this.settings.onStart(this)}},{key:"end",value:function(){this._inProgress&&(this.timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,this.settings.onEnd(this))}},{key:"cancel",value:function(){this._inProgress&&(this.settings.onInterrupt(this),this.timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}},{key:"update",value:function(){if(!this._inProgress)return!1;if(null===this._handle){var e=this.timeline,t=this.settings;this._handle=e.addChannel({delay:e.getTime(),duration:t.duration})}return this.time=this.timeline.getTime(this._handle),this._onUpdate(),this.settings.onUpdate(this),this.timeline.isFinished(this._handle)&&this.end(),!0}},{key:"_onUpdate",value:function(){}},{key:"inProgress",get:function(){return this._inProgress}}]),i}();exports.default=r;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph"}],"cHcD":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("@babel/runtime/helpers/esm/defineProperty")),e=o(require("@babel/runtime/helpers/esm/classCallCheck")),r=o(require("@babel/runtime/helpers/esm/createClass")),n=require("@luma.gl/core"),i=o(require("../lib/attribute/attribute")),a=require("../lib/attribute/attribute-transition-utils"),u=o(require("./transition"));function o(t){return t&&t.__esModule?t:{default:t}}function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function f(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?s(Object(n),!0).forEach(function(r){(0,t.default)(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function c(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=l(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,o=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return u=t.done,t},e:function(t){o=!0,a=t},f:function(){try{u||null==r.return||r.return()}finally{if(o)throw a}}}}function l(t,e){if(t){if("string"==typeof t)return h(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(t,e):void 0}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var b=function(){function t(r){var a=r.gl,o=r.attribute,s=r.timeline;(0,e.default)(this,t),this.gl=a,this.type="interpolation",this.transition=new u.default(s),this.attribute=o,this.attributeInTransition=new i.default(a,o.settings),this.currentStartIndices=o.startIndices,this.currentLength=0,this.transform=m(a,o);var f={byteLength:0,usage:35050};this.buffers=[new n.Buffer(a,f),new n.Buffer(a,f)]}return(0,r.default)(t,[{key:"start",value:function(t,e){if(t.duration<=0)this.transition.cancel();else{var r=this.gl,n=this.buffers,i=this.attribute;(0,a.cycleBuffers)(n);var u,o={numInstances:e,attribute:i,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:t.enter},s=c(n);try{for(s.s();!(u=s.n()).done;){var l=u.value;(0,a.padBuffer)(f({buffer:l},o))}}catch(h){s.e(h)}finally{s.f()}this.currentStartIndices=i.startIndices,this.currentLength=(0,a.getAttributeBufferLength)(i,e),this.attributeInTransition.update({buffer:n[1],value:i.value}),this.transition.start(t),this.transform.update({elementCount:Math.floor(this.currentLength/i.size),sourceBuffers:{aFrom:n[0],aTo:(0,a.getSourceBufferAttribute)(r,i)},feedbackBuffers:{vCurrent:n[1]}})}}},{key:"update",value:function(){var t=this.transition.update();if(t){var e=this.transition,r=e.time,n=e.settings,i=n.duration,a=(0,n.easing)(r/i);this.transform.run({uniforms:{time:a}})}return t}},{key:"cancel",value:function(){for(this.transition.cancel(),this.transform.delete();this.buffers.length;)this.buffers.pop().delete()}},{key:"inProgress",get:function(){return this.transition.inProgress}}]),t}();exports.default=b;var d="\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nuniform float time;\nattribute ATTRIBUTE_TYPE aFrom;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vCurrent;\n\nvoid main(void) {\n  vCurrent = mix(aFrom, aTo, time);\n  gl_Position = vec4(0.0);\n}\n";function m(t,e){var r=(0,a.getAttributeTypeFromSize)(e.size);return new n.Transform(t,{vs:d,defines:{ATTRIBUTE_TYPE:r},varyings:["vCurrent"]})}
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@luma.gl/core":"iuAK","../lib/attribute/attribute":"btRH","../lib/attribute/attribute-transition-utils":"pb8L","./transition":"yDoV"}],"YGNu":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=u(require("@babel/runtime/helpers/esm/defineProperty")),e=u(require("@babel/runtime/helpers/esm/classCallCheck")),r=u(require("@babel/runtime/helpers/esm/createClass")),n=require("@luma.gl/core"),i=require("../lib/attribute/attribute-transition-utils"),a=u(require("../lib/attribute/attribute")),s=u(require("./transition"));function u(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function f(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?o(Object(n),!0).forEach(function(r){(0,t.default)(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function l(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=c(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return s=t.done,t},e:function(t){u=!0,a=t},f:function(){try{s||null==r.return||r.return()}finally{if(u)throw a}}}}function c(t,e){if(t){if("string"==typeof t)return d(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(t,e):void 0}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var h=function(){function t(r){var i=r.gl,u=r.attribute,o=r.timeline;(0,e.default)(this,t),this.gl=i,this.type="spring",this.transition=new s.default(o),this.attribute=u,this.attributeInTransition=new a.default(i,Object.assign({},u.settings,{normalized:!1})),this.currentStartIndices=u.startIndices,this.currentLength=0,this.texture=g(i),this.framebuffer=T(i,this.texture),this.transform=b(i,u,this.framebuffer);var f={byteLength:0,usage:35050};this.buffers=[new n.Buffer(i,f),new n.Buffer(i,f),new n.Buffer(i,f)]}return(0,r.default)(t,[{key:"start",value:function(t,e){var r,n=this.gl,a=this.buffers,s=this.attribute,u={numInstances:e,attribute:s,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:t.enter},o=l(a);try{for(o.s();!(r=o.n()).done;){var c=r.value;(0,i.padBuffer)(f({buffer:c},u))}}catch(d){o.e(d)}finally{o.f()}this.currentStartIndices=s.startIndices,this.currentLength=(0,i.getAttributeBufferLength)(s,e),this.attributeInTransition.update({buffer:a[1],value:s.value}),this.transition.start(t),this.transform.update({elementCount:Math.floor(this.currentLength/s.size),sourceBuffers:{aTo:(0,i.getSourceBufferAttribute)(n,s)}})}},{key:"update",value:function(){var t=this.buffers,e=this.transform,r=this.framebuffer,a=this.transition;return!!a.update()&&(e.update({sourceBuffers:{aPrev:t[0],aCur:t[1]},feedbackBuffers:{vNext:t[2]}}),e.run({framebuffer:r,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:a.settings.stiffness,damping:a.settings.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),(0,i.cycleBuffers)(t),this.attributeInTransition.update({buffer:t[1],value:this.attribute.value}),(0,n.readPixelsToArray)(r)[0]>0||a.end(),!0)}},{key:"cancel",value:function(){for(this.transition.cancel(),this.transform.delete();this.buffers.length;)this.buffers.pop().delete();this.texture.delete(),this.texture=null,this.framebuffer.delete(),this.framebuffer=null}},{key:"inProgress",get:function(){return this.transition.inProgress}}]),t}();function b(t,e,r){var a=(0,i.getAttributeTypeFromSize)(e.size);return new n.Transform(t,{framebuffer:r,vs:"\n#define SHADER_NAME spring-transition-vertex-shader\n\n#define EPSILON 0.00001\n\nuniform float stiffness;\nuniform float damping;\nattribute ATTRIBUTE_TYPE aPrev;\nattribute ATTRIBUTE_TYPE aCur;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vNext;\nvarying float vIsTransitioningFlag;\n\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\n  ATTRIBUTE_TYPE velocity = cur - prev;\n  ATTRIBUTE_TYPE delta = dest - cur;\n  ATTRIBUTE_TYPE spring = delta * stiffness;\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\n  return spring + damper + velocity + cur;\n}\n\nvoid main(void) {\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\n\n  vNext = getNextValue(aCur, aPrev, aTo);\n  gl_Position = vec4(0, 0, 0, 1);\n  gl_PointSize = 100.0;\n}\n",fs:"\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\n\nvarying float vIsTransitioningFlag;\n\nvoid main(void) {\n  if (vIsTransitioningFlag == 0.0) {\n    discard;\n  }\n  gl_FragColor = vec4(1.0);\n}",defines:{ATTRIBUTE_TYPE:a},varyings:["vNext"]})}function g(t){return new n.Texture2D(t,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}function T(e,r){return new n.Framebuffer(e,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:(0,t.default)({},36064,r)})}exports.default=h;
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@luma.gl/core":"iuAK","../lib/attribute/attribute-transition-utils":"pb8L","../lib/attribute/attribute":"btRH","./transition":"yDoV"}],"Llox":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=a(require("@babel/runtime/helpers/esm/classCallCheck")),i=a(require("@babel/runtime/helpers/esm/createClass")),e=require("@luma.gl/core"),n=a(require("../../transitions/gpu-interpolation-transition")),s=a(require("../../transitions/gpu-spring-transition")),r=a(require("../../utils/log"));function a(t){return t&&t.__esModule?t:{default:t}}var o={interpolation:n.default,spring:s.default},u=function(){function n(i,s){var r=s.id,a=s.timeline;(0,t.default)(this,n),this.id=r,this.gl=i,this.timeline=a,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=e.Transform.isSupported(i)}return(0,i.default)(n,[{key:"finalize",value:function(){for(var t in this.transitions)this._removeTransition(t)}},{key:"update",value:function(t){var i=t.attributes,e=t.transitions,n=void 0===e?{}:e,s=t.numInstances;for(var r in this.numInstances=s||1,i){var a=i[r],o=a.getTransitionSetting(n);o&&this._updateAttribute(r,a,o)}for(var u in this.transitions){var l=i[u];l&&l.getTransitionSetting(n)||this._removeTransition(u)}}},{key:"hasAttribute",value:function(t){var i=this.transitions[t];return i&&i.inProgress}},{key:"getAttributes",value:function(){var t={};for(var i in this.transitions){var e=this.transitions[i];e.inProgress&&(t[i]=e.attributeInTransition)}return t}},{key:"run",value:function(){if(!this.isSupported||0===this.numInstances)return!1;for(var t in this.transitions){this.transitions[t].update()&&(this.needsRedraw=!0)}var i=this.needsRedraw;return this.needsRedraw=!1,i}},{key:"_removeTransition",value:function(t){this.transitions[t].cancel(),delete this.transitions[t]}},{key:"_updateAttribute",value:function(t,i,e){var n=this.transitions[t],s=!n||n.type!==e.type;if(s){if(!this.isSupported)return void r.default.warn("WebGL2 not supported by this browser. Transition for ".concat(t," is disabled."))();n&&this._removeTransition(t);var a=o[e.type];a?this.transitions[t]=new a({attribute:i,timeline:this.timeline,gl:this.gl}):(r.default.error("unsupported transition type '".concat(e.type,"'"))(),s=!1)}(s||i.needsRedraw())&&(this.needsRedraw=!0,this.transitions[t].start(e,this.numInstances))}}]),n}();exports.default=u;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@luma.gl/core":"iuAK","../../transitions/gpu-interpolation-transition":"cHcD","../../transitions/gpu-spring-transition":"YGNu","../../utils/log":"GVus"}],"wT56":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=n(require("@babel/runtime/helpers/esm/classCallCheck")),e=n(require("@babel/runtime/helpers/esm/createClass")),a=n(require("./attribute")),i=n(require("../../utils/log")),r=n(require("../../debug")),s=n(require("./attribute-transition-manager"));function n(t){return t&&t.__esModule?t:{default:t}}var u="attributeManager.invalidate",d="attributeManager.updateStart",l="attributeManager.updateEnd",o="attribute.updateStart",h="attribute.allocate",v="attribute.updateEnd",c=function(){function n(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=a.id,r=void 0===i?"attribute-manager":i,u=a.stats,d=a.timeline;(0,t.default)(this,n),this.id=r,this.gl=e,this.attributes={},this.updateTriggers={},this.accessors={},this.needsRedraw=!0,this.userData={},this.stats=u,this.attributeTransitionManager=new s.default(e,{id:"".concat(r,"-transitions"),timeline:d}),Object.seal(this)}return(0,e.default)(n,[{key:"finalize",value:function(){for(var t in this.attributes)this.attributes[t].delete();this.attributeTransitionManager.finalize()}},{key:"getNeedsRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},e=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!t.clearRedrawFlags,e&&this.id}},{key:"setNeedsRedraw",value:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.needsRedraw=!0,this}},{key:"add",value:function(t,e){this._add(t,e)}},{key:"addInstanced",value:function(t,e){this._add(t,e,{instanced:1})}},{key:"remove",value:function(t){for(var e=0;e<t.length;e++){var a=t[e];void 0!==this.attributes[a]&&(this.attributes[a].delete(),delete this.attributes[a])}}},{key:"invalidate",value:function(t,e){var a=this._invalidateTrigger(t,e);(0,r.default)(u,this,t,a)}},{key:"invalidateAll",value:function(t){for(var e in this.attributes)this.attributes[e].setNeedsUpdate(e,t);(0,r.default)(u,this,"all")}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.data,a=t.numInstances,s=t.startIndices,n=void 0===s?null:s,u=t.transitions,o=t.props,h=void 0===o?{}:o,v=t.buffers,c=void 0===v?{}:v,b=t.context,g=void 0===b?{}:b,f=!1;for(var p in(0,r.default)(d,this),this.stats&&this.stats.get("Update Attributes").timeStart(),this.attributes){var m=this.attributes[p],y=m.settings.accessor;m.startIndices=n,h[p]&&i.default.removed("props.".concat(p),"data.attributes.".concat(p))(),m.setExternalBuffer(c[p])||m.setBinaryValue(c[y],e.startIndices)||!c[y]&&m.setConstantValue(h[y])||m.needsUpdate()&&(f=!0,this._updateAttribute({attribute:m,numInstances:a,data:e,props:h,context:g})),this.needsRedraw|=m.needsRedraw()}f&&(0,r.default)(l,this,a),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:a,transitions:u})}},{key:"updateTransition",value:function(){var t=this.attributeTransitionManager.run();return this.needsRedraw=this.needsRedraw||t,t}},{key:"getAttributes",value:function(){return this.attributes}},{key:"getChangedAttributes",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearChangedFlags:!1},e=this.attributes,a=this.attributeTransitionManager,i=Object.assign({},a.getAttributes());for(var r in e){var s=e[r];s.needsRedraw(t)&&!a.hasAttribute(r)&&(i[r]=s)}return i}},{key:"getShaderAttributes",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t||(t=this.getAttributes());var a={};for(var i in t)e[i]||Object.assign(a,t[i].getShaderAttributes());return a}},{key:"getAccessors",value:function(){return this.updateTriggers}},{key:"_add",value:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e&&i.default.warn("AttributeManager.add({updaters}) - updater map no longer supported")();var r={};for(var s in t){var n=t[s],u=this._createAttribute(s,n,a);r[s]=u}Object.assign(this.attributes,r),this._mapUpdateTriggersToAttributes()}},{key:"_createAttribute",value:function(t,e,i){var r={id:t,constant:e.constant||!1,isIndexed:e.isIndexed||e.elements,size:e.elements?1:e.size,value:e.value||null,divisor:e.instanced||i.instanced?1:e.divisor};return new a.default(this.gl,Object.assign({},e,r))}},{key:"_mapUpdateTriggersToAttributes",value:function(){var t=this,e={},a=function(a){t.attributes[a].getUpdateTriggers().forEach(function(t){e[t]||(e[t]=[]),e[t].push(a)})};for(var i in this.attributes)a(i);this.updateTriggers=e}},{key:"_invalidateTrigger",value:function(t,e){var a=this.attributes,i=this.updateTriggers[t];return i&&i.forEach(function(t){var i=a[t];i&&i.setNeedsUpdate(i.id,e)}),i}},{key:"_updateAttribute",value:function(t){var e=t.attribute,a=t.numInstances;(0,r.default)(o,e),e.allocate(a)&&(0,r.default)(h,e,a),e.updateBuffer(t)&&(this.needsRedraw=!0,(0,r.default)(v,e,a))}}]),n}();exports.default=c;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","./attribute":"btRH","../../utils/log":"GVus","../../debug":"EEoF","./attribute-transition-manager":"Llox"}],"YhSP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("@babel/runtime/helpers/esm/classCallCheck")),t=a(require("@babel/runtime/helpers/esm/createClass")),r=a(require("@babel/runtime/helpers/esm/inherits")),u=a(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),n=a(require("@babel/runtime/helpers/esm/getPrototypeOf")),i=require("math.gl"),l=a(require("./transition"));function a(e){return e&&e.__esModule?e:{default:e}}function s(e){var t=o();return function(){var r,i=(0,n.default)(e);if(t){var l=(0,n.default)(this).constructor;r=Reflect.construct(i,arguments,l)}else r=i.apply(this,arguments);return(0,u.default)(this,r)}}function o(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var f=function(u){(0,r.default)(l,u);var n=s(l);function l(){return(0,e.default)(this,l),n.apply(this,arguments)}return(0,t.default)(l,[{key:"_onUpdate",value:function(){var e=this.time,t=this.settings,r=t.fromValue,u=t.toValue,n=t.duration,l=(0,t.easing)(e/n);this._value=(0,i.lerp)(r,u,l)}},{key:"value",get:function(){return this._value}}]),l}(l.default);exports.default=f;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","math.gl":"xAaq","./transition":"yDoV"}],"juRJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("@babel/runtime/helpers/esm/classCallCheck")),r=a(require("@babel/runtime/helpers/esm/createClass")),t=a(require("@babel/runtime/helpers/esm/inherits")),u=a(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),n=a(require("@babel/runtime/helpers/esm/getPrototypeOf")),i=a(require("./transition"));function a(e){return e&&e.__esModule?e:{default:e}}function s(e){var r=l();return function(){var t,i=(0,n.default)(e);if(r){var a=(0,n.default)(this).constructor;t=Reflect.construct(i,arguments,a)}else t=i.apply(this,arguments);return(0,u.default)(this,t)}}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var o=1e-5;function f(e,r,t,u,n){var i=r-e;return(t-r)*n+-i*u+i+r}function c(e,r,t,u,n){if(Array.isArray(t)){for(var i=[],a=0;a<t.length;a++)i[a]=f(e[a],r[a],t[a],u,n);return i}return f(e,r,t,u,n)}function h(e,r){if(Array.isArray(e)){for(var t=0,u=0;u<e.length;u++){var n=e[u]-r[u];t+=n*n}return Math.sqrt(t)}return Math.abs(e-r)}var p=function(u){(0,t.default)(i,u);var n=s(i);function i(){return(0,e.default)(this,i),n.apply(this,arguments)}return(0,r.default)(i,[{key:"_onUpdate",value:function(){var e=this.settings,r=e.fromValue,t=e.toValue,u=e.damping,n=e.stiffness,i=this._prevValue,a=void 0===i?r:i,s=this._currValue,l=void 0===s?r:s,f=c(a,l,t,u,n),p=h(f,t),d=h(f,l);p<o&&d<o&&(f=t,this.end()),this._prevValue=l,this._currValue=f}},{key:"value",get:function(){return this._currValue}}]),i}(i.default);exports.default=p;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","./transition":"yDoV"}],"f2Ln":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("@babel/runtime/helpers/esm/slicedToArray")),t=s(require("@babel/runtime/helpers/esm/defineProperty")),r=s(require("@babel/runtime/helpers/esm/classCallCheck")),n=s(require("@babel/runtime/helpers/esm/createClass")),i=require("./attribute/attribute-transition-utils"),o=s(require("../transitions/cpu-interpolation-transition")),a=s(require("../transitions/cpu-spring-transition")),u=s(require("../utils/log"));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=c(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function c(e,t){if(e){if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function y(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?p(Object(n),!0).forEach(function(r){(0,t.default)(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var v={interpolation:o.default,spring:a.default},d=function(){function t(e){(0,r.default)(this,t),this.transitions=new Map,this.timeline=e}return(0,n.default)(t,[{key:"add",value:function(e,t,r,n){var o=this.transitions;if(o.has(e)){var a=o.get(e),s=a.value;t=void 0===s?a.settings.fromValue:s,this.remove(e)}if(n=(0,i.normalizeTransitionSettings)(n)){var l=v[n.type];if(l){var c=new l(this.timeline);c.start(y(y({},n),{},{fromValue:t,toValue:r})),o.set(e,c)}else u.default.error("unsupported transition type '".concat(n.type,"'"))()}}},{key:"remove",value:function(e){var t=this.transitions;t.has(e)&&(t.get(e).cancel(),t.delete(e))}},{key:"update",value:function(){var t,r={},n=l(this.transitions);try{for(n.s();!(t=n.n()).done;){var i=(0,e.default)(t.value,2),o=i[0],a=i[1];a.update(),r[o]=a.value,a.inProgress||this.remove(o)}}catch(u){n.e(u)}finally{n.f()}return r}},{key:"clear",value:function(){var e,t=l(this.transitions.keys());try{for(t.s();!(e=t.n()).done;){var r=e.value;this.remove(r)}}catch(n){t.e(n)}finally{t.f()}}},{key:"active",get:function(){return this.transitions.size>0}}]),t}();exports.default=d;
},{"@babel/runtime/helpers/esm/slicedToArray":"TBeo","@babel/runtime/helpers/esm/defineProperty":"iDM3","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","./attribute/attribute-transition-utils":"pb8L","../transitions/cpu-interpolation-transition":"YhSP","../transitions/cpu-spring-transition":"juRJ","../utils/log":"GVus"}],"dDJN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PROP_SYMBOLS=exports.LIFECYCLE=void 0;var e={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"};exports.LIFECYCLE=e;var o={COMPONENT:Symbol.for("component"),ASYNC_DEFAULTS:Symbol.for("asyncPropDefaults"),ASYNC_ORIGINAL:Symbol.for("asyncPropOriginal"),ASYNC_RESOLVED:Symbol.for("asyncPropResolved")};exports.PROP_SYMBOLS=o;
},{}],"UiIs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.validateProps=t,exports.diffProps=o,exports.compareProps=l;var r=e(require("@babel/runtime/helpers/esm/typeof")),n=require("./constants");function e(r){return r&&r.__esModule?r:{default:r}}var a=n.PROP_SYMBOLS.COMPONENT;function t(r){var n=f(r);for(var e in n){var a=n[e],t=a.validate;if(t&&!t(r[e],a))throw new Error("Invalid prop ".concat(e,": ").concat(r[e]))}}function o(r,n){var e=l({newProps:r,oldProps:n,propTypes:f(r),ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),a=s(r,n),t=!1;return a||(t=c(r,n)),{dataChanged:a,propsChanged:e,updateTriggersChanged:t,extensionsChanged:d(r,n),transitionsChanged:i(r,n)}}function i(r,n){if(!r.transitions)return null;var e={},a=f(r);for(var t in r.transitions){var o=a[t],i=o&&o.type;("number"===i||"color"===i||"array"===i)&&u(r[t],n[t],o)&&(e[t]=!0)}return e}function l(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=n.newProps,a=n.oldProps,t=n.ignoreProps,o=void 0===t?{}:t,i=n.propTypes,l=void 0===i?{}:i,s=n.triggerName,c=void 0===s?"props":s;if(a===e)return null;if("object"!==(0,r.default)(e)||null===e)return"".concat(c," changed shallowly");if("object"!==(0,r.default)(a)||null===a)return"".concat(c," changed shallowly");for(var d=0,p=Object.keys(e);d<p.length;d++){var f=p[d];if(!(f in o)){if(!(f in a))return"".concat(c,".").concat(f," added");var g=u(e[f],a[f],l[f]);if(g)return"".concat(c,".").concat(f," ").concat(g)}}for(var v=0,h=Object.keys(a);v<h.length;v++){var P=h[v];if(!(P in o)){if(!(P in e))return"".concat(c,".").concat(P," dropped");if(!Object.hasOwnProperty.call(e,P)){var y=u(e[P],a[P],l[P]);if(y)return"".concat(c,".").concat(P," ").concat(y)}}}return null}function u(r,n,e){var a=e&&e.equal;return a&&!a(r,n,e)?"changed deeply":a||!(a=r&&n&&r.equals)||a.call(r,n)?a||n===r?null:"changed shallowly":"changed deeply"}function s(r,n){if(null===n)return"oldProps is null, initial diff";var e=null,a=r.dataComparator,t=r._dataDiff;return a?a(r.data,n.data)||(e="Data comparator detected a change"):r.data!==n.data&&(e="A new data container was supplied"),e&&t&&(e=t(r.data,n.data)||e),e}function c(r,n){if(null===n)return"oldProps is null, initial diff";if("all"in r.updateTriggers&&p(r,n,"all"))return{all:!0};var e={},a=!1;for(var t in r.updateTriggers){if("all"!==t)p(r,n,t)&&(e[t]=!0,a=e)}return a}function d(r,n){if(null===n)return"oldProps is null, initial diff";var e=n.extensions,a=r.extensions;if(a===e)return!1;if(a.length!==e.length)return!0;for(var t=0;t<a.length;t++)if(!a[t].equals(e[t]))return!0;return!1}function p(r,n,e){var a=r.updateTriggers[e];a=null==a?{}:a;var t=n.updateTriggers[e];return l({oldProps:t=null==t?{}:t,newProps:a,triggerName:e})}function f(r){var n=r[a],e=n&&n.constructor;return e?e._propTypes:{}}
},{"@babel/runtime/helpers/esm/typeof":"zsbK","./constants":"dDJN"}],"nzk4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.count=u;var e=t(require("@babel/runtime/helpers/esm/typeof"));function t(e){return e&&e.__esModule?e:{default:e}}var n="count(): argument not an object",r="count(): argument not a container";function u(e){if(!i(e))throw new Error(n);if("function"==typeof e.count)return e.count();if(Number.isFinite(e.size))return e.size;if(Number.isFinite(e.length))return e.length;if(o(e))return Object.keys(e).length;throw new Error(r)}function o(t){return null!==t&&"object"===(0,e.default)(t)&&t.constructor===Object}function i(t){return null!==t&&"object"===(0,e.default)(t)}
},{"@babel/runtime/helpers/esm/typeof":"zsbK"}],"NycH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mergeShaders=i;var e=t(require("@babel/runtime/helpers/esm/defineProperty"));function t(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function n(t){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?r(Object(i),!0).forEach(function(r){(0,e.default)(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function i(e,t){if(!t)return e;var r=Object.assign({},e,t);if("defines"in t&&(r.defines=Object.assign({},e.defines,t.defines)),"modules"in t&&(r.modules=(e.modules||[]).concat(t.modules),t.modules.some(function(e){return"project64"===e.name}))){var i=r.modules.findIndex(function(e){return"project32"===e.name});i>=0&&r.modules.splice(i,1)}if("inject"in t)if(e.inject){var o=n({},e.inject);for(var c in t.inject)o[c]=(o[c]||"")+t.inject[c];r.inject=o}else r.inject=t.inject;return r}
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3"}],"qD4Q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parsePropTypes=u;var e=n(require("@babel/runtime/helpers/esm/typeof")),r=n(require("@babel/runtime/helpers/esm/slicedToArray"));function n(e){return e&&e.__esModule?e:{default:e}}var t={boolean:{validate:function(e,r){return!0},equal:function(e,r,n){return Boolean(e)===Boolean(r)}},number:{validate:function(e,r){return Number.isFinite(e)&&(!("max"in r)||e<=r.max)&&(!("min"in r)||e>=r.min)}},color:{validate:function(e,r){return r.optional&&!e||l(e)&&(3===e.length||4===e.length)},equal:function(e,r,n){return a(e,r)}},accessor:{validate:function(e,r){var n=c(e);return"function"===n||n===c(r.value)},equal:function(e,r,n){return"function"==typeof r||a(e,r)}},array:{validate:function(e,r){return r.optional&&!e||l(e)},equal:function(e,r,n){return n.compare?a(e,r):e===r}},function:{validate:function(e,r){return r.optional&&!e||"function"==typeof e},equal:function(e,r,n){return!n.compare||e===r}}};function a(e,r){if(e===r)return!0;if(!l(e)||!l(r))return!1;var n=e.length;if(n!==r.length)return!1;for(var t=0;t<n;t++)if(e[t]!==r[t])return!1;return!0}function u(e){for(var n={},t={},a={},u=0,i=Object.entries(e);u<i.length;u++){var l=(0,r.default)(i[u],2),c=l[0],f=l[1];if(f&&f.deprecatedFor)a[c]=Array.isArray(f.deprecatedFor)?f.deprecatedFor:[f.deprecatedFor];else{var p=o(c,f);n[c]=p,t[c]=p.value}}return{propTypes:n,defaultProps:t,deprecatedProps:a}}function o(e,r){switch(c(r)){case"object":return i(e,r);case"array":return i(e,{type:"array",value:r,compare:!1});case"boolean":return i(e,{type:"boolean",value:r});case"number":return i(e,{type:"number",value:r});case"function":return i(e,{type:"function",value:r,compare:!0});default:return{name:e,type:"unknown",value:r}}}function i(e,r){return"type"in r?Object.assign({name:e},t[r.type],r):"value"in r?Object.assign({name:e,type:c(r.value)},r):{name:e,type:"object",value:r}}function l(e){return Array.isArray(e)||ArrayBuffer.isView(e)}function c(r){return l(r)?"array":null===r?"null":(0,e.default)(r)}
},{"@babel/runtime/helpers/esm/typeof":"zsbK","@babel/runtime/helpers/esm/slicedToArray":"TBeo"}],"jz7I":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createProps=p;var e=o(require("../utils/log")),t=require("../utils/iterable-utils"),r=require("./prop-types"),n=require("./constants");function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=a(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return u=e.done,e},e:function(e){s=!0,i=e},f:function(){try{u||null==r.return||r.return()}finally{if(s)throw i}}}}function a(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var s=n.PROP_SYMBOLS.COMPONENT,c=n.PROP_SYMBOLS.ASYNC_ORIGINAL,f=n.PROP_SYMBOLS.ASYNC_RESOLVED,l=n.PROP_SYMBOLS.ASYNC_DEFAULTS;function p(){var e=d(this.constructor),t=Object.create(e);t[s]=this,t[c]={},t[f]={};for(var r=0;r<arguments.length;++r){var n=arguments[r];for(var o in n)t[o]=n[o]}return Object.freeze(t),t}function d(e){var t=m(e,"_mergedDefaultProps");return t||(y(e),e._mergedDefaultProps)}function y(e){if(e.prototype){var t=Object.getPrototypeOf(e),n=d(t),o=m(e,"defaultProps")||{},i=(0,r.parsePropTypes)(o),a=v(i.defaultProps,n,e),u=Object.assign({},t._propTypes,i.propTypes);b(a,u);var s=Object.assign({},t._deprecatedProps,i.deprecatedProps);h(a,s),e._mergedDefaultProps=a,e._propTypes=u,e._deprecatedProps=s}}function v(e,t,r){var n=Object.create(null);Object.assign(n,t,e);var o=S(r);return delete e.id,Object.defineProperties(n,{id:{writable:!0,value:o}}),n}function h(t,r){var n=function(n){Object.defineProperty(t,n,{enumerable:!1,set:function(t){var o,a="".concat(this.id,": ").concat(n),u=i(r[n]);try{for(u.s();!(o=u.n()).done;){var s=o.value;P(this,s)||(this[s]=t)}}catch(c){u.e(c)}finally{u.f()}e.default.deprecated(a,r[n].join("/"))()}})};for(var o in r)n(o)}function b(e,t){var r={},n={};for(var o in t){var i=t[o],a=i.name,u=i.value;i.async&&(r[a]=u,n[a]=O(a,u))}e[l]=r,e[c]={},Object.defineProperties(e,n)}function O(e){return{enumerable:!0,set:function(r){"string"==typeof r||r instanceof Promise||(0,t.isAsyncIterable)(r)?this[c][e]=r:this[f][e]=r},get:function(){if(this[f]){if(e in this[f])return this[f][e]||this[l][e];if(e in this[c]){var t=this[s]&&this[s].internalState;if(t&&t.hasAsyncProp(e))return t.getAsyncProp(e)||this[l][e]}}return this[l][e]}}}function P(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function m(e,t){return P(e,t)&&e[t]}function S(t){var r=m(t,"layerName")||m(t,"componentName");return r||e.default.once(0,"".concat(t.name,".componentName not specified"))(),r||t.name}
},{"../utils/log":"GVus","../utils/iterable-utils":"kai7","./prop-types":"qD4Q","./constants":"dDJN"}],"c85S":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("@babel/runtime/regenerator")),r=u(require("@babel/runtime/helpers/esm/asyncToGenerator")),t=u(require("@babel/runtime/helpers/esm/classCallCheck")),s=u(require("@babel/runtime/helpers/esm/createClass")),n=u(require("@babel/runtime/helpers/esm/asyncIterator")),a=u(require("../utils/log")),o=require("../utils/iterable-utils"),i=require("./constants");function u(e){return e&&e.__esModule?e:{default:e}}var l=i.PROP_SYMBOLS.ASYNC_ORIGINAL,c=i.PROP_SYMBOLS.ASYNC_RESOLVED,p=i.PROP_SYMBOLS.ASYNC_DEFAULTS,d=Object.freeze({}),h=function(){function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;(0,t.default)(this,i),this.component=e,this.asyncProps={},this.onAsyncPropUpdated=function(){},this.oldProps=d,this.oldAsyncProps=null}return(0,s.default)(i,[{key:"getOldProps",value:function(){return this.oldAsyncProps||this.oldProps}},{key:"resetOldProps",value:function(){this.oldAsyncProps=null,this.oldProps=this.component.props}},{key:"freezeAsyncOldProps",value:function(){if(!this.oldAsyncProps)for(var e in this.oldProps=this.oldProps||this.component.props,this.oldAsyncProps=Object.create(this.oldProps),this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}},{key:"hasAsyncProp",value:function(e){return e in this.asyncProps}},{key:"getAsyncProp",value:function(e){var r=this.asyncProps[e];return r&&r.resolvedValue}},{key:"isAsyncPropLoading",value:function(e){if(e){var r=this.asyncProps[e];return Boolean(r&&r.pendingLoadCount>0&&r.pendingLoadCount!==r.resolvedLoadCount)}for(var t in this.asyncProps)if(this.isAsyncPropLoading(t))return!0;return!1}},{key:"reloadAsyncProp",value:function(e,r){this._watchPromise(e,Promise.resolve(r))}},{key:"setAsyncProps",value:function(e){var r=e[c]||{},t=e[l]||e,s=e[p]||{};for(var n in r){var a=r[n];this._createAsyncPropData(n,a,s[n]),this._updateAsyncProp(n,a)}for(var o in t){var i=t[o];this._createAsyncPropData(o,i,s[o]),this._updateAsyncProp(o,i)}}},{key:"_updateAsyncProp",value:function(e,r){if(this._didAsyncInputValueChange(e,r)){if("string"==typeof r){var t=this.layer&&this.layer.props.fetch;t&&(r=t(r,{propName:e,layer:this.layer}))}r instanceof Promise?this._watchPromise(e,r):(0,o.isAsyncIterable)(r)?this._resolveAsyncIterable(e,r):this._setPropValue(e,r)}}},{key:"_didAsyncInputValueChange",value:function(e,r){var t=this.asyncProps[e];return r!==t.lastValue&&(t.lastValue=r,!0)}},{key:"_setPropValue",value:function(e,r){var t=this.asyncProps[e];t.value=r,t.resolvedValue=r,t.pendingLoadCount++,t.resolvedLoadCount=t.pendingLoadCount}},{key:"_setAsyncPropValue",value:function(e,r,t){var s=this.asyncProps[e];s&&t>=s.resolvedLoadCount&&void 0!==r&&(this.freezeAsyncOldProps(),s.resolvedValue=r,s.resolvedLoadCount=t,this.onAsyncPropUpdated(e,r))}},{key:"_watchPromise",value:function(e,r){var t=this,s=this.asyncProps[e];s.pendingLoadCount++;var n=s.pendingLoadCount;r.then(function(r){r=t._postProcessValue(e,r),t._setAsyncPropValue(e,r,n);var s=t.layer&&t.layer.props.onDataLoad;"data"===e&&s&&s(r,{propName:e,layer:t.layer})}).catch(function(e){return a.default.error(e)()})}},{key:"_resolveAsyncIterable",value:function(){var t=(0,r.default)(e.default.mark(function r(t,s){var a,o,i,u,l,c,p,d,h,y,P,v;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:"data"!==t&&this._setPropValue(t,s),(a=this.asyncProps[t]).pendingLoadCount++,o=a.pendingLoadCount,i=[],u=0,l=!0,c=!1,e.prev=8,d=(0,n.default)(s);case 10:return e.next=12,d.next();case 12:return h=e.sent,l=h.done,e.next=16,h.value;case 16:if(y=e.sent,l){e.next=26;break}P=y,i=this._postProcessValue(t,P,i),Object.defineProperty(i,"__diff",{enumerable:!1,value:[{startRow:u,endRow:i.length}]}),u=i.length,this._setAsyncPropValue(t,i,o);case 23:l=!0,e.next=10;break;case 26:e.next=32;break;case 28:e.prev=28,e.t0=e.catch(8),c=!0,p=e.t0;case 32:if(e.prev=32,e.prev=33,l||null==d.return){e.next=37;break}return e.next=37,d.return();case 37:if(e.prev=37,!c){e.next=40;break}throw p;case 40:return e.finish(37);case 41:return e.finish(32);case 42:(v=this.layer&&this.layer.props.onDataLoad)&&v(i,{propName:t,layer:this.layer});case 44:case"end":return e.stop()}},r,this,[[8,28,32,42],[33,,37,41]])}));return function(e,r){return t.apply(this,arguments)}}()},{key:"_postProcessValue",value:function(e,r,t){var s=(this.component?this.component.props:{}).dataTransform;return"data"!==e?r:s?s(r,t):t?t.concat(r):r}},{key:"_createAsyncPropData",value:function(e,r,t){this.asyncProps[e]||(this.asyncProps[e]={lastValue:null,resolvedValue:t,pendingLoadCount:0,resolvedLoadCount:0})}}]),i}();exports.default=h;
},{"@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/asyncIterator":"bQZY","../utils/log":"GVus","../utils/iterable-utils":"kai7","./constants":"dDJN"}],"ElXl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("@babel/runtime/helpers/esm/classCallCheck")),t=a(require("@babel/runtime/helpers/esm/createClass")),n=require("../lifecycle/constants"),s=require("./create-props"),r=require("./constants"),i=a(require("./component-state"));function a(e){return e&&e.__esModule?e:{default:e}}var l=r.PROP_SYMBOLS.ASYNC_ORIGINAL,u=r.PROP_SYMBOLS.ASYNC_RESOLVED,o=r.PROP_SYMBOLS.ASYNC_DEFAULTS,c={},p=0,h=function(){function r(){(0,e.default)(this,r),this.props=s.createProps.apply(this,arguments),this.id=this.props.id,this.count=p++,this.lifecycle=n.LIFECYCLE.NO_STATE,this.parent=null,this.context=null,this.state=null,this.internalState=null,Object.seal(this)}return(0,t.default)(r,[{key:"clone",value:function(e){var t=this.props,n={};for(var s in t[o])s in t[u]?n[s]=t[u][s]:s in t[l]&&(n[s]=t[l][s]);return new this.constructor(Object.assign({},t,n,e))}},{key:"_initState",value:function(){this.internalState=new i.default({})}},{key:"stats",get:function(){return this.internalState.stats}}]),r}();exports.default=h,h.componentName="Component",h.defaultProps=c;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","../lifecycle/constants":"dDJN","./create-props":"jz7I","./constants":"dDJN","./component-state":"c85S"}],"CAGE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("@babel/runtime/helpers/esm/classCallCheck")),t=a(require("@babel/runtime/helpers/esm/createClass")),r=a(require("@babel/runtime/helpers/esm/inherits")),n=a(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),u=a(require("@babel/runtime/helpers/esm/getPrototypeOf")),l=a(require("../lifecycle/component-state"));function a(e){return e&&e.__esModule?e:{default:e}}function s(e){var t=i();return function(){var r,l=(0,u.default)(e);if(t){var a=(0,u.default)(this).constructor;r=Reflect.construct(l,arguments,a)}else r=l.apply(this,arguments);return(0,n.default)(this,r)}}function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var o=function(n){(0,r.default)(l,n);var u=s(l);function l(t){var r,n=t.attributeManager,a=t.layer;return(0,e.default)(this,l),(r=u.call(this,a)).attributeManager=n,r.model=null,r.needsRedraw=!0,r.subLayers=null,r}return(0,t.default)(l,[{key:"layer",get:function(){return this.component},set:function(e){this.component=e}}]),l}(l.default);exports.default=o;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","../lifecycle/component-state":"c85S"}],"xVVm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=A(require("@babel/runtime/helpers/esm/slicedToArray")),e=A(require("@babel/runtime/helpers/esm/classCallCheck")),a=A(require("@babel/runtime/helpers/esm/createClass")),n=A(require("@babel/runtime/helpers/esm/inherits")),i=A(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),r=A(require("@babel/runtime/helpers/esm/getPrototypeOf")),s=require("./constants"),o=A(require("./attribute/attribute-manager")),l=A(require("./uniform-transition-manager")),u=require("../lifecycle/props"),c=require("../utils/count"),d=A(require("../utils/log")),h=A(require("../debug")),p=require("@luma.gl/core"),f=A(require("../utils/assert")),g=A(require("../utils/memoize")),v=require("../utils/shader"),y=require("../shaderlib/project/project-functions"),m=A(require("../utils/typed-array-manager")),b=A(require("../lifecycle/component")),S=A(require("./layer-state")),k=require("@math.gl/web-mercator"),C=require("@loaders.gl/core");function A(t){return t&&t.__esModule?t:{default:t}}function P(t,e){var a;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=w(t))||e&&t&&"number"==typeof t.length){a&&(t=a);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,o=!1;return{s:function(){a=t[Symbol.iterator]()},n:function(){var t=a.next();return s=t.done,t},e:function(t){o=!0,r=t},f:function(){try{s||null==a.return||a.return()}finally{if(o)throw r}}}}function w(t,e){if(t){if("string"==typeof t)return x(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?x(t,e):void 0}}function x(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}function M(t){var e=I();return function(){var a,n=(0,r.default)(t);if(e){var s=(0,r.default)(this).constructor;a=Reflect.construct(n,arguments,s)}else a=n.apply(this,arguments);return(0,i.default)(this,a)}}function I(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}var O="layer.changeFlag",_="layer.initialize",T="layer.update",U="layer.finalize",j="layer.matched",q=Math.pow(2,24)-1,F=Object.freeze([]),R=(0,g.default)(function(t){var e=t.oldViewport,a=t.viewport;return e.equals(a)}),N=new Uint8ClampedArray(0),D={data:{type:"data",value:F,async:!0},dataComparator:null,_dataDiff:{type:"function",value:function(t){return t&&t.__diff},compare:!1,optional:!0},dataTransform:{type:"function",value:null,compare:!1,optional:!0},onDataLoad:{type:"function",value:null,compare:!1,optional:!0},fetch:{type:"function",value:function(t,e){var a=e.propName,n=e.layer,i=n.context.resourceManager,r=n.getLoadOptions(),s=i.contains(t);return s||r||(i.add({resourceId:t,data:t,persistent:!1}),s=!0),s?i.subscribe({resourceId:t,onChange:function(t){return n.internalState.reloadAsyncProp(a,t)},consumerId:n.id,requestId:a}):(0,C.load)(t,r)},compare:!1},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:s.COORDINATE_SYSTEM.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{},uniforms:{},extensions:[],getPolygonOffset:{type:"function",value:function(t){return[0,100*-t.layerIndex]},compare:!1},highlightedObjectIndex:-1,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}},L=function(i){(0,n.default)(g,i);var r=M(g);function g(){return(0,e.default)(this,g),r.apply(this,arguments)}return(0,a.default)(g,[{key:"toString",value:function(){var t=this.constructor.layerName||this.constructor.name;return"".concat(t,"({id: '").concat(this.props.id,"'})")}},{key:"setState",value:function(t){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,t),this.setNeedsRedraw()}},{key:"setNeedsRedraw",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.internalState&&(this.internalState.needsRedraw=t)}},{key:"setNeedsUpdate",value:function(){this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0}},{key:"getNeedsRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};return this._getNeedsRedraw(t)}},{key:"needsUpdate",value:function(){return this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams())}},{key:"hasUniformTransition",value:function(){return this.internalState.uniformTransitions.active}},{key:"isPickable",value:function(){return this.props.pickable&&this.props.visible}},{key:"getModels",value:function(){return this.state&&(this.state.models||(this.state.model?[this.state.model]:[]))}},{key:"getAttributeManager",value:function(){return this.internalState&&this.internalState.attributeManager}},{key:"getCurrentLayer",value:function(){return this.internalState&&this.internalState.layer}},{key:"getLoadOptions",value:function(){return this.props.loadOptions}},{key:"project",value:function(e){var a=this.context.viewport,n=(0,y.getWorldPosition)(e,{viewport:a,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),i=(0,k.worldToPixels)(n,a.pixelProjectionMatrix),r=(0,t.default)(i,3),s=r[0],o=r[1],l=r[2];return 2===e.length?[s,o]:[s,o,l]}},{key:"unproject",value:function(t){return this.context.viewport.unproject(t)}},{key:"projectPosition",value:function(t){return(0,y.projectPosition)(t,{viewport:this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem})}},{key:"use64bitPositions",value:function(){var t=this.props.coordinateSystem;return t===s.COORDINATE_SYSTEM.DEFAULT||t===s.COORDINATE_SYSTEM.LNGLAT||t===s.COORDINATE_SYSTEM.CARTESIAN}},{key:"onHover",value:function(t,e){return!!this.props.onHover&&this.props.onHover(t,e)}},{key:"onClick",value:function(t,e){return!!this.props.onClick&&this.props.onClick(t,e)}},{key:"nullPickingColor",value:function(){return[0,0,0]}},{key:"encodePickingColor",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e[0]=t+1&255,e[1]=t+1>>8&255,e[2]=t+1>>8>>8&255,e}},{key:"decodePickingColor",value:function(e){(0,f.default)(e instanceof Uint8Array);var a=(0,t.default)(e,3);return a[0]+256*a[1]+65536*a[2]-1}},{key:"initializeState",value:function(){throw new Error("Layer ".concat(this," has not defined initializeState"))}},{key:"getShaders",value:function(t){var e,a=P(this.props.extensions);try{for(a.s();!(e=a.n()).done;){var n=e.value;t=(0,v.mergeShaders)(t,n.getShaders.call(this,n))}}catch(i){a.e(i)}finally{a.f()}return t}},{key:"shouldUpdateState",value:function(t){t.oldProps,t.props,t.context;return t.changeFlags.propsOrDataChanged}},{key:"updateState",value:function(t){var e=t.oldProps,a=t.props,n=(t.context,t.changeFlags),i=this.getAttributeManager();if(n.dataChanged&&i){var r=n.dataChanged;if(Array.isArray(r)){var s,o=P(r);try{for(o.s();!(s=o.n()).done;){var l=s.value;i.invalidateAll(l)}}catch(g){o.e(g)}finally{o.f()}}else i.invalidateAll()}var u=e.highlightedObjectIndex>=0||e.pickable,c=a.highlightedObjectIndex>=0||a.pickable;if(u!==c&&i){var d=i.attributes,h=d.pickingColors,p=d.instancePickingColors,f=h||p;f&&(c&&f.constant&&(f.constant=!1,i.invalidate(f.id)),f.value||c||(f.constant=!0,f.value=[0,0,0]))}}},{key:"finalizeState",value:function(){var t,e=P(this.getModels());try{for(e.s();!(t=e.n()).done;){t.value.delete()}}catch(n){e.e(n)}finally{e.f()}var a=this.getAttributeManager();a&&a.finalize(),this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState.uniformTransitions.clear()}},{key:"draw",value:function(t){var e,a=P(this.getModels());try{for(a.s();!(e=a.n()).done;){e.value.draw(t)}}catch(n){a.e(n)}finally{a.f()}}},{key:"getPickingInfo",value:function(t){var e=t.info,a=(t.mode,e.index);return a>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[a]),e}},{key:"activateViewport",value:function(t){var e=this.internalState.viewport;this.internalState.viewport=t,e&&R({oldViewport:e,viewport:t})||(this.setChangeFlags({viewportChanged:!0}),this._update())}},{key:"invalidateAttribute",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",e=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],this.getAttributeManager());e&&("all"===t?e.invalidateAll():e.invalidate(t))}},{key:"updateAttributes",value:function(t){var e,a=P(this.getModels());try{for(a.s();!(e=a.n()).done;){var n=e.value;this._setModelAttributes(n,t)}}catch(i){a.e(i)}finally{a.f()}}},{key:"_updateAttributes",value:function(t){var e=this.getAttributeManager();if(e){var a=this.getNumInstances(t),n=this.getStartIndices(t);e.update({data:t.data,numInstances:a,startIndices:n,props:t,transitions:t.transitions,buffers:t.data.attributes,context:this,ignoreUnknownAttributes:!0});var i=e.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(i)}}},{key:"_updateAttributeTransition",value:function(){var t=this.getAttributeManager();t&&t.updateTransition()}},{key:"_updateUniformTransition",value:function(){var t=this.internalState.uniformTransitions;if(t.active){var e=t.update(),a=Object.create(this.props);for(var n in e)Object.defineProperty(a,n,{value:e[n]});return a}return this.props}},{key:"calculateInstancePickingColors",value:function(t,e){var a=e.numInstances;if(!t.constant){var n=N.length/3;if(n<a){a>q&&d.default.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")();for(var i=(N=m.default.allocate(N,a,{size:3,copy:!0,maxCount:Math.max(a,q)})).length/3,r=[],s=n;s<i;s++)this.encodePickingColor(s,r),N[3*s+0]=r[0],N[3*s+1]=r[1],N[3*s+2]=r[2]}t.value=N.subarray(0,3*a)}}},{key:"_setModelAttributes",value:function(t,e){var a=this.getAttributeManager(),n=t.userData.excludeAttributes||{},i=a.getShaderAttributes(e,n);t.setAttributes(i)}},{key:"clearPickingColor",value:function(t){var e=this.getAttributeManager().attributes,a=e.pickingColors,n=e.instancePickingColors,i=a||n,r=this.decodePickingColor(t),s=i.getVertexOffset(r),o=i.getVertexOffset(r+1);i.buffer.subData({data:new Uint8Array(o-s),offset:s})}},{key:"restorePickingColors",value:function(){var t=this.getAttributeManager().attributes,e=t.pickingColors,a=t.instancePickingColors;(e||a).updateSubBuffer({startOffset:0})}},{key:"getNumInstances",value:function(t){return void 0!==(t=t||this.props).numInstances?t.numInstances:this.state&&void 0!==this.state.numInstances?this.state.numInstances:(0,c.count)(t.data)}},{key:"getStartIndices",value:function(t){return void 0!==(t=t||this.props).startIndices?t.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}},{key:"_initialize",value:function(){(0,h.default)(_,this),this._initState(),this.initializeState(this.context);var t,e=P(this.props.extensions);try{for(e.s();!(t=e.n()).done;){var a=t.value;a.initializeState.call(this,this.context,a)}}catch(n){e.e(n)}finally{e.f()}this.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0,extensionsChanged:!0}),this._updateState()}},{key:"_update",value:function(){var t=this.needsUpdate();(0,h.default)(T,this,t),t&&this._updateState()}},{key:"_updateState",value:function(){var t=this.props,e=this.context.viewport,a=this._updateUniformTransition();this.internalState.propsInTransition=a,this.context.viewport=this.internalState.viewport||e,this.props=a;var n=this._getUpdateParams(),i=this.getModels();if(this.context.gl)this.updateState(n);else try{this.updateState(n)}catch(u){}var r,s=P(this.props.extensions);try{for(s.s();!(r=s.n()).done;){var o=r.value;o.updateState.call(this,n,o)}}catch(c){s.e(c)}finally{s.f()}var l=this.getModels()[0]!==i[0];this._updateModules(n,l),this.isComposite?this._renderLayers(n):(this.setNeedsRedraw(),this._updateAttributes(this.props),this.state.model&&this.state.model.setInstanceCount(this.getNumInstances())),this.context.viewport=e,this.props=t,this.clearChangeFlags(),this.internalState.needsUpdate=!1,this.internalState.resetOldProps()}},{key:"_finalize",value:function(){(0,h.default)(U,this),(0,f.default)(this.internalState&&this.state),this.finalizeState(this.context);var t,e=P(this.props.extensions);try{for(e.s();!(t=e.n()).done;){var a=t.value;a.finalizeState.call(this,a)}}catch(n){e.e(n)}finally{e.f()}}},{key:"drawLayer",value:function(t){var e=this,a=t.moduleParameters,n=void 0===a?null:a,i=t.uniforms,r=void 0===i?{}:i,s=t.parameters,o=void 0===s?{}:s;this._updateAttributeTransition();var l=this.props;this.props=this.internalState.propsInTransition||l;var u=this.props.opacity;r.opacity=Math.pow(u,1/2.2),n&&this.setModuleParameters(n);var c=this.props.getPolygonOffset,d=c&&c(r)||[0,0];(0,p.setParameters)(this.context.gl,{polygonOffset:d}),(0,p.withParameters)(this.context.gl,o,function(){var t,a={moduleParameters:n,uniforms:r,parameters:o,context:e.context},i=P(e.props.extensions);try{for(i.s();!(t=i.n()).done;){var s=t.value;s.draw.call(e,a,s)}}catch(l){i.e(l)}finally{i.f()}e.draw(a)}),this.props=l}},{key:"getChangeFlags",value:function(){return this.internalState.changeFlags}},{key:"setChangeFlags",value:function(t){var e=this.internalState.changeFlags;for(var a in t)if(t[a]){var n=!1;switch(a){case"dataChanged":Array.isArray(e[a])&&(e[a]=Array.isArray(t[a])?e[a].concat(t[a]):t[a],n=!0);default:e[a]||(e[a]=t[a],n=!0)}n&&(0,h.default)(O,this,a,t)}var i=e.dataChanged||e.updateTriggersChanged||e.propsChanged||e.extensionsChanged;e.propsOrDataChanged=i,e.somethingChanged=i||t.viewportChanged||t.stateChanged}},{key:"clearChangeFlags",value:function(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}},{key:"diffProps",value:function(t,e){var a=(0,u.diffProps)(t,e);if(a.updateTriggersChanged)for(var n in a.updateTriggersChanged)a.updateTriggersChanged[n]&&this.invalidateAttribute(n);if(a.transitionsChanged)for(var i in a.transitionsChanged)this.internalState.uniformTransitions.add(i,e[i],t[i],t.transitions[i]);return this.setChangeFlags(a)}},{key:"validateProps",value:function(){(0,u.validateProps)(this.props)}},{key:"setModuleParameters",value:function(t){var e,a=P(this.getModels());try{for(a.s();!(e=a.n()).done;){e.value.updateModuleSettings(t)}}catch(n){a.e(n)}finally{a.f()}}},{key:"_updateModules",value:function(t,e){var a=t.props,n=t.oldProps,i=a.autoHighlight,r=a.highlightedObjectIndex,s=a.highlightColor;if(e||n.autoHighlight!==i||n.highlightedObjectIndex!==r||n.highlightColor!==s){var o={};i||(o.pickingSelectedColor=null),Array.isArray(s)&&(o.pickingHighlightColor=s),Number.isInteger(r)&&(o.pickingSelectedColor=r>=0?this.encodePickingColor(r):null),this.setModuleParameters(o)}}},{key:"_getUpdateParams",value:function(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}},{key:"_getNeedsRedraw",value:function(t){if(!this.internalState)return!1;var e=!1;e=e||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!t.clearRedrawFlags;var a=this.getAttributeManager(),n=a&&a.getNeedsRedraw(t);return e=e||n}},{key:"_getAttributeManager",value:function(){return new o.default(this.context.gl,{id:this.props.id,stats:this.context.stats,timeline:this.context.timeline})}},{key:"_initState",value:function(){(0,f.default)(!this.internalState&&!this.state),(0,f.default)(isFinite(this.props.coordinateSystem),"".concat(this.id,": invalid coordinateSystem"));var t=this._getAttributeManager();t&&t.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new S.default({attributeManager:t,layer:this}),this.clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:function(){return d.default.deprecated("layer.state.attributeManager","layer.getAttributeManager()"),t}}),this.internalState.layer=this,this.internalState.uniformTransitions=new l.default(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props)}},{key:"_transferState",value:function(t){(0,h.default)(j,this,this===t);var e=t.state,a=t.internalState;(0,f.default)(e&&a),this!==t&&(this.internalState=a,this.internalState.layer=this,this.state=e,this.internalState.setAsyncProps(this.props),this.diffProps(this.props,this.internalState.getOldProps()))}},{key:"_onAsyncPropUpdated",value:function(){this.diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}},{key:"isLoaded",get:function(){return this.internalState&&!this.internalState.isAsyncPropLoading()}},{key:"wrapLongitude",get:function(){return this.props.wrapLongitude}}]),g}(b.default);exports.default=L,L.layerName="Layer",L.defaultProps=D;
},{"@babel/runtime/helpers/esm/slicedToArray":"TBeo","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","./constants":"ysbg","./attribute/attribute-manager":"wT56","./uniform-transition-manager":"f2Ln","../lifecycle/props":"UiIs","../utils/count":"nzk4","../utils/log":"GVus","../debug":"EEoF","@luma.gl/core":"iuAK","../utils/assert":"Txat","../utils/memoize":"uXG5","../utils/shader":"NycH","../shaderlib/project/project-functions":"AJ0f","../utils/typed-array-manager":"yeLJ","../lifecycle/component":"ElXl","./layer-state":"CAGE","@math.gl/web-mercator":"PqV4","@loaders.gl/core":"ikKD"}],"h6BZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("@babel/runtime/helpers/esm/classCallCheck")),t=n(require("@babel/runtime/helpers/esm/createClass")),r=require("@loaders.gl/core");function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=o(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return s=e.done,e},e:function(e){u=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(u)throw a}}}}function o(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var s=function(){function n(t,r,i){(0,e.default)(this,n),this.id=t,this.context=i,this._loadCount=0,this._subscribers=new Set,this.setData(r)}return(0,t.default)(n,[{key:"subscribe",value:function(e){this._subscribers.add(e)}},{key:"unsubscribe",value:function(e){this._subscribers.delete(e)}},{key:"inUse",value:function(){return this._subscribers.size>0}},{key:"delete",value:function(){}},{key:"getData",value:function(){var e=this;return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(function(){return e.getData()})}},{key:"setData",value:function(e,t){var n=this;if(e!==this._data||t){this._data=e;var o=++this._loadCount,a=e;"string"==typeof e&&(a=(0,r.load)(e)),a instanceof Promise?(this.isLoaded=!1,this._loader=a.then(function(e){n._loadCount===o&&(n.isLoaded=!0,n._error=null,n._content=e)}).catch(function(e){n._loadCount===o&&(n.isLoaded=!0,n._error=e||!0)})):(this.isLoaded=!0,this._error=null,this._content=e);var s,u=i(this._subscribers);try{for(u.s();!(s=u.n()).done;){s.value.onChange(this.getData())}}catch(l){u.e(l)}finally{u.f()}}}}]),n}();exports.default=s;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@loaders.gl/core":"ikKD"}],"CnML":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("@babel/runtime/helpers/esm/classCallCheck")),r=t(require("@babel/runtime/helpers/esm/createClass")),s=t(require("./resource"));function t(e){return e&&e.__esModule?e:{default:e}}var u=function(){function t(r){var s=r.gl,u=r.protocol;(0,e.default)(this,t),this.protocol=u||"resource://",this._context={gl:s,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}return(0,r.default)(t,[{key:"contains",value:function(e){return!!e.startsWith(this.protocol)||e in this._resources}},{key:"add",value:function(e){var r=e.resourceId,t=e.data,u=e.forceUpdate,i=void 0!==u&&u,n=e.persistent,o=void 0===n||n,c=this._resources[r];c?c.setData(t,i):(c=new s.default(r,t,this._context),this._resources[r]=c),c.persistent=o}},{key:"remove",value:function(e){var r=this._resources[e];r&&(r.delete(),delete this._resources[e])}},{key:"unsubscribe",value:function(e){var r=e.consumerId,s=this._consumers[r];if(s){for(var t in s){var u=s[t];u.resource&&u.resource.unsubscribe(u)}delete this._consumers[r],this.prune()}}},{key:"subscribe",value:function(e){var r=e.resourceId,s=e.onChange,t=e.consumerId,u=e.requestId,i=void 0===u?"default":u,n=this._resources,o=this.protocol;r.startsWith(o)&&(n[r=r.replace(o,"")]||this.add({resourceId:r,data:null,persistent:!1}));var c=n[r];if(this._track(t,i,c,s),c)return c.getData()}},{key:"prune",value:function(){var e=this;this._pruneRequest||(this._pruneRequest=setTimeout(function(){return e._prune()},0))}},{key:"finalize",value:function(){for(var e in this._resources)this._resources[e].delete()}},{key:"_track",value:function(e,r,s,t){var u=this._consumers,i=u[e]=u[e]||{},n=i[r]||{};n.resource&&(n.resource.unsubscribe(n),n.resource=null,this.prune()),s&&(i[r]=n,n.onChange=t,n.resource=s,s.subscribe(n))}},{key:"_prune",value:function(){this._pruneRequest=null;for(var e=0,r=Object.keys(this._resources);e<r.length;e++){var s=r[e],t=this._resources[s];t.persistent||t.inUse()||(t.delete(),delete this._resources[s])}}}]),t}();exports.default=u;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","./resource":"h6BZ"}],"m8xf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=f(require("@babel/runtime/helpers/esm/classCallCheck")),t=f(require("@babel/runtime/helpers/esm/createClass")),r=require("@luma.gl/core"),a=f(require("./layer")),n=require("../lifecycle/constants"),i=f(require("../utils/log")),s=f(require("../debug")),l=require("../utils/flatten"),u=require("probe.gl"),o=f(require("./resource/resource-manager")),d=f(require("../viewports/viewport")),c=require("../shaderlib");function f(e){return e&&e.__esModule?e:{default:e}}function h(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=y(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,l=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return s=e.done,e},e:function(e){l=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(l)throw i}}}}function y(e,t){if(e){if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var p="layerManager.setLayers",_="layerManager.activateViewport",g=Object.seal({layerManager:null,resourceManager:null,deck:null,gl:null,stats:null,shaderCache:null,pickingFBO:null,mousePosition:null,userData:{}}),L=function(e){return e instanceof a.default?"".concat(e):e?"invalid":"null"},w=function(){function a(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.deck,s=n.stats,l=n.viewport,f=n.timeline;(0,e.default)(this,a),this.lastRenderedLayers=[],this.layers=[],this.resourceManager=new o.default({gl:t,protocol:"deck://"}),this.context=Object.assign({},g,{layerManager:this,gl:t,deck:i,programManager:t&&(0,c.createProgramManager)(t),stats:s||new u.Stats({id:"deck.gl"}),viewport:l||new d.default({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:f||new r.Timeline,resourceManager:this.resourceManager}),this._needsRedraw="Initial render",this._needsUpdate=!1,this._debug=!1,this._onError=null,this.activateViewport=this.activateViewport.bind(this),Object.seal(this)}return(0,t.default)(a,[{key:"finalize",value:function(){this.resourceManager.finalize();var e,t=h(this.layers);try{for(t.s();!(e=t.n()).done;){var r=e.value;this._finalizeLayer(r)}}catch(a){t.e(a)}finally{t.f()}}},{key:"needsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},t=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);var r,a=h(this.layers);try{for(a.s();!(r=a.n()).done;){var n=r.value.getNeedsRedraw(e);t=t||n}}catch(i){a.e(i)}finally{a.f()}return t}},{key:"needsUpdate",value:function(){return this._needsUpdate}},{key:"setNeedsRedraw",value:function(e){this._needsRedraw=this._needsRedraw||e}},{key:"setNeedsUpdate",value:function(e){this._needsUpdate=this._needsUpdate||e}},{key:"getLayers",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).layerIds,t=void 0===e?null:e;return t?this.layers.filter(function(e){return t.find(function(t){return 0===e.id.indexOf(t)})}):this.layers}},{key:"setProps",value:function(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&this.setLayers(e.layers),"onError"in e&&(this._onError=e.onError)}},{key:"setLayers",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]||e!==this.lastRenderedLayers;if((0,s.default)(p,this,t,e),!t)return this;this.lastRenderedLayers=e;var r,a=h(e=(0,l.flatten)(e,Boolean));try{for(a.s();!(r=a.n()).done;){r.value.context=this.context}}catch(n){a.e(n)}finally{a.f()}return this._updateLayers(this.layers,e),this}},{key:"updateLayers",value:function(){var e=this.needsUpdate();if(e){this.setNeedsRedraw("updating layers: ".concat(e));this.setLayers(this.lastRenderedLayers,!0)}}},{key:"activateViewport",value:function(e){return(0,s.default)(_,this,e),e&&(this.context.viewport=e),this}},{key:"_handleError",value:function(e,t,r){this._onError?this._onError(t,r):i.default.error("error during ".concat(e," of ").concat(L(r)),t)()}},{key:"_updateLayers",value:function(e,t){var r,a={},n=h(e);try{for(n.s();!(r=n.n()).done;){var s=r.value;a[s.id]?i.default.warn("Multiple old layers with same id ".concat(L(s)))():a[s.id]=s}}catch(c){n.e(c)}finally{n.f()}var l=[];this._updateSublayersRecursively(t,a,l),this._finalizeOldLayers(a);for(var u=!1,o=0,d=l;o<d.length;o++){if(d[o].hasUniformTransition()){u=!0;break}}this._needsUpdate=u,this.layers=l}},{key:"_updateSublayersRecursively",value:function(e,t,r){var a,n=h(e);try{for(n.s();!(a=n.n()).done;){var s=a.value;s.context=this.context;var l=t[s.id];null===l&&i.default.warn("Multiple new layers with same id ".concat(L(s)))(),t[s.id]=null;var u=null;try{this._debug&&l!==s&&s.validateProps(),l?(this._transferLayerState(l,s),this._updateLayer(s)):this._initializeLayer(s),r.push(s),u=s.isComposite&&s.getSubLayers()}catch(o){this._handleError("matching",o,s)}u&&this._updateSublayersRecursively(u,t,r)}}catch(o){n.e(o)}finally{n.f()}}},{key:"_finalizeOldLayers",value:function(e){for(var t in e){var r=e[t];r&&this._finalizeLayer(r)}}},{key:"_initializeLayer",value:function(e){try{e._initialize(),e.lifecycle=n.LIFECYCLE.INITIALIZED}catch(t){this._handleError("initialization",t,e)}}},{key:"_transferLayerState",value:function(e,t){t._transferState(e),t.lifecycle=n.LIFECYCLE.MATCHED,t!==e&&(e.lifecycle=n.LIFECYCLE.AWAITING_GC)}},{key:"_updateLayer",value:function(e){try{e._update()}catch(t){this._handleError("update",t,e)}}},{key:"_finalizeLayer",value:function(e){this._needsRedraw=this._needsRedraw||"finalized ".concat(L(e)),e.lifecycle=n.LIFECYCLE.AWAITING_FINALIZATION;try{e._finalize(),e.lifecycle=n.LIFECYCLE.FINALIZED}catch(t){this._handleError("finalization",t,e)}}}]),a}();exports.default=w;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@luma.gl/core":"iuAK","./layer":"xVVm","../lifecycle/constants":"dDJN","../utils/log":"GVus","../debug":"EEoF","../utils/flatten":"gSVO","probe.gl":"TYNK","./resource/resource-manager":"CnML","../viewports/viewport":"HjGN","../shaderlib":"vZnx"}],"KSag":[function(require,module,exports) {
"use strict";function r(e,t){if(e===t)return!0;if(!e||!t)return!1;for(var i in e){var u=e[i],a=t[i];if(!(u===a||Array.isArray(u)&&Array.isArray(a)&&r(u,a)))return!1}return!0}Object.defineProperty(exports,"__esModule",{value:!0}),exports.deepEqual=r;
},{}],"H2B6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("@babel/runtime/helpers/esm/defineProperty")),t=o(require("@babel/runtime/helpers/esm/classCallCheck")),i=o(require("@babel/runtime/helpers/esm/createClass")),n=o(require("../utils/assert")),r=require("../utils/deep-equal"),s=o(require("../utils/log")),a=require("../utils/flatten");function o(e){return e&&e.__esModule?e:{default:e}}function h(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function l(t){for(var i=1;i<arguments.length;i++){var n=null!=arguments[i]?arguments[i]:{};i%2?h(Object(n),!0).forEach(function(i){(0,e.default)(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var u=function(){function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,t.default)(this,e),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=i.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="Initial render",this._needsUpdate=!0,this._eventManager=i.eventManager,this._eventCallbacks={onViewStateChange:i.onViewStateChange,onInteractiveStateChange:i.onInteractiveStateChange},Object.seal(this),this.setProps(i)}return(0,i.default)(e,[{key:"finalize",value:function(){for(var e in this.controllers)this.controllers[e]&&this.controllers[e].finalize();this.controllers={}}},{key:"needsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}},{key:"setNeedsUpdate",value:function(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}},{key:"updateViewStates",value:function(){for(var e in this.controllers){var t=this.controllers[e];t&&t.updateTransition()}}},{key:"getViewports",value:function(e){return e?this._viewports.filter(function(t){return t.containsPixel(e)}):this._viewports}},{key:"getViews",value:function(){var e={};return this.views.forEach(function(t){e[t.id]=t}),e}},{key:"getView",value:function(e){return"string"==typeof e?this.views.find(function(t){return t.id===e}):e}},{key:"getViewState",value:function(e){var t=this.getView(e),i=t&&this.viewState[t.getViewStateId()]||this.viewState;return t?t.filterViewState(i):i}},{key:"getViewport",value:function(e){return this._viewportMap[e]}},{key:"unproject",value:function(e,t){for(var i=this.getViewports(),n={x:e[0],y:e[1]},r=i.length-1;r>=0;--r){var s=i[r];if(s.containsPixel(n)){var a=e.slice();return a[0]-=s.x,a[1]-=s.y,s.unproject(a,t)}}return null}},{key:"setProps",value:function(e){"views"in e&&this._setViews(e.views),"viewState"in e&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}},{key:"_update",value:function(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}},{key:"_setSize",value:function(e,t){(0,n.default)(Number.isFinite(e)&&Number.isFinite(t)),e===this.width&&t===this.height||(this.width=e,this.height=t,this.setNeedsUpdate("Size changed"))}},{key:"_setViews",value:function(e){e=(0,a.flatten)(e,Boolean),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}},{key:"_setViewState",value:function(e){e?(!(0,r.deepEqual)(e,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):s.default.warn("missing `viewState` or `initialViewState`")()}},{key:"_onViewStateChange",value:function(e,t){t.viewId=e,this._eventCallbacks.onViewStateChange(t)}},{key:"_createController",value:function(e,t){return new(0,t.type)(l({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,t.id),onStateChange:this._eventCallbacks.onInteractiveStateChange,makeViewport:e._getViewport.bind(e)},t))}},{key:"_updateController",value:function(e,t,i,n){var r=e.controller;return r?(r=l(l(l(l({},t),e.props),r),{},{id:e.id,x:i.x,y:i.y,width:i.width,height:i.height}),n?n.setProps(r):n=this._createController(e,r),n):null}},{key:"_rebuildViewports",value:function(){var e=this.width,t=this.height,i=this.views,n=this.controllers;this._viewports=[],this.controllers={};for(var r=i.length;r--;){var s=i[r],a=this.getViewState(s),o=s.makeViewport({width:e,height:t,viewState:a});this.controllers[s.id]=this._updateController(s,a,o,n[s.id]),this._viewports.unshift(o)}for(var h in n)n[h]&&!this.controllers[h]&&n[h].finalize();this._buildViewportMap()}},{key:"_buildViewportMap",value:function(){var e=this;this._viewportMap={},this._viewports.forEach(function(t){t.id&&(e._viewportMap[t.id]=e._viewportMap[t.id]||t)})}},{key:"_diffViews",value:function(e,t){return e.length!==t.length||e.some(function(i,n){return!e[n].equals(t[n])})}}]),e}();exports.default=u;
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","../utils/assert":"Txat","../utils/deep-equal":"KSag","../utils/log":"GVus","../utils/flatten":"gSVO"}],"MOmt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parsePosition=o,exports.getPosition=i;var e=t(require("@babel/runtime/helpers/esm/typeof"));function t(e){return e&&e.__esModule?e:{default:e}}var r=/([0-9]+\.?[0-9]*)(%|px)/;function o(t){switch((0,e.default)(t)){case"number":return{position:t,relative:!1};case"string":var o=t.match(r);if(o&&o.length>=3){var i="%"===o[2],n=parseFloat(o[1]);return{position:i?n/100:n,relative:i}}default:throw new Error("Could not parse position string ".concat(t))}}function i(e,t){return e.relative?Math.round(e.position*t):e.position}
},{"@babel/runtime/helpers/esm/typeof":"zsbK"}],"k6Eh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("@babel/runtime/helpers/esm/typeof")),t=u(require("@babel/runtime/helpers/esm/defineProperty")),i=u(require("@babel/runtime/helpers/esm/classCallCheck")),r=u(require("@babel/runtime/helpers/esm/createClass")),s=u(require("../viewports/viewport")),o=require("../utils/positions"),n=require("../utils/deep-equal"),a=u(require("../utils/assert"));function u(e){return e&&e.__esModule?e:{default:e}}function p(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,r)}return i}function h(e){for(var i=1;i<arguments.length;i++){var r=null!=arguments[i]?arguments[i]:{};i%2?p(Object(r),!0).forEach(function(i){(0,t.default)(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var l=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,i.default)(this,t);var r=e.id,o=void 0===r?null:r,n=e.x,u=void 0===n?0:n,p=e.y,h=void 0===p?0:p,l=e.width,c=void 0===l?"100%":l,v=e.height,d=void 0===v?"100%":v,f=e.projectionMatrix,w=void 0===f?null:f,y=e.fovy,g=void 0===y?50:y,b=e.near,O=void 0===b?.1:b,j=e.far,m=void 0===j?1e3:j,P=e.modelMatrix,_=void 0===P?null:P,S=e.viewportInstance,q=void 0===S?null:S,x=e.type,k=void 0===x?s.default:x;(0,a.default)(!q||q instanceof s.default),this.viewportInstance=q,this.id=o||this.constructor.displayName||"view",this.type=k,this.props=Object.assign({},e,{id:this.id,projectionMatrix:w,fovy:g,near:O,far:m,modelMatrix:_}),this._parseDimensions({x:u,y:h,width:c,height:d}),this.equals=this.equals.bind(this),Object.seal(this)}return(0,r.default)(t,[{key:"equals",value:function(e){return this===e||(this.viewportInstance?e.viewportInstance&&this.viewportInstance.equals(e.viewportInstance):(0,n.deepEqual)(this.props,e.props))}},{key:"makeViewport",value:function(e){var t=e.width,i=e.height,r=e.viewState;if(this.viewportInstance)return this.viewportInstance;r=this.filterViewState(r);var s=this.getDimensions({width:t,height:i}),o=h(h(h({},r),this.props),s);return this._getViewport(o)}},{key:"getViewStateId",value:function(){switch((0,e.default)(this.props.viewState)){case"string":return this.props.viewState;case"object":return this.props.viewState&&this.props.viewState.id;default:return this.id}}},{key:"filterViewState",value:function(t){if(this.props.viewState&&"object"===(0,e.default)(this.props.viewState)){if(!this.props.viewState.id)return this.props.viewState;var i=Object.assign({},t);for(var r in this.props.viewState)"id"!==r&&(i[r]=this.props.viewState[r]);return i}return t}},{key:"getDimensions",value:function(e){var t=e.width,i=e.height;return{x:(0,o.getPosition)(this._x,t),y:(0,o.getPosition)(this._y,i),width:(0,o.getPosition)(this._width,t),height:(0,o.getPosition)(this._height,i)}}},{key:"_getControllerProps",value:function(e){var t=this.props.controller;return t?!0===t?e:("function"==typeof t&&(t={type:t}),Object.assign({},e,t)):null}},{key:"_getViewport",value:function(e){return new(0,this.type)(e)}},{key:"_parseDimensions",value:function(e){var t=e.x,i=e.y,r=e.width,s=e.height;this._x=(0,o.parsePosition)(t),this._y=(0,o.parsePosition)(i),this._width=(0,o.parsePosition)(r),this._height=(0,o.parsePosition)(s)}}]),t}();exports.default=l;
},{"@babel/runtime/helpers/esm/typeof":"zsbK","@babel/runtime/helpers/esm/defineProperty":"iDM3","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","../viewports/viewport":"HjGN","../utils/positions":"MOmt","../utils/deep-equal":"KSag","../utils/assert":"Txat"}],"R8fo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=o(require("@babel/runtime/helpers/esm/classCallCheck")),e=o(require("@babel/runtime/helpers/esm/createClass")),t=require("math.gl"),n=o(require("../utils/assert"));function o(r){return r&&r.__esModule?r:{default:r}}function i(r,e){var t;if("undefined"==typeof Symbol||null==r[Symbol.iterator]){if(Array.isArray(r)||(t=a(r))||e&&r&&"number"==typeof r.length){t&&(r=t);var n=0,o=function(){};return{s:o,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(r){throw r},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,s=!1;return{s:function(){t=r[Symbol.iterator]()},n:function(){var r=t.next();return u=r.done,r},e:function(r){s=!0,i=r},f:function(){try{u||null==t.return||t.return()}finally{if(s)throw i}}}}function a(r,e){if(r){if("string"==typeof r)return u(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?u(r,e):void 0}}function u(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}var s=function(){function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.default)(this,o),Array.isArray(e)&&(e={compare:e,extract:e,required:e});var t=e,n=t.compare,i=t.extract,a=t.required;this._propsToCompare=n,this._propsToExtract=i,this._requiredProps=a}return(0,e.default)(o,[{key:"arePropsEqual",value:function(r,e){var n,o=i(this._propsToCompare||Object.keys(e));try{for(o.s();!(n=o.n()).done;){var a=n.value;if(!(a in r&&a in e&&(0,t.equals)(r[a],e[a])))return!1}}catch(u){o.e(u)}finally{o.f()}return!0}},{key:"initializeProps",value:function(r,e){var t;if(this._propsToExtract){var n,o={},a={},u=i(this._propsToExtract);try{for(u.s();!(n=u.n()).done;){var s=n.value;o[s]=r[s],a[s]=e[s]}}catch(l){u.e(l)}finally{u.f()}t={start:o,end:a}}else t={start:r,end:e};return this._checkRequiredProps(t.start),this._checkRequiredProps(t.end),t}},{key:"interpolateProps",value:function(r,e,t){return e}},{key:"getDuration",value:function(r,e){return e.transitionDuration}},{key:"_checkRequiredProps",value:function(r){this._requiredProps&&this._requiredProps.forEach(function(e){var t=r[e];(0,n.default)(Number.isFinite(t)||Array.isArray(t),"".concat(e," is required for transition"))})}}]),o}();exports.default=s;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","math.gl":"xAaq","../utils/assert":"Txat"}],"bGRb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("@babel/runtime/helpers/esm/classCallCheck")),t=o(require("@babel/runtime/helpers/esm/createClass")),r=o(require("@babel/runtime/helpers/esm/inherits")),u=o(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),n=o(require("@babel/runtime/helpers/esm/getPrototypeOf")),i=o(require("./transition-interpolator")),l=require("math.gl");function o(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=s();return function(){var r,i=(0,n.default)(e);if(t){var l=(0,n.default)(this).constructor;r=Reflect.construct(i,arguments,l)}else r=i.apply(this,arguments);return(0,u.default)(this,r)}}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var c=["longitude","latitude","zoom","bearing","pitch"],f=["longitude","latitude","zoom"],p=function(u){(0,r.default)(i,u);var n=a(i);function i(t){return(0,e.default)(this,i),n.call(this,t||{compare:c,extract:c,required:f})}return(0,t.default)(i,[{key:"interpolateProps",value:function(e,t,r){var u={};for(var n in t)u[n]=(0,l.lerp)(e[n]||0,t[n]||0,r);return u}}]),i}(i.default);exports.default=p;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","./transition-interpolator":"R8fo","math.gl":"xAaq"}],"awSe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.TRANSITION_EVENTS=void 0;var t=e(require("@babel/runtime/helpers/esm/classCallCheck")),n=e(require("@babel/runtime/helpers/esm/createClass")),i=e(require("../transitions/linear-interpolator")),r=e(require("../transitions/transition"));function e(t){return t&&t.__esModule?t:{default:t}}var o=function(){},s={BREAK:1,SNAP_TO_END:2,IGNORE:3};exports.TRANSITION_EVENTS=s;var a={transitionDuration:0,transitionEasing:function(t){return t},transitionInterpolator:new i.default,transitionInterruption:s.BREAK,onTransitionStart:o,onTransitionInterrupt:o,onTransitionEnd:o},u=function(){function i(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,t.default)(this,i),this.ControllerState=n,this.props=Object.assign({},a,e),this.propsInTransition=null,this.transition=new r.default(e.timeline),this.onViewStateChange=e.onViewStateChange,this._onTransitionUpdate=this._onTransitionUpdate.bind(this)}return(0,n.default)(i,[{key:"finalize",value:function(){this.transition.cancel()}},{key:"getViewportInTransition",value:function(){return this.propsInTransition}},{key:"processViewStateChange",value:function(t){var n=!1,i=this.props;if(t=Object.assign({},a,t),this.props=t,this._shouldIgnoreViewportChange(i,t))return n;if(this._isTransitionEnabled(t)){var r=this.transition.settings,e=r.interruption,o=r.endProps,u=Object.assign({},i,e===s.SNAP_TO_END?o:this.propsInTransition||i);this._triggerTransition(u,t),n=!0}else this.transition.cancel();return n}},{key:"updateTransition",value:function(){this.transition.update()}},{key:"_isTransitionEnabled",value:function(t){var n=t.transitionDuration,i=t.transitionInterpolator;return(n>0||"auto"===n)&&Boolean(i)}},{key:"_isUpdateDueToCurrentTransition",value:function(t){return!!this.transition.inProgress&&this.transition.settings.interpolator.arePropsEqual(t,this.propsInTransition)}},{key:"_shouldIgnoreViewportChange",value:function(t,n){return this.transition.inProgress?this.transition.settings.interruption===s.IGNORE||this._isUpdateDueToCurrentTransition(n):!this._isTransitionEnabled(n)||n.transitionInterpolator.arePropsEqual(t,n)}},{key:"_triggerTransition",value:function(t,n){var i=new this.ControllerState(t),r=new this.ControllerState(n).shortestPathFrom(i),e=n.transitionInterpolator,o=e.getDuration?e.getDuration(t,n):n.transitionDuration;if(0!==o){var s=n.transitionInterpolator.initializeProps(t,r);this.propsInTransition={},this.duration=o,this.transition.start({duration:o,easing:n.transitionEasing,interpolator:n.transitionInterpolator,interruption:n.transitionInterruption,startProps:s.start,endProps:s.end,onStart:n.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(n.onTransitionInterrupt),onEnd:this._onTransitionEnd(n.onTransitionEnd)}),this.updateTransition()}}},{key:"_onTransitionEnd",value:function(t){var n=this;return function(i){n.propsInTransition=null,t(i)}}},{key:"_onTransitionUpdate",value:function(t){var n=t.time,i=t.settings,r=i.interpolator,e=i.startProps,o=i.endProps,s=i.duration,a=(0,i.easing)(n/s),u=r.interpolateProps(e,o,a);this.propsInTransition=new this.ControllerState(Object.assign({},this.props,u)).getViewportProps(),this.onViewStateChange&&this.onViewStateChange({viewState:this.propsInTransition,interactionState:{inTransition:!0},oldViewState:this.props})}}]),i}();exports.default=u,u.defaultProps=a;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","../transitions/linear-interpolator":"bGRb","../transitions/transition":"yDoV"}],"ugw5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("@babel/runtime/helpers/esm/defineProperty")),e=r(require("@babel/runtime/helpers/esm/classCallCheck")),n=r(require("@babel/runtime/helpers/esm/createClass")),i=r(require("./transition-manager")),o=r(require("../utils/assert"));function r(t){return t&&t.__esModule?t:{default:t}}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function s(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?a(Object(i),!0).forEach(function(n){(0,t.default)(e,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var h={transitionDuration:0},u=.01,l={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],DOUBLE_TAP:["doubletap"],KEYBOARD:["keydown"]},c=function(){function t(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,e.default)(this,t),(0,o.default)(n),this.ControllerState=n,this.controllerState=null,this.controllerStateProps=null,this.eventManager=null,this.transitionManager=new i.default(n,r),this._events=null,this._state={isDragging:!1},this._customEvents=[],this.onViewStateChange=null,this.onStateChange=null,this.invertPan=!1,this.handleEvent=this.handleEvent.bind(this),this.setProps(r)}return(0,n.default)(t,[{key:"finalize",value:function(){for(var t in this._events)this._events[t]&&this.eventManager.off(t,this.handleEvent);this.transitionManager.finalize()}},{key:"handleEvent",value:function(t){var e=this.ControllerState;switch(this.controllerState=new e(s(s({makeViewport:this.makeViewport},this.controllerStateProps),this._state)),t.type){case"panstart":return this._onPanStart(t);case"panmove":return this._onPan(t);case"panend":return this._onPanEnd(t);case"pinchstart":return this._onPinchStart(t);case"pinchmove":return this._onPinch(t);case"pinchend":return this._onPinchEnd(t);case"doubletap":return this._onDoubleTap(t);case"wheel":return this._onWheel(t);case"keydown":return this._onKeyDown(t);default:return!1}}},{key:"getCenter",value:function(t){var e=this.controllerStateProps,n=e.x,i=e.y,o=t.offsetCenter;return[o.x-n,o.y-i]}},{key:"isPointInBounds",value:function(t,e){var n=this.controllerStateProps,i=n.width,o=n.height;if(e&&e.handled)return!1;var r=t[0]>=0&&t[0]<=i&&t[1]>=0&&t[1]<=o;return r&&e&&e.stopPropagation(),r}},{key:"isFunctionKeyPressed",value:function(t){var e=t.srcEvent;return Boolean(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}},{key:"isDragging",value:function(){return this._state.isDragging}},{key:"setProps",value:function(t){"onViewStateChange"in t&&(this.onViewStateChange=t.onViewStateChange),"onStateChange"in t&&(this.onStateChange=t.onStateChange),"makeViewport"in t&&(this.makeViewport=t.makeViewport),this.controllerStateProps=t,"eventManager"in t&&this.eventManager!==t.eventManager&&(this.eventManager=t.eventManager,this._events={},this.toggleEvents(this._customEvents,!0)),this.transitionManager.processViewStateChange(this.controllerStateProps);var e=t.scrollZoom,n=void 0===e||e,i=t.dragPan,o=void 0===i||i,r=t.dragRotate,a=void 0===r||r,s=t.doubleClickZoom,h=void 0===s||s,u=t.touchZoom,c=void 0===u||u,g=t.touchRotate,v=void 0!==g&&g,p=t.keyboard,d=void 0===p||p,f=Boolean(this.onViewStateChange);this.toggleEvents(l.WHEEL,f&&n),this.toggleEvents(l.PAN,f&&(o||a)),this.toggleEvents(l.PINCH,f&&(c||v)),this.toggleEvents(l.DOUBLE_TAP,f&&h),this.toggleEvents(l.KEYBOARD,f&&d),this.scrollZoom=n,this.dragPan=o,this.dragRotate=a,this.doubleClickZoom=h,this.touchZoom=c,this.touchRotate=v,this.keyboard=d}},{key:"updateTransition",value:function(){this.transitionManager.updateTransition()}},{key:"toggleEvents",value:function(t,e){var n=this;this.eventManager&&t.forEach(function(t){n._events[t]!==e&&(n._events[t]=e,e?n.eventManager.on(t,n.handleEvent):n.eventManager.off(t,n.handleEvent))})}},{key:"updateViewport",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=Object.assign({},t.getViewportProps(),e);if(this.controllerState!==t){var o=this.controllerState?this.controllerState.getViewportProps():null;this.onViewStateChange&&this.onViewStateChange({viewState:i,interactionState:n,oldViewState:o})}Object.assign(this._state,t.getInteractiveState(),n),this.onStateChange&&this.onStateChange(this._state)}},{key:"_onPanStart",value:function(t){var e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;var n=this.controllerState.panStart({pos:e}).rotateStart({pos:e});return this.updateViewport(n,h,{isDragging:!0}),!0}},{key:"_onPan",value:function(t){if(!this.isDragging())return!1;var e=this.isFunctionKeyPressed(t)||t.rightButton;return(e=this.invertPan?!e:e)?this._onPanMove(t):this._onPanRotate(t)}},{key:"_onPanEnd",value:function(t){var e=this.controllerState.panEnd().rotateEnd();return this.updateViewport(e,null,{isDragging:!1,isPanning:!1,isRotating:!1}),!0}},{key:"_onPanMove",value:function(t){if(!this.dragPan)return!1;var e=this.getCenter(t),n=this.controllerState.pan({pos:e});return this.updateViewport(n,h,{isDragging:!0,isPanning:!0}),!0}},{key:"_onPanRotate",value:function(t){if(!this.dragRotate)return!1;var e=t.deltaX,n=t.deltaY,i=this.controllerState.getViewportProps(),o=e/i.width,r=n/i.height,a=this.controllerState.rotate({deltaScaleX:o,deltaScaleY:r});return this.updateViewport(a,h,{isDragging:!0,isRotating:!0}),!0}},{key:"_onWheel",value:function(t){if(!this.scrollZoom)return!1;t.preventDefault();var e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;var n=t.delta,i=2/(1+Math.exp(-Math.abs(n*u)));n<0&&0!==i&&(i=1/i);var o=this.controllerState.zoom({pos:e,scale:i});return this.updateViewport(o,h,{isZooming:!0,isPanning:!0}),!0}},{key:"_onPinchStart",value:function(t){var e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;var n=this.controllerState.zoomStart({pos:e}).rotateStart({pos:e});return this._state.startPinchRotation=t.rotation,this.updateViewport(n,h,{isDragging:!0}),!0}},{key:"_onPinch",value:function(t){if(!this.touchZoom&&!this.touchRotate)return!1;if(!this.isDragging())return!1;var e=this.controllerState;if(this.touchZoom){var n=t.scale,i=this.getCenter(t);e=e.zoom({pos:i,scale:n})}if(this.touchRotate){var o=t.rotation,r=this._state.startPinchRotation;e=e.rotate({deltaScaleX:-(o-r)/180})}return this.updateViewport(e,h,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),!0}},{key:"_onPinchEnd",value:function(t){var e=this.controllerState.zoomEnd().rotateEnd();return this._state.startPinchRotation=0,this.updateViewport(e,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1}),!0}},{key:"_onDoubleTap",value:function(t){if(!this.doubleClickZoom)return!1;var e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;var n=this.isFunctionKeyPressed(t),i=this.controllerState.zoom({pos:e,scale:n?.5:2});return this.updateViewport(i,this._getTransitionProps(),{isZooming:!0,isPanning:!0}),!0}},{key:"_onKeyDown",value:function(t){if(!this.keyboard)return!1;var e,n=this.isFunctionKeyPressed(t),i=this.controllerState,o={};switch(t.srcEvent.code){case"Minus":e=n?i.zoomOut().zoomOut():i.zoomOut(),o.isZooming=!0;break;case"Equal":e=n?i.zoomIn().zoomIn():i.zoomIn(),o.isZooming=!0;break;case"ArrowLeft":n?(e=i.rotateLeft(),o.isRotating=!0):(e=i.moveLeft(),o.isPanning=!0);break;case"ArrowRight":n?(e=i.rotateRight(),o.isRotating=!0):(e=i.moveRight(),o.isPanning=!0);break;case"ArrowUp":n?(e=i.rotateUp(),o.isRotating=!0):(e=i.moveUp(),o.isPanning=!0);break;case"ArrowDown":n?(e=i.rotateDown(),o.isRotating=!0):(e=i.moveDown(),o.isPanning=!0);break;default:return!1}return this.updateViewport(e,this._getTransitionProps(),o),!0}},{key:"_getTransitionProps",value:function(){return h}},{key:"events",set:function(t){this.toggleEvents(this._customEvents,!1),this.toggleEvents(t,!0),this._customEvents=t,this.setProps(this.controllerStateProps)}}]),t}();exports.default=c;
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","./transition-manager":"awSe","../utils/assert":"Txat"}],"TfDO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("@babel/runtime/helpers/esm/classCallCheck")),t=s(require("@babel/runtime/helpers/esm/createClass")),r=s(require("../utils/assert"));function s(e){return e&&e.__esModule?e:{default:e}}var i=function(){function s(t){(0,e.default)(this,s),(0,r.default)(Number.isFinite(t.width),"`width` must be supplied"),(0,r.default)(Number.isFinite(t.height),"`height` must be supplied"),this._viewportProps=this._applyConstraints(t)}return(0,t.default)(s,[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"shortestPathFrom",value:function(e){return this._viewportProps}},{key:"_applyConstraints",value:function(e){return e}}]),s}();exports.default=i;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","../utils/assert":"Txat"}],"N44t":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.MapState=exports.MAPBOX_LIMITS=void 0;var t=d(require("@babel/runtime/helpers/esm/defineProperty")),e=d(require("@babel/runtime/helpers/esm/slicedToArray")),r=d(require("@babel/runtime/helpers/esm/classCallCheck")),a=d(require("@babel/runtime/helpers/esm/createClass")),i=d(require("@babel/runtime/helpers/esm/inherits")),n=d(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),o=d(require("@babel/runtime/helpers/esm/getPrototypeOf")),u=require("math.gl"),s=d(require("./controller")),l=d(require("./view-state")),c=require("@math.gl/web-mercator"),p=d(require("../utils/assert")),h=d(require("../transitions/linear-interpolator")),m=require("./transition-manager");function d(t){return t&&t.__esModule?t:{default:t}}function v(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,a)}return r}function g(e){for(var r=1;r<arguments.length;r++){var a=null!=arguments[r]?arguments[r]:{};r%2?v(Object(a),!0).forEach(function(r){(0,t.default)(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function f(t){var e=P();return function(){var r,a=(0,o.default)(t);if(e){var i=(0,o.default)(this).constructor;r=Reflect.construct(a,arguments,i)}else r=a.apply(this,arguments);return(0,n.default)(this,r)}}function P(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}var _=5,b=1.2,y={transitionDuration:300,transitionEasing:function(t){return t},transitionInterpolator:new h.default,transitionInterruption:m.TRANSITION_EVENTS.BREAK},w={transitionDuration:0},S={minZoom:0,maxZoom:20,minPitch:0,maxPitch:60};exports.MAPBOX_LIMITS=S;var k={pitch:0,bearing:0,altitude:1.5},L=function(t){(0,i.default)(o,t);var n=f(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.makeViewport,i=e.width,u=e.height,s=e.latitude,l=e.longitude,c=e.zoom,h=e.bearing,m=void 0===h?k.bearing:h,d=e.pitch,v=void 0===d?k.pitch:d,g=e.altitude,f=void 0===g?k.altitude:g,P=e.maxZoom,_=void 0===P?S.maxZoom:P,b=e.minZoom,y=void 0===b?S.minZoom:b,w=e.maxPitch,L=void 0===w?S.maxPitch:w,Z=e.minPitch,O=void 0===Z?S.minPitch:Z,j=e.startPanLngLat,x=e.startZoomLngLat,z=e.startBearing,C=e.startPitch,M=e.startZoom;return(0,r.default)(this,o),(0,p.default)(Number.isFinite(l),"`longitude` must be supplied"),(0,p.default)(Number.isFinite(s),"`latitude` must be supplied"),(0,p.default)(Number.isFinite(c),"`zoom` must be supplied"),(t=n.call(this,{width:i,height:u,latitude:s,longitude:l,zoom:c,bearing:m,pitch:v,altitude:f,maxZoom:_,minZoom:y,maxPitch:L,minPitch:O}))._interactiveState={startPanLngLat:j,startZoomLngLat:x,startBearing:z,startPitch:C,startZoom:M},t.makeViewport=a,t}return(0,a.default)(o,[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"getInteractiveState",value:function(){return this._interactiveState}},{key:"panStart",value:function(t){var e=t.pos;return this._getUpdatedState({startPanLngLat:this._unproject(e)})}},{key:"pan",value:function(t){var r=t.pos,a=t.startPos,i=this._interactiveState.startPanLngLat||this._unproject(a);if(!i)return this;var n=this._calculateNewLngLat({startPanLngLat:i,pos:r}),o=(0,e.default)(n,2),u=o[0],s=o[1];return this._getUpdatedState({longitude:u,latitude:s})}},{key:"panEnd",value:function(){return this._getUpdatedState({startPanLngLat:null})}},{key:"rotateStart",value:function(t){t.pos;return this._getUpdatedState({startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}},{key:"rotate",value:function(t){var e=t.deltaScaleX,r=void 0===e?0:e,a=t.deltaScaleY,i=void 0===a?0:a,n=this._interactiveState,o=n.startBearing,u=n.startPitch;if(!Number.isFinite(o)||!Number.isFinite(u))return this;var s=this._calculateNewPitchAndBearing({deltaScaleX:r,deltaScaleY:i,startBearing:o,startPitch:u}),l=s.pitch,c=s.bearing;return this._getUpdatedState({bearing:c,pitch:l})}},{key:"rotateEnd",value:function(){return this._getUpdatedState({startBearing:null,startPitch:null})}},{key:"zoomStart",value:function(t){var e=t.pos;return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function(t){var r=t.pos,a=t.startPos,i=t.scale,n=this._interactiveState,o=n.startZoom,u=n.startZoomLngLat;Number.isFinite(o)||(o=this._viewportProps.zoom,u=this._unproject(a)||this._unproject(r));var s=this._calculateNewZoom({scale:i,startZoom:o}),l=this.makeViewport(g(g({},this._viewportProps),{},{zoom:s})).getMapCenterByLngLatPosition({lngLat:u,pos:r}),c=(0,e.default)(l,2),p=c[0],h=c[1];return this._getUpdatedState({zoom:s,longitude:p,latitude:h})}},{key:"zoomEnd",value:function(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}},{key:"zoomIn",value:function(){return this._zoomFromCenter(2)}},{key:"zoomOut",value:function(){return this._zoomFromCenter(.5)}},{key:"moveLeft",value:function(){return this._panFromCenter([100,0])}},{key:"moveRight",value:function(){return this._panFromCenter([-100,0])}},{key:"moveUp",value:function(){return this._panFromCenter([0,100])}},{key:"moveDown",value:function(){return this._panFromCenter([0,-100])}},{key:"rotateLeft",value:function(){return this._getUpdatedState({bearing:this._viewportProps.bearing-15})}},{key:"rotateRight",value:function(){return this._getUpdatedState({bearing:this._viewportProps.bearing+15})}},{key:"rotateUp",value:function(){return this._getUpdatedState({pitch:this._viewportProps.pitch+10})}},{key:"rotateDown",value:function(){return this._getUpdatedState({pitch:this._viewportProps.pitch-10})}},{key:"shortestPathFrom",value:function(t){var e=t.getViewportProps(),r=Object.assign({},this._viewportProps),a=r.bearing,i=r.longitude;return Math.abs(a-e.bearing)>180&&(r.bearing=a<0?a+360:a-360),Math.abs(i-e.longitude)>180&&(r.longitude=i<0?i+360:i-360),r}},{key:"_zoomFromCenter",value:function(t){var e=this._viewportProps,r=e.width,a=e.height;return this.zoom({pos:[r/2,a/2],scale:t})}},{key:"_panFromCenter",value:function(t){var e=this._viewportProps,r=e.width,a=e.height;return this.pan({startPos:[r/2,a/2],pos:[r/2+t[0],a/2+t[1]]})}},{key:"_getUpdatedState",value:function(t){return new this.constructor(g(g(g({makeViewport:this.makeViewport},this._viewportProps),this._interactiveState),t))}},{key:"_applyConstraints",value:function(t){var e=t.maxZoom,r=t.minZoom,a=t.zoom;t.zoom=(0,u.clamp)(a,r,e);var i=t.maxPitch,n=t.minPitch,o=t.pitch;return t.pitch=(0,u.clamp)(o,n,i),Object.assign(t,(0,c.normalizeViewportProps)(t)),t}},{key:"_unproject",value:function(t){var e=this.makeViewport(this._viewportProps);return t&&e.unproject(t)}},{key:"_calculateNewLngLat",value:function(t){var e=t.startPanLngLat,r=t.pos;return this.makeViewport(this._viewportProps).getMapCenterByLngLatPosition({lngLat:e,pos:r})}},{key:"_calculateNewZoom",value:function(t){var e=t.scale,r=t.startZoom,a=this._viewportProps,i=a.maxZoom,n=a.minZoom,o=r+Math.log2(e);return(0,u.clamp)(o,n,i)}},{key:"_calculateNewPitchAndBearing",value:function(t){var e=t.deltaScaleX,r=t.deltaScaleY,a=t.startBearing,i=t.startPitch;r=(0,u.clamp)(r,-1,1);var n=this._viewportProps,o=n.minPitch,s=n.maxPitch,l=i;return r>0?l=i+r*(s-i):r<0&&(l=i-r*(o-i)),{pitch:l,bearing:a+180*e}}}]),o}(l.default);exports.MapState=L;var Z=function(t){(0,i.default)(o,t);var n=f(o);function o(t){var e;return(0,r.default)(this,o),(e=n.call(this,L,t)).invertPan=!0,e}return(0,a.default)(o,[{key:"_getTransitionProps",value:function(){return y}},{key:"_onPanRotate",value:function(t){if(!this.dragRotate)return!1;var r=t.deltaX,a=t.deltaY,i=this.getCenter(t),n=(0,e.default)(i,2)[1],o=n-a,u=this.controllerState.getViewportProps(),s=u.width,l=u.height,c=r/s,p=0;a>0?Math.abs(l-o)>_&&(p=a/(o-l)*b):a<0&&o>_&&(p=1-n/o),p=Math.min(1,Math.max(-1,p));var h=this.controllerState.rotate({deltaScaleX:c,deltaScaleY:p});return this.updateViewport(h,w,{isDragging:!0,isRotating:!0})}}]),o}(s.default);exports.default=Z;
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","@babel/runtime/helpers/esm/slicedToArray":"TBeo","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","math.gl":"xAaq","./controller":"ugw5","./view-state":"TfDO","@math.gl/web-mercator":"PqV4","../utils/assert":"Txat","../transitions/linear-interpolator":"bGRb","./transition-manager":"awSe"}],"wDMu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("@babel/runtime/helpers/esm/classCallCheck")),t=s(require("@babel/runtime/helpers/esm/createClass")),r=s(require("@babel/runtime/helpers/esm/inherits")),u=s(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),n=s(require("@babel/runtime/helpers/esm/getPrototypeOf")),l=s(require("./view")),i=s(require("../viewports/web-mercator-viewport")),o=s(require("../controllers/map-controller"));function s(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=c();return function(){var r,l=(0,n.default)(e);if(t){var i=(0,n.default)(this).constructor;r=Reflect.construct(l,arguments,i)}else r=l.apply(this,arguments);return(0,u.default)(this,r)}}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var f=function(u){(0,r.default)(l,u);var n=a(l);function l(t){return(0,e.default)(this,l),n.call(this,Object.assign({},t,{type:i.default}))}return(0,t.default)(l,[{key:"controller",get:function(){return this._getControllerProps({type:o.default})}}]),l}(l.default);exports.default=f,f.displayName="MapView";
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","./view":"k6Eh","../viewports/web-mercator-viewport":"Rf6Y","../controllers/map-controller":"N44t"}],"sqcc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=f(require("@babel/runtime/helpers/esm/classCallCheck")),t=f(require("@babel/runtime/helpers/esm/createClass")),n=require("../utils/deep-equal"),r=f(require("../effects/lighting/lighting-effect"));function f(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,f=function(){};return{s:f,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:f}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function s(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l=new r.default,u=function(){function f(){(0,e.default)(this,f),this.effects=[],this._internalEffects=[],this._needsRedraw="Initial render",this.setEffects()}return(0,t.default)(f,[{key:"setProps",value:function(e){"effects"in e&&(e.effects.length===this.effects.length&&(0,n.deepEqual)(e.effects,this.effects)||(this.setEffects(e.effects),this._needsRedraw="effects changed"))}},{key:"needsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}},{key:"getEffects",value:function(){return this._internalEffects}},{key:"finalize",value:function(){this.cleanup()}},{key:"setEffects",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.cleanup(),this.effects=e,this._createInternalEffects()}},{key:"cleanup",value:function(){var e,t=i(this.effects);try{for(t.s();!(e=t.n()).done;){e.value.cleanup()}}catch(f){t.e(f)}finally{t.f()}var n,r=i(this._internalEffects);try{for(r.s();!(n=r.n()).done;){n.value.cleanup()}}catch(f){r.e(f)}finally{r.f()}this.effects.length=0,this._internalEffects.length=0}},{key:"_createInternalEffects",value:function(){this._internalEffects=this.effects.slice(),this.effects.some(function(e){return e instanceof r.default})||this._internalEffects.push(l)}}]),f}();exports.default=u;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","../utils/deep-equal":"KSag","../effects/lighting/lighting-effect":"MByF"}],"snJ8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("@babel/runtime/helpers/esm/classCallCheck")),t=s(require("@babel/runtime/helpers/esm/inherits")),r=s(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),u=s(require("@babel/runtime/helpers/esm/getPrototypeOf")),n=s(require("./layers-pass"));function s(e){return e&&e.__esModule?e:{default:e}}function l(e){var t=i();return function(){var n,s=(0,u.default)(e);if(t){var l=(0,u.default)(this).constructor;n=Reflect.construct(s,arguments,l)}else n=s.apply(this,arguments);return(0,r.default)(this,n)}}function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var o=function(r){(0,t.default)(n,r);var u=l(n);function n(){return(0,e.default)(this,n),u.apply(this,arguments)}return n}(n.default);exports.default=o;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","./layers-pass":"oM9Q"}],"WJJZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=l(require("@babel/runtime/helpers/esm/defineProperty")),r=l(require("@babel/runtime/helpers/esm/classCallCheck")),t=l(require("@babel/runtime/helpers/esm/createClass")),i=l(require("@babel/runtime/helpers/esm/get")),n=l(require("@babel/runtime/helpers/esm/inherits")),u=l(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),s=l(require("@babel/runtime/helpers/esm/getPrototypeOf")),a=l(require("./layers-pass")),o=require("@luma.gl/core");function l(e){return e&&e.__esModule?e:{default:e}}function c(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,i)}return t}function p(r){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?c(Object(i),!0).forEach(function(t){(0,e.default)(r,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(i,e))})}return r}function f(e){var r=d();return function(){var t,i=(0,s.default)(e);if(r){var n=(0,s.default)(this).constructor;t=Reflect.construct(i,arguments,n)}else t=i.apply(this,arguments);return(0,u.default)(this,t)}}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var b={blendFunc:[1,0,32771,0],blendEquation:32774},h=function(e){(0,n.default)(a,e);var u=f(a);function a(){return(0,r.default)(this,a),u.apply(this,arguments)}return(0,t.default)(a,[{key:"render",value:function(e){e.pickingFBO?this._drawPickingBuffer(e):(0,i.default)((0,s.default)(a.prototype),"render",this).call(this,e)}},{key:"_drawPickingBuffer",value:function(e){var r=this,t=e.layers,n=e.layerFilter,u=e.views,l=e.viewports,c=e.onViewportActive,f=e.pickingFBO,d=e.deviceRect,h=d.x,y=d.y,v=d.width,g=d.height,m=e.pass,O=void 0===m?"picking":m,k=e.redrawReason,w=e.pickZ,P=this.gl;return this.pickZ=w,(0,o.withParameters)(P,p(p({scissorTest:!0,scissor:[h,y,v,g],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0]},b),{},{blend:!w}),function(){(0,i.default)((0,s.default)(a.prototype),"render",r).call(r,{target:f,layers:t,layerFilter:n,views:u,viewports:l,onViewportActive:c,pass:O,redrawReason:k})})}},{key:"shouldDrawLayer",value:function(e){return e.props.pickable}},{key:"getModuleParameters",value:function(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}},{key:"getLayerParameters",value:function(e,r){var t=this.pickZ?{blend:!1}:p(p({},b),{},{blend:!0,blendColor:[0,0,0,(r+1)/255]});return Object.assign({},e.props.parameters,t)}}]),a}(a.default);exports.default=h;
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/get":"KGqu","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","./layers-pass":"oM9Q","@luma.gl/core":"iuAK"}],"J3c9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("@babel/runtime/helpers/esm/defineProperty")),r=o(require("@babel/runtime/helpers/esm/classCallCheck")),t=o(require("@babel/runtime/helpers/esm/createClass")),n=o(require("../debug")),s=o(require("../passes/draw-layers-pass")),a=o(require("../passes/pick-layers-pass")),i=require("@luma.gl/core");function o(e){return e&&e.__esModule?e:{default:e}}function l(e,r){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=f(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0,s=function(){};return{s:s,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,o=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return i=e.done,e},e:function(e){o=!0,a=e},f:function(){try{i||null==t.return||t.return()}finally{if(o)throw a}}}}function f(e,r){if(e){if("string"==typeof e)return u(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?u(e,r):void 0}}function u(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function c(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function d(r){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){(0,e.default)(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))})}return r}var h="deckRenderer.renderLayers",y=function(){function e(t){(0,r.default)(this,e),this.gl=t,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new s.default(t),this.pickLayersPass=new a.default(t),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null,this._onError=null}return(0,t.default)(e,[{key:"setProps",value:function(e){"layerFilter"in e&&this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),"drawPickingColors"in e&&this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed"),"onError"in e&&(this._onError=e.onError)}},{key:"renderLayers",value:function(e){var r=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass;e.layerFilter=this.layerFilter,e.onError=this._onError,e.effects=e.effects||[],e.target=e.target||i.Framebuffer.getDefaultFramebuffer(this.gl),this._preRender(e.effects,e);var t=this.lastPostProcessEffect?this.renderBuffers[0]:e.target,s=r.render(d(d({},e),{},{target:t}));this._postRender(e.effects,e),this.renderCount++,(0,n.default)(h,this,s,e)}},{key:"needsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},r=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),r}},{key:"finalize",value:function(){var e,r=this.renderBuffers,t=l(r);try{for(t.s();!(e=t.n()).done;){e.value.delete()}}catch(n){t.e(n)}finally{t.f()}r.length=0}},{key:"_preRender",value:function(e,r){var t,n=null,s=l(e);try{for(s.s();!(t=s.n()).done;){var a=t.value;a.preRender(this.gl,r),a.postRender&&(n=a)}}catch(i){s.e(i)}finally{s.f()}n&&this._resizeRenderBuffers(),this.lastPostProcessEffect=n}},{key:"_resizeRenderBuffers",value:function(){var e=this.renderBuffers;0===e.length&&e.push(new i.Framebuffer(this.gl),new i.Framebuffer(this.gl));var r,t=l(e);try{for(t.s();!(r=t.n()).done;){r.value.resize()}}catch(n){t.e(n)}finally{t.f()}}},{key:"_postRender",value:function(e,r){var t,n=this.renderBuffers,s={inputBuffer:n[0],swapBuffer:n[1],target:null},a=l(e);try{for(a.s();!(t=a.n()).done;){var i=t.value;if(i.postRender){if(i===this.lastPostProcessEffect){s.target=r.target,i.postRender(this.gl,s);break}var o=i.postRender(this.gl,s);s.inputBuffer=o,s.swapBuffer=o===n[0]?n[1]:n[0]}}}catch(f){a.e(f)}finally{a.f()}}}]),e}();exports.default=y;
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","../debug":"EEoF","../passes/draw-layers-pass":"snJ8","../passes/pick-layers-pass":"WJJZ","@luma.gl/core":"iuAK"}],"Eruv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getClosestObject=c,exports.getUniqueObjects=o;var e=r(require("../../utils/log"));function r(e){return e&&e.__esModule?e:{default:e}}var i={pickedColor:null,pickedLayer:null,pickedObjectIndex:-1};function c(r){var c=r.pickedColors,o=r.layers,t=r.deviceX,d=r.deviceY,a=r.deviceRadius,l=r.deviceRect;if(c){for(var n=l.x,s=l.y,u=l.width,f=l.height,p=a*a,v=-1,k=0,y=0;y<f;y++){var g=y+s-d,x=g*g;if(x>p)k+=4*u;else for(var b=0;b<u;b++){if(c[k+3]-1>=0){var C=b+n-t,j=C*C+x;j<=p&&(p=j,v=k)}k+=4}}if(v>=0){var h=c[v+3]-1,O=c.slice(v,v+4),I=o[h];if(I){var P=I.decodePickingColor(O),M=Math.floor(v/4/u);return{pickedColor:O,pickedLayer:I,pickedObjectIndex:P,pickedX:n+(v/4-M*u),pickedY:s+M}}e.default.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return i}function o(r){var i=r.pickedColors,c=r.layers,o=new Map;if(i)for(var t=0;t<i.length;t+=4){var d=i[t+3]-1;if(d>=0){var a=i.slice(t,t+4),l=a.join(",");if(!o.has(l)){var n=c[d];n?o.set(l,{pickedColor:a,pickedLayer:n,pickedObjectIndex:n.decodePickingColor(a)}):e.default.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(o.values())}
},{"../../utils/log":"GVus"}],"dX8M":[function(require,module,exports) {
"use strict";function e(e){var i=e.pickInfo,r=e.viewports,n=e.pixelRatio,t=e.x,l=e.y,a=e.z,c=o({viewports:r}),p=c&&c.unproject([t-c.x,l-c.y],{targetZ:a});return{color:null,layer:null,index:-1,picked:!1,x:t,y:l,pixel:[t,l],coordinate:p,lngLat:p,devicePixel:i&&[i.pickedX,i.pickedY],pixelRatio:n}}function i(i){var o=i.pickInfo,n=i.lastPickedInfo,t=i.mode,l=i.layers,a=o.pickedColor,c=o.pickedLayer,p=o.pickedObjectIndex,d=c?[c]:[];if("hover"===t){var f=n.index,s=n.layerId,u=c&&c.props.id;if(u!==s||p!==f){if(u!==s){var y=l.find(function(e){return e.props.id===s});y&&d.unshift(y)}n.layerId=u,n.index=p,n.info=null}}var g=e(i),v=new Map;return v.set(null,g),d.forEach(function(e){var i=Object.assign({},g);if(e===c&&(i.color=a,i.index=p,i.picked=!0),i=r({layer:e,info:i,mode:t}),e===c&&"hover"===t&&(n.info=i),i&&v.set(i.layer.id,i),"hover"===t&&e.props.autoHighlight){var o={pickingSelectedColor:c===e?a:null},l=e.props.highlightColor;c===e&&"function"==typeof l&&(o.pickingHighlightColor=l(i)),e.setModuleParameters(o),e.setNeedsRedraw()}}),v}function r(e){for(var i=e.layer,r=e.info,o=e.mode;i&&r;){var n=r.layer||i;r.layer=i,r=i.getPickingInfo({info:r,mode:o,sourceLayer:n}),i=i.parent}return r}function o(e){return e.viewports[0]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getEmptyPickingInfo=e,exports.processPickInfo=i,exports.getLayerPickingInfo=r;
},{}],"G03o":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=l(require("@babel/runtime/helpers/esm/defineProperty")),i=l(require("@babel/runtime/helpers/esm/classCallCheck")),t=l(require("@babel/runtime/helpers/esm/createClass")),r=require("@luma.gl/core"),n=l(require("../utils/assert")),o=l(require("../utils/log")),s=l(require("../passes/pick-layers-pass")),a=require("./picking/query-object"),c=require("./picking/pick-info");function l(e){return e&&e.__esModule?e:{default:e}}function u(e,i){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=h(e))||i&&e&&"number"==typeof e.length){t&&(e=t);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==t.return||t.return()}finally{if(a)throw o}}}}function h(e,i){if(e){if("string"==typeof e)return d(e,i);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?d(e,i):void 0}}function d(e,i){(null==i||i>e.length)&&(i=e.length);for(var t=0,r=new Array(i);t<i;t++)r[t]=e[t];return r}var p=function(){function l(e){(0,i.default)(this,l),this.gl=e,this.pickingFBO=null,this.pickLayersPass=new s.default(e),this.layerFilter=null,this.lastPickedInfo={index:-1,layerId:null,info:null},this._onError=null}return(0,t.default)(l,[{key:"setProps",value:function(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"onError"in e&&(this._onError=e.onError),"_pickable"in e&&(this._pickable=e._pickable)}},{key:"finalize",value:function(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}},{key:"pickObject",value:function(e){return this._pickClosestObject(e)}},{key:"pickObjects",value:function(e){return this._pickVisibleObjects(e)}},{key:"getLastPickedObject",value:function(e){var i=e.x,t=e.y,r=e.layers,n=e.viewports,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.lastPickedInfo.info,s=o&&o.layer&&o.layer.id,a=s?r.find(function(e){return e.id===s}):null,c=n[0]&&n[0].unproject([i,t]),l={x:i,y:t,coordinate:c,lngLat:c,layer:a};return a?Object.assign({},o,l):Object.assign(l,{color:null,object:null,index:-1})}},{key:"_resizeBuffer",value:function(){var i=this.gl;return this.pickingFBO||(this.pickingFBO=new r.Framebuffer(i),r.Framebuffer.isSupported(i,{colorBufferFloat:!0})&&(this.depthFBO=new r.Framebuffer(i),this.depthFBO.attach((0,e.default)({},36064,new r.Texture2D(i,{format:(0,r.isWebGL2)(i)?34836:6408,type:5126}))))),this.pickingFBO.resize({width:i.canvas.width,height:i.canvas.height}),this.depthFBO&&this.depthFBO.resize({width:i.canvas.width,height:i.canvas.height}),this.pickingFBO}},{key:"_getPickable",value:function(e){if(!1===this._pickable)return null;var i=e.filter(function(e){return e.isPickable()&&!e.isComposite});return i.length>255?(o.default.warn("Too many pickable layers, only picking the first 255")(),i.slice(0,255)):i.length?i:null}},{key:"_pickClosestObject",value:function(e){var i=e.layers,t=e.views,n=e.viewports,o=e.x,s=e.y,l=e.radius,h=void 0===l?0:l,d=e.depth,p=void 0===d?1:d,v=e.mode,f=void 0===v?"query":v,y=e.unproject3D,k=e.onViewportActive;if(!(i=this._getPickable(i)))return{result:[],emptyInfo:(0,c.getEmptyPickingInfo)({viewports:n,x:o,y:s})};this._resizeBuffer();for(var g,w=(0,r.cssToDeviceRatio)(this.gl),b=(0,r.cssToDevicePixels)(this.gl,[o,s],!0),m=[b.x+Math.floor(b.width/2),b.y+Math.floor(b.height/2)],O=Math.round(h*w),x=this.pickingFBO,F=x.width,_=x.height,P=this._getPickingRect({deviceX:m[0],deviceY:m[1],deviceRadius:O,deviceWidth:F,deviceHeight:_}),B=[],j={},A=0;A<p;A++){var R=P&&this._drawAndSample({layers:i,views:t,viewports:n,onViewportActive:k,deviceRect:P,pass:"picking:".concat(f),redrawReason:f}),C=(0,a.getClosestObject)({pickedColors:R,layers:i,deviceX:m[0],deviceY:m[1],deviceRadius:O,deviceRect:P}),I=void 0;if(C.pickedLayer&&y&&this.depthFBO)I=this._drawAndSample({layers:[C.pickedLayer],views:t,viewports:n,onViewportActive:k,deviceRect:{x:C.pickedX,y:C.pickedY,width:1,height:1},pass:"picking:".concat(f),redrawReason:"pick-z",pickZ:!0})[0]*n[0].distanceScales.metersPerUnit[2]+n[0].position[2];if(C.pickedColor&&A+1<p){var q=C.pickedColor[3]-1;j[q]=!0,i[q].clearPickingColor(C.pickedColor)}var S,M=u((g=(0,c.processPickInfo)({pickInfo:C,lastPickedInfo:this.lastPickedInfo,mode:f,layers:i,viewports:n,x:o,y:s,z:I,pixelRatio:w})).values());try{for(M.s();!(S=M.n()).done;){var E=S.value;E.layer&&B.push(E)}}catch(T){M.e(T)}finally{M.f()}if(!C.pickedColor)break}for(var L in j)i[L].restorePickingColors();return{result:B,emptyInfo:g&&g.get(null)}}},{key:"_pickVisibleObjects",value:function(e){var i=e.layers,t=e.views,n=e.viewports,o=e.x,s=e.y,l=e.width,u=void 0===l?1:l,h=e.height,d=void 0===h?1:h,p=e.mode,v=void 0===p?"query":p,f=e.onViewportActive;if(!(i=this._getPickable(i)))return[];this._resizeBuffer();var y=(0,r.cssToDeviceRatio)(this.gl),k=(0,r.cssToDevicePixels)(this.gl,[o,s],!0),g=k.x,w=k.y+k.height,b=(0,r.cssToDevicePixels)(this.gl,[o+u,s+d],!0),m=b.x+b.width,O=b.y,x={x:g,y:O,width:m-g,height:w-O},F=this._drawAndSample({layers:i,views:t,viewports:n,onViewportActive:f,deviceRect:x,pass:"picking:".concat(v),redrawReason:v}),_=(0,a.getUniqueObjects)({pickedColors:F,layers:i}),P=new Map;return _.forEach(function(e){var i={color:e.pickedColor,layer:null,index:e.pickedObjectIndex,picked:!0,x:o,y:s,width:u,height:d,pixelRatio:y};i=(0,c.getLayerPickingInfo)({layer:e.pickedLayer,info:i,mode:v}),P.has(i.object)||P.set(i.object,i)}),Array.from(P.values())}},{key:"_drawAndSample",value:function(e){var i=e.layers,t=e.views,o=e.viewports,s=e.onViewportActive,a=e.deviceRect,c=e.pass,l=e.redrawReason,u=e.pickZ;if((0,n.default)(a.width>0&&a.height>0),i.length<1)return null;var h=u?this.depthFBO:this.pickingFBO;this.pickLayersPass.render({layers:i,layerFilter:this.layerFilter,onError:this._onError,views:t,viewports:o,onViewportActive:s,pickingFBO:h,deviceRect:a,pass:c,redrawReason:l,pickZ:u});var d=a.x,p=a.y,v=a.width,f=a.height,y=new(u?Float32Array:Uint8Array)(v*f*4);return(0,r.readPixelsToArray)(h,{sourceX:d,sourceY:p,sourceWidth:v,sourceHeight:f,target:y}),y}},{key:"_getPickingRect",value:function(e){var i=e.deviceX,t=e.deviceY,r=e.deviceRadius,n=e.deviceWidth,o=e.deviceHeight,s=Math.max(0,i-r),a=Math.max(0,t-r),c=Math.min(n,i+r+1)-s,l=Math.min(o,t+r+1)-a;return c<=0||l<=0?null:{x:s,y:a,width:c,height:l}}}]),l}();exports.default=p;
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@luma.gl/core":"iuAK","../utils/assert":"Txat","../utils/log":"GVus","../passes/pick-layers-pass":"WJJZ","./picking/query-object":"Eruv","./picking/pick-info":"dX8M"}],"Dm3R":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=l(require("@babel/runtime/helpers/esm/classCallCheck")),t=l(require("@babel/runtime/helpers/esm/createClass"));function l(e){return e&&e.__esModule?e:{default:e}}var s={zIndex:1,position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:0,left:0,display:"none"},n=function(){function l(t){(0,e.default)(this,l);var n=t.parentElement;n&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,s),n.appendChild(this.el))}return(0,t.default)(l,[{key:"setTooltip",value:function(e,t,l){var s=this.el;if("string"==typeof e)s.innerText=e;else{if(!e)return void(s.style.display="none");"text"in e&&(s.innerText=e.text),"html"in e&&(s.innerHTML=e.html),"className"in e&&(s.className=e.className),Object.assign(s.style,e.style)}s.style.display="block",s.style.transform="translate(".concat(t,"px, ").concat(l,"px)")}},{key:"remove",value:function(){this.el&&this.el.remove()}}]),l}();exports.default=n;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph"}],"K0KY":[function(require,module,exports) {
var define;
var t;!function(e,i,n,r){"use strict";var s,o=["","webkit","Moz","MS","ms","o"],a=i.createElement("div"),h="function",u=Math.round,c=Math.abs,l=Date.now;function p(t,e,i){return setTimeout(y(t,i),e)}function f(t,e,i){return!!Array.isArray(t)&&(v(t,i[e],i),!0)}function v(t,e,i){var n;if(t)if(t.forEach)t.forEach(e,i);else if(t.length!==r)for(n=0;n<t.length;)e.call(i,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(i,t[n],n,t)}function d(t,i,n){var r="DEPRECATED METHOD: "+i+"\n"+n+" AT \n";return function(){var i=new Error("get-stack-trace"),n=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",s=e.console&&(e.console.warn||e.console.log);return s&&s.call(e.console,r,n),t.apply(this,arguments)}}s="function"!=typeof Object.assign?function(t){if(t===r||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(n!==r&&null!==n)for(var s in n)n.hasOwnProperty(s)&&(e[s]=n[s])}return e}:Object.assign;var m=d(function(t,e,i){for(var n=Object.keys(e),s=0;s<n.length;)(!i||i&&t[n[s]]===r)&&(t[n[s]]=e[n[s]]),s++;return t},"extend","Use `assign`."),g=d(function(t,e){return m(t,e,!0)},"merge","Use `assign`.");function T(t,e,i){var n,r=e.prototype;(n=t.prototype=Object.create(r)).constructor=t,n._super=r,i&&s(n,i)}function y(t,e){return function(){return t.apply(e,arguments)}}function E(t,e){return typeof t==h?t.apply(e&&e[0]||r,e):t}function I(t,e){return t===r?e:t}function A(t,e,i){v(b(e),function(e){t.addEventListener(e,i,!1)})}function _(t,e,i){v(b(e),function(e){t.removeEventListener(e,i,!1)})}function C(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function S(t,e){return t.indexOf(e)>-1}function b(t){return t.trim().split(/\s+/g)}function P(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var n=0;n<t.length;){if(i&&t[n][i]==e||!i&&t[n]===e)return n;n++}return-1}function D(t){return Array.prototype.slice.call(t,0)}function x(t,e,i){for(var n=[],r=[],s=0;s<t.length;){var o=e?t[s][e]:t[s];P(r,o)<0&&n.push(t[s]),r[s]=o,s++}return i&&(n=e?n.sort(function(t,i){return t[e]>i[e]}):n.sort()),n}function w(t,e){for(var i,n,s=e[0].toUpperCase()+e.slice(1),a=0;a<o.length;){if((n=(i=o[a])?i+s:e)in t)return n;a++}return r}var O=1;function R(t){var i=t.ownerDocument||t;return i.defaultView||i.parentWindow||e}var M="ontouchstart"in e,z=w(e,"PointerEvent")!==r,N=M&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),X=25,Y=1,F=2,W=4,q=8,k=1,H=2,L=4,U=8,V=16,j=H|L,G=U|V,Z=j|G,B=["x","y"],$=["clientX","clientY"];function J(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){E(t.options.enable,[t])&&i.handler(e)},this.init()}function K(t,e,i){var n=i.pointers.length,s=i.changedPointers.length,o=e&Y&&n-s==0,a=e&(W|q)&&n-s==0;i.isFirst=!!o,i.isFinal=!!a,o&&(t.session={}),i.eventType=e,function(t,e){var i=t.session,n=e.pointers,s=n.length;i.firstInput||(i.firstInput=Q(e));s>1&&!i.firstMultiple?i.firstMultiple=Q(e):1===s&&(i.firstMultiple=!1);var o=i.firstInput,a=i.firstMultiple,h=a?a.center:o.center,u=e.center=tt(n);e.timeStamp=l(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=rt(h,u),e.distance=nt(h,u),function(t,e){var i=e.center,n=t.offsetDelta||{},r=t.prevDelta||{},s=t.prevInput||{};e.eventType!==Y&&s.eventType!==W||(r=t.prevDelta={x:s.deltaX||0,y:s.deltaY||0},n=t.offsetDelta={x:i.x,y:i.y});e.deltaX=r.x+(i.x-n.x),e.deltaY=r.y+(i.y-n.y)}(i,e),e.offsetDirection=it(e.deltaX,e.deltaY);var p=et(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=p.x,e.overallVelocityY=p.y,e.overallVelocity=c(p.x)>c(p.y)?p.x:p.y,e.scale=a?(f=a.pointers,v=n,nt(v[0],v[1],$)/nt(f[0],f[1],$)):1,e.rotation=a?function(t,e){return rt(e[1],e[0],$)+rt(t[1],t[0],$)}(a.pointers,n):0,e.maxPointers=i.prevInput?e.pointers.length>i.prevInput.maxPointers?e.pointers.length:i.prevInput.maxPointers:e.pointers.length,function(t,e){var i,n,s,o,a=t.lastInterval||e,h=e.timeStamp-a.timeStamp;if(e.eventType!=q&&(h>X||a.velocity===r)){var u=e.deltaX-a.deltaX,l=e.deltaY-a.deltaY,p=et(h,u,l);n=p.x,s=p.y,i=c(p.x)>c(p.y)?p.x:p.y,o=it(u,l),t.lastInterval=e}else i=a.velocity,n=a.velocityX,s=a.velocityY,o=a.direction;e.velocity=i,e.velocityX=n,e.velocityY=s,e.direction=o}(i,e);var f,v;var d=t.element;C(e.srcEvent.target,d)&&(d=e.srcEvent.target);e.target=d}(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function Q(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:u(t.pointers[i].clientX),clientY:u(t.pointers[i].clientY)},i++;return{timeStamp:l(),pointers:e,center:tt(e),deltaX:t.deltaX,deltaY:t.deltaY}}function tt(t){var e=t.length;if(1===e)return{x:u(t[0].clientX),y:u(t[0].clientY)};for(var i=0,n=0,r=0;r<e;)i+=t[r].clientX,n+=t[r].clientY,r++;return{x:u(i/e),y:u(n/e)}}function et(t,e,i){return{x:e/t||0,y:i/t||0}}function it(t,e){return t===e?k:c(t)>=c(e)?t<0?H:L:e<0?U:V}function nt(t,e,i){i||(i=B);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return Math.sqrt(n*n+r*r)}function rt(t,e,i){i||(i=B);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return 180*Math.atan2(r,n)/Math.PI}J.prototype={handler:function(){},init:function(){this.evEl&&A(this.element,this.evEl,this.domHandler),this.evTarget&&A(this.target,this.evTarget,this.domHandler),this.evWin&&A(R(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&_(this.element,this.evEl,this.domHandler),this.evTarget&&_(this.target,this.evTarget,this.domHandler),this.evWin&&_(R(this.element),this.evWin,this.domHandler)}};var st={mousedown:Y,mousemove:F,mouseup:W},ot="mousedown",at="mousemove mouseup";function ht(){this.evEl=ot,this.evWin=at,this.pressed=!1,J.apply(this,arguments)}T(ht,J,{handler:function(t){var e=st[t.type];e&Y&&0===t.button&&(this.pressed=!0),e&F&&1!==t.which&&(e=W),this.pressed&&(e&W&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var ut={pointerdown:Y,pointermove:F,pointerup:W,pointercancel:q,pointerout:q},ct={2:"touch",3:"pen",4:"mouse",5:"kinect"},lt="pointerdown",pt="pointermove pointerup pointercancel";function ft(){this.evEl=lt,this.evWin=pt,J.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}e.MSPointerEvent&&!e.PointerEvent&&(lt="MSPointerDown",pt="MSPointerMove MSPointerUp MSPointerCancel"),T(ft,J,{handler:function(t){var e=this.store,i=!1,n=t.type.toLowerCase().replace("ms",""),r=ut[n],s=ct[t.pointerType]||t.pointerType,o="touch"==s,a=P(e,t.pointerId,"pointerId");r&Y&&(0===t.button||o)?a<0&&(e.push(t),a=e.length-1):r&(W|q)&&(i=!0),a<0||(e[a]=t,this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:s,srcEvent:t}),i&&e.splice(a,1))}});var vt={touchstart:Y,touchmove:F,touchend:W,touchcancel:q},dt="touchstart",mt="touchstart touchmove touchend touchcancel";function gt(){this.evTarget=dt,this.evWin=mt,this.started=!1,J.apply(this,arguments)}T(gt,J,{handler:function(t){var e=vt[t.type];if(e===Y&&(this.started=!0),this.started){var i=function(t,e){var i=D(t.touches),n=D(t.changedTouches);e&(W|q)&&(i=x(i.concat(n),"identifier",!0));return[i,n]}.call(this,t,e);e&(W|q)&&i[0].length-i[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:"touch",srcEvent:t})}}});var Tt={touchstart:Y,touchmove:F,touchend:W,touchcancel:q},yt="touchstart touchmove touchend touchcancel";function Et(){this.evTarget=yt,this.targetIds={},J.apply(this,arguments)}T(Et,J,{handler:function(t){var e=Tt[t.type],i=function(t,e){var i=D(t.touches),n=this.targetIds;if(e&(Y|F)&&1===i.length)return n[i[0].identifier]=!0,[i,i];var r,s,o=D(t.changedTouches),a=[],h=this.target;if(s=i.filter(function(t){return C(t.target,h)}),e===Y)for(r=0;r<s.length;)n[s[r].identifier]=!0,r++;r=0;for(;r<o.length;)n[o[r].identifier]&&a.push(o[r]),e&(W|q)&&delete n[o[r].identifier],r++;if(!a.length)return;return[x(s.concat(a),"identifier",!0),a]}.call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:"touch",srcEvent:t})}});var It=2500,At=25;function _t(){J.apply(this,arguments);var t=y(this.handler,this);this.touch=new Et(this.manager,t),this.mouse=new ht(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function Ct(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var i={x:e.clientX,y:e.clientY};this.lastTouches.push(i);var n=this.lastTouches;setTimeout(function(){var t=n.indexOf(i);t>-1&&n.splice(t,1)},It)}}T(_t,J,{handler:function(t,e,i){var n="touch"==i.pointerType,r="mouse"==i.pointerType;if(!(r&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(n)(function(t,e){t&Y?(this.primaryTouch=e.changedPointers[0].identifier,Ct.call(this,e)):t&(W|q)&&Ct.call(this,e)}).call(this,e,i);else if(r&&function(t){for(var e=t.srcEvent.clientX,i=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var r=this.lastTouches[n],s=Math.abs(e-r.x),o=Math.abs(i-r.y);if(s<=At&&o<=At)return!0}return!1}.call(this,i))return;this.callback(t,e,i)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var St=w(a.style,"touchAction"),bt=St!==r,Pt="auto",Dt="manipulation",xt="none",wt="pan-x",Ot="pan-y",Rt=function(){if(!bt)return!1;var t={},i=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){t[n]=!i||e.CSS.supports("touch-action",n)}),t}();function Mt(t,e){this.manager=t,this.set(e)}Mt.prototype={set:function(t){"compute"==t&&(t=this.compute()),bt&&this.manager.element.style&&Rt[t]&&(this.manager.element.style[St]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return v(this.manager.recognizers,function(e){E(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),function(t){if(S(t,xt))return xt;var e=S(t,wt),i=S(t,Ot);if(e&&i)return xt;if(e||i)return e?wt:Ot;if(S(t,Dt))return Dt;return Pt}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,i=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var n=this.actions,r=S(n,xt)&&!Rt[xt],s=S(n,Ot)&&!Rt[Ot],o=S(n,wt)&&!Rt[wt];if(r){var a=1===t.pointers.length,h=t.distance<2,u=t.deltaTime<250;if(a&&h&&u)return}if(!o||!s)return r||s&&i&j||o&&i&G?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var zt=1,Nt=2,Xt=4,Yt=8,Ft=Yt,Wt=16;function qt(t){this.options=s({},this.defaults,t||{}),this.id=O++,this.manager=null,this.options.enable=I(this.options.enable,!0),this.state=zt,this.simultaneous={},this.requireFail=[]}function kt(t){return t&Wt?"cancel":t&Yt?"end":t&Xt?"move":t&Nt?"start":""}function Ht(t){return t==V?"down":t==U?"up":t==H?"left":t==L?"right":""}function Lt(t,e){var i=e.manager;return i?i.get(t):t}function Ut(){qt.apply(this,arguments)}function Vt(){Ut.apply(this,arguments),this.pX=null,this.pY=null}function jt(){Ut.apply(this,arguments)}function Gt(){qt.apply(this,arguments),this._timer=null,this._input=null}function Zt(){Ut.apply(this,arguments)}function Bt(){Ut.apply(this,arguments)}function $t(){qt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Jt(t,e){return(e=e||{}).recognizers=I(e.recognizers,Jt.defaults.preset),new Kt(t,e)}qt.prototype={defaults:{},set:function(t){return s(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(f(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=Lt(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return f(t,"dropRecognizeWith",this)?this:(t=Lt(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(f(t,"requireFailure",this))return this;var e=this.requireFail;return-1===P(e,t=Lt(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(f(t,"dropRequireFailure",this))return this;t=Lt(t,this);var e=P(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,i=this.state;function n(i){e.manager.emit(i,t)}i<Yt&&n(e.options.event+kt(i)),n(e.options.event),t.additionalEvent&&n(t.additionalEvent),i>=Yt&&n(e.options.event+kt(i))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|zt)))return!1;t++}return!0},recognize:function(t){var e=s({},t);if(!E(this.options.enable,[this,e]))return this.reset(),void(this.state=32);this.state&(Ft|Wt|32)&&(this.state=zt),this.state=this.process(e),this.state&(Nt|Xt|Yt|Wt)&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},T(Ut,qt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,i=t.eventType,n=e&(Nt|Xt),r=this.attrTest(t);return n&&(i&q||!r)?e|Wt:n||r?i&W?e|Yt:e&Nt?e|Xt:Nt:32}}),T(Vt,Ut,{defaults:{event:"pan",threshold:10,pointers:1,direction:Z},getTouchAction:function(){var t=this.options.direction,e=[];return t&j&&e.push(Ot),t&G&&e.push(wt),e},directionTest:function(t){var e=this.options,i=!0,n=t.distance,r=t.direction,s=t.deltaX,o=t.deltaY;return r&e.direction||(e.direction&j?(r=0===s?k:s<0?H:L,i=s!=this.pX,n=Math.abs(t.deltaX)):(r=0===o?k:o<0?U:V,i=o!=this.pY,n=Math.abs(t.deltaY))),t.direction=r,i&&n>e.threshold&&r&e.direction},attrTest:function(t){return Ut.prototype.attrTest.call(this,t)&&(this.state&Nt||!(this.state&Nt)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=Ht(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),T(jt,Ut,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[xt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&Nt)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),T(Gt,qt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Pt]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,r=t.deltaTime>e.time;if(this._input=t,!n||!i||t.eventType&(W|q)&&!r)this.reset();else if(t.eventType&Y)this.reset(),this._timer=p(function(){this.state=Ft,this.tryEmit()},e.time,this);else if(t.eventType&W)return Ft;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===Ft&&(t&&t.eventType&W?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=l(),this.manager.emit(this.options.event,this._input)))}}),T(Zt,Ut,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[xt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&Nt)}}),T(Bt,Ut,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:j|G,pointers:1},getTouchAction:function(){return Vt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,i=this.options.direction;return i&(j|G)?e=t.overallVelocity:i&j?e=t.overallVelocityX:i&G&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&i&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&c(e)>this.options.velocity&&t.eventType&W},emit:function(t){var e=Ht(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),T($t,qt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Dt]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,r=t.deltaTime<e.time;if(this.reset(),t.eventType&Y&&0===this.count)return this.failTimeout();if(n&&r&&i){if(t.eventType!=W)return this.failTimeout();var s=!this.pTime||t.timeStamp-this.pTime<e.interval,o=!this.pCenter||nt(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,o&&s?this.count+=1:this.count=1,this._input=t,0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=p(function(){this.state=Ft,this.tryEmit()},e.interval,this),Nt):Ft}return 32},failTimeout:function(){return this._timer=p(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Ft&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Jt.VERSION="2.0.7",Jt.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[Zt,{enable:!1}],[jt,{enable:!1},["rotate"]],[Bt,{direction:j}],[Vt,{direction:j},["swipe"]],[$t],[$t,{event:"doubletap",taps:2},["tap"]],[Gt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function Kt(t,e){var i;this.options=s({},Jt.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((i=this).options.inputClass||(z?ft:N?Et:M?_t:ht))(i,K),this.touchAction=new Mt(this,this.options.touchAction),Qt(this,!0),v(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function Qt(t,e){var i,n=t.element;n.style&&(v(t.options.cssProps,function(r,s){i=w(n.style,s),e?(t.oldCssProps[i]=n.style[i],n.style[i]=r):n.style[i]=t.oldCssProps[i]||""}),e||(t.oldCssProps={}))}Kt.prototype={set:function(t){return s(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var i;this.touchAction.preventDefaults(t);var n=this.recognizers,r=e.curRecognizer;(!r||r&&r.state&Ft)&&(r=e.curRecognizer=null);for(var s=0;s<n.length;)i=n[s],2===e.stopped||r&&i!=r&&!i.canRecognizeWith(r)?i.reset():i.recognize(t),!r&&i.state&(Nt|Xt|Yt)&&(r=e.curRecognizer=i),s++}},get:function(t){if(t instanceof qt)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event==t)return e[i];return null},add:function(t){if(f(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(f(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,i=P(e,t);-1!==i&&(e.splice(i,1),this.touchAction.update())}return this},on:function(t,e){if(t!==r&&e!==r){var i=this.handlers;return v(b(t),function(t){i[t]=i[t]||[],i[t].push(e)}),this}},off:function(t,e){if(t!==r){var i=this.handlers;return v(b(t),function(t){e?i[t]&&i[t].splice(P(i[t],e),1):delete i[t]}),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var n=i.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](e),r++}},destroy:function(){this.element&&Qt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},s(Jt,{INPUT_START:Y,INPUT_MOVE:F,INPUT_END:W,INPUT_CANCEL:q,STATE_POSSIBLE:zt,STATE_BEGAN:Nt,STATE_CHANGED:Xt,STATE_ENDED:Yt,STATE_RECOGNIZED:Ft,STATE_CANCELLED:Wt,STATE_FAILED:32,DIRECTION_NONE:k,DIRECTION_LEFT:H,DIRECTION_RIGHT:L,DIRECTION_UP:U,DIRECTION_DOWN:V,DIRECTION_HORIZONTAL:j,DIRECTION_VERTICAL:G,DIRECTION_ALL:Z,Manager:Kt,Input:J,TouchAction:Mt,TouchInput:Et,MouseInput:ht,PointerEventInput:ft,TouchMouseInput:_t,SingleTouchInput:gt,Recognizer:qt,AttrRecognizer:Ut,Tap:$t,Pan:Vt,Swipe:Bt,Pinch:jt,Rotate:Zt,Press:Gt,on:A,off:_,each:v,merge:g,extend:m,assign:s,inherit:T,bindFn:y,prefixed:w}),(void 0!==e?e:"undefined"!=typeof self?self:{}).Hammer=Jt,"function"==typeof t&&t.amd?t(function(){return Jt}):"undefined"!=typeof module&&module.exports?module.exports=Jt:e.Hammer=Jt}(window,document);
},{}],"kXVE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.enhancePointerEventInput=s,exports.enhanceMouseInput=i;var e=1,t=2,n=4,r={mousedown:e,mousemove:t,mouseup:n};function o(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return!0;return!1}function s(e){var t=e.prototype.handler;e.prototype.handler=function(e){var n=this.store;e.button>0&&(o(n,function(t){return t.pointerId===e.pointerId})||n.push(e)),t.call(this,e)}}function i(o){o.prototype.handler=function(o){var s=r[o.type];s&e&&o.button>=0&&(this.pressed=!0),s&t&&0===o.which&&(s=n),this.pressed&&(s&n&&(this.pressed=!1),this.callback(this.manager,s,{pointers:[o],changedPointers:[o],pointerType:"mouse",srcEvent:o}))}}
},{}],"MW4S":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.Manager=void 0;var e=t(require("hammerjs")),r=require("./hammer-overrides");function t(e){return e&&e.__esModule?e:{default:e}}(0,r.enhancePointerEventInput)(e.default.PointerEventInput),(0,r.enhanceMouseInput)(e.default.MouseInput);var a=e.default.Manager;exports.Manager=a;var u=e.default;exports.default=u;
},{"hammerjs":"K0KY","./hammer-overrides":"kXVE"}],"jCzK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GESTURE_EVENT_ALIASES=exports.EVENT_RECOGNIZER_MAP=exports.INPUT_EVENT_TYPES=exports.BASIC_EVENT_ALIASES=exports.RECOGNIZER_FALLBACK_MAP=exports.RECOGNIZER_COMPATIBLE_MAP=exports.RECOGNIZERS=void 0;var e=t(require("./utils/hammer"));function t(e){return e&&e.__esModule?e:{default:e}}var p=e.default?[[e.default.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[e.default.Rotate,{enable:!1}],[e.default.Pinch,{enable:!1}],[e.default.Swipe,{enable:!1}],[e.default.Pan,{threshold:0,enable:!1}],[e.default.Press,{enable:!1}],[e.default.Tap,{event:"doubletap",taps:2,enable:!1}],[e.default.Tap,{event:"anytap",enable:!1}],[e.default.Tap,{enable:!1}]]:null;exports.RECOGNIZERS=p;var a={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]};exports.RECOGNIZER_COMPATIBLE_MAP=a;var n={doubletap:["tap"]};exports.RECOGNIZER_FALLBACK_MAP=n;var o={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"};exports.BASIC_EVENT_ALIASES=o;var r={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel","DOMMouseScroll"]};exports.INPUT_EVENT_TYPES=r;var i={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"};exports.EVENT_RECOGNIZER_MAP=i;var s={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"};exports.GESTURE_EVENT_ALIASES=s;
},{"./utils/hammer":"MW4S"}],"b2B5":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports.passiveSupported=exports.document=exports.global=exports.window=exports.userAgent=void 0;var t="undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"";exports.userAgent=t;var o="undefined"!=typeof window?window:e;exports.window=o;var r=void 0!==e?e:window;exports.global=r;var s="undefined"!=typeof document?document:{};exports.document=s;var n=!1;exports.passiveSupported=n;try{var p={get passive(){return exports.passiveSupported=n=!0,!0}};o.addEventListener("test",p,p),o.removeEventListener("test",p,p)}catch(a){}
},{}],"k4W9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("@babel/runtime/helpers/esm/classCallCheck")),t=s(require("@babel/runtime/helpers/esm/createClass")),n=require("../constants"),i=require("../utils/globals");function s(e){return e&&e.__esModule?e:{default:e}}var l=-1!==i.userAgent.indexOf("firefox"),a=n.INPUT_EVENT_TYPES.WHEEL_EVENTS,r="wheel",o=4.000244140625,u=40,h=.25,v=function(){function n(t,s){var l=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,e.default)(this,n),this.element=t,this.callback=s,this.options=Object.assign({enable:!0},r),this.events=a.concat(r.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach(function(e){return t.addEventListener(e,l.handleEvent,!!i.passiveSupported&&{passive:!1})})}return(0,t.default)(n,[{key:"destroy",value:function(){var e=this;this.events.forEach(function(t){return e.element.removeEventListener(t,e.handleEvent)})}},{key:"enableEventType",value:function(e,t){e===r&&(this.options.enable=t)}},{key:"handleEvent",value:function(e){if(this.options.enable){var t=e.deltaY;i.window.WheelEvent&&(l&&e.deltaMode===i.window.WheelEvent.DOM_DELTA_PIXEL&&(t/=i.window.devicePixelRatio),e.deltaMode===i.window.WheelEvent.DOM_DELTA_LINE&&(t*=u));var n={x:e.clientX,y:e.clientY};0!==t&&t%o==0&&(t=Math.floor(t/o)),e.shiftKey&&t&&(t*=h),this._onWheel(e,-t,n)}}},{key:"_onWheel",value:function(e,t,n){this.callback({type:r,center:n,delta:t,srcEvent:e,pointerType:"mouse",target:e.target})}}]),n}();exports.default=v;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","../constants":"jCzK","../utils/globals":"b2B5"}],"N73Z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("@babel/runtime/helpers/esm/classCallCheck")),t=s(require("@babel/runtime/helpers/esm/createClass")),n=require("../constants");function s(e){return e&&e.__esModule?e:{default:e}}var a=n.INPUT_EVENT_TYPES.MOUSE_EVENTS,i="pointermove",v="pointerover",l="pointerout",r="pointerleave",o=function(){function n(t,s){var i=this,v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,e.default)(this,n),this.element=t,this.callback=s,this.pressed=!1,this.options=Object.assign({enable:!0},v),this.enableMoveEvent=this.options.enable,this.enableLeaveEvent=this.options.enable,this.enableOutEvent=this.options.enable,this.enableOverEvent=this.options.enable,this.events=a.concat(v.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach(function(e){return t.addEventListener(e,i.handleEvent)})}return(0,t.default)(n,[{key:"destroy",value:function(){var e=this;this.events.forEach(function(t){return e.element.removeEventListener(t,e.handleEvent)})}},{key:"enableEventType",value:function(e,t){e===i&&(this.enableMoveEvent=t),e===v&&(this.enableOverEvent=t),e===l&&(this.enableOutEvent=t),e===r&&(this.enableLeaveEvent=t)}},{key:"handleEvent",value:function(e){this.handleOverEvent(e),this.handleOutEvent(e),this.handleLeaveEvent(e),this.handleMoveEvent(e)}},{key:"handleOverEvent",value:function(e){this.enableOverEvent&&"mouseover"===e.type&&this.callback({type:v,srcEvent:e,pointerType:"mouse",target:e.target})}},{key:"handleOutEvent",value:function(e){this.enableOutEvent&&"mouseout"===e.type&&this.callback({type:l,srcEvent:e,pointerType:"mouse",target:e.target})}},{key:"handleLeaveEvent",value:function(e){this.enableLeaveEvent&&"mouseleave"===e.type&&this.callback({type:r,srcEvent:e,pointerType:"mouse",target:e.target})}},{key:"handleMoveEvent",value:function(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":0===e.which&&(this.pressed=!1),this.pressed||this.callback({type:i,srcEvent:e,pointerType:"mouse",target:e.target});break;case"mouseup":this.pressed=!1}}}]),n}();exports.default=o;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","../constants":"jCzK"}],"PrTM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("@babel/runtime/helpers/esm/classCallCheck")),t=a(require("@babel/runtime/helpers/esm/createClass")),n=require("../constants");function a(e){return e&&e.__esModule?e:{default:e}}var s=n.INPUT_EVENT_TYPES.KEY_EVENTS,i="keydown",l="keyup",r=function(){function n(t,a){var i=this,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,e.default)(this,n),this.element=t,this.callback=a,this.options=Object.assign({enable:!0},l),this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=s.concat(l.events||[]),this.handleEvent=this.handleEvent.bind(this),t.tabIndex=l.tabIndex||0,t.style.outline="none",this.events.forEach(function(e){return t.addEventListener(e,i.handleEvent)})}return(0,t.default)(n,[{key:"destroy",value:function(){var e=this;this.events.forEach(function(t){return e.element.removeEventListener(t,e.handleEvent)})}},{key:"enableEventType",value:function(e,t){e===i&&(this.enableDownEvent=t),e===l&&(this.enableUpEvent=t)}},{key:"handleEvent",value:function(e){var t=e.target||e.srcElement;"INPUT"===t.tagName&&"text"===t.type||"TEXTAREA"===t.tagName||(this.enableDownEvent&&"keydown"===e.type&&this.callback({type:i,srcEvent:e,key:e.key,target:e.target}),this.enableUpEvent&&"keyup"===e.type&&this.callback({type:l,srcEvent:e,key:e.key,target:e.target}))}}]),n}();exports.default=r;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","../constants":"jCzK"}],"I4Fd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("@babel/runtime/helpers/esm/classCallCheck")),t=n(require("@babel/runtime/helpers/esm/createClass"));function n(e){return e&&e.__esModule?e:{default:e}}var s="contextmenu",i=function(){function n(t,s){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,e.default)(this,n),this.element=t,this.callback=s,this.options=Object.assign({enable:!0},i),this.handleEvent=this.handleEvent.bind(this),t.addEventListener("contextmenu",this.handleEvent)}return(0,t.default)(n,[{key:"destroy",value:function(){this.element.removeEventListener("contextmenu",this.handleEvent)}},{key:"enableEventType",value:function(e,t){e===s&&(this.options.enable=t)}},{key:"handleEvent",value:function(e){this.options.enable&&this.callback({type:s,center:{x:e.clientX,y:e.clientY},srcEvent:e,pointerType:"mouse",target:e.target})}}]),n}();exports.default=i;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph"}],"sn9i":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.whichButtons=h,exports.getOffsetPosition=a;var e=1,t=2,n=4,o={pointerdown:e,pointermove:t,pointerup:n,mousedown:e,mousemove:t,mouseup:n},i=1,r=2,u=3,s=0,c=1,l=2,f=1,p=2,v=4;function h(h){var a=o[h.srcEvent.type];if(!a)return null;var d=h.srcEvent,m=d.buttons,B=d.button,g=d.which,x=!1,b=!1,w=!1;return a===n||a===t&&!Number.isFinite(m)?(x=g===i,b=g===r,w=g===u):a===t?(x=Boolean(m&f),b=Boolean(m&v),w=Boolean(m&p)):a===e&&(x=B===s,b=B===c,w=B===l),{leftButton:x,middleButton:b,rightButton:w}}function a(e,t){var n=e.srcEvent;if(!e.center&&!Number.isFinite(n.clientX))return null;var o=e.center||{x:n.clientX,y:n.clientY},i=t.getBoundingClientRect(),r=i.width/t.offsetWidth,u=i.height/t.offsetHeight;return{center:o,offsetCenter:{x:(o.x-i.left-t.clientLeft)/r,y:(o.y-i.top-t.clientTop)/u}}}
},{}],"e1JC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("@babel/runtime/helpers/esm/typeof")),t=i(require("@babel/runtime/helpers/esm/classCallCheck")),n=i(require("@babel/runtime/helpers/esm/createClass")),r=require("./event-utils");function i(e){return e&&e.__esModule?e:{default:e}}var s={srcElement:"root",priority:0},a=function(){function i(e){(0,t.default)(this,i),this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this.handleEvent=this.handleEvent.bind(this),this._active=!1}return(0,n.default)(i,[{key:"isEmpty",value:function(){return!this._active}},{key:"add",value:function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=this.handlers,o=this.handlersByElement;r&&("object"!==(0,e.default)(r)||r.addEventListener)&&(r={srcElement:r}),r=r?Object.assign({},s,r):s;var h=o.get(r.srcElement);h||(h=[],o.set(r.srcElement,h));var v={type:t,handler:n,srcElement:r.srcElement,priority:r.priority};i&&(v.once=!0),a&&(v.passive=!0),l.push(v),this._active=this._active||!v.passive;for(var u=h.length-1;u>=0&&!(h[u].priority>=v.priority);)u--;h.splice(u+1,0,v)}},{key:"remove",value:function(e,t){for(var n=this.handlers,r=this.handlersByElement,i=n.length-1;i>=0;i--){var s=n[i];if(s.type===e&&s.handler===t){n.splice(i,1);var a=r.get(s.srcElement);a.splice(a.indexOf(s),1),0===a.length&&r.delete(s.srcElement)}}this._active=n.some(function(e){return!e.passive})}},{key:"handleEvent",value:function(e){if(!this.isEmpty()){for(var t=this._normalizeEvent(e),n=e.srcEvent.target;n&&n!==t.rootElement;){if(this._emit(t,n),t.handled)return;n=n.parentNode}this._emit(t,"root")}}},{key:"_emit",value:function(e,t){var n=this.handlersByElement.get(t);if(n){for(var r=!1,i=function(){e.handled=!0},s=function(){e.handled=!0,r=!0},a=[],l=0;l<n.length;l++){var o=n[l],h=o.type,v=o.handler,u=o.once;if(v(Object.assign({},e,{type:h,stopPropagation:i,stopImmediatePropagation:s})),u&&a.push(n[l]),r)break}for(var d=0;d<a.length;d++){var c=a[d],p=c.type,f=c.handler;this.remove(p,f)}}}},{key:"_normalizeEvent",value:function(e){var t=this.eventManager.element;return Object.assign({},e,(0,r.whichButtons)(e),(0,r.getOffsetPosition)(e,t),{handled:!1,rootElement:t})}}]),i}();exports.default=a;
},{"@babel/runtime/helpers/esm/typeof":"zsbK","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","./event-utils":"sn9i"}],"GjpX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=h(require("@babel/runtime/helpers/esm/slicedToArray")),t=h(require("@babel/runtime/helpers/esm/classCallCheck")),n=h(require("@babel/runtime/helpers/esm/createClass")),r=require("./utils/hammer"),i=h(require("./inputs/wheel-input")),a=h(require("./inputs/move-input")),o=h(require("./inputs/key-input")),s=h(require("./inputs/contextmenu-input")),u=h(require("./utils/event-registrar")),l=require("./constants");function h(e){return e&&e.__esModule?e:{default:e}}function c(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=v(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function v(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var d={events:null,recognizers:null,recognizerOptions:{},Manager:r.Manager,touchAction:"none",tabIndex:0},p=function(){function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,t.default)(this,r),this.options=Object.assign({},d,n),this.events=new Map,this._onBasicInput=this._onBasicInput.bind(this),this._onOtherEvent=this._onOtherEvent.bind(this),this.setElement(e);var i=n.events;i&&this.on(i)}return(0,n.default)(r,[{key:"setElement",value:function(t){var n=this;if(this.element&&this.destroy(),this.element=t,t){var r=this.options,u=r.Manager;for(var h in this.manager=new u(t,{touchAction:r.touchAction,recognizers:r.recognizers||l.RECOGNIZERS}).on("hammer.input",this._onBasicInput),r.recognizers||Object.keys(l.RECOGNIZER_COMPATIBLE_MAP).forEach(function(e){var t=n.manager.get(e);t&&l.RECOGNIZER_COMPATIBLE_MAP[e].forEach(function(e){t.recognizeWith(e)})}),r.recognizerOptions){var v=this.manager.get(h);if(v){var f=r.recognizerOptions[h];delete f.enable,v.set(f)}}this.wheelInput=new i.default(t,this._onOtherEvent,{enable:!1}),this.moveInput=new a.default(t,this._onOtherEvent,{enable:!1}),this.keyInput=new o.default(t,this._onOtherEvent,{enable:!1,tabIndex:r.tabIndex}),this.contextmenuInput=new s.default(t,this._onOtherEvent,{enable:!1});var d,p=c(this.events);try{for(p.s();!(d=p.n()).done;){var m=(0,e.default)(d.value,2),y=m[0],E=m[1];E.isEmpty()||(this._toggleRecognizer(E.recognizerName,!0),this.manager.on(y,E.handleEvent))}}catch(g){p.e(g)}finally{p.f()}}}},{key:"destroy",value:function(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}},{key:"on",value:function(e,t,n){this._addEventHandler(e,t,n,!1)}},{key:"once",value:function(e,t,n){this._addEventHandler(e,t,n,!0)}},{key:"watch",value:function(e,t,n){this._addEventHandler(e,t,n,!1,!0)}},{key:"off",value:function(e,t){this._removeEventHandler(e,t)}},{key:"_toggleRecognizer",value:function(e,t){var n=this.manager;if(n){var r=n.get(e);if(r&&r.options.enable!==t){r.set({enable:t});var i=l.RECOGNIZER_FALLBACK_MAP[e];i&&!this.options.recognizers&&i.forEach(function(i){var a=n.get(i);t?(a.requireFailure(e),r.dropRequireFailure(i)):a.dropRequireFailure(e)})}this.wheelInput.enableEventType(e,t),this.moveInput.enableEventType(e,t),this.keyInput.enableEventType(e,t),this.contextmenuInput.enableEventType(e,t)}}},{key:"_addEventHandler",value:function(e,t,n,r,i){if("string"==typeof e){var a=this.manager,o=this.events,s=l.GESTURE_EVENT_ALIASES[e]||e,h=o.get(s);h||(h=new u.default(this),o.set(s,h),h.recognizerName=l.EVENT_RECOGNIZER_MAP[s]||s,a&&a.on(s,h.handleEvent)),h.add(e,t,n,r,i),h.isEmpty()||this._toggleRecognizer(h.recognizerName,!0)}else for(var c in n=t,e)this._addEventHandler(c,e[c],n,r,i)}},{key:"_removeEventHandler",value:function(e,t){if("string"==typeof e){var n=this.events,r=l.GESTURE_EVENT_ALIASES[e]||e,i=n.get(r);if(i&&(i.remove(e,t),i.isEmpty())){var a,o=i.recognizerName,s=!1,u=c(n.values());try{for(u.s();!(a=u.n()).done;){var h=a.value;if(h.recognizerName===o&&!h.isEmpty()){s=!0;break}}}catch(f){u.e(f)}finally{u.f()}s||this._toggleRecognizer(o,!1)}}else for(var v in e)this._removeEventHandler(v,e[v])}},{key:"_onBasicInput",value:function(e){var t=e.srcEvent,n=l.BASIC_EVENT_ALIASES[t.type];n&&this.manager.emit(n,e)}},{key:"_onOtherEvent",value:function(e){this.manager.emit(e.type,e)}}]),r}();exports.default=p;
},{"@babel/runtime/helpers/esm/slicedToArray":"TBeo","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","./utils/hammer":"MW4S","./inputs/wheel-input":"k4W9","./inputs/move-input":"N73Z","./inputs/key-input":"PrTM","./inputs/contextmenu-input":"I4Fd","./utils/event-registrar":"e1JC","./constants":"jCzK"}],"sV3P":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"EventManager",{enumerable:!0,get:function(){return e.default}});var e=r(require("./event-manager"));function r(e){return e&&e.__esModule?e:{default:e}}
},{"./event-manager":"GjpX"}],"ruUO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=k(require("@babel/runtime/helpers/esm/defineProperty")),t=k(require("@babel/runtime/helpers/esm/classCallCheck")),i=k(require("@babel/runtime/helpers/esm/createClass")),r=k(require("./layer-manager")),n=k(require("./view-manager")),a=k(require("../views/map-view")),s=k(require("./effect-manager")),o=k(require("./effect")),h=k(require("./deck-renderer")),l=k(require("./deck-picker")),u=k(require("./tooltip")),c=k(require("../utils/log")),p=require("../utils/deep-equal"),g=k(require("../utils/typed-array-manager")),d=k(require("./init")),v=require("probe.gl/env"),f=require("@luma.gl/core"),y=require("probe.gl"),m=require("mjolnir.js"),w=k(require("../utils/assert")),b=require("./constants");function k(e){return e&&e.__esModule?e:{default:e}}function _(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,r)}return i}function M(t){for(var i=1;i<arguments.length;i++){var r=null!=arguments[i]?arguments[i]:{};i%2?_(Object(r),!0).forEach(function(i){(0,e.default)(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function P(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=S(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return s=e.done,e},e:function(e){o=!0,a=e},f:function(){try{s||null==i.return||i.return()}finally{if(o)throw a}}}}function S(e,t){if(e){if("string"==typeof e)return C(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?C(e,t):void 0}}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function R(){}var O=function(e){return e.isDragging?"grabbing":"grab"};function T(e){return{id:e.string,width:e.oneOfType([e.number,e.string]),height:e.oneOfType([e.number,e.string]),layers:e.oneOfType([e.object,e.array]),layerFilter:e.func,views:e.oneOfType([e.object,e.array]),viewState:e.object,effects:e.arrayOf(e.instanceOf(o.default)),controller:e.oneOfType([e.func,e.bool,e.object]),gl:e.object,glOptions:e.object,parameters:e.object,pickingRadius:e.number,useDevicePixels:e.oneOfType([e.bool,e.number]),touchAction:e.string,onWebGLInitialized:e.func,onResize:e.func,onViewStateChange:e.func,onBeforeRender:e.func,onAfterRender:e.func,onLoad:e.func,onError:e.func,debug:e.bool,drawPickingColors:e.bool,_framebuffer:e.object,_animate:e.bool,_pickable:e.bool,_typedArrayManagerProps:e.object}}var j={id:"deckgl-overlay",width:"100%",height:"100%",pickingRadius:0,layerFilter:null,glOptions:{},gl:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},onWebGLInitialized:R,onResize:R,onViewStateChange:R,onBeforeRender:R,onAfterRender:R,onLoad:R,onError:null,_onMetrics:null,getCursor:O,debug:!1,drawPickingColors:!1},V=function(){function o(e){(0,t.default)(this,o),e=Object.assign({},j,e),this.props={},this.width=0,this.height=0,this.viewManager=null,this.layerManager=null,this.effectManager=null,this.deckRenderer=null,this.deckPicker=null,this._needsRedraw=!0,this._pickRequest={},this._lastPointerDownInfo=null,this.viewState=null,this.interactiveState={isDragging:!1},this._onEvent=this._onEvent.bind(this),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerMove=this._onPointerMove.bind(this),this._pickAndCallback=this._pickAndCallback.bind(this),this._onRendererInitialized=this._onRendererInitialized.bind(this),this._onRenderFrame=this._onRenderFrame.bind(this),this._onViewStateChange=this._onViewStateChange.bind(this),this._onInteractiveStateChange=this._onInteractiveStateChange.bind(this),e.viewState&&e.initialViewState&&c.default.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),"IE"===(0,v.getBrowser)()&&c.default.warn("IE 11 support will be deprecated in v8.0")(),e.gl||"undefined"!=typeof document&&(this.canvas=this._createCanvas(e)),this.animationLoop=this._createAnimationLoop(e),this.stats=new y.Stats({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(e),e._typedArrayManagerProps&&g.default.setProps(e._typedArrayManagerProps),this.animationLoop.start()}return(0,i.default)(o,[{key:"finalize",value:function(){this.animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,this.layerManager&&(this.layerManager.finalize(),this.layerManager=null,this.viewManager.finalize(),this.viewManager=null,this.effectManager.finalize(),this.effectManager=null,this.deckRenderer.finalize(),this.deckRenderer=null,this.deckPicker.finalize(),this.deckPicker=null,this.eventManager.destroy(),this.eventManager=null,this.tooltip.remove(),this.tooltip=null),this.props.canvas||this.props.gl||!this.canvas||(this.canvas.parentElement.removeChild(this.canvas),this.canvas=null)}},{key:"setProps",value:function(e){this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&c.default.removed("onLayerHover","onHover")(),"onLayerClick"in e&&c.default.removed("onLayerClick","onClick")(),e.initialViewState&&!(0,p.deepEqual)(this.props.initialViewState,e.initialViewState)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);var t=Object.create(this.props);Object.assign(t,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(t),this.layerManager&&(this.viewManager.setProps(t),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(t),this.effectManager.setProps(t),this.deckRenderer.setProps(t),this.deckPicker.setProps(t)),this.stats.get("setProps Time").timeEnd()}},{key:"needsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};if(this.props._animate)return"Deck._animate";var t=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);var i=this.viewManager.needsRedraw(e),r=this.layerManager.needsRedraw(e),n=this.effectManager.needsRedraw(e),a=this.deckRenderer.needsRedraw(e);return t=t||i||r||n||a}},{key:"redraw",value:function(e){if(this.layerManager){var t=e||this.needsRedraw({clearRedrawFlags:!0});t&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(t):this._drawLayers(t))}}},{key:"getViews",value:function(){return this.viewManager.views}},{key:"getViewports",value:function(e){return this.viewManager.getViewports(e)}},{key:"pickObject",value:function(e){var t=this._pick("pickObject","pickObject Time",e).result;return t.length?t[0]:null}},{key:"pickMultipleObjects",value:function(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}},{key:"pickObjects",value:function(e){return this._pick("pickObjects","pickObjects Time",e)}},{key:"_addResources",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var i in e)this.layerManager.resourceManager.add({resourceId:i,data:e[i],forceUpdate:t})}},{key:"_removeResources",value:function(e){var t,i=P(e);try{for(i.s();!(t=i.n()).done;){var r=t.value;this.layerManager.resourceManager.remove(r)}}catch(n){i.e(n)}finally{i.f()}}},{key:"_pick",value:function(e,t,i){var r=this.stats;r.get("Pick Count").incrementCount(),r.get(t).timeStart();var n=this.deckPicker[e](Object.assign({layers:this.layerManager.getLayers(i),views:this.viewManager.getViews(),viewports:this.getViewports(i),onViewportActive:this.layerManager.activateViewport},i));return r.get(t).timeEnd(),n}},{key:"_createCanvas",value:function(e){var t=e.canvas;("string"==typeof t&&(t=document.getElementById(t),(0,w.default)(t)),t)||(t=document.createElement("canvas"),(e.parent||document.body).appendChild(t));var i=e.id,r=e.style;return t.id=i,Object.assign(t.style,r),t}},{key:"_setCanvasSize",value:function(e){if(this.canvas){var t=e.width,i=e.height;(t||0===t)&&(t=Number.isFinite(t)?"".concat(t,"px"):t,this.canvas.style.width=t),(i||0===i)&&(i=Number.isFinite(i)?"".concat(i,"px"):i,this.canvas.style.position="absolute",this.canvas.style.height=i)}}},{key:"_updateCanvasSize",value:function(){if(this._checkForCanvasSizeChange()){var e=this.width,t=this.height;this.viewManager.setProps({width:e,height:t}),this.props.onResize({width:this.width,height:this.height})}}},{key:"_checkForCanvasSizeChange",value:function(){var e=this.canvas;if(!e)return!1;var t=e.clientWidth||e.width,i=e.clientHeight||e.height;return(t!==this.width||i!==this.height)&&(this.width=t,this.height=i,!0)}},{key:"_createAnimationLoop",value:function(e){var t=this,i=e.width,r=e.height,n=e.gl,a=e.glOptions,s=e.debug,o=e.useDevicePixels,h=e.autoResizeDrawingBuffer;return new f.AnimationLoop({width:i,height:r,useDevicePixels:o,autoResizeDrawingBuffer:h,autoResizeViewport:!1,gl:n,onCreateContext:function(e){return(0,f.createGLContext)(Object.assign({},a,e,{canvas:t.canvas,debug:s}))},onInitialize:this._onRendererInitialized,onRender:this._onRenderFrame,onBeforeRender:e.onBeforeRender,onAfterRender:e.onAfterRender,onError:e.onError})}},{key:"_getViewState",value:function(){return this.props.viewState||this.viewState}},{key:"_getViews",value:function(){var e=this.props.views||[new a.default({id:"default-view"})];return(e=Array.isArray(e)?e:[e]).length&&this.props.controller&&(e[0].props.controller=this.props.controller),e}},{key:"_onPointerMove",value:function(e){var t=this._pickRequest;if("pointerleave"===e.type)t.x=-1,t.y=-1,t.radius=0;else{if(e.leftButton||e.rightButton)return;var i=e.offsetCenter;if(!i)return;t.x=i.x,t.y=i.y,t.radius=this.props.pickingRadius}this.layerManager&&(this.layerManager.context.mousePosition={x:t.x,y:t.y}),t.event=e,t.mode="hover"}},{key:"_pickAndCallback",value:function(){var e=this._pickRequest;if(e.event){var t,i=this._pick("pickObject","pickObject Time",e),r=i.result,n=i.emptyInfo,a=!1,s=P(r);try{for(s.s();!(t=s.n()).done;){var o=t.value;n=o,a=o.layer.onHover(o,e.event)}}catch(l){s.e(l)}finally{s.f()}if(!a&&this.props.onHover&&this.props.onHover(n,e.event),this.props.getTooltip){var h=this.props.getTooltip(n);this.tooltip.setTooltip(h,n.x,n.y)}e.event=null}}},{key:"_updateCursor",value:function(){var e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.interactiveState))}},{key:"_setGLContext",value:function(e){if(!this.layerManager){this.canvas||(this.canvas=e.canvas,(0,f.instrumentGLContext)(e,{enable:!0,copyState:!0})),this.tooltip=new u.default(this.canvas),(0,f.setParameters)(e,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(e);var t=new f.Timeline;for(var i in t.play(),this.animationLoop.attachTimeline(t),this.eventManager=new m.EventManager(this.props.parent||e.canvas,{touchAction:this.props.touchAction,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}}),b.EVENTS)this.eventManager.on(i,this._onEvent);this.viewManager=new n.default({timeline:t,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange,onInteractiveStateChange:this._onInteractiveStateChange,views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});var a=this.viewManager.getViewports()[0];this.layerManager=new r.default(e,{deck:this,stats:this.stats,viewport:a,timeline:t}),this.effectManager=new s.default,this.deckRenderer=new h.default(e),this.deckPicker=new l.default(e),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}}},{key:"_drawLayers",value:function(e,t){var i=this.layerManager.context.gl;(0,f.setParameters)(i,this.props.parameters),this.props.onBeforeRender({gl:i}),this.deckRenderer.renderLayers(Object.assign({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",redrawReason:e,effects:this.effectManager.getEffects()},t)),this.props.onAfterRender({gl:i})}},{key:"_onRendererInitialized",value:function(e){var t=e.gl;this._setGLContext(t)}},{key:"_onRenderFrame",value:function(e){this._getFrameStats(),this._metricsCounter++%60==0&&(this._getMetrics(),this.stats.reset(),c.default.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(!1),this.viewManager&&this.viewManager.updateViewStates()}},{key:"_onViewStateChange",value:function(t){var i=this.props.onViewStateChange(t)||t.viewState;this.viewState&&(this.viewState=M(M({},this.viewState),{},(0,e.default)({},t.viewId,i)),this.props.viewState||this.viewManager.setProps({viewState:this.viewState}))}},{key:"_onInteractiveStateChange",value:function(e){var t=e.isDragging,i=void 0!==t&&t;i!==this.interactiveState.isDragging&&(this.interactiveState.isDragging=i)}},{key:"_onEvent",value:function(e){var t=b.EVENTS[e.type],i=e.offsetCenter;if(t&&i){var r=this.layerManager.getLayers(),n=this.deckPicker.getLastPickedObject({x:i.x,y:i.y,layers:r,viewports:this.getViewports(i)},this._lastPointerDownInfo),a=n.layer,s=a&&(a[t.handler]||a.props[t.handler]),o=this.props[t.handler],h=!1;s&&(h=s.call(a,n,e)),!h&&o&&o(n,e)}}},{key:"_onPointerDown",value:function(e){var t=e.offsetCenter;this._lastPointerDownInfo=this.pickObject({x:t.x,y:t.y,radius:this.props.pickingRadius})}},{key:"_getFrameStats",value:function(){var e=this.stats;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();var t=this.animationLoop.stats;e.get("GPU Time").addTime(t.get("GPU Time").lastTiming),e.get("CPU Time").addTime(t.get("CPU Time").lastTiming)}},{key:"_getMetrics",value:function(){var e=this.metrics,t=this.stats;e.fps=t.get("frameRate").getHz(),e.setPropsTime=t.get("setProps Time").time,e.updateAttributesTime=t.get("Update Attributes").time,e.framesRedrawn=t.get("Redraw Count").count,e.pickTime=t.get("pickObject Time").time+t.get("pickMultipleObjects Time").time+t.get("pickObjects Time").time,e.pickCount=t.get("Pick Count").count,e.gpuTime=t.get("GPU Time").time,e.cpuTime=t.get("CPU Time").time,e.gpuTimePerFrame=t.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=t.get("CPU Time").getAverageTime();var i=f.lumaStats.get("Memory Usage");e.bufferMemory=i.get("Buffer Memory").count,e.textureMemory=i.get("Texture Memory").count,e.renderbufferMemory=i.get("Renderbuffer Memory").count,e.gpuMemory=i.get("GPU Memory").count}}]),o}();exports.default=V,V.getPropTypes=T,V.defaultProps=j,V.VERSION=d.default.VERSION;
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","./layer-manager":"m8xf","./view-manager":"H2B6","../views/map-view":"wDMu","./effect-manager":"sqcc","./effect":"Z10T","./deck-renderer":"J3c9","./deck-picker":"G03o","./tooltip":"Dm3R","../utils/log":"GVus","../utils/deep-equal":"KSag","../utils/typed-array-manager":"yeLJ","./init":"N6pv","probe.gl/env":"d3vq","@luma.gl/core":"iuAK","probe.gl":"TYNK","mjolnir.js":"sV3P","../utils/assert":"Txat","./constants":"ysbg"}],"dK5R":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=l(require("@babel/runtime/helpers/esm/classCallCheck")),t=l(require("@babel/runtime/helpers/esm/createClass")),r=l(require("@babel/runtime/helpers/esm/get")),n=l(require("@babel/runtime/helpers/esm/inherits")),i=l(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),a=l(require("@babel/runtime/helpers/esm/getPrototypeOf")),o=l(require("./layer")),u=l(require("../debug")),s=require("../utils/flatten");function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=f(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw a}}}}function f(e,t){if(e){if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function p(e){var t=y();return function(){var r,n=(0,a.default)(e);if(t){var o=(0,a.default)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var h="compositeLayer.renderLayers",g=function(i){(0,n.default)(l,i);var o=p(l);function l(){return(0,e.default)(this,l),o.apply(this,arguments)}return(0,t.default)(l,[{key:"getSubLayers",value:function(){return this.internalState&&this.internalState.subLayers||[]}},{key:"initializeState",value:function(){}},{key:"setState",value:function(e){(0,r.default)((0,a.default)(l.prototype),"setState",this).call(this,e),this.setNeedsUpdate()}},{key:"getPickingInfo",value:function(e){var t=e.info,r=t.object;return r&&r.__source&&r.__source.parent&&r.__source.parent.id===this.id?Object.assign(t,{object:r.__source.object,index:r.__source.index}):t}},{key:"renderLayers",value:function(){return null}},{key:"shouldRenderSubLayer",value:function(e,t){var r=this.props._subLayerProps;return t&&t.length||r&&r[e]}},{key:"getSubLayerClass",value:function(e,t){var r=this.props._subLayerProps;return r&&r[e]&&r[e].type||t}},{key:"getSubLayerRow",value:function(e,t,r){return e.__source={parent:this,object:t,index:r},e}},{key:"getSubLayerAccessor",value:function(e){if("function"==typeof e){var t={data:this.props.data,target:[]};return function(r,n){return r.__source?(t.index=r.__source.index,e(r.__source.object,t)):e(r,n)}}return e}},{key:"getSubLayerProps",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.props,r=t.opacity,n=t.pickable,i=t.visible,a=t.parameters,o=t.getPolygonOffset,u=t.highlightedObjectIndex,s=t.autoHighlight,l=t.highlightColor,f=t.coordinateSystem,d=t.coordinateOrigin,p=t.wrapLongitude,y=t.positionFormat,h=t.modelMatrix,g=t.extensions,b=t._subLayerProps,v={opacity:r,pickable:n,visible:i,parameters:a,getPolygonOffset:o,highlightedObjectIndex:u,autoHighlight:s,highlightColor:l,coordinateSystem:f,coordinateOrigin:d,wrapLongitude:p,positionFormat:y,modelMatrix:h,extensions:g},m=b&&b[e.id],_=m&&m.updateTriggers,L=e.id||"sublayer";if(m){var S=this.constructor._propTypes;for(var k in m){var j=S[k];j&&"accessor"===j.type&&(m[k]=this.getSubLayerAccessor(m[k]))}}Object.assign(v,e,m,{id:"".concat(this.props.id,"-").concat(L),updateTriggers:Object.assign({all:this.props.updateTriggers.all},e.updateTriggers,_)});var x,O=c(g);try{for(O.s();!(x=O.n()).done;){var P=x.value,C=P.getSubLayerProps.call(this,P);C&&Object.assign(v,C,{updateTriggers:Object.assign(v.updateTriggers,C.updateTriggers)})}}catch(q){O.e(q)}finally{O.f()}return v}},{key:"_getAttributeManager",value:function(){return null}},{key:"_renderLayers",value:function(){var e=this.internalState.subLayers,t=!e||this.needsUpdate();t&&(e=this.renderLayers(),e=(0,s.flatten)(e,Boolean),this.internalState.subLayers=e),(0,u.default)(h,this,t,e);var r,n=c(e);try{for(n.s();!(r=n.n()).done;){r.value.parent=this}}catch(i){n.e(i)}finally{n.f()}}},{key:"isComposite",get:function(){return!0}},{key:"isLoaded",get:function(){return(0,r.default)((0,a.default)(l.prototype),"isLoaded",this)&&this.getSubLayers().every(function(e){return e.isLoaded})}}]),l}(o.default);exports.default=g,g.layerName="CompositeLayer";
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/get":"KGqu","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","./layer":"xVVm","../debug":"EEoF","../utils/flatten":"gSVO"}],"TXTo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("@babel/runtime/helpers/esm/classCallCheck")),t=u(require("@babel/runtime/helpers/esm/createClass")),r=require("../utils/deep-equal");function u(e){return e&&e.__esModule?e:{default:e}}var s=function(){function u(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,e.default)(this,u),this.opts=t}return(0,t.default)(u,[{key:"equals",value:function(e){return this===e||this.constructor===e.constructor&&(0,r.deepEqual)(this.opts,e.opts)}},{key:"getShaders",value:function(e){return null}},{key:"getSubLayerProps",value:function(e){var t=e.constructor.defaultProps,r=void 0===t?{}:t,u={updateTriggers:{}};for(var s in r)if(s in this.props){var a=r[s],i=this.props[s];u[s]=i,a&&"accessor"===a.type&&(u.updateTriggers[s]=this.props.updateTriggers[s],"function"==typeof i&&(u[s]=this.getSubLayerAccessor(i,!0)))}return u}},{key:"initializeState",value:function(e,t){}},{key:"updateState",value:function(e,t){}},{key:"draw",value:function(e,t){}},{key:"finalizeState",value:function(e){}}]),u}();exports.default=s;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","../utils/deep-equal":"KSag"}],"MNZ9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"COORDINATE_SYSTEM",{enumerable:!0,get:function(){return e.COORDINATE_SYSTEM}}),Object.defineProperty(exports,"Deck",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"DeckRenderer",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"Effect",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"Layer",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"CompositeLayer",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"LayerExtension",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"AttributeManager",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"LayerManager",{enumerable:!0,get:function(){return f.default}});var e=require("./constants"),r=c(require("./deck")),t=c(require("./deck-renderer")),n=c(require("./effect")),u=c(require("./layer")),a=c(require("./composite-layer")),o=c(require("./layer-extension")),i=c(require("./attribute/attribute-manager")),f=c(require("./layer-manager"));function c(e){return e&&e.__esModule?e:{default:e}}
},{"./constants":"ysbg","./deck":"ruUO","./deck-renderer":"J3c9","./effect":"Z10T","./layer":"xVVm","./composite-layer":"dK5R","./layer-extension":"TXTo","./attribute/attribute-manager":"wT56","./layer-manager":"m8xf"}],"yBNR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PointLight=void 0;var t=n(require("@babel/runtime/helpers/esm/classCallCheck")),i=n(require("@babel/runtime/helpers/esm/createClass")),e=require("../../shaderlib/project/project-functions"),o=require("../../lib");function n(t){return t&&t.__esModule?t:{default:t}}var r=[255,255,255],s=1,a=[0,0,1],c=[0,0,1],u=0,l=function(){function n(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,t.default)(this,n);var e=i.color,o=void 0===e?r:e,a=i.intensity,l=void 0===a?s:a,h=i.position,p=void 0===h?c:h;this.id=i.id||"point-".concat(u++),this.color=o,this.intensity=l,this.type="point",this.position=p,this.attenuation=d(i),this.projectedLight=Object.assign({},this)}return(0,i.default)(n,[{key:"getProjectedLight",value:function(t){var i=t.layer,n=this.projectedLight,r=i.context.viewport,s=i.props,a=s.coordinateSystem,c=s.coordinateOrigin,u=(0,e.projectPosition)(this.position,{viewport:r,coordinateSystem:a,coordinateOrigin:c,fromCoordinateSystem:r.isGeospatial?o.COORDINATE_SYSTEM.LNGLAT:o.COORDINATE_SYSTEM.CARTESIAN,fromCoordinateOrigin:[0,0,0]});return n.color=this.color,n.intensity=this.intensity,n.position=u,n}}]),n}();function d(t){return"attenuation"in t?t.attenuation:"intensity"in t?[0,0,t.intensity]:a}exports.PointLight=l;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","../../shaderlib/project/project-functions":"AJ0f","../../lib":"MNZ9"}],"xYso":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("@babel/runtime/helpers/esm/classCallCheck")),t=s(require("@babel/runtime/helpers/esm/createClass")),r=s(require("@babel/runtime/helpers/esm/inherits")),i=s(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),o=s(require("@babel/runtime/helpers/esm/getPrototypeOf")),n=require("./point-light"),u=require("../../shaderlib/project/viewport-uniforms");function s(e){return e&&e.__esModule?e:{default:e}}function l(e){var t=a();return function(){var r,n=(0,o.default)(e);if(t){var u=(0,o.default)(this).constructor;r=Reflect.construct(n,arguments,u)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var c=function(i){(0,r.default)(n,i);var o=l(n);function n(){return(0,e.default)(this,n),o.apply(this,arguments)}return(0,t.default)(n,[{key:"getProjectedLight",value:function(e){var t=e.layer,r=this.projectedLight,i=t.context.viewport,o=t.props,n=o.coordinateSystem,s=o.coordinateOrigin,l=o.modelMatrix,a=(0,u.getUniformsFromViewport)({viewport:i,modelMatrix:l,coordinateSystem:n,coordinateOrigin:s}).project_uCameraPosition;return r.color=this.color,r.intensity=this.intensity,r.position=a,r}}]),n}(n.PointLight);exports.default=c;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","./point-light":"yBNR","../../shaderlib/project/viewport-uniforms":"iWu9"}],"EHE7":[function(require,module,exports) {
"use strict";function e(e,t){if(null==e)return{};var r,n,u={},f=Object.keys(e);for(n=0;n<f.length;n++)r=f[n],t.indexOf(r)>=0||(u[r]=e[r]);return u}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"FBCy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=t(require("@babel/runtime/helpers/esm/objectWithoutPropertiesLoose"));function t(e){return e&&e.__esModule?e:{default:e}}function r(t,r){if(null==t)return{};var o,u,l=(0,e.default)(t,r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);for(u=0;u<n.length;u++)o=n[u],r.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(t,o)&&(l[o]=t[o])}return l}
},{"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose":"EHE7"}],"IzZd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getSolarPosition=M,exports.getSunlightDirection=u;var t=Math.PI/180,n=864e5,a=2440588,i=2451545,r=23.4397*t,h=357.5291,s=.98560028,o=280.147,e=360.9856235;function M(n,a,i){var r=t*-i,h=t*a,s=f(n),o=I(s),e=P(s,r)-o.rightAscension;return{azimuth:d(e,h,o.declination),altitude:g(e,h,o.declination)}}function u(t,n,a){var i=M(t,n,a),r=i.azimuth,h=i.altitude,s=r+Math.PI;return[-Math.sin(s),-Math.cos(s),-Math.sin(h)]}function c(t){return t/n-.5+a}function f(t){return c(t)-i}function v(t,n){var a=t;return Math.atan2(Math.sin(a)*Math.cos(r)-Math.tan(n)*Math.sin(r),Math.cos(a))}function l(t,n){var a=t;return Math.asin(Math.sin(n)*Math.cos(r)+Math.cos(n)*Math.sin(r)*Math.sin(a))}function d(t,n,a){var i=t,r=n,h=a;return Math.atan2(Math.sin(i),Math.cos(i)*Math.sin(r)-Math.tan(h)*Math.cos(r))}function g(t,n,a){var i=t,r=n,h=a;return Math.asin(Math.sin(r)*Math.sin(h)+Math.cos(r)*Math.cos(h)*Math.cos(i))}function P(n,a){return t*(o+e*n)-a}function p(n){return t*(h+s*n)}function x(n){var a=n;return a+t*(1.9148*Math.sin(a)+.02*Math.sin(2*a)+3e-4*Math.sin(3*a))+102.9372*t+Math.PI}function I(t){var n=x(p(t));return{declination:l(n,0),rightAscension:v(n,0)}}
},{}],"hMy0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("@babel/runtime/helpers/esm/objectWithoutProperties")),t=a(require("@babel/runtime/helpers/esm/classCallCheck")),r=a(require("@babel/runtime/helpers/esm/createClass")),i=a(require("@babel/runtime/helpers/esm/inherits")),u=a(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),n=a(require("@babel/runtime/helpers/esm/getPrototypeOf")),l=require("./directional-light"),s=require("./suncalc");function a(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=c();return function(){var r,i=(0,n.default)(e);if(t){var l=(0,n.default)(this).constructor;r=Reflect.construct(i,arguments,l)}else r=i.apply(this,arguments);return(0,u.default)(this,r)}}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var f=function(u){(0,i.default)(l,u);var n=o(l);function l(r){var i,u=r.timestamp,s=(0,e.default)(r,["timestamp"]);return(0,t.default)(this,l),(i=n.call(this,s)).timestamp=u,i}return(0,r.default)(l,[{key:"getProjectedLight",value:function(e){var t=e.layer.context.viewport,r=t.latitude,i=t.longitude;return this.direction=(0,s.getSunlightDirection)(this.timestamp,r,i),this}}]),l}(l.DirectionalLight);exports.default=f;
},{"@babel/runtime/helpers/esm/objectWithoutProperties":"FBCy","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","./directional-light":"n3wt","./suncalc":"IzZd"}],"YqRQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("@babel/runtime/helpers/esm/classCallCheck")),t=s(require("@babel/runtime/helpers/esm/createClass")),r=s(require("@babel/runtime/helpers/esm/inherits")),u=s(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),l=s(require("@babel/runtime/helpers/esm/getPrototypeOf")),n=require("@luma.gl/core"),i=s(require("./pass"));function s(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=a();return function(){var r,n=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,u.default)(this,r)}}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var f=function(u){(0,r.default)(i,u);var l=o(i);function i(t){var r,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,e.default)(this,i),r=l.call(this,t,u);var s=u.module,o=u.fs,a=u.id;return r.model=new n.ClipSpace(t,{id:a,fs:o,modules:[s]}),r}return(0,t.default)(i,[{key:"render",value:function(e){var t=this,r=this.gl;(0,n.withParameters)(r,{framebuffer:e.outputBuffer,clearColor:[0,0,0,0]},function(){return t._renderPass(r,e)})}},{key:"delete",value:function(){this.model.delete(),this.model=null}},{key:"_renderPass",value:function(e,t){var r=t.inputBuffer;t.outputBuffer;(0,n.clear)(e,{color:!0}),this.model.draw({moduleSettings:this.props.moduleSettings,uniforms:{texture:r,texSize:[r.width,r.height]},parameters:{depthWrite:!1,depthTest:!1}})}}]),i}(i.default);exports.default=f;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@luma.gl/core":"iuAK","./pass":"ay01"}],"QgRQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("@babel/runtime/helpers/esm/classCallCheck")),t=s(require("@babel/runtime/helpers/esm/createClass")),r=s(require("@babel/runtime/helpers/esm/inherits")),n=s(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),o=s(require("@babel/runtime/helpers/esm/getPrototypeOf")),i=s(require("../lib/effect")),u=s(require("../passes/screen-pass")),a=require("@luma.gl/core");function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=f(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,a=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return u=e.done,e},e:function(e){a=!0,i=e},f:function(){try{u||null==r.return||r.return()}finally{if(a)throw i}}}}function f(e,t){if(e){if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function p(e){var t=d();return function(){var r,i=(0,o.default)(e);if(t){var u=(0,o.default)(this).constructor;r=Reflect.construct(i,arguments,u)}else r=i.apply(this,arguments);return(0,n.default)(this,r)}}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var v=function(n){(0,r.default)(i,n);var o=p(i);function i(t){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,e.default)(this,i),(r=o.call(this,n)).id="".concat(t.name,"-pass"),(0,a.normalizeShaderModule)(t),r.module=t,r}return(0,t.default)(i,[{key:"postRender",value:function(e,t){this.passes||(this.passes=m(e,this.module,this.id,this.props));for(var r=t.target,n=t.inputBuffer,o=t.swapBuffer,i=0;i<this.passes.length;i++){r&&i===this.passes.length-1&&(o=r),this.passes[i].render({inputBuffer:n,outputBuffer:o});var u=o;o=n,n=u}return n}},{key:"cleanup",value:function(){if(this.passes){var e,t=l(this.passes);try{for(t.s();!(e=t.n()).done;){e.value.delete()}}catch(r){t.e(r)}finally{t.f()}this.passes=null}}}]),i}(i.default);function m(e,t,r,n){if(t.filter||t.sampler){var o=g(t);return[new u.default(e,{id:r,module:t,fs:o,moduleSettings:n})]}return(t.passes||[]).map(function(o,i){var a=g(t,o),s="".concat(r,"-").concat(i);return new u.default(e,{id:s,module:t,fs:a,moduleSettings:n})})}exports.default=v;var h=function(e){return"uniform sampler2D texture;\nuniform vec2 texSize;\n\nvarying vec2 position;\nvarying vec2 coordinate;\nvarying vec2 uv;\n\nvoid main() {\n  vec2 texCoord = coordinate;\n\n  gl_FragColor = texture2D(texture, texCoord);\n  gl_FragColor = ".concat(e,"(gl_FragColor, texSize, texCoord);\n}\n")},y=function(e){return"uniform sampler2D texture;\nuniform vec2 texSize;\n\nvarying vec2 position;\nvarying vec2 coordinate;\nvarying vec2 uv;\n\nvoid main() {\n  vec2 texCoord = coordinate;\n\n  gl_FragColor = ".concat(e,"(texture, texSize, texCoord);\n}\n")};function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(t.filter){var r="string"==typeof t.filter?t.filter:"".concat(e.name,"_filterColor");return h(r)}if(t.sampler){var n="string"==typeof t.sampler?t.sampler:"".concat(e.name,"_sampleColor");return y(n)}return null}
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","../lib/effect":"Z10T","../passes/screen-pass":"YqRQ","@luma.gl/core":"iuAK"}],"DUOV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=d(require("@babel/runtime/helpers/esm/slicedToArray")),t=d(require("@babel/runtime/helpers/esm/classCallCheck")),r=d(require("@babel/runtime/helpers/esm/createClass")),i=d(require("@babel/runtime/helpers/esm/inherits")),n=d(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),a=d(require("@babel/runtime/helpers/esm/getPrototypeOf")),u=require("math.gl"),o=d(require("./viewport")),s=require("../lib/constants"),l=f(require("gl-matrix/vec3")),c=f(require("gl-matrix/vec4"));function h(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return h=function(){return e},e}function f(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=h();if(t&&t.has(e))return t.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var a=i?Object.getOwnPropertyDescriptor(e,n):null;a&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n]}return r.default=e,t&&t.set(e,r),r}function d(e){return e&&e.__esModule?e:{default:e}}function p(e){var t=v();return function(){var r,i=(0,a.default)(e);if(t){var u=(0,a.default)(this).constructor;r=Reflect.construct(i,arguments,u)}else r=i.apply(this,arguments);return(0,n.default)(this,r)}}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var M=Math.PI/180,g=180/Math.PI,m=6370972,y=256;function b(){var e=y/m,t=Math.PI/180*y;return{unitsPerMeter:[e,e,e],unitsPerMeter2:[0,0,0],metersPerUnit:[1/e,1/e,1/e],unitsPerDegree:[t,t,e],unitsPerDegree2:[0,0,0],degreesPerUnit:[1/t,1/t,1/e]}}var P=function(n){(0,i.default)(o,n);var a=p(o);function o(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,t.default)(this,o);var i=r.latitude,n=void 0===i?0:i,s=r.longitude,l=void 0===s?0:s,c=r.zoom,h=void 0===c?11:c,f=r.nearZMultiplier,d=void 0===f?.1:f,p=r.farZMultiplier,v=void 0===p?2:p,g=r.resolution,m=void 0===g?10:g,P=r.width,j=r.height,q=r.altitude,O=void 0===q?1.5:q;P=P||1,j=j||1,O=Math.max(.75,O);var w=(new u.Matrix4).lookAt({eye:[0,-O,0],up:[0,0,1]}),x=Math.pow(2,h);w.rotateX(n*M),w.rotateZ(-l*M),w.scale(x/j);var k=Math.atan(.5/O),D=2*y*x/j,L=Object.assign({},r,{width:P,height:j,viewMatrix:w,longitude:l,latitude:n,zoom:h,fovyRadians:2*k,aspect:P/j,focalDistance:O,near:d,far:Math.min(2,1/D+1)*O*v});return(e=a.call(this,L)).resolution=m,e.distanceScales=b(),e}return(0,r.default)(o,[{key:"getDistanceScales",value:function(){return this.distanceScales}},{key:"getBounds",value:function(){var e={targetZ:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).z||0},t=this.unproject([0,this.height/2],e),r=this.unproject([this.width/2,0],e),i=this.unproject([this.width,this.height/2],e),n=this.unproject([this.width/2,this.height],e);return i[0]<this.longitude&&(i[0]+=360),t[0]>this.longitude&&(t[0]-=360),[Math.min(t[0],i[0],r[0],n[0]),Math.min(t[1],i[1],r[1],n[1]),Math.max(t[0],i[0],r[0],n[0]),Math.max(t[1],i[1],r[1],n[1])]}},{key:"unproject",value:function(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i.topLeft,a=void 0===n||n,u=i.targetZ,o=(0,e.default)(t,3),s=o[0],c=o[1],h=o[2],f=a?c:this.height-c,d=this.pixelUnprojectionMatrix;if(Number.isFinite(h))r=j(d,[s,f,h,1]);else{var p=j(d,[s,f,-1,1]),v=j(d,[s,f,1,1]),M=((u||0)/m+1)*y,g=l.sqrLen(l.sub([],p,v)),b=l.sqrLen(p),P=l.sqrLen(v),q=4*((4*b*P-Math.pow(g-b-P,2))/16)/g,O=(Math.sqrt(b-q)-Math.sqrt(Math.max(0,M*M-q)))/Math.sqrt(g);r=l.lerp([],p,v,O)}var w=this.unprojectPosition(r),x=(0,e.default)(w,3),k=x[0],D=x[1],L=x[2];return Number.isFinite(h)?[k,D,L]:Number.isFinite(u)?[k,D,u]:[k,D]}},{key:"projectPosition",value:function(t){var r=(0,e.default)(t,3),i=r[0],n=r[1],a=r[2],u=void 0===a?0:a,o=i*M,s=n*M,l=Math.cos(s),c=(u/m+1)*y;return[Math.sin(o)*l*c,-Math.cos(o)*l*c,Math.sin(s)*c]}},{key:"unprojectPosition",value:function(t){var r=(0,e.default)(t,3),i=r[0],n=r[1],a=r[2],u=l.len(t),o=Math.asin(a/u);return[Math.atan2(i,-n)*g,o*g,(u/y-1)*m]}},{key:"projectFlat",value:function(e){return e}},{key:"unprojectFlat",value:function(e){return e}},{key:"getMapCenterByLngLatPosition",value:function(e){var t=e.lngLat,r=e.pos,i=this.unproject(r);return[t[0]-i[0]+this.longitude,t[1]-i[1]+this.latitude]}},{key:"projectionMode",get:function(){return s.PROJECTION_MODE.GLOBE}}]),o}(o.default);function j(e,t){var r=c.transformMat4([],t,e);return c.scale(r,r,1/r[3]),r}exports.default=P;
},{"@babel/runtime/helpers/esm/slicedToArray":"TBeo","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","math.gl":"xAaq","./viewport":"HjGN","../lib/constants":"ysbg","gl-matrix/vec3":"AWBd","gl-matrix/vec4":"zWbG"}],"Egne":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=c(require("@babel/runtime/helpers/esm/classCallCheck")),e=c(require("@babel/runtime/helpers/esm/createClass")),i=c(require("@babel/runtime/helpers/esm/inherits")),r=c(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),n=c(require("@babel/runtime/helpers/esm/getPrototypeOf")),o=c(require("./controller")),a=c(require("./view-state")),u=require("../utils/math-utils"),s=require("math.gl");function c(t){return t&&t.__esModule?t:{default:t}}function h(t){var e=l();return function(){var i,o=(0,n.default)(t);if(e){var a=(0,n.default)(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return(0,r.default)(this,i)}}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}var p=20,v={position:[0,0,0],pitch:0,bearing:0,maxPitch:90,minPitch:-90},d=function(r){(0,i.default)(o,r);var n=h(o);function o(e){var i,r=e.width,a=e.height,u=e.position,s=void 0===u?v.position:u,c=e.bearing,h=void 0===c?v.bearing:c,l=e.pitch,p=void 0===l?v.pitch:l,d=e.longitude,f=e.latitude,g=e.maxPitch,m=void 0===g?v.maxPitch:g,_=e.minPitch,P=void 0===_?v.minPitch:_,b=e.startBearing,y=e.startPitch,k=e.startZoomPosition,S=e.startZoom;return(0,t.default)(this,o),(i=n.call(this,{width:r,height:a,position:s,bearing:h,pitch:p,longitude:d,latitude:f,maxPitch:m,minPitch:P}))._interactiveState={startBearing:b,startPitch:y,startZoomPosition:k,startZoom:S},i}return(0,e.default)(o,[{key:"getInteractiveState",value:function(){return this._interactiveState}},{key:"getDirection",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new s._SphericalCoordinates({bearing:this._viewportProps.bearing,pitch:t?90:90+this._viewportProps.pitch}).toVector3().normalize()}},{key:"panStart",value:function(){return this}},{key:"pan",value:function(){return this}},{key:"panEnd",value:function(){return this}},{key:"rotateStart",value:function(t){t.pos;return this._getUpdatedState({startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}},{key:"rotate",value:function(t){var e=t.deltaScaleX,i=t.deltaScaleY,r=this._interactiveState,n=r.startBearing,o=r.startPitch;return Number.isFinite(n)&&Number.isFinite(o)?this._getUpdatedState({bearing:n-180*e,pitch:o-90*i}):this}},{key:"rotateEnd",value:function(){return this._getUpdatedState({startBearing:null,startPitch:null})}},{key:"zoomStart",value:function(){return this._getUpdatedState({startZoomPosition:this._viewportProps.position,startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function(t){var e=t.scale,i=this._interactiveState.startZoomPosition;i||(i=this._viewportProps.position);var r=this.getDirection();return this._move(r,Math.log2(e),i)}},{key:"zoomEnd",value:function(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}},{key:"moveLeft",value:function(){var t=this.getDirection(!0);return this._move(t.rotateZ({radians:Math.PI/2}))}},{key:"moveRight",value:function(){var t=this.getDirection(!0);return this._move(t.rotateZ({radians:-Math.PI/2}))}},{key:"moveUp",value:function(){var t=this.getDirection(!0);return this._move(t)}},{key:"moveDown",value:function(){var t=this.getDirection(!0);return this._move(t.negate())}},{key:"rotateLeft",value:function(){return this._getUpdatedState({bearing:this._viewportProps.bearing-15})}},{key:"rotateRight",value:function(){return this._getUpdatedState({bearing:this._viewportProps.bearing+15})}},{key:"rotateUp",value:function(){return this._getUpdatedState({pitch:this._viewportProps.pitch+10})}},{key:"rotateDown",value:function(){return this._getUpdatedState({pitch:this._viewportProps.pitch-10})}},{key:"zoomIn",value:function(){return this.zoom({scale:2})}},{key:"zoomOut",value:function(){return this.zoom({scale:.5})}},{key:"shortestPathFrom",value:function(t){var e=t.getViewportProps(),i=Object.assign({},this._viewportProps),r=i.bearing,n=i.longitude;return Math.abs(r-e.bearing)>180&&(i.bearing=r<0?r+360:r-360),Math.abs(n-e.longitude)>180&&(i.longitude=n<0?n+360:n-360),i}},{key:"_move",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._viewportProps.position,r=t.scale(e*p);return this._getUpdatedState({position:new s.Vector3(i).add(r)})}},{key:"_getUpdatedState",value:function(t){return new o(Object.assign({},this._viewportProps,this._interactiveState,t))}},{key:"_applyConstraints",value:function(t){var e=t.pitch,i=t.maxPitch,r=t.minPitch,n=t.longitude,o=t.bearing;return t.pitch=(0,s.clamp)(e,r,i),(n<-180||n>180)&&(t.longitude=(0,u.mod)(n+180,360)-180),(o<-180||o>180)&&(t.bearing=(0,u.mod)(o+180,360)-180),t}}]),o}(a.default),f=function(e){(0,i.default)(n,e);var r=h(n);function n(e){return(0,t.default)(this,n),r.call(this,d,e)}return n}(o.default);exports.default=f;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","./controller":"ugw5","./view-state":"TfDO","../utils/math-utils":"ki6G","math.gl":"xAaq"}],"EN53":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=c(require("@babel/runtime/helpers/esm/classCallCheck")),t=c(require("@babel/runtime/helpers/esm/createClass")),r=c(require("@babel/runtime/helpers/esm/inherits")),i=c(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),n=c(require("@babel/runtime/helpers/esm/getPrototypeOf")),o=c(require("./view")),u=c(require("../viewports/viewport")),l=require("@math.gl/web-mercator"),a=require("math.gl"),s=c(require("../controllers/first-person-controller"));function c(e){return e&&e.__esModule?e:{default:e}}function f(e){var t=p();return function(){var r,o=(0,n.default)(e);if(t){var u=(0,n.default)(this).constructor;r=Reflect.construct(o,arguments,u)}else r=o.apply(this,arguments);return(0,i.default)(this,r)}}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function d(e){var t=e.bearing,r=e.pitch;return new a._SphericalCoordinates({bearing:t,pitch:r}).toVector3().normalize()}var h=function(i){(0,r.default)(o,i);var n=f(o);function o(){return(0,e.default)(this,o),n.apply(this,arguments)}return(0,t.default)(o,[{key:"_getViewport",value:function(e){var t=e.modelMatrix,r=void 0===t?null:t,i=e.bearing,n=void 0===i?0:i,o=e.pitch,s=void 0===o?0:o,c=e.up,f=void 0===c?[0,0,1]:c,p=d({bearing:n,pitch:90+s}),h=r?r.transformDirection(p):p,m=(0,l.getMeterZoom)(e),v=Math.pow(2,m),b=(new a.Matrix4).lookAt({eye:[0,0,0],center:h,up:f}).scale(v);return new u.default(Object.assign({},e,{zoom:m,viewMatrix:b}))}},{key:"controller",get:function(){return this._getControllerProps({type:s.default})}}]),o}(o.default);exports.default=h,h.displayName="FirstPersonView";
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","./view":"k6Eh","../viewports/viewport":"HjGN","@math.gl/web-mercator":"PqV4","math.gl":"xAaq","../controllers/first-person-controller":"Egne"}],"o35a":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.OrbitState=void 0;var t=p(require("@babel/runtime/helpers/esm/classCallCheck")),e=p(require("@babel/runtime/helpers/esm/createClass")),r=p(require("@babel/runtime/helpers/esm/inherits")),o=p(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),a=p(require("@babel/runtime/helpers/esm/getPrototypeOf")),i=require("math.gl"),n=p(require("./controller")),s=p(require("./view-state")),u=p(require("../transitions/linear-interpolator")),l=require("./transition-manager"),c=require("../utils/math-utils");function p(t){return t&&t.__esModule?t:{default:t}}function m(t){var e=v();return function(){var r,i=(0,a.default)(t);if(e){var n=(0,a.default)(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return(0,o.default)(this,r)}}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}var h=50,f={orbitAxis:"Z",rotationX:0,rotationOrbit:0,zoom:0,target:[0,0,0],minRotationX:-90,maxRotationX:90,minZoom:-1/0,maxZoom:1/0},d={transitionDuration:300,transitionEasing:function(t){return t},transitionInterpolator:new u.default(["target","zoom","rotationX","rotationOrbit"]),transitionInterruption:l.TRANSITION_EVENTS.BREAK},g=function(t){return Math.pow(2,t)},_=function(o){(0,r.default)(n,o);var a=m(n);function n(e){var r,o=e.makeViewport,i=e.width,s=e.height,u=e.orbitAxis,l=void 0===u?f.orbitAxis:u,c=e.rotationX,p=void 0===c?f.rotationX:c,m=e.rotationOrbit,v=void 0===m?f.rotationOrbit:m,h=e.target,d=void 0===h?f.target:h,g=e.zoom,_=void 0===g?f.zoom:g,b=e.minRotationX,w=void 0===b?f.minRotationX:b,P=e.maxRotationX,O=void 0===P?f.maxRotationX:P,S=e.minZoom,y=void 0===S?f.minZoom:S,k=e.maxZoom,R=void 0===k?f.maxZoom:k,X=e.startPanPosition,Z=e.startTarget,x=e.startRotationX,T=e.startRotationOrbit,U=e.startZoomPosition,z=e.startZoom;return(0,t.default)(this,n),(r=a.call(this,{width:i,height:s,orbitAxis:l,rotationX:p,rotationOrbit:v,target:d,zoom:_,minRotationX:w,maxRotationX:O,minZoom:y,maxZoom:R}))._interactiveState={startPanPosition:X,startTarget:Z,startRotationX:x,startRotationOrbit:T,startZoomPosition:U,startZoom:z},r.makeViewport=o,r}return(0,e.default)(n,[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"getInteractiveState",value:function(){return this._interactiveState}},{key:"panStart",value:function(t){var e=t.pos,r=this._viewportProps.target;return this._getUpdatedState({startPanPosition:e,startTarget:r})}},{key:"pan",value:function(t){var e=t.pos,r=(t.startPos,this._interactiveState),o=r.startPanPosition,a=r.startTarget,n=new i.Vector2(e).subtract(o);return this._getUpdatedState({target:this._calculateNewTarget({startTarget:a,pixelOffset:n})})}},{key:"panEnd",value:function(){return this._getUpdatedState({startPanPosition:null,startTarget:null})}},{key:"rotateStart",value:function(t){t.pos;return this._getUpdatedState({startRotationX:this._viewportProps.rotationX,startRotationOrbit:this._viewportProps.rotationOrbit})}},{key:"rotate",value:function(t){var e=t.deltaScaleX,r=t.deltaScaleY,o=this._interactiveState,a=o.startRotationX,i=o.startRotationOrbit;return Number.isFinite(a)&&Number.isFinite(i)?((a<-90||a>90)&&(e*=-1),this._getUpdatedState({rotationX:a+180*r,rotationOrbit:i+180*e,isRotating:!0})):this}},{key:"rotateEnd",value:function(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}},{key:"shortestPathFrom",value:function(t){var e=t.getViewportProps(),r=Object.assign({},this._viewportProps),o=r.rotationOrbit;return Math.abs(o-e.rotationOrbit)>180&&(r.rotationOrbit=o<0?o+360:o-360),r}},{key:"zoomStart",value:function(t){var e=t.pos;return this._getUpdatedState({startZoomPosition:e,startTarget:this._viewportProps.target,startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function(t){var e=t.pos,r=t.startPos,o=t.scale,a=this._viewportProps,i=a.zoom,n=a.width,s=a.height,u=a.target,l=this._interactiveState,c=l.startZoom,p=l.startZoomPosition,m=l.startTarget;Number.isFinite(c)||(c=i,m=u,p=r||e);var v=this._calculateNewZoom({scale:o,startZoom:c}),h=g(c),f=g(v),d=(n/2-p[0])*(f/h-1),_=(s/2-p[1])*(f/h-1);return this._getUpdatedState({zoom:v,target:this._calculateNewTarget({startTarget:m,zoom:v,pixelOffset:[d,_]})})}},{key:"zoomEnd",value:function(){return this._getUpdatedState({startZoomPosition:null,startTarget:null,startZoom:null})}},{key:"zoomIn",value:function(){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:2})})}},{key:"zoomOut",value:function(){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:.5})})}},{key:"moveLeft",value:function(){var t=[-h,0];return this._getUpdatedState({target:this._calculateNewTarget({pixelOffset:t})})}},{key:"moveRight",value:function(){var t=[h,0];return this._getUpdatedState({target:this._calculateNewTarget({pixelOffset:t})})}},{key:"moveUp",value:function(){var t=[0,-h];return this._getUpdatedState({target:this._calculateNewTarget({pixelOffset:t})})}},{key:"moveDown",value:function(){var t=[0,h];return this._getUpdatedState({target:this._calculateNewTarget({pixelOffset:t})})}},{key:"rotateLeft",value:function(){return this._getUpdatedState({rotationOrbit:this._viewportProps.rotationOrbit-15})}},{key:"rotateRight",value:function(){return this._getUpdatedState({rotationOrbit:this._viewportProps.rotationOrbit+15})}},{key:"rotateUp",value:function(){return this._getUpdatedState({rotationX:this._viewportProps.rotationX-10})}},{key:"rotateDown",value:function(){return this._getUpdatedState({rotationX:this._viewportProps.rotationX+10})}},{key:"_calculateNewZoom",value:function(t){var e=t.scale,r=t.startZoom,o=this._viewportProps,a=o.maxZoom,n=o.minZoom;Number.isFinite(r)||(r=this._viewportProps.zoom);var s=r+Math.log2(e);return(0,i.clamp)(s,n,a)}},{key:"_calculateNewTarget",value:function(t){var e=t.startTarget,r=t.zoom,o=t.pixelOffset,a=Object.assign({},this._viewportProps);Number.isFinite(r)&&(a.zoom=r),e&&(a.target=e);var i=this.makeViewport(a),n=i.project(a.target);return i.unproject([n[0]-o[0],n[1]-o[1],n[2]])}},{key:"_getUpdatedState",value:function(t){return new n(Object.assign({},this._viewportProps,this._interactiveState,t))}},{key:"_applyConstraints",value:function(t){var e=t.maxZoom,r=t.minZoom,o=t.zoom,a=t.maxRotationX,n=t.minRotationX,s=t.rotationOrbit;return t.zoom=(0,i.clamp)(o,r,e),t.rotationX=(0,i.clamp)(t.rotationX,n,a),(s<-180||s>180)&&(t.rotationOrbit=(0,c.mod)(s+180,360)-180),t}}]),n}(s.default);exports.OrbitState=_;var b=function(o){(0,r.default)(i,o);var a=m(i);function i(e){return(0,t.default)(this,i),a.call(this,_,e)}return(0,e.default)(i,[{key:"_getTransitionProps",value:function(){return d}}]),i}(n.default);exports.default=b;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","math.gl":"xAaq","./controller":"ugw5","./view-state":"TfDO","../transitions/linear-interpolator":"bGRb","./transition-manager":"awSe","../utils/math-utils":"ki6G"}],"gGaz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=s(require("@babel/runtime/helpers/esm/createClass")),e=s(require("@babel/runtime/helpers/esm/classCallCheck")),r=s(require("@babel/runtime/helpers/esm/inherits")),o=s(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),i=s(require("@babel/runtime/helpers/esm/getPrototypeOf")),n=s(require("./view")),a=s(require("../viewports/viewport")),u=require("math.gl"),l=s(require("../controllers/orbit-controller"));function s(t){return t&&t.__esModule?t:{default:t}}function f(t){var e=c();return function(){var r,n=(0,i.default)(t);if(e){var a=(0,i.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,o.default)(this,r)}}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}var d=Math.PI/180;function h(t){var e=t.height,r=t.fovy,o=t.orbitAxis,i=t.rotationX,n=t.rotationOrbit,a=t.zoom,l=.5/Math.tan(r*d/2),s="Z"===o?[0,0,1]:[0,1,0],f="Z"===o?[0,-l,0]:[0,0,l],c=(new u.Matrix4).lookAt({eye:f,up:s});c.rotateX(i*d),"Z"===o?c.rotateZ(n*d):c.rotateY(n*d);var h=Math.pow(2,a)/(e||1);return c.scale(h),c}var v=function(t){(0,r.default)(i,t);var o=f(i);function i(t){(0,e.default)(this,i);var r=t.id,n=t.x,a=t.y,u=t.width,l=t.height,s=t.fovy,f=void 0===s?50:s,c=t.near,d=t.far,v=t.orbitAxis,p=void 0===v?"Z":v,b=t.target,y=void 0===b?[0,0,0]:b,m=t.rotationX,g=void 0===m?0:m,x=t.rotationOrbit,q=void 0===x?0:x,w=t.zoom,M=void 0===w?0:w;return o.call(this,{id:r,viewMatrix:h({height:l,fovy:f,orbitAxis:p,rotationX:g,rotationOrbit:q,zoom:M}),fovy:f,near:c,far:d,x:n,y:a,position:y,width:u,height:l,zoom:M})}return i}(a.default),p=function(o){(0,r.default)(n,o);var i=f(n);function n(t){return(0,e.default)(this,n),i.call(this,Object.assign({},t,{type:v}))}return(0,t.default)(n,[{key:"controller",get:function(){return this._getControllerProps({type:l.default})}}]),n}(n.default);exports.default=p,p.displayName="OrbitView";
},{"@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","./view":"k6Eh","../viewports/viewport":"HjGN","math.gl":"xAaq","../controllers/orbit-controller":"o35a"}],"osBw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("@babel/runtime/helpers/esm/classCallCheck")),t=s(require("@babel/runtime/helpers/esm/createClass")),r=s(require("@babel/runtime/helpers/esm/inherits")),n=s(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),u=s(require("@babel/runtime/helpers/esm/getPrototypeOf")),i=s(require("./controller")),o=require("./orbit-controller"),a=s(require("../transitions/linear-interpolator")),l=require("./transition-manager");function s(e){return e&&e.__esModule?e:{default:e}}function c(e){var t=f();return function(){var r,i=(0,u.default)(e);if(t){var o=(0,u.default)(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return(0,n.default)(this,r)}}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var p={transitionDuration:300,transitionEasing:function(e){return e},transitionInterpolator:new a.default(["target","zoom"]),transitionInterruption:l.TRANSITION_EVENTS.BREAK},d=function(n){(0,r.default)(i,n);var u=c(i);function i(t){var r;return(0,e.default)(this,i),(r=u.call(this,o.OrbitState,t)).invertPan=!0,r}return(0,t.default)(i,[{key:"_onPanRotate",value:function(e){return!1}},{key:"_getTransitionProps",value:function(){return p}}]),i}(i.default);exports.default=d;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","./controller":"ugw5","./orbit-controller":"o35a","../transitions/linear-interpolator":"bGRb","./transition-manager":"awSe"}],"d3vQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=f(require("@babel/runtime/helpers/esm/createClass")),t=f(require("@babel/runtime/helpers/esm/classCallCheck")),r=f(require("@babel/runtime/helpers/esm/inherits")),i=f(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),o=f(require("@babel/runtime/helpers/esm/getPrototypeOf")),n=f(require("./view")),u=f(require("../viewports/viewport")),a=require("math.gl"),l=f(require("../controllers/orthographic-controller"));function f(e){return e&&e.__esModule?e:{default:e}}function s(e){var t=c();return function(){var r,n=(0,o.default)(e);if(t){var u=(0,o.default)(this).constructor;r=Reflect.construct(n,arguments,u)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var h=(new a.Matrix4).lookAt({eye:[0,0,1]});function d(e){var t=e.width,r=e.height,i=e.near,o=e.far;return t=t||1,r=r||1,(new a.Matrix4).ortho({left:-t/2,right:t/2,bottom:r/2,top:-r/2,near:i,far:o})}var p=function(e){(0,r.default)(o,e);s(o);function o(e){var r=e.id,n=e.x,a=e.y,l=e.width,f=e.height,s=e.near,c=void 0===s?.1:s,p=e.far,v=void 0===p?1e3:p,m=e.zoom,y=void 0===m?0:m,b=e.target,g=void 0===b?[0,0,0]:b;(0,t.default)(this,o);var w=Math.pow(2,y);return(0,i.default)(void 0,new u.default({id:r,x:n,y:a,width:l,height:f,position:g,viewMatrix:h.clone().scale(w),projectionMatrix:d({width:l,height:f,near:c,far:v}),zoom:y}))}return o}(u.default),v=function(i){(0,r.default)(n,i);var o=s(n);function n(e){return(0,t.default)(this,n),o.call(this,Object.assign({},e,{type:p}))}return(0,e.default)(n,[{key:"controller",get:function(){return this._getControllerProps({type:l.default})}}]),n}(n.default);exports.default=v,v.displayName="OrthographicView";
},{"@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","./view":"k6Eh","../viewports/viewport":"HjGN","math.gl":"xAaq","../controllers/orthographic-controller":"osBw"}],"JDk6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=p(require("@babel/runtime/helpers/esm/get")),t=p(require("@babel/runtime/helpers/esm/classCallCheck")),r=p(require("@babel/runtime/helpers/esm/createClass")),n=p(require("@babel/runtime/helpers/esm/inherits")),u=p(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),i=p(require("@babel/runtime/helpers/esm/getPrototypeOf")),a=require("math.gl"),o=p(require("./controller")),l=require("./map-controller"),s=require("../utils/math-utils"),c=p(require("../transitions/linear-interpolator")),f=require("./transition-manager");function p(e){return e&&e.__esModule?e:{default:e}}function d(e){var t=m();return function(){var r,n=(0,i.default)(e);if(t){var a=(0,i.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,u.default)(this,r)}}function m(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var h={transitionDuration:300,transitionEasing:function(e){return e},transitionInterpolator:new c.default(["longitude","latitude","zoom"]),transitionInterruption:f.TRANSITION_EVENTS.BREAK},v=function(e){(0,n.default)(i,e);var u=d(i);function i(){return(0,t.default)(this,i),u.apply(this,arguments)}return(0,r.default)(i,[{key:"_applyConstraints",value:function(e){var t=e.maxZoom,r=e.minZoom,n=e.zoom;e.zoom=(0,a.clamp)(n,r,t);var u=e.longitude,i=e.latitude;return(u<-180||u>180)&&(e.longitude=(0,s.mod)(u+180,360)-180),e.latitude=(0,a.clamp)(i,-89,89),e}}]),i}(l.MapState),b=function(u){(0,n.default)(o,u);var a=d(o);function o(e){var r;return(0,t.default)(this,o),(r=a.call(this,v,e)).invertPan=!0,r}return(0,r.default)(o,[{key:"setProps",value:function(t){(0,e.default)((0,i.default)(o.prototype),"setProps",this).call(this,t),this.dragRotate=!1,this.touchRotate=!1}},{key:"_getTransitionProps",value:function(){return h}}]),o}(o.default);exports.default=b;
},{"@babel/runtime/helpers/esm/get":"KGqu","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","math.gl":"xAaq","./controller":"ugw5","./map-controller":"N44t","../utils/math-utils":"ki6G","../transitions/linear-interpolator":"bGRb","./transition-manager":"awSe"}],"WZeT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("@babel/runtime/helpers/esm/defineProperty")),t=s(require("@babel/runtime/helpers/esm/classCallCheck")),r=s(require("@babel/runtime/helpers/esm/createClass")),n=s(require("@babel/runtime/helpers/esm/inherits")),u=s(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),o=s(require("@babel/runtime/helpers/esm/getPrototypeOf")),l=s(require("./view")),i=s(require("../viewports/globe-viewport")),c=s(require("../controllers/globe-controller"));function s(e){return e&&e.__esModule?e:{default:e}}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function a(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?f(Object(n),!0).forEach(function(r){(0,e.default)(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function p(e){var t=b();return function(){var r,n=(0,o.default)(e);if(t){var l=(0,o.default)(this).constructor;r=Reflect.construct(n,arguments,l)}else r=n.apply(this,arguments);return(0,u.default)(this,r)}}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var y=function(e){(0,n.default)(o,e);var u=p(o);function o(e){return(0,t.default)(this,o),u.call(this,a(a({},e),{},{type:i.default}))}return(0,r.default)(o,[{key:"controller",get:function(){return this._getControllerProps({type:c.default})}}]),o}(l.default);exports.default=y,y.displayName="GlobeView";
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","./view":"k6Eh","../viewports/globe-viewport":"DUOV","../controllers/globe-controller":"JDk6"}],"T8B5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=l(require("@babel/runtime/helpers/esm/classCallCheck")),t=l(require("@babel/runtime/helpers/esm/createClass")),r=l(require("@babel/runtime/helpers/esm/inherits")),n=l(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),o=l(require("@babel/runtime/helpers/esm/getPrototypeOf")),i=l(require("./transition-interpolator")),u=require("math.gl"),a=require("@math.gl/web-mercator");function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=f(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,a=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return u=e.done,e},e:function(e){a=!0,i=e},f:function(){try{u||null==r.return||r.return()}finally{if(a)throw i}}}}function f(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function p(e){var t=d();return function(){var r,i=(0,o.default)(e);if(t){var u=(0,o.default)(this).constructor;r=Reflect.construct(i,arguments,u)}else r=i.apply(this,arguments);return(0,n.default)(this,r)}}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var h=["bearing","pitch"],y={speed:1.2,curve:1.414},m=function(n){(0,r.default)(i,n);var o=p(i);function i(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,e.default)(this,i),(t=o.call(this,{compare:["longitude","latitude","zoom","bearing","pitch"],extract:["width","height","longitude","latitude","zoom","bearing","pitch"],required:["width","height","latitude","longitude","zoom"]})).props=Object.assign({},y,r),t}return(0,t.default)(i,[{key:"interpolateProps",value:function(e,t,r){var n,o=(0,a.flyToViewport)(e,t,r,this.props),i=c(h);try{for(i.s();!(n=i.n()).done;){var l=n.value;o[l]=(0,u.lerp)(e[l]||0,t[l]||0,r)}}catch(f){i.e(f)}finally{i.f()}return o}},{key:"getDuration",value:function(e,t){var r=t.transitionDuration;return"auto"===r&&(r=(0,a.getFlyToDuration)(e,t,this.props)),r}}]),i}(i.default);exports.default=m;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","./transition-interpolator":"R8fo","math.gl":"xAaq","@math.gl/web-mercator":"PqV4"}],"yiMu":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("@babel/runtime/helpers/esm/classCallCheck")),t=o(require("@babel/runtime/helpers/esm/createClass")),r=require("./iterable-utils"),i=o(require("./typed-array-manager")),n=o(require("./assert")),a=require("@luma.gl/core");function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=u(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw a}}}}function u(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}var f=function(){function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,e.default)(this,o);var r=t.attributes,n=void 0===r?{}:r;this.typedArrayManager=i.default,this.indexStarts=null,this.vertexStarts=null,this.vertexCount=0,this.instanceCount=0,this.attributes={},this._attributeDefs=n,this.opts=t,this.updateGeometry(t),Object.seal(this)}return(0,t.default)(o,[{key:"updateGeometry",value:function(e){Object.assign(this.opts,e);var t=this.opts,r=t.data,i=t.buffers,a=void 0===i?{}:i,o=t.getGeometry,u=t.geometryBuffer,l=t.positionFormat,f=t.dataChanged,h=t.normalize,d=void 0===h||h;if(this.data=r,this.getGeometry=o,this.positionSize=u&&u.size||("XY"===l?2:3),this.buffers=a,this.normalize=d,u&&((0,n.default)(r.startIndices,"binary data missing startIndices"),this.getGeometry=this.getGeometryFromBuffer(u),d||(a.positions=u)),this.geometryBuffer=a.positions,Array.isArray(f)){var y,c=s(f);try{for(c.s();!(y=c.n()).done;){var m=y.value;this._rebuildGeometry(m)}}catch(v){c.e(v)}finally{c.f()}}else this._rebuildGeometry()}},{key:"updatePartialGeometry",value:function(e){var t=e.startRow,r=e.endRow;this._rebuildGeometry({startRow:t,endRow:r})}},{key:"normalizeGeometry",value:function(e){return e}},{key:"updateGeometryAttributes",value:function(e,t,r){throw new Error("Not implemented")}},{key:"getGeometrySize",value:function(e){throw new Error("Not implemented")}},{key:"getGeometryFromBuffer",value:function(e){var t=e.value||e;return(0,n.default)(ArrayBuffer.isView(t),"cannot read geometries"),(0,r.getAccessorFromBuffer)(t,{size:this.positionSize,offset:e.offset,stride:e.stride,startIndices:this.data.startIndices})}},{key:"_allocate",value:function(e,t){var r=this.attributes,i=this.buffers,n=this._attributeDefs,a=this.typedArrayManager;for(var o in n)if(o in i)a.release(r[o]),r[o]=null;else{var s=n[o];s.copy=t,r[o]=a.allocate(r[o],e,s)}}},{key:"_forEachGeometry",value:function(e,t,i){var n,a=this.data,o=this.getGeometry,u=(0,r.createIterable)(a,t,i),l=u.iterable,f=u.objectInfo,h=s(l);try{for(h.s();!(n=h.n()).done;){var d=n.value;f.index++,e(o(d,f),f.index)}}catch(y){h.e(y)}finally{h.f()}}},{key:"_rebuildGeometry",value:function(e){var t=this;if(this.data&&this.getGeometry){var r=this.indexStarts,i=this.vertexStarts,n=this.instanceCount,o=this.data,s=this.geometryBuffer,u=e||{},l=u.startRow,f=void 0===l?0:l,h=u.endRow,d=void 0===h?1/0:h,y={};if(e||(r=[0],i=[0]),this.normalize||!s)this._forEachGeometry(function(e,r){e=t.normalizeGeometry(e),y[r]=e,i[r+1]=i[r]+t.getGeometrySize(e)},f,d),n=i[i.length-1];else if(s.buffer instanceof a.Buffer){var c=s.stride||4*this.positionSize;i=o.startIndices,n=i[o.length]||s.buffer.byteLength/c}else{var m=s.value||s,v=s.stride/m.BYTES_PER_ELEMENT||this.positionSize;i=o.startIndices,n=i[o.length]||m.length/v}this._allocate(n,Boolean(e)),this.indexStarts=r,this.vertexStarts=i,this.instanceCount=n;var b={};this._forEachGeometry(function(e,a){e=y[a]||e,b.vertexStart=i[a],b.indexStart=r[a];var o=a<i.length-1?i[a+1]:n;b.geometrySize=o-i[a],b.geometryIndex=a,t.updateGeometryAttributes(e,b)},f,d),this.vertexCount=r[r.length-1]}}}]),o}();exports.default=f;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","./iterable-utils":"kai7","./typed-array-manager":"yeLJ","./assert":"Txat","@luma.gl/core":"iuAK"}],"vvxL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"picking",{enumerable:!0,get:function(){return e.picking}}),Object.defineProperty(exports,"project",{enumerable:!0,get:function(){return e.project}}),Object.defineProperty(exports,"project32",{enumerable:!0,get:function(){return e.project32}}),Object.defineProperty(exports,"gouraudLighting",{enumerable:!0,get:function(){return e.gouraudLighting}}),Object.defineProperty(exports,"phongLighting",{enumerable:!0,get:function(){return e.phongLighting}}),Object.defineProperty(exports,"shadow",{enumerable:!0,get:function(){return e.shadow}}),Object.defineProperty(exports,"COORDINATE_SYSTEM",{enumerable:!0,get:function(){return r.COORDINATE_SYSTEM}}),Object.defineProperty(exports,"LightingEffect",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"AmbientLight",{enumerable:!0,get:function(){return n.AmbientLight}}),Object.defineProperty(exports,"DirectionalLight",{enumerable:!0,get:function(){return i.DirectionalLight}}),Object.defineProperty(exports,"PointLight",{enumerable:!0,get:function(){return o.PointLight}}),Object.defineProperty(exports,"_CameraLight",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"_SunLight",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"PostProcessEffect",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"_LayersPass",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"Deck",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(exports,"LayerManager",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(exports,"AttributeManager",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(exports,"Layer",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(exports,"CompositeLayer",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(exports,"DeckRenderer",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(exports,"Viewport",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(exports,"WebMercatorViewport",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(exports,"_GlobeViewport",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(exports,"View",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(exports,"MapView",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(exports,"FirstPersonView",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(exports,"OrbitView",{enumerable:!0,get:function(){return q.default}}),Object.defineProperty(exports,"OrthographicView",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(exports,"_GlobeView",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(exports,"Controller",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(exports,"MapController",{enumerable:!0,get:function(){return L.default}}),Object.defineProperty(exports,"_GlobeController",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(exports,"FirstPersonController",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(exports,"OrbitController",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(exports,"OrthographicController",{enumerable:!0,get:function(){return I.default}}),Object.defineProperty(exports,"Effect",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(exports,"LayerExtension",{enumerable:!0,get:function(){return V.default}}),Object.defineProperty(exports,"TRANSITION_EVENTS",{enumerable:!0,get:function(){return C.TRANSITION_EVENTS}}),Object.defineProperty(exports,"TransitionInterpolator",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(exports,"LinearInterpolator",{enumerable:!0,get:function(){return M.default}}),Object.defineProperty(exports,"FlyToInterpolator",{enumerable:!0,get:function(){return N.default}}),Object.defineProperty(exports,"log",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(exports,"createIterable",{enumerable:!0,get:function(){return D.createIterable}}),Object.defineProperty(exports,"fp64LowPart",{enumerable:!0,get:function(){return R.fp64LowPart}}),Object.defineProperty(exports,"Tesselator",{enumerable:!0,get:function(){return F.default}}),Object.defineProperty(exports,"_fillArray",{enumerable:!0,get:function(){return G.fillArray}}),Object.defineProperty(exports,"_flatten",{enumerable:!0,get:function(){return G.flatten}}),Object.defineProperty(exports,"_count",{enumerable:!0,get:function(){return z.count}}),Object.defineProperty(exports,"_memoize",{enumerable:!0,get:function(){return Y.default}}),Object.defineProperty(exports,"_mergeShaders",{enumerable:!0,get:function(){return W.mergeShaders}}),Object.defineProperty(exports,"_compareProps",{enumerable:!0,get:function(){return B.compareProps}}),require("./lib/init");var e=require("./shaderlib"),r=require("./lib/constants"),t=H(require("./effects/lighting/lighting-effect")),n=require("./effects/lighting/ambient-light"),i=require("./effects/lighting/directional-light"),o=require("./effects/lighting/point-light"),u=H(require("./effects/lighting/camera-light")),l=H(require("./effects/lighting/sun-light")),f=H(require("./effects/post-process-effect")),a=H(require("./passes/layers-pass")),c=H(require("./lib/deck")),p=H(require("./lib/layer-manager")),s=H(require("./lib/attribute/attribute-manager")),b=H(require("./lib/layer")),g=H(require("./lib/composite-layer")),d=H(require("./lib/deck-renderer")),m=H(require("./viewports/viewport")),y=H(require("./viewports/web-mercator-viewport")),P=H(require("./viewports/globe-viewport")),O=H(require("./views/view")),j=H(require("./views/map-view")),x=H(require("./views/first-person-view")),q=H(require("./views/orbit-view")),h=H(require("./views/orthographic-view")),w=H(require("./views/globe-view")),v=H(require("./controllers/controller")),L=H(require("./controllers/map-controller")),_=H(require("./controllers/globe-controller")),T=H(require("./controllers/first-person-controller")),E=H(require("./controllers/orbit-controller")),I=H(require("./controllers/orthographic-controller")),S=H(require("./lib/effect")),V=H(require("./lib/layer-extension")),C=require("./controllers/transition-manager"),A=H(require("./transitions/transition-interpolator")),M=H(require("./transitions/linear-interpolator")),N=H(require("./transitions/viewport-fly-to-interpolator")),k=H(require("./utils/log")),D=require("./utils/iterable-utils"),R=require("./utils/math-utils"),F=H(require("./utils/tesselator")),G=require("./utils/flatten"),z=require("./utils/count"),Y=H(require("./utils/memoize")),W=require("./utils/shader"),B=require("./lifecycle/props");function H(e){return e&&e.__esModule?e:{default:e}}
},{"./lib/init":"N6pv","./shaderlib":"vZnx","./lib/constants":"ysbg","./effects/lighting/lighting-effect":"MByF","./effects/lighting/ambient-light":"kPtk","./effects/lighting/directional-light":"n3wt","./effects/lighting/point-light":"yBNR","./effects/lighting/camera-light":"xYso","./effects/lighting/sun-light":"hMy0","./effects/post-process-effect":"QgRQ","./passes/layers-pass":"oM9Q","./lib/deck":"ruUO","./lib/layer-manager":"m8xf","./lib/attribute/attribute-manager":"wT56","./lib/layer":"xVVm","./lib/composite-layer":"dK5R","./lib/deck-renderer":"J3c9","./viewports/viewport":"HjGN","./viewports/web-mercator-viewport":"Rf6Y","./viewports/globe-viewport":"DUOV","./views/view":"k6Eh","./views/map-view":"wDMu","./views/first-person-view":"EN53","./views/orbit-view":"gGaz","./views/orthographic-view":"d3vQ","./views/globe-view":"WZeT","./controllers/controller":"ugw5","./controllers/map-controller":"N44t","./controllers/globe-controller":"JDk6","./controllers/first-person-controller":"Egne","./controllers/orbit-controller":"o35a","./controllers/orthographic-controller":"osBw","./lib/effect":"Z10T","./lib/layer-extension":"TXTo","./controllers/transition-manager":"awSe","./transitions/transition-interpolator":"R8fo","./transitions/linear-interpolator":"bGRb","./transitions/viewport-fly-to-interpolator":"T8B5","./utils/log":"GVus","./utils/iterable-utils":"kai7","./utils/math-utils":"ki6G","./utils/tesselator":"yiMu","./utils/flatten":"gSVO","./utils/count":"nzk4","./utils/memoize":"uXG5","./utils/shader":"NycH","./lifecycle/props":"UiIs"}],"xtR9":[function(require,module,exports) {
"use strict";function e(e,t){for(;e;){if(e===t)return!0;e=Object.getPrototypeOf(e)}return!1}Object.defineProperty(exports,"__esModule",{value:!0}),exports.inheritsFrom=e;
},{}],"pq1l":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=f;var e=u(require("@babel/runtime/helpers/esm/toConsumableArray")),r=o(require("react")),t=require("./inherits-from"),n=require("@deck.gl/core");function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var u=n?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(t,o,u):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}function u(e){return e&&e.__esModule?e:{default:e}}function a(e){return e?"function"==typeof e?(0,r.createElement)(n.View,{},e):Array.isArray(e)?e.map(a):e.type===r.default.Fragment?a(e.props.children):((0,t.inheritsFrom)(e.type,n.View),e):e}function f(i){var o=i.children,u=i.layers,f=i.views,s=[],l=[],p={};return r.default.Children.forEach(a(o),function(e){if(e){var r=e.type;if((0,t.inheritsFrom)(r,n.Layer)){var i=c(r,e.props);l.push(i)}else s.push(e);if(r!==n.View&&(0,t.inheritsFrom)(r,n.View)&&e.props.id){var o=new r(e.props);p[o.id]=o}}}),Object.keys(p).length>0&&(Array.isArray(f)?f.forEach(function(e){p[e.id]=e}):f&&(p[f.id]=f),f=Object.values(p)),{layers:u=l.length>0?[].concat(l,(0,e.default)(u)):u,children:s,views:f}}function c(e,r){var t={},n=e.defaultProps||{};for(var i in r)n[i]!==r[i]&&(t[i]=r[i]);return new e(t)}
},{"@babel/runtime/helpers/esm/toConsumableArray":"AdMH","react":"HdMw","./inherits-from":"xtR9","@deck.gl/core":"vvxL"}],"fBIr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=require("react"),t={position:"absolute",zIndex:-1};function r(u,a){return u?"function"==typeof u?u(a):Array.isArray(u)?u.map(function(e){return r(e,a)}):n(u)?(a.style=t,(0,e.cloneElement)(u,a)):o(u)?(0,e.cloneElement)(u,a):u:u}function n(e){var t=e&&e.type,r=t&&t.defaultProps;return r&&r.mapStyle}function o(e){var t=e&&e.type;return t&&t.deckGLViewProps}
},{"react":"HdMw"}],"M3cF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=c;var e=o(require("@babel/runtime/helpers/esm/toConsumableArray")),t=require("react"),r=require("@deck.gl/core"),n=require("./inherits-from"),i=o(require("./evaluate-children"));function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=u(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw o}}}}function u(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c(o){var u=o.children,l=(o.viewports,o.deck),c=o.ContextProvider,f=(l||{}).viewManager;if(!f||!f.views.length)return[];var v,d={},s=f.views[0].id,h=a(u);try{for(h.s();!(v=h.n()).done;){var p=v.value,y=s,w=p;(0,n.inheritsFrom)(p.type,r.View)&&(y=p.props.id||s,w=p.props.children);var g=f.getViewport(y),m=f.getViewState(y);if(g){var b=g.x,S=g.y,x=g.width,A=g.height;w=(0,i.default)(w,{x:b,y:S,width:x,height:A,viewport:g,viewState:m}),d[y]||(d[y]={viewport:g,children:[]}),d[y].children.push(w)}}}catch(M){h.e(M)}finally{h.f()}return Object.keys(d).map(function(r){var n=d[r],i=n.viewport,o=n.children,a={position:"absolute",left:i.x,top:i.y,width:i.width,height:i.height},u="view-".concat(r),f=t.createElement.apply(void 0,["div",{key:u,id:u,style:a}].concat((0,e.default)(o)));if(c){var v={viewport:i,container:l.canvas.offsetParent,eventManager:l.eventManager,onViewStateChange:function(e){e.viewId=r,l._onViewStateChange(e)}};return(0,t.createElement)(c,{key:u,value:v},f)}return f})}
},{"@babel/runtime/helpers/esm/toConsumableArray":"AdMH","react":"HdMw","@deck.gl/core":"vvxL","./inherits-from":"xtR9","./evaluate-children":"fBIr"}],"FOiK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e={mixBlendMode:null};function t(t){var i=t.width,n=t.height,o=t.style,l={position:"absolute",zIndex:0,left:0,top:0,width:i,height:n},r={left:0,top:0};if(o)for(var a in o)a in e?r[a]=o[a]:l[a]=o[a];return{containerStyle:l,canvasStyle:r}}
},{}],"IXBA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=f(require("@babel/runtime/helpers/esm/classCallCheck")),t=f(require("@babel/runtime/helpers/esm/createClass")),r=f(require("@babel/runtime/helpers/esm/assertThisInitialized")),i=f(require("@babel/runtime/helpers/esm/inherits")),n=f(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),s=f(require("@babel/runtime/helpers/esm/getPrototypeOf")),c=h(require("react")),a=f(require("prop-types")),u=require("@deck.gl/core"),l=f(require("./utils/extract-jsx-layers")),o=f(require("./utils/position-children-under-views")),d=f(require("./utils/extract-styles"));function p(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function h(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=p();if(t&&t.has(e))return t.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var s=i?Object.getOwnPropertyDescriptor(e,n):null;s&&(s.get||s.set)?Object.defineProperty(r,n,s):r[n]=e[n]}return r.default=e,t&&t.set(e,r),r}function f(e){return e&&e.__esModule?e:{default:e}}function v(e){var t=y();return function(){var r,i=(0,s.default)(e);if(t){var c=(0,s.default)(this).constructor;r=Reflect.construct(i,arguments,c)}else r=i.apply(this,arguments);return(0,n.default)(this,r)}}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var k=u.Deck.getPropTypes(a.default),_=u.Deck.defaultProps,b=function(n){(0,i.default)(a,n);var s=v(a);function a(t){var i;return(0,e.default)(this,a),(i=s.call(this,t)).viewports=null,i.children=null,i._needsRedraw=null,i._containerRef=c.default.createRef(),i._canvasRef=c.default.createRef(),i.pickObject=i.pickObject.bind((0,r.default)(i)),i.pickMultipleObjects=i.pickMultipleObjects.bind((0,r.default)(i)),i.pickObjects=i.pickObjects.bind((0,r.default)(i)),i._extractJSXLayers=(0,u._memoize)(l.default),i._positionChildrenUnderViews=(0,u._memoize)(o.default),i._extractStyles=(0,u._memoize)(d.default),i}return(0,t.default)(a,[{key:"componentDidMount",value:function(){var e=this.props.Deck||u.Deck;this.deck=this.deck||new e(Object.assign({},this.props,{parent:this._containerRef.current,canvas:this._canvasRef.current,style:null,width:"100%",height:"100%",_customRender:this._customRender.bind(this)})),this._updateFromProps(this.props)}},{key:"shouldComponentUpdate",value:function(e){this._updateFromProps(e);var t=this.children!==this._parseJSX(e).children,r=this.deck.viewManager&&this.deck.viewManager.needsRedraw();return t&&!r}},{key:"componentDidUpdate",value:function(){this._redrawDeck()}},{key:"componentWillUnmount",value:function(){this.deck.finalize()}},{key:"pickObject",value:function(e){return this.deck.pickObject(e)}},{key:"pickMultipleObjects",value:function(e){return this.deck.pickMultipleObjects(e)}},{key:"pickObjects",value:function(e){return this.deck.pickObjects(e)}},{key:"_redrawDeck",value:function(){this._needsRedraw&&(this.deck._drawLayers(this._needsRedraw),this._needsRedraw=null)}},{key:"_customRender",value:function(e){this._needsRedraw=e,this.deck.viewManager.getViewports()!==this.viewports?this.forceUpdate():this._redrawDeck()}},{key:"_parseJSX",value:function(e){return this._extractJSXLayers({layers:e.layers,views:e.views,children:e.children})}},{key:"_updateFromProps",value:function(e){var t=this._parseJSX(e),r=t.layers,i=t.views,n=Object.assign({},e,{style:null,width:"100%",height:"100%",layers:r,views:i});this.deck.setProps(n)}},{key:"render",value:function(){var e=this.props,t=e.ContextProvider,r=e.width,i=e.height,n=e.style,s=(this.deck||{}).viewManager;this.viewports=s&&s.getViewports(),this.children=this._parseJSX(this.props).children;var a=this._positionChildrenUnderViews({children:this.children,viewports:this.viewports,deck:this.deck,ContextProvider:t}),u=this._extractStyles({width:r,height:i,style:n}),l=u.containerStyle,o=u.canvasStyle,d=(0,c.createElement)("canvas",{key:"canvas",ref:this._canvasRef,style:o});return(0,c.createElement)("div",{id:"deckgl-wrapper",ref:this._containerRef,style:l},[d,a])}}]),a}(c.default.Component);exports.default=b,b.propTypes=k,b.defaultProps=_;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/assertThisInitialized":"Rs9H","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","react":"HdMw","prop-types":"Iix9","@deck.gl/core":"vvxL","./utils/extract-jsx-layers":"pq1l","./utils/position-children-under-views":"M3cF","./utils/extract-styles":"FOiK"}],"e2Xp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"DeckGL",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"default",{enumerable:!0,get:function(){return e.default}});var e=t(require("./deckgl"));function t(e){return e&&e.__esModule?e:{default:e}}
},{"./deckgl":"IXBA"}],"PAJD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WGS84_CONSTANTS=exports.WGS84_RADIUS_Z=exports.WGS84_RADIUS_Y=exports.WGS84_RADIUS_X=void 0;var e=6378137;exports.WGS84_RADIUS_X=e;var r=6378137;exports.WGS84_RADIUS_Y=r;var S=6356752.314245179;exports.WGS84_RADIUS_Z=S;var a={radii:[e,r,S],radiiSquared:[e*e,r*r,S*S],oneOverRadii:[1/e,1/r,1/S],oneOverRadiiSquared:[1/(e*e),1/(r*r),1/(S*S)],maximumRadius:Math.max(e,r,S),centerToleranceSquared:.1};exports.WGS84_CONSTANTS=a;
},{}],"MxQ2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fromCartographic=i,exports.fromCartographicToRadians=n,exports.fromCartographicToDegrees=a,exports.toCartographic=c,exports.toCartographicFromRadians=u,exports.toCartographicFromDegrees=g,exports.isWGS84=s;var r=require("@math.gl/core"),t=require("./constants"),e=function(r){return r},o=new r.Vector3;function i(t,o){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return(0,r.isArray)(t)?(o[0]=i(t[0]),o[1]=i(t[1]),o[2]=t[2]):"longitude"in t?(o[0]=i(t.longitude),o[1]=i(t.latitude),o[2]=t.height):(o[0]=i(t.x),o[1]=i(t.y),o[2]=t.z),o}function n(t){return i(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,r.config._cartographicRadians?e:r.toRadians)}function a(t){return i(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,r.config._cartographicRadians?r.toDegrees:e)}function c(t,o){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return(0,r.isArray)(o)?(o[0]=i(t[0]),o[1]=i(t[1]),o[2]=t[2]):"longitude"in o?(o.longitude=i(t[0]),o.latitude=i(t[1]),o.height=t[2]):(o.x=i(t[0]),o.y=i(t[1]),o.z=t[2]),o}function u(t,o){return c(t,o,r.config._cartographicRadians?e:r.toDegrees)}function g(t,o){return c(t,o,r.config._cartographicRadians?r.toRadians:e)}function s(r){if(!r)return!1;o.from(r);var e=t.WGS84_CONSTANTS.oneOverRadiiSquared,i=t.WGS84_CONSTANTS.centerToleranceSquared,n=r[0]*r[0]*e[0],a=r[1]*r[1]*e[1],c=r[2]*r[2]*e[2];return Math.abs(n+a+c-1)<i}
},{"@math.gl/core":"dwLx","./constants":"PAJD"}],"gchs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=require("@math.gl/core"),r=n(require("gl-matrix/vec3"));function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function n(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t();if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}var o=new e.Vector3,a=new e.Vector3,i=new e.Vector3;function u(r,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new e.Vector3,u=t.oneOverRadii,c=t.oneOverRadiiSquared,f=t.centerToleranceSquared;o.from(r);var l=r.x,s=r.y,p=r.z,v=u.x,y=u.y,d=u.z,O=l*l*v*v,b=s*s*y*y,w=p*p*d*d,h=O+b+w,g=Math.sqrt(1/h);if(Number.isFinite(g)){var j=a;if(j.copy(r).scale(g),h<f)return j.to(n);var x=c.x,M=c.y,P=c.z,q=i;q.set(j.x*x*2,j.y*M*2,j.z*P*2);var _,m,z,V,S=(1-g)*r.len()/(.5*q.len()),k=0;do{var D=(_=1/(1+(S-=k)*x))*_,N=(m=1/(1+S*M))*m,R=(z=1/(1+S*P))*z;k=(V=O*D+b*N+w*R-1)/(-2*(O*(D*_)*x+b*(N*m)*M+w*(R*z)*P))}while(Math.abs(V)>e._MathUtils.EPSILON12);return o.scale([_,m,z]).to(n)}}
},{"@math.gl/core":"dwLx","gl-matrix/vec3":"AWBd"}],"rRzb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=c;var e=require("@math.gl/core"),t=1e-14,o=new e.Vector3,s={up:{south:"east",north:"west",west:"south",east:"north"},down:{south:"west",north:"east",west:"north",east:"south"},south:{up:"west",down:"east",west:"down",east:"up"},north:{up:"east",down:"west",west:"up",east:"down"},west:{up:"north",down:"south",north:"down",south:"up"},east:{up:"south",down:"north",north:"up",south:"down"}},r={north:[-1,0,0],east:[0,1,0],up:[0,0,1],south:[1,0,0],west:[0,-1,0],down:[0,0,-1]},a={east:new e.Vector3,north:new e.Vector3,up:new e.Vector3,west:new e.Vector3,south:new e.Vector3,down:new e.Vector3},n=new e.Vector3,w=new e.Vector3,u=new e.Vector3;function c(c,h,p,d,l,y){var V,f,i,x=s[h]&&s[h][p];(0,e.assert)(x&&(!d||d===x));var v=o.copy(l);if((0,e.equals)(v.x,0,t)&&(0,e.equals)(v.y,0,t)){var m=Math.sign(v.z);V=n.fromArray(r[h]),"east"!==h&&"west"!==h&&V.scale(m),f=w.fromArray(r[p]),"east"!==p&&"west"!==p&&f.scale(m),i=u.fromArray(r[d]),"east"!==d&&"west"!==d&&i.scale(m)}else{var z=a.up,g=a.east,q=a.north;g.set(-v.y,v.x,0).normalize(),c.geodeticSurfaceNormal(v,z),q.copy(z).cross(g);var A=a.down,M=a.west,_=a.south;A.copy(z).scale(-1),M.copy(g).scale(-1),_.copy(q).scale(-1),V=a[h],f=a[p],i=a[d]}return y[0]=V.x,y[1]=V.y,y[2]=V.z,y[3]=0,y[4]=f.x,y[5]=f.y,y[6]=f.z,y[7]=0,y[8]=i.x,y[9]=i.y,y[10]=i.z,y[11]=0,y[12]=v.x,y[13]=v.y,y[14]=v.z,y[15]=1,y}
},{"@math.gl/core":"dwLx"}],"cwgR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=d(require("@babel/runtime/helpers/esm/slicedToArray")),r=d(require("@babel/runtime/helpers/esm/classCallCheck")),t=d(require("@babel/runtime/helpers/esm/createClass")),a=require("@math.gl/core"),i=c(require("gl-matrix/vec3")),o=require("../constants"),n=require("../type-utils"),u=d(require("./helpers/scale-to-geodetic-surface")),s=d(require("./helpers/ellipsoid-transform"));function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function c(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=l();if(r&&r.has(e))return r.get(e);var t={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(t,i,o):t[i]=e[i]}return t.default=e,r&&r.set(e,t),t}function d(e){return e&&e.__esModule?e:{default:e}}var h,f=new a.Vector3,v=new a.Vector3,m=new a.Vector3,g=new a.Vector3,p=new a.Vector3,S=new a.Vector3,y=function(){function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;(0,r.default)(this,l),(0,a.assert)(e>=0),(0,a.assert)(t>=0),(0,a.assert)(i>=0),this.radii=new a.Vector3(e,t,i),this.radiiSquared=new a.Vector3(e*e,t*t,i*i),this.radiiToTheFourth=new a.Vector3(e*e*e*e,t*t*t*t,i*i*i*i),this.oneOverRadii=new a.Vector3(0===e?0:1/e,0===t?0:1/t,0===i?0:1/i),this.oneOverRadiiSquared=new a.Vector3(0===e?0:1/(e*e),0===t?0:1/(t*t),0===i?0:1/(i*i)),this.minimumRadius=Math.min(e,t,i),this.maximumRadius=Math.max(e,t,i),this.centerToleranceSquared=a._MathUtils.EPSILON1,0!==this.radiiSquared.z&&(this.squaredXOverSquaredZ=this.radiiSquared.x/this.radiiSquared.z),Object.freeze(this)}return(0,t.default)(l,null,[{key:"WGS84",get:function(){return h=h||new l(o.WGS84_RADIUS_X,o.WGS84_RADIUS_Y,o.WGS84_RADIUS_Z)}}]),(0,t.default)(l,[{key:"equals",value:function(e){return this===e||Boolean(e&&this.radii.equals(e.radii))}},{key:"toString",value:function(){return this.radii.toString()}},{key:"cartographicToCartesian",value:function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],a=v,i=m,o=(0,e.default)(r,3)[2];this.geodeticSurfaceNormalCartographic(r,a),i.copy(this.radiiSquared).scale(a);var n=Math.sqrt(a.dot(i));return i.scale(1/n),a.scale(o),i.add(a),i.to(t)}},{key:"cartesianToCartographic",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];S.from(e);var t=this.scaleToGeodeticSurface(S,g);if(t){var a=this.geodeticSurfaceNormal(t,v),o=p;o.copy(S).subtract(t);var u=Math.atan2(a.y,a.x),s=Math.asin(a.z),l=Math.sign(i.dot(o,S))*i.length(o);return(0,n.toCartographicFromRadians)([u,s,l],r)}}},{key:"eastNorthUpToFixedFrame",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new a.Matrix4;return(0,s.default)(this,"east","north","up",e,r)}},{key:"localFrameToFixedFrame",value:function(e,r,t,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new a.Matrix4;return(0,s.default)(this,e,r,t,i,o)}},{key:"geocentricSurfaceNormal",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return f.from(e).normalize().to(r)}},{key:"geodeticSurfaceNormalCartographic",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],t=(0,n.fromCartographicToRadians)(e),a=t[0],i=t[1],o=Math.cos(i);return f.set(o*Math.cos(a),o*Math.sin(a),Math.sin(i)).normalize(),f.to(r)}},{key:"geodeticSurfaceNormal",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return f.from(e).scale(this.oneOverRadiiSquared).normalize().to(r)}},{key:"scaleToGeodeticSurface",value:function(e,r){return(0,u.default)(e,this,r)}},{key:"scaleToGeocentricSurface",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];g.from(e);var t=g.x,a=g.y,i=g.z,o=this.oneOverRadiiSquared,n=1/Math.sqrt(t*t*o.x+a*a*o.y+i*i*o.z);return g.multiplyScalar(n).to(r)}},{key:"transformPositionToScaledSpace",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return g.from(e).scale(this.oneOverRadii).to(r)}},{key:"transformPositionFromScaledSpace",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return g.from(e).scale(this.radii).to(r)}},{key:"getSurfaceNormalIntersectionWithZAxis",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0,0];(0,a.assert)((0,a.equals)(this.radii.x,this.radii.y,a._MathUtils.EPSILON15)),(0,a.assert)(this.radii.z>0),g.from(e);var i=g.z*(1-this.squaredXOverSquaredZ);if(!(Math.abs(i)>=this.radii.z-r))return g.set(0,0,i).to(t)}}]),l}();exports.default=y;
},{"@babel/runtime/helpers/esm/slicedToArray":"TBeo","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@math.gl/core":"dwLx","gl-matrix/vec3":"AWBd","../constants":"PAJD","../type-utils":"MxQ2","./helpers/scale-to-geodetic-surface":"gchs","./helpers/ellipsoid-transform":"rRzb"}],"pfW5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Ellipsoid",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"isWGS84",{enumerable:!0,get:function(){return r.isWGS84}});var e=t(require("./ellipsoid/ellipsoid")),r=require("./type-utils");function t(e){return e&&e.__esModule?e:{default:e}}
},{"./ellipsoid/ellipsoid":"cwgR","./type-utils":"MxQ2"}],"ayJd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("@babel/runtime/helpers/esm/classCallCheck"));function t(e){return e&&e.__esModule?e:{default:e}}var s=function t(s,r,u){(0,e.default)(this,t),this.item=s,this.previous=r,this.next=u};exports.default=s;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP"}],"RHGB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=l(require("@babel/runtime/helpers/esm/classCallCheck")),t=l(require("@babel/runtime/helpers/esm/createClass")),i=l(require("../utils/doubly-linked-list-node"));function l(e){return e&&e.__esModule?e:{default:e}}var n=function(){function l(){(0,e.default)(this,l),this.head=null,this.tail=null,this._length=0}return(0,t.default)(l,[{key:"add",value:function(e){var t=new i.default(e,this.tail,null);return this.tail?(this.tail.next=t,this.tail=t):(this.head=t,this.tail=t),++this._length,t}},{key:"remove",value:function(e){e&&(e.previous&&e.next?(e.previous.next=e.next,e.next.previous=e.previous):e.previous?(e.previous.next=null,this.tail=e.previous):e.next?(e.next.previous=null,this.head=e.next):(this.head=null,this.tail=null),e.next=null,e.previous=null,--this._length)}},{key:"splice",value:function(e,t){e!==t&&(this.remove(t),this._insert(e,t))}},{key:"_insert",value:function(e,t){var i=e.next;e.next=t,this.tail===e?this.tail=t:i.previous=t,t.next=i,t.previous=e,++this._length}},{key:"length",get:function(){return this._length}}]),l}();exports.default=n;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","../utils/doubly-linked-list-node":"ayJd"}],"AWwT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("@babel/runtime/helpers/esm/classCallCheck")),t=s(require("@babel/runtime/helpers/esm/createClass")),i=s(require("../utils/doubly-linked-list"));function s(e){return e&&e.__esModule?e:{default:e}}function l(e){return null!=e}var n=function(){function s(){(0,e.default)(this,s),this._list=new i.default,this._sentinel=this._list.add("sentinel"),this._trimTiles=!1}return(0,t.default)(s,[{key:"reset",value:function(){this._list.splice(this._list.tail,this._sentinel)}},{key:"touch",value:function(e){var t=e._cacheNode;l(t)&&this._list.splice(this._sentinel,t)}},{key:"add",value:function(e,t,i){l(t._cacheNode)||(t._cacheNode=this._list.add(t),i&&i(e,t))}},{key:"unloadTile",value:function(e,t,i){var s=t._cacheNode;l(s)&&(this._list.remove(s),t._cacheNode=void 0,i&&i(e,t))}},{key:"unloadTiles",value:function(e,t){var i=this._trimTiles;this._trimTiles=!1;for(var s=this._list,l=1024*e.maximumMemoryUsage*1024,n=this._sentinel,u=s.head;u!==n&&(e.gpuMemoryUsageInBytes>l||i);){var a=u.item;u=u.next,this.unloadTile(e,a,t)}}},{key:"trim",value:function(){this._trimTiles=!0}}]),s}();exports.default=n;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","../utils/doubly-linked-list":"RHGB"}],"cw8A":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.calculateTransformProps=t;var e=require("@math.gl/geospatial"),r=require("@math.gl/core"),a=require("@loaders.gl/loader-utils");function t(t,i){(0,a.assert)(t),(0,a.assert)(i);var o=i.rtcCenter,l=i.gltfUpAxis,s=t.computedTransform,c=t.boundingVolume.center,n=new r.Matrix4(s);switch(o&&n.translate(o),l){case"Z":break;case"Y":var u=(new r.Matrix4).rotateX(Math.PI/2);n=n.multiplyRight(u);break;case"X":var p=(new r.Matrix4).rotateY(-Math.PI/2);n=n.multiplyRight(p)}i.isQuantized&&n.translate(i.quantizedVolumeOffset).scale(i.quantizedVolumeScale);var d=new r.Vector3(c);i.cartesianModelMatrix=n,i.cartesianOrigin=d;var g=e.Ellipsoid.WGS84.cartesianToCartographic(d,new r.Vector3),h=e.Ellipsoid.WGS84.eastNorthUpToFixedFrame(d).invert();i.cartographicModelMatrix=h.multiplyRight(n),i.cartographicOrigin=g,i.modelMatrix=i.cartographicModelMatrix}
},{"@math.gl/geospatial":"pfW5","@math.gl/core":"dwLx","@loaders.gl/loader-utils":"oHIH"}],"c23T":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.INTERSECTION=void 0;var e=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1});exports.INTERSECTION=e;
},{}],"TILG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("@babel/runtime/helpers/esm/classCallCheck")),t=r(require("@babel/runtime/helpers/esm/createClass")),a=require("@math.gl/core"),n=require("../constants");function r(e){return e&&e.__esModule?e:{default:e}}var i=new a.Vector3,s=new a.Vector3,u=function(){function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(0,e.default)(this,r),s=s||i.copy(t).add(n).scale(.5),this.center=new a.Vector3(s),this.halfDiagonal=new a.Vector3(n).subtract(this.center),this.minimum=new a.Vector3(t),this.maximum=new a.Vector3(n)}return(0,t.default)(r,[{key:"clone",value:function(){return new r(this.minimum,this.maximum,this.center)}},{key:"equals",value:function(e){return this===e||Boolean(e)&&this.minimum.equals(e.minimum)&&this.maximum.equals(e.maximum)}},{key:"intersectPlane",value:function(e){var t=this.halfDiagonal,a=s.from(e.normal),r=t.x*Math.abs(a.x)+t.y*Math.abs(a.y)+t.z*Math.abs(a.z),i=this.center.dot(a)+e.distance;return i-r>0?n.INTERSECTION.INSIDE:i+r<0?n.INTERSECTION.OUTSIDE:n.INTERSECTION.INTERSECTING}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceSquaredTo(e))}},{key:"distanceSquaredTo",value:function(e){var t,a=i.from(e).subtract(this.center),n=this.halfDiagonal,r=0;return(t=Math.abs(a.x)-n.x)>0&&(r+=t*t),(t=Math.abs(a.y)-n.y)>0&&(r+=t*t),(t=Math.abs(a.z)-n.z)>0&&(r+=t*t),r}}]),r}();exports.default=u;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@math.gl/core":"dwLx","../constants":"c23T"}],"kU0s":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("@babel/runtime/helpers/esm/classCallCheck")),t=s(require("@babel/runtime/helpers/esm/createClass")),r=require("@math.gl/core"),n=a(require("gl-matrix/mat4")),i=require("../constants");function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function a(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=n?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}function s(e){return e&&e.__esModule?e:{default:e}}var o=new r.Vector3,c=new r.Vector3,l=function(){function u(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,e.default)(this,u),this.radius=-0,this.center=new r.Vector3,this.fromCenterRadius(t,n)}return(0,t.default)(u,[{key:"fromCenterRadius",value:function(e,t){return this.center.from(e),this.radius=t,this}},{key:"fromCornerPoints",value:function(e,t){return t=o.from(t),this.center=(new r.Vector3).from(e).add(t).scale(.5),this.radius=this.center.distance(t),this}},{key:"equals",value:function(e){return this===e||Boolean(e)&&this.center.equals(e.center)&&this.radius===e.radius}},{key:"clone",value:function(){return new u(this.center,this.radius)}},{key:"union",value:function(e){var t=this.center,r=this.radius,n=e.center,i=e.radius,u=o.copy(n).subtract(t),a=u.magnitude();if(r>=a+i)return this.clone();if(i>=a+r)return e.clone();var s=.5*(r+a+i);return c.copy(u).scale((-r+s)/a).add(t),this.center.copy(c),this.radius=s,this}},{key:"expand",value:function(e){var t=(e=o.from(e)).subtract(this.center).magnitude();return t>this.radius&&(this.radius=t),this}},{key:"intersectPlane",value:function(e){var t=this.center,r=this.radius,n=e.normal.dot(t)+e.distance;return n<-r?i.INTERSECTION.OUTSIDE:n<r?i.INTERSECTION.INTERSECTING:i.INTERSECTION.INSIDE}},{key:"transform",value:function(e){this.center.transform(e);var t=n.getScaling(o,e);return this.radius=Math.max(t[0],Math.max(t[1],t[2]))*this.radius,this}},{key:"distanceSquaredTo",value:function(e){return(e=o.from(e)).subtract(this.center).lengthSquared()-this.radius*this.radius}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceSquaredTo(e))}}]),u}();exports.default=l;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@math.gl/core":"dwLx","gl-matrix/mat4":"w3aR","../constants":"c23T"}],"m37r":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("@babel/runtime/helpers/esm/toConsumableArray")),t=u(require("@babel/runtime/helpers/esm/classCallCheck")),a=u(require("@babel/runtime/helpers/esm/createClass")),n=require("@math.gl/core"),r=u(require("./bounding-sphere")),o=require("../constants");function u(e){return e&&e.__esModule?e:{default:e}}var s=new n.Vector3,c=new n.Vector3,i=new n.Vector3,l=new n.Vector3,h=new n.Vector3,d=new n.Vector3,m=new n.Vector3,f=new n.Vector3,M=new n.Vector3,C=new n.Vector3,O={COLUMN0ROW0:0,COLUMN0ROW1:1,COLUMN0ROW2:2,COLUMN1ROW0:3,COLUMN1ROW1:4,COLUMN1ROW2:5,COLUMN2ROW0:6,COLUMN2ROW1:7,COLUMN2ROW2:8},b=function(){function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0,0,0,0,0,0,0];(0,t.default)(this,u),this.center=(new n.Vector3).from(e),this.halfAxes=new n.Matrix3(a)}return(0,a.default)(u,[{key:"fromCenterHalfSizeQuaternion",value:function(e,t,a){var r=new n.Quaternion(a),o=(new n.Matrix3).fromQuaternion(r);return o[0]=o[0]*t[0],o[1]=o[1]*t[0],o[2]=o[2]*t[0],o[3]=o[3]*t[1],o[4]=o[4]*t[1],o[5]=o[5]*t[1],o[6]=o[6]*t[2],o[7]=o[7]*t[2],o[8]=o[8]*t[2],this.center=(new n.Vector3).from(e),this.halfAxes=o,this}},{key:"clone",value:function(){return new u(this.center,this.halfAxes)}},{key:"equals",value:function(e){return this===e||Boolean(e)&&this.center.equals(e.center)&&this.halfAxes.equals(e.halfAxes)}},{key:"getBoundingSphere",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new r.default,t=this.halfAxes,a=t.getColumn(0,f),n=t.getColumn(1,M),o=t.getColumn(2,C),u=s.copy(a).add(n).add(o);return e.center.copy(this.center),e.radius=u.magnitude(),e}},{key:"intersectPlane",value:function(e){var t=this.center,a=e.normal,n=this.halfAxes,r=a.x,u=a.y,s=a.z,c=Math.abs(r*n[O.COLUMN0ROW0]+u*n[O.COLUMN0ROW1]+s*n[O.COLUMN0ROW2])+Math.abs(r*n[O.COLUMN1ROW0]+u*n[O.COLUMN1ROW1]+s*n[O.COLUMN1ROW2])+Math.abs(r*n[O.COLUMN2ROW0]+u*n[O.COLUMN2ROW1]+s*n[O.COLUMN2ROW2]),i=a.dot(t)+e.distance;return i<=-c?o.INTERSECTION.OUTSIDE:i>=c?o.INTERSECTION.INSIDE:o.INTERSECTION.INTERSECTING}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceSquaredTo(e))}},{key:"distanceSquaredTo",value:function(e){var t=c.from(e).subtract(this.center),a=this.halfAxes,n=a.getColumn(0,i),r=a.getColumn(1,l),o=a.getColumn(2,h),u=n.magnitude(),s=r.magnitude(),d=o.magnitude();n.normalize(),r.normalize(),o.normalize();var m,f=0;return(m=Math.abs(t.dot(n))-u)>0&&(f+=m*m),(m=Math.abs(t.dot(r))-s)>0&&(f+=m*m),(m=Math.abs(t.dot(o))-d)>0&&(f+=m*m),f}},{key:"computePlaneDistances",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[-0,-0],n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,o=this.center,u=this.halfAxes,s=u.getColumn(0,i),c=u.getColumn(1,l),f=u.getColumn(2,h),M=d.copy(s).add(c).add(f).add(o),C=m.copy(M).subtract(e),O=t.dot(C);return n=Math.min(O,n),r=Math.max(O,r),M.copy(o).add(s).add(c).subtract(f),C.copy(M).subtract(e),O=t.dot(C),n=Math.min(O,n),r=Math.max(O,r),M.copy(o).add(s).subtract(c).add(f),C.copy(M).subtract(e),O=t.dot(C),n=Math.min(O,n),r=Math.max(O,r),M.copy(o).add(s).subtract(c).subtract(f),C.copy(M).subtract(e),O=t.dot(C),n=Math.min(O,n),r=Math.max(O,r),o.copy(M).subtract(s).add(c).add(f),C.copy(M).subtract(e),O=t.dot(C),n=Math.min(O,n),r=Math.max(O,r),o.copy(M).subtract(s).add(c).subtract(f),C.copy(M).subtract(e),O=t.dot(C),n=Math.min(O,n),r=Math.max(O,r),o.copy(M).subtract(s).subtract(c).add(f),C.copy(M).subtract(e),O=t.dot(C),n=Math.min(O,n),r=Math.max(O,r),o.copy(M).subtract(s).subtract(c).subtract(f),C.copy(M).subtract(e),O=t.dot(C),n=Math.min(O,n),r=Math.max(O,r),a[0]=n,a[1]=r,a}},{key:"getTransform",value:function(){}},{key:"halfSize",get:function(){var e=this.halfAxes.getColumn(0),t=this.halfAxes.getColumn(1),a=this.halfAxes.getColumn(2);return[new n.Vector3(e).len(),new n.Vector3(t).len(),new n.Vector3(a).len()]}},{key:"quaternion",get:function(){var t=this.halfAxes.getColumn(0),a=this.halfAxes.getColumn(1),r=this.halfAxes.getColumn(2),o=new n.Vector3(t).normalize(),u=new n.Vector3(a).normalize(),s=new n.Vector3(r).normalize();return(new n.Quaternion).fromMatrix3(new n.Matrix3([].concat((0,e.default)(o),(0,e.default)(u),(0,e.default)(s))))}}]),u}();exports.default=b;
},{"@babel/runtime/helpers/esm/toConsumableArray":"AdMH","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@math.gl/core":"dwLx","./bounding-sphere":"kU0s","../constants":"c23T"}],"U41F":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("@babel/runtime/helpers/esm/classCallCheck")),t=n(require("@babel/runtime/helpers/esm/createClass")),r=require("@math.gl/core");function n(e){return e&&e.__esModule?e:{default:e}}var i=new r.Vector3,a=new r.Vector3,s=function(){function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,1],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,e.default)(this,n),this.normal=new r.Vector3,this.distance=-0,this.fromNormalDistance(t,i)}return(0,t.default)(n,[{key:"fromNormalDistance",value:function(e,t){return(0,r.assert)(Number.isFinite(t)),this.normal.from(e).normalize(),this.distance=t,this}},{key:"fromPointNormal",value:function(e,t){e=i.from(e),this.normal.from(t).normalize();var r=-this.normal.dot(e);return this.distance=r,this}},{key:"fromCoefficients",value:function(e,t,n,i){return this.normal.set(e,t,n),(0,r.assert)((0,r.equals)(this.normal.len(),1)),this.distance=i,this}},{key:"clone",value:function(e){return new n(this.normal,this.distance)}},{key:"equals",value:function(e){return(0,r.equals)(this.distance,e.distance)&&(0,r.equals)(this.normal,e.normal)}},{key:"getPointDistance",value:function(e){return this.normal.dot(e)+this.distance}},{key:"transform",value:function(e){var t=a.copy(this.normal).transformAsVector(e).normalize(),r=this.normal.scale(-this.distance).transform(e);return this.fromPointNormal(r,t)}},{key:"projectPointOntoPlane",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];e=i.from(e);var r=this.getPointDistance(e),n=a.copy(this.normal).scale(r);return e.subtract(n).to(t)}}]),n}();exports.default=s;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@math.gl/core":"dwLx"}],"BNC5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("@babel/runtime/helpers/esm/classCallCheck")),t=i(require("@babel/runtime/helpers/esm/createClass")),r=require("@math.gl/core"),n=require("../constants"),a=i(require("./plane"));function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=u(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(l)throw i}}}}function u(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var s=[new r.Vector3([1,0,0]),new r.Vector3([0,1,0]),new r.Vector3([0,0,1])],c=new r.Vector3,f=new r.Vector3,I=new a.default(new r.Vector3(1,0,0),0),d=function(){function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(0,e.default)(this,i),this.planes=t,(0,r.assert)(this.planes.every(function(e){return e instanceof a.default}))}return(0,t.default)(i,null,[{key:"MASK_OUTSIDE",get:function(){return 4294967295}},{key:"MASK_INSIDE",get:function(){return 0}},{key:"MASK_INDETERMINATE",get:function(){return 2147483647}}]),(0,t.default)(i,[{key:"fromBoundingSphere",value:function(e){this.planes.length=2*s.length;var t,r=e.center,n=e.radius,i=0,u=o(s);try{for(u.s();!(t=u.n()).done;){var l=t.value,I=this.planes[i],d=this.planes[i+1];I||(I=this.planes[i]=new a.default),d||(d=this.planes[i+1]=new a.default);var h=c.copy(l).scale(-n).add(r);l.dot(h);I.fromPointNormal(h,l);var y=c.copy(l).scale(n).add(r),E=f.copy(l).negate();E.dot(y);d.fromPointNormal(y,E),i+=2}}catch(S){u.e(S)}finally{u.f()}return this}},{key:"computeVisibility",value:function(e){(0,r.assert)(e);var t,a=n.INTERSECTION.INSIDE,i=o(this.planes);try{for(i.s();!(t=i.n()).done;){var u=t.value;switch(e.intersectPlane(u)){case n.INTERSECTION.OUTSIDE:return n.INTERSECTION.OUTSIDE;case n.INTERSECTION.INTERSECTING:a=n.INTERSECTION.INTERSECTING}}}catch(l){i.e(l)}finally{i.f()}return a}},{key:"computeVisibilityWithPlaneMask",value:function(e,t){if((0,r.assert)(e,"boundingVolume is required."),(0,r.assert)(Number.isFinite(t),"parentPlaneMask is required."),t===i.MASK_OUTSIDE||t===i.MASK_INSIDE)return t;for(var a=i.MASK_INSIDE,o=this.planes,u=0;u<this.planes.length;++u){var l=u<31?1<<u:0;if(!(u<31&&0==(t&l))){var s=o[u],c=e.intersectPlane(s);if(c===n.INTERSECTION.OUTSIDE)return i.MASK_OUTSIDE;c===n.INTERSECTION.INTERSECTING&&(a|=l)}}return a}}]),i}();exports.default=d;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@math.gl/core":"dwLx","../constants":"c23T","./plane":"U41F"}],"oWDY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=a(require("@babel/runtime/helpers/esm/defineProperty")),e=a(require("@babel/runtime/helpers/esm/classCallCheck")),r=a(require("@babel/runtime/helpers/esm/createClass")),i=require("@math.gl/core"),o=a(require("./culling-volume")),n=a(require("./plane"));function a(t){return t&&t.__esModule?t:{default:t}}function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,i)}return r}function l(e){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?s(Object(i),!0).forEach(function(r){(0,t.default)(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var u=new i.Vector3,c=new i.Vector3,f=new i.Vector3,h=new i.Vector3,p=new i.Vector3,m=function(){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,e.default)(this,t),r=l({near:1,far:5e8},r),this.left=r.left,this._left=void 0,this.right=r.right,this._right=void 0,this.top=r.top,this._top=void 0,this.bottom=r.bottom,this._bottom=void 0,this.near=r.near,this._near=this.near,this.far=r.far,this._far=this.far,this._cullingVolume=new o.default([new n.default,new n.default,new n.default,new n.default,new n.default,new n.default]),this._perspectiveMatrix=new i.Matrix4,this._infinitePerspective=new i.Matrix4}return(0,r.default)(t,[{key:"clone",value:function(){return new t({right:this.right,left:this.left,top:this.top,bottom:this.bottom,near:this.near,far:this.far})}},{key:"equals",value:function(e){return e&&e instanceof t&&this.right===e.right&&this.left===e.left&&this.top===e.top&&this.bottom===e.bottom&&this.near===e.near&&this.far===e.far}},{key:"computeCullingVolume",value:function(t,e,r){(0,i.assert)(t,"position is required."),(0,i.assert)(e,"direction is required."),(0,i.assert)(r,"up is required.");var o=this._cullingVolume.planes;r=u.copy(r).normalize();var n=c.copy(e).cross(r).normalize(),a=f.copy(e).multiplyByScalar(this.near).add(t),s=h.copy(e).multiplyByScalar(this.far).add(t),l=p;return l.copy(n).multiplyByScalar(this.left).add(a).subtract(t).cross(r),o[0].fromPointNormal(t,l),l.copy(n).multiplyByScalar(this.right).add(a).subtract(t).cross(r).negate(),o[1].fromPointNormal(t,l),l.copy(r).multiplyByScalar(this.bottom).add(a).subtract(t).cross(n).negate(),o[2].fromPointNormal(t,l),l.copy(r).multiplyByScalar(this.top).add(a).subtract(t).cross(n),o[3].fromPointNormal(t,l),l=(new i.Vector3).copy(e),o[4].fromPointNormal(a,l),l.negate(),o[5].fromPointNormal(s,l),this._cullingVolume}},{key:"getPixelDimensions",value:function(t,e,r,o){b(this),(0,i.assert)(Number.isFinite(t)&&Number.isFinite(e)),(0,i.assert)(t>0),(0,i.assert)(e>0),(0,i.assert)(r>0),(0,i.assert)(o);var n=1/this.near,a=this.top*n,s=2*r*a/e,l=2*r*(a=this.right*n)/t;return o.x=l,o.y=s,o}},{key:"projectionMatrix",get:function(){return b(this),this._perspectiveMatrix}},{key:"infiniteProjectionMatrix",get:function(){return b(this),this._infinitePerspective}}]),t}();function b(t){(0,i.assert)(Number.isFinite(t.right)&&Number.isFinite(t.left)&&Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.near)&&Number.isFinite(t.far));var e=t.top,r=t.bottom,o=t.right,n=t.left,a=t.near,s=t.far;e===t._top&&r===t._bottom&&n===t._left&&o===t._right&&a===t._near&&s===t._far||((0,i.assert)(t.near>0&&t.near<t.far,"near must be greater than zero and less than far."),t._left=n,t._right=o,t._top=e,t._bottom=r,t._near=a,t._far=s,t._perspectiveMatrix=(new i.Matrix4).frustum({left:n,right:o,bottom:r,top:e,near:a,far:s}),t._infinitePerspective=(new i.Matrix4).frustum({left:n,right:o,bottom:r,top:e,near:a,far:1/0}))}exports.default=m;
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@math.gl/core":"dwLx","./culling-volume":"BNC5","./plane":"U41F"}],"m8qK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=f(require("@babel/runtime/helpers/esm/defineProperty")),e=f(require("@babel/runtime/helpers/esm/classCallCheck")),r=f(require("@babel/runtime/helpers/esm/createClass")),i=require("@math.gl/core"),s=f(require("./perspective-off-center-frustum"));function f(t){return t&&t.__esModule?t:{default:t}}function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,i)}return r}function o(e){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?n(Object(i),!0).forEach(function(r){(0,t.default)(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var a=function(t){return null!=t},u=function(){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,e.default)(this,t),r=o({near:1,far:5e8,xOffset:0,yOffset:0},r),this._offCenterFrustum=new s.default,this.fov=r.fov,this._fov=void 0,this._fovy=void 0,this._sseDenominator=void 0,this.aspectRatio=r.aspectRatio,this._aspectRatio=void 0,this.near=r.near,this._near=this.near,this.far=r.far,this._far=this.far,this.xOffset=r.xOffset,this._xOffset=this.xOffset,this.yOffset=r.yOffset,this._yOffset=this.yOffset}return(0,r.default)(t,[{key:"clone",value:function(){return new t({aspectRatio:this.aspectRatio,fov:this.fov,near:this.near,far:this.far})}},{key:"equals",value:function(e){return!!(a(e)&&e instanceof t)&&(c(this),c(e),this.fov===e.fov&&this.aspectRatio===e.aspectRatio&&this.near===e.near&&this.far===e.far&&this._offCenterFrustum.equals(e._offCenterFrustum))}},{key:"computeCullingVolume",value:function(t,e,r){return c(this),this._offCenterFrustum.computeCullingVolume(t,e,r)}},{key:"getPixelDimensions",value:function(t,e,r,i){return c(this),this._offCenterFrustum.getPixelDimensions(t,e,r,i)}},{key:"projectionMatrix",get:function(){return c(this),this._offCenterFrustum.projectionMatrix}},{key:"infiniteProjectionMatrix",get:function(){return c(this),this._offCenterFrustum.infiniteProjectionMatrix}},{key:"fovy",get:function(){return c(this),this._fovy}},{key:"sseDenominator",get:function(){return c(this),this._sseDenominator}}]),t}();function c(t){(0,i.assert)(Number.isFinite(t.fov)&&Number.isFinite(t.aspectRatio)&&Number.isFinite(t.near)&&Number.isFinite(t.far));var e=t._offCenterFrustum;t.fov===t._fov&&t.aspectRatio===t._aspectRatio&&t.near===t._near&&t.far===t._far&&t.xOffset===t._xOffset&&t.yOffset===t._yOffset||((0,i.assert)(t.fov>=0&&t.fov<Math.PI),(0,i.assert)(t.aspectRatio>0),(0,i.assert)(t.near>=0&&t.near<t.far),t._aspectRatio=t.aspectRatio,t._fov=t.fov,t._fovy=t.aspectRatio<=1?t.fov:2*Math.atan(Math.tan(.5*t.fov)/t.aspectRatio),t._near=t.near,t._far=t.far,t._sseDenominator=2*Math.tan(.5*t._fovy),t._xOffset=t.xOffset,t._yOffset=t.yOffset,e.top=t.near*Math.tan(.5*t._fovy),e.bottom=-e.top,e.right=t.aspectRatio*e.top,e.left=-e.right,e.near=t.near,e.far=t.far,e.right+=t.xOffset,e.left+=t.xOffset,e.top+=t.yOffset,e.bottom+=t.yOffset)}exports.default=u;
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@math.gl/core":"dwLx","./perspective-off-center-frustum":"oWDY"}],"LI1c":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=w;var r=require("@math.gl/core"),e=t(require("../lib/bounding-sphere"));function t(r){return r&&r.__esModule?r:{default:r}}function n(r,e){var t;if("undefined"==typeof Symbol||null==r[Symbol.iterator]){if(Array.isArray(r)||(t=o(r))||e&&r&&"number"==typeof r.length){t&&(r=t);var n=0,a=function(){};return{s:a,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(r){throw r},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,u=!0,y=!1;return{s:function(){t=r[Symbol.iterator]()},n:function(){var r=t.next();return u=r.done,r},e:function(r){y=!0,c=r},f:function(){try{u||null==t.return||t.return()}finally{if(y)throw c}}}}function o(r,e){if(r){if("string"==typeof r)return a(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?a(r,e):void 0}}function a(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}var c=new r.Vector3,u=new r.Vector3,y=new r.Vector3,i=new r.Vector3,l=new r.Vector3,f=new r.Vector3,d=new r.Vector3,p=new r.Vector3,s=new r.Vector3,v=new r.Vector3,m=new r.Vector3,b=new r.Vector3,h=4/3*Math.PI;function w(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new e.default;if(!r||0===r.length)return t.fromCenterRadius([0,0,0],0);var o,a=d.copy(r[0]),h=c.copy(a),w=u.copy(a),g=y.copy(a),x=i.copy(a),z=l.copy(a),S=f.copy(a),V=n(r);try{for(V.s();!(o=V.n()).done;){var q=o.value;a.copy(q);var A=a.x,M=a.y,j=a.z;A<h.x&&a.copy(h),A>x.x&&a.copy(x),M<w.y&&a.copy(w),M>z.y&&a.copy(z),j<g.z&&a.copy(g),j>S.z&&a.copy(S)}}catch(Q){V.e(Q)}finally{V.f()}var I=p.copy(x).subtract(h).magnitudeSquared(),_=p.copy(z).subtract(w).magnitudeSquared(),O=p.copy(S).subtract(g).magnitudeSquared(),C=h,P=x,B=I;_>B&&(B=_,C=w,P=z),O>B&&(B=O,C=g,P=S);var E=s;E.x=.5*(C.x+P.x),E.y=.5*(C.y+P.y),E.z=.5*(C.z+P.z);var R=p.copy(P).subtract(E).magnitudeSquared(),T=Math.sqrt(R),U=v;U.x=h.x,U.y=w.y,U.z=g.z;var $=m;$.x=x.x,$.y=z.y,$.z=S.z;var k,D=b.copy(U).add($).multiplyByScalar(.5),F=0,G=n(r);try{for(G.s();!(k=G.n()).done;){var H=k.value;a.copy(H);var J=p.copy(a).subtract(D).magnitude();J>F&&(F=J);var K=p.copy(a).subtract(E).magnitudeSquared();if(K>R){var L=Math.sqrt(K);R=(T=.5*(T+L))*T;var N=L-T;E.x=(T*E.x+N*a.x)/L,E.y=(T*E.y+N*a.y)/L,E.z=(T*E.z+N*a.z)/L}}}catch(Q){G.e(Q)}finally{G.f()}return T<F?(E.to(t.center),t.radius=T):(D.to(t.center),t.radius=F),t}
},{"@math.gl/core":"dwLx","../lib/bounding-sphere":"kU0s"}],"WvQ2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=l;var t=require("@math.gl/core"),e=new t.Matrix3,r=new t.Matrix3,n=new t.Matrix3,a=new t.Matrix3,i=new t.Matrix3;function l(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},g=t._MathUtils.EPSILON20,u=0,s=0,M=r,m=n;M.identity(),m.copy(e);for(var v=g*o(m);s<10&&x(m)>v;)d(m,a),i.copy(a).transpose(),m.multiplyRight(a),m.multiplyLeft(i),M.multiplyRight(a),++u>2&&(++s,u=0);return l.unitary=M.toTarget(l.unitary),l.diagonal=m.toTarget(l.diagonal),l}function o(t){for(var e=0,r=0;r<9;++r){var n=t[r];e+=n*n}return Math.sqrt(e)}var g=[1,0,0],u=[2,2,1];function x(t){for(var r=0,n=0;n<3;++n){var a=t[e.getElementIndex(u[n],g[n])];r+=2*a*a}return Math.sqrt(r)}function d(r,n){for(var a=t._MathUtils.EPSILON15,i=0,l=1,o=0;o<3;++o){var x=Math.abs(r[e.getElementIndex(u[o],g[o])]);x>i&&(l=o,i=x)}var d=g[l],s=u[l],M=1,m=0;if(Math.abs(r[e.getElementIndex(s,d)])>a){var v,I=(r[e.getElementIndex(s,s)]-r[e.getElementIndex(d,d)])/2/r[e.getElementIndex(s,d)];m=(v=I<0?-1/(-I+Math.sqrt(1+I*I)):1/(I+Math.sqrt(1+I*I)))*(M=1/Math.sqrt(1+v*v))}return t.Matrix3.IDENTITY.to(n),n[e.getElementIndex(d,d)]=n[e.getElementIndex(s,s)]=M,n[e.getElementIndex(s,d)]=m,n[e.getElementIndex(d,s)]=-m,n}
},{"@math.gl/core":"dwLx"}],"zTV5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.makeOrientedBoundingBoxFromPoints=h,exports.makeAxisAlignedBoundingBoxFromPoints=v;var e=require("@math.gl/core"),t=a(require("./compute-eigen-decomposition")),r=a(require("../lib/oriented-bounding-box")),n=a(require("../lib/axis-aligned-bounding-box"));function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=i(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,l=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return u=e.done,e},e:function(e){l=!0,o=e},f:function(){try{u||null==r.return||r.return()}finally{if(l)throw o}}}}function i(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var l=new e.Vector3,m=new e.Vector3,c=new e.Vector3,f=new e.Vector3,y=new e.Vector3,d=new e.Matrix3,s={diagonal:new e.Matrix3,unitary:new e.Matrix3};function h(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new r.default;if(!n||0===n.length)return a.halfAxes=new e.Matrix3([0,0,0,0,0,0,0,0,0]),a.center=new e.Vector3,a;var i,u=n.length,h=new e.Vector3(0,0,0),v=o(n);try{for(v.s();!(i=v.n()).done;){var x=i.value;h.add(x)}}catch(G){v.e(G)}finally{v.f()}var b=1/u;h.multiplyByScalar(b);var g,p=0,M=0,A=0,w=0,V=0,S=0,B=o(n);try{for(B.s();!(g=B.n()).done;){var _=g.value,E=l.copy(_).subtract(h);p+=E.x*E.x,M+=E.x*E.y,A+=E.x*E.z,w+=E.y*E.y,V+=E.y*E.z,S+=E.z*E.z}}catch(G){B.e(G)}finally{B.f()}p*=b,M*=b,A*=b,w*=b,V*=b,S*=b;var U=d;U[0]=p,U[1]=M,U[2]=A,U[3]=M,U[4]=w,U[5]=V,U[6]=A,U[7]=V,U[8]=S;var L,N=(0,t.default)(U,s).unitary,X=a.halfAxes.copy(N),j=X.getColumn(0,c),q=X.getColumn(1,f),z=X.getColumn(2,y),C=-Number.MAX_VALUE,O=-Number.MAX_VALUE,I=-Number.MAX_VALUE,P=Number.MAX_VALUE,k=Number.MAX_VALUE,D=Number.MAX_VALUE,F=o(n);try{for(F.s();!(L=F.n()).done;){var T=L.value;C=Math.max(T.dot(j),C),O=Math.max(T.dot(q),O),I=Math.max(T.dot(z),I),P=Math.min(T.dot(j),P),k=Math.min(T.dot(q),k),D=Math.min(T.dot(z),D)}}catch(G){F.e(G)}finally{F.f()}j=j.multiplyByScalar(.5*(P+C)),q=q.multiplyByScalar(.5*(k+O)),z=z.multiplyByScalar(.5*(D+I)),a.center.copy(j).add(q).add(z);var $=m.set(C-P,O-k,I-D).multiplyByScalar(.5);return a.halfAxes.multiplyByScalar($),a}function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new n.default;if(!e||0===e.length)return t.minimum.set(0,0,0),t.maximum.set(0,0,0),t.center.set(0,0,0),t.halfDiagonal.set(0,0,0),t;var r,a=e[0][0],i=e[0][1],u=e[0][2],l=e[0][0],m=e[0][1],c=e[0][2],f=o(e);try{for(f.s();!(r=f.n()).done;){var y=r.value,d=y[0],s=y[1],h=y[2];a=Math.min(d,a),l=Math.max(d,l),i=Math.min(s,i),m=Math.max(s,m),u=Math.min(h,u),c=Math.max(h,c)}}catch(v){f.e(v)}finally{f.f()}return t.minimum.set(a,i,u),t.maximum.set(l,m,c),t.center.copy(t.minimum).add(t.maximum).scale(.5),t.halfDiagonal.copy(t.maximum).subtract(t.center),t}
},{"@math.gl/core":"dwLx","./compute-eigen-decomposition":"WvQ2","../lib/oriented-bounding-box":"m37r","../lib/axis-aligned-bounding-box":"TILG"}],"jXqX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"INTERSECTION",{enumerable:!0,get:function(){return e.INTERSECTION}}),Object.defineProperty(exports,"Intersect",{enumerable:!0,get:function(){return e.INTERSECTION}}),Object.defineProperty(exports,"INTERSECT",{enumerable:!0,get:function(){return e.INTERSECTION}}),Object.defineProperty(exports,"AxisAlignedBoundingBox",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"BoundingSphere",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"OrientedBoundingBox",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"CullingVolume",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"Plane",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"_PerspectiveOffCenterFrustum",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"_PerspectiveFrustum",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(exports,"makeBoundingSphereFromPoints",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"makeAxisAlignedBoundingBoxFromPoints",{enumerable:!0,get:function(){return f.makeAxisAlignedBoundingBoxFromPoints}}),Object.defineProperty(exports,"makeOrientedBoundingBoxFromPoints",{enumerable:!0,get:function(){return f.makeOrientedBoundingBoxFromPoints}}),Object.defineProperty(exports,"computeEigenDecomposition",{enumerable:!0,get:function(){return s.default}});var e=require("./constants"),r=p(require("./lib/axis-aligned-bounding-box")),t=p(require("./lib/bounding-sphere")),n=p(require("./lib/oriented-bounding-box")),o=p(require("./lib/culling-volume")),i=p(require("./lib/plane")),u=p(require("./lib/perspective-off-center-frustum")),d=p(require("./lib/perspective-frustum")),l=p(require("./algorithms/bounding-sphere-from-points")),f=require("./algorithms/bounding-box-from-points"),s=p(require("./algorithms/compute-eigen-decomposition"));function p(e){return e&&e.__esModule?e:{default:e}}
},{"./constants":"c23T","./lib/axis-aligned-bounding-box":"TILG","./lib/bounding-sphere":"kU0s","./lib/oriented-bounding-box":"m37r","./lib/culling-volume":"BNC5","./lib/plane":"U41F","./lib/perspective-off-center-frustum":"oWDY","./lib/perspective-frustum":"m8qK","./algorithms/bounding-sphere-from-points":"LI1c","./algorithms/bounding-box-from-points":"zTV5","./algorithms/compute-eigen-decomposition":"WvQ2"}],"X6Um":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getFrameState=i;var e=require("@math.gl/core"),r=require("@math.gl/culling"),t=require("@math.gl/geospatial"),a=new e.Vector3,o=new e.Vector3,n=new r.CullingVolume([new r.Plane,new r.Plane,new r.Plane,new r.Plane,new r.Plane,new r.Plane]);function i(r,a){var o=r.cameraDirection,i=r.cameraUp,l=r.height,s=r.distanceScales.metersPerUnit,m=[r.longitude,r.latitude,0],u=t.Ellipsoid.WGS84.cartographicToCartesian(m,new e.Vector3),p=t.Ellipsoid.WGS84.eastNorthUpToFixedFrame(u),w=r.unprojectPosition(r.cameraPosition),d=t.Ellipsoid.WGS84.cartographicToCartesian(w,new e.Vector3),g=new e.Vector3(p.transformAsVector(new e.Vector3(o).scale(s))).normalize(),P=new e.Vector3(p.transformAsVector(new e.Vector3(i).scale(s))).normalize();return c(r,u),{camera:{position:d,direction:g,up:P},viewport:r,height:l,cullingVolume:n,frameNumber:a,sseDenominator:1.15}}function c(r,i){var c=r.getFrustumPlanes(),l=0;for(var s in c){var m=c[s],u=m.normal.dot(r.center);o.copy(m.normal).scale(m.distance-u).add(r.center);var p=r.unprojectPosition(o),w=t.Ellipsoid.WGS84.cartographicToCartesian(p,new e.Vector3);n.planes[l++].fromPointNormal(w,a.copy(i).subtract(w))}}
},{"@math.gl/core":"dwLx","@math.gl/culling":"jXqX","@math.gl/geospatial":"pfW5"}],"YJnA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getZoomFromBoundingVolume=a;var e=require("@math.gl/core"),t=6378137,o=6378137,r=6356752.314245179,l=new e.Vector3;function a(e){var a=e.halfAxes,n=e.radius,g=e.width,u=e.height;if(a){a.getColumn(0,l);var h=l.len();a.getColumn(1,l);var i=l.len();a.getColumn(2,l);var m=h/2,s=i/2,M=l.len()/2;return(Math.log2(t/m)+Math.log2(o/s)+Math.log2(r/M))/3}return n?Math.log2(r/n):u&&g?(Math.log2(t/g)+Math.log2(o/u))/2:1}
},{"@math.gl/core":"dwLx"}],"xtw0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TILE3D_OPTIMIZATION_HINT=exports.LOD_METRIC_TYPE=exports.TILESET_TYPE=exports.TILE_TYPE=exports.TILE_REFINEMENT=exports.TILE_CONTENT_STATE=void 0;var E={UNLOADED:0,LOADING:1,PROCESSING:2,READY:3,EXPIRED:4,FAILED:5};exports.TILE_CONTENT_STATE=E;var T={ADD:1,REPLACE:2};exports.TILE_REFINEMENT=T;var I={EMPTY:"empty",SCENEGRAPH:"scenegraph",POINTCLOUD:"pointcloud",MESH:"mesh"};exports.TILE_TYPE=I;var e={I3S:"I3S",TILES3D:"TILES3D"};exports.TILESET_TYPE=e;var r={GEOMETRIC_ERROR:"geometricError",MAX_SCREEN_THRESHOLD:"maxScreenThreshold"};exports.LOD_METRIC_TYPE=r;var _={NOT_COMPUTED:-1,USE_OPTIMIZATION:1,SKIP_OPTIMIZATION:0};exports.TILE3D_OPTIMIZATION_HINT=_;
},{}],"IdNA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createBoundingVolume=d;var e=a(require("@babel/runtime/helpers/esm/slicedToArray")),r=require("@math.gl/core"),t=require("@math.gl/culling"),n=require("@math.gl/geospatial"),o=require("@loaders.gl/loader-utils");function a(e){return e&&e.__esModule?e:{default:e}}function i(e){return null!=e}var s=new r.Vector3,u=new r.Vector3,l=new r.Vector3,c=new r.Matrix4;function d(t,a,i){if((0,o.assert)(t,"3D Tile: boundingVolume must be defined"),t.box)return g(t.box,a,i);if(t.region){var s=(0,e.default)(t.region,6),c=s[0],d=s[1],m=s[2],V=s[3],h=s[4],p=s[5],w=n.Ellipsoid.WGS84.cartographicToCartesian([(0,r.degrees)(c),(0,r.degrees)(V),h],u),x=n.Ellipsoid.WGS84.cartographicToCartesian([(0,r.degrees)(m),(0,r.degrees)(d),p],l),b=(new r.Vector3).addVectors(w,x).multiplyScalar(.5),v=(new r.Vector3).subVectors(w,x).len()/2;return f([b[0],b[1],b[2],v],new r.Matrix4)}if(t.sphere)return f(t.sphere,a,i);throw new Error("3D Tile: boundingVolume must contain a sphere, region, or box")}function g(e,n,o){var a=new r.Vector3(e[0],e[1],e[2]);n.transform(a,a);var s=n.transformAsVector(e.slice(3,6)),u=n.transformAsVector(e.slice(6,9)),l=n.transformAsVector(e.slice(9,12)),c=new r.Matrix3([s[0],s[1],s[2],u[0],u[1],u[2],l[0],l[1],l[2]]);return i(o)?(o.center=a,o.halfAxes=c,o):new t.OrientedBoundingBox(a,c)}function f(e,n,o){var a=new r.Vector3(e[0],e[1],e[2]);n.transform(a,a);var u=n.getScale(s),l=Math.max(Math.max(u[0],u[1]),u[2]),c=e[3]*l;return i(o)?(o.center=a,o.radius=c,o):new t.BoundingSphere(a,c)}
},{"@babel/runtime/helpers/esm/slicedToArray":"TBeo","@math.gl/core":"dwLx","@math.gl/culling":"jXqX","@math.gl/geospatial":"pfW5","@loaders.gl/loader-utils":"oHIH"}],"BLrj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.calculateDynamicScreenSpaceError=c,exports.fog=s,exports.getDynamicScreenSpaceError=m,exports.getTiles3DScreenSpaceError=u;var e=require("@math.gl/core"),r=new e.Vector3,i=new e.Vector3,n=new e.Matrix4,t=new e.Vector3,a=new e.Vector3,o=new e.Vector3;function c(c,s){var m,u,l,p,d,g=s.camera,h=s.mapProjection,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},C=f.dynamicScreenSpaceErrorHeightFalloff,S=void 0===C?.25:C,y=f.dynamicScreenSpaceErrorDensity,v=void 0===y?.00278:y,x=c.contentBoundingVolume;if(x instanceof TileBoundingRegion)m=Cartesian3.normalize(g.positionWC,r),u=g.directionWC,l=g.positionCartographic.height,p=x.minimumHeight,d=x.maximumHeight;else{var M=e.Matrix4.inverseTransformation(c.computedTransform,n),V=h.ellipsoid,E=x.boundingVolume,z=e.Matrix4.multiplyByPoint(M,E.center,t);if(Cartesian3.magnitude(z)>V.minimumRadius){var B=Cartographic.fromCartesian(z,V,i);m=Cartesian3.normalize(g.positionWC,r),u=g.directionWC,l=g.positionCartographic.height,p=0,d=2*B.height}else{var T=e.Matrix4.multiplyByPoint(M,g.positionWC,a);if(m=Cartesian3.UNIT_Z,u=e.Matrix4.multiplyByPointAsVector(M,g.directionWC,o),u=Cartesian3.normalize(u,u),l=T.z,x instanceof TileOrientedBoundingBox){var D=c._header.boundingVolume.box[11];p=z.z-D,d=z.z+D}else if(x instanceof TileBoundingSphere){var _=E.radius;p=z.z-_,d=z.z+_}}}var w=p+(d-p)*S,W=d,b=(0,e.clamp)((l-w)/(W-w),0,1),P=1-Math.abs(Cartesian3.dot(u,m));return v*(P*=1-b)}function s(e,r){var i=e*r;return 1-Math.exp(-i*i)}function m(e,r){if(e.dynamicScreenSpaceError&&e._dynamicScreenSpaceErrorComputedDensity){var i=e._dynamicScreenSpaceErrorComputedDensity,n=e.dynamicScreenSpaceErrorFactor;return s(r,i)*n}return 0}function u(e,r,i){var n=e.tileset,t=e.parent&&e.parent.lodMetricValue||e.lodMetricValue,a=i?t:e.lodMetricValue;if(0===a)return 0;var o=Math.max(e._distanceToCamera,1e-7),c=a*r.height/(o*r.sseDenominator);return c-=m(n,o)}
},{"@math.gl/core":"dwLx"}],"WvFC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.lodJudge=n,exports.getI3ScreenSize=d;var e=t(require("@babel/runtime/helpers/esm/slicedToArray")),r=require("@math.gl/core");function t(e){return e&&e.__esModule?e:{default:e}}var a=6378137,i=Math.PI/2;function n(e,r){var t=r.viewport,n=t.metersPerPixel,o=e.header.mbs[1],s=e.header.mbs[0],h=e.header.mbs[2],l=e.header.mbs[3],c=t.height,f=t.width,M=t.latitude,v=t.longitude,m=[v,M],b=[s,o,h],p=[v,o],P=[s,M],g=Math.sqrt(c*c+f*f)*n[0],q=u(m,b),x=.5*c+l/a,O=.5*f+l/a;if(q>g+l/a)return"OUT";if(u(m,p)>x)return"OUT";if(u(m,P)>O)return"OUT";if(0===e.lodMetricValue)return"DIG";var T=d(e,r);return(T*=i)<.5?"OUT":!e.header.children||T<=e.lodMetricValue?"DRAW":e.header.children?"DIG":"OUT"}function o(t){var i=(0,e.default)(t,3),n=i[0],o=i[1],u=i[2],d=(0,r.toRadians)(n),s=(0,r.toRadians)(o),h=1+u/a,l=h*Math.cos(s);return[n=l*Math.cos(d),o=l*Math.sin(d),u=h*Math.sin(s)]}function u(r,t){var a=(0,e.default)(r,3),i=a[0],n=a[1],u=a[2],d=void 0===u?0:u,s=(0,e.default)(t,3),h=s[0],l=s[1],c=s[2],f=o([h,l,void 0===c?0:c]),M=o([i,n,d]),v=M[0]-f[0],m=M[1]-f[1],b=M[2]-f[2];return v*v+m*m+b*b}function d(e,r){var t=r.viewport,i=e.header.mbs[1],n=e.header.mbs[0],o=e.header.mbs[2],d=e.header.mbs[3],h=[n,i,o],l=u(t.unprojectPosition(t.cameraPosition),h),c=d/a,f=l-c*c;if(f<=0)return 1.70141175e38;var M=s(e,r);return M*=c/Math.sqrt(f)/t.scale}function s(e,r){var t=r.viewport,a=t.width,i=t.height,n=t.pixelProjectionMatrix,o=Math.tan(Math.atan(Math.sqrt(1/(n[0]*n[0])+1/(n[5]*n[5]))));return Math.sqrt(i*i+a*a)/o}
},{"@babel/runtime/helpers/esm/slicedToArray":"TBeo","@math.gl/core":"dwLx"}],"RxD0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=m(require("@babel/runtime/regenerator")),t=m(require("@babel/runtime/helpers/esm/defineProperty")),i=m(require("@babel/runtime/helpers/esm/asyncToGenerator")),n=m(require("@babel/runtime/helpers/esm/typeof")),r=m(require("@babel/runtime/helpers/esm/classCallCheck")),s=m(require("@babel/runtime/helpers/esm/createClass")),o=require("@math.gl/core"),l=require("@math.gl/culling"),a=require("@loaders.gl/core"),u=require("@loaders.gl/loader-utils"),h=require("../constants"),c=require("./helpers/bounding-volume"),d=require("./helpers/tiles-3d-lod"),p=require("./helpers/i3s-lod");function m(e){return e&&e.__esModule?e:{default:e}}function T(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function f(e){for(var i=1;i<arguments.length;i++){var n=null!=arguments[i]?arguments[i]:{};i%2?T(Object(n),!0).forEach(function(i){(0,t.default)(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var _=new o.Vector3;function y(e){return null!=e}var E=function(){function m(e,t,i){(0,r.default)(this,m),(0,u.assert)("object"===(0,n.default)(t)),this.header=t,this.tileset=e,this.id=t.id,this.url=t.url,this.parent=i,this.refine=this._getRefine(t.refine),this.type=t.type,this.contentUrl=t.contentUrl,this.lodMetricType=null,this.lodMetricValue=null,this.boundingVolume=null,this.content=null,this.contentState=h.TILE_CONTENT_STATE.UNLOADED,this.gpuMemoryUsageInBytes=0,this.children=[],this.depth=0,this._cacheNode=null,this._frameNumber=null,this._cacheNode=null,this._initializeLodMetric(t),this._initializeTransforms(t),this._initializeBoundingVolumes(t),this._initializeContent(t),this._initializeRenderingState(t),this._lodJudge=null,this._expireDate=null,this._expiredContent=null,this._getPriority=this._getPriority.bind(this),Object.seal(this)}return(0,s.default)(m,[{key:"destroy",value:function(){this.header=null}},{key:"isDestroyed",value:function(){return null===this.header}},{key:"getScreenSpaceError",value:function(e,t){switch(this.tileset.type){case h.TILESET_TYPE.I3S:return(0,p.getI3ScreenSize)(this,e);case h.TILESET_TYPE.TILES3D:return(0,d.getTiles3DScreenSpaceError)(this,e,t);default:return console.error("Unsupported tileset type"),null}}},{key:"_getPriority",value:function(){return this.isVisible?this.contentState===h.TILE_CONTENT_STATE.UNLOADED?-1:Math.max(1e7-this._priority,0)||0:-1}},{key:"loadContent",value:function(){var n=(0,i.default)(e.default.mark(function i(){var n,r,s,o,l;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.hasEmptyContent){e.next=2;break}return e.abrupt("return",!1);case 2:if(!this.content){e.next=4;break}return e.abrupt("return",!0);case 4:return this.contentExpired&&(this._expireDate=null),this.contentState=h.TILE_CONTENT_STATE.LOADING,e.next=9,this.tileset._requestScheduler.scheduleRequest(this.id,this._getPriority);case 9:if(n=e.sent){e.next=13;break}return this.contentState=h.TILE_CONTENT_STATE.UNLOADED,e.abrupt("return",!1);case 13:return e.prev=13,r=this.tileset.getTileUrl(this.contentUrl),s=this.tileset.fetchOptions,o=this.tileset.loader,l=f(f({},s),{},(0,t.default)({},o.id,{tile:this.header,tileset:this.tileset.tileset,isTileset:"auto",isTileHeader:!1,assetGltfUpAxis:this.tileset.asset.gltfUpAxis})),e.next=20,(0,a.load)(r,o,l);case 20:return this.content=e.sent,this._isTileset()&&this.tileset._initializeTileHeaders(this.content,this,u.path.dirname(this.contentUrl)),this.contentState=h.TILE_CONTENT_STATE.READY,this._onContentLoaded(),e.abrupt("return",!0);case 27:throw e.prev=27,e.t0=e.catch(13),this.contentState=h.TILE_CONTENT_STATE.FAILED,e.t0;case 31:return e.prev=31,n.done(),e.finish(31);case 34:case"end":return e.stop()}},i,this,[[13,27,31,34]])}));return function(){return n.apply(this,arguments)}}()},{key:"unloadContent",value:function(){return this.content&&this.content.destroy&&this.content.destroy(),this.content=null,this.contentState=h.TILE_CONTENT_STATE.UNLOADED,!0}},{key:"updateVisibility",value:function(e){if(this._frameNumber!==e.frameNumber){var t=this.parent,i=t?t.computedTransform:this.tileset.modelMatrix,n=t?t._visibilityPlaneMask:l.CullingVolume.MASK_INDETERMINATE;this._updateTransform(i),this._distanceToCamera=this.distanceToTile(e),this._screenSpaceError=this.getScreenSpaceError(e,!1),this._visibilityPlaneMask=this.visibility(e,n),this._visible=this._visibilityPlaneMask!==l.CullingVolume.MASK_OUTSIDE,this._inRequestVolume=this.insideViewerRequestVolume(e),this._priority=this.lodMetricValue,this._frameNumber=e.frameNumber}}},{key:"visibility",value:function(e,t){var i=e.cullingVolume,n=this.boundingVolume;return i.computeVisibilityWithPlaneMask(n,t)}},{key:"contentVisibility",value:function(e){return!0}},{key:"distanceToTile",value:function(e){var t=this.boundingVolume;return Math.sqrt(Math.max(t.distanceSquaredTo(e.camera.position),0))}},{key:"cameraSpaceZDepth",value:function(e){var t=e.camera,i=this.boundingVolume;return _.subVectors(i.center,t.position),t.direction.dot(_)}},{key:"insideViewerRequestVolume",value:function(e){var t=this._viewerRequestVolume;return!t||0===t.distanceToCamera(e)}},{key:"_initializeLodMetric",value:function(e){"lodMetricType"in e?this.lodMetricType=e.lodMetricType:(this.lodMetricType=this.parent&&this.parent.lodMetricType||this.tileset.lodMetricType,console.warn("3D Tile: Required prop lodMetricType is undefined. Using parent lodMetricType")),"lodMetricValue"in e?this.lodMetricValue=e.lodMetricValue:(this.lodMetricValue=this.parent&&this.parent.lodMetricValue||this.tileset.lodMetricValue,console.warn("3D Tile: Required prop lodMetricValue is undefined. Using parent lodMetricValue"))}},{key:"_initializeTransforms",value:function(e){this.transform=e.transform?new o.Matrix4(e.transform):new o.Matrix4;var t=this.parent,i=this.tileset,n=t&&t.computedTransform?t.computedTransform.clone():i.modelMatrix.clone();this.computedTransform=new o.Matrix4(n).multiplyRight(this.transform);var r=t&&t._initialTransform?t._initialTransform.clone():new o.Matrix4;this._initialTransform=new o.Matrix4(r).multiplyRight(this.transform)}},{key:"_initializeBoundingVolumes",value:function(e){this._contentBoundingVolume=null,this._viewerRequestVolume=null,this._updateBoundingVolume(e)}},{key:"_initializeContent",value:function(e){this.content={_tileset:this.tileset,_tile:this},this.hasEmptyContent=!0,this.contentState=h.TILE_CONTENT_STATE.UNLOADED,this.hasTilesetContent=!1,e.contentUrl&&(this.content=null,this.hasEmptyContent=!1)}},{key:"_initializeRenderingState",value:function(e){this.depth=e.level,this._shouldRefine=!1,this._distanceToCamera=0,this._centerZDepth=0,this._screenSpaceError=0,this._visibilityPlaneMask=l.CullingVolume.MASK_INDETERMINATE,this._visible=!1,this._inRequestVolume=!1,this._stackLength=0,this._selectionDepth=0,this._frameNumber=0,this._touchedFrame=0,this._visitedFrame=0,this._selectedFrame=0,this._requestedFrame=0,this._priority=0}},{key:"_getRefine",value:function(e){return e||this.parent&&this.parent.refine||h.TILE_REFINEMENT.REPLACE}},{key:"_isTileset",value:function(){return-1!==this.contentUrl.indexOf(".json")}},{key:"_onContentLoaded",value:function(){switch(this.content&&this.content.type){case"vctr":case"geom":this.tileset.traverser.disableSkipLevelOfDetail=!0}this._isTileset()&&(this.hasTilesetContent=!0)}},{key:"_updateBoundingVolume",value:function(e){this.boundingVolume=(0,c.createBoundingVolume)(e.boundingVolume,this.computedTransform,this.boundingVolume);var t=e.content;t&&(t.boundingVolume&&(this._contentBoundingVolume=(0,c.createBoundingVolume)(t.boundingVolume,this.computedTransform,this._contentBoundingVolume)),e.viewerRequestVolume&&(this._viewerRequestVolume=(0,c.createBoundingVolume)(e.viewerRequestVolume,this.computedTransform,this._viewerRequestVolume)))}},{key:"_updateTransform",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:new o.Matrix4).clone().multiplyRight(this.transform);!e.equals(this.computedTransform)&&(this.computedTransform=e,this._updateBoundingVolume(this.header))}},{key:"updateExpiration",value:function(){if(y(this._expireDate)&&this.contentReady&&!this.hasEmptyContent){var e=Date.now();Date.lessThan(this._expireDate,e)&&(this.contentState=h.TILE_CONTENT_STATE.EXPIRED,this._expiredContent=this.content)}}},{key:"selected",get:function(){return this._selectedFrame===this.tileset._frameNumber}},{key:"isVisible",get:function(){return this._visible}},{key:"isVisibleAndInRequestVolume",get:function(){return this._visible&&this._inRequestVolume}},{key:"hasRenderContent",get:function(){return!this.hasEmptyContent&&!this.hasTilesetContent}},{key:"hasChildren",get:function(){return this.children.length>0||this.header.children&&this.header.children.length>0}},{key:"contentReady",get:function(){return this.contentState===h.TILE_CONTENT_STATE.READY||this.hasEmptyContent}},{key:"contentAvailable",get:function(){return Boolean(this.contentReady&&this.hasRenderContent||this._expiredContent&&!this.contentFailed)}},{key:"hasUnloadedContent",get:function(){return this.hasRenderContent&&this.contentUnloaded}},{key:"contentUnloaded",get:function(){return this.contentState===h.TILE_CONTENT_STATE.UNLOADED}},{key:"contentExpired",get:function(){return this.contentState===h.TILE_CONTENT_STATE.EXPIRED}},{key:"contentFailed",get:function(){return this.contentState===h.TILE_CONTENT_STATE.FAILED}},{key:"extras",get:function(){return this.header.extras}}]),m}();exports.default=E;
},{"@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/defineProperty":"iDM3","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","@babel/runtime/helpers/esm/typeof":"zsbK","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@math.gl/core":"dwLx","@math.gl/culling":"jXqX","@loaders.gl/core":"ikKD","@loaders.gl/loader-utils":"oHIH","../constants":"xtw0","./helpers/bounding-volume":"IdNA","./helpers/tiles-3d-lod":"BLrj","./helpers/i3s-lod":"WvFC"}],"xjM7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("@babel/runtime/helpers/esm/classCallCheck")),t=r(require("@babel/runtime/helpers/esm/createClass")),a=require("@loaders.gl/loader-utils");function r(e){return e&&e.__esModule?e:{default:e}}var s=function(){function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;(0,e.default)(this,r),this._array=new Array(t),this._map=new Map,this._length=t}return(0,t.default)(r,[{key:"get",value:function(e){return(0,a.assert)(e<this._array.length),this._array[e]}},{key:"set",value:function(e,t){(0,a.assert)(e>=0),e>=this.length&&(this.length=e+1),this._map.has(this._array[e])&&this._map.delete(this._array[e]),this._array[e]=t,this._map.set(t,e)}},{key:"delete",value:function(e){var t=this._map.get(e);t>=0&&(this._array.splice(t,1),this._map.delete(e),this.length--)}},{key:"peek",value:function(){return this._array[this._length-1]}},{key:"push",value:function(e){if(!this._map.has(e)){var t=this.length++;this._array[t]=e,this._map.set(e,t)}}},{key:"pop",value:function(){var e=this._array[--this.length];return this._map.delete(e),e}},{key:"reserve",value:function(e){(0,a.assert)(e>=0),e>this._array.length&&(this._array.length=e)}},{key:"resize",value:function(e){(0,a.assert)(e>=0),this.length=e}},{key:"trim",value:function(e){null==e&&(e=this.length),this._array.length=e}},{key:"reset",value:function(){this._array=[],this._map=new Map,this._length=0}},{key:"find",value:function(e){return this._map.has(e)}},{key:"length",get:function(){return this._length},set:function(e){this._length=e,e>this._array.length&&(this._array.length=e)}},{key:"values",get:function(){return this._array}}]),r}();exports.default=s;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@loaders.gl/loader-utils":"oHIH"}],"d39x":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.DEFAULT_OPTIONS=void 0;var e=s(require("@babel/runtime/helpers/esm/defineProperty")),t=s(require("@babel/runtime/helpers/esm/classCallCheck")),r=s(require("@babel/runtime/helpers/esm/createClass")),i=s(require("../../utils/managed-array")),n=require("../../constants"),a=require("@loaders.gl/loader-utils");function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=o(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return s=e.done,e},e:function(e){l=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(l)throw a}}}}function o(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function h(t){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?c(Object(i),!0).forEach(function(r){(0,e.default)(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}var d={loadSiblings:!1,skipLevelOfDetail:!1,maximumScreenSpaceError:2};exports.DEFAULT_OPTIONS=d;var f=function(){function e(r){(0,t.default)(this,e),this.options=h(h({},d),r),this._traversalStack=new i.default,this._emptyTraversalStack=new i.default,this._frameNumber=null,this.root=null,this.selectedTiles={},this.requestedTiles={},this.emptyTiles={}}return(0,r.default)(e,[{key:"traverse",value:function(e,t,r){this.root=e,this.options=h(h({},this.options),r),this.reset(),this.updateTile(e,t),this._frameNumber=t.frameNumber,this.executeTraversal(e,t)}},{key:"reset",value:function(){this.requestedTiles={},this.selectedTiles={},this.emptyTiles={},this._traversalStack.reset(),this._emptyTraversalStack.reset()}},{key:"executeTraversal",value:function(e,t){var r=this._traversalStack;for(r.push(e);r.length>0;){var i=r.pop(),a=!1;this.canTraverse(i,t)&&(this.updateChildTiles(i,t),a=this.updateAndPushChildren(i,t,r));var s=i.parent,l=Boolean(!s||s._shouldRefine),o=!a;i.hasRenderContent?i.refine===n.TILE_REFINEMENT.ADD?(this.loadTile(i,t),this.selectTile(i,t)):i.refine===n.TILE_REFINEMENT.REPLACE&&(this.loadTile(i,t),o&&this.selectTile(i,t)):(this.emptyTiles[i.id]=i,this.loadTile(i,t),o&&this.selectTile(i,t)),this.touchTile(i,t),i._shouldRefine=a&&l}this.options.onTraversalEnd&&this.options.onTraversalEnd(t)}},{key:"updateChildTiles",value:function(e,t){var r,i=l(e.children);try{for(i.s();!(r=i.n()).done;){var n=r.value;this.updateTile(n,t)}}catch(a){i.e(a)}finally{i.f()}return!0}},{key:"updateAndPushChildren",value:function(e,t,r){var i=this.options,a=i.loadSiblings,s=i.skipLevelOfDetail,o=e.children;o.sort(this.compareDistanceToCamera);var u,c=!s&&e.refine===n.TILE_REFINEMENT.REPLACE&&e.hasRenderContent,h=!1,d=l(o);try{for(d.s();!(u=d.n()).done;){var f=u.value;if(f.isVisibleAndInRequestVolume?(r.find(f)&&r.delete(f),r.push(f),h=!0):(c||a)&&(this.loadTile(f,t),this.touchTile(f,t)),c){var p=void 0;if(!(p=!!f._inRequestVolume&&(f.hasRenderContent?f.contentAvailable:this.executeEmptyTraversal(f,t))))return p}}}catch(v){d.e(v)}finally{d.f()}return h}},{key:"updateTile",value:function(e,t){this.updateTileVisibility(e,t)}},{key:"selectTile",value:function(e,t){this.shouldSelectTile(e,t)&&(e._selectedFrame=t.frameNumber,this.selectedTiles[e.id]=e)}},{key:"loadTile",value:function(e,t){this.shouldLoadTile(e,t)&&(e._requestedFrame=t.frameNumber,e._priority=this.getPriority(e),this.requestedTiles[e.id]=e)}},{key:"touchTile",value:function(e,t){e.tileset._cache.touch(e),e._touchedFrame=t.frameNumber}},{key:"canTraverse",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return!!(arguments.length>3&&void 0!==arguments[3]&&arguments[3]||e.isVisibleAndInRequestVolume)&&(!!e.hasChildren&&(e.hasTilesetContent?!e.contentExpired:this.shouldRefine(e,t,r)))}},{key:"shouldLoadTile",value:function(e,t){return e.hasUnloadedContent||e.contentExpired}},{key:"shouldSelectTile",value:function(e,t){return e.contentAvailable&&!this.options.skipLevelOfDetail}},{key:"shouldRefine",value:function(e,t,r){var i=e._screenSpaceError;return r&&(i=e.getScreenSpaceError(t,!0)),i>this.options.maximumScreenSpaceError}},{key:"updateTileVisibility",value:function(e,t){e.updateVisibility(t)}},{key:"compareDistanceToCamera",value:function(e,t){return e._distanceToCamera-t._distanceToCamera}},{key:"getPriority",value:function(e){var t=this.options;switch(e.refine){case n.TILE_REFINEMENT.ADD:return e._distanceToCamera;case n.TILE_REFINEMENT.REPLACE:var r=e.parent,i=r&&(!t.skipLevelOfDetail||0===e._screenSpaceError||r.hasTilesetContent)?r._screenSpaceError:e._screenSpaceError;return this.root._screenSpaceError-i;default:return(0,a.assert)(!1)}}},{key:"anyChildrenVisible",value:function(e,t){var r,i=!1,n=l(e.children);try{for(n.s();!(r=n.n()).done;){var a=r.value;a.updateVisibility(t),i=i||a.isVisibleAndInRequestVolume}}catch(s){n.e(s)}finally{n.f()}return i}},{key:"executeEmptyTraversal",value:function(e,t){for(var r=!0,i=this._emptyTraversalStack;i.length>0;){var n=i.pop();this.updateTile(n,t),n.isVisibleAndInRequestVolume||(this.loadTile(n,t),this.touchTile(n,t));var a=!n.hasRenderContent&&this.canTraverse(n,t,!1,!0);if(a||n.contentAvailable||(r=!1),a){var s,o=l(n.children.filter(function(e){return e}));try{for(o.s();!(s=o.n()).done;){var u=s.value;i.find(u)&&i.delete(u),i.push(u)}}catch(c){o.e(c)}finally{o.f()}}}return r}}]),e}();exports.default=f;
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","../../utils/managed-array":"xjM7","../../constants":"xtw0","@loaders.gl/loader-utils":"oHIH"}],"OAET":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("@babel/runtime/helpers/esm/classCallCheck")),t=u(require("@babel/runtime/helpers/esm/createClass")),r=u(require("@babel/runtime/helpers/esm/inherits")),i=u(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),n=u(require("@babel/runtime/helpers/esm/getPrototypeOf")),a=require("../../constants"),s=u(require("./tileset-traverser"));function u(e){return e&&e.__esModule?e:{default:e}}function l(e){var t=c();return function(){var r,a=(0,n.default)(e);if(t){var s=(0,n.default)(this).constructor;r=Reflect.construct(a,arguments,s)}else r=a.apply(this,arguments);return(0,i.default)(this,r)}}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var o=function(i){(0,r.default)(s,i);var n=l(s);function s(){return(0,e.default)(this,s),n.apply(this,arguments)}return(0,t.default)(s,[{key:"compareDistanceToCamera",value:function(e,t){return 0===t._distanceToCamera&&0===e._distanceToCamera?t._centerZDepth-e._centerZDepth:t._distanceToCamera-e._distanceToCamera}},{key:"updateTileVisibility",value:function(e,t){if(e.updateVisibility(t),e.isVisibleAndInRequestVolume){var r=e.children.length>0;if(e.hasTilesetContent&&r){var i=e.children[0];return this.updateTileVisibility(i,t),void(e._visible=i._visible)}if(this.meetsScreenSpaceErrorEarly(e,t))e._visible=!1;else{var n=e.refine===a.TILE_REFINEMENT.REPLACE,s=e._optimChildrenWithinParent===a.TILE3D_OPTIMIZATION_HINT.USE_OPTIMIZATION;n&&s&&r&&!this.anyChildrenVisible(e,t)&&(e._visible=!1)}}}},{key:"meetsScreenSpaceErrorEarly",value:function(e,t){var r=e.parent;return!(!r||r.hasTilesetContent||r.refine!==a.TILE_REFINEMENT.ADD)&&!this.shouldRefine(e,t,!0)}}]),s}(s.default);exports.default=o;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","../../constants":"xtw0","./tileset-traverser":"d39x"}],"nbnA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=a(require("@babel/runtime/helpers/esm/classCallCheck")),e=a(require("@babel/runtime/helpers/esm/createClass"));function a(t){return t&&t.__esModule?t:{default:t}}var s={REQUESTED:"REQUESTED",COMPLETED:"COMPLETED",ERROR:"ERROR"},u=function(){function a(){(0,t.default)(this,a),this._statusMap={}}return(0,e.default)(a,[{key:"add",value:function(t,e,a,u){var r=this;this._statusMap[e]||(this._statusMap[e]={request:t,callback:a,key:e,frameState:u,status:s.REQUESTED},t().then(function(t){r._statusMap[e].status=s.COMPLETED,r._statusMap[e].callback(t,u)}).catch(function(t){r._statusMap[e].status=s.ERROR,a(t)}))}},{key:"update",value:function(t,e){this._statusMap[t]&&(this._statusMap[t].frameState=e)}},{key:"find",value:function(t){return this._statusMap[t]}}]),a}();exports.default=u;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph"}],"hXuX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=p(require("@babel/runtime/regenerator")),r=p(require("@babel/runtime/helpers/esm/defineProperty")),t=p(require("@babel/runtime/helpers/esm/asyncToGenerator")),n=p(require("@babel/runtime/helpers/esm/classCallCheck")),i=p(require("@babel/runtime/helpers/esm/createClass")),u=p(require("@babel/runtime/helpers/esm/inherits")),a=p(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),o=p(require("@babel/runtime/helpers/esm/getPrototypeOf")),l=require("@loaders.gl/core"),c=p(require("./tileset-traverser")),s=require("../helpers/i3s-lod"),f=p(require("../tile-3d")),d=p(require("./i3s-tile-manager"));function p(e){return e&&e.__esModule?e:{default:e}}function h(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){(0,r.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function y(e,r){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=m(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,a=!0,o=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return a=e.done,e},e:function(e){o=!0,u=e},f:function(){try{a||null==t.return||t.return()}finally{if(o)throw u}}}}function m(e,r){if(e){if("string"==typeof e)return v(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?v(e,r):void 0}}function v(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function g(e){var r=O();return function(){var t,n=(0,o.default)(e);if(r){var i=(0,o.default)(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return(0,a.default)(this,t)}}function O(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var P=function(r){(0,u.default)(o,r);var a=g(o);function o(e){var r;return(0,n.default)(this,o),(r=a.call(this,e))._tileManager=new d.default,r}return(0,i.default)(o,[{key:"shouldRefine",value:function(e,r){return e._lodJudge=(0,s.lodJudge)(e,r),"DIG"===e._lodJudge}},{key:"updateChildTiles",value:function(e,r){var t,n=this,i=e.header.children||[],u=e.children,a=e.tileset,o=y(i);try{var l=function(){var i=t.value,o=u&&u.find(function(e){return e.id===i.id});if(o)o&&n.updateTile(o,r);else{var l=function(){return n._loadTile(i.id,a)};n._tileManager.find(i.id)?n._tileManager.update(i.id,r):(a.tileset.nodePages&&(l=function(){return a.tileset.nodePagesTile.formTileFromNodePages(i.id)}),n._tileManager.add(l,i.id,function(r){return n._onTileLoad(r,e)},r))}};for(o.s();!(t=o.n()).done;)l()}catch(c){o.e(c)}finally{o.f()}}},{key:"_loadTile",value:function(){var r=(0,t.default)(e.default.mark(function r(t,n){var i,u,a;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.loader,u=n.getTileUrl("".concat(n.url,"/nodes/").concat(t)),a={i3s:b(b({},n.fetchOptions),{},{isTileHeader:!0,loadContent:!1})},e.next=5,(0,l.load)(u,i,a);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},r)}));return function(e,t){return r.apply(this,arguments)}}()},{key:"_onTileLoad",value:function(e,r){var t=this.options.basePath,n=new f.default(r.tileset,e,r,t);r.children.push(n);var i=this._tileManager.find(n.id).frameState;this.updateTile(n,i),this._frameNumber===i.frameNumber&&this.executeTraversal(n,i)}}]),o}(c.default);exports.default=P;
},{"@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/defineProperty":"iDM3","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@loaders.gl/core":"ikKD","./tileset-traverser":"d39x","../helpers/i3s-lod":"WvFC","../tile-3d":"RxD0","./i3s-tile-manager":"nbnA"}],"BiqP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=_(require("@babel/runtime/regenerator")),t=_(require("@babel/runtime/helpers/esm/asyncToGenerator")),i=_(require("@babel/runtime/helpers/esm/defineProperty")),s=_(require("@babel/runtime/helpers/esm/classCallCheck")),r=_(require("@babel/runtime/helpers/esm/createClass")),n=require("@math.gl/core"),a=require("@math.gl/geospatial"),o=require("@probe.gl/stats"),l=require("@loaders.gl/loader-utils"),u=_(require("./tileset-cache")),h=require("./helpers/transform-utils"),c=require("./helpers/frame-state"),d=require("./helpers/zoom"),f=_(require("./tile-3d")),p=_(require("./traversers/tileset-3d-traverser")),y=_(require("./traversers/tileset-traverser")),m=_(require("./traversers/i3s-tilset-traverser")),v=require("../constants");function _(e){return e&&e.__esModule?e:{default:e}}function g(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=T(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var s=0,r=function(){};return{s:r,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,a=!0,o=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return a=e.done,e},e:function(e){o=!0,n=e},f:function(){try{a||null==i.return||i.return()}finally{if(o)throw n}}}}function T(e,t){if(e){if("string"==typeof e)return b(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?b(e,t):void 0}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,s=new Array(t);i<t;i++)s[i]=e[i];return s}function S(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,s)}return i}function k(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?S(Object(s),!0).forEach(function(t){(0,i.default)(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):S(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}var E="Tiles In Tileset(s)",q="Tiles In Memory",C="Tiles In View",w="Tiles To Render",P="Tiles Loaded",O="Tiles Loading",x="Tiles Unloaded",L="Failed Tile Loads",I="Points",M="Tile Memory Use";function j(e){for(var t=[],i=0,s=Object.keys(e);i<s.length;i++){var r=s[i];t.push("".concat(r,"=").concat(e[r]))}switch(t.length){case 0:return"";case 1:return"?".concat(t[0]);default:return"?".concat(t.join("&"))}}var U={ellipsoid:a.Ellipsoid.WGS84,modelMatrix:new n.Matrix4,throttleRequests:!1,maximumMemoryUsage:32,onTileLoad:function(){},onTileUnload:function(){},onTileError:function(e,t,i){},maximumScreenSpaceError:8},z=function(){function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,s.default)(this,i),(0,l.assert)(e),this.options=k(k({},U),t),this.tileset=e,this.loader=e.loader,this.type=e.type,this.url=e.url,this.basePath=e.basePath||l.path.dirname(this.url),this.modelMatrix=this.options.modelMatrix,this.ellipsoid=this.options.ellipsoid,this.lodMetricType=e.lodMetricType,this.lodMetricValue=e.lodMetricValue,this.refine=e.root.refine,this.fetchOptions=this.options.fetchOptions||{},this.options.headers&&(this.fetchOptions.headers=this.options.headers),this.options.token&&(this.fetchOptions.token=this.options.token),this.root=null,this.cartographicCenter=null,this.cartesianCenter=null,this.zoom=1,this.boundingVolume=null,this._traverser=this._initializeTraverser(),this._cache=new u.default,this._requestScheduler=new l.RequestScheduler({throttleRequests:this.options.throttleRequests}),this._frameNumber=0,this._updateFrameNumber=0,this._pendingCount=0,this._tiles={},this.selectedTiles=[],this._emptyTiles=[],this._requestedTiles=[],this._selectedTilesToStyle=[],this._queryParams={},this._queryParamsString=null,this.maximumMemoryUsage=this.options.maximumMemoryUsage,this.gpuMemoryUsageInBytes=0,this.stats=new o.Stats({id:this.url}),this._initializeStats(),this._hasMixedContent=!1,this._maximumScreenSpaceError=this.options.maximumScreenSpaceError,this._properties=void 0,this._extensionsUsed=void 0,this._gltfUpAxis=void 0,this._dynamicScreenSpaceErrorComputedDensity=0,this.extras=null,this.asset={},this.credits={},this.description=this.options.description,this._defaultGeometrySchema=[],this._initializeTileSet(e,this.options)}return(0,r.default)(i,[{key:"isLoaded",value:function(){return 0===this._pendingCount}},{key:"destroy",value:function(){this._destroy()}},{key:"getTileUrl",value:function(e){return e.startsWith("data:")?e:"".concat(e).concat(this.queryParams)}},{key:"update",value:function(e){this._cache.reset(),this._frameNumber++,this._frameState=(0,c.getFrameState)(e,this._frameNumber),this._traverser.traverse(this.root,this._frameState,this.options)}},{key:"_onTraversalEnd",value:function(){var e=Object.values(this._traverser.selectedTiles);this._tilesChanged(this.selectedTiles,e)&&this._updateFrameNumber++,this.selectedTiles=e;var t,i=g(this.selectedTiles);try{for(i.s();!(t=i.n()).done;){var s=t.value;this._tiles[s.id]=s}}catch(r){i.e(r)}finally{i.f()}return this._requestedTiles=Object.values(this._traverser.requestedTiles),this._emptyTiles=Object.values(this._traverser.emptyTiles),this._loadTiles(this._frameState),this._unloadTiles(),this._updateStats(),this._updateFrameNumber}},{key:"_tilesChanged",value:function(e,t){if(e.length!==t.length)return!0;var i=new Set(e.map(function(e){return e.id})),s=new Set(t.map(function(e){return e.id})),r=e.filter(function(e){return!s.has(e.id)}).length>0;return r=r||t.filter(function(e){return!i.has(e.id)}).length>0}},{key:"_loadTiles",value:function(e){var t,i=g(this._requestedTiles);try{for(i.s();!(t=i.n()).done;){var s=t.value;s.contentUnloaded&&this._loadTile(s,e)}}catch(r){i.e(r)}finally{i.f()}}},{key:"_unloadTiles",value:function(){this._cache.unloadTiles(this,function(e,t){return e._unloadTile(t)})}},{key:"_updateStats",value:function(){var e,t=0,i=0,s=g(this.selectedTiles);try{for(s.s();!(e=s.n()).done;){var r=e.value;r.contentAvailable&&(t++,r.content.pointCount&&(i+=r.content.pointCount))}}catch(n){s.e(n)}finally{s.f()}this.stats.get(C).count=this.selectedTiles.length,this.stats.get(w).count=t,this.stats.get(I).count=i}},{key:"_initializeTileSet",value:function(e){this.root=this._initializeTileHeaders(e,null,this.basePath),this.type===v.TILESET_TYPE.TILES3D&&this._initializeCesiumTileset(e),this.type===v.TILESET_TYPE.I3S&&this._initializeI3STileset(e),this._calculateViewProps()}},{key:"_calculateViewProps",value:function(){var e=this.root,t=e.boundingVolume.center;if(!t)return console.warn("center was not pre-calculated for the root tile"),this.cartographicCenter=new n.Vector3,void(this.zoom=1);this.cartographicCenter=a.Ellipsoid.WGS84.cartesianToCartographic(t,new n.Vector3),this.cartesianCenter=t,this.zoom=(0,d.getZoomFromBoundingVolume)(e.boundingVolume)}},{key:"_initializeStats",value:function(){this.stats.get(E),this.stats.get(O),this.stats.get(q),this.stats.get(C),this.stats.get(w),this.stats.get(P),this.stats.get(x),this.stats.get(L),this.stats.get(I,"memory"),this.stats.get(M,"memory")}},{key:"_initializeTileHeaders",value:function(e,t,i){var s=new f.default(this,e.root,t,i);if(t&&(t.children.push(s),s.depth=t.depth+1),this.type===v.TILESET_TYPE.TILES3D){var r=[];for(r.push(s);r.length>0;){var n=r.pop();this.stats.get(E).incrementCount();var a,o=g(n.header.children||[]);try{for(o.s();!(a=o.n()).done;){var l=a.value,u=new f.default(this,l,n,i);n.children.push(u),u.depth=n.depth+1,r.push(u)}}catch(h){o.e(h)}finally{o.f()}}}return s}},{key:"_initializeTraverser",value:function(){var e;switch(this.type){case v.TILESET_TYPE.TILES3D:e=p.default;break;case v.TILESET_TYPE.I3S:e=m.default;break;default:e=y.default}return new e({basePath:this.basePath,onTraversalEnd:this._onTraversalEnd.bind(this)})}},{key:"_destroyTileHeaders",value:function(e){this._destroySubtree(e)}},{key:"_loadTile",value:function(){var i=(0,t.default)(e.default.mark(function t(i,s){var r;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this._onStartTileLoading(),e.next=4,i.loadContent(s);case 4:r=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this._onTileLoadError(i,e.t0);case 10:return e.prev=10,this._onEndTileLoading(),this._onTileLoad(i,r),e.finish(10);case 14:case"end":return e.stop()}},t,this,[[0,7,10,14]])}));return function(e,t){return i.apply(this,arguments)}}()},{key:"_onTileLoadError",value:function(e,t){this.stats.get(L).incrementCount();var i=t.message||t.toString(),s=e.url;console.error("A 3D tile failed to load: ".concat(e.url," ").concat(i)),this.options.onTileError(e,i,s)}},{key:"_onTileLoad",value:function(e,t){t&&(e&&e.content&&(0,h.calculateTransformProps)(e,e.content),this._addTileToCache(e),this.options.onTileLoad(e))}},{key:"_onStartTileLoading",value:function(){this._pendingCount++,this.stats.get(O).incrementCount()}},{key:"_onEndTileLoading",value:function(){this._pendingCount--,this.stats.get(O).decrementCount()}},{key:"_addTileToCache",value:function(e){this._cache.add(this,e,function(t){return t._updateCacheStats(e)})}},{key:"_updateCacheStats",value:function(e){this.stats.get(P).incrementCount(),this.stats.get(q).incrementCount(),this.gpuMemoryUsageInBytes+=e.content.byteLength||0,this.stats.get(M).count=this.gpuMemoryUsageInBytes}},{key:"_unloadTile",value:function(e){this.gpuMemoryUsageInBytes-=e.content.byteLength||0,this.stats.get(q).decrementCount(),this.stats.get(x).incrementCount(),this.stats.get(M).count=this.gpuMemoryUsageInBytes,this.options.onTileUnload(e),e.unloadContent()}},{key:"_destroy",value:function(){var e=[];for(this.root&&e.push(this.root);e.length>0;){var t,i=e.pop(),s=g(i.children);try{for(s.s();!(t=s.n()).done;){var r=t.value;e.push(r)}}catch(n){s.e(n)}finally{s.f()}this._destroyTile(i)}this.root=null}},{key:"_destroySubtree",value:function(e){var t=e,i=[];for(i.push(t);i.length>0;){var s,r=g((e=i.pop()).children);try{for(r.s();!(s=r.n()).done;){var n=s.value;i.push(n)}}catch(a){r.e(a)}finally{r.f()}e!==t&&this._destroyTile(e)}t.children=[]}},{key:"_destroyTile",value:function(e){this._cache.unloadTile(this,e),this._unloadTile(e),e.destroy()}},{key:"_initializeCesiumTileset",value:function(e){if(this.asset=e.asset,!this.asset)throw new Error("Tileset must have an asset property.");if("0.0"!==this.asset.version&&"1.0"!==this.asset.version)throw new Error("The tileset must be 3D Tiles version 0.0 or 1.0.");"tilesetVersion"in this.asset&&(this._queryParams.v=this.asset.tilesetVersion),this.credits={attributions:this.options.attributions||[]},this.description=this.options.description,this.properties=e.properties,this.geometricError=e.geometricError,this._extensionsUsed=e.extensionsUsed,this.extras=e.extras}},{key:"_initializeI3STileset",value:function(e){"token"in this.options&&(this._queryParams.token=this.options.token),this._defaultGeometrySchema=e.store.defaultGeometrySchema}},{key:"hasExtension",value:function(e){return Boolean(this._extensionsUsed&&this._extensionsUsed.indexOf(e)>-1)}},{key:"tiles",get:function(){return Object.values(this._tiles)}},{key:"queryParams",get:function(){return this._queryParamsString||(this._queryParamsString=j(this._queryParams)),this._queryParamsString}}]),i}();exports.default=z;
},{"@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","@babel/runtime/helpers/esm/defineProperty":"iDM3","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@math.gl/core":"dwLx","@math.gl/geospatial":"pfW5","@probe.gl/stats":"SZdt","@loaders.gl/loader-utils":"oHIH","./tileset-cache":"AWwT","./helpers/transform-utils":"cw8A","./helpers/frame-state":"X6Um","./helpers/zoom":"YJnA","./tile-3d":"RxD0","./traversers/tileset-3d-traverser":"OAET","./traversers/tileset-traverser":"d39x","./traversers/i3s-tilset-traverser":"hXuX","../constants":"xtw0"}],"reP2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Tileset3D",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"Tile3D",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"TilesetTraverser",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"TilesetCache",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"createBoundingVolume",{enumerable:!0,get:function(){return u.createBoundingVolume}}),Object.defineProperty(exports,"calculateTransformProps",{enumerable:!0,get:function(){return i.calculateTransformProps}}),Object.defineProperty(exports,"getFrameState",{enumerable:!0,get:function(){return o.getFrameState}}),Object.defineProperty(exports,"TILE_CONTENT_STATE",{enumerable:!0,get:function(){return l.TILE_CONTENT_STATE}}),Object.defineProperty(exports,"TILE_REFINEMENT",{enumerable:!0,get:function(){return l.TILE_REFINEMENT}}),Object.defineProperty(exports,"TILE_TYPE",{enumerable:!0,get:function(){return l.TILE_TYPE}}),Object.defineProperty(exports,"TILESET_TYPE",{enumerable:!0,get:function(){return l.TILESET_TYPE}}),Object.defineProperty(exports,"LOD_METRIC_TYPE",{enumerable:!0,get:function(){return l.LOD_METRIC_TYPE}});var e=s(require("./tileset/tileset-3d")),t=s(require("./tileset/tile-3d")),r=s(require("./tileset/traversers/tileset-traverser")),n=s(require("./tileset/tileset-cache")),u=require("./tileset/helpers/bounding-volume"),i=require("./tileset/helpers/transform-utils"),o=require("./tileset/helpers/frame-state"),l=require("./constants");function s(e){return e&&e.__esModule?e:{default:e}}
},{"./tileset/tileset-3d":"BiqP","./tileset/tile-3d":"RxD0","./tileset/traversers/tileset-traverser":"d39x","./tileset/tileset-cache":"AWwT","./tileset/helpers/bounding-volume":"IdNA","./tileset/helpers/transform-utils":"cw8A","./tileset/helpers/frame-state":"X6Um","./constants":"xtw0"}],"f96v":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TILE3D_OPTIMIZATION_HINT=exports.MAGIC_ARRAY=exports.TILE3D_TYPES=exports.TILE3D_TYPE=void 0;var T={COMPOSITE:"cmpt",POINT_CLOUD:"pnts",BATCHED_3D_MODEL:"b3dm",INSTANCED_3D_MODEL:"i3dm",GEOMETRY:"geom",VECTOR:"vect"};exports.TILE3D_TYPE=T;var I=Object.keys(T);exports.TILE3D_TYPES=I;var O={BATCHED_MODEL:[98,51,100,109],INSTANCED_MODEL:[105,51,100,109],POINT_CLOUD:[112,110,116,115],COMPOSITE:[99,109,112,116]};exports.MAGIC_ARRAY=O;var E={NOT_COMPUTED:-1,USE_OPTIMIZATION:1,SKIP_OPTIMIZATION:0};exports.TILE3D_OPTIMIZATION_HINT=E;
},{}],"JJDe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getStringFromArrayBuffer=r,exports.getStringFromTypedArray=t,exports.getMagicString=n;var e=require("@loaders.gl/loader-utils");function r(r,t,n){(0,e.assert)(r instanceof ArrayBuffer);var o=new TextDecoder("utf8"),a=new Uint8Array(r,t,n);return o.decode(a)}function t(r){return(0,e.assert)(ArrayBuffer.isView(r)),new TextDecoder("utf8").decode(r)}function n(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=new DataView(e);return"".concat(String.fromCharCode(t.getUint8(r+0))).concat(String.fromCharCode(t.getUint8(r+1))).concat(String.fromCharCode(t.getUint8(r+2))).concat(String.fromCharCode(t.getUint8(r+3)))}
},{"@loaders.gl/loader-utils":"oHIH"}],"h9FQ":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.loadDracoDecoderModule=i,exports.loadDracoEncoderModule=f;var e,r,t=c(require("@babel/runtime/helpers/esm/slicedToArray")),n=c(require("@babel/runtime/regenerator")),a=c(require("@babel/runtime/helpers/esm/defineProperty")),o=c(require("@babel/runtime/helpers/esm/asyncToGenerator")),u=require("@loaders.gl/loader-utils");function c(e){return e&&e.__esModule?e:{default:e}}function d(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function s(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?d(Object(t),!0).forEach(function(r){(0,a.default)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function i(e){return l.apply(this,arguments)}function l(){return(l=(0,o.default)(n.default.mark(function r(t){var a;return n.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return a=t.modules||{},e=a.draco3d?e||new Promise(function(e){var r=a.draco3d.createDecoderModule({onModuleLoaded:function(){e({draco:r})}})}):e||b(t),r.next=4,e;case 4:return r.abrupt("return",r.sent);case 5:case"end":return r.stop()}},r)}))).apply(this,arguments)}function f(e){return p.apply(this,arguments)}function p(){return(p=(0,o.default)(n.default.mark(function e(t){var a;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.modules||{},r=a.draco3d?r||new Promise(function(e){var r=a.draco3d.createEncoderModule({onModuleLoaded:function(){e({draco:r})}})}):r||w(t),e.next=4,r;case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function b(e){return y.apply(this,arguments)}function y(){return(y=(0,o.default)(n.default.mark(function e(r){var a,o,c,d;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=r.draco&&r.draco.decoderType,e.next="js"===e.t0?3:(e.t0,7);break;case 3:return e.next=5,(0,u.loadLibrary)("draco_decoder.js","draco",r);case 5:return a=e.sent,e.abrupt("break",21);case 7:return e.t1=Promise,e.next=10,(0,u.loadLibrary)("draco_wasm_wrapper.js","draco",r);case 10:return e.t2=e.sent,e.next=13,(0,u.loadLibrary)("draco_decoder.wasm","draco",r);case 13:return e.t3=e.sent,e.t4=[e.t2,e.t3],e.next=17,e.t1.all.call(e.t1,e.t4);case 17:c=e.sent,d=(0,t.default)(c,2),a=d[0],o=d[1];case 21:return a=a||u.global.DracoDecoderModule,e.next=24,m(a,o);case 24:return e.abrupt("return",e.sent);case 25:case"end":return e.stop()}},e)}))).apply(this,arguments)}function m(e,r){var t={};return r&&(t.wasmBinary=r),new Promise(function(r){e(s(s({},t),{},{onModuleLoaded:function(e){return r({draco:e})}}))})}function w(e){return h.apply(this,arguments)}function h(){return(h=(0,o.default)(n.default.mark(function e(r){var t;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.loadLibrary)("draco_encoder.js","draco",r);case 2:return t=(t=e.sent)||u.global.DracoEncoderModule,e.abrupt("return",new Promise(function(e){t({onModuleLoaded:function(r){return e({draco:r})}})}));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}
},{"@babel/runtime/helpers/esm/slicedToArray":"TBeo","@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/defineProperty":"iDM3","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","@loaders.gl/loader-utils":"oHIH"}],"SPtI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=n(require("@babel/runtime/helpers/esm/slicedToArray")),e=n(require("@babel/runtime/helpers/esm/typeof")),r=n(require("@babel/runtime/helpers/esm/classCallCheck")),a=n(require("@babel/runtime/helpers/esm/createClass")),i=require("@loaders.gl/loader-utils");function n(t){return t&&t.__esModule?t:{default:t}}var o={TRIANGULAR_MESH:0,POINT_CLOUD:1},s={POSITION:"POSITION",NORMAL:"NORMAL",COLOR:"COLOR_0",TEX_COORD:"TEXCOORD_0"},u={1:Int8Array,2:Uint8Array,3:Int16Array,4:Uint16Array,5:Int32Array,6:Uint32Array,9:Float32Array},d=function(){function n(t){(0,r.default)(this,n),this.draco=t,this.drawMode="TRIANGLE",this.metadataQuerier={}}return(0,a.default)(n,[{key:"destroy",value:function(){}},{key:"destroyGeometry",value:function(t){t&&this.draco.destroy(t.dracoGeometry)}},{key:"parseSync",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.metadataQuerier=new this.draco.MetadataQuerier;var r=new this.draco.DecoderBuffer;r.Init(new Int8Array(t),t.byteLength);var a,n,s,u=new this.draco.Decoder,d={};try{var c=u.GetEncodedGeometryType(r);switch(c){case this.draco.TRIANGULAR_MESH:n=new this.draco.Mesh,a=u.DecodeBufferToMesh(r,n),s={type:o.TRIANGULAR_MESH,faceCount:n.num_faces(),attributeCount:n.num_attributes(),vertexCount:n.num_points()};break;case this.draco.POINT_CLOUD:n=new this.draco.PointCloud,a=u.DecodeBufferToPointCloud(r,n),s={type:o.POINT_CLOUD,attributeCount:n.num_attributes(),vertexCount:n.num_points()};break;default:throw new Error("Unknown DRACO geometry type.")}if(!a.ok()||!n.ptr){var y="DRACO decompression failed: ".concat(a.error_msg());throw n&&this.draco.destroy(n),new Error(y)}d.loaderData={header:s},this._extractDRACOGeometry(u,n,c,d,e);var h=this._getGeometryMetadata(u,n);d.header={vertexCount:s.vertexCount,boundingBox:(0,i.getMeshBoundingBox)(d.attributes),metadata:h}}finally{this.draco.destroy(u),this.draco.destroy(r),this.draco.destroy(n),this.draco.destroy(this.metadataQuerier)}return d}},{key:"_extractDRACOGeometry",value:function(t,e,r,a,i){var n=this._getAttributes(t,e,i);if(!n.POSITION)throw new Error("DRACO decompressor: No position attribute found.");return r===this.draco.TRIANGULAR_MESH?(n.indices="TRIANGLE_STRIP"===this.drawMode?this._getMeshStripIndices(t,e):this._getMeshFaceIndices(t,e),a.mode="TRIANGLE_STRIP"===this.drawMode?5:4):a.mode=0,n.indices&&(a.indices={value:n.indices,size:1},delete n.indices),a.attributes=n,a}},{key:"getPositionAttributeMetadata",value:function(t){this.metadata=this.metadata||{},this.metadata.attributes=this.metadata.attributes||{};var e=new this.draco.AttributeQuantizationTransform;if(e.InitFromAttribute(t)){this.metadata.attributes.position.isQuantized=!0,this.metadata.attributes.position.maxRange=e.range(),this.metadata.attributes.position.numQuantizationBits=e.quantization_bits(),this.metadata.attributes.position.minValues=new Float32Array(3);for(var r=0;r<3;++r)this.metadata.attributes.position.minValues[r]=e.min_value(r)}this.draco.destroy(e)}},{key:"_getAttributes",value:function(t,e,r){for(var a={},i=e.num_points(),n=0;n<e.num_attributes();n++){var o=t.GetAttribute(e,n),s=this._getAttributeMetadata(t,e,n),d={uniqueId:o.unique_id(),attributeType:o.attribute_type(),dataType:u[o.data_type()],size:o.size(),numComponents:o.num_components(),byteOffset:o.byte_offset(),byteStride:o.byte_stride(),normalized:o.normalized(),metadata:s},c=this._deduceAttributeName(d,r),y=this._getAttributeTypedArray(t,e,o,c).typedArray;a[c]={value:y,size:y.length/i,metadata:s}}return a}},{key:"_getMeshFaceIndices",value:function(t,e){for(var r=e.num_faces(),a=new Uint32Array(3*r),i=new this.draco.DracoInt32Array,n=0;n<r;++n){t.GetFaceFromMesh(e,n,i);var o=3*n;a[o]=i.GetValue(0),a[o+1]=i.GetValue(1),a[o+2]=i.GetValue(2)}return this.draco.destroy(i),a}},{key:"_getMeshStripIndices",value:function(t,e){var r=new this.draco.DracoInt32Array;t.GetTriangleStripsFromMesh(e,r);for(var a=new Uint32Array(r.size()),i=0;i<r.size();++i)a[i]=r.GetValue(i);return this.draco.destroy(r),a}},{key:"_getAttributeTypedArray",value:function(t,e,r,a){if(0===r.ptr){var i="DRACO decode bad attribute ".concat(a);throw new Error(i)}var n,o,s=u[r.data_type()],d=r.num_components(),c=e.num_points()*d;switch(s){case Float32Array:n=new this.draco.DracoFloat32Array,t.GetAttributeFloatForAllPoints(e,r,n),o=new Float32Array(c);break;case Int8Array:n=new this.draco.DracoInt8Array,t.GetAttributeInt8ForAllPoints(e,r,n),o=new Int8Array(c);break;case Int16Array:n=new this.draco.DracoInt16Array,t.GetAttributeInt16ForAllPoints(e,r,n),o=new Int16Array(c);break;case Int32Array:n=new this.draco.DracoInt32Array,t.GetAttributeInt32ForAllPoints(e,r,n),o=new Int32Array(c);break;case Uint8Array:n=new this.draco.DracoUInt8Array,t.GetAttributeUInt8ForAllPoints(e,r,n),o=new Uint8Array(c);break;case Uint16Array:n=new this.draco.DracoUInt16Array,t.GetAttributeUInt16ForAllPoints(e,r,n),o=new Uint16Array(c);break;case Uint32Array:n=new this.draco.DracoUInt32Array,t.GetAttributeUInt32ForAllPoints(e,r,n),o=new Uint32Array(c);break;default:throw new Error("DRACO decoder: unexpected attribute type.")}for(var y=0;y<c;y++)o[y]=n.GetValue(y);return this.draco.destroy(n),{typedArray:o,components:d}}},{key:"_deduceAttributeName",value:function(r,a){var i=a.extraAttributes,n=void 0===i?{}:i;if(n&&"object"===(0,e.default)(n))for(var o=0,u=Object.entries(n);o<u.length;o++){var d=(0,t.default)(u[o],2),c=d[0];if(d[1]===r.uniqueId)return c}for(var y in s){var h=this.draco[y];if(r.attributeType===h)return s[y]}if(r.metadata){var A=a.attributeNameEntry||"name";if(r.metadata[A])return r.metadata[A].string}return"CUSTOM_ATTRIBUTE_".concat(r.uniqueId)}},{key:"_getGeometryMetadata",value:function(t,e){var r=t.GetMetadata(e);return this._queryDracoMetadata(r)}},{key:"_getAttributeMetadata",value:function(t,e,r){var a=t.GetAttributeMetadata(e,r);return this._queryDracoMetadata(a)}},{key:"_queryDracoMetadata",value:function(t){if(!t||!t.ptr)return{};for(var e={},r=this.metadataQuerier.NumEntries(t),a=0;a<r;a++){var i=this.metadataQuerier.GetEntryName(t,a);e[i]={int:this.metadataQuerier.GetIntEntry(t,i),string:this.metadataQuerier.GetStringEntry(t,i),double:this.metadataQuerier.GetDoubleEntry(t,i),intArray:this.metadataQuerier.GetIntEntryArray(t,i)}}return e}},{key:"decode",value:function(t,e){return this.parseSync(t,e)}}]),n}();exports.default=d;
},{"@babel/runtime/helpers/esm/slicedToArray":"TBeo","@babel/runtime/helpers/esm/typeof":"zsbK","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@loaders.gl/loader-utils":"oHIH"}],"s33A":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DracoLoader=exports.DracoWorkerLoader=void 0;var e=s(require("@babel/runtime/regenerator")),r=s(require("@babel/runtime/helpers/esm/asyncToGenerator")),t=s(require("@babel/runtime/helpers/esm/defineProperty")),o=s(require("@babel/runtime/helpers/esm/typeof")),a=require("./lib/draco-module-loader"),n=s(require("./lib/draco-parser"));function s(e){return e&&e.__esModule?e:{default:e}}function c(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function i(e){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?c(Object(o),!0).forEach(function(r){(0,t.default)(e,r,o[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):c(Object(o)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(o,r))})}return e}var u="2.3.7",d={id:"draco",name:"Draco",version:u,extensions:["drc"],mimeTypes:["application/octet-stream"],binary:!0,tests:["DRACO"],options:{draco:{decoderType:"object"===("undefined"==typeof WebAssembly?"undefined":(0,o.default)(WebAssembly))?"wasm":"js",libraryPath:"libs/",workerUrl:"https://unpkg.com/@loaders.gl/draco@".concat(u,"/dist/draco-loader.worker.js"),localWorkerUrl:"modules/draco/dist/draco-loader.worker.dev.js",extraAttributes:{}}}};exports.DracoWorkerLoader=d;var l=i(i({},d),{},{parse:p});function p(e,r,t,o){return b.apply(this,arguments)}function b(){return(b=(0,r.default)(e.default.mark(function r(t,o,s,c){var u,d,l;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.loadDracoDecoderModule)(o);case 2:return u=e.sent,d=u.draco,l=new n.default(d),e.prev=5,e.abrupt("return",l.parseSync(t,i({extraAttributes:o.draco&&o.draco.extraAttributes||null},o.parseOptions||{})));case 7:return e.prev=7,l.destroy(),e.finish(7);case 10:case"end":return e.stop()}},r,null,[[5,,7,10]])}))).apply(this,arguments)}exports.DracoLoader=l;
},{"@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","@babel/runtime/helpers/esm/defineProperty":"iDM3","@babel/runtime/helpers/esm/typeof":"zsbK","./lib/draco-module-loader":"h9FQ","./lib/draco-parser":"SPtI"}],"Bnoo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("@babel/runtime/helpers/esm/typeof")),e=i(require("@babel/runtime/helpers/esm/slicedToArray")),r=i(require("@babel/runtime/helpers/esm/toConsumableArray")),a=i(require("@babel/runtime/helpers/esm/defineProperty")),n=i(require("@babel/runtime/helpers/esm/classCallCheck")),o=i(require("@babel/runtime/helpers/esm/createClass"));function i(t){return t&&t.__esModule?t:{default:t}}function d(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=c(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var a=0,n=function(){};return{s:n,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,d=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return i=t.done,t},e:function(t){d=!0,o=t},f:function(){try{i||null==r.return||r.return()}finally{if(d)throw o}}}}function c(t,e){if(t){if("string"==typeof t)return s(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(t,e):void 0}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,a=new Array(e);r<e;r++)a[r]=t[r];return a}function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,a)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),!0).forEach(function(e){(0,a.default)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var h={POSITION:"POSITION",NORMAL:"NORMAL",COLOR_0:"COLOR",TEXCOORD_0:"TEX_COORD"};function f(){}var y=function(){function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,n.default)(this,a),this.draco=t,this.dracoEncoder=new this.draco.Encoder,this.dracoMeshBuilder=new this.draco.MeshBuilder,this.dracoMetadataBuilder=new this.draco.MetadataBuilder,this.log=e.log||f}return(0,o.default)(a,[{key:"destroy",value:function(){this.destroyEncodedObject(this.dracoMeshBuilder),this.destroyEncodedObject(this.dracoEncoder),this.destroyEncodedObject(this.dracoMetadataBuilder),this.dracoMeshBuilder=null,this.dracoEncoder=null,this.draco=null}},{key:"destroyEncodedObject",value:function(t){t&&this.draco.destroy(t)}},{key:"encodeSync",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._setOptions(e),e.pointcloud?this._encodePointCloud(t,e):this._encodeMesh(t,e)}},{key:"_getAttributesFromMesh",value:function(t){var e=l(l({},t),t.attributes);return t.indices&&(e.indices=t.indices),e}},{key:"_encodePointCloud",value:function(t,e){var r=new this.draco.PointCloud;e.metadata&&this._addGeometryMetadata(r,e.metadata);var a=this._getAttributesFromMesh(t);this._createDracoPointCloud(r,a,e);var n=new this.draco.DracoInt8Array;try{var o=this.dracoEncoder.EncodePointCloudToDracoBuffer(r,!1,n);if(!(o>0))throw new Error("Draco encoding failed.");return this.log("DRACO encoded ".concat(r.num_points()," points\n        with ").concat(r.num_attributes()," attributes into ").concat(o," bytes")),b(n)}finally{this.destroyEncodedObject(n),this.destroyEncodedObject(r)}}},{key:"_encodeMesh",value:function(t,e){var r=new this.draco.Mesh;e.metadata&&this._addGeometryMetadata(r,e.metadata);var a=this._getAttributesFromMesh(t);this._createDracoMesh(r,a,e);var n=new this.draco.DracoInt8Array;try{var o=this.dracoEncoder.EncodeMeshToDracoBuffer(r,n);if(o<=0)throw new Error("Draco encoding failed.");return this.log("DRACO encoded ".concat(r.num_points()," points\n        with ").concat(r.num_attributes()," attributes into ").concat(o," bytes")),b(n)}finally{this.destroyEncodedObject(n),this.destroyEncodedObject(r)}}},{key:"_setOptions",value:function(t){var e;"speed"in t&&(e=this.dracoEncoder).SetSpeedOptions.apply(e,(0,r.default)(t.speed));if("method"in t){var a=this.draco[t.method];this.dracoEncoder.SetEncodingMethod(a)}if("quantization"in t)for(var n in t.quantization){var o=t.quantization[n],i=this.draco[n];this.dracoEncoder.SetAttributeQuantization(i,o)}}},{key:"_createDracoMesh",value:function(t,e,r){var a=r.attributesMetadata||{};try{var n=this._getPositionAttribute(e);if(!n)throw new Error("positions");var o=n.length/3;for(var i in e){var d=e[i];i=h[i]||i;var c=this._addAttributeToMesh(t,i,d,o);-1!==c&&this._addAttributeMetadata(t,c,l({name:i},a[i]||{}))}}catch(s){throw this.destroyEncodedObject(t),s}return t}},{key:"_createDracoPointCloud",value:function(t,e,r){var a=r.attributesMetadata||{};try{var n=this._getPositionAttribute(e);if(!n)throw new Error("positions");var o=n.length/3;for(var i in e){var d=e[i];i=h[i]||i;var c=this._addAttributeToMesh(t,i,d,o);-1!==c&&this._addAttributeMetadata(t,c,l({name:i},a[i]||{}))}}catch(s){throw this.destroyEncodedObject(t),s}return t}},{key:"_addAttributeToMesh",value:function(t,e,r,a){if(!ArrayBuffer.isView(r))return-1;var n=this._getDracoAttributeType(e),o=r.length/a;if("indices"===n){var i=r.length/3;return this.log("Adding attribute ".concat(e,", size ").concat(i)),this.dracoMeshBuilder.AddFacesToMesh(t,i,r),-1}this.log("Adding attribute ".concat(e,", size ").concat(o));var d=this.dracoMeshBuilder,c=r.buffer;switch(r.constructor){case Int8Array:return d.AddInt8Attribute(t,n,a,o,new Int8Array(c));case Int16Array:return d.AddInt16Attribute(t,n,a,o,new Int16Array(c));case Int32Array:return d.AddInt32Attribute(t,n,a,o,new Int32Array(c));case Uint8Array:case Uint8ClampedArray:return d.AddUInt8Attribute(t,n,a,o,new Uint8Array(c));case Uint16Array:return d.AddUInt16Attribute(t,n,a,o,new Uint16Array(c));case Uint32Array:return d.AddUInt32Attribute(t,n,a,o,new Uint32Array(c));case Float32Array:default:return d.AddFloatAttribute(t,n,a,o,new Float32Array(c))}}},{key:"_getDracoAttributeType",value:function(t){switch(t.toLowerCase()){case"indices":return"indices";case"position":case"positions":case"vertices":return this.draco.POSITION;case"normal":case"normals":return this.draco.NORMAL;case"color":case"colors":return this.draco.COLOR;case"texCoord":case"texCoords":return this.draco.TEX_COORD;default:return this.draco.GENERIC}}},{key:"_getPositionAttribute",value:function(t){for(var e in t){var r=t[e];if(this._getDracoAttributeType(e)===this.draco.POSITION)return r}return null}},{key:"_addGeometryMetadata",value:function(t,e){var r=new this.draco.Metadata;this._populateDracoMetadata(r,e),this.dracoMeshBuilder.AddMetadata(t,r)}},{key:"_addAttributeMetadata",value:function(t,e,r){var a=new this.draco.Metadata;this._populateDracoMetadata(a,r),this.dracoMeshBuilder.SetMetadataForAttribute(t,e,a)}},{key:"_populateDracoMetadata",value:function(r,a){var n,o=d(v(a));try{for(o.s();!(n=o.n()).done;){var i=(0,e.default)(n.value,2),c=i[0],s=i[1];switch((0,t.default)(s)){case"number":Math.trunc(s)===s?this.dracoMetadataBuilder.AddIntEntry(r,c,s):this.dracoMetadataBuilder.AddDoubleEntry(r,c,s);break;case"string":default:this.dracoMetadataBuilder.AddStringEntry(r,c,s)}}}catch(u){o.e(u)}finally{o.f()}}}]),a}();function b(t){for(var e=t.size(),r=new ArrayBuffer(e),a=new Int8Array(r),n=0;n<e;++n)a[n]=t.GetValue(n);return r}function v(t){return t.entries&&!t.hasOwnProperty("entries")?t.entries():Object.entries(t)}exports.default=y;
},{"@babel/runtime/helpers/esm/typeof":"zsbK","@babel/runtime/helpers/esm/slicedToArray":"TBeo","@babel/runtime/helpers/esm/toConsumableArray":"AdMH","@babel/runtime/helpers/esm/defineProperty":"iDM3","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph"}],"cK5m":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("@babel/runtime/regenerator")),r=u(require("@babel/runtime/helpers/esm/asyncToGenerator")),t=require("./lib/draco-module-loader"),n=u(require("./lib/draco-builder"));function u(e){return e&&e.__esModule?e:{default:e}}var o={name:"DRACO",extensions:["drc"],encode:a,options:{draco:{pointcloud:!1}}};function a(e,r){return d.apply(this,arguments)}function d(){return(d=(0,r.default)(e.default.mark(function r(u,o){var a,d,c,i;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=o&&o.draco||o||{},e.next=3,(0,t.loadDracoEncoderModule)(o||{});case 3:return d=e.sent,c=d.draco,i=new n.default(c),e.prev=6,e.abrupt("return",i.encodeSync(u,a));case 8:return e.prev=8,i.destroy(),e.finish(8);case 11:case"end":return e.stop()}},r,null,[[6,,8,11]])}))).apply(this,arguments)}exports.default=o;
},{"@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","./lib/draco-module-loader":"h9FQ","./lib/draco-builder":"Bnoo"}],"xort":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"DracoLoader",{enumerable:!0,get:function(){return e.DracoLoader}}),Object.defineProperty(exports,"DracoWorkerLoader",{enumerable:!0,get:function(){return e.DracoWorkerLoader}}),Object.defineProperty(exports,"DracoWriter",{enumerable:!0,get:function(){return r.default}});var e=require("./draco-loader"),r=t(require("./draco-writer"));function t(e){return e&&e.__esModule?e:{default:e}}
},{"./draco-loader":"s33A","./draco-writer":"cK5m"}],"z5Fc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GL=exports.GL_TYPE=exports.GL_PRIMITIVE_MODE=exports.GL_PRIMITIVE=void 0;var e=r(require("@babel/runtime/helpers/esm/defineProperty"));function r(e){return e&&e.__esModule?e:{default:e}}function t(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function o(r){for(var o=1;o<arguments.length;o++){var n=null!=arguments[o]?arguments[o]:{};o%2?t(Object(n),!0).forEach(function(t){(0,e.default)(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):t(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))})}return r}var n={POINTS:0,LINES:1,TRIANGLES:4};exports.GL_PRIMITIVE=n;var I={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};exports.GL_PRIMITIVE_MODE=I;var O={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DOUBLE:5130};exports.GL_TYPE=O;var p=o(o({},I),O);exports.GL=p;
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3"}],"IMbA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,r=u(require("@babel/runtime/helpers/esm/classCallCheck")),t=u(require("@babel/runtime/helpers/esm/createClass")),a=u(require("@babel/runtime/helpers/esm/defineProperty")),n=require("../constants");function u(e){return e&&e.__esModule?e:{default:e}}var T=(e={},(0,a.default)(e,n.GL_TYPE.DOUBLE,Float64Array),(0,a.default)(e,n.GL_TYPE.FLOAT,Float32Array),(0,a.default)(e,n.GL_TYPE.UNSIGNED_SHORT,Uint16Array),(0,a.default)(e,n.GL_TYPE.UNSIGNED_INT,Uint32Array),(0,a.default)(e,n.GL_TYPE.UNSIGNED_BYTE,Uint8Array),(0,a.default)(e,n.GL_TYPE.BYTE,Int8Array),(0,a.default)(e,n.GL_TYPE.SHORT,Int16Array),(0,a.default)(e,n.GL_TYPE.INT,Int32Array),e),E={DOUBLE:n.GL_TYPE.DOUBLE,FLOAT:n.GL_TYPE.FLOAT,UNSIGNED_SHORT:n.GL_TYPE.UNSIGNED_SHORT,UNSIGNED_INT:n.GL_TYPE.UNSIGNED_INT,UNSIGNED_BYTE:n.GL_TYPE.UNSIGNED_BYTE,BYTE:n.GL_TYPE.BYTE,SHORT:n.GL_TYPE.SHORT,INT:n.GL_TYPE.INT},_="Failed to convert GL type",l=function(){function e(){(0,r.default)(this,e)}return(0,t.default)(e,null,[{key:"fromTypedArray",value:function(e){for(var r in e=ArrayBuffer.isView(e)?e.constructor:e,T){if(T[r]===e)return r}throw new Error(_)}},{key:"fromName",value:function(e){var r=E[e];if(!r)throw new Error(_);return r}},{key:"getArrayType",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];switch(e){case n.GL_TYPE.UNSIGNED_SHORT_5_6_5:case n.GL_TYPE.UNSIGNED_SHORT_4_4_4_4:case n.GL_TYPE.UNSIGNED_SHORT_5_5_5_1:return Uint16Array;default:var r=T[e];if(!r)throw new Error(_);return r}}},{key:"getByteSize",value:function(r){return e.getArrayType(r).BYTES_PER_ELEMENT}},{key:"validate",value:function(r){return Boolean(e.getArrayType(r))}},{key:"createTypedArray",value:function(r,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3?arguments[3]:void 0;return void 0===n&&(n=(t.byteLength-a)/e.getByteSize(r)),new(e.getArrayType(r))(t,a,n)}}]),e}();exports.default=l;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/defineProperty":"iDM3","../constants":"z5Fc"}],"ARQZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=t(require("@babel/runtime/helpers/esm/typeof"));function t(e){return e&&e.__esModule?e:{default:e}}function r(t){return t&&"object"===(0,e.default)(t)&&t.mode&&t.attributes&&"object"===(0,e.default)(t.attributes)}
},{"@babel/runtime/helpers/esm/typeof":"zsbK"}],"UBEw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.makeAttributeIterator=a;var e=r(require("@babel/runtime/regenerator"));function r(e){return e&&e.__esModule?e:{default:e}}var t=e.default.mark(a);function a(r){var a,n,u,s,o,c;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=r.values,n=r.size,u=a.constructor,s=new u(n),o=0;case 4:if(!(o<a.length)){e.next=11;break}for(c=0;c<n;c++)s[c]=s[o+c];return e.next=8,s;case 8:o+=n,e.next=4;break;case 11:case"end":return e.stop()}},t)}
},{"@babel/runtime/regenerator":"m4eR"}],"jKTd":[function(require,module,exports) {
"use strict";function e(e,t){if(!e)throw new Error("math.gl assertion failed. ".concat(t))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"dBhB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getPrimitiveModeType=r,exports.isPrimitiveModeExpandable=s,exports.getPrimitiveModeExpandedLength=a;var e=require("../constants"),t=L(require("../utils/assert"));function L(e){return e&&e.__esModule?e:{default:e}}function r(L){switch(L){case e.GL.POINTS:return e.GL.POINTS;case e.GL.LINES:case e.GL.LINE_STRIP:case e.GL.LINE_LOOP:return e.GL.LINES;case e.GL.TRIANGLES:case e.GL.TRIANGLE_STRIP:case e.GL.TRIANGLE_FAN:return e.GL.TRIANGLES;default:return(0,t.default)(!1)}}function s(t){switch(t){case e.GL.LINE_STRIP:case e.GL.LINE_LOOP:case e.GL.TRIANGLE_STRIP:case e.GL.TRIANGLE_FAN:return!0;default:return!1}}function a(L,r){switch(L){case e.GL.POINTS:case e.GL.LINES:case e.GL.LINE_STRIP:return r;case e.GL.LINE_LOOP:return r+1;case e.GL.TRIANGLES:return r;case e.GL.TRIANGLE_STRIP:case e.GL.TRIANGLE_FAN:return 3*(r-2);default:return(0,t.default)(!1)}}
},{"../constants":"z5Fc","../utils/assert":"jKTd"}],"X5yK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.makePrimitiveIterator=s;var e=a(require("@babel/runtime/regenerator")),r=require("../constants"),t=require("../primitives/modes"),i=require("@loaders.gl/loader-utils");function a(e){return e&&e.__esModule?e:{default:e}}var u=e.default.mark(s);function s(a){var s,n,c,b,o,d,p,l;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s=a.indices,n=a.attributes,c=a.mode,b=a.start,o=void 0===b?0:b,d=a.end,s&&(s=s.values||s.value||s),void 0===d&&(d=s?s.length:o),p={attributes:n,type:(0,t.getPrimitiveModeType)(c),i1:0,i2:0,i3:0},l=o;case 5:if(!(l<d)){e.next=44;break}e.t0=c,e.next=e.t0===r.GL.POINTS?9:e.t0===r.GL.LINES?12:e.t0===r.GL.LINE_STRIP?16:e.t0===r.GL.LINE_LOOP?20:e.t0===r.GL.TRIANGLES?24:e.t0===r.GL.TRIANGLE_STRIP?29:e.t0===r.GL.TRIANGLE_FAN?33:38;break;case 9:return p.i1=l,l+=1,e.abrupt("break",39);case 12:return p.i1=l,p.i2=l+1,l+=2,e.abrupt("break",39);case 16:case 20:return p.i1=l,p.i2=l+1,l+=1,e.abrupt("break",39);case 24:return p.i1=l,p.i2=l+1,p.i3=l+2,l+=3,e.abrupt("break",39);case 29:return p.i1=l,p.i2=l+1,l+=1,e.abrupt("break",39);case 33:return p.i1=1,p.i2=l,p.i3=l+1,l+=1,e.abrupt("break",39);case 38:(0,i.assert)(!1);case 39:return s&&"i1"in p&&(p.i1=s[p.i1],p.i2=s[p.i2],p.i3=s[p.i3]),e.next=42,p;case 42:e.next=5;break;case 44:case"end":return e.stop()}},u)}
},{"@babel/runtime/regenerator":"m4eR","../constants":"z5Fc","../primitives/modes":"dBhB","@loaders.gl/loader-utils":"oHIH"}],"GLDb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getPositions=u;var e=r(require("../is-geometry")),t=r(require("../utils/assert"));function r(e){return e&&e.__esModule?e:{default:e}}function u(r){if((0,e.default)(r)){var u=r.attributes,s=u.POSITION||u.positions;return(0,t.default)(s),s}return ArrayBuffer.isView(r)?{values:r,size:3}:r?((0,t.default)(r.values),r):(0,t.default)(!1)}
},{"../is-geometry":"ARQZ","../utils/assert":"jKTd"}],"ztr2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.computeVertexNormals=l;var r=require("@math.gl/core"),e=require("../constants"),t=a(require("../utils/assert")),n=require("../iterators/primitive-iterator"),o=require("../primitives/modes"),i=require("./get-attribute-from-geometry");function a(r){return r&&r.__esModule?r:{default:r}}function u(r,e){var t;if("undefined"==typeof Symbol||null==r[Symbol.iterator]){if(Array.isArray(r)||(t=s(r))||e&&r&&"number"==typeof r.length){t&&(r=t);var n=0,o=function(){};return{s:o,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(r){throw r},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){t=r[Symbol.iterator]()},n:function(){var r=t.next();return a=r.done,r},e:function(r){u=!0,i=r},f:function(){try{a||null==t.return||t.return()}finally{if(u)throw i}}}}function s(r,e){if(r){if("string"==typeof r)return c(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?c(r,e):void 0}}function c(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function l(a){var s=a.mode,c=a.indices,l=a.attributes;(0,t.default)((0,o.getPrimitiveModeType)(s)===e.GL.TRIANGLES,"TRIANGLES required");var f,m=(0,i.getPositions)({mode:s,indices:c,attributes:l}).values,y=new Float32Array(m.length),d=new r.Vector3,v=new r.Vector3,b=new r.Vector3,p=new r.Vector3,g=new r.Vector3,h=u((0,n.makePrimitiveIterator)({mode:s,indices:c,attributes:l}));try{for(h.s();!(f=h.n()).done;){var A=f.value;d.fromArray(m,3*A.i1),v.fromArray(m,3*A.i2+3),b.fromArray(m,3*A.i3+6),p.subVectors(b,v),g.subVectors(d,v);var w=p.cross(g);w.normalize();var x=A.primitiveIndex;y[9*x+0]=w.x,y[9*x+1]=w.y,y[9*x+2]=w.z,y[9*x+3]=w.x,y[9*x+4]=w.y,y[9*x+5]=w.z,y[9*x+6]=w.x,y[9*x+7]=w.y,y[9*x+8]=w.z}}catch(S){h.e(S)}finally{h.f()}return y}
},{"@math.gl/core":"dwLx","../constants":"z5Fc","../utils/assert":"jKTd","../iterators/primitive-iterator":"X5yK","../primitives/modes":"dBhB","./get-attribute-from-geometry":"GLDb"}],"IxC9":[function(require,module,exports) {
"use strict";function e(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],t=e>>11&31,r=e>>5&63,n=31&e;return o[0]=t<<3,o[1]=r<<2,o[2]=n<<3,o}function o(e){return Math.floor(e[0]/8)+4+(Math.floor(e[1]/4)+2<<5)+(Math.floor(e[2]/8)+4<<11)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.decodeRGB565=e,exports.encodeRGB565=o;
},{}],"uONL":[function(require,module,exports) {
"use strict";function r(r){for(var e=0,t=0;t<r.length;++t)e+=r[t].byteLength;for(var n=new Uint8Array(e),a=0,o=0;o<r.length;++o){var f=new Uint8Array(r[o].buffer);e=f.length;for(var s=0;s<e;++s)n[a++]=f[s]}return n}Object.defineProperty(exports,"__esModule",{value:!0}),exports.concatTypedArrays=r;
},{}],"dW6r":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.octEncodeInRange=h,exports.octEncode=y,exports.octEncodeToVector4=p,exports.octDecodeInRange=M,exports.octDecode=b,exports.octDecodeFromVector4=v,exports.octPackFloat=g,exports.octEncodeFloat=m,exports.octDecodeFloat=w,exports.octPack=z,exports.octUnpack=E,exports.compressTextureCoordinates=D,exports.decompressTextureCoordinates=V,exports.zigZagDeltaDecode=F;var t=require("@math.gl/core"),e=r(require("../utils/assert"));function r(t){return t&&t.__esModule?t:{default:t}}var n=1/256,o=256,a=new t.Vector2,u=new t.Vector3,c=new t.Vector2,s=new t.Vector2,f=new Uint8Array(1);function i(t){return f[0]=t,f[0]}function d(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:255;return(0,t.clamp)(e,0,r)/r*2-1}function l(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:255;return Math.round((.5*(0,t.clamp)(e,-1,1)+.5)*r)}function x(t){return t<0?-1:1}function h(r,n,o){(0,e.default)(r),(0,e.default)(o);var a=u.from(r);if((0,e.default)(Math.abs(a.magnitudeSquared()-1)<=t._MathUtils.EPSILON6),o.x=r.x/(Math.abs(r.x)+Math.abs(r.y)+Math.abs(r.z)),o.y=r.y/(Math.abs(r.x)+Math.abs(r.y)+Math.abs(r.z)),r.z<0){var c=o.x,s=o.y;o.x=(1-Math.abs(s))*x(c),o.y=(1-Math.abs(c))*x(s)}return o.x=l(o.x,n),o.y=l(o.y,n),o}function y(t,e){return h(t,255,e)}function p(t,e){return h(t,65535,s),e.x=i(s.x*n),e.y=i(s.x),e.z=i(s.y*n),e.w=i(s.y),e}function M(t,r,n,o){if((0,e.default)(o),t<0||t>n||r<0||r>n)throw new Error("x and y must be unsigned normalized integers between 0 and ".concat(n));if(o.x=d(t,n),o.y=d(r,n),o.z=1-(Math.abs(o.x)+Math.abs(o.y)),o.z<0){var a=o.x;o.x=(1-Math.abs(o.y))*x(a),o.y=(1-Math.abs(a))*x(o.y)}return o.normalize()}function b(t,e,r){return M(t,e,255,r)}function v(t,r){(0,e.default)(t),(0,e.default)(r);var n=t.x,a=t.y,u=t.z,c=t.w;if(n<0||n>255||a<0||a>255||u<0||u>255||c<0||c>255)throw new Error("x, y, z, and w must be unsigned normalized integers between 0 and 255");return M(n*o+a,u*o+c,65535,r)}function g(t){var e=a.from(t);return 256*e.x+e.y}function m(t){return y(t,c),g(c)}function w(t,r){(0,e.default)(Number.isFinite(t));var n=t/256,o=Math.floor(n);return b(o,256*(n-o),r)}function z(t,r,n,o){(0,e.default)(t),(0,e.default)(r),(0,e.default)(n),(0,e.default)(o);var a=m(t),u=m(r),s=y(n,c);return o.x=65536*s.x+a,o.y=65536*s.y+u,o}function E(t,e,r,n){var o=t.x/65536,a=Math.floor(o),u=65536*(o-a);o=t.y/65536;var c=Math.floor(o),s=65536*(o-c);w(u,e),w(s,r),b(a,c,n)}function D(t){return 4096*(4095*t.x|0)+(4095*t.y|0)}function V(t,e){var r=t/4096,n=Math.floor(r);return e.x=n/4095,e.y=(t-4096*n)/4095,e}function F(t,r,n){function o(t){return t>>1^-(1&t)}(0,e.default)(t),(0,e.default)(r),(0,e.default)(t.length===r.length),n&&(0,e.default)(t.length===n.length);for(var a=0,u=0,c=0,s=0;s<t.length;++s)a+=o(t[s]),u+=o(r[s]),t[s]=a,r[s]=u,n&&(c+=o(n[s]),n[s]=c)}
},{"@math.gl/core":"dwLx","../utils/assert":"jKTd"}],"nR0E":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"GL",{enumerable:!0,get:function(){return e.GL}}),Object.defineProperty(exports,"GL_TYPE",{enumerable:!0,get:function(){return e.GL_TYPE}}),Object.defineProperty(exports,"GLType",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"isGeometry",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"makeAttributeIterator",{enumerable:!0,get:function(){return o.makeAttributeIterator}}),Object.defineProperty(exports,"makePrimitiveIterator",{enumerable:!0,get:function(){return n.makePrimitiveIterator}}),Object.defineProperty(exports,"computeVertexNormals",{enumerable:!0,get:function(){return c.computeVertexNormals}}),Object.defineProperty(exports,"encodeRGB565",{enumerable:!0,get:function(){return u.encodeRGB565}}),Object.defineProperty(exports,"decodeRGB565",{enumerable:!0,get:function(){return u.decodeRGB565}}),Object.defineProperty(exports,"concatTypedArrays",{enumerable:!0,get:function(){return i.concatTypedArrays}}),Object.defineProperty(exports,"octEncodeInRange",{enumerable:!0,get:function(){return a.octEncodeInRange}}),Object.defineProperty(exports,"octEncode",{enumerable:!0,get:function(){return a.octEncode}}),Object.defineProperty(exports,"octEncodeToVector4",{enumerable:!0,get:function(){return a.octEncodeToVector4}}),Object.defineProperty(exports,"octDecodeInRange",{enumerable:!0,get:function(){return a.octDecodeInRange}}),Object.defineProperty(exports,"octDecode",{enumerable:!0,get:function(){return a.octDecode}}),Object.defineProperty(exports,"octDecodeFromVector4",{enumerable:!0,get:function(){return a.octDecodeFromVector4}}),Object.defineProperty(exports,"octPackFloat",{enumerable:!0,get:function(){return a.octPackFloat}}),Object.defineProperty(exports,"octEncodeFloat",{enumerable:!0,get:function(){return a.octEncodeFloat}}),Object.defineProperty(exports,"octDecodeFloat",{enumerable:!0,get:function(){return a.octDecodeFloat}}),Object.defineProperty(exports,"octPack",{enumerable:!0,get:function(){return a.octPack}}),Object.defineProperty(exports,"octUnpack",{enumerable:!0,get:function(){return a.octUnpack}}),Object.defineProperty(exports,"compressTextureCoordinates",{enumerable:!0,get:function(){return a.compressTextureCoordinates}}),Object.defineProperty(exports,"decompressTextureCoordinates",{enumerable:!0,get:function(){return a.decompressTextureCoordinates}}),Object.defineProperty(exports,"zigZagDeltaDecode",{enumerable:!0,get:function(){return a.zigZagDeltaDecode}});var e=require("./geometry/constants"),t=p(require("./geometry/gl/gl-type")),r=p(require("./geometry/is-geometry")),o=require("./geometry/iterators/attribute-iterator"),n=require("./geometry/iterators/primitive-iterator"),c=require("./geometry/attributes/compute-vertex-normals"),u=require("./geometry/colors/rgb565"),i=require("./geometry/typed-arrays/typed-array-utils"),a=require("./geometry/compression/attribute-compression");function p(e){return e&&e.__esModule?e:{default:e}}
},{"./geometry/constants":"z5Fc","./geometry/gl/gl-type":"IMbA","./geometry/is-geometry":"ARQZ","./geometry/iterators/attribute-iterator":"UBEw","./geometry/iterators/primitive-iterator":"X5yK","./geometry/attributes/compute-vertex-normals":"ztr2","./geometry/colors/rgb565":"IxC9","./geometry/typed-arrays/typed-array-utils":"uONL","./geometry/compression/attribute-compression":"dW6r"}],"nbpZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("@babel/runtime/helpers/esm/classCallCheck")),r=n(require("@babel/runtime/helpers/esm/createClass")),t=require("@loaders.gl/math");function n(e){return e&&e.__esModule?e:{default:e}}var s=function(){function n(r,t){(0,e.default)(this,n),this.json=r,this.buffer=t,this.featuresLength=0,this._cachedTypedArrays={}}return(0,r.default)(n,[{key:"getExtension",value:function(e){return this.json.extensions&&this.json.extensions[e]}},{key:"hasProperty",value:function(e){return Boolean(this.json[e])}},{key:"getGlobalProperty",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.GL.UNSIGNED_INT,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=this.json[e];return s&&Number.isFinite(s.byteOffset)?this._getTypedArrayFromBinary(e,r,n,1,s.byteOffset):s}},{key:"getPropertyArray",value:function(e,r,n){var s=this.json[e];return s&&Number.isFinite(s.byteOffset)?("componentType"in s&&(r=t.GLType.fromName(s.componentType)),this._getTypedArrayFromBinary(e,r,n,this.featuresLength,s.byteOffset)):this._getTypedArrayFromArray(e,r,s)}},{key:"getProperty",value:function(e,r,t,n,s){var a=this.json[e];if(!a)return a;var i=this.getPropertyArray(e,r,t);if(1===t)return i[n];for(var u=0;u<t;++u)s[u]=i[t*n+u];return s}},{key:"_getTypedArrayFromBinary",value:function(e,r,n,s,a){var i=this._cachedTypedArrays,u=i[e];return u||(u=t.GLType.createTypedArray(r,this.buffer.buffer,this.buffer.byteOffset+a,s*n),i[e]=u),u}},{key:"_getTypedArrayFromArray",value:function(e,r,n){var s=this._cachedTypedArrays,a=s[e];return a||(a=t.GLType.createTypedArray(r,n),s[e]=a),a}}]),n}();exports.default=s;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@loaders.gl/math":"nR0E"}],"cotp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createTypedArrayFromAccessor=o;var e=require("@loaders.gl/math"),n=require("@loaders.gl/loader-utils"),r={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},t={SCALAR:function(e,n){return e[n]},VEC2:function(e,n){return[e[2*n+0],e[2*n+1]]},VEC3:function(e,n){return[e[3*n+0],e[3*n+1],e[3*n+2]]},VEC4:function(e,n){return[e[4*n+0],e[4*n+1],e[4*n+2],e[4*n+3]]},MAT2:function(e,n){return[e[4*n+0],e[4*n+1],e[4*n+2],e[4*n+3]]},MAT3:function(e,n){return[e[9*n+0],e[9*n+1],e[9*n+2],e[9*n+3],e[9*n+4],e[9*n+5],e[9*n+6],e[9*n+7],e[9*n+8]]},MAT4:function(e,n){return[e[16*n+0],e[16*n+1],e[16*n+2],e[16*n+3],e[16*n+4],e[16*n+5],e[16*n+6],e[16*n+7],e[16*n+8],e[16*n+9],e[16*n+10],e[16*n+11],e[16*n+12],e[16*n+13],e[16*n+14],e[16*n+15]]}},u={SCALAR:function(e,n,r){n[r]=e},VEC2:function(e,n,r){n[2*r+0]=e[0],n[2*r+1]=e[1]},VEC3:function(e,n,r){n[3*r+0]=e[0],n[3*r+1]=e[1],n[3*r+2]=e[2]},VEC4:function(e,n,r){n[4*r+0]=e[0],n[4*r+1]=e[1],n[4*r+2]=e[2],n[4*r+3]=e[3]},MAT2:function(e,n,r){n[4*r+0]=e[0],n[4*r+1]=e[1],n[4*r+2]=e[2],n[4*r+3]=e[3]},MAT3:function(e,n,r){n[9*r+0]=e[0],n[9*r+1]=e[1],n[9*r+2]=e[2],n[9*r+3]=e[3],n[9*r+4]=e[4],n[9*r+5]=e[5],n[9*r+6]=e[6],n[9*r+7]=e[7],n[9*r+8]=e[8],n[9*r+9]=e[9]},MAT4:function(e,n,r){n[16*r+0]=e[0],n[16*r+1]=e[1],n[16*r+2]=e[2],n[16*r+3]=e[3],n[16*r+4]=e[4],n[16*r+5]=e[5],n[16*r+6]=e[6],n[16*r+7]=e[7],n[16*r+8]=e[8],n[16*r+9]=e[9],n[16*r+10]=e[10],n[16*r+11]=e[11],n[16*r+12]=e[12],n[16*r+13]=e[13],n[16*r+14]=e[14],n[16*r+15]=e[15]}};function o(o,c,i,f){var p=o.componentType;(0,n.assert)(o.componentType);var A="string"==typeof p?e.GLType.fromName(p):p,a=r[o.type],s=t[o.type],y=u[o.type];return i+=o.byteOffset,{values:e.GLType.createTypedArray(A,c,i,a*f),type:A,size:a,unpacker:s,packer:y}}
},{"@loaders.gl/math":"nR0E","@loaders.gl/loader-utils":"oHIH"}],"GVhR":[function(require,module,exports) {
"use strict";function e(e){throw new TypeError('"'+e+'" is read-only')}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"YIox":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.initializeHierarchy=n,exports.traverseHierarchy=s;var e=t(require("@babel/runtime/helpers/esm/readOnlyError"));function t(e){return e&&e.__esModule?e:{default:e}}var r=function(e){return void 0!==e};function n(e,t,r){if(!t)return null;var n=e.getExtension("3DTILES_batch_table_hierarchy"),s=t.HIERARCHY;return s&&(console.warn("3D Tile Parser: HIERARCHY is deprecated. Use 3DTILES_batch_table_hierarchy."),t.extensions=t.extensions||{},t.extensions["3DTILES_batch_table_hierarchy"]=s,n=s),n?a(n,r):null}function a(t,n){var a,s,c,f,o=t.instancesLength,u=t.classes,l=t.classIds,p=t.parentCounts,d=t.parentIds,y=o;if(r(l.byteOffset)&&(l.componentType=defaultValue(l.componentType,GL.UNSIGNED_SHORT),l.type=AttributeType.SCALAR,c=getBinaryAccessor(l),(0,e.default)("classIds"),l=c.createArrayBufferView(n.buffer,n.byteOffset+l.byteOffset,o)),r(p))for(r(p.byteOffset)&&(p.componentType=defaultValue(p.componentType,GL.UNSIGNED_SHORT),p.type=AttributeType.SCALAR,c=getBinaryAccessor(p),(0,e.default)("parentCounts"),p=c.createArrayBufferView(n.buffer,n.byteOffset+p.byteOffset,o)),f=new Uint16Array(o),(0,e.default)("parentIdsLength"),y=0,a=0;a<o;++a)f[a]=y,y+=((0,e.default)("parentIdsLength"),p[a]);r(d)&&r(d.byteOffset)&&(d.componentType=defaultValue(d.componentType,GL.UNSIGNED_SHORT),d.type=AttributeType.SCALAR,c=getBinaryAccessor(d),(0,e.default)("parentIds"),d=c.createArrayBufferView(n.buffer,n.byteOffset+d.byteOffset,y));var h=u.length;for(a=0;a<h;++a){var b=u[a].length,I=u[a].instances,v=getBinaryProperties(b,I,n);u[a].instances=combine(v,I)}var A=new Array(h).fill(0),g=new Uint16Array(o);for(a=0;a<o;++a)s=l[a],g[a]=A[s],++A[s];var T={classes:u,classIds:l,classIndexes:g,parentCounts:p,parentIndexes:f,parentIds:d};return i(T),T}function s(e,t,r){if(e){var n=e.parentCounts;return e.parentIds?r(e,t):n>0?c(e,t,r):f(e,t,r)}}function c(e,t,n){var a=e.classIds,s=e.parentCounts,c=e.parentIds,f=e.parentIndexes,i=a.length,o=scratchVisited;o.length=Math.max(o.length,i);var u=++marker,l=scratchStack;for(l.length=0,l.push(t);l.length>0;)if(o[t=l.pop()]!==u){o[t]=u;var p=n(e,t);if(r(p))return p;for(var d=s[t],y=f[t],h=0;h<d;++h){var b=c[y+h];b!==t&&l.push(b)}}return null}function f(e,t,n){for(var a=!0;a;){var s=n(e,t);if(r(s))return s;var c=e.parentIds[t];a=c!==t,t=c}throw new Error("traverseHierarchySingleParent")}function i(e){for(var t=e.classIds.length,r=0;r<t;++r)o(e,r,stack)}function o(e,t,n){var a=e.parentCounts,s=e.parentIds,c=e.parentIndexes,f=e.classIds.length;if(r(s)){assert(t<f,"Parent index ".concat(t," exceeds the total number of instances: ").concat(f)),assert(-1===n.indexOf(t),"Circular dependency detected in the batch table hierarchy."),n.push(t);for(var i=r(a)?a[t]:1,u=r(a)?c[t]:t,l=0;l<i;++l){var p=s[u+l];p!==t&&o(e,p,n)}n.pop(t)}}
},{"@babel/runtime/helpers/esm/readOnlyError":"GVhR"}],"DJYW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("@babel/runtime/helpers/esm/toConsumableArray")),r=n(require("@babel/runtime/helpers/esm/classCallCheck")),t=n(require("@babel/runtime/helpers/esm/createClass")),s=require("@loaders.gl/loader-utils"),i=require("./helpers/tile-3d-accessor-utils"),a=require("./tile-3d-batch-table-hierarchy");function n(e){return e&&e.__esModule?e:{default:e}}function h(e){return null!=e}var c=function(e,r){return e},o={HIERARCHY:!0,extensions:!0,extras:!0},y=function(){function n(e,t,i){var h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};for(var c in(0,r.default)(this,n),(0,s.assert)(i>=0),this.json=e||{},this.binary=t,this.featureCount=i,this._extensions=this.json&&this.json.extensions||{},this._properties={},this.json)o[c]||(this._properties[c]=this.json[c]);this._binaryProperties=this._initializeBinaryProperties(),h["3DTILES_batch_table_hierarchy"]&&(this._hierarchy=(0,a.initializeHierarchy)(this,this.json,this.binary))}return(0,t.default)(n,[{key:"getExtension",value:function(e){return this.json&&this.json.extensions&&this.json.extensions[e]}},{key:"memorySizeInBytes",value:function(){return 0}},{key:"isClass",value:function(e,r){return this._checkBatchId(e),(0,s.assert)("string"==typeof r,r),!!this._hierarchy&&h((0,a.traverseHierarchy)(this._hierarchy,e,function(e,t){var s=e.classIds[t];return e.classes[s].name===r}))}},{key:"isExactClass",value:function(e,r){return(0,s.assert)("string"==typeof r,r),this.getExactClassName(e)===r}},{key:"getExactClassName",value:function(e){if(this._checkBatchId(e),this._hierarchy){var r=this._hierarchy.classIds[e];return this._hierarchy.classes[r].name}}},{key:"hasProperty",value:function(e,r){return this._checkBatchId(e),(0,s.assert)("string"==typeof r,r),h(this._properties[r])||this._hasPropertyInHierarchy(e,r)}},{key:"getPropertyNames",value:function(r,t){var s;this._checkBatchId(r),(t=h(t)?t:[]).length=0;var i=Object.keys(this._properties);return(s=t).push.apply(s,(0,e.default)(i)),this._hierarchy&&this._getPropertyNamesInHierarchy(r,t),t}},{key:"getProperty",value:function(e,r){if(this._checkBatchId(e),(0,s.assert)("string"==typeof r,r),this._binaryProperties){var t=this._binaryProperties[r];if(h(t))return this._getBinaryProperty(t,e)}var i=this._properties[r];if(h(i))return c(i[e],!0);if(this._hierarchy){var a=this._getHierarchyProperty(e,r);if(h(a))return a}}},{key:"setProperty",value:function(e,r,t){var i=this.featureCount;if(this._checkBatchId(e),(0,s.assert)("string"==typeof r,r),this._binaryProperties){var a=this._binaryProperties[r];if(a)return void this._setBinaryProperty(a,e,t)}if(!this._hierarchy||!this._setHierarchyProperty(this,e,r,t)){var n=this._properties[r];h(n)||(this._properties[r]=new Array(i),n=this._properties[r]),n[e]=c(t,!0)}}},{key:"_checkBatchId",value:function(e){if(!(e>=0&&e<this.featureCount))throw new Error("batchId not in range [0, featureCount - 1].")}},{key:"_getBinaryProperty",value:function(e,r){return e.unpack(e.typedArray,r)}},{key:"_setBinaryProperty",value:function(e,r,t){e.pack(t,e.typedArray,r)}},{key:"_initializeBinaryProperties",value:function(){var e=null;for(var r in this._properties){var t=this._properties[r],s=this._initializeBinaryProperty(r,t);s&&((e=e||{})[r]=s)}return e}},{key:"_initializeBinaryProperty",value:function(e,r){if("byteOffset"in r){var t=r;(0,s.assert)(this.binary,"Property ".concat(e," requires a batch table binary.")),(0,s.assert)(t.type,"Property ".concat(e," requires a type."));var a=(0,i.createTypedArrayFromAccessor)(t,this.binary.buffer,0|this.binary.byteOffset,this.featureCount);return{typedArray:a.values,componentCount:a.size,unpack:a.unpacker,pack:a.packer}}return null}},{key:"_hasPropertyInHierarchy",value:function(e,r){if(!this._hierarchy)return!1;var t=(0,a.traverseHierarchy)(this._hierarchy,e,function(e,t){var s=e.classIds[t];return h(e.classes[s].instances[r])});return h(t)}},{key:"_getPropertyNamesInHierarchy",value:function(e,r){(0,a.traverseHierarchy)(this._hierarchy,e,function(e,t){var s=e.classIds[t],i=e.classes[s].instances;for(var a in i)i.hasOwnProperty(a)&&-1===r.indexOf(a)&&r.push(a)})}},{key:"_getHierarchyProperty",value:function(e,r){var t=this;return(0,a.traverseHierarchy)(this._hierarchy,e,function(e,s){var i=e.classIds[s],a=e.classes[i],n=e.classIndexes[s],o=a.instances[r];return h(o)?h(o.typedArray)?t._getBinaryProperty(o,n):c(o[n],!0):null})}},{key:"_setHierarchyProperty",value:function(e,r,t,i){var n=this,o=(0,a.traverseHierarchy)(this._hierarchy,r,function(e,a){var o=e.classIds[a],y=e.classes[o],u=e.classIndexes[a],l=y.instances[t];return!!h(l)&&((0,s.assert)(a===r,'Inherited property "'.concat(t,'" is read-only.')),h(l.typedArray)?n._setBinaryProperty(l,u,i):l[u]=c(i,!0),!0)});return h(o)}}]),n}();exports.default=y;
},{"@babel/runtime/helpers/esm/toConsumableArray":"AdMH","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@loaders.gl/loader-utils":"oHIH","./helpers/tile-3d-accessor-utils":"cotp","./tile-3d-batch-table-hierarchy":"YIox"}],"u2db":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parse3DTileHeaderSync=t;var e=4;function t(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=new DataView(r);if(t.magic=i.getUint32(n,!0),n+=e,t.version=i.getUint32(n,!0),n+=e,t.byteLength=i.getUint32(n,!0),n+=e,1!==t.version)throw new Error("3D Tile Version ".concat(t.version," not supported"));return n}
},{}],"OEpE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parse3DTileTablesHeaderSync=r,exports.parse3DTileTablesSync=t;var e=require("./parse-utils"),a=4;function r(e,r,t){var n=new DataView(r);return e.header=e.header||{},e.header.featureTableJsonByteLength=n.getUint32(t,!0),t+=a,e.header.featureTableBinaryByteLength=n.getUint32(t,!0),t+=a,e.header.batchTableJsonByteLength=n.getUint32(t,!0),t+=a,e.header.batchTableBinaryByteLength=n.getUint32(t,!0),t+=a}function t(e,a,r,t){return r=i(e,a,r=n(e,a,r,t),t)}function n(a,r,t,n){var i=a.header,b=i.featureTableJsonByteLength,h=i.featureTableBinaryByteLength;if(a.featureTableJson={BATCH_LENGTH:0},b>0){var y=(0,e.getStringFromArrayBuffer)(r,t,b);a.featureTableJson=JSON.parse(y)}return t+=b,a.featureTableBinary=new Uint8Array(r,t,h),t+=h}function i(a,r,t,n){var i=a.header,b=i.batchTableJsonByteLength,h=i.batchTableBinaryByteLength;if(b>0){var y=(0,e.getStringFromArrayBuffer)(r,t,b);a.batchTableJson=JSON.parse(y),t+=b,h>0&&(a.batchTableBinary=new Uint8Array(r,t,h),a.batchTableBinary=new Uint8Array(a.batchTableBinary),t+=h)}return t}
},{"./parse-utils":"JJDe"}],"tz3C":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.normalize3DTileColorAttribute=r;var e=require("@loaders.gl/math");function r(r,t,a){if(!(t||r&&r.batchIds&&a))return null;var i=r.batchIds,n=r.isRGB565,o=r.pointCount;if(i&&a){for(var l=new Uint8ClampedArray(3*o),u=0;u<o;u++){var s=i[u],d=a.getProperty(s,"dimensions").map(function(e){return 255*e});l[3*u]=d[0],l[3*u+1]=d[1],l[3*u+2]=d[2]}return{type:e.GL.UNSIGNED_BYTE,value:l,size:3,normalized:!0}}if(n){for(var p=new Uint8ClampedArray(3*o),v=0;v<o;v++){var m=(0,e.decodeRGB565)(t[v]);p[3*v]=m[0],p[3*v+1]=m[1],p[3*v+2]=m[2]}return{type:e.GL.UNSIGNED_BYTE,value:p,size:3,normalized:!0}}return t&&t.length===3*o?{type:e.GL.UNSIGNED_BYTE,value:t,size:3,normalized:!0}:{type:e.GL.UNSIGNED_BYTE,value:t,size:4,normalized:!0}}
},{"@loaders.gl/math":"nR0E"}],"bICZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.normalize3DTileNormalAttribute=o;var e=require("@math.gl/core"),r=require("@loaders.gl/math"),t=new e.Vector3;function o(e,o){if(!o)return null;if(e.isOctEncoded16P){for(var i=new Float32Array(3*e.pointsLength),n=0;n<e.pointsLength;n++)(0,r.octDecode)(o[2*n],o[2*n+1],t),t.toArray(i,3*n);return{type:r.GL.FLOAT,size:2,value:i}}return{type:r.GL.FLOAT,size:2,value:o}}
},{"@math.gl/core":"dwLx","@loaders.gl/math":"nR0E"}],"zBi6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.normalize3DTilePositionAttribute=i;var e=require("@math.gl/core"),t=require("@loaders.gl/math");function i(e,i,o){return e.isQuantized?o["3d-tiles"]&&o["3d-tiles"].decodeQuantizedPositions?(e.isQuantized=!1,r(e,i)):{type:t.GL.UNSIGNED_SHORT,value:i,size:3,normalized:!0}:i}function r(t,i){for(var r=new e.Vector3,o=new Float32Array(3*t.pointCount),n=0;n<t.pointCount;n++)r.set(i[3*n],i[3*n+1],i[3*n+2]).scale(1/t.quantizedRange).multiply(t.quantizedVolumeScale).add(t.quantizedVolumeOffset).toArray(o,3*n);return o}
},{"@math.gl/core":"dwLx","@loaders.gl/math":"nR0E"}],"Si98":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parsePointCloud3DTile=O,exports.loadDraco=G;var e=f(require("@babel/runtime/helpers/esm/defineProperty")),t=f(require("@babel/runtime/regenerator")),r=f(require("@babel/runtime/helpers/esm/asyncToGenerator")),a=require("@loaders.gl/draco"),i=require("@loaders.gl/math"),n=require("@math.gl/core"),o=f(require("../classes/tile-3d-feature-table")),s=f(require("../classes/tile-3d-batch-table")),u=require("./helpers/parse-3d-tile-header"),l=require("./helpers/parse-3d-tile-tables"),b=require("./helpers/normalize-3d-tile-colors"),c=require("./helpers/normalize-3d-tile-normals"),p=require("./helpers/normalize-3d-tile-positions");function f(e){return e&&e.__esModule?e:{default:e}}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function T(t){for(var r=1;r<arguments.length;r++){var a=null!=arguments[r]?arguments[r]:{};r%2?d(Object(a),!0).forEach(function(r){(0,e.default)(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function O(e,t,r,a,i){return h.apply(this,arguments)}function h(){return(h=(0,r.default)(t.default.mark(function e(r,a,i,n,o){var s,b,c;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,u.parse3DTileHeaderSync)(r,a,i),i=(0,l.parse3DTileTablesHeaderSync)(r,a,i),i=(0,l.parse3DTileTablesSync)(r,a,i,n),y(r),s=N(r),b=s.featureTable,c=s.batchTable,e.next=7,E(r,b,c,n,o);case 7:return P(r,b,n),A(r,b,c),I(r,b),e.abrupt("return",i);case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function y(e){e.attributes={positions:null,colors:null,normals:null,batchIds:null},e.isQuantized=!1,e.isTranslucent=!1,e.isRGB565=!1,e.isOctEncoded16P=!1}function N(e){var t=new o.default(e.featureTableJson,e.featureTableBinary),r=t.getGlobalProperty("POINTS_LENGTH");if(!Number.isFinite(r))throw new Error("POINTS_LENGTH must be defined");return t.featuresLength=r,e.featuresLength=r,e.pointsLength=r,e.pointCount=r,e.rtcCenter=t.getGlobalProperty("RTC_CENTER",i.GL.FLOAT,3),{featureTable:t,batchTable:m(e,t)}}function P(e,t,r){if(!e.attributes.positions)if(t.hasProperty("POSITION"))e.attributes.positions=t.getPropertyArray("POSITION",i.GL.FLOAT,3);else if(t.hasProperty("POSITION_QUANTIZED")){var a=t.getPropertyArray("POSITION_QUANTIZED",i.GL.UNSIGNED_SHORT,3);if(e.isQuantized=!0,e.quantizedRange=65535,e.quantizedVolumeScale=t.getGlobalProperty("QUANTIZED_VOLUME_SCALE",i.GL.FLOAT,3),!e.quantizedVolumeScale)throw new Error("QUANTIZED_VOLUME_SCALE must be defined for quantized positions.");if(e.quantizedVolumeOffset=t.getGlobalProperty("QUANTIZED_VOLUME_OFFSET",i.GL.FLOAT,3),!e.quantizedVolumeOffset)throw new Error("QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.");e.attributes.positions=(0,p.normalize3DTilePositionAttribute)(e,a,r)}if(!e.attributes.positions)throw new Error("Either POSITION or POSITION_QUANTIZED must be defined.")}function A(e,t,r){if(!e.attributes.colors){var a=null;t.hasProperty("RGBA")?(a=t.getPropertyArray("RGBA",i.GL.UNSIGNED_BYTE,4),e.isTranslucent=!0):t.hasProperty("RGB")?a=t.getPropertyArray("RGB",i.GL.UNSIGNED_BYTE,3):t.hasProperty("RGB565")&&(a=t.getPropertyArray("RGB565",i.GL.UNSIGNED_SHORT,1),e.isRGB565=!0),e.attributes.colors=(0,b.normalize3DTileColorAttribute)(e,a,r)}t.hasProperty("CONSTANT_RGBA")&&(e.constantRGBA=t.getGlobalProperty("CONSTANT_RGBA",i.GL.UNSIGNED_BYTE,4))}function I(e,t){if(!e.attributes.normals){var r=null;t.hasProperty("NORMAL")?r=t.getPropertyArray("NORMAL",i.GL.FLOAT,3):t.hasProperty("NORMAL_OCT16P")&&(r=t.getPropertyArray("NORMAL_OCT16P",i.GL.UNSIGNED_BYTE,2),e.isOctEncoded16P=!0),e.attributes.normals=(0,c.normalize3DTileNormalAttribute)(e,r)}}function m(e,t){var r=null;if(!e.batchIds&&t.hasProperty("BATCH_ID")&&(e.batchIds=t.getPropertyArray("BATCH_ID",i.GL.UNSIGNED_SHORT,1),e.batchIds)){var a=t.getGlobalProperty("BATCH_LENGTH");if(!a)throw new Error("Global property: BATCH_LENGTH must be defined when BATCH_ID is defined.");var n=e.batchTableJson,o=e.batchTableBinary;r=new s.default(n,o,a)}return r}function E(e,t,r,a,i){return L.apply(this,arguments)}function L(){return(L=(0,r.default)(t.default.mark(function e(r,a,i,n,o){var s,u,l,b,c,p,f,d;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((b=r.batchTableJson&&r.batchTableJson.extensions&&r.batchTableJson.extensions["3DTILES_draco_point_compression"])&&(l=b.properties),!(c=a.getExtension("3DTILES_draco_point_compression"))){e.next=15;break}if(u=c.properties,p=c.byteOffset,f=c.byteLength,u&&Number.isFinite(p)&&f){e.next=9;break}throw new Error("Draco properties, byteOffset, and byteLength must be defined");case 9:s=r.featureTableBinary.slice(p,p+f),r.hasPositions=Number.isFinite(u.POSITION),r.hasColors=Number.isFinite(u.RGB)||Number.isFinite(u.RGBA),r.hasNormals=Number.isFinite(u.NORMAL),r.hasBatchIds=Number.isFinite(u.BATCH_ID),r.isTranslucent=Number.isFinite(u.RGBA);case 15:if(s){e.next=17;break}return e.abrupt("return",!0);case 17:return d={buffer:s,properties:T(T({},u),l),featureTableProperties:u,batchTableProperties:l,dequantizeInShader:!1},e.next=20,G(r,d,n,o);case 20:return e.abrupt("return",e.sent);case 21:case"end":return e.stop()}},e)}))).apply(this,arguments)}function G(e,t,r,a){return _.apply(this,arguments)}function _(){return(_=(0,r.default)(t.default.mark(function e(r,i,o,s){var u,l,c,p,f,d,O,h,y,N,P,A,I,m;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u=s.parse,e.next=3,u(i.buffer,a.DracoLoader,{draco:{extraAttributes:i.batchTableProperties||{}}});case 3:if(l=e.sent,c=l.attributes.POSITION&&l.attributes.POSITION.value,p=l.attributes.COLOR_0&&l.attributes.COLOR_0.value,f=l.attributes.NORMAL&&l.attributes.NORMAL.value,d=l.attributes.BATCH_ID&&l.attributes.BATCH_ID.value,O=c&&l.attributes.POSITION.value.quantization,h=f&&l.attributes.NORMAL.value.quantization,O&&(y=l.POSITION.data.quantization,N=y.range,r.quantizedVolumeScale=new n.Vector3(N,N,N),r.quantizedVolumeOffset=new n.Vector3(y.minValues),r.quantizedRange=(1<<y.quantizationBits)-1,r.isQuantizedDraco=!0),h&&(r.octEncodedRange=(1<<l.NORMAL.data.quantization.quantizationBits)-1,r.isOctEncodedDraco=!0),P={},i.batchTableProperties)for(A=0,I=Object.keys(i.batchTableProperties);A<I.length;A++)m=I[A],l.attributes[m]&&l.attributes[m].value&&(P[m.toLowerCase()]=l.attributes[m].value);r.attributes=T({positions:c,colors:(0,b.normalize3DTileColorAttribute)(r,p),normals:f,batchIds:d},P);case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","@loaders.gl/draco":"xort","@loaders.gl/math":"nR0E","@math.gl/core":"dwLx","../classes/tile-3d-feature-table":"nbpZ","../classes/tile-3d-batch-table":"DJYW","./helpers/parse-3d-tile-header":"u2db","./helpers/parse-3d-tile-tables":"OEpE","./helpers/normalize-3d-tile-colors":"tz3C","./helpers/normalize-3d-tile-normals":"bICZ","./helpers/normalize-3d-tile-positions":"zBi6"}],"dUEF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getBytesFromComponentType=E,exports.getSizeFromAccessorType=T,exports.getGLEnumFromSamplerParameter=n,exports.UBER_POINT_CLOUD_EXTENSION=exports.KHR_TECHNIQUES_WEBGL=exports.KHR_MATERIALS_UNLIT=exports.KHR_LIGHTS_PUNCTUAL=exports.KHR_DRACO_MESH_COMPRESSION=exports.KHR_BINARY_GLTF=void 0;var r="KHR_binary_glTF";exports.KHR_BINARY_GLTF=r;var e="KHR_draco_mesh_compression";exports.KHR_DRACO_MESH_COMPRESSION=e;var _="KHR_lights_punctual";exports.KHR_LIGHTS_PUNCTUAL=_;var t="KHR_materials_unlit";exports.KHR_MATERIALS_UNLIT=t;var o="KHR_techniques_webgl";exports.KHR_TECHNIQUES_WEBGL=o;var s="UBER_draco_point_cloud_compression";exports.UBER_POINT_CLOUD_EXTENSION=s;var p={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},R={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4};function E(r){return R[r]}function T(r){return p[r]}function n(r){return{magFilter:10240,minFilter:10241,wrapS:10242,wrapT:10243}[r]}
},{}],"VYAT":[function(require,module,exports) {
"use strict";function e(e,t){if(!e)throw new Error(t||"assert failed: gltf")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"KsSh":[function(require,module,exports) {
"use strict";function t(t,r){if(t.startsWith("data:")||t.startsWith("http:")||t.startsWith("https:"))return t;var e=r.baseUri||r.uri;if(!e)throw new Error("'baseUri' must be provided to resolve relative url ".concat(t));return e.substr(0,e.lastIndexOf("/")+1)+t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.resolveUrl=t;
},{}],"CwWI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getTypedArrayForBufferView=t,exports.getTypedArrayForImageData=f;var e=r(require("../utils/assert"));function r(e){return e&&e.__esModule?e:{default:e}}function t(r,t,f){var u=r.bufferViews[f];(0,e.default)(u);var a=t[u.buffer];(0,e.default)(a);var s=(u.byteOffset||0)+a.byteOffset;return new Uint8Array(a.arrayBuffer,s,u.byteLength)}function f(e,r,f){var u=e.images[f];return t(e,r,e.bufferViews[u.bufferView])}
},{"../utils/assert":"VYAT"}],"aXZw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getAccessorTypeFromSize=a,exports.getComponentTypeFromArray=E,exports.getAccessorArrayTypeAndLength=_,exports.ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY=exports.ATTRIBUTE_COMPONENT_TYPE_TO_BYTE_SIZE=exports.ATTRIBUTE_TYPE_TO_COMPONENTS=void 0;var r=t(require("../utils/assert"));function t(r){return r&&r.__esModule?r:{default:r}}var e=["SCALAR","VEC2","VEC3","VEC4"],T=new Map([[Int8Array,5120],[Uint8Array,5121],[Int16Array,5122],[Uint16Array,5123],[Uint32Array,5125],[Float32Array,5126]]),n={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16};exports.ATTRIBUTE_TYPE_TO_COMPONENTS=n;var o={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4};exports.ATTRIBUTE_COMPONENT_TYPE_TO_BYTE_SIZE=o;var A={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function a(r){return e[r-1]||e[0]}function E(r){var t=T.get(r.constructor);if(!t)throw new Error("Illegal typed array");return t}function _(t,e){var T=A[t.componentType],a=n[t.type],E=o[t.componentType],_=t.count*a,y=t.count*a*E;return(0,r.default)(y>=0&&y<=e.byteLength),{ArrayType:T,length:_,byteLength:y}}exports.ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY=A;
},{"../utils/assert":"VYAT"}],"DnuC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("@babel/runtime/helpers/esm/typeof")),t=o(require("@babel/runtime/helpers/esm/classCallCheck")),s=o(require("@babel/runtime/helpers/esm/createClass")),n=require("@loaders.gl/images"),i=require("@loaders.gl/loader-utils"),r=o(require("./utils/assert")),u=require("./gltf-utils/gltf-utils");function o(e){return e&&e.__esModule?e:{default:e}}var a=function(){function o(e){if((0,t.default)(this,o),e instanceof o)return e;e||(e={json:{asset:{version:"2.0",generator:"loaders.gl"},buffers:[]},buffers:[]}),this.byteLength=0,this.gltf=e,(0,r.default)(this.gltf.json)}return(0,s.default)(o,[{key:"getApplicationData",value:function(e){return this.json[e]}},{key:"getExtraData",value:function(e){return(this.json.extras||{})[e]}},{key:"getExtension",value:function(e){var t=this.getUsedExtensions().find(function(t){return t===e}),s=this.json.extensions||{};return t?s[e]||!0:null}},{key:"getRequiredExtension",value:function(e){return this.getRequiredExtensions().find(function(t){return t===e})?this.getExtension(e):null}},{key:"getRequiredExtensions",value:function(){return this.json.extensionsRequired||[]}},{key:"getUsedExtensions",value:function(){return this.json.extensionsUsed||[]}},{key:"getObjectExtension",value:function(e,t){return(e.extensions||{})[t]}},{key:"getScene",value:function(e){return this.getObject("scenes",e)}},{key:"getNode",value:function(e){return this.getObject("nodes",e)}},{key:"getSkin",value:function(e){return this.getObject("skins",e)}},{key:"getMesh",value:function(e){return this.getObject("meshes",e)}},{key:"getMaterial",value:function(e){return this.getObject("materials",e)}},{key:"getAccessor",value:function(e){return this.getObject("accessors",e)}},{key:"getCamera",value:function(e){return null}},{key:"getTexture",value:function(e){return this.getObject("textures",e)}},{key:"getSampler",value:function(e){return this.getObject("samplers",e)}},{key:"getImage",value:function(e){return this.getObject("images",e)}},{key:"getBufferView",value:function(e){return this.getObject("bufferViews",e)}},{key:"getBuffer",value:function(e){return this.getObject("buffers",e)}},{key:"getObject",value:function(t,s){if("object"===(0,e.default)(s))return s;var n=this.json[t]&&this.json[t][s];if(!n)throw new Error("glTF file error: Could not find ".concat(t,"[").concat(s,"]"));return n}},{key:"getTypedArrayForBufferView",value:function(e){var t=(e=this.getBufferView(e)).buffer,s=this.gltf.buffers[t];(0,r.default)(s);var n=(e.byteOffset||0)+s.byteOffset;return new Uint8Array(s.arrayBuffer,n,e.byteLength)}},{key:"getTypedArrayForAccessor",value:function(e){e=this.getAccessor(e);var t=this.getBufferView(e.bufferView),s=this.getBuffer(t.buffer).data,n=(0,u.getAccessorArrayTypeAndLength)(e,t),i=n.ArrayType,r=n.length;return new i(s,t.byteOffset+e.byteOffset,r)}},{key:"getTypedArrayForImageData",value:function(e){e=this.getAccessor(e);var t=this.getBufferView(e.bufferView),s=this.getBuffer(t.buffer).data,n=t.byteOffset||0;return new Uint8Array(s,n,t.byteLength)}},{key:"addApplicationData",value:function(e,t){return this.json[e]=t,this}},{key:"addExtraData",value:function(e,t){return this.json.extras=this.json.extras||{},this.json.extras[e]=t,this}},{key:"addObjectExtension",value:function(e,t,s){return(0,r.default)(s),e.extensions=e.extensions||{},e.extensions[t]=s,this.registerUsedExtension(t),this}},{key:"setObjectExtension",value:function(e,t,s){(e.extensions||{})[t]=s}},{key:"removeObjectExtension",value:function(e,t){var s=e.extensions||{},n=s[t];return delete s[t],n}},{key:"addExtension",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,r.default)(t),this.json.extensions=this.json.extensions||{},this.json.extensions[e]=t,this.registerUsedExtension(e),t}},{key:"addRequiredExtension",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,r.default)(t),this.addExtension(e,t),this.registerRequiredExtension(e),t}},{key:"registerUsedExtension",value:function(e){this.json.extensionsUsed=this.json.extensionsUsed||[],this.json.extensionsUsed.find(function(t){return t===e})||this.json.extensionsUsed.push(e)}},{key:"registerRequiredExtension",value:function(e){this.registerUsedExtension(e),this.json.extensionsRequired=this.json.extensionsRequired||[],this.json.extensionsRequired.find(function(t){return t===e})||this.json.extensionsRequired.push(e)}},{key:"removeExtension",value:function(e){this.json.extensionsRequired&&this._removeStringFromArray(this.json.extensionsRequired,e),this.json.extensionsUsed&&this._removeStringFromArray(this.json.extensionsUsed,e),this.json.extensions&&delete this.json.extensions[e]}},{key:"addMesh",value:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,n={primitives:[{attributes:this._addAttributes(e),indices:t,mode:s}]};return this.json.meshes=this.json.meshes||[],this.json.meshes.push(n),this.json.meshes.length-1}},{key:"addPointCloud",value:function(e){var t={primitives:[{attributes:this._addAttributes(e),mode:0}]};return this.json.meshes=this.json.meshes||[],this.json.meshes.push(t),this.json.meshes.length-1}},{key:"addImage",value:function(e,t){t=t||(0,n.getBinaryImageMIMEType)(e);var s={bufferView:this.addBufferView(e),mimeType:t};return this.json.images=this.json.images||[],this.json.images.push(s),this.json.images.length-1}},{key:"addBufferView",value:function(e){var t=e.byteLength;(0,r.default)(Number.isFinite(t)),this.sourceBuffers=this.sourceBuffers||[],this.sourceBuffers.push(e);var s={buffer:0,byteOffset:this.byteLength,byteLength:t};return this.byteLength+=(0,i.padTo4Bytes)(t),this.json.bufferViews=this.json.bufferViews||[],this.json.bufferViews.push(s),this.json.bufferViews.length-1}},{key:"addAccessor",value:function(e,t){var s={bufferView:e,type:(0,u.getAccessorTypeFromSize)(t.size),componentType:t.componentType,count:t.count};return this.json.accessors=this.json.accessors||[],this.json.accessors.push(s),this.json.accessors.length-1}},{key:"addBinaryBuffer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{size:3},s=this.addBufferView(e),n={size:t.size,componentType:(0,u.getComponentTypeFromArray)(e),count:Math.round(e.length/t.size)};return this.addAccessor(s,Object.assign(n,t))}},{key:"createBinaryChunk",value:function(){if(!this.arrayBuffer){for(var e=this.byteLength,t=new ArrayBuffer(e),s=new Uint8Array(t),n=0,r=0;r<this.sourceBuffers.length;r++){var u=this.sourceBuffers[r];n=(0,i.copyToArray)(u,s,n)}this.json.buffers[0].byteLength=e,this.arrayBuffer=t,this.sourceBuffers=[]}}},{key:"_removeStringFromArray",value:function(e,t){for(var s=!0;s;){var n=e.indexOf(t);n>-1?e.splice(n,1):s=!1}}},{key:"json",get:function(){return this.gltf.json}}]),o}();exports.default=a;
},{"@babel/runtime/helpers/esm/typeof":"zsbK","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@loaders.gl/images":"DNDh","@loaders.gl/loader-utils":"oHIH","./utils/assert":"VYAT","./gltf-utils/gltf-utils":"aXZw"}],"nNnF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getGLTFAccessors=r,exports.getGLTFAccessor=t,exports.getGLTFAttribute=n;var e=require("./gltf-utils");function r(e){var r={};for(var n in e){var u=e[n];if("indices"!==n){var i=t(u);r[n]=i}}return r}function t(r,t){var n=u(r,t),i=n.buffer,o=n.size;return{value:i,size:o,bufferView:null,byteOffset:0,count:n.count,type:(0,e.getAccessorTypeFromSize)(o),componentType:(0,e.getComponentTypeFromArray)(i)}}function n(e,r){return e.attributes[e.glTFAttributeMap[r]]}function u(e,r){var t=e,n=1,u=0;return e&&e.value&&(t=e.value,n=e.size||1),t&&(ArrayBuffer.isView(t)||(t=i(t,Float32Array)),u=t.length/n),{buffer:t,size:n,count:u}}function i(e,r){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e?Array.isArray(e)?new r(e):!t||e instanceof r?e:new r(e):null}
},{"./gltf-utils":"aXZw"}],"FSRq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.decode=p,exports.encode=v;var e=s(require("@babel/runtime/regenerator")),r=s(require("@babel/runtime/helpers/esm/defineProperty")),t=s(require("@babel/runtime/helpers/esm/asyncToGenerator")),n=require("@loaders.gl/draco"),a=require("@loaders.gl/loader-utils"),i=s(require("../gltf-scenegraph")),o=require("../gltf-constants"),u=require("../gltf-utils/gltf-attribute-utils");function s(e){return e&&e.__esModule?e:{default:e}}var c=e.default.mark(x);function f(e,r){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=l(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==t.return||t.return()}finally{if(u)throw i}}}}function l(e,r){if(e){if("string"==typeof e)return d(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?d(e,r):void 0}}function d(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function p(e,r,t){return b.apply(this,arguments)}function b(){return(b=(0,t.default)(e.default.mark(function r(t,n,a){var u,s,c,l,d;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.gltf.decompressMeshes){e.next=2;break}return e.abrupt("return");case 2:u=new i.default(t),s=[],c=f(x(u));try{for(c.s();!(l=c.n()).done;)d=l.value,u.getObjectExtension(d,o.KHR_DRACO_MESH_COMPRESSION)&&s.push(h(d,u,n,a))}catch(r){c.e(r)}finally{c.f()}return e.next=8,Promise.all(s);case 8:u.removeExtension(o.KHR_DRACO_MESH_COMPRESSION);case 9:case"end":return e.stop()}},r)}))).apply(this,arguments)}function v(e){var r,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new i.default(e),a=f(n.json.meshes||[]);try{for(a.s();!(r=a.n()).done;){m(r.value,t),n.addRequiredExtension(o.KHR_DRACO_MESH_COMPRESSION)}}catch(u){a.e(u)}finally{a.f()}}function h(e,r,t,n){return y.apply(this,arguments)}function y(){return(y=(0,t.default)(e.default.mark(function r(t,i,s,c){var f,l,d,p,b;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f=i.getObjectExtension(t,o.KHR_DRACO_MESH_COMPRESSION),l=i.getTypedArrayForBufferView(f.bufferView),d=(0,a.getZeroOffsetArrayBuffer)(l.buffer,l.byteOffset),p=c.parse,e.next=6,p(d,n.DracoLoader,s,c);case 6:b=e.sent,t.attributes=(0,u.getGLTFAccessors)(b.attributes),b.indices&&(t.indices=(0,u.getGLTFAccessor)(b.indices)),g(t);case 10:case"end":return e.stop()}},r)}))).apply(this,arguments)}function m(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,a=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;if(!a.DracoWriter||!a.DracoLoader)throw new Error("DracoWriter/DracoLoader not available");var u=a.DracoWriter.encodeSync({attributes:e}),s=(0,i.parseSync)({attributes:e}),c=a._addFauxAttributes(s.attributes),f=a.addBufferView(u);return{primitives:[{attributes:c,mode:n,extensions:(0,r.default)({},o.KHR_DRACO_MESH_COMPRESSION,{bufferView:f,attributes:c})}]}}function g(e){if(!e.attributes&&Object.keys(e.attributes).length>0)throw new Error("Empty glTF primitive detected: Draco decompression failure?")}function x(r){var t,n,a,i,o,u;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=f(r.json.meshes||[]),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=24;break}a=n.value,i=f(a.primitives),e.prev=6,i.s();case 8:if((o=i.n()).done){e.next=14;break}return u=o.value,e.next=12,u;case 12:e.next=8;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(6),i.e(e.t0);case 19:return e.prev=19,i.f(),e.finish(19);case 22:e.next=3;break;case 24:e.next=29;break;case 26:e.prev=26,e.t1=e.catch(1),t.e(e.t1);case 29:return e.prev=29,t.f(),e.finish(29);case 32:case"end":return e.stop()}},c,null,[[1,26,29,32],[6,16,19,22]])}
},{"@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/defineProperty":"iDM3","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","@loaders.gl/draco":"xort","@loaders.gl/loader-utils":"oHIH","../gltf-scenegraph":"DnuC","../gltf-constants":"dUEF","../gltf-utils/gltf-attribute-utils":"nNnF"}],"PBAo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.decode=l,exports.encode=s;var e=r(require("../utils/assert")),t=r(require("../gltf-scenegraph")),n=require("../gltf-constants");function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,l=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return l=e.done,e},e:function(e){s=!0,a=e},f:function(){try{l||null==n.return||n.return()}finally{if(s)throw a}}}}function i(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,r){var i=new t.default(e),a=i.json,l=i.getExtension(n.KHR_LIGHTS_PUNCTUAL);l&&(i.json.lights=l.lights,i.removeExtension(n.KHR_LIGHTS_PUNCTUAL));var s,u=o(a.nodes||[]);try{for(u.s();!(s=u.n()).done;){var f=s.value,c=i.getObjectExtension(f,n.KHR_LIGHTS_PUNCTUAL);c&&(f.light=c.light),i.removeObjectExtension(f,n.KHR_LIGHTS_PUNCTUAL)}}catch(d){u.e(d)}finally{u.f()}}function s(r,i){var a=new t.default(r),l=a.json;if(l.lights){var s=a.addExtension(n.KHR_LIGHTS_PUNCTUAL);(0,e.default)(!s.lights),s.lights=l.lights,delete l.lights}if(a.json.lights){var u,f=o(a.json.lights);try{for(f.s();!(u=f.n()).done;){var c=u.value,d=c.node;a.addObjectExtension(d,n.KHR_LIGHTS_PUNCTUAL,c)}}catch(g){f.e(g)}finally{f.f()}delete a.json.lights}}
},{"../utils/assert":"VYAT","../gltf-scenegraph":"DnuC","../gltf-constants":"dUEF"}],"azkd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.decode=i,exports.encode=u;var e=n(require("../gltf-scenegraph")),t=require("../gltf-constants");function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return u=e.done,e},e:function(e){l=!0,i=e},f:function(){try{u||null==n.return||n.return()}finally{if(l)throw i}}}}function o(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(n,o){var a=new e.default(n),i=a.json;a.removeExtension(t.KHR_MATERIALS_UNLIT);var u,l=r(i.materials||[]);try{for(l.s();!(u=l.n()).done;){var f=u.value;f.extensions&&f.extensions.KHR_materials_unlit&&(f.unlit=!0),a.removeObjectExtension(f,t.KHR_MATERIALS_UNLIT)}}catch(s){l.e(s)}finally{l.f()}}function u(n,o){var a=new e.default(n),i=a.json;if(a.materials){var u,l=r(i.materials);try{for(l.s();!(u=l.n()).done;){var f=u.value;f.unlit&&(delete f.unlit,a.addObjectExtension(f,t.KHR_MATERIALS_UNLIT,{}),a.addExtension(t.KHR_MATERIALS_UNLIT))}}catch(s){l.e(s)}finally{l.f()}}}
},{"../gltf-scenegraph":"DnuC","../gltf-constants":"dUEF"}],"cVPC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.decode=a,exports.encode=f;var e=n(require("@babel/runtime/helpers/esm/typeof")),r=n(require("../gltf-scenegraph")),t=require("../gltf-constants");function n(e){return e&&e.__esModule?e:{default:e}}function o(e,r){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=i(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,a=!0,f=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return a=e.done,e},e:function(e){f=!0,u=e},f:function(){try{a||null==t.return||t.return()}finally{if(f)throw u}}}}function i(e,r){if(e){if("string"==typeof e)return u(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?u(e,r):void 0}}function u(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function a(e,n){var i=new r.default(e),u=i.json,a=i.getExtension(t.KHR_TECHNIQUES_WEBGL);if(a){var f,l=c(a,i),d=o(u.materials||[]);try{for(d.s();!(f=d.n()).done;){var h=f.value,v=i.getObjectExtension(h,t.KHR_TECHNIQUES_WEBGL);v&&(h.technique=Object.assign({},v,l[v.technique]),h.technique.values=s(h.technique,i)),i.removeObjectExtension(h,t.KHR_TECHNIQUES_WEBGL)}}catch(m){d.e(m)}finally{d.f()}i.removeExtension(t.KHR_TECHNIQUES_WEBGL)}}function f(e,r){}function c(e,r){var t=e.programs,n=void 0===t?[]:t,o=e.shaders,i=void 0===o?[]:o,u=e.techniques,a=void 0===u?[]:u,f=new TextDecoder;return i.forEach(function(e){if(!Number.isFinite(e.bufferView))throw new Error("KHR_techniques_webgl: no shader code");e.code=f.decode(r.getTypedArrayForBufferView(e.bufferView))}),n.forEach(function(e){e.fragmentShader=i[e.fragmentShader],e.vertexShader=i[e.vertexShader]}),a.forEach(function(e){e.program=n[e.program]}),a}function s(r,t){var n=Object.assign({},r.values);return Object.keys(r.uniforms||{}).forEach(function(e){!r.uniforms[e].value||e in n||(n[e]=r.uniforms[e].value)}),Object.keys(n).forEach(function(r){"object"===(0,e.default)(n[r])&&void 0!==n[r].index&&(n[r].texture=t.getTexture(n[r].index))}),n}
},{"@babel/runtime/helpers/esm/typeof":"zsbK","../gltf-scenegraph":"DnuC","../gltf-constants":"dUEF"}],"VXKf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.decodeExtensions=c,exports.EXTENSIONS=void 0;var e=s(require("@babel/runtime/regenerator")),t=s(require("@babel/runtime/helpers/esm/asyncToGenerator")),r=a(require("./KHR_draco_mesh_compression")),n=a(require("./KHR_lights_punctual")),u=a(require("./KHR_materials_unlit")),i=a(require("./KHR_techniques_webgl"));function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function a(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var i=n?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(r,u,i):r[u]=e[u]}return r.default=e,t&&t.set(e,r),r}function s(e){return e&&e.__esModule?e:{default:e}}var l={KHR_draco_mesh_compression:r,KHR_lights_punctual:n,KHR_materials_unlit:u,KHR_techniques_webgl:i};function c(e){return f.apply(this,arguments)}function f(){return(f=(0,t.default)(e.default.mark(function t(r){var n,u,i,o,a,s=arguments;return e.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=s.length>1&&void 0!==s[1]?s[1]:{},u=s.length>2?s[2]:void 0,n.gltf=n.gltf||{},t.t0=e.default.keys(l);case 4:if((t.t1=t.t0()).done){t.next=14;break}if(i=t.t1.value,o=n.gltf.excludeExtensions||{},i in o&&!o[i]){t.next=12;break}return a=l[i],t.next=12,a.decode(r,n,u);case 12:t.next=4;break;case 14:case"end":return t.stop()}},t)}))).apply(this,arguments)}exports.EXTENSIONS=l;
},{"@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","./KHR_draco_mesh_compression":"FSRq","./KHR_lights_punctual":"PBAo","./KHR_materials_unlit":"azkd","./KHR_techniques_webgl":"cVPC"}],"w4DY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isGLB=g,exports.default=h;var e=require("@loaders.gl/loader-utils"),t=1735152710,r=12,n=8,a=1313821514,i=5130562,o=0,s=1,c=0,u=!0;function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"".concat(String.fromCharCode(e.getUint8(t+0))).concat(String.fromCharCode(e.getUint8(t+1))).concat(String.fromCharCode(e.getUint8(t+2))).concat(String.fromCharCode(e.getUint8(t+3)))}function g(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=new DataView(e),i=n.magic,o=void 0===i?t:i,s=a.getUint32(r,!1);return s===o||s===t}function h(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],new DataView(t));e.type=d(a,n+0),e.version=a.getUint32(n+4,u);var i=a.getUint32(n+8,u);switch(e.header={byteOffset:n,byteLength:i},e.json={},e.binChunks=[],n+=r,e.version){case 1:return f(e,a,n,{});case 2:return v(e,a,n,{});default:throw new Error("Invalid GLB version ".concat(e.version,". Only supports v1 and v2."))}}function f(t,a,i,o){(0,e.assert)(t.header.byteLength>r+n);var s=a.getUint32(i+0,u),d=a.getUint32(i+4,u);return i+=n,(0,e.assert)(d===c),l(t,a,i,s,o),i+=s,i+=y(t,a,i,t.header.byteLength,o)}function v(t,a,i,o){return(0,e.assert)(t.header.byteLength>r+n),b(t,a,i,o),i+t.header.byteLength}function b(t,r,c,d){for(;c+8<=t.header.byteLength;){var g=r.getUint32(c+0,u),h=r.getUint32(c+4,u);switch(c+=n,h){case a:l(t,r,c,g,d);break;case i:y(t,r,c,g,d);break;case o:d.glb.strict||l(t,r,c,g,d);break;case s:d.glb.strict||y(t,r,c,g,d)}c+=(0,e.padTo4Bytes)(g)}return c}function l(t,r,n,a,i){var o=new Uint8Array(r.buffer,n,a),s=new TextDecoder("utf8").decode(o);return t.json=JSON.parse(s),(0,e.padTo4Bytes)(a)}function y(t,r,n,a,i){return t.header.hasBinChunk=!0,t.binChunks.push({byteOffset:n,byteLength:a,arrayBuffer:r.buffer}),(0,e.padTo4Bytes)(a)}
},{"@loaders.gl/loader-utils":"oHIH"}],"O7Qq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.decode=i,exports.encode=a;var e=t(require("../gltf-scenegraph")),r=require("../gltf-constants");function t(e){return e&&e.__esModule?e:{default:e}}function n(e,r){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=o(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0,u=function(){};return{s:u,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:u}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,f=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return a=e.done,e},e:function(e){f=!0,i=e},f:function(){try{a||null==t.return||t.return()}finally{if(f)throw i}}}}function o(e,r){if(e){if("string"==typeof e)return u(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?u(e,r):void 0}}function u(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function i(t,o){var u,i=new e.default(t),a=i.json,f=n(a.images||[]);try{for(f.s();!(u=f.n()).done;){var l=u.value,c=i.removeObjectExtension(l,r.KHR_BINARY_GLTF);c&&Object.assign(l,c)}}catch(s){f.e(s)}finally{f.f()}a.buffers&&a.buffers[0]&&delete a.buffers[0].uri,i.removeExtension(r.KHR_BINARY_GLTF)}function a(e,t){throw new Error(r.KHR_BINARY_GLTF)}
},{"../gltf-scenegraph":"DnuC","../gltf-constants":"dUEF"}],"uc9G":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=d;var e=o(require("@babel/runtime/helpers/esm/classCallCheck")),r=o(require("@babel/runtime/helpers/esm/createClass")),n=s(require("./extensions/KHR_binary_gltf"));function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function s(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t();if(r&&r.has(e))return r.get(e);var n={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function o(e){return e&&e.__esModule?e:{default:e}}function a(e,r){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=i(e))||r&&e&&"number"==typeof e.length){n&&(e=n);var t=0,s=function(){};return{s:s,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw o}}}}function i(e,r){if(e){if("string"==typeof e)return c(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,r):void 0}}function c(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}var u={accessors:"accessor",animations:"animation",buffers:"buffer",bufferViews:"bufferView",images:"image",materials:"material",meshes:"mesh",nodes:"node",samplers:"sampler",scenes:"scene",skins:"skin",textures:"texture"},l={accessor:"accessors",animations:"animation",buffer:"buffers",bufferView:"bufferViews",image:"images",material:"materials",mesh:"meshes",node:"nodes",sampler:"samplers",scene:"scenes",skin:"skins",texture:"textures"},f=function(){function t(r){(0,e.default)(this,t),this.idToIndexMap={animations:{},accessors:{},buffers:{},bufferViews:{},images:{},materials:{},meshes:{},nodes:{},samplers:{},scenes:{},skins:{},textures:{}}}return(0,r.default)(t,[{key:"normalize",value:function(e,r){this.json=e.json;var t=e.json;switch(t.asset&&t.asset.version){case"2.0":return;case void 0:case"1.0":break;default:return void console.warn("glTF: Unknown version ".concat(t.asset.version))}if(!r.normalize)throw new Error("glTF v1 is not supported.");console.warn("Converting glTF v1 to glTF v2 format. This is experimental and may fail."),this._addAsset(t),this._convertTopLevelObjectsToArrays(t),n.decode(e,r),this._convertObjectIdsToArrayIndices(t),this._updateObjects(t)}},{key:"_addAsset",value:function(e){e.asset=e.asset||{},e.asset.version="2.0",e.asset.generator=e.asset.generator||"Normalized to glTF 2.0 by loaders.gl"}},{key:"_convertTopLevelObjectsToArrays",value:function(e){for(var r in u)this._convertTopLevelObjectToArray(e,r)}},{key:"_convertTopLevelObjectToArray",value:function(e,r){var n=e[r];if(n&&!Array.isArray(n))for(var t in e[r]=[],n){var s=n[t];s.id=s.id||t;var o=e[r].length;e[r].push(s),this.idToIndexMap[r][t]=o}}},{key:"_convertObjectIdsToArrayIndices",value:function(e){for(var r in u)this._convertIdsToIndices(e,r);"scene"in e&&(e.scene=this._convertIdToIndex(e.scene,"scene"));var n,t=a(e.textures);try{for(t.s();!(n=t.n()).done;){var s=n.value;this._convertTextureIds(s)}}catch(m){t.e(m)}finally{t.f()}var o,i=a(e.meshes);try{for(i.s();!(o=i.n()).done;){var c=o.value;this._convertMeshIds(c)}}catch(m){i.e(m)}finally{i.f()}var l,f=a(e.nodes);try{for(f.s();!(l=f.n()).done;){var d=l.value;this._convertNodeIds(d)}}catch(m){f.e(m)}finally{f.f()}var v,h=a(e.scenes);try{for(h.s();!(v=h.n()).done;){var y=v.value;this._convertSceneIds(y)}}catch(m){h.e(m)}finally{h.f()}}},{key:"_convertTextureIds",value:function(e){e.source&&(e.source=this._convertIdToIndex(e.source,"image"))}},{key:"_convertMeshIds",value:function(e){var r,n=a(e.primitives);try{for(n.s();!(r=n.n()).done;){var t=r.value,s=t.attributes,o=t.indices,i=t.material;for(var c in s)s[c]=this._convertIdToIndex(s[c],"accessor");o&&(t.indices=this._convertIdToIndex(o,"accessor")),i&&(t.material=this._convertIdToIndex(i,"material"))}}catch(u){n.e(u)}finally{n.f()}}},{key:"_convertNodeIds",value:function(e){var r=this;e.children&&(e.children=e.children.map(function(e){return r._convertIdToIndex(e,"node")}))}},{key:"_convertSceneIds",value:function(e){var r=this;e.nodes&&(e.nodes=e.nodes.map(function(e){return r._convertIdToIndex(e,"node")}))}},{key:"_convertIdsToIndices",value:function(e,r){var n,t=a(e[r]);try{for(t.s();!(n=t.n()).done;){var s=n.value;for(var o in s){var i=s[o],c=this._convertIdToIndex(i,o);s[o]=c}}}catch(u){t.e(u)}finally{t.f()}}},{key:"_convertIdToIndex",value:function(e,r){var n=l[r];if(n in this.idToIndexMap){var t=this.idToIndexMap[n][e];if(!Number.isFinite(t))throw new Error("gltf v1: failed to resolve ".concat(r," with id ").concat(e));return t}return e}},{key:"_updateObjects",value:function(e){var r,n=a(this.json.buffers);try{for(n.s();!(r=n.n()).done;){delete r.value.type}}catch(t){n.e(t)}finally{n.f()}}}]),t}();function d(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(new f).normalize(e,r)}
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","./extensions/KHR_binary_gltf":"O7Qq"}],"zrUm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=p;var e,t=a(require("@babel/runtime/helpers/esm/typeof")),r=a(require("@babel/runtime/helpers/esm/classCallCheck")),s=a(require("@babel/runtime/helpers/esm/createClass")),n=a(require("@babel/runtime/helpers/esm/defineProperty")),i=a(require("./utils/assert")),u=require("./gltf-utils/gltf-utils");function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){(0,n.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var l={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},f={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},m={TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,REPEAT:10497,LINEAR:9729,NEAREST_MIPMAP_LINEAR:9986},v={magFilter:m.TEXTURE_MAG_FILTER,minFilter:m.TEXTURE_MIN_FILTER,wrapS:m.TEXTURE_WRAP_S,wrapT:m.TEXTURE_WRAP_T},h=(e={},(0,n.default)(e,m.TEXTURE_MAG_FILTER,m.LINEAR),(0,n.default)(e,m.TEXTURE_MIN_FILTER,m.NEAREST_MIPMAP_LINEAR),(0,n.default)(e,m.TEXTURE_WRAP_S,m.REPEAT),(0,n.default)(e,m.TEXTURE_WRAP_,m.REPEAT),e);function d(e){return f[e]}function g(e){return l[e]}var T=function(){function e(){(0,r.default)(this,e)}return(0,s.default)(e,[{key:"postProcess",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.json,s=e.buffers,n=void 0===s?[]:s,u=e.images,a=void 0===u?[]:u,o=e.baseUri,c=void 0===o?"":o;return(0,i.default)(r),this.baseUri=c,this.json=r,this.buffers=n,this.images=a,this._resolveTree(this.json,t),this.json}},{key:"_resolveTree",value:function(e){var t=this;arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.bufferViews&&(e.bufferViews=e.bufferViews.map(function(e,r){return t._resolveBufferView(e,r)})),e.images&&(e.images=e.images.map(function(e,r){return t._resolveImage(e,r)})),e.samplers&&(e.samplers=e.samplers.map(function(e,r){return t._resolveSampler(e,r)})),e.textures&&(e.textures=e.textures.map(function(e,r){return t._resolveTexture(e,r)})),e.accessors&&(e.accessors=e.accessors.map(function(e,r){return t._resolveAccessor(e,r)})),e.materials&&(e.materials=e.materials.map(function(e,r){return t._resolveMaterial(e,r)})),e.meshes&&(e.meshes=e.meshes.map(function(e,r){return t._resolveMesh(e,r)})),e.nodes&&(e.nodes=e.nodes.map(function(e,r){return t._resolveNode(e,r)})),e.skins&&(e.skins=e.skins.map(function(e,r){return t._resolveSkin(e,r)})),e.scenes&&(e.scenes=e.scenes.map(function(e,r){return t._resolveScene(e,r)})),void 0!==e.scene&&(e.scene=e.scenes[this.json.scene])}},{key:"getScene",value:function(e){return this._get("scenes",e)}},{key:"getNode",value:function(e){return this._get("nodes",e)}},{key:"getSkin",value:function(e){return this._get("skins",e)}},{key:"getMesh",value:function(e){return this._get("meshes",e)}},{key:"getMaterial",value:function(e){return this._get("materials",e)}},{key:"getAccessor",value:function(e){return this._get("accessors",e)}},{key:"getCamera",value:function(e){return null}},{key:"getTexture",value:function(e){return this._get("textures",e)}},{key:"getSampler",value:function(e){return this._get("samplers",e)}},{key:"getImage",value:function(e){return this._get("images",e)}},{key:"getBufferView",value:function(e){return this._get("bufferViews",e)}},{key:"getBuffer",value:function(e){return this._get("buffers",e)}},{key:"_get",value:function(e,r){if("object"===(0,t.default)(r))return r;var s=this.json[e]&&this.json[e][r];return s||console.warn("glTF file error: Could not find ".concat(e,"[").concat(r,"]")),s}},{key:"_resolveScene",value:function(e,t){var r=this;return e.id=e.id||"scene-".concat(t),e.nodes=(e.nodes||[]).map(function(e){return r.getNode(e)}),e}},{key:"_resolveNode",value:function(e,t){var r=this;return e.id=e.id||"node-".concat(t),e.children&&(e.children=e.children.map(function(e){return r.getNode(e)})),void 0!==e.mesh&&(e.mesh=this.getMesh(e.mesh)),void 0!==e.camera&&(e.camera=this.getCamera(e.camera)),void 0!==e.skin&&(e.skin=this.getSkin(e.skin)),e}},{key:"_resolveSkin",value:function(e,t){return e.id=e.id||"skin-".concat(t),e.inverseBindMatrices=this.getAccessor(e.inverseBindMatrices),e}},{key:"_resolveMesh",value:function(e,t){var r=this;return e.id=e.id||"mesh-".concat(t),e.primitives&&(e.primitives=e.primitives.map(function(e){var t=(e=c({},e)).attributes;for(var s in e.attributes={},t)e.attributes[s]=r.getAccessor(t[s]);return void 0!==e.indices&&(e.indices=r.getAccessor(e.indices)),void 0!==e.material&&(e.material=r.getMaterial(e.material)),e})),e}},{key:"_resolveMaterial",value:function(e,t){if(e.id=e.id||"material-".concat(t),e.normalTexture&&(e.normalTexture=c({},e.normalTexture),e.normalTexture.texture=this.getTexture(e.normalTexture.index)),e.occlusionTexture&&(e.occlustionTexture=c({},e.occlustionTexture),e.occlusionTexture.texture=this.getTexture(e.occlusionTexture.index)),e.emissiveTexture&&(e.emmisiveTexture=c({},e.emmisiveTexture),e.emissiveTexture.texture=this.getTexture(e.emissiveTexture.index)),e.pbrMetallicRoughness){e.pbrMetallicRoughness=c({},e.pbrMetallicRoughness);var r=e.pbrMetallicRoughness;r.baseColorTexture&&(r.baseColorTexture=c({},r.baseColorTexture),r.baseColorTexture.texture=this.getTexture(r.baseColorTexture.index)),r.metallicRoughnessTexture&&(r.metallicRoughnessTexture=c({},r.metallicRoughnessTexture),r.metallicRoughnessTexture.texture=this.getTexture(r.metallicRoughnessTexture.index))}return e}},{key:"_resolveAccessor",value:function(e,t){if(e.id=e.id||"accessor-".concat(t),void 0!==e.bufferView&&(e.bufferView=this.getBufferView(e.bufferView)),e.bytesPerComponent=d(e.componentType),e.components=g(e.type),e.bytesPerElement=e.bytesPerComponent*e.components,e.bufferView){var r=e.bufferView.buffer,s=(0,u.getAccessorArrayTypeAndLength)(e,e.bufferView),n=s.ArrayType,i=s.length,a=(e.bufferView.byteOffset||0)+r.byteOffset;e.value=new n(r.arrayBuffer,a,i)}return e}},{key:"_resolveTexture",value:function(e,t){return e.id=e.id||"texture-".concat(t),e.sampler="sampler"in e?this.getSampler(e.sampler):h,e.source=this.getImage(e.source),e}},{key:"_resolveSampler",value:function(e,t){for(var r in e.id=e.id||"sampler-".concat(t),e.parameters={},e){var s=this._enumSamplerParameter(r);void 0!==s&&(e.parameters[s]=e[r])}return e}},{key:"_enumSamplerParameter",value:function(e){return v[e]}},{key:"_resolveImage",value:function(e,t){e.id=e.id||"image-".concat(t),void 0!==e.bufferView&&(e.bufferView=this.getBufferView(e.bufferView));var r=this.images[t];return r&&(e.image=r),e}},{key:"_resolveBufferView",value:function(e,t){e.id=e.id||"bufferView-".concat(t);var r=e.buffer;e.buffer=this.buffers[r];var s=this.buffers[r].arrayBuffer,n=this.buffers[r].byteOffset||0;return"byteOffset"in e&&(n+=e.byteOffset),e.data=new Uint8Array(s,n,e.byteLength),e}},{key:"_resolveCamera",value:function(e,t){return e.id=e.id||"camera-".concat(t),e.perspective,e.orthographic,e}}]),e}();function p(e,t){return(new T).postProcess(e,t)}
},{"@babel/runtime/helpers/esm/typeof":"zsbK","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/defineProperty":"iDM3","./utils/assert":"VYAT","./gltf-utils/gltf-utils":"aXZw"}],"w8xo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isGLTF=g,exports.parseGLTF=b;var e=d(require("@babel/runtime/regenerator")),r=d(require("@babel/runtime/helpers/esm/asyncToGenerator")),t=require("@loaders.gl/images"),n=require("@loaders.gl/loader-utils"),a=d(require("./utils/assert")),u=require("./gltf-utils/resolve-url"),f=require("./gltf-utils/get-typed-array"),s=require("./extensions/gltf-extensions"),i=p(require("./parse-glb")),l=d(require("./normalize-gltf-v1")),o=d(require("./post-process-gltf"));function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function p(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=c();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var u=n?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(t,a,u):t[a]=e[a]}return t.default=e,r&&r.set(e,t),t}function d(e){return e&&e.__esModule?e:{default:e}}function g(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var r=new DataView(e);return(0,i.isGLB)(r,0)}function b(e,r){return y.apply(this,arguments)}function y(){return(y=(0,r.default)(e.default.mark(function r(t,n){var a,u,f,i,c,p,d=arguments;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=d.length>2&&void 0!==d[2]?d[2]:0,u=d.length>3?d[3]:void 0,f=d.length>4?d[4]:void 0,h(t,n,a,u),(0,l.default)(t,{normalize:u.gltf.normalize}),i=[],u.gltf.loadImages&&(c=m(t,u,f),i.push(c)),!u.gltf.loadBuffers||!t.json.buffers){e.next=10;break}return e.next=10,v(t,u,f);case 10:return p=(0,s.decodeExtensions)(t,u,f),i.push(p),e.next=14,Promise.all(i);case 14:return e.abrupt("return",u.gltf.postProcess?(0,o.default)(t,u):t);case 15:case"end":return e.stop()}},r)}))).apply(this,arguments)}function h(e,r,t,u){(u.uri&&(e.baseUri=u.uri),r instanceof ArrayBuffer&&!(0,i.isGLB)(r,t,u))&&(r=(new TextDecoder).decode(r));if("string"==typeof r)e.json=(0,n.parseJSON)(r);else if(r instanceof ArrayBuffer){var f={};t=(0,i.default)(f,r,t,u),(0,a.default)("glTF"===f.type,"Invalid GLB magic string ".concat(f.type)),e._glb=f,e.json=f.json}else(0,a.default)(!1,"GLTF: must be ArrayBuffer or string");var s=e.json.buffers||[];if(e.buffers=new Array(s.length).fill(null),e._glb&&e._glb.header.hasBinChunk){var l=e._glb.binChunks;e.buffers[0]={arrayBuffer:l[0].arrayBuffer,byteOffset:l[0].byteOffset,byteLength:l[0].byteLength}}var o=e.json.images||[];e.images=new Array(o.length).fill({})}function v(e,r,t){return x.apply(this,arguments)}function x(){return(x=(0,r.default)(e.default.mark(function r(t,n,f){var s,i,l,o,c,p;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s=0;case 1:if(!(s<t.json.buffers.length)){e.next=18;break}if(!(i=t.json.buffers[s]).uri){e.next=15;break}return l=f.fetch,(0,a.default)(l),o=(0,u.resolveUrl)(i.uri,n),e.next=9,l(o);case 9:return c=e.sent,e.next=12,c.arrayBuffer();case 12:p=e.sent,t.buffers[s]={arrayBuffer:p,byteOffset:0,byteLength:p.byteLength},delete i.uri;case 15:++s,e.next=1;break;case 18:case"end":return e.stop()}},r)}))).apply(this,arguments)}function m(e,r,t){return w.apply(this,arguments)}function w(){return(w=(0,r.default)(e.default.mark(function r(t,n,a){var u,f,s;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(u=t.json.images||[],f=[],s=0;s<u.length;++s)f.push(j(t,u[s],s,n,a));return e.next=5,Promise.all(f);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},r)}))).apply(this,arguments)}function j(e,r,t,n,a){return B.apply(this,arguments)}function B(){return(B=(0,r.default)(e.default.mark(function r(s,i,l,o,c){var p,d,g,b,y,h,v;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(p=c.fetch,d=c.parse,!i.uri){e.next=9;break}return b=(0,u.resolveUrl)(i.uri,o),e.next=5,p(b);case 5:return y=e.sent,e.next=8,y.arrayBuffer();case 8:g=e.sent;case 9:return Number.isFinite(i.bufferView)&&(h=(0,f.getTypedArrayForBufferView)(s.json,s.buffers,i.bufferView),g=(0,n.getZeroOffsetArrayBuffer)(h.buffer,h.byteOffset,h.byteLength)),(0,a.default)(g,"glTF image has no data"),e.next=13,d(g,t.ImageLoader,{},c);case 13:v=e.sent,s.images[l]=v;case 15:case"end":return e.stop()}},r)}))).apply(this,arguments)}
},{"@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","@loaders.gl/images":"DNDh","@loaders.gl/loader-utils":"oHIH","./utils/assert":"VYAT","./gltf-utils/resolve-url":"KsSh","./gltf-utils/get-typed-array":"CwWI","./extensions/gltf-extensions":"VXKf","./parse-glb":"w4DY","./normalize-gltf-v1":"uc9G","./post-process-gltf":"zrUm"}],"BK4T":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parse=i,exports.default=void 0;var e=o(require("@babel/runtime/regenerator")),t=o(require("@babel/runtime/helpers/esm/defineProperty")),r=o(require("@babel/runtime/helpers/esm/asyncToGenerator")),s=require("./lib/parse-gltf");function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function c(e){for(var r=1;r<arguments.length;r++){var s=null!=arguments[r]?arguments[r]:{};r%2?n(Object(s),!0).forEach(function(r){(0,t.default)(e,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}var l="2.3.7",a={id:"gltf",name:"glTF",version:l,extensions:["gltf","glb"],mimeTypes:["model/gltf+json","model/gltf-binary"],text:!0,binary:!0,tests:["glTF"],parse:i,options:{gltf:{normalize:!1,loadBuffers:!0,loadImages:!0,decompressMeshes:!0,postProcess:!0},uri:"",log:console},deprecatedOptions:{fetchImages:"gltf.loadImages",createImages:"gltf.loadImages",decompress:"gltf.decompressMeshes",postProcess:"gltf.postProcess",gltf:{decompress:"gltf.decompressMeshes"}}},f=a;function i(e){return p.apply(this,arguments)}function p(){return(p=(0,r.default)(e.default.mark(function t(r){var o,n,l,f,i,p=arguments;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=p.length>1&&void 0!==p[1]?p[1]:{},n=p.length>2?p[2]:void 0,(o=c(c({},a.options),o)).gltf=c(c({},a.options.gltf),o.gltf),u(o),l=o.byteOffset,f=void 0===l?0:l,i={},e.next=9,(0,s.parseGLTF)(i,r,f,o,n);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}},t)}))).apply(this,arguments)}function u(e){"fetchImages"in e&&(e.gltf.loadImages=e.fetchImages),"createImages"in e&&(e.gltf.loadImages=e.createImages),"fetchLinkedResources"in e&&(e.gltf.fetchBuffers=e.fetchLinkedResources),"decompress"in e&&(e.gltf.decompressMeshes=e.decompress),"decompress"in e.gltf&&(e.gltf.decompressMeshes=e.gltf.decompress),"postProcess"in e&&(e.gltf.postProcess=e.postProcess)}exports.default=f;
},{"@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/defineProperty":"iDM3","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","./lib/parse-gltf":"w8xo"}],"sMGh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var t=require("@loaders.gl/loader-utils"),e=1179937895,i=1313821514,r=5130562,a=!0;function n(n,s){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,d=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],n.magic),v=void 0===d?e:d,f=n.version,U=void 0===f?2:f,l=n.json,u=void 0===l?{}:l,c=n.binary,g=o;s&&(s.setUint32(o+0,v,a),s.setUint32(o+4,U,a),s.setUint32(o+8,0,a));var y=o+8,p=o+=12;s&&(s.setUint32(o+0,0,a),s.setUint32(o+4,i,a)),o+=8;var P=JSON.stringify(u);if(o=(0,t.copyPaddedStringToDataView)(s,o,P),s){var b=o-p-8;s.setUint32(p+0,b,a)}if(c){var h=o;if(s&&(s.setUint32(o+0,0,a),s.setUint32(o+4,r,a)),o+=8,o=(0,t.copyPaddedArrayBufferToDataView)(s,o,c),s){var j=o-h-8;s.setUint32(h+0,j,a)}}if(s){var w=o-g;s.setUint32(y,w,a)}return o}
},{"@loaders.gl/loader-utils":"oHIH"}],"yhKY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.encodeGLTFSync=t;var e=r(require("./encode-glb"));function r(e){return e&&e.__esModule?e:{default:e}}function t(r,t,u,f){return n(r),(0,e.default)(r,t,u,f)}function n(e){var r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).firstBuffer,t=void 0===r?0:r;if(e.buffers&&e.buffers.length>t)throw new Error("encodeGLTF: multiple buffers not yet implemented")}
},{"./encode-glb":"sMGh"}],"gAGW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./lib/encode-gltf"),n={name:"glTF",extensions:["glb"],mimeTypes:["model/gltf-binary"],encodeSync:t,binary:!0,options:{}};function t(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=t.byteOffset,r=void 0===o?0:o,i=(0,e.encodeGLTFSync)(n,null,r,t),l=new ArrayBuffer(i),d=new DataView(l);return(0,e.encodeGLTFSync)(n,d,r,t),l}exports.default=n;
},{"./lib/encode-gltf":"yhKY"}],"VUnA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("@babel/runtime/regenerator")),r=n(require("@babel/runtime/helpers/esm/asyncToGenerator")),t=n(require("./lib/parse-glb"));function n(e){return e&&e.__esModule?e:{default:e}}var u="2.3.7",a={id:"glb",name:"GLB",version:u,extensions:["glb"],mimeTypes:["model/gltf-binary"],binary:!0,parse:function(){var t=(0,r.default)(e.default.mark(function r(t,n){return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i(t,n));case 1:case"end":return e.stop()}},r)}));return function(e,r){return t.apply(this,arguments)}}(),parseSync:i,options:{glb:{strict:!1}}};function i(e,r){var n=r.byteOffset,u=void 0===n?0:n,a={};return(0,t.default)(a,e,u,r),a}exports.default=a;
},{"@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","./lib/parse-glb":"w4DY"}],"ZaXz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./lib/encode-glb"));function t(e){return e&&e.__esModule?e:{default:e}}var r={name:"GLB",extensions:["glb"],mimeTypes:["model/gltf-binary"],encodeSync:n,binary:!0,options:{glb:{}}};function n(t,r){var n=r.byteOffset,l=void 0===n?0:n,o=(0,e.default)(t,null,l,r),u=new ArrayBuffer(o),a=new DataView(u);return(0,e.default)(t,a,l,r),u}exports.default=r;
},{"./lib/encode-glb":"sMGh"}],"MVf8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("@babel/runtime/helpers/esm/classCallCheck")),t=i(require("@babel/runtime/helpers/esm/createClass")),s=require("@loaders.gl/loader-utils"),r=require("@loaders.gl/images"),n=require("../gltf-utils/gltf-utils"),u=i(require("../encode-glb"));function i(e){return e&&e.__esModule?e:{default:e}}var o=function(){function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,e.default)(this,i),this.byteLength=0,this.json={buffers:[{byteLength:0}],bufferViews:[],accessors:[],images:[],meshes:[]},this.sourceBuffers=[],this.log=t.log||console}return(0,t.default)(i,[{key:"getByteLength",value:function(){return this.byteLength}},{key:"isImage",value:function(e){return(0,r.isImage)(e)}},{key:"encodeSync",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.encodeAsGLB(e)}},{key:"encodeAsGLB",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._packBinaryChunk(),e.magic&&console.warn("Custom glTF magic number no longer supported");var t={version:2,json:this.json,binary:this.arrayBuffer},s=(0,u.default)(t,null,0,e),r=new ArrayBuffer(s),n=new DataView(r);return(0,u.default)(t,n,0,e),r}},{key:"addApplicationData",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.json[e]=t,this}},{key:"addBuffer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{size:3},s=this.addBufferView(e),r={size:t.size,componentType:(0,n.getComponentTypeFromArray)(e),count:Math.round(e.length/t.size)};return this.addAccessor(s,Object.assign(r,t))}},{key:"addBufferView",value:function(e){var t=e.byteLength||e.length;return this.json.bufferViews.push({buffer:0,byteOffset:this.byteLength,byteLength:t}),this.byteLength+=(0,s.padTo4Bytes)(t),this.sourceBuffers.push(e),this.json.bufferViews.length-1}},{key:"addAccessor",value:function(e,t){return this.json.accessors.push({bufferView:e,type:(0,n.getAccessorTypeFromSize)(t.size),componentType:t.componentType,count:t.count}),this.json.accessors.length-1}},{key:"_pack",value:function(){return this._packBinaryChunk(),{arrayBuffer:this.arrayBuffer,json:this.json}}},{key:"_packBinaryChunk",value:function(){if(!this.arrayBuffer){for(var e=this.byteLength,t=new ArrayBuffer(e),r=new Uint8Array(t),n=0,u=0;u<this.sourceBuffers.length;u++){var i=this.sourceBuffers[u];n=(0,s.copyToArray)(i,r,n)}this.json.buffers[0].byteLength=e,this.arrayBuffer=t,this.sourceBuffers=[]}}},{key:"_getInternalCounts",value:function(){return{buffers:this.json.buffers.length,bufferViews:this.json.bufferViews.length,accessors:this.json.accessors.length,images:this.json.images.length}}}]),i}();exports.default=o;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@loaders.gl/loader-utils":"oHIH","@loaders.gl/images":"DNDh","../gltf-utils/gltf-utils":"aXZw","../encode-glb":"sMGh"}],"fi6n":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"KHR_DRACO_MESH_COMPRESSION",{enumerable:!0,get:function(){return e.KHR_DRACO_MESH_COMPRESSION}}),Object.defineProperty(exports,"UBER_POINT_CLOUD_EXTENSION",{enumerable:!0,get:function(){return e.UBER_POINT_CLOUD_EXTENSION}}),Object.defineProperty(exports,"GLTFLoader",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"GLTFWriter",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"GLBLoader",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"GLBWriter",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"GLTFScenegraph",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"postProcessGLTF",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"GLBBuilder",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"encodeGLTFSync",{enumerable:!0,get:function(){return f.encodeGLTFSync}});var e=require("./lib/gltf-constants"),r=c(require("./gltf-loader")),t=c(require("./gltf-writer")),n=c(require("./glb-loader")),u=c(require("./glb-writer")),o=c(require("./lib/gltf-scenegraph")),i=c(require("./lib/post-process-gltf")),l=c(require("./lib/deprecated/glb-builder")),f=require("./lib/encode-gltf");function c(e){return e&&e.__esModule?e:{default:e}}
},{"./lib/gltf-constants":"dUEF","./gltf-loader":"BK4T","./gltf-writer":"gAGW","./glb-loader":"VUnA","./glb-writer":"ZaXz","./lib/gltf-scenegraph":"DnuC","./lib/post-process-gltf":"zrUm","./lib/deprecated/glb-builder":"MVf8","./lib/encode-gltf":"yhKY"}],"ip4p":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parse3DTileGLTFViewSync=n,exports.extractGLTF=s,exports.GLTF_FORMAT=void 0;var e=l(require("@babel/runtime/regenerator")),t=l(require("@babel/runtime/helpers/esm/asyncToGenerator")),r=require("@loaders.gl/gltf"),f=require("@loaders.gl/loader-utils");function l(e){return e&&e.__esModule?e:{default:e}}var a={URI:0,EMBEDDED:1};function n(e,t,r,l){e.rotateYtoZ=!0;var a=e.byteOffset+e.byteLength-r;if(0===a)throw new Error("glTF byte length must be greater than 0.");return e.gltfUpAxis=l["3d-tiles"]&&l["3d-tiles"].assetGltfUpAxis?l["3d-tiles"].assetGltfUpAxis:"Y",e.gltfArrayBuffer=(0,f.getZeroOffsetArrayBuffer)(t,r,a),e.gltfByteOffset=0,e.gltfByteLength=a,r%4==0||console.warn("".concat(e.type,": embedded glb is not aligned to a 4-byte boundary.")),e.byteOffset+e.byteLength}function s(e,t,r,f){return o.apply(this,arguments)}function o(){return(o=(0,t.default)(e.default.mark(function t(f,l,a,n){var s,o,i;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s=a["3d-tiles"]||{},u(f,l,a),!s.loadGLTF){e.next=16;break}if(o=n.parse,i=n.fetch,!f.gltfUrl){e.next=9;break}return e.next=7,i(f.gltfUrl,a);case 7:f.gltfArrayBuffer=e.sent,f.gltfByteOffset=0;case 9:if(!f.gltfArrayBuffer){e.next=16;break}return e.next=12,o(f.gltfArrayBuffer,r.GLTFLoader,a,n);case 12:f.gltf=e.sent,delete f.gltfArrayBuffer,delete f.gltfByteOffset,delete f.gltfByteLength;case 16:case"end":return e.stop()}},t)}))).apply(this,arguments)}function u(e,t,r){switch(t){case a.URI:var f=new Uint8Array(e.gltfArrayBuffer,e.gltfByteOffset),l=(new TextDecoder).decode(f);e.gltfUrl=l.replace(/[\s\0]+$/,""),delete e.gltfArrayBuffer,delete e.gltfByteOffset,delete e.gltfByteLength;break;case a.EMBEDDED:break;default:throw new Error("b3dm: Illegal glTF format field")}}exports.GLTF_FORMAT=a;
},{"@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","@loaders.gl/gltf":"fi6n","@loaders.gl/loader-utils":"oHIH"}],"lyG7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseBatchedModel3DTile=i;var e=u(require("@babel/runtime/regenerator")),r=u(require("@babel/runtime/helpers/esm/asyncToGenerator")),t=require("@loaders.gl/math"),a=u(require("../classes/tile-3d-feature-table")),n=require("./helpers/parse-3d-tile-header"),l=require("./helpers/parse-3d-tile-tables"),s=require("./helpers/parse-3d-tile-gltf-view");function u(e){return e&&e.__esModule?e:{default:e}}function i(e,r,t,a,n){return c.apply(this,arguments)}function c(){return(c=(0,r.default)(e.default.mark(function r(t,a,n,l,u){var i,c;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=p(t,a,n,l,u),e.next=3,(0,s.extractGLTF)(t,s.GLTF_FORMAT.EMBEDDED,l,u);case 3:return i=t.gltf||{},(c=i.extensions)&&c.CESIUM_RTC&&(t.rtcCenter=c.CESIUM_RTC.center),e.abrupt("return",n);case 6:case"end":return e.stop()}},r)}))).apply(this,arguments)}function p(e,r,u,i,c){u=(0,n.parse3DTileHeaderSync)(e,r,u),u=(0,l.parse3DTileTablesHeaderSync)(e,r,u),u=(0,l.parse3DTileTablesSync)(e,r,u,i),u=(0,s.parse3DTileGLTFViewSync)(e,r,u,i);var p=new a.default(e.featureTableJson,e.featureTableBinary);return e.rtcCenter=p.getGlobalProperty("RTC_CENTER",t.GL.FLOAT,3),u}
},{"@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","@loaders.gl/math":"nR0E","../classes/tile-3d-feature-table":"nbpZ","./helpers/parse-3d-tile-header":"u2db","./helpers/parse-3d-tile-tables":"OEpE","./helpers/parse-3d-tile-gltf-view":"ip4p"}],"jiTs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseInstancedModel3DTile=c;var e=T(require("@babel/runtime/regenerator")),r=T(require("@babel/runtime/helpers/esm/asyncToGenerator")),t=require("@math.gl/core"),a=require("@math.gl/geospatial"),o=require("@loaders.gl/math"),n=T(require("../classes/tile-3d-feature-table")),i=T(require("../classes/tile-3d-batch-table")),s=require("./helpers/parse-3d-tile-header"),l=require("./helpers/parse-3d-tile-tables"),u=require("./helpers/parse-3d-tile-gltf-view");function T(e){return e&&e.__esModule?e:{default:e}}function c(e,r,t,a,o){return d.apply(this,arguments)}function d(){return(d=(0,r.default)(e.default.mark(function r(t,a,o,n,i){return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=p(t,a,o,n,i),e.next=3,(0,u.extractGLTF)(t,t.gltfFormat,n,i);case 3:return e.abrupt("return",o);case 4:case"end":return e.stop()}},r)}))).apply(this,arguments)}function p(e,r,t,a,T){if(t=(0,s.parse3DTileHeaderSync)(e,r,t),1!==e.version)throw new Error("Instanced 3D Model version ".concat(e.version," is not supported"));t=(0,l.parse3DTileTablesHeaderSync)(e,r,t);var c=new DataView(r);if(e.gltfFormat=c.getUint32(t,!0),t+=4,t=(0,l.parse3DTileTablesSync)(e,r,t,a),t=(0,u.parse3DTileGLTFViewSync)(e,r,t,a),0===e.featureTableJsonByteLength)throw new Error("i3dm parser: featureTableJsonByteLength is zero.");var d=new n.default(e.featureTableJson,e.featureTableBinary),p=d.getGlobalProperty("INSTANCES_LENGTH");if(d.featuresLength=p,!Number.isFinite(p))throw new Error("i3dm parser: INSTANCES_LENGTH must be defined");return e.eastNorthUp=d.getGlobalProperty("EAST_NORTH_UP"),e.rtcCenter=d.getGlobalProperty("RTC_CENTER",o.GL.FLOAT,3),f(e,d,new i.default(e.batchTableJson,e.batchTableBinary,p),p),t}function f(e,r,n,i){for(var s={instances:new Array(i),batchTable:e._batchTable,cull:!1,url:void 0,gltf:void 0,basePath:void 0,incrementallyLoadTextures:!1,forwardAxis:[1,0,0]}.instances,l=new t.Vector3,u=(new t.Vector3,new t.Vector3,new t.Vector3,new t.Matrix3),T=new t.Quaternion,c=new t.Vector3,d={},p=new t.Matrix4,f=[],N=[],O=new t.Vector3,L=new t.Vector3,h=0;h<i;h++){var m=void 0;if(r.hasProperty("POSITION"))m=r.getProperty("POSITION",o.GL.FLOAT,3,h,l);else if(r.hasProperty("POSITION_QUANTIZED")){m=r.getProperty("POSITION_QUANTIZED",o.GL.UNSIGNED_SHORT,3,h,l);var _=r.getGlobalProperty("QUANTIZED_VOLUME_OFFSET",o.GL.FLOAT,3,O);if(!_)throw new Error("i3dm parser: QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.");var w=r.getGlobalProperty("QUANTIZED_VOLUME_SCALE",o.GL.FLOAT,3,L);if(!w)throw new Error("i3dm parser: QUANTIZED_VOLUME_SCALE must be defined for quantized positions.");for(var b=0;b<3;b++)m[b]=m[b]/65535*w[b]+_[b]}if(!m)throw new Error("i3dm: POSITION or POSITION_QUANTIZED must be defined for each instance.");l.copy(m),d.translation=l,e.normalUp=r.getProperty("NORMAL_UP",o.GL.FLOAT,3,h,f),e.normalRight=r.getProperty("NORMAL_RIGHT",o.GL.FLOAT,3,h,N);if(e.normalUp){if(!e.normalRight)throw new Error("i3dm: Custom orientation requires both NORMAL_UP and NORMAL_RIGHT.");e.hasCustomOrientation=!0}else{if(e.octNormalUp=r.getProperty("NORMAL_UP_OCT32P",o.GL.UNSIGNED_SHORT,2,f),e.octNormalRight=r.getProperty("NORMAL_RIGHT_OCT32P",o.GL.UNSIGNED_SHORT,2,N),e.octNormalUp){if(!e.octNormalRight)throw new Error("i3dm: oct-encoded orientation requires NORMAL_UP_OCT32P and NORMAL_RIGHT_OCT32P");throw new Error("i3dm: oct-encoded orientation not implemented")}e.eastNorthUp?(a.Ellipsoid.WGS84.eastNorthUpToFixedFrame(l,p),p.getRotationMatrix3(u)):u.identity()}!1,T.fromMatrix3(u),d.rotation=T,c.set(1,1,1);var E=r.getProperty("SCALE",o.GL.FLOAT,1,h);Number.isFinite(E)&&c.multiplyByScalar(E);var y=r.getProperty("SCALE_NON_UNIFORM",o.GL.FLOAT,3,h,f);y&&c.scale(y),d.scale=c;var I=r.getProperty("BATCH_ID",o.GL.UNSIGNED_SHORT,1,h);void 0===I&&(I=h);var g=(new t.Matrix4).fromQuaternion(d.rotation);p.identity(),p.translate(d.translation),p.multiplyRight(g),p.scale(d.scale);var A=p.clone();s[h]={modelMatrix:A,batchId:I}}e.instances=s}
},{"@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","@math.gl/core":"dwLx","@math.gl/geospatial":"pfW5","@loaders.gl/math":"nR0E","../classes/tile-3d-feature-table":"nbpZ","../classes/tile-3d-batch-table":"DJYW","./helpers/parse-3d-tile-header":"u2db","./helpers/parse-3d-tile-tables":"OEpE","./helpers/parse-3d-tile-gltf-view":"ip4p"}],"LfZZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseComposite3DTile=a;var e=n(require("@babel/runtime/regenerator")),t=n(require("@babel/runtime/helpers/esm/asyncToGenerator")),r=require("./helpers/parse-3d-tile-header");function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t,r,n,a,u){return s.apply(this,arguments)}function s(){return(s=(0,t.default)(e.default.mark(function t(n,a,s,u,i,l){var p,o;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s=(0,r.parse3DTileHeaderSync)(n,a,s),p=new DataView(a),n.tilesLength=p.getUint32(s,!0),s+=4,n.tiles=[];case 5:if(!(n.tiles.length<n.tilesLength&&n.byteLength-s>12)){e.next=13;break}return o={},n.tiles.push(o),e.next=10,l(a,s,u,i,o);case 10:s=e.sent,e.next=5;break;case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}},t)}))).apply(this,arguments)}
},{"@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","./helpers/parse-3d-tile-header":"u2db"}],"aH79":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parse3DTile=l;var e=o(require("@babel/runtime/regenerator")),r=o(require("@babel/runtime/helpers/esm/asyncToGenerator")),t=require("../constants"),n=require("./helpers/parse-utils"),a=require("./parse-3d-tile-point-cloud"),s=require("./parse-3d-tile-batched-model"),u=require("./parse-3d-tile-instanced-model"),i=require("./parse-3d-tile-composite");function o(e){return e&&e.__esModule?e:{default:e}}function l(e){return p.apply(this,arguments)}function p(){return(p=(0,r.default)(e.default.mark(function r(o){var p,c,d,T,D=arguments;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:p=D.length>1&&void 0!==D[1]?D[1]:0,c=D.length>2?D[2]:void 0,d=D.length>3?D[3]:void 0,(T=D.length>4&&void 0!==D[4]?D[4]:{}).byteOffset=p,T.type=(0,n.getMagicString)(o,p),e.t0=T.type,e.next=e.t0===t.TILE3D_TYPE.COMPOSITE?9:e.t0===t.TILE3D_TYPE.BATCHED_3D_MODEL?12:e.t0===t.TILE3D_TYPE.INSTANCED_3D_MODEL?15:e.t0===t.TILE3D_TYPE.POINT_CLOUD?18:21;break;case 9:return e.next=11,(0,i.parseComposite3DTile)(T,o,p,c,d,l);case 11:return e.abrupt("return",e.sent);case 12:return e.next=14,(0,s.parseBatchedModel3DTile)(T,o,p,c,d);case 14:return e.abrupt("return",e.sent);case 15:return e.next=17,(0,u.parseInstancedModel3DTile)(T,o,p,c,d);case 17:return e.abrupt("return",e.sent);case 18:return e.next=20,(0,a.parsePointCloud3DTile)(T,o,p,c,d);case 20:return e.abrupt("return",e.sent);case 21:throw new Error("3DTileLoader: unknown type ".concat(T.type));case 22:case"end":return e.stop()}},r)}))).apply(this,arguments)}
},{"@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","../constants":"f96v","./helpers/parse-utils":"JJDe","./parse-3d-tile-point-cloud":"Si98","./parse-3d-tile-batched-model":"lyG7","./parse-3d-tile-instanced-model":"jiTs","./parse-3d-tile-composite":"LfZZ"}],"urGn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.normalizeTileData=i,exports.normalizeTileHeaders=u;var r=require("@loaders.gl/tiles");function t(r,t){var n;if("undefined"==typeof Symbol||null==r[Symbol.iterator]){if(Array.isArray(r)||(n=e(r))||t&&r&&"number"==typeof r.length){n&&(r=n);var o=0,a=function(){};return{s:a,n:function(){return o>=r.length?{done:!0}:{done:!1,value:r[o++]}},e:function(r){throw r},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,c=!1;return{s:function(){n=r[Symbol.iterator]()},n:function(){var r=n.next();return u=r.done,r},e:function(r){c=!0,i=r},f:function(){try{u||null==n.return||n.return()}finally{if(c)throw i}}}}function e(r,t){if(r){if("string"==typeof r)return n(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);return"Object"===e&&r.constructor&&(e=r.constructor.name),"Map"===e||"Set"===e?Array.from(r):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?n(r,t):void 0}}function n(r,t){(null==t||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}function o(t){if(!t.contentUrl)return r.TILE_TYPE.EMPTY;var e=t.contentUrl.split(".").pop();switch(e){case"pnts":return r.TILE_TYPE.POINTCLOUD;case"i3dm":case"b3dm":return r.TILE_TYPE.SCENEGRAPH;default:return e}}function a(t){switch(t){case"REPLACE":case"replace":return r.TILE_REFINEMENT.REPLACE;case"ADD":case"add":return r.TILE_REFINEMENT.ADD;default:return t}}function i(t,e){if(t.content){var n=t.content.uri||t.content.url;t.contentUrl="".concat(e.basePath,"/").concat(n)}return t.id=t.contentUrl,t.lodMetricType=r.LOD_METRIC_TYPE.GEOMETRIC_ERROR,t.lodMetricValue=t.geometricError,t.transformMatrix=t.transform,t.type=o(t),t.refine=a(t.refine),t}function u(r){var e=r.basePath,n=i(r.root,r),o=[];for(o.push(n);o.length>0;){var a,u=t(o.pop().children||[]);try{for(u.s();!(a=u.n()).done;){var c=a.value;i(c,{basePath:e}),o.push(c)}}catch(l){u.e(l)}finally{u.f()}}return n}
},{"@loaders.gl/tiles":"reP2"}],"PdXA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("@babel/runtime/regenerator")),t=u(require("@babel/runtime/helpers/esm/asyncToGenerator")),r=require("@loaders.gl/loader-utils"),n=require("@loaders.gl/tiles"),a=require("./lib/parsers/parse-3d-tile"),s=require("./lib/parsers/parse-3d-tile-header");function u(e){return e&&e.__esModule?e:{default:e}}var i="2.3.7";function l(e){return r.path.dirname(e.url)}function o(e,t,r){return c.apply(this,arguments)}function c(){return(c=(0,t.default)(e.default.mark(function t(r,n,s){var u;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(u={}).content=u.content||{},0,e.next=5,(0,a.parse3DTile)(r,0,n,s,u.content);case 5:return e.abrupt("return",u.content);case 6:case"end":return e.stop()}},t)}))).apply(this,arguments)}function d(e,t,r){return p.apply(this,arguments)}function p(){return(p=(0,t.default)(e.default.mark(function t(r,a,u){var i;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(i=JSON.parse((new TextDecoder).decode(r))).loader=a.loader||T,i.url=u.url,i.basePath=l(i),i.root=(0,s.normalizeTileHeaders)(i),i.type=n.TILESET_TYPE.TILES3D,i.lodMetricType=n.LOD_METRIC_TYPE.GEOMETRIC_ERROR,i.lodMetricValue=i.root.lodMetricValue,e.abrupt("return",i);case 9:case"end":return e.stop()}},t)}))).apply(this,arguments)}function f(e,t,r,n){return m.apply(this,arguments)}function m(){return(m=(0,t.default)(e.default.mark(function t(r,n,a,s){var u;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(u=n["3d-tiles"]||{},!("auto"===u.isTileset?a.url&&-1!==a.url.indexOf(".json"):u.isTileset)){e.next=8;break}return e.next=5,d(r,n,a);case 5:r=e.sent,e.next=11;break;case 8:return e.next=10,o(r,n,a);case 10:r=e.sent;case 11:return e.abrupt("return",r);case 12:case"end":return e.stop()}},t)}))).apply(this,arguments)}var T={id:"3d-tiles",name:"3D Tiles",version:i,extensions:["cmpt","pnts","b3dm","i3dm"],mimeTypes:["application/octet-stream"],tests:["cmpt","pnts","b3dm","i3dm"],parse:f,options:{"3d-tiles":{loadGLTF:!0,decodeQuantizedPositions:!1,isTileset:"auto",tile:null,tileset:null,assetGltfUpAxis:null}}},b=T;exports.default=b;
},{"@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","@loaders.gl/loader-utils":"oHIH","@loaders.gl/tiles":"reP2","./lib/parsers/parse-3d-tile":"aH79","./lib/parsers/parse-3d-tile-header":"urGn"}],"PWvg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getIonTilesetMetadata=p,exports.getIonAssets=y,exports.getIonAssetMetadata=b;var e=o(require("@babel/runtime/helpers/esm/defineProperty")),t=o(require("@babel/runtime/regenerator")),r=o(require("@babel/runtime/helpers/esm/asyncToGenerator")),n=require("@loaders.gl/core"),a=require("@loaders.gl/loader-utils");function o(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function s(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?u(Object(n),!0).forEach(function(r){(0,e.default)(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function c(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=i(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return u=e.done,e},e:function(e){s=!0,o=e},f:function(){try{u||null==r.return||r.return()}finally{if(s)throw o}}}}function i(e,t){if(e){if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var l="https://api.cesium.com/v1/assets";function p(e,t){return d.apply(this,arguments)}function d(){return(d=(0,r.default)(t.default.mark(function e(r,n){var o,u,s,i,f,l,p;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=6;break}return e.next=3,y(r);case 3:o=e.sent,u=c(o.items);try{for(u.s();!(s=u.n()).done;)"3DTILES"===(i=s.value).type&&(n=i.id)}catch(t){u.e(t)}finally{u.f()}case 6:return e.next=8,b(r,n);case 8:return f=e.sent,l=f.type,p=f.url,(0,a.assert)("3DTILES"===l&&p),f.headers={Authorization:"Bearer ".concat(f.accessToken)},e.abrupt("return",f);case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function y(e){return h.apply(this,arguments)}function h(){return(h=(0,r.default)(t.default.mark(function e(r){var o,u,s;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(0,a.assert)(r),o=l,u={Authorization:"Bearer ".concat(r)},e.next=5,(0,n.fetchFile)(o,{headers:u,throws:!0});case 5:return s=e.sent,e.next=8,s.json();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function b(e,t){return m.apply(this,arguments)}function m(){return(m=(0,r.default)(t.default.mark(function e(r,o){var u,c,i,f,p;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(0,a.assert)(r,o),u={Authorization:"Bearer ".concat(r)},c="".concat(l,"/").concat(o),e.next=5,(0,n.fetchFile)("".concat(c),{headers:u,throws:!0});case 5:return i=e.sent,e.next=8,i.json();case 8:return f=e.sent,e.next=11,(0,n.fetchFile)("".concat(c,"/endpoint"),{headers:u,throws:!0});case 11:return i=e.sent,e.next=14,i.json();case 14:return p=e.sent,f=s(s({},f),p),e.abrupt("return",f);case 17:case"end":return e.stop()}},e)}))).apply(this,arguments)}
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","@loaders.gl/core":"ikKD","@loaders.gl/loader-utils":"oHIH"}],"OI04":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("@babel/runtime/regenerator")),r=o(require("@babel/runtime/helpers/esm/defineProperty")),t=o(require("@babel/runtime/helpers/esm/asyncToGenerator")),n=o(require("./tiles-3d-loader")),u=require("./lib/ion/ion");function o(e){return e&&e.__esModule?e:{default:e}}function i(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){(0,r.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function s(e){return c.apply(this,arguments)}function c(){return(c=(0,t.default)(e.default.mark(function r(t){var n,o,i,a,s=arguments;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(n=s.length>1&&void 0!==s[1]?s[1]:{})["cesium-ion"]||{},o=n.accessToken,i=n.assetId,Number.isFinite(i)||(a=t.match(/\/([0-9]+)\/tileset.json/),i=a&&a[1]),e.abrupt("return",(0,u.getIonTilesetMetadata)(o,i));case 6:case"end":return e.stop()}},r)}))).apply(this,arguments)}var l=a(a({},n.default),{},{id:"cesium-ion",name:"Cesium Ion",preload:s,parse:function(){var r=(0,t.default)(e.default.mark(function r(t,u,o,i){return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u["3d-tiles"]=u["cesium-ion"],u.loader=l,e.abrupt("return",n.default.parse(t,u,o));case 3:case"end":return e.stop()}},r)}));return function(e,t,n,u){return r.apply(this,arguments)}}(),options:{"cesium-ion":a(a({},n.default.options["3d-tiles"]),{},{accessToken:null})}}),p=l;exports.default=p;
},{"@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/defineProperty":"iDM3","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","./tiles-3d-loader":"PdXA","./lib/ion/ion":"PWvg"}],"VI8Y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.encode3DTileHeader=t,exports.encode3DTileByteLength=i;var e=require("@loaders.gl/loader-utils");function t(t,i,r){if(!i)return r+12;var n=t.magic,s=t.version,o=void 0===s?1:s,u=t.byteLength,a=void 0===u?12:u;return(0,e.assert)(Array.isArray(n)&&Number.isFinite(o)&&Number.isFinite(a)),i.setUint8(r+0,n[0]),i.setUint8(r+1,n[1]),i.setUint8(r+2,n[2]),i.setUint8(r+3,n[3]),i.setUint32(r+4,o,!0),i.setUint32(r+8,a,!0),r+=12}function i(e,t,i){e&&e.setUint32(t+8,i,!0)}
},{"@loaders.gl/loader-utils":"oHIH"}],"XIR1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.encodeComposite3DTile=c;var e=n(require("@babel/runtime/helpers/esm/defineProperty")),t=require("../constants"),r=require("./helpers/encode-3d-tile-header");function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function i(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?o(Object(n),!0).forEach(function(r){(0,e.default)(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function c(e,n,o,c,s){e=i({magic:t.MAGIC_ARRAY.COMPOSITE,tiles:[]},e);var l=o;o+=(0,r.encode3DTileHeader)(e,n,o),n&&n.setUint32(o,e.tiles.length,!0),o+=4;for(var u=0;u<e.tiles.length;++u)o+=s(e.tiles[u],n,o,c);return(0,r.encode3DTileByteLength)(n,l,o-l),o}
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","../constants":"f96v","./helpers/encode-3d-tile-header":"VI8Y"}],"VXcM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.encodeBatchedModel3DTile=s;var e=o(require("@babel/runtime/helpers/esm/defineProperty")),t=require("@loaders.gl/loader-utils"),r=require("../constants"),n=require("./helpers/encode-3d-tile-header");function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function c(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?i(Object(n),!0).forEach(function(r){(0,e.default)(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function s(e,o,i,s){var u=e.featuresLength,l={BATCH_LENGTH:void 0===u?1:u},a=JSON.stringify(l),p=a.length;e=c({magic:r.MAGIC_ARRAY.BATCHED_MODEL},e);var d=i;return i=(0,n.encode3DTileHeader)(e,o,i),o&&(o.setUint32(12,p,!0),o.setUint32(16,0,!0),o.setUint32(20,0,!0),o.setUint32(24,0,!0)),i+=16,i+=(0,t.copyStringToDataView)(o,i,a,p),(0,n.encode3DTileByteLength)(o,d,i-d),i}
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","@loaders.gl/loader-utils":"oHIH","../constants":"f96v","./helpers/encode-3d-tile-header":"VI8Y"}],"tWfQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.encodeInstancedModel3DTile=s;var e=i(require("@babel/runtime/helpers/esm/defineProperty")),t=require("@loaders.gl/loader-utils"),r=require("../constants"),n=require("./helpers/encode-3d-tile-header");function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function c(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?o(Object(n),!0).forEach(function(r){(0,e.default)(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function s(e,i,o,s){var l=e,a=l.featuresLength,u=void 0===a?1:a,f=l.gltfFormat,p=void 0===f?1:f,d=l.gltfUri,O=void 0===d?"":d,g=O.length,y={INSTANCES_LENGTH:u,POSITION:new Array(3*u).fill(0)},b=JSON.stringify(y),j=b.length;e=c({magic:r.MAGIC_ARRAY.INSTANCED_MODEL},e);var h=o;return o=(0,n.encode3DTileHeader)(e,i,0),i&&(i.setUint32(12,j,!0),i.setUint32(16,0,!0),i.setUint32(20,0,!0),i.setUint32(24,0,!0),i.setUint32(28,p,!0)),o+=20,o+=(0,t.copyStringToDataView)(i,o,b,j),o+=(0,t.copyStringToDataView)(i,o,O,g),(0,n.encode3DTileByteLength)(i,h,o-h),o}
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","@loaders.gl/loader-utils":"oHIH","../constants":"f96v","./helpers/encode-3d-tile-header":"VI8Y"}],"oa7J":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.encodePointCloud3DTile=s;var e=o(require("@babel/runtime/helpers/esm/defineProperty")),t=require("../constants"),r=require("./helpers/encode-3d-tile-header"),n=require("@loaders.gl/loader-utils");function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function a(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?i(Object(n),!0).forEach(function(r){(0,e.default)(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var c={POINTS_LENGTH:1,POSITIONS:{byteOffset:0}};function s(e,o,i,s){var u=e.featureTableJson,l=void 0===u?c:u,f=JSON.stringify(l);f=(0,n.padStringToByteAlignment)(f,4);var O=e.featureTableJsonByteLength,p=void 0===O?f.length:O,y=new ArrayBuffer(12),b=y.byteLength;e=a({magic:t.MAGIC_ARRAY.POINT_CLOUD},e);var d=i;return i+=(0,r.encode3DTileHeader)(e,o,0),o&&(o.setUint32(i+0,p,!0),o.setUint32(i+4,b,!0),o.setUint32(i+8,0,!0),o.setUint32(i+12,0,!0)),i+=16,i+=(0,n.copyStringToDataView)(o,i,f,p),i+=(0,n.copyBinaryToDataView)(o,i,y,b),(0,r.encode3DTileByteLength)(o,d,i-d),i}
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","../constants":"f96v","./helpers/encode-3d-tile-header":"VI8Y","@loaders.gl/loader-utils":"oHIH"}],"VXbm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=d;var e=require("../constants"),r=require("@loaders.gl/loader-utils"),t=require("./encode-3d-tile-composite"),n=require("./encode-3d-tile-batched-model"),o=require("./encode-3d-tile-instanced-model"),i=require("./encode-3d-tile-point-cloud");function d(e,r){var t=l(e,null,0,r),n=new ArrayBuffer(t);return l(e,new DataView(n),0,r),n}function l(d,c,u,s){switch((0,r.assert)("string"==typeof d.type),d.type){case e.TILE3D_TYPE.COMPOSITE:return(0,t.encodeComposite3DTile)(d,c,u,s,l);case e.TILE3D_TYPE.POINT_CLOUD:return(0,i.encodePointCloud3DTile)(d,c,u,s);case e.TILE3D_TYPE.BATCHED_3D_MODEL:return(0,n.encodeBatchedModel3DTile)(d,c,u,s);case e.TILE3D_TYPE.INSTANCED_3D_MODEL:return(0,o.encodeInstancedModel3DTile)(d,c,u,s);default:throw new Error("3D Tiles: unknown tile type")}}
},{"../constants":"f96v","@loaders.gl/loader-utils":"oHIH","./encode-3d-tile-composite":"XIR1","./encode-3d-tile-batched-model":"VXcM","./encode-3d-tile-instanced-model":"tWfQ","./encode-3d-tile-point-cloud":"oa7J"}],"ILYL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./lib/encoders/encode-3d-tile"));function t(e){return e&&e.__esModule?e:{default:e}}var n={name:"3D Tile",extensions:["cmpt","pnts","b3dm","i3dm"],mimeTypes:["application/octet-stream"],encodeSync:r,binary:!0};function r(t,n){return(0,e.default)(t,n)}exports.default=n;
},{"./lib/encoders/encode-3d-tile":"VXbm"}],"tzaM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Tiles3DLoader",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"CesiumIonLoader",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"Tile3DWriter",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"Tile3DFeatureTable",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"Tile3DBatchTable",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"TILE3D_TYPE",{enumerable:!0,get:function(){return u.TILE3D_TYPE}}),Object.defineProperty(exports,"_getIonTilesetMetadata",{enumerable:!0,get:function(){return l.getIonTilesetMetadata}});var e=o(require("./tiles-3d-loader")),t=o(require("./cesium-ion-loader")),r=o(require("./tile-3d-writer")),n=o(require("./lib/classes/tile-3d-feature-table")),i=o(require("./lib/classes/tile-3d-batch-table")),u=require("./lib/constants"),l=require("./lib/ion/ion");function o(e){return e&&e.__esModule?e:{default:e}}
},{"./tiles-3d-loader":"PdXA","./cesium-ion-loader":"OI04","./tile-3d-writer":"ILYL","./lib/classes/tile-3d-feature-table":"nbpZ","./lib/classes/tile-3d-batch-table":"DJYW","./lib/constants":"f96v","./lib/ion/ion":"PWvg"}],"ThfJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t="#define SHADER_NAME arc-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec4 instanceSourceColors;\nattribute vec4 instanceTargetColors;\nattribute vec3 instanceSourcePositions;\nattribute vec3 instanceSourcePositions64Low;\nattribute vec3 instanceTargetPositions;\nattribute vec3 instanceTargetPositions64Low;\nattribute vec3 instancePickingColors;\nattribute float instanceWidths;\nattribute float instanceHeights;\nattribute float instanceTilts;\n\nuniform bool greatCircle;\nuniform float numSegments;\nuniform float opacity;\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\n\nvarying vec4 vColor;\nvarying vec2 uv;\nvarying float isValid;\n\nfloat paraboloid(float distance, float sourceZ, float targetZ, float ratio) {\n\n  float deltaZ = targetZ - sourceZ;\n  float dh = distance * instanceHeights;\n  float unitZ = dh == 0.0 ? 0.0 : deltaZ / dh;\n  float p2 = unitZ * unitZ + 1.0;\n  float dir = step(deltaZ, 0.0);\n  float z0 = mix(sourceZ, targetZ, dir);\n  float r = mix(ratio, 1.0 - ratio, dir);\n  return sqrt(r * (p2 - r)) * dh + z0;\n}\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {\n  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  return dir_screenspace * offset_direction * width / 2.0;\n}\n\nfloat getSegmentRatio(float index) {\n  return smoothstep(0.0, 1.0, index / (numSegments - 1.0));\n}\n\nvec3 interpolateFlat(vec3 source, vec3 target, float segmentRatio) {\n  float distance = length(source.xy - target.xy);\n  float z = paraboloid(distance, source.z, target.z, segmentRatio);\n\n  float tiltAngle = radians(instanceTilts);\n  vec2 tiltDirection = normalize(target.xy - source.xy);\n  vec2 tilt = vec2(-tiltDirection.y, tiltDirection.x) * z * sin(tiltAngle);\n\n  return vec3(\n    mix(source.xy, target.xy, segmentRatio) + tilt,\n    z * cos(tiltAngle)\n  );\n}\nfloat getAngularDist (vec2 source, vec2 target) {\n  vec2 sourceRadians = radians(source);\n  vec2 targetRadians = radians(target);\n  vec2 sin_half_delta = sin((sourceRadians - targetRadians) / 2.0);\n  vec2 shd_sq = sin_half_delta * sin_half_delta;\n\n  float a = shd_sq.y + cos(sourceRadians.y) * cos(targetRadians.y) * shd_sq.x;\n  return 2.0 * asin(sqrt(a));\n}\n\nvec3 interpolateGreatCircle(vec3 source, vec3 target, vec3 source3D, vec3 target3D, float angularDist, float t) {\n  vec2 lngLat;\n  if(abs(angularDist - PI) < 0.001) {\n    lngLat = (1.0 - t) * source.xy + t * target.xy;\n  } else {\n    float a = sin((1.0 - t) * angularDist);\n    float b = sin(t * angularDist);\n    vec3 p = source3D.yxz * a + target3D.yxz * b;\n    lngLat = degrees(vec2(atan(p.y, -p.x), atan(p.z, length(p.xy))));\n  }\n\n  float z = paraboloid(angularDist * EARTH_RADIUS, source.z, target.z, t);\n\n  return vec3(lngLat, z);\n}\n\nvoid main(void) {\n  geometry.worldPosition = instanceSourcePositions;\n  geometry.worldPositionAlt = instanceTargetPositions;\n\n  float segmentIndex = positions.x;\n  float segmentRatio = getSegmentRatio(segmentIndex);\n  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\n  isValid = 1.0;\n\n  uv = vec2(segmentRatio, positions.y);\n  geometry.uv = uv;\n  geometry.pickingColor = instancePickingColors;\n\n  vec4 curr;\n  vec4 next;\n  vec3 source;\n  vec3 target;\n\n  if ((greatCircle || project_uProjectionMode == PROJECTION_MODE_GLOBE) && project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n    source = project_globe_(vec3(instanceSourcePositions.xy, 0.0));\n    target = project_globe_(vec3(instanceTargetPositions.xy, 0.0));\n    float angularDist = getAngularDist(instanceSourcePositions.xy, instanceTargetPositions.xy);\n  \n    float prevSegmentRatio = getSegmentRatio(max(0.0, segmentIndex - 1.0));\n    float nextSegmentRatio = getSegmentRatio(min(numSegments, segmentIndex + 1.0));\n\n    vec3 prevPos = interpolateGreatCircle(instanceSourcePositions, instanceTargetPositions, source, target, angularDist, prevSegmentRatio);\n    vec3 currPos = interpolateGreatCircle(instanceSourcePositions, instanceTargetPositions, source, target, angularDist, segmentRatio);\n    vec3 nextPos = interpolateGreatCircle(instanceSourcePositions, instanceTargetPositions, source, target, angularDist, nextSegmentRatio);\n\n    if (abs(currPos.x - prevPos.x) > 180.0) {\n      indexDir = -1.0;\n      isValid = 0.0;\n    } else if (abs(currPos.x - nextPos.x) > 180.0) {\n      indexDir = 1.0;\n      isValid = 0.0;\n    }\n    nextPos = indexDir < 0.0 ? prevPos : nextPos;\n    nextSegmentRatio = indexDir < 0.0 ? prevSegmentRatio : nextSegmentRatio;\n\n    if (isValid == 0.0) {\n      nextPos.x += nextPos.x > 0.0 ? -360.0 : 360.0;\n      float t = ((currPos.x > 0.0 ? 180.0 : -180.0) - currPos.x) / (nextPos.x - currPos.x);\n      currPos = mix(currPos, nextPos, t);\n      segmentRatio = mix(segmentRatio, nextSegmentRatio, t);\n    }\n\n    vec3 currPos64Low = mix(instanceSourcePositions64Low, instanceTargetPositions64Low, segmentRatio);\n    vec3 nextPos64Low = mix(instanceSourcePositions64Low, instanceTargetPositions64Low, nextSegmentRatio);\n  \n    curr = project_position_to_clipspace(currPos, currPos64Low, vec3(0.0), geometry.position);\n    next = project_position_to_clipspace(nextPos, nextPos64Low, vec3(0.0));\n  \n  } else {\n    source = project_position(instanceSourcePositions, instanceSourcePositions64Low);\n    target = project_position(instanceTargetPositions, instanceTargetPositions64Low);\n\n    float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);\n    vec3 currPos = interpolateFlat(source, target, segmentRatio);\n    vec3 nextPos = interpolateFlat(source, target, nextSegmentRatio);\n    curr = project_common_position_to_clipspace(vec4(currPos, 1.0));\n    next = project_common_position_to_clipspace(vec4(nextPos, 1.0));\n    geometry.position = vec4(currPos, 1.0);\n  }\n  float widthPixels = clamp(\n    project_size_to_pixel(instanceWidths * widthScale),\n    widthMinPixels, widthMaxPixels\n  );\n  vec3 offset = vec3(\n    getExtrusionOffset((next.xy - curr.xy) * indexDir, positions.y, widthPixels),\n    0.0);\n  DECKGL_FILTER_SIZE(offset, geometry);\n  gl_Position = curr + vec4(project_pixel_size_to_clipspace(offset.xy), 0.0, 0.0);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  vec4 color = mix(instanceSourceColors, instanceTargetColors, segmentRatio);\n  vColor = vec4(color.rgb, color.a * opacity);\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n";exports.default=t;
},{}],"I6hY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="#define SHADER_NAME arc-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\nvarying vec2 uv;\nvarying float isValid;\n\nvoid main(void) {\n  if (isValid == 0.0) {\n    discard;\n  }\n\n  gl_FragColor = vColor;\n  geometry.uv = uv;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n";exports.default=n;
},{}],"x0jA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=c(require("@babel/runtime/helpers/esm/classCallCheck")),t=c(require("@babel/runtime/helpers/esm/createClass")),r=c(require("@babel/runtime/helpers/esm/get")),i=c(require("@babel/runtime/helpers/esm/inherits")),s=c(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),a=c(require("@babel/runtime/helpers/esm/getPrototypeOf")),o=require("@deck.gl/core"),n=require("@luma.gl/core"),l=c(require("./arc-layer-vertex.glsl")),u=c(require("./arc-layer-fragment.glsl"));function c(e){return e&&e.__esModule?e:{default:e}}function d(e){var t=p();return function(){var r,i=(0,a.default)(e);if(t){var o=(0,a.default)(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return(0,s.default)(this,r)}}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var f=[0,0,0,255],h={getSourcePosition:{type:"accessor",value:function(e){return e.sourcePosition}},getTargetPosition:{type:"accessor",value:function(e){return e.targetPosition}},getSourceColor:{type:"accessor",value:f},getTargetColor:{type:"accessor",value:f},getWidth:{type:"accessor",value:1},getHeight:{type:"accessor",value:1},getTilt:{type:"accessor",value:0},greatCircle:!1,widthUnits:"pixels",widthScale:{type:"number",value:1,min:0},widthMinPixels:{type:"number",value:0,min:0},widthMaxPixels:{type:"number",value:Number.MAX_SAFE_INTEGER,min:0}},g=function(s){(0,i.default)(p,s);var c=d(p);function p(){return(0,e.default)(this,p),c.apply(this,arguments)}return(0,t.default)(p,[{key:"getShaders",value:function(){return(0,r.default)((0,a.default)(p.prototype),"getShaders",this).call(this,{vs:l.default,fs:u.default,modules:[o.project32,o.picking]})}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instanceSourcePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getSourcePosition"},instanceTargetPositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getTargetPosition"},instanceSourceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getSourceColor",defaultValue:f},instanceTargetColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getTargetColor",defaultValue:f},instanceWidths:{size:1,transition:!0,accessor:"getWidth",defaultValue:1},instanceHeights:{size:1,transition:!0,accessor:"getHeight",defaultValue:1},instanceTilts:{size:1,transition:!0,accessor:"getTilt",defaultValue:0}})}},{key:"updateState",value:function(e){var t=e.props,i=e.oldProps,s=e.changeFlags;if((0,r.default)((0,a.default)(p.prototype),"updateState",this).call(this,{props:t,oldProps:i,changeFlags:s}),s.extensionsChanged){var o=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(o)}),this.getAttributeManager().invalidateAll()}}},{key:"draw",value:function(e){var t=e.uniforms,r=this.context.viewport,i=this.props,s=i.widthUnits,a=i.widthScale,o=i.widthMinPixels,n=i.widthMaxPixels,l=i.greatCircle,u="pixels"===s?r.metersPerPixel:1;this.state.model.setUniforms(t).setUniforms({greatCircle:l,widthScale:a*u,widthMinPixels:o,widthMaxPixels:n}).draw()}},{key:"_getModel",value:function(e){for(var t=[],r=0;r<50;r++)t=t.concat([r,1,0,r,-1,0]);var i=new n.Model(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new n.Geometry({drawMode:5,attributes:{positions:new Float32Array(t)}}),isInstanced:!0}));return i.setUniforms({numSegments:50}),i}}]),p}(o.Layer);exports.default=g,g.layerName="ArcLayer",g.defaultProps=h;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/get":"KGqu","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@deck.gl/core":"vvxL","@luma.gl/core":"iuAK","./arc-layer-vertex.glsl":"ThfJ","./arc-layer-fragment.glsl":"I6hY"}],"qfl3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var r=require("math.gl"),t=new Uint16Array([0,2,1,0,3,2]),e=new Float32Array([0,1,0,0,1,0,1,1]);function a(r,t){if(!t)return n(r);for(var e=Math.max(Math.abs(r[0][0]-r[3][0]),Math.abs(r[1][0]-r[2][0])),a=Math.max(Math.abs(r[1][1]-r[0][1]),Math.abs(r[2][1]-r[3][1])),i=Math.ceil(e/t)+1,s=Math.ceil(a/t)+1,l=(i-1)*(s-1)*6,u=new Uint32Array(l),h=new Float32Array(i*s*2),c=new Float64Array(i*s*3),f=0,M=0,p=0;p<i;p++)for(var v=p/(i-1),x=0;x<s;x++){var d=x/(s-1),y=o(r,v,d);c[3*f+0]=y[0],c[3*f+1]=y[1],c[3*f+2]=y[2]||0,h[2*f+0]=v,h[2*f+1]=1-d,p>0&&x>0&&(u[M++]=f-s,u[M++]=f-s-1,u[M++]=f-1,u[M++]=f-s,u[M++]=f-1,u[M++]=f),f++}return{vertexCount:l,positions:c,indices:u,texCoords:h}}function n(r){for(var a=new Float64Array(12),n=0;n<r.length;n++)a[3*n+0]=r[n][0],a[3*n+1]=r[n][1],a[3*n+2]=r[n][2]||0;return{vertexCount:6,positions:a,indices:t,texCoords:e}}function o(t,e,a){return(0,r.lerp)((0,r.lerp)(t[0],t[1],a),(0,r.lerp)(t[3],t[2],a),e)}
},{"math.gl":"xAaq"}],"DCWY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var o="\n#define SHADER_NAME bitmap-layer-vertex-shader\n\nattribute vec2 texCoords;\nattribute vec3 positions;\nattribute vec3 positions64Low;\n\nvarying vec2 vTexCoord;\n\nconst vec3 pickingColor = vec3(1.0, 0.0, 0.0);\n\nvoid main(void) {\n  geometry.worldPosition = positions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = pickingColor;\n\n  gl_Position = project_position_to_clipspace(positions, positions64Low, vec3(0.0), geometry.position);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  vTexCoord = texCoords;\n\n  vec4 color = vec4(0.0);\n  DECKGL_FILTER_COLOR(color, geometry);\n}\n";exports.default=o;
},{}],"mZ2d":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var o="\n#define SHADER_NAME bitmap-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D bitmapTexture;\n\nvarying vec2 vTexCoord;\n\nuniform float desaturate;\nuniform vec4 transparentColor;\nuniform vec3 tintColor;\nuniform float opacity;\n\n// apply desaturation\nvec3 color_desaturate(vec3 color) {\n  float luminance = (color.r + color.g + color.b) * 0.333333333;\n  return mix(color, vec3(luminance), desaturate);\n}\n\n// apply tint\nvec3 color_tint(vec3 color) {\n  return color * tintColor;\n}\n\n// blend with background color\nvec4 apply_opacity(vec3 color, float alpha) {\n  return mix(transparentColor, vec4(color, 1.0), alpha);\n}\n\nvoid main(void) {\n  vec4 bitmapColor = texture2D(bitmapTexture, vTexCoord);\n\n  gl_FragColor = apply_opacity(color_tint(color_desaturate(bitmapColor.rgb)), bitmapColor.a * opacity);\n\n  geometry.uv = vTexCoord;\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n";exports.default=o;
},{}],"hMcC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,t=h(require("@babel/runtime/helpers/esm/classCallCheck")),r=h(require("@babel/runtime/helpers/esm/createClass")),a=h(require("@babel/runtime/helpers/esm/get")),i=h(require("@babel/runtime/helpers/esm/inherits")),s=h(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),n=h(require("@babel/runtime/helpers/esm/getPrototypeOf")),u=h(require("@babel/runtime/helpers/esm/defineProperty")),o=require("@deck.gl/core"),l=require("@luma.gl/core"),d=h(require("./create-mesh")),p=h(require("./bitmap-layer-vertex")),c=h(require("./bitmap-layer-fragment"));function h(e){return e&&e.__esModule?e:{default:e}}function m(e){var t=f();return function(){var r,a=(0,n.default)(e);if(t){var i=(0,n.default)(this).constructor;r=Reflect.construct(a,arguments,i)}else r=a.apply(this,arguments);return(0,s.default)(this,r)}}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var v=(e={},(0,u.default)(e,10241,9987),(0,u.default)(e,10240,9729),(0,u.default)(e,10242,33071),(0,u.default)(e,10243,33071),e),b={image:{type:"object",value:null,async:!0},bounds:{type:"array",value:[1,0,0,1],compare:!0},desaturate:{type:"number",min:0,max:1,value:0},transparentColor:{type:"color",value:[0,0,0,0]},tintColor:{type:"color",value:[255,255,255]}},g=function(e){(0,i.default)(u,e);var s=m(u);function u(){return(0,t.default)(this,u),s.apply(this,arguments)}return(0,r.default)(u,[{key:"getShaders",value:function(){return(0,a.default)((0,n.default)(u.prototype),"getShaders",this).call(this,{vs:p.default,fs:c.default,modules:[o.project32,o.picking]})}},{key:"initializeState",value:function(){var e=this,t=this.getAttributeManager();t.remove(["instancePickingColors"]);t.add({indices:{size:1,isIndexed:!0,update:function(t){return t.value=e.state.mesh.indices},noAlloc:!0},positions:{size:3,type:5130,fp64:this.use64bitPositions(),update:function(t){return t.value=e.state.mesh.positions},noAlloc:!0},texCoords:{size:2,update:function(t){return t.value=e.state.mesh.texCoords},noAlloc:!0}})}},{key:"updateState",value:function(e){var t=e.props,r=e.oldProps;if(e.changeFlags.extensionsChanged){var a=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(a)}),this.getAttributeManager().invalidateAll()}t.image!==r.image&&this.loadTexture(t.image);var i=this.getAttributeManager();if(t.bounds!==r.bounds){var s=this.state.mesh,n=this._createMesh();for(var u in this.state.model.setVertexCount(n.vertexCount),n)s&&s[u]!==n[u]&&i.invalidate(u);this.setState({mesh:n})}}},{key:"finalizeState",value:function(){(0,a.default)((0,n.default)(u.prototype),"finalizeState",this).call(this),this.state.bitmapTexture&&this.state.bitmapTexture.delete()}},{key:"_createMesh",value:function(){var e=this.props.bounds,t=e;return Number.isFinite(e[0])&&(t=[[e[0],e[1]],[e[0],e[3]],[e[2],e[3]],[e[2],e[1]]]),(0,d.default)(t,this.context.viewport.resolution)}},{key:"_getModel",value:function(e){return e?new l.Model(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new l.Geometry({drawMode:4,vertexCount:6}),isInstanced:!1})):null}},{key:"draw",value:function(e){var t=e.uniforms,r=this.state,a=r.bitmapTexture,i=r.model,s=this.props,n=s.image,u=s.desaturate,o=s.transparentColor,l=s.tintColor;a&&n instanceof HTMLVideoElement&&n.readyState>HTMLVideoElement.HAVE_METADATA&&(a.width!==n.videoWidth||a.height!==n.videoHeight?(a.resize({width:n.videoWidth,height:n.videoHeight,mipmaps:!0}),a.setSubImageData({data:n,parameters:v})):a.setSubImageData({data:n}),a.generateMipmap());a&&i&&i.setUniforms(Object.assign({},t,{bitmapTexture:a,desaturate:u,transparentColor:o.map(function(e){return e/255}),tintColor:l.slice(0,3).map(function(e){return e/255})})).draw()}},{key:"loadTexture",value:function(e){var t=this.context.gl;this.state.bitmapTexture&&this.state.bitmapTexture.delete(),e instanceof l.Texture2D?this.setState({bitmapTexture:e}):e instanceof HTMLVideoElement?this.setState({bitmapTexture:new l.Texture2D(t,{width:1,height:1,parameters:v,mipmaps:!1})}):e&&this.setState({bitmapTexture:new l.Texture2D(t,{data:e,parameters:v})})}}]),u}(o.Layer);exports.default=g,g.layerName="BitmapLayer",g.defaultProps=b;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/get":"KGqu","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/defineProperty":"iDM3","@deck.gl/core":"vvxL","@luma.gl/core":"iuAK","./create-mesh":"qfl3","./bitmap-layer-vertex":"DCWY","./bitmap-layer-fragment":"mZ2d"}],"vmNi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="#define SHADER_NAME icon-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec4 instanceIconFrames;\nattribute float instanceColorModes;\nattribute vec2 instanceOffsets;\nattribute vec2 instancePixelOffset;\n\nuniform float sizeScale;\nuniform vec2 iconsTextureDim;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform bool billboard;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = angle * PI / 180.0;\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n\n  vec2 iconSize = instanceIconFrames.zw;\n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale), \n    sizeMinPixels, sizeMaxPixels\n  );\n  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;\n  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;\n  pixelOffset += instancePixelOffset;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); \n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  vTextureCoords = mix(\n    instanceIconFrames.xy,\n    instanceIconFrames.xy + iconSize,\n    (positions.xy + 1.0) / 2.0\n  ) / iconsTextureDim;\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n\n  vColorMode = instanceColorModes;\n}\n";exports.default=n;
},{}],"bSNg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var o="#define SHADER_NAME icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float alphaCutoff;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec4 texColor = texture2D(iconsTexture, vTextureCoords);\n  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);\n  float a = texColor.a * opacity * vColor.a;\n\n  if (a < alphaCutoff) {\n    discard;\n  }\n\n  gl_FragColor = vec4(color, a);\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n";exports.default=o;
},{}],"r4Lr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.buildMapping=w,exports.getDiffIcons=b,exports.default=void 0;var t,e=u(require("@babel/runtime/helpers/esm/classCallCheck")),n=u(require("@babel/runtime/helpers/esm/createClass")),i=u(require("@babel/runtime/helpers/esm/defineProperty")),r=require("@luma.gl/core"),a=require("@loaders.gl/images"),s=require("@loaders.gl/core"),o=require("@deck.gl/core");function u(t){return t&&t.__esModule?t:{default:t}}function h(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=l(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){o=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw a}}}}function l(t,e){if(t){if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,e):void 0}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var f=1024,d=4,g=function(){},p=(t={},(0,i.default)(t,10241,9987),(0,i.default)(t,10240,9729),(0,i.default)(t,10242,33071),(0,i.default)(t,10243,33071),t);function v(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function _(t,e,n,i){return n===e.width&&i===e.height?e:(t.canvas.height=i,t.canvas.width=n,t.clearRect(0,0,t.canvas.width,t.canvas.height),t.drawImage(e,0,0,e.width,e.height,0,0,n,i),t.canvas)}function x(t){return t&&(t.id||t.url)}function m(t,e,n,i){var a=e.width,s=e.height,o=(0,r.cloneTextureFrom)(e,{width:n,height:i});return(0,r.copyToTexture)(e,o,{targetY:0,width:a,height:s}),e.delete(),o}function y(t,e,n){for(var i=0;i<e.length;i++){var r=e[i],a=r.icon,s=r.xOffset;t[x(a)]=Object.assign({},a,{x:s,y:n})}}function w(t){for(var e=t.icons,n=t.buffer,i=t.mapping,r=void 0===i?{}:i,a=t.xOffset,s=void 0===a?0:a,o=t.yOffset,u=void 0===o?0:o,h=t.rowHeight,l=void 0===h?0:h,c=t.canvasWidth,f=[],d=0;d<e.length;d++){var g=e[d];if(!r[x(g)]){var p=g.height,_=g.width;s+_+n>c&&(y(r,f,u),s=0,u=l+u+n,l=0,f=[]),f.push({icon:g,xOffset:s}),s=s+_+n,l=Math.max(l,p)}}return f.length>0&&y(r,f,u),{mapping:r,rowHeight:l,xOffset:s,yOffset:u,canvasWidth:c,canvasHeight:v(l+u+n)}}function b(t,e,n){if(!t||!e)return null;n=n||{};var i,r={},a=(0,o.createIterable)(t),s=a.iterable,u=a.objectInfo,l=h(s);try{for(l.s();!(i=l.n()).done;){var c=i.value;u.index++;var f=e(c,u),d=x(f);if(!f)throw new Error("Icon is missing.");if(!f.url)throw new Error("Icon url is missing.");r[d]||n[d]&&f.url===n[d].url||(r[d]=f)}}catch(g){l.e(g)}finally{l.f()}return r}var O=function(){function t(n,i){var r=i.onUpdate,a=void 0===r?g:r;(0,e.default)(this,t),this.gl=n,this.onUpdate=a,this._loadOptions=null,this._getIcon=null,this._texture=null,this._externalTexture=null,this._mapping={},this._pendingCount=0,this._autoPacking=!1,this._xOffset=0,this._yOffset=0,this._rowHeight=0,this._buffer=d,this._canvasWidth=f,this._canvasHeight=0,this._canvas=null}return(0,n.default)(t,[{key:"finalize",value:function(){this._texture&&this._texture.delete()}},{key:"getTexture",value:function(){return this._texture||this._externalTexture}},{key:"getIconMapping",value:function(t){var e=this._autoPacking?x(t):t;return this._mapping[e]||{}}},{key:"setProps",value:function(t){var e=t.loadOptions,n=t.autoPacking,i=t.iconAtlas,r=t.iconMapping,a=t.data,s=t.getIcon;e&&(this._loadOptions=e),void 0!==n&&(this._autoPacking=n),s&&(this._getIcon=s),r&&(this._mapping=r),i&&this._updateIconAtlas(i),this._autoPacking&&(a||s)&&"undefined"!=typeof document&&(this._canvas=this._canvas||document.createElement("canvas"),this._updateAutoPacking(a))}},{key:"_updateIconAtlas",value:function(t){this._texture&&(this._texture.delete(),this._texture=null),t instanceof r.Texture2D?(t.setParameters(p),this._externalTexture=t,this.onUpdate()):t&&(this._texture=new r.Texture2D(this.gl,{data:t,parameters:p}),this.onUpdate())}},{key:"_updateAutoPacking",value:function(t){var e=Object.values(b(t,this._getIcon,this._mapping)||{});if(e.length>0){var n=w({icons:e,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset}),i=n.mapping,a=n.xOffset,s=n.yOffset,o=n.rowHeight,u=n.canvasHeight;this._rowHeight=o,this._mapping=i,this._xOffset=a,this._yOffset=s,this._canvasHeight=u,this._texture||(this._texture=new r.Texture2D(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:p})),this._texture.height!==this._canvasHeight&&(this._texture=m(this.gl,this._texture,this._canvasWidth,this._canvasHeight)),this.onUpdate(),this._loadIcons(e)}}},{key:"_loadIcons",value:function(t){var e,n=this,i=this._canvas.getContext("2d"),r=h(t);try{var u=function(){var t=e.value;n._pendingCount++,(0,s.load)(t.url,a.ImageLoader,n._loadOptions).then(function(e){var r=x(t),a=n._mapping[r],s=a.x,o=a.y,u=a.width,h=a.height,l=_(i,e,u,h);n._texture.setSubImageData({data:l,x:s,y:o,width:u,height:h}),n._texture.generateMipmap(),n.onUpdate()}).catch(function(t){o.log.error(t)()}).finally(function(){n._pendingCount--})};for(r.s();!(e=r.n()).done;)u()}catch(l){r.e(l)}finally{r.f()}}},{key:"isLoaded",get:function(){return 0===this._pendingCount}}]),t}();exports.default=O;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/defineProperty":"iDM3","@luma.gl/core":"iuAK","@loaders.gl/images":"DNDh","@loaders.gl/core":"ikKD","@deck.gl/core":"vvxL"}],"NHB3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=p(require("@babel/runtime/helpers/esm/classCallCheck")),t=p(require("@babel/runtime/helpers/esm/createClass")),a=p(require("@babel/runtime/helpers/esm/get")),n=p(require("@babel/runtime/helpers/esm/inherits")),s=p(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),i=p(require("@babel/runtime/helpers/esm/getPrototypeOf")),r=require("@deck.gl/core"),o=require("@luma.gl/core"),l=p(require("./icon-layer-vertex.glsl")),c=p(require("./icon-layer-fragment.glsl")),u=p(require("./icon-manager"));function p(e){return e&&e.__esModule?e:{default:e}}function d(e){var t=g();return function(){var a,n=(0,i.default)(e);if(t){var r=(0,i.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var f=[0,0,0,255],h={iconAtlas:{type:"object",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:function(e){return e.position}},getIcon:{type:"accessor",value:function(e){return e.icon}},getColor:{type:"accessor",value:f},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]}},y=function(s){(0,n.default)(g,s);var p=d(g);function g(){return(0,e.default)(this,g),p.apply(this,arguments)}return(0,t.default)(g,[{key:"getShaders",value:function(){return(0,a.default)((0,i.default)(g.prototype),"getShaders",this).call(this,{vs:l.default,fs:c.default,modules:[r.project32,r.picking]})}},{key:"initializeState",value:function(){var e=this;this.state={iconManager:new u.default(this.context.gl,{onUpdate:function(){return e._onUpdate()}})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:f},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}},{key:"updateState",value:function(e){var t=e.oldProps,n=e.props,s=e.changeFlags;(0,a.default)((0,i.default)(g.prototype),"updateState",this).call(this,{props:n,oldProps:t,changeFlags:s});var r=this.getAttributeManager(),o=n.iconAtlas,l=n.iconMapping,c=n.data,u=n.getIcon,p=this.state.iconManager;p.setProps({loadOptions:n.loadOptions});var d=!1;if(o||this.internalState.isAsyncPropLoading("iconAtlas")?(t.iconAtlas!==n.iconAtlas&&p.setProps({iconAtlas:o,autoPacking:!1}),t.iconMapping!==n.iconMapping&&(p.setProps({iconMapping:l}),d=!0)):p.setProps({autoPacking:!0}),(s.dataChanged||s.updateTriggersChanged&&(s.updateTriggersChanged.all||s.updateTriggersChanged.getIcon))&&p.setProps({data:c,getIcon:u}),d&&(r.invalidate("instanceOffsets"),r.invalidate("instanceIconFrames"),r.invalidate("instanceColorModes")),s.extensionsChanged){var f=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(f)}),r.invalidateAll()}}},{key:"finalizeState",value:function(){(0,a.default)((0,i.default)(g.prototype),"finalizeState",this).call(this),this.state.iconManager.finalize()}},{key:"draw",value:function(e){var t=e.uniforms,a=this.props,n=a.sizeScale,s=a.sizeMinPixels,i=a.sizeMaxPixels,r=a.sizeUnits,o=a.billboard,l=a.alphaCutoff,c=this.state.iconManager,u=this.context.viewport,p=c.getTexture();p&&p.loaded&&this.state.model.setUniforms(Object.assign({},t,{iconsTexture:p,iconsTextureDim:[p.width,p.height],sizeScale:n*("pixels"===r?u.metersPerPixel:1),sizeMinPixels:s,sizeMaxPixels:i,billboard:o,alphaCutoff:l})).draw()}},{key:"_getModel",value:function(e){return new o.Model(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new o.Geometry({drawMode:6,attributes:{positions:{size:2,value:new Float32Array([-1,-1,-1,1,1,1,1,-1])}}}),isInstanced:!0}))}},{key:"_onUpdate",value:function(){this.setNeedsRedraw()}},{key:"getInstanceOffset",value:function(e){var t=this.state.iconManager.getIconMapping(e);return[t.width/2-t.anchorX||0,t.height/2-t.anchorY||0]}},{key:"getInstanceColorMode",value:function(e){return this.state.iconManager.getIconMapping(e).mask?1:0}},{key:"getInstanceIconFrame",value:function(e){var t=this.state.iconManager.getIconMapping(e);return[t.x||0,t.y||0,t.width||0,t.height||0]}},{key:"isLoaded",get:function(){return(0,a.default)((0,i.default)(g.prototype),"isLoaded",this)&&this.state.iconManager.isLoaded}}]),g}(r.Layer);exports.default=y,y.layerName="IconLayer",y.defaultProps=h;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/get":"KGqu","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@deck.gl/core":"vvxL","@luma.gl/core":"iuAK","./icon-layer-vertex.glsl":"vmNi","./icon-layer-fragment.glsl":"bSNg","./icon-manager":"r4Lr"}],"pFFP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="#define SHADER_NAME line-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 instanceSourcePositions;\nattribute vec3 instanceTargetPositions;\nattribute vec3 instanceSourcePositions64Low;\nattribute vec3 instanceTargetPositions64Low;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute float instanceWidths;\n\nuniform float opacity;\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\n\nvarying vec4 vColor;\nvarying vec2 uv;\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {\n  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  return dir_screenspace * offset_direction * width / 2.0;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instanceSourcePositions;\n  geometry.worldPositionAlt = instanceTargetPositions;\n  vec4 source_commonspace;\n  vec4 target_commonspace;\n  vec4 source = project_position_to_clipspace(instanceSourcePositions, instanceSourcePositions64Low, vec3(0.), source_commonspace);\n  vec4 target = project_position_to_clipspace(instanceTargetPositions, instanceTargetPositions64Low, vec3(0.), target_commonspace);\n  float widthPixels = clamp(\n    project_size_to_pixel(instanceWidths * widthScale),\n    widthMinPixels, widthMaxPixels\n  );\n  float segmentIndex = positions.x;\n  vec4 p = mix(source, target, segmentIndex);\n  geometry.position = mix(source_commonspace, target_commonspace, segmentIndex);\n  uv = positions.xy;\n  geometry.uv = uv;\n  geometry.pickingColor = instancePickingColors;\n  vec3 offset = vec3(\n    getExtrusionOffset(target.xy - source.xy, positions.y, widthPixels),\n    0.0);\n  DECKGL_FILTER_SIZE(offset, geometry);\n  gl_Position = p + vec4(project_pixel_size_to_clipspace(offset.xy), 0.0, 0.0);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n";exports.default=e;
},{}],"hY8X":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="#define SHADER_NAME line-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  gl_FragColor = vColor;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n";exports.default=e;
},{}],"RubV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=c(require("@babel/runtime/helpers/esm/classCallCheck")),t=c(require("@babel/runtime/helpers/esm/createClass")),i=c(require("@babel/runtime/helpers/esm/get")),r=c(require("@babel/runtime/helpers/esm/inherits")),s=c(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),a=c(require("@babel/runtime/helpers/esm/getPrototypeOf")),n=require("@deck.gl/core"),o=require("@luma.gl/core"),l=c(require("./line-layer-vertex.glsl")),u=c(require("./line-layer-fragment.glsl"));function c(e){return e&&e.__esModule?e:{default:e}}function d(e){var t=p();return function(){var i,r=(0,a.default)(e);if(t){var n=(0,a.default)(this).constructor;i=Reflect.construct(r,arguments,n)}else i=r.apply(this,arguments);return(0,s.default)(this,i)}}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var h=[0,0,0,255],f={getSourcePosition:{type:"accessor",value:function(e){return e.sourcePosition}},getTargetPosition:{type:"accessor",value:function(e){return e.targetPosition}},getColor:{type:"accessor",value:h},getWidth:{type:"accessor",value:1},widthUnits:"pixels",widthScale:{type:"number",value:1,min:0},widthMinPixels:{type:"number",value:0,min:0},widthMaxPixels:{type:"number",value:Number.MAX_SAFE_INTEGER,min:0}},g=function(s){(0,r.default)(p,s);var c=d(p);function p(){return(0,e.default)(this,p),c.apply(this,arguments)}return(0,t.default)(p,[{key:"getShaders",value:function(){return(0,i.default)((0,a.default)(p.prototype),"getShaders",this).call(this,{vs:l.default,fs:u.default,modules:[n.project32,n.picking]})}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instanceSourcePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getSourcePosition"},instanceTargetPositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getTargetPosition"},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceWidths:{size:1,transition:!0,accessor:"getWidth",defaultValue:1}})}},{key:"updateState",value:function(e){var t=e.props,r=e.oldProps,s=e.changeFlags;if((0,i.default)((0,a.default)(p.prototype),"updateState",this).call(this,{props:t,oldProps:r,changeFlags:s}),s.extensionsChanged){var n=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(n)}),this.getAttributeManager().invalidateAll()}}},{key:"draw",value:function(e){var t=e.uniforms,i=this.context.viewport,r=this.props,s=r.widthUnits,a=r.widthScale,n=r.widthMinPixels,o=r.widthMaxPixels,l="pixels"===s?i.metersPerPixel:1;this.state.model.setUniforms(Object.assign({},t,{widthScale:a*l,widthMinPixels:n,widthMaxPixels:o})).draw()}},{key:"_getModel",value:function(e){return new o.Model(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new o.Geometry({drawMode:5,attributes:{positions:new Float32Array([0,-1,0,0,1,0,1,-1,0,1,1,0])}}),isInstanced:!0}))}}]),p}(n.Layer);exports.default=g,g.layerName="LineLayer",g.defaultProps=f;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/get":"KGqu","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@deck.gl/core":"vvxL","@luma.gl/core":"iuAK","./line-layer-vertex.glsl":"pFFP","./line-layer-fragment.glsl":"hY8X"}],"PBJe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var o="#define SHADER_NAME point-cloud-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 instanceNormals;\nattribute vec4 instanceColors;\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float radiusPixels;\n\nvarying vec4 vColor;\nvarying vec2 unitPosition;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.normal = project_normal(instanceNormals);\n  unitPosition = positions.xy;\n  geometry.uv = unitPosition;\n  geometry.pickingColor = instancePickingColors;\n  vec3 offset = vec3(positions.xy * radiusPixels, 0.0);\n  DECKGL_FILTER_SIZE(offset, geometry);\n\n  gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.), geometry.position);\n  gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  vec3 lightColor = lighting_getLightColor(instanceColors.rgb, project_uCameraPosition, geometry.position.xyz, geometry.normal);\n  vColor = vec4(lightColor, instanceColors.a * opacity);\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n";exports.default=o;
},{}],"v8Zu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="#define SHADER_NAME point-cloud-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\nvarying vec2 unitPosition;\n\nvoid main(void) {\n  geometry.uv = unitPosition;\n\n  float distToCenter = length(unitPosition);\n\n  if (distToCenter > 1.0) {\n    discard;\n  }\n\n  gl_FragColor = vColor;\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n";exports.default=n;
},{}],"cUWd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=c(require("@babel/runtime/helpers/esm/classCallCheck")),t=c(require("@babel/runtime/helpers/esm/createClass")),r=c(require("@babel/runtime/helpers/esm/get")),s=c(require("@babel/runtime/helpers/esm/inherits")),i=c(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),a=c(require("@babel/runtime/helpers/esm/getPrototypeOf")),n=require("@deck.gl/core"),o=require("@luma.gl/core"),l=c(require("./point-cloud-layer-vertex.glsl")),u=c(require("./point-cloud-layer-fragment.glsl"));function c(e){return e&&e.__esModule?e:{default:e}}function d(e){var t=p();return function(){var r,s=(0,a.default)(e);if(t){var n=(0,a.default)(this).constructor;r=Reflect.construct(s,arguments,n)}else r=s.apply(this,arguments);return(0,i.default)(this,r)}}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var f=[0,0,0,255],h=[0,0,1],g={sizeUnits:"pixels",pointSize:{type:"number",min:0,value:10},getPosition:{type:"accessor",value:function(e){return e.position}},getNormal:{type:"accessor",value:h},getColor:{type:"accessor",value:f},material:!0,radiusPixels:{deprecatedFor:"pointSize"}};function m(e){var t=e.header,r=e.attributes;t&&r&&(e.length=t.vertexCount,r.POSITION&&(r.instancePositions=r.POSITION),r.NORMAL&&(r.instanceNormals=r.NORMAL),r.COLOR_0&&(r.instanceColors=r.COLOR_0))}var y=function(i){(0,s.default)(p,i);var c=d(p);function p(){return(0,e.default)(this,p),c.apply(this,arguments)}return(0,t.default)(p,[{key:"getShaders",value:function(e){return(0,r.default)((0,a.default)(p.prototype),"getShaders",this).call(this,{vs:l.default,fs:u.default,modules:[n.project32,n.gouraudLighting,n.picking]})}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceNormals:{size:3,transition:!0,accessor:"getNormal",defaultValue:h},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:f}})}},{key:"updateState",value:function(e){var t=e.props,s=e.oldProps,i=e.changeFlags;if((0,r.default)((0,a.default)(p.prototype),"updateState",this).call(this,{props:t,oldProps:s,changeFlags:i}),i.extensionsChanged){var n=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(n)}),this.getAttributeManager().invalidateAll()}i.dataChanged&&m(t.data)}},{key:"draw",value:function(e){var t=e.uniforms,r=this.context.viewport,s=this.props,i=s.pointSize,a="meters"===s.sizeUnits?1/r.metersPerPixel:1;this.state.model.setUniforms(Object.assign({},t,{radiusPixels:i*a})).draw()}},{key:"_getModel",value:function(e){for(var t=[],r=0;r<3;r++){var s=r/3*Math.PI*2;t.push(2*Math.cos(s),2*Math.sin(s),0)}return new o.Model(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new o.Geometry({drawMode:4,attributes:{positions:new Float32Array(t)}}),isInstanced:!0}))}}]),p}(n.Layer);exports.default=y,y.layerName="PointCloudLayer",y.defaultProps=g;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/get":"KGqu","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@deck.gl/core":"vvxL","@luma.gl/core":"iuAK","./point-cloud-layer-vertex.glsl":"PBJe","./point-cloud-layer-fragment.glsl":"v8Zu"}],"cDzh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var i="#define SHADER_NAME scatterplot-layer-vertex-shader\n\nattribute vec3 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute float instanceRadius;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float radiusScale;\nuniform float radiusMinPixels;\nuniform float radiusMaxPixels;\nuniform float lineWidthScale;\nuniform float lineWidthMinPixels;\nuniform float lineWidthMaxPixels;\nuniform float stroked;\nuniform bool filled;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\nvarying float outerRadiusPixels;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  outerRadiusPixels = clamp(\n    project_size_to_pixel(radiusScale * instanceRadius),\n    radiusMinPixels, radiusMaxPixels\n  );\n  float lineWidthPixels = clamp(\n    project_size_to_pixel(lineWidthScale * instanceLineWidths),\n    lineWidthMinPixels, lineWidthMaxPixels\n  );\n  outerRadiusPixels += stroked * lineWidthPixels / 2.0;\n  unitPosition = positions.xy;\n  geometry.uv = unitPosition;\n  geometry.pickingColor = instancePickingColors;\n\n  innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;\n  \n  vec3 offset = positions * project_pixel_size(outerRadiusPixels);\n  DECKGL_FILTER_SIZE(offset, geometry);\n  gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\n  DECKGL_FILTER_COLOR(vFillColor, geometry);\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\n  DECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n";exports.default=i;
},{}],"YtWs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="#define SHADER_NAME scatterplot-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool filled;\nuniform float stroked;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\nvarying float outerRadiusPixels;\n\nvoid main(void) {\n  geometry.uv = unitPosition;\n\n  float distToCenter = length(unitPosition) * outerRadiusPixels;\n  float inCircle = smoothedge(distToCenter, outerRadiusPixels);\n\n  if (inCircle == 0.0) {\n    discard;\n  }\n\n  if (stroked > 0.5) {\n    float isLine = smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter);\n    if (filled) {\n      gl_FragColor = mix(vFillColor, vLineColor, isLine);\n    } else {\n      if (isLine == 0.0) {\n        discard;\n      }\n      gl_FragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);\n    }\n  } else if (filled) {\n    gl_FragColor = vFillColor;\n  } else {\n    discard;\n  }\n\n  gl_FragColor.a *= inCircle;\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n";exports.default=n;
},{}],"s9mM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=d(require("@babel/runtime/helpers/esm/classCallCheck")),t=d(require("@babel/runtime/helpers/esm/createClass")),i=d(require("@babel/runtime/helpers/esm/get")),r=d(require("@babel/runtime/helpers/esm/inherits")),s=d(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),l=d(require("@babel/runtime/helpers/esm/getPrototypeOf")),a=require("@deck.gl/core"),n=require("@luma.gl/core"),o=d(require("./scatterplot-layer-vertex.glsl")),u=d(require("./scatterplot-layer-fragment.glsl"));function d(e){return e&&e.__esModule?e:{default:e}}function c(e){var t=p();return function(){var i,r=(0,l.default)(e);if(t){var a=(0,l.default)(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return(0,s.default)(this,i)}}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var f=[0,0,0,255],h={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,getPosition:{type:"accessor",value:function(e){return e.position}},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:f},getLineColor:{type:"accessor",value:f},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}},m=function(s){(0,r.default)(p,s);var d=c(p);function p(){return(0,e.default)(this,p),d.apply(this,arguments)}return(0,t.default)(p,[{key:"getShaders",value:function(e){return(0,i.default)((0,l.default)(p.prototype),"getShaders",this).call(this,{vs:o.default,fs:u.default,modules:[a.project32,a.picking]})}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}},{key:"updateState",value:function(e){var t=e.props,r=e.oldProps,s=e.changeFlags;if((0,i.default)((0,l.default)(p.prototype),"updateState",this).call(this,{props:t,oldProps:r,changeFlags:s}),s.extensionsChanged){var a=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(a)}),this.getAttributeManager().invalidateAll()}}},{key:"draw",value:function(e){var t=e.uniforms,i=this.context.viewport,r=this.props,s=r.radiusUnits,l=r.radiusScale,a=r.radiusMinPixels,n=r.radiusMaxPixels,o=r.stroked,u=r.filled,d=r.lineWidthUnits,c=r.lineWidthScale,p=r.lineWidthMinPixels,f=r.lineWidthMaxPixels,h="pixels"===s?i.metersPerPixel:1,m="pixels"===d?i.metersPerPixel:1;this.state.model.setUniforms(t).setUniforms({stroked:o?1:0,filled:u,radiusScale:l*h,radiusMinPixels:a,radiusMaxPixels:n,lineWidthScale:c*m,lineWidthMinPixels:p,lineWidthMaxPixels:f}).draw()}},{key:"_getModel",value:function(e){return new n.Model(e,Object.assign(this.getShaders(),{id:this.props.id,geometry:new n.Geometry({drawMode:6,vertexCount:4,attributes:{positions:{size:3,value:new Float32Array([-1,-1,0,1,-1,0,1,1,0,-1,1,0])}}}),isInstanced:!0}))}}]),p}(a.Layer);exports.default=m,m.layerName="ScatterplotLayer",m.defaultProps=h;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/get":"KGqu","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@deck.gl/core":"vvxL","@luma.gl/core":"iuAK","./scatterplot-layer-vertex.glsl":"cDzh","./scatterplot-layer-fragment.glsl":"YtWs"}],"XYjb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("@babel/runtime/helpers/esm/defineProperty")),r=a(require("@babel/runtime/helpers/esm/classCallCheck")),t=a(require("@babel/runtime/helpers/esm/inherits")),n=a(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),i=a(require("@babel/runtime/helpers/esm/getPrototypeOf")),o=require("@deck.gl/core"),u=require("@luma.gl/core");function a(e){return e&&e.__esModule?e:{default:e}}function c(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function s(r){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){(0,e.default)(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))})}return r}function l(e){var r=f();return function(){var t,o=(0,i.default)(e);if(r){var u=(0,i.default)(this).constructor;t=Reflect.construct(o,arguments,u)}else t=o.apply(this,arguments);return(0,n.default)(this,t)}}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var p=function(e){(0,t.default)(i,e);var n=l(i);function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.default)(this,i);var t=e.id,o=void 0===t?(0,u.uid)("column-geometry"):t,a=d(e),c=a.indices,l=a.attributes;return n.call(this,s(s({},e),{},{id:o,indices:c,attributes:l}))}return i}(u.Geometry);function d(e){var r=e.radius,t=e.height,n=void 0===t?1:t,i=e.nradial,u=void 0===i?10:i,a=e.vertices;o.log.assert(!a||a.length>=u);for(var c=u+1,s=3*c,l=2*Math.PI/u,f=new Uint16Array(3*u*2),p=new Float32Array(3*s),d=new Float32Array(3*s),b=0,h=0;h<c;h++)for(var v=h*l,y=a&&a[h%u],O=a&&a[(h+1)%u],m=Math.sin(v),g=Math.cos(v),P=0;P<2;P++)p[b+0]=y?y[0]:g*r,p[b+1]=y?y[1]:m*r,p[b+2]=(.5-P)*n,d[b+0]=y?O[0]-y[0]:g,d[b+1]=y?O[1]-y[1]:m,b+=3;for(var j=0;j<c;j++){var M=Math.floor(j/2)*Math.sign(j%2-.5),w=M*l,q=a&&a[(M+u)%u],R=Math.sin(w),D=Math.cos(w);p[b+0]=q?q[0]:D*r,p[b+1]=q?q[1]:R*r,p[b+2]=n/2,d[b+2]=1,b+=3}for(var x=0,A=0;A<u;A++)f[x++]=2*A+0,f[x++]=2*A+2,f[x++]=2*A+0,f[x++]=2*A+1,f[x++]=2*A+1,f[x++]=2*A+3;return{indices:f,attributes:{POSITION:{size:3,value:p},NORMAL:{size:3,value:d}}}}exports.default=p;
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@deck.gl/core":"vvxL","@luma.gl/core":"iuAK"}],"OUXU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var o="\n#define SHADER_NAME column-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 normals;\n\nattribute vec3 instancePositions;\nattribute float instanceElevations;\nattribute vec3 instancePositions64Low;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute float instanceStrokeWidths;\n\nattribute vec3 instancePickingColors;\nuniform float opacity;\nuniform float radius;\nuniform float angle;\nuniform vec2 offset;\nuniform bool extruded;\nuniform bool isStroke;\nuniform float coverage;\nuniform float elevationScale;\nuniform float edgeDistance;\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nvarying vec4 vColor;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n\n  vec4 color = isStroke ? instanceLineColors : instanceFillColors;\n  mat2 rotationMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  float elevation = 0.0;\n  float strokeOffsetRatio = 1.0;\n\n  if (extruded) {\n    elevation = instanceElevations * (positions.z + 1.0) / 2.0 * elevationScale;\n  } else if (isStroke) {\n    float widthPixels = clamp(project_size_to_pixel(instanceStrokeWidths * widthScale),\n      widthMinPixels, widthMaxPixels) / 2.0;\n    strokeOffsetRatio += sign(positions.z) * project_pixel_size(widthPixels) / project_size(edgeDistance * coverage * radius);\n  }\n  float shouldRender = float(color.a > 0.0 && instanceElevations >= 0.0);\n  float dotRadius = radius * coverage * shouldRender;\n\n  geometry.normal = project_normal(vec3(rotationMatrix * normals.xy, normals.z));\n  geometry.pickingColor = instancePickingColors;\n  vec3 centroidPosition = vec3(instancePositions.xy, instancePositions.z + elevation);\n  vec3 centroidPosition64Low = instancePositions64Low;\n  vec3 pos = vec3(project_size(rotationMatrix * positions.xy * strokeOffsetRatio + offset) * dotRadius, 0.);\n  DECKGL_FILTER_SIZE(pos, geometry);\n\n  gl_Position = project_position_to_clipspace(centroidPosition, centroidPosition64Low, pos, geometry.position);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  if (extruded && !isStroke) {\n    vec3 lightColor = lighting_getLightColor(color.rgb, project_uCameraPosition, geometry.position.xyz, geometry.normal);\n    vColor = vec4(lightColor, color.a * opacity);\n  } else {\n    vColor = vec4(color.rgb, color.a * opacity);\n  }\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n";exports.default=o;
},{}],"l85h":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="#define SHADER_NAME column-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n";exports.default=e;
},{}],"Gz3O":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=c(require("@babel/runtime/helpers/esm/classCallCheck")),t=c(require("@babel/runtime/helpers/esm/createClass")),r=c(require("@babel/runtime/helpers/esm/get")),i=c(require("@babel/runtime/helpers/esm/inherits")),s=c(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),a=c(require("@babel/runtime/helpers/esm/getPrototypeOf")),n=require("@deck.gl/core"),l=require("@luma.gl/core"),o=c(require("./column-geometry")),u=c(require("./column-layer-vertex.glsl")),d=c(require("./column-layer-fragment.glsl"));function c(e){return e&&e.__esModule?e:{default:e}}function f(e){var t=h();return function(){var r,i=(0,a.default)(e);if(t){var n=(0,a.default)(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return(0,s.default)(this,r)}}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var p=[0,0,0,255],g={diskResolution:{type:"number",min:4,value:20},vertices:null,radius:{type:"number",min:0,value:1e3},angle:{type:"number",value:0},offset:{type:"array",value:[0,0]},coverage:{type:"number",min:0,max:1,value:1},elevationScale:{type:"number",min:0,value:1},lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,extruded:!0,wireframe:!1,filled:!0,stroked:!1,getPosition:{type:"accessor",value:function(e){return e.position}},getFillColor:{type:"accessor",value:p},getLineColor:{type:"accessor",value:p},getLineWidth:{type:"accessor",value:1},getElevation:{type:"accessor",value:1e3},material:!0,getColor:{deprecatedFor:["getFillColor","getLineColor"]}},m=function(s){(0,i.default)(h,s);var c=f(h);function h(){return(0,e.default)(this,h),c.apply(this,arguments)}return(0,t.default)(h,[{key:"getShaders",value:function(){return(0,r.default)((0,a.default)(h.prototype),"getShaders",this).call(this,{vs:u.default,fs:d.default,modules:[n.project32,n.gouraudLighting,n.picking]})}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceElevations:{size:1,transition:!0,accessor:"getElevation"},instanceFillColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getFillColor",defaultValue:p},instanceLineColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getLineColor",defaultValue:p},instanceStrokeWidths:{size:1,accessor:"getLineWidth",transition:!0}})}},{key:"updateState",value:function(e){var t=e.props,i=e.oldProps,s=e.changeFlags;(0,r.default)((0,a.default)(h.prototype),"updateState",this).call(this,{props:t,oldProps:i,changeFlags:s});var n=s.extensionsChanged;if(n){var l=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(l)}),this.getAttributeManager().invalidateAll()}(n||t.diskResolution!==i.diskResolution||t.vertices!==i.vertices)&&this._updateGeometry(t)}},{key:"getGeometry",value:function(e,t){var r=new o.default({radius:1,height:2,vertices:t,nradial:e}),i=0;if(t)for(var s=0;s<e;s++){var a=t[s];i+=Math.sqrt(a[0]*a[0]+a[1]*a[1])/e}else i=1;return this.setState({edgeDistance:Math.cos(Math.PI/e)*i}),r}},{key:"_getModel",value:function(e){return new l.Model(e,Object.assign({},this.getShaders(),{id:this.props.id,isInstanced:!0}))}},{key:"_updateGeometry",value:function(e){var t=e.diskResolution,r=e.vertices,i=this.getGeometry(t,r);this.setState({fillVertexCount:i.attributes.POSITION.value.length/3,wireframeVertexCount:i.indices.value.length}),this.state.model.setProps({geometry:i})}},{key:"draw",value:function(e){var t=e.uniforms,r=this.context.viewport,i=this.props,s=i.lineWidthUnits,a=i.lineWidthScale,n=i.lineWidthMinPixels,l=i.lineWidthMaxPixels,o=i.elevationScale,u=i.extruded,d=i.filled,c=i.stroked,f=i.wireframe,h=i.offset,p=i.coverage,g=i.radius,m=i.angle,v=this.state,y=v.model,x=v.fillVertexCount,b=v.wireframeVertexCount,P=v.edgeDistance,C="pixels"===s?r.metersPerPixel:1;y.setUniforms(Object.assign({},t,{radius:g,angle:m/180*Math.PI,offset:h,extruded:u,coverage:p,elevationScale:o,edgeDistance:P,widthScale:a*C,widthMinPixels:n,widthMaxPixels:l})),u&&f&&(y.setProps({isIndexed:!0}),y.setVertexCount(b).setDrawMode(1).setUniforms({isStroke:!0}).draw()),d&&(y.setProps({isIndexed:!1}),y.setVertexCount(x).setDrawMode(5).setUniforms({isStroke:!1}).draw()),!u&&c&&(y.setProps({isIndexed:!1}),y.setVertexCount(2*x/3).setDrawMode(5).setUniforms({isStroke:!0}).draw())}}]),h}(n.Layer);exports.default=m,m.layerName="ColumnLayer",m.defaultProps=g;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/get":"KGqu","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@deck.gl/core":"vvxL","@luma.gl/core":"iuAK","./column-geometry":"XYjb","./column-layer-vertex.glsl":"OUXU","./column-layer-fragment.glsl":"l85h"}],"zas9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("@babel/runtime/helpers/esm/classCallCheck")),t=i(require("@babel/runtime/helpers/esm/createClass")),r=i(require("@babel/runtime/helpers/esm/inherits")),u=i(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),a=i(require("@babel/runtime/helpers/esm/getPrototypeOf")),l=require("@luma.gl/core"),n=i(require("./column-layer"));function i(e){return e&&e.__esModule?e:{default:e}}function s(e){var t=o();return function(){var r,l=(0,a.default)(e);if(t){var n=(0,a.default)(this).constructor;r=Reflect.construct(l,arguments,n)}else r=l.apply(this,arguments);return(0,u.default)(this,r)}}function o(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var c={cellSize:{type:"number",min:0,value:1e3},offset:{type:"array",min:0,value:[1,1]}},f=function(u){(0,r.default)(n,u);var a=s(n);function n(){return(0,e.default)(this,n),a.apply(this,arguments)}return(0,t.default)(n,[{key:"getGeometry",value:function(e){return new l.CubeGeometry}},{key:"draw",value:function(e){var t=e.uniforms,r=this.props,u=r.elevationScale,a=r.extruded,l=r.offset,n=r.coverage,i=r.cellSize,s=r.angle;this.state.model.setUniforms(Object.assign({},t,{radius:i/2,angle:s,offset:l,extruded:a,coverage:n,elevationScale:u,edgeDistance:1,isWireframe:!1})).draw()}}]),n}(n.default);exports.default=f,f.layerName="GridCellLayer",f.defaultProps=c;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@luma.gl/core":"iuAK","./column-layer":"Gz3O"}],"YiDX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("@babel/runtime/helpers/esm/classCallCheck")),t=s(require("@babel/runtime/helpers/esm/createClass")),i=require("@math.gl/core");function s(e){return e&&e.__esModule?e:{default:e}}var n=function(){function s(t){(0,e.default)(this,s),this.points=t,this.isClosed=(0,i.equals)(this.points[this.points.length-1],this.points[0]),Object.freeze(this)}return(0,t.default)(s,[{key:"getSignedArea",value:function(){var e=0;return this.forEachSegment(function(t,i){e+=(t[0]+i[0])*(t[1]-i[1])}),e/2}},{key:"getArea",value:function(){return Math.abs(this.getSignedArea())}},{key:"getWindingDirection",value:function(){return Math.sign(this.getSignedArea())}},{key:"forEachSegment",value:function(e){for(var t=this.points.length,i=0;i<t-1;i++)e(this.points[i],this.points[i+1],i,i+1);this.isClosed||e(this.points[t-1],this.points[0],t-1,0)}}]),s}();exports.default=n;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@math.gl/core":"dwLx"}],"P0NL":[function(require,module,exports) {
"use strict";function r(r,e){var t=e.length,n=r.length;if(n>0){for(var o=!0,f=0;f<t;f++)if(r[n-t+f]!==e[f]){o=!1;break}if(o)return!1}for(var i=0;i<t;i++)r[n+i]=e[i];return!0}function e(r,e){for(var t=e.length,n=0;n<t;n++)r[n]=e[n]}function t(r,e,t,n){for(var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],f=n+e*t,i=0;i<t;i++)o[i]=r[f+i];return o}Object.defineProperty(exports,"__esModule",{value:!0}),exports.push=r,exports.copy=e,exports.getPointAtIndex=t;
},{}],"AO07":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clipPolyline=t,exports.clipPolygon=n,exports.intersect=r,exports.bitCode=i;var e=require("./utils");function t(t,n){for(var o,s,d,u,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},f=l.size,v=void 0===f?2:f,p=l.startIndex,h=void 0===p?0:p,a=l.endIndex,g=((void 0===a?t.length:a)-h)/v,x=[],c=[],I=-1,P=1;P<g;P++){for(o=(0,e.getPointAtIndex)(t,P-1,v,h,o),s=(0,e.getPointAtIndex)(t,P,v,h,s),I<0&&(I=i(o,n)),d=u=i(s,n);;){if(!(I|d)){(0,e.push)(c,o),d!==u?((0,e.push)(c,s),P<g-1&&(x.push(c),c=[])):P===g-1&&(0,e.push)(c,s);break}if(I&d)break;I?(r(o,s,I,n,o),I=i(o,n)):(r(o,s,d,n,s),d=i(s,n))}I=u}return c.length&&x.push(c),x}function n(t,n){for(var o,s,d,u,l,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},v=f.size,p=void 0===v?2:v,h=f.endIndex,a=void 0===h?t.length:h,g=f.startIndex,x=void 0===g?0:g,c=(a-x)/p,I=1;I<=8;I*=2){o=[],l=!(i(d=(0,e.getPointAtIndex)(t,c-1,p,x,d),n)&I);for(var P=0;P<c;P++)(u=!(i(s=(0,e.getPointAtIndex)(t,P,p,x,s),n)&I))!==l&&(0,e.push)(o,r(d,s,I,n)),u&&(0,e.push)(o,s),(0,e.copy)(d,s),l=u;if(t=o,x=0,!(c=o.length/p))break}return o}function r(e,t,n,r){var i,o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];if(8&n)i=(r[3]-e[1])/(t[1]-e[1]),o=3;else if(4&n)i=(r[1]-e[1])/(t[1]-e[1]),o=1;else if(2&n)i=(r[2]-e[0])/(t[0]-e[0]),o=2;else{if(!(1&n))return null;i=(r[0]-e[0])/(t[0]-e[0]),o=0}for(var d=0;d<e.length;d++)s[d]=(1&o)===d?r[o]:i*(t[d]-e[d])+e[d];return s}function i(e,t){var n=0;return e[0]<t[0]?n|=1:e[0]>t[2]&&(n|=2),e[1]<t[1]?n|=4:e[1]>t[3]&&(n|=8),n}
},{"./utils":"P0NL"}],"Ep9P":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cutPolylineByGrid=s,exports.cutPolygonByGrid=p;var e=require("./lineclip"),t=require("./utils");function s(s){var o,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},p=r.size,i=void 0===p?2:p,u=r.broken,d=void 0!==u&&u,g=r.gridResolution,v=void 0===g?10:g,f=r.gridOffset,y=void 0===f?[0,0]:f,a=r.startIndex,c=void 0===a?0:a,x=r.endIndex,I=((void 0===x?s.length:x)-c)/i,P=[],b=[P],A=(0,t.getPointAtIndex)(s,0,i,c),M=h(A,v,y,[]),C=[];(0,t.push)(P,A);for(var O=1;O<I;O++){for(o=(0,t.getPointAtIndex)(s,O,i,c,o),n=(0,e.bitCode)(o,M);n;){(0,e.intersect)(A,o,n,M,C);var q=(0,e.bitCode)(C,M);q&&((0,e.intersect)(A,C,q,M,C),n=q),(0,t.push)(P,C),(0,t.copy)(A,C),l(M,v,n),d&&P.length>i&&(P=[],b.push(P),(0,t.push)(P,A)),n=(0,e.bitCode)(o,M)}(0,t.push)(P,o),(0,t.copy)(A,o)}return d?b:b[0]}var o=0,n=1;function r(e,t){for(var s=0;s<t.length;s++)e.push(t[s]);return e}function p(t,s){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t.length)return[];for(var p=o.size,l=void 0===p?2:p,d=o.gridResolution,g=void 0===d?10:d,v=o.gridOffset,f=void 0===v?[0,0]:v,y=o.edgeTypes,a=void 0!==y&&y,c=[],x=[{pos:t,types:a&&new Array(t.length/l).fill(n),holes:s||[]}],I=[[],[]],P=[];x.length;){var b=x.shift(),A=b.pos,M=b.types,C=b.holes;u(A,l,C[0]||A.length,I),P=h(I[0],g,f,P);var O=(0,e.bitCode)(I[1],P);if(O){var q=i(A,M,l,0,C[0]||A.length,P,O),z={pos:q[0].pos,types:q[0].types,holes:[]},B={pos:q[1].pos,types:q[1].types,holes:[]};x.push(z,B);for(var G=0;G<C.length;G++)(q=i(A,M,l,C[G],C[G+1]||A.length,P,O))[0]&&(z.holes.push(z.pos.length),z.pos=r(z.pos,q[0].pos),a&&(z.types=r(z.types,q[0].types))),q[1]&&(B.holes.push(B.pos.length),B.pos=r(B.pos,q[1].pos),a&&(B.types=r(B.types,q[1].types)))}else{var R={positions:A};a&&(R.edgeTypes=M),C.length&&(R.holeIndices=C),c.push(R)}}return c}function i(s,n,r,p,i,h,l){for(var u,d,g,v=(i-p)/r,f=[],y=[],a=[],c=[],x=[],I=(0,t.getPointAtIndex)(s,v-1,r,p),P=Math.sign(8&l?I[1]-h[3]:I[0]-h[2]),b=n&&n[v-1],A=0,M=0,C=0;C<v;C++)u=(0,t.getPointAtIndex)(s,C,r,p,u),d=Math.sign(8&l?u[1]-h[3]:u[0]-h[2]),g=n&&n[p/r+C],d&&P&&P!==d&&((0,e.intersect)(I,u,l,h,x),(0,t.push)(f,x)&&a.push(b),(0,t.push)(y,x)&&c.push(b)),d<=0?((0,t.push)(f,u)&&a.push(g),A-=d):a.length&&(a[a.length-1]=o),d>=0?((0,t.push)(y,u)&&c.push(g),M+=d):c.length&&(c[c.length-1]=o),(0,t.copy)(I,u),P=d,b=g;return[A?{pos:f,types:n&&a}:null,M?{pos:y,types:n&&c}:null]}function h(e,t,s,o){var n=Math.floor((e[0]-s[0])/t)*t+s[0],r=Math.floor((e[1]-s[1])/t)*t+s[1];return o[0]=n,o[1]=r,o[2]=n+t,o[3]=r+t,o}function l(e,t,s){8&s?(e[1]+=t,e[3]+=t):4&s?(e[1]-=t,e[3]-=t):2&s?(e[0]+=t,e[2]+=t):1&s&&(e[0]-=t,e[2]-=t)}function u(e,t,s,o){for(var n=1/0,r=-1/0,p=1/0,i=-1/0,h=0;h<s;h+=t){var l=e[h],u=e[h+1];n=l<n?l:n,r=l>r?l:r,p=u<p?u:p,i=u>i?u:i}return o[0][0]=n,o[0][1]=p,o[1][0]=r,o[1][1]=i,o}
},{"./lineclip":"AO07","./utils":"P0NL"}],"Z5gV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cutPolylineByMercatorBounds=a,exports.cutPolygonByMercatorBounds=u;var r=require("./cut-by-grid"),t=require("./utils");function n(r,t){var n;if("undefined"==typeof Symbol||null==r[Symbol.iterator]){if(Array.isArray(r)||(n=e(r))||t&&r&&"number"==typeof r.length){n&&(r=n);var o=0,i=function(){};return{s:i,n:function(){return o>=r.length?{done:!0}:{done:!1,value:r[o++]}},e:function(r){throw r},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,f=!1;return{s:function(){n=r[Symbol.iterator]()},n:function(){var r=n.next();return u=r.done,r},e:function(r){f=!0,a=r},f:function(){try{u||null==n.return||n.return()}finally{if(f)throw a}}}}function e(r,t){if(r){if("string"==typeof r)return o(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);return"Object"===n&&r.constructor&&(n=r.constructor.name),"Map"===n||"Set"===n?Array.from(r):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(r,t):void 0}}function o(r,t){(null==t||t>r.length)&&(t=r.length);for(var n=0,e=new Array(t);n<t;n++)e[n]=r[n];return e}var i=85.051129;function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=e.size,i=void 0===o?2:o,a=e.startIndex,u=void 0===a?0:a,f=e.endIndex,l=void 0===f?t.length:f,v=e.normalize,c=void 0===v||v,y=t.slice(u,l);d(y,i,0,l-u);var h=(0,r.cutPolylineByGrid)(y,{size:i,broken:!0,gridResolution:360,gridOffset:[-180,-180]});if(c){var g,p=n(h);try{for(p.s();!(g=p.n()).done;){s(g.value,i)}}catch(b){p.e(b)}finally{p.f()}}return h}function u(t,e){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=o.size,a=void 0===i?2:i,u=o.normalize,v=void 0===u||u,c=o.edgeTypes,y=void 0!==c&&c;e=e||[];for(var h=[],g=[],p=0,b=0,m=0;m<=e.length;m++){for(var M=e[m]||t.length,x=b,A=f(t,a,p,M),z=A;z<M;z++)h[b++]=t[z];for(var B=p;B<A;B++)h[b++]=t[B];d(h,a,x,b),l(h,a,x,b,o.maxLatitude),p=M,g[m]=b}g.pop();var I=(0,r.cutPolygonByGrid)(h,g,{size:a,gridResolution:360,gridOffset:[-180,-180],edgeTypes:y});if(v){var P,S=n(I);try{for(S.s();!(P=S.n()).done;){s(P.value.positions,a)}}catch(w){S.e(w)}finally{S.f()}}return I}function f(r,t,n,e){for(var o=-1,i=-1,a=n+1;a<e;a+=t){var u=Math.abs(r[a]);u>o&&(o=u,i=a-1)}return i}function l(r,n,e,o){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:i,u=r[e],f=r[o-n];if(Math.abs(u-f)>180){var l=(0,t.getPointAtIndex)(r,0,n,e);l[0]+=360*Math.round((f-u)/360),(0,t.push)(r,l),l[1]=Math.sign(l[1])*a,(0,t.push)(r,l),l[0]=u,(0,t.push)(r,l)}}function d(r,t,n,e){for(var o,i=r[0],a=n;a<e;a+=t){var u=(o=r[a])-i;(u>180||u<-180)&&(o-=360*Math.round(u/360)),r[a]=i=o}}function s(r,t){for(var n,e=r.length/t,o=0;o<e&&((n=r[o*t])+180)%360==0;o++);var i=360*-Math.round(n/360);if(0!==i)for(var a=0;a<e;a++)r[a*t]+=i}
},{"./cut-by-grid":"Ep9P","./utils":"P0NL"}],"bJcr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Polygon",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"_Polygon",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"clipPolygon",{enumerable:!0,get:function(){return r.clipPolygon}}),Object.defineProperty(exports,"clipPolyline",{enumerable:!0,get:function(){return r.clipPolyline}}),Object.defineProperty(exports,"cutPolygonByGrid",{enumerable:!0,get:function(){return t.cutPolygonByGrid}}),Object.defineProperty(exports,"cutPolylineByGrid",{enumerable:!0,get:function(){return t.cutPolylineByGrid}}),Object.defineProperty(exports,"cutPolylineByMercatorBounds",{enumerable:!0,get:function(){return n.cutPolylineByMercatorBounds}}),Object.defineProperty(exports,"cutPolygonByMercatorBounds",{enumerable:!0,get:function(){return n.cutPolygonByMercatorBounds}});var e=o(require("./polygon")),r=require("./lineclip"),t=require("./cut-by-grid"),n=require("./cut-by-mercator-bounds");function o(e){return e&&e.__esModule?e:{default:e}}
},{"./polygon":"YiDX","./lineclip":"AO07","./cut-by-grid":"Ep9P","./cut-by-mercator-bounds":"Z5gV"}],"rssX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.normalizePath=e;var r=require("@math.gl/polygon");function e(e,o,t,i){var a=e;if(Array.isArray(e[0])){var n=e.length*o;a=new Array(n);for(var l=0;l<e.length;l++)for(var s=0;s<o;s++)a[l*o+s]=e[l][s]||0}return t?(0,r.cutPolylineByGrid)(a,{size:o,gridResolution:t}):i?(0,r.cutPolylineByMercatorBounds)(a,{size:o}):a}
},{"@math.gl/polygon":"bJcr"}],"lJX3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=l(require("@babel/runtime/helpers/esm/defineProperty")),t=l(require("@babel/runtime/helpers/esm/classCallCheck")),r=l(require("@babel/runtime/helpers/esm/createClass")),n=l(require("@babel/runtime/helpers/esm/get")),i=l(require("@babel/runtime/helpers/esm/inherits")),o=l(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),u=l(require("@babel/runtime/helpers/esm/getPrototypeOf")),a=require("@deck.gl/core"),s=require("./path");function l(e){return e&&e.__esModule?e:{default:e}}function f(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=c(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,a=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return u=e.done,e},e:function(e){a=!0,o=e},f:function(){try{u||null==r.return||r.return()}finally{if(a)throw o}}}}function c(e,t){if(e){if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function h(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?p(Object(n),!0).forEach(function(r){(0,e.default)(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function m(e){var t=v();return function(){var r,n=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,o.default)(this,r)}}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var d=1,b=2,g=4,S=function(e){(0,i.default)(a,e);var o=m(a);function a(e){return(0,t.default)(this,a),o.call(this,h(h({},e),{},{attributes:{positions:{size:3,padding:18,initialize:!0,type:e.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}}))}return(0,r.default)(a,[{key:"getGeometryFromBuffer",value:function(e){return this.normalize?(0,n.default)((0,u.default)(a.prototype),"getGeometryFromBuffer",this).call(this,e):function(){return null}}},{key:"normalizeGeometry",value:function(e){return this.normalize?(0,s.normalizePath)(e,this.positionSize,this.opts.resolution,this.opts.wrapLongitude):e}},{key:"get",value:function(e){return this.attributes[e]}},{key:"getGeometrySize",value:function(e){if(Array.isArray(e[0])){var t,r=0,n=f(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;r+=this.getGeometrySize(i)}}catch(u){n.e(u)}finally{n.f()}return r}var o=this.getPathLength(e);return o<2?0:this.isClosed(e)?o<3?0:o+2:o}},{key:"updateGeometryAttributes",value:function(e,t){if(0!==t.geometrySize)if(e&&Array.isArray(e[0])){var r,n=f(e);try{for(n.s();!(r=n.n()).done;){var i=r.value,o=this.getGeometrySize(i);t.geometrySize=o,this.updateGeometryAttributes(i,t),t.vertexStart+=o}}catch(u){n.e(u)}finally{n.f()}}else this._updateSegmentTypes(e,t),this._updatePositions(e,t)}},{key:"_updateSegmentTypes",value:function(e,t){var r=this.attributes.segmentTypes,n=this.isClosed(e),i=t.vertexStart,o=t.geometrySize;r.fill(0,i,i+o),n?(r[i]=g,r[i+o-2]=g):(r[i]+=d,r[i+o-2]+=b),r[i+o-1]=g}},{key:"_updatePositions",value:function(e,t){var r=this.attributes.positions;if(r)for(var n=t.vertexStart,i=t.geometrySize,o=new Array(3),u=n,a=0;a<i;u++,a++)this.getPointOnPath(e,a,o),r[3*u]=o[0],r[3*u+1]=o[1],r[3*u+2]=o[2]}},{key:"getPathLength",value:function(e){return e.length/this.positionSize}},{key:"getPointOnPath",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=this.positionSize;t*n>=e.length&&(t+=1-e.length/n);var i=t*n;return r[0]=e[i],r[1]=e[i+1],r[2]=3===n&&e[i+2]||0,r}},{key:"isClosed",value:function(e){if(!this.normalize)return this.opts.loop;var t=this.positionSize,r=e.length-t;return e[0]===e[r]&&e[1]===e[r+1]&&(2===t||e[2]===e[r+2])}}]),a}(a.Tesselator);exports.default=S;
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/get":"KGqu","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@deck.gl/core":"vvxL","./path":"rssX"}],"NZD1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="#define SHADER_NAME path-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute float instanceTypes;\nattribute vec3 instanceStartPositions;\nattribute vec3 instanceEndPositions;\nattribute vec3 instanceLeftPositions;\nattribute vec3 instanceRightPositions;\nattribute vec3 instanceLeftPositions64Low;\nattribute vec3 instanceStartPositions64Low;\nattribute vec3 instanceEndPositions64Low;\nattribute vec3 instanceRightPositions64Low;\nattribute float instanceStrokeWidths;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform float jointType;\nuniform float miterLimit;\nuniform bool billboard;\n\nuniform float opacity;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vPathPosition;\nvarying float vPathLength;\n\nconst float EPSILON = 0.001;\nconst vec3 ZERO_OFFSET = vec3(0.0);\n\nfloat flipIfTrue(bool flag) {\n  return -(float(flag) * 2. - 1.);\n}\nvec3 lineJoin(\n  vec3 prevPoint, vec3 currPoint, vec3 nextPoint,\n  vec2 width\n) {\n  bool isEnd = positions.x > 0.0;\n  float sideOfPath = positions.y;\n  float isJoint = float(sideOfPath == 0.0);\n\n  vec3 deltaA3 = (currPoint - prevPoint);\n  vec3 deltaB3 = (nextPoint - currPoint);\n\n  mat3 rotationMatrix;\n  bool needsRotation = !billboard && project_needs_rotation(currPoint, rotationMatrix);\n  if (needsRotation) {\n    deltaA3 = deltaA3 * rotationMatrix;\n    deltaB3 = deltaB3 * rotationMatrix;\n  }\n  vec2 deltaA = deltaA3.xy / width;\n  vec2 deltaB = deltaB3.xy / width;\n\n  float lenA = length(deltaA);\n  float lenB = length(deltaB);\n\n  vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);\n  vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);\n\n  vec2 perpA = vec2(-dirA.y, dirA.x);\n  vec2 perpB = vec2(-dirB.y, dirB.x);\n  vec2 tangent = dirA + dirB;\n  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;\n  vec2 miterVec = vec2(-tangent.y, tangent.x);\n  vec2 dir = isEnd ? dirA : dirB;\n  vec2 perp = isEnd ? perpA : perpB;\n  float L = isEnd ? lenA : lenB;\n  float sinHalfA = abs(dot(miterVec, perp));\n  float cosHalfA = abs(dot(dirA, miterVec));\n  float turnDirection = flipIfTrue(dirA.x * dirB.y >= dirA.y * dirB.x);\n  float cornerPosition = sideOfPath * turnDirection;\n\n  float miterSize = 1.0 / max(sinHalfA, EPSILON);\n  miterSize = mix(\n    min(miterSize, max(lenA, lenB) / max(cosHalfA, EPSILON)),\n    miterSize,\n    step(0.0, cornerPosition)\n  );\n\n  vec2 offsetVec = mix(miterVec * miterSize, perp, step(0.5, cornerPosition))\n    * (sideOfPath + isJoint * turnDirection);\n  bool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));\n  bool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));\n  bool isCap = isStartCap || isEndCap;\n  if (isCap) {\n    offsetVec = mix(perp * sideOfPath, dir * jointType * 4.0 * flipIfTrue(isStartCap), isJoint);\n  }\n  vPathLength = L;\n  vCornerOffset = offsetVec;\n  vMiterLength = dot(vCornerOffset, miterVec * turnDirection);\n  vMiterLength = isCap ? isJoint : vMiterLength;\n\n  vec2 offsetFromStartOfPath = vCornerOffset + deltaA * float(isEnd);\n  vPathPosition = vec2(\n    dot(offsetFromStartOfPath, perp),\n    dot(offsetFromStartOfPath, dir)\n  );\n  geometry.uv = vPathPosition;\n\n  float isValid = step(instanceTypes, 3.5);\n  vec3 offset = vec3(offsetVec * width * isValid, 0.0);\n\n  if (needsRotation) {\n    offset = rotationMatrix * offset;\n  }\n  return currPoint + offset;\n}\nvoid clipLine(inout vec4 position, vec4 refPosition) {\n  if (position.w < EPSILON) {\n    float r = (EPSILON - refPosition.w) / (position.w - refPosition.w);\n    position = refPosition + (position - refPosition) * r;\n  }\n}\n\nvoid main() {\n  geometry.worldPosition = instanceStartPositions;\n  geometry.worldPositionAlt = instanceEndPositions;\n  geometry.pickingColor = instancePickingColors;\n\n  vec2 widthPixels = vec2(clamp(project_size_to_pixel(instanceStrokeWidths * widthScale),\n    widthMinPixels, widthMaxPixels) / 2.0);\n  vec3 width;\n\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);\n\n  float isEnd = positions.x;\n\n  vec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);\n  vec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);\n\n  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);\n  vec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);\n\n  vec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);\n  vec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);\n\n  if (billboard) {\n    vec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);\n    vec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);\n    vec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);\n\n    clipLine(prevPositionScreen, currPositionScreen);\n    clipLine(nextPositionScreen, currPositionScreen);\n    clipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));\n\n    width = vec3(widthPixels, 0.0);\n    DECKGL_FILTER_SIZE(width, geometry);\n\n    vec3 pos = lineJoin(\n      prevPositionScreen.xyz / prevPositionScreen.w,\n      currPositionScreen.xyz / currPositionScreen.w,\n      nextPositionScreen.xyz / nextPositionScreen.w,\n      project_pixel_size_to_clipspace(width.xy)\n    );\n\n    gl_Position = vec4(pos * currPositionScreen.w, currPositionScreen.w);\n  } else {\n    prevPosition = project_position(prevPosition, prevPosition64Low);\n    currPosition = project_position(currPosition, currPosition64Low);\n    nextPosition = project_position(nextPosition, nextPosition64Low);\n\n    width = vec3(project_pixel_size(widthPixels), 0.0);\n    DECKGL_FILTER_SIZE(width, geometry);\n\n    vec4 pos = vec4(\n      lineJoin(prevPosition, currPosition, nextPosition, width.xy),\n      1.0);\n    geometry.position = pos;\n    gl_Position = project_common_position_to_clipspace(pos);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n";exports.default=n;
},{}],"YKcs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="#define SHADER_NAME path-layer-fragment-shader\n\nprecision highp float;\n\nuniform float jointType;\nuniform float miterLimit;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vPathPosition;\nvarying float vPathLength;\n\nvoid main(void) {\n  geometry.uv = vPathPosition;\n\n  if (vPathPosition.y < 0.0 || vPathPosition.y > vPathLength) {\n    if (jointType > 0.0 && length(vCornerOffset) > 1.0) {\n      discard;\n    }\n    if (jointType == 0.0 && vMiterLength > miterLimit + 1.0) {\n      discard;\n    }\n  }\n  gl_FragColor = vColor;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n";exports.default=n;
},{}],"Exm7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=c(require("@babel/runtime/helpers/esm/classCallCheck")),t=c(require("@babel/runtime/helpers/esm/createClass")),r=c(require("@babel/runtime/helpers/esm/get")),a=c(require("@babel/runtime/helpers/esm/inherits")),i=c(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),s=c(require("@babel/runtime/helpers/esm/getPrototypeOf")),n=require("@deck.gl/core"),o=require("@luma.gl/core"),l=c(require("./path-tesselator")),u=c(require("./path-layer-vertex.glsl")),d=c(require("./path-layer-fragment.glsl"));function c(e){return e&&e.__esModule?e:{default:e}}function h(e){var t=p();return function(){var r,a=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,i.default)(this,r)}}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var f=[0,0,0,255],g={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},rounded:!1,miterLimit:{type:"number",min:0,value:4},billboard:!1,_pathType:null,getPath:{type:"accessor",value:function(e){return e.path}},getColor:{type:"accessor",value:f},getWidth:{type:"accessor",value:1}},m={enter:function(e,t){return t.length?t.subarray(t.length-e.length):e}},y=function(i){(0,a.default)(p,i);var c=h(p);function p(){return(0,e.default)(this,p),c.apply(this,arguments)}return(0,t.default)(p,[{key:"getShaders",value:function(){return(0,r.default)((0,s.default)(p.prototype),"getShaders",this).call(this,{vs:u.default,fs:d.default,modules:[n.project32,n.picking]})}},{key:"initializeState",value:function(){var e=this;this.getAttributeManager().addInstanced({positions:{size:3,vertexOffset:1,type:5130,fp64:this.use64bitPositions(),transition:m,accessor:"getPath",update:this.calculatePositions,noAlloc:!0,shaderAttributes:{instanceLeftPositions:{vertexOffset:0},instanceStartPositions:{vertexOffset:1},instanceEndPositions:{vertexOffset:2},instanceRightPositions:{vertexOffset:3}}},instanceTypes:{size:1,type:5121,update:this.calculateSegmentTypes,noAlloc:!0},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:m,defaultValue:1},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,accessor:"getColor",transition:m,defaultValue:f},instancePickingColors:{size:3,type:5121,accessor:function(t,r){var a=r.index,i=r.target;return e.encodePickingColor(t&&t.__source?t.__source.index:a,i)}}}),this.setState({pathTesselator:new l.default({fp64:this.use64bitPositions()})}),this.props.getDashArray&&!this.props.extensions.length&&n.log.removed("getDashArray","PathStyleExtension")()}},{key:"updateState",value:function(e){var t=e.oldProps,a=e.props,i=e.changeFlags;(0,r.default)((0,s.default)(p.prototype),"updateState",this).call(this,{props:a,oldProps:t,changeFlags:i});var n=this.getAttributeManager();if(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getPath)){var o=this.state.pathTesselator,l=a.data.attributes||{};o.updateGeometry({data:a.data,geometryBuffer:l.getPath,buffers:l,normalize:!a._pathType,loop:"loop"===a._pathType,getGeometry:a.getPath,positionFormat:a.positionFormat,wrapLongitude:a.wrapLongitude,resolution:this.context.viewport.resolution,dataChanged:i.dataChanged}),this.setState({numInstances:o.instanceCount,startIndices:o.vertexStarts}),i.dataChanged||n.invalidateAll()}if(i.extensionsChanged){var u=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(u)}),n.invalidateAll()}}},{key:"getPickingInfo",value:function(e){var t=(0,r.default)((0,s.default)(p.prototype),"getPickingInfo",this).call(this,e),a=t.index,i=this.props.data;return i[0]&&i[0].__source&&(t.object=i.find(function(e){return e.__source.index===a})),t}},{key:"draw",value:function(e){var t=e.uniforms,r=this.context.viewport,a=this.props,i=a.rounded,s=a.billboard,n=a.miterLimit,o=a.widthUnits,l=a.widthScale,u=a.widthMinPixels,d=a.widthMaxPixels,c="pixels"===o?r.metersPerPixel:1;this.state.model.setUniforms(Object.assign({},t,{jointType:Number(i),billboard:s,widthScale:l*c,miterLimit:n,widthMinPixels:u,widthMaxPixels:d})).draw()}},{key:"_getModel",value:function(e){return new o.Model(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new o.Geometry({drawMode:4,attributes:{indices:new Uint16Array([0,1,2,1,4,2,1,3,4,3,5,4]),positions:{value:new Float32Array([0,0,0,-1,0,1,1,-1,1,1,1,0]),size:2}}}),isInstanced:!0}))}},{key:"calculatePositions",value:function(e){var t=this.state.pathTesselator;e.startIndices=t.vertexStarts,e.value=t.get("positions")}},{key:"calculateSegmentTypes",value:function(e){var t=this.state.pathTesselator;e.startIndices=t.vertexStarts,e.value=t.get("segmentTypes")}},{key:"wrapLongitude",get:function(){return!1}}]),p}(n.Layer);exports.default=y,y.layerName="PathLayer",y.defaultProps=g;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/get":"KGqu","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@deck.gl/core":"vvxL","@luma.gl/core":"iuAK","./path-tesselator":"lJX3","./path-layer-vertex.glsl":"NZD1","./path-layer-fragment.glsl":"YKcs"}],"d3f1":[function(require,module,exports) {
"use strict";function e(e,t,x){x=x||2;var i,u,v,y,o,p,a,l=t&&t.length,h=l?t[0]*x:e.length,s=n(e,0,h,x,!0),c=[];if(!s||s.next===s.prev)return c;if(l&&(s=f(e,t,s,x)),e.length>80*x){i=v=e[0],u=y=e[1];for(var Z=x;Z<h;Z+=x)(o=e[Z])<i&&(i=o),(p=e[Z+1])<u&&(u=p),o>v&&(v=o),p>y&&(y=p);a=0!==(a=Math.max(v-i,y-u))?1/a:0}return r(s,c,x,i,u,a),c}function n(e,n,t,r,x){var i,u;if(x===D(e,n,t,r)>0)for(i=n;i<t;i+=r)u=A(i,e[i],e[i+1],u);else for(i=t-r;i>=n;i-=r)u=A(i,e[i],e[i+1],u);return u&&w(u,u.next)&&(B(u),u=u.next),u}function t(e,n){if(!e)return e;n||(n=e);var t,r=e;do{if(t=!1,r.steiner||!w(r,r.next)&&0!==g(r.prev,r,r.next))r=r.next;else{if(B(r),(r=n=r.prev)===r.next)break;t=!0}}while(t||r!==n);return n}function r(e,n,f,y,o,p,a){if(e){!a&&p&&l(e,y,o,p);for(var h,s,c=e;e.prev!==e.next;)if(h=e.prev,s=e.next,p?i(e,y,o,p):x(e))n.push(h.i/f),n.push(e.i/f),n.push(s.i/f),B(e),e=s.next,c=s.next;else if((e=s)===c){a?1===a?r(e=u(t(e),n,f),n,f,y,o,p,2):2===a&&v(e,n,f,y,o,p):r(t(e),n,f,y,o,p,1);break}}}function x(e){var n=e.prev,t=e,r=e.next;if(g(n,t,r)>=0)return!1;for(var x=e.next.next;x!==e.prev;){if(Z(n.x,n.y,t.x,t.y,r.x,r.y,x.x,x.y)&&g(x.prev,x,x.next)>=0)return!1;x=x.next}return!0}function i(e,n,t,r){var x=e.prev,i=e,u=e.next;if(g(x,i,u)>=0)return!1;for(var v=x.x<i.x?x.x<u.x?x.x:u.x:i.x<u.x?i.x:u.x,f=x.y<i.y?x.y<u.y?x.y:u.y:i.y<u.y?i.y:u.y,y=x.x>i.x?x.x>u.x?x.x:u.x:i.x>u.x?i.x:u.x,o=x.y>i.y?x.y>u.y?x.y:u.y:i.y>u.y?i.y:u.y,p=s(v,f,n,t,r),a=s(y,o,n,t,r),l=e.prevZ,h=e.nextZ;l&&l.z>=p&&h&&h.z<=a;){if(l!==e.prev&&l!==e.next&&Z(x.x,x.y,i.x,i.y,u.x,u.y,l.x,l.y)&&g(l.prev,l,l.next)>=0)return!1;if(l=l.prevZ,h!==e.prev&&h!==e.next&&Z(x.x,x.y,i.x,i.y,u.x,u.y,h.x,h.y)&&g(h.prev,h,h.next)>=0)return!1;h=h.nextZ}for(;l&&l.z>=p;){if(l!==e.prev&&l!==e.next&&Z(x.x,x.y,i.x,i.y,u.x,u.y,l.x,l.y)&&g(l.prev,l,l.next)>=0)return!1;l=l.prevZ}for(;h&&h.z<=a;){if(h!==e.prev&&h!==e.next&&Z(x.x,x.y,i.x,i.y,u.x,u.y,h.x,h.y)&&g(h.prev,h,h.next)>=0)return!1;h=h.nextZ}return!0}function u(e,n,r){var x=e;do{var i=x.prev,u=x.next.next;!w(i,u)&&M(i,x,x.next,u)&&k(i,u)&&k(u,i)&&(n.push(i.i/r),n.push(x.i/r),n.push(u.i/r),B(x),B(x.next),x=e=u),x=x.next}while(x!==e);return t(x)}function v(e,n,x,i,u,v){var f=e;do{for(var y=f.next.next;y!==f.prev;){if(f.i!==y.i&&d(f,y)){var o=q(f,y);return f=t(f,f.next),o=t(o,o.next),r(f,n,x,i,u,v),void r(o,n,x,i,u,v)}y=y.next}f=f.next}while(f!==e)}function f(e,r,x,i){var u,v,f,p=[];for(u=0,v=r.length;u<v;u++)(f=n(e,r[u]*i,u<v-1?r[u+1]*i:e.length,i,!1))===f.next&&(f.steiner=!0),p.push(c(f));for(p.sort(y),u=0;u<p.length;u++)o(p[u],x),x=t(x,x.next);return x}function y(e,n){return e.x-n.x}function o(e,n){if(n=p(e,n)){var r=q(n,e);t(n,n.next),t(r,r.next)}}function p(e,n){var t,r=n,x=e.x,i=e.y,u=-1/0;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var v=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(v<=x&&v>u){if(u=v,v===x){if(i===r.y)return r;if(i===r.next.y)return r.next}t=r.x<r.next.x?r:r.next}}r=r.next}while(r!==n);if(!t)return null;if(x===u)return t;var f,y=t,o=t.x,p=t.y,l=1/0;r=t;do{x>=r.x&&r.x>=o&&x!==r.x&&Z(i<p?x:u,i,o,p,i<p?u:x,i,r.x,r.y)&&(f=Math.abs(i-r.y)/(x-r.x),k(r,e)&&(f<l||f===l&&(r.x>t.x||r.x===t.x&&a(t,r)))&&(t=r,l=f)),r=r.next}while(r!==y);return t}function a(e,n){return g(e.prev,e,n.prev)<0&&g(n.next,e,e.next)<0}function l(e,n,t,r){var x=e;do{null===x.z&&(x.z=s(x.x,x.y,n,t,r)),x.prevZ=x.prev,x.nextZ=x.next,x=x.next}while(x!==e);x.prevZ.nextZ=null,x.prevZ=null,h(x)}function h(e){var n,t,r,x,i,u,v,f,y=1;do{for(t=e,e=null,i=null,u=0;t;){for(u++,r=t,v=0,n=0;n<y&&(v++,r=r.nextZ);n++);for(f=y;v>0||f>0&&r;)0!==v&&(0===f||!r||t.z<=r.z)?(x=t,t=t.nextZ,v--):(x=r,r=r.nextZ,f--),i?i.nextZ=x:e=x,x.prevZ=i,i=x;t=r}i.nextZ=null,y*=2}while(u>1);return e}function s(e,n,t,r,x){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-t)*x)|e<<8))|e<<4))|e<<2))|e<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-r)*x)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function c(e){var n=e,t=e;do{(n.x<t.x||n.x===t.x&&n.y<t.y)&&(t=n),n=n.next}while(n!==e);return t}function Z(e,n,t,r,x,i,u,v){return(x-u)*(n-v)-(e-u)*(i-v)>=0&&(e-u)*(r-v)-(t-u)*(n-v)>=0&&(t-u)*(i-v)-(x-u)*(r-v)>=0}function d(e,n){return e.next.i!==n.i&&e.prev.i!==n.i&&!b(e,n)&&(k(e,n)&&k(n,e)&&j(e,n)&&(g(e.prev,e,n.prev)||g(e,n.prev,n))||w(e,n)&&g(e.prev,e,e.next)>0&&g(n.prev,n,n.next)>0)}function g(e,n,t){return(n.y-e.y)*(t.x-n.x)-(n.x-e.x)*(t.y-n.y)}function w(e,n){return e.x===n.x&&e.y===n.y}function M(e,n,t,r){var x=m(g(e,n,t)),i=m(g(e,n,r)),u=m(g(t,r,e)),v=m(g(t,r,n));return x!==i&&u!==v||(!(0!==x||!z(e,t,n))||(!(0!==i||!z(e,r,n))||(!(0!==u||!z(t,e,r))||!(0!==v||!z(t,n,r)))))}function z(e,n,t){return n.x<=Math.max(e.x,t.x)&&n.x>=Math.min(e.x,t.x)&&n.y<=Math.max(e.y,t.y)&&n.y>=Math.min(e.y,t.y)}function m(e){return e>0?1:e<0?-1:0}function b(e,n){var t=e;do{if(t.i!==e.i&&t.next.i!==e.i&&t.i!==n.i&&t.next.i!==n.i&&M(t,t.next,e,n))return!0;t=t.next}while(t!==e);return!1}function k(e,n){return g(e.prev,e,e.next)<0?g(e,n,e.next)>=0&&g(e,e.prev,n)>=0:g(e,n,e.prev)<0||g(e,e.next,n)<0}function j(e,n){var t=e,r=!1,x=(e.x+n.x)/2,i=(e.y+n.y)/2;do{t.y>i!=t.next.y>i&&t.next.y!==t.y&&x<(t.next.x-t.x)*(i-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next}while(t!==e);return r}function q(e,n){var t=new C(e.i,e.x,e.y),r=new C(n.i,n.x,n.y),x=e.next,i=n.prev;return e.next=n,n.prev=e,t.next=x,x.prev=t,r.next=t,t.prev=r,i.next=r,r.prev=i,r}function A(e,n,t,r){var x=new C(e,n,t);return r?(x.next=r.next,x.prev=r,r.next.prev=x,r.next=x):(x.prev=x,x.next=x),x}function B(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function C(e,n,t){this.i=e,this.x=n,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function D(e,n,t,r){for(var x=0,i=n,u=t-r;i<t;i+=r)x+=(e[u]-e[i])*(e[i+1]+e[u+1]),u=i;return x}module.exports=e,module.exports.default=e,e.deviation=function(e,n,t,r){var x=n&&n.length,i=x?n[0]*t:e.length,u=Math.abs(D(e,0,i,t));if(x)for(var v=0,f=n.length;v<f;v++){var y=n[v]*t,o=v<f-1?n[v+1]*t:e.length;u-=Math.abs(D(e,y,o,t))}var p=0;for(v=0;v<r.length;v+=3){var a=r[v]*t,l=r[v+1]*t,h=r[v+2]*t;p+=Math.abs((e[a]-e[h])*(e[l+1]-e[a+1])-(e[a]-e[l])*(e[h+1]-e[a+1]))}return 0===u&&0===p?0:Math.abs((p-u)/u)},e.flatten=function(e){for(var n=e[0][0].length,t={vertices:[],holes:[],dimensions:n},r=0,x=0;x<e.length;x++){for(var i=0;i<e[x].length;i++)for(var u=0;u<n;u++)t.vertices.push(e[x][i][u]);x>0&&(r+=e[x-1].length,t.holes.push(r))}return t};
},{}],"dIsy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.normalize=c,exports.getSurfaceIndices=v;var r=n(require("earcut"));function n(r){return r&&r.__esModule?r:{default:r}}function t(r,n){var t;if("undefined"==typeof Symbol||null==r[Symbol.iterator]){if(Array.isArray(r)||(t=e(r))||n&&r&&"number"==typeof r.length){t&&(r=t);var o=0,i=function(){};return{s:i,n:function(){return o>=r.length?{done:!0}:{done:!1,value:r[o++]}},e:function(r){throw r},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,a=!0,f=!1;return{s:function(){t=r[Symbol.iterator]()},n:function(){var r=t.next();return a=r.done,r},e:function(r){f=!0,u=r},f:function(){try{a||null==t.return||t.return()}finally{if(f)throw u}}}}function e(r,n){if(r){if("string"==typeof r)return o(r,n);var t=Object.prototype.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?o(r,n):void 0}}function o(r,n){(null==n||n>r.length)&&(n=r.length);for(var t=0,e=new Array(n);t<n;t++)e[t]=r[t];return e}function i(r){if(r=r&&r.positions||r,!Array.isArray(r)&&!ArrayBuffer.isView(r))throw new Error("invalid polygon")}function u(r){return r.length>=1&&r[0].length>=2&&Number.isFinite(r[0][0])}function a(r){var n=r[0],t=r[r.length-1];return n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2]}function f(r,n,t,e){for(var o=0;o<n;o++)if(r[t+o]!==r[e-n+o])return!1;return!0}function l(r,n,t,e){for(var o=n,i=t.length,u=0;u<i;u++)for(var f=0;f<e;f++)r[o++]=t[u][f]||0;if(!a(t))for(var l=0;l<e;l++)r[o++]=t[0][l]||0;return o}function s(r,n,t,e){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5?arguments[5]:void 0,u=(i=i||t.length)-o;if(u<=0)return n;for(var a=n,l=0;l<u;l++)r[a++]=t[o+l];if(!f(t,e,o,i))for(var s=0;s<e;s++)r[a++]=t[o+s];return a}function c(r,n){i(r);var e=[],o=[];if(r.positions){var a=r,f=a.positions,c=a.holeIndices;if(c){for(var v=0,h=0;h<=c.length;h++)v=s(e,v,f,n,c[h-1],c[h]),o.push(v);return o.pop(),{positions:e,holeIndices:o}}r=f}if(Number.isFinite(r[0]))return s(e,0,r,n),e;if(!u(r)){var p,d=0,y=t(r);try{for(y.s();!(p=y.n()).done;){d=l(e,d,p.value,n),o.push(d)}}catch(g){y.e(g)}finally{y.f()}return o.pop(),{positions:e,holeIndices:o}}return l(e,0,r,n),e}function v(n,t,e){var o=null;n.holeIndices&&(o=n.holeIndices.map(function(r){return r/t}));var i=n.positions||n;if(e){var u=i.length;i=i.slice();for(var a=[],f=0;f<u;f+=t){a[0]=i[f],a[1]=i[f+1];var l=e(a);i[f]=l[0],i[f+1]=l[1]}}return(0,r.default)(i,o,t)}
},{"earcut":"d3f1"}],"XYVo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=p(require("@babel/runtime/helpers/esm/defineProperty")),t=p(require("@babel/runtime/helpers/esm/classCallCheck")),r=p(require("@babel/runtime/helpers/esm/createClass")),i=p(require("@babel/runtime/helpers/esm/get")),n=p(require("@babel/runtime/helpers/esm/inherits")),o=p(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),u=p(require("@babel/runtime/helpers/esm/getPrototypeOf")),s=c(require("./polygon")),a=require("@deck.gl/core"),l=require("@math.gl/polygon");function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function c(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=i?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=e[n]}return r.default=e,t&&t.set(e,r),r}function p(e){return e&&e.__esModule?e:{default:e}}function y(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=d(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return u=e.done,e},e:function(e){s=!0,o=e},f:function(){try{u||null==r.return||r.return()}finally{if(s)throw o}}}}function d(e,t){if(e){if("string"==typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function b(t){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?v(Object(i),!0).forEach(function(r){(0,e.default)(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):v(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function m(e){var t=g();return function(){var r,i=(0,u.default)(e);if(t){var n=(0,u.default)(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return(0,o.default)(this,r)}}function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var S=function(e){(0,n.default)(a,e);var o=m(a);function a(e){(0,t.default)(this,a);var r=e.fp64,i=e.IndexType,n=void 0===i?Uint32Array:i;return o.call(this,b(b({},e),{},{attributes:{positions:{size:3,type:r?Float64Array:Float32Array},vertexValid:{type:Uint8ClampedArray,size:1},indices:{type:n,size:1}}}))}return(0,r.default)(a,[{key:"get",value:function(e){var t=this.attributes;return"indices"===e?t.indices&&t.indices.subarray(0,this.vertexCount):t[e]}},{key:"updateGeometry",value:function(e){(0,i.default)((0,u.default)(a.prototype),"updateGeometry",this).call(this,e);var t=this.buffers.indices;t&&(this.vertexCount=(t.value||t).length)}},{key:"normalizeGeometry",value:function(e){if(this.normalize){if(e=s.normalize(e,this.positionSize),this.opts.resolution)return(0,l.cutPolygonByGrid)(e.positions||e,e.holeIndices,{size:this.positionSize,gridResolution:this.opts.resolution,edgeTypes:!0});if(this.opts.wrapLongitude)return(0,l.cutPolygonByMercatorBounds)(e.positions||e,e.holeIndices,{size:this.positionSize,maxLatitude:86,edgeTypes:!0})}return e}},{key:"getGeometrySize",value:function(e){if(Array.isArray(e)&&!Number.isFinite(e[0])){var t,r=0,i=y(e);try{for(i.s();!(t=i.n()).done;){var n=t.value;r+=this.getGeometrySize(n)}}catch(o){i.e(o)}finally{i.f()}return r}return(e.positions||e).length/this.positionSize}},{key:"getGeometryFromBuffer",value:function(e){return this.normalize||!this.buffers.indices?(0,i.default)((0,u.default)(a.prototype),"getGeometryFromBuffer",this).call(this,e):function(){return null}}},{key:"updateGeometryAttributes",value:function(e,t){if(Array.isArray(e)&&!Number.isFinite(e[0])){var r,i=y(e);try{for(i.s();!(r=i.n()).done;){var n=r.value,o=this.getGeometrySize(n);t.geometrySize=o,this.updateGeometryAttributes(n,t),t.vertexStart+=o,t.indexStart=this.indexStarts[t.geometryIndex+1]}}catch(u){i.e(u)}finally{i.f()}}else this._updateIndices(e,t),this._updatePositions(e,t),this._updateVertexValid(e,t)}},{key:"_updateIndices",value:function(e,t){var r=t.geometryIndex,i=t.vertexStart,n=t.indexStart,o=this.attributes,u=this.indexStarts,a=this.typedArrayManager,l=o.indices;if(l){var f=n,c=s.getSurfaceIndices(e,this.positionSize,this.opts.preproject);l=a.allocate(l,n+c.length,{copy:!0});for(var p=0;p<c.length;p++)l[f++]=c[p]+i;u[r+1]=n+c.length,o.indices=l}}},{key:"_updatePositions",value:function(e,t){var r=t.vertexStart,i=t.geometrySize,n=this.attributes.positions,o=this.positionSize;if(n)for(var u=e.positions||e,s=r,a=0;a<i;s++,a++){var l=u[a*o],f=u[a*o+1],c=o>2?u[a*o+2]:0;n[3*s]=l,n[3*s+1]=f,n[3*s+2]=c}}},{key:"_updateVertexValid",value:function(e,t){var r=t.vertexStart,i=t.geometrySize,n=this.attributes.vertexValid,o=this.positionSize,u=e&&e.holeIndices;if(e&&e.edgeTypes?n.set(e.edgeTypes,r):n.fill(1,r,r+i),u)for(var s=0;s<u.length;s++)n[r+u[s]/o-1]=0;n[r+i-1]=0}}]),a}(a.Tesselator);exports.default=S;
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/get":"KGqu","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","./polygon":"dIsy","@deck.gl/core":"vvxL","@math.gl/polygon":"bJcr"}],"aSKL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var o="\nattribute vec2 vertexPositions;\nattribute float vertexValid;\n\nuniform bool extruded;\nuniform bool isWireframe;\nuniform float elevationScale;\nuniform float opacity;\n\nvarying vec4 vColor;\nvarying float isValid;\n\nstruct PolygonProps {\n  vec4 fillColors;\n  vec4 lineColors;\n  vec3 positions;\n  vec3 nextPositions;\n  vec3 pickingColors;\n  vec3 positions64Low;\n  vec3 nextPositions64Low;\n  float elevations;\n};\n\nvec3 project_offset_normal(vec3 vector) {\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\n    return normalize(vector * project_uCommonUnitsPerWorldUnit);\n  }\n  return project_normal(vector);\n}\n\nvoid calculatePosition(PolygonProps props) {\n  vec3 pos;\n  vec3 pos64Low;\n  vec3 normal;\n  vec4 colors = isWireframe ? props.lineColors : props.fillColors;\n\n  geometry.worldPosition = props.positions;\n  geometry.worldPositionAlt = props.nextPositions;\n  geometry.pickingColor = props.pickingColors;\n\n#ifdef IS_SIDE_VERTEX\n  pos = mix(props.positions, props.nextPositions, vertexPositions.x);\n  pos64Low = mix(props.positions64Low, props.nextPositions64Low, vertexPositions.x);\n  isValid = vertexValid;\n#else\n  pos = props.positions;\n  pos64Low = props.positions64Low;\n  isValid = 1.0;\n#endif\n\n  if (extruded) {\n    pos.z += props.elevations * vertexPositions.y * elevationScale;\n\n#ifdef IS_SIDE_VERTEX\n    normal = vec3(\n      props.positions.y - props.nextPositions.y + (props.positions64Low.y - props.nextPositions64Low.y),\n      props.nextPositions.x - props.positions.x + (props.nextPositions64Low.x - props.positions64Low.x),\n      0.0);\n    normal = project_offset_normal(normal);\n#else\n    normal = vec3(0.0, 0.0, 1.0);\n#endif\n    geometry.normal = normal;\n  }\n\n  gl_Position = project_position_to_clipspace(pos, pos64Low, vec3(0.), geometry.position);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  if (extruded) {\n    vec3 lightColor = lighting_getLightColor(colors.rgb, project_uCameraPosition, geometry.position.xyz, normal);\n    vColor = vec4(lightColor, colors.a * opacity);\n  } else {\n    vColor = vec4(colors.rgb, colors.a * opacity);\n  }\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n";exports.default=o;
},{}],"mAGb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var o=e(require("./solid-polygon-layer-vertex-main.glsl"));function e(o){return o&&o.__esModule?o:{default:o}}var n="#define SHADER_NAME solid-polygon-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 positions64Low;\nattribute float elevations;\nattribute vec4 fillColors;\nattribute vec4 lineColors;\nattribute vec3 pickingColors;\n\n".concat(o.default,"\n\nvoid main(void) {\n  PolygonProps props;\n\n  props.positions = positions;\n  props.positions64Low = positions64Low;\n  props.elevations = elevations;\n  props.fillColors = fillColors;\n  props.lineColors = lineColors;\n  props.pickingColors = pickingColors;\n\n  calculatePosition(props);\n}\n");exports.default=n;
},{"./solid-polygon-layer-vertex-main.glsl":"aSKL"}],"XZyr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=o(require("./solid-polygon-layer-vertex-main.glsl"));function o(n){return n&&n.__esModule?n:{default:n}}var t="#define SHADER_NAME solid-polygon-layer-vertex-shader-side\n#define IS_SIDE_VERTEX\n\n\nattribute vec3 instancePositions;\nattribute vec3 nextPositions;\nattribute vec3 instancePositions64Low;\nattribute vec3 nextPositions64Low;\nattribute float instanceElevations;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\n".concat(n.default,"\n\nvoid main(void) {\n  PolygonProps props;\n\n  props.positions = instancePositions;\n  props.positions64Low = instancePositions64Low;\n  props.elevations = instanceElevations;\n  props.fillColors = instanceFillColors;\n  props.lineColors = instanceLineColors;\n  props.pickingColors = instancePickingColors;\n  props.nextPositions = nextPositions;\n  props.nextPositions64Low = nextPositions64Low;\n\n  calculatePosition(props);\n}\n");exports.default=t;
},{"./solid-polygon-layer-vertex-main.glsl":"aSKL"}],"mYK0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="#define SHADER_NAME solid-polygon-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\nvarying float isValid;\n\nvoid main(void) {\n  if (isValid < 0.5) {\n    discard;\n  }\n\n  gl_FragColor = vColor;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n";exports.default=n;
},{}],"KN28":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=p(require("@babel/runtime/helpers/esm/classCallCheck")),t=p(require("@babel/runtime/helpers/esm/createClass")),r=p(require("@babel/runtime/helpers/esm/get")),i=p(require("@babel/runtime/helpers/esm/inherits")),s=p(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),o=p(require("@babel/runtime/helpers/esm/getPrototypeOf")),a=require("@deck.gl/core"),n=require("@luma.gl/core"),l=p(require("./polygon-tesselator")),u=p(require("./solid-polygon-layer-vertex-top.glsl")),d=p(require("./solid-polygon-layer-vertex-side.glsl")),c=p(require("./solid-polygon-layer-fragment.glsl"));function p(e){return e&&e.__esModule?e:{default:e}}function f(e){var t=g();return function(){var r,i=(0,o.default)(e);if(t){var a=(0,o.default)(this).constructor;r=Reflect.construct(i,arguments,a)}else r=i.apply(this,arguments);return(0,s.default)(this,r)}}function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var h=[0,0,0,255],v={filled:!0,extruded:!1,wireframe:!1,_normalize:!0,elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:function(e){return e.polygon}},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:h},getLineColor:{type:"accessor",value:h},material:!0},y={enter:function(e,t){return t.length?t.subarray(t.length-e.length):e}},m=function(s){(0,i.default)(g,s);var p=f(g);function g(){return(0,e.default)(this,g),p.apply(this,arguments)}return(0,t.default)(g,[{key:"getShaders",value:function(e){return(0,r.default)((0,o.default)(g.prototype),"getShaders",this).call(this,{vs:e,fs:c.default,defines:{},modules:[a.project32,a.gouraudLighting,a.picking]})}},{key:"initializeState",value:function(){var e=this,t=this.context,r=t.gl,i=t.viewport,s=this.props.coordinateSystem;i.isGeospatial&&s===a.COORDINATE_SYSTEM.DEFAULT&&(s=a.COORDINATE_SYSTEM.LNGLAT),this.setState({numInstances:0,polygonTesselator:new l.default({preproject:s===a.COORDINATE_SYSTEM.LNGLAT&&i.projectFlat,fp64:this.use64bitPositions(),IndexType:!r||(0,n.hasFeatures)(r,n.FEATURES.ELEMENT_INDEX_UINT32)?Uint32Array:Uint16Array})});var o=this.getAttributeManager();o.remove(["instancePickingColors"]),o.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:!0},positions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:y,accessor:"getPolygon",update:this.calculatePositions,noAlloc:!0,shaderAttributes:{positions:{vertexOffset:0,divisor:0},instancePositions:{vertexOffset:0,divisor:1},nextPositions:{vertexOffset:1,divisor:1}}},vertexValid:{size:1,divisor:1,type:5121,update:this.calculateVertexValid,noAlloc:!0},elevations:{size:1,transition:y,accessor:"getElevation",shaderAttributes:{elevations:{divisor:0},instanceElevations:{divisor:1}}},fillColors:{alias:"colors",size:this.props.colorFormat.length,type:5121,normalized:!0,transition:y,accessor:"getFillColor",defaultValue:h,shaderAttributes:{fillColors:{divisor:0},instanceFillColors:{divisor:1}}},lineColors:{alias:"colors",size:this.props.colorFormat.length,type:5121,normalized:!0,transition:y,accessor:"getLineColor",defaultValue:h,shaderAttributes:{lineColors:{divisor:0},instanceLineColors:{divisor:1}}},pickingColors:{size:3,type:5121,accessor:function(t,r){var i=r.index,s=r.target;return e.encodePickingColor(t&&t.__source?t.__source.index:i,s)},shaderAttributes:{pickingColors:{divisor:0},instancePickingColors:{divisor:1}}}})}},{key:"getPickingInfo",value:function(e){var t=(0,r.default)((0,o.default)(g.prototype),"getPickingInfo",this).call(this,e),i=t.index,s=this.props.data;return s[0]&&s[0].__source&&(t.object=s.find(function(e){return e.__source.index===i})),t}},{key:"draw",value:function(e){var t=e.uniforms,r=this.props,i=r.extruded,s=r.filled,o=r.wireframe,a=r.elevationScale,n=this.state,l=n.topModel,u=n.sideModel,d=n.polygonTesselator,c=Object.assign({},t,{extruded:Boolean(i),elevationScale:a});u&&(u.setInstanceCount(d.instanceCount-1),u.setUniforms(c),o&&(u.setDrawMode(3),u.setUniforms({isWireframe:!0}).draw()),s&&(u.setDrawMode(6),u.setUniforms({isWireframe:!1}).draw())),l&&(l.setVertexCount(d.vertexCount),l.setUniforms(c).draw())}},{key:"updateState",value:function(e){(0,r.default)((0,o.default)(g.prototype),"updateState",this).call(this,e),this.updateGeometry(e);var t=e.props,i=e.oldProps,s=e.changeFlags,a=this.getAttributeManager();(s.extensionsChanged||t.filled!==i.filled||t.extruded!==i.extruded)&&(this.state.models&&this.state.models.forEach(function(e){return e.delete()}),this.setState(this._getModels(this.context.gl)),a.invalidateAll())}},{key:"updateGeometry",value:function(e){var t=e.props,r=(e.oldProps,e.changeFlags);if(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getPolygon)){var i=this.state.polygonTesselator,s=t.data.attributes||{};i.updateGeometry({data:t.data,normalize:t._normalize,geometryBuffer:s.getPolygon,buffers:s,getGeometry:t.getPolygon,positionFormat:t.positionFormat,wrapLongitude:t.wrapLongitude,resolution:this.context.viewport.resolution,fp64:this.use64bitPositions(),dataChanged:r.dataChanged}),this.setState({numInstances:i.instanceCount,startIndices:i.vertexStarts}),r.dataChanged||this.getAttributeManager().invalidateAll()}}},{key:"_getModels",value:function(e){var t,r,i=this.props,s=i.id,o=i.filled,a=i.extruded;if(o){var l=this.getShaders(u.default);l.defines.NON_INSTANCED_MODEL=1,t=new n.Model(e,Object.assign({},l,{id:"".concat(s,"-top"),drawMode:4,attributes:{vertexPositions:new Float32Array([0,1])},uniforms:{isWireframe:!1,isSideVertex:!1},vertexCount:0,isIndexed:!0}))}return a&&((r=new n.Model(e,Object.assign({},this.getShaders(d.default),{id:"".concat(s,"-side"),geometry:new n.Geometry({drawMode:1,vertexCount:4,attributes:{vertexPositions:{size:2,value:new Float32Array([1,0,0,0,0,1,1,1])}}}),instanceCount:0,isInstanced:1}))).userData.excludeAttributes={indices:!0}),{models:[r,t].filter(Boolean),topModel:t,sideModel:r}}},{key:"calculateIndices",value:function(e){var t=this.state.polygonTesselator;e.startIndices=t.indexStarts,e.value=t.get("indices")}},{key:"calculatePositions",value:function(e){var t=this.state.polygonTesselator;e.startIndices=t.vertexStarts,e.value=t.get("positions")}},{key:"calculateVertexValid",value:function(e){e.value=this.state.polygonTesselator.get("vertexValid")}},{key:"wrapLongitude",get:function(){return!1}}]),g}(a.Layer);exports.default=m,m.layerName="SolidPolygonLayer",m.defaultProps=v;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/get":"KGqu","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@deck.gl/core":"vvxL","@luma.gl/core":"iuAK","./polygon-tesselator":"XYVo","./solid-polygon-layer-vertex-top.glsl":"mAGb","./solid-polygon-layer-vertex-side.glsl":"XZyr","./solid-polygon-layer-fragment.glsl":"mYK0"}],"kI2N":[function(require,module,exports) {
"use strict";function e(e){for(var t=e.data,r=e.getIndex,a=e.dataRange,n=e.replace,o=a.startRow,l=void 0===o?0:o,d=a.endRow,g=void 0===d?1/0:d,i=t.length,s=i,f=i,v=0;v<i;v++){var c=r(t[v]);if(s>v&&c>=l&&(s=v),c>=g){f=v;break}}for(var h=s,R=f-s!==n.length,p=R&&t.slice(f),u=0;u<n.length;u++)t[h++]=n[u];if(R){for(var w=0;w<p.length;w++)t[h++]=p[w];t.length=h}return{startRow:s,endRow:s+n.length}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.replaceInRange=e;
},{}],"ByLy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=h(require("@babel/runtime/helpers/esm/classCallCheck")),t=h(require("@babel/runtime/helpers/esm/createClass")),r=h(require("@babel/runtime/helpers/esm/inherits")),i=h(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),n=h(require("@babel/runtime/helpers/esm/getPrototypeOf")),a=require("@deck.gl/core"),o=h(require("../solid-polygon-layer/solid-polygon-layer")),l=h(require("../path-layer/path-layer")),s=f(require("../solid-polygon-layer/polygon")),u=require("../utils");function d(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}function f(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var a=i?Object.getOwnPropertyDescriptor(e,n):null;a&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n]}return r.default=e,t&&t.set(e,r),r}function h(e){return e&&e.__esModule?e:{default:e}}function c(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=g(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){l=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(l)throw a}}}}function g(e,t){if(e){if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function y(e){var t=v();return function(){var r,a=(0,n.default)(e);if(t){var o=(0,n.default)(this).constructor;r=Reflect.construct(a,arguments,o)}else r=a.apply(this,arguments);return(0,i.default)(this,r)}}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var m=[0,0,0,255],b=[0,0,0,255],P={stroked:!0,filled:!0,extruded:!1,elevationScale:1,wireframe:!1,_normalize:!0,lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineJointRounded:!1,lineMiterLimit:4,getPolygon:{type:"accessor",value:function(e){return e.polygon}},getFillColor:{type:"accessor",value:b},getLineColor:{type:"accessor",value:m},getLineWidth:{type:"accessor",value:1},getElevation:{type:"accessor",value:1e3},material:!0},L=function(i){(0,r.default)(d,i);var n=y(d);function d(){return(0,e.default)(this,d),n.apply(this,arguments)}return(0,t.default)(d,[{key:"initializeState",value:function(){this.state={paths:[]},this.props.getLineDashArray&&a.log.removed("getLineDashArray","PathStyleExtension")()}},{key:"updateState",value:function(e){var t=this,r=(e.oldProps,e.props,e.changeFlags),i=r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getPolygon);if(i&&Array.isArray(r.dataChanged)){var n=this.state.paths.slice(),a=r.dataChanged.map(function(e){return(0,u.replaceInRange)({data:n,getIndex:function(e){return e.__source.index},dataRange:e,replace:t._getPaths(e)})});this.setState({paths:n,pathsDiff:a})}else i&&this.setState({paths:this._getPaths(),pathsDiff:null})}},{key:"_getPaths",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=this.props,i=r.data,n=r.getPolygon,o=r.positionFormat,l=r._normalize,u=[],d="XY"===o?2:3,f=t.startRow,h=t.endRow,g=(0,a.createIterable)(i,f,h),p=g.iterable,y=g.objectInfo,v=c(p);try{for(v.s();!(e=v.n()).done;){var m=e.value;y.index++;var b=n(m,y);l&&(b=s.normalize(b,d));var P=b.holeIndices,L=b.positions||b;if(P)for(var C=0;C<=P.length;C++){var S=L.slice(P[C-1]||0,P[C]||L.length);u.push(this.getSubLayerRow({path:S},m,y.index))}else u.push(this.getSubLayerRow({path:L},m,y.index))}}catch(x){v.e(x)}finally{v.f()}return u}},{key:"renderLayers",value:function(){var e=this.props,t=e.data,r=e._dataDiff,i=e.stroked,n=e.filled,a=e.extruded,s=e.wireframe,u=e._normalize,d=e.elevationScale,f=e.transitions,h=e.positionFormat,c=this.props,g=c.lineWidthUnits,p=c.lineWidthScale,y=c.lineWidthMinPixels,v=c.lineWidthMaxPixels,b=c.lineJointRounded,P=c.lineMiterLimit,L=c.lineDashJustified,C=this.props,S=C.getFillColor,x=C.getLineColor,w=C.getLineWidth,_=C.getLineDashArray,A=C.getElevation,D=C.getPolygon,R=C.updateTriggers,W=C.material,M=this.state,k=M.paths,O=M.pathsDiff,j=this.getSubLayerClass("fill",o.default),F=this.getSubLayerClass("stroke",l.default),q=this.shouldRenderSubLayer("fill",k)&&new j({_dataDiff:r,extruded:a,elevationScale:d,filled:n,wireframe:s,_normalize:u,getElevation:A,getFillColor:S,getLineColor:a&&s?x:m,material:W,transitions:f},this.getSubLayerProps({id:"fill",updateTriggers:{getPolygon:R.getPolygon,getElevation:R.getElevation,getFillColor:R.getFillColor,lineColors:a&&s,getLineColor:R.getLineColor}}),{data:t,positionFormat:h,getPolygon:D});return[!a&&q,!a&&i&&this.shouldRenderSubLayer("stroke",k)&&new F({_dataDiff:O&&function(){return O},widthUnits:g,widthScale:p,widthMinPixels:y,widthMaxPixels:v,rounded:b,miterLimit:P,dashJustified:L,_pathType:"loop",transitions:f&&{getWidth:f.getLineWidth,getColor:f.getLineColor,getPath:f.getPolygon},getColor:this.getSubLayerAccessor(x),getWidth:this.getSubLayerAccessor(w),getDashArray:this.getSubLayerAccessor(_)},this.getSubLayerProps({id:"stroke",updateTriggers:{getWidth:R.getLineWidth,getColor:R.getLineColor,getDashArray:R.getLineDashArray}}),{data:k,positionFormat:h,getPath:function(e){return e.path}}),a&&q]}}]),d}(a.CompositeLayer);exports.default=L,L.layerName="PolygonLayer",L.defaultProps=P;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@deck.gl/core":"vvxL","../solid-polygon-layer/solid-polygon-layer":"KN28","../path-layer/path-layer":"Exm7","../solid-polygon-layer/polygon":"dIsy","../utils":"kI2N"}],"Rrkn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getGeojsonFeatures=t,exports.separateGeojsonFeatures=o,exports.validateGeometry=a;var e=require("@deck.gl/core");function t(t){if(Array.isArray(t))return t;switch(e.log.assert(t.type,"GeoJSON does not have type"),t.type){case"Feature":return[t];case"FeatureCollection":return e.log.assert(Array.isArray(t.features),"GeoJSON does not have features array"),t.features;default:return[{geometry:t}]}}function o(t,o){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a={pointFeatures:[],lineFeatures:[],polygonFeatures:[],polygonOutlineFeatures:[]},s=n.startRow,i=void 0===s?0:s,u=n.endRow,y=void 0===u?t.length:u,g=i;g<y;g++){var c=t[g];e.log.assert(c&&c.geometry,"GeoJSON does not have geometry");var l=c.geometry;if("GeometryCollection"===l.type){e.log.assert(Array.isArray(l.geometries),"GeoJSON does not have geometries array");for(var p=l.geometries,f=0;f<p.length;f++){r(p[f],a,o,c,g)}}else r(l,a,o,c,g)}return a}function r(t,o,r,n,s){var i=t.type,u=t.coordinates,y=o.pointFeatures,g=o.lineFeatures,c=o.polygonFeatures,l=o.polygonOutlineFeatures;if(a(i,u))switch(i){case"Point":y.push(r({geometry:t},n,s));break;case"MultiPoint":u.forEach(function(e){y.push(r({geometry:{type:"Point",coordinates:e}},n,s))});break;case"LineString":g.push(r({geometry:t},n,s));break;case"MultiLineString":u.forEach(function(e){g.push(r({geometry:{type:"LineString",coordinates:e}},n,s))});break;case"Polygon":c.push(r({geometry:t},n,s)),u.forEach(function(e){l.push(r({geometry:{type:"LineString",coordinates:e}},n,s))});break;case"MultiPolygon":u.forEach(function(e){c.push(r({geometry:{type:"Polygon",coordinates:e}},n,s)),e.forEach(function(e){l.push(r({geometry:{type:"LineString",coordinates:e}},n,s))})})}else e.log.warn("".concat(i," coordinates are malformed"))()}var n={Point:1,MultiPoint:2,LineString:2,MultiLineString:3,Polygon:3,MultiPolygon:4};function a(t,o){var r=n[t];for(e.log.assert(r,"Unknown GeoJSON type ".concat(t));o&&--r>0;)o=o[0];return o&&Number.isFinite(o[0])}
},{"@deck.gl/core":"vvxL"}],"qWvc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=d(require("@babel/runtime/helpers/esm/classCallCheck")),t=d(require("@babel/runtime/helpers/esm/createClass")),i=d(require("@babel/runtime/helpers/esm/inherits")),r=d(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),n=d(require("@babel/runtime/helpers/esm/getPrototypeOf")),a=require("@deck.gl/core"),o=d(require("../scatterplot-layer/scatterplot-layer")),s=d(require("../path-layer/path-layer")),l=d(require("../solid-polygon-layer/solid-polygon-layer")),u=require("../utils"),g=require("./geojson");function d(e){return e&&e.__esModule?e:{default:e}}function h(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=c(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw a}}}}function c(e,t){if(e){if("string"==typeof e)return f(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function y(e){var t=p();return function(){var i,a=(0,n.default)(e);if(t){var o=(0,n.default)(this).constructor;i=Reflect.construct(a,arguments,o)}else i=a.apply(this,arguments);return(0,r.default)(this,i)}}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var L=[0,0,0,255],b=[0,0,0,255],S={stroked:!0,filled:!0,extruded:!1,wireframe:!1,lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineJointRounded:!1,lineMiterLimit:4,elevationScale:1,pointRadiusUnits:"meters",pointRadiusScale:1,pointRadiusMinPixels:0,pointRadiusMaxPixels:Number.MAX_SAFE_INTEGER,getLineColor:{type:"accessor",value:L},getFillColor:{type:"accessor",value:b},getRadius:{type:"accessor",value:1},getLineWidth:{type:"accessor",value:1},getElevation:{type:"accessor",value:1e3},material:!0};function v(e){return e.geometry.coordinates}var m=function(r){(0,i.default)(d,r);var n=y(d);function d(){return(0,e.default)(this,d),n.apply(this,arguments)}return(0,t.default)(d,[{key:"initializeState",value:function(){this.state={features:{}},this.props.getLineDashArray&&a.log.removed("getLineDashArray","PathStyleExtension")()}},{key:"updateState",value:function(e){var t=e.props,i=e.changeFlags;if(i.dataChanged){var r=(0,g.getGeojsonFeatures)(t.data),n=this.getSubLayerRow.bind(this);if(Array.isArray(i.dataChanged)){var a=this.state.features,o={},s={};for(var l in a)o[l]=a[l].slice(),s[l]=[];var d,c=h(i.dataChanged);try{for(c.s();!(d=c.n()).done;){var f=d.value,y=(0,g.separateGeojsonFeatures)(r,n,f);for(var p in a)s[p].push((0,u.replaceInRange)({data:o[p],getIndex:function(e){return e.__source.index},dataRange:f,replace:y[p]}))}}catch(L){c.e(L)}finally{c.f()}this.setState({features:o,featuresDiff:s})}else this.setState({features:(0,g.separateGeojsonFeatures)(r,n),featuresDiff:{}})}}},{key:"renderLayers",value:function(){var e=this.state,t=e.features,i=e.featuresDiff,r=t.pointFeatures,n=t.lineFeatures,a=t.polygonFeatures,u=t.polygonOutlineFeatures,g=this.props,d=g.stroked,h=g.filled,c=g.extruded,f=g.wireframe,y=g.material,p=g.transitions,b=this.props,S=b.lineWidthUnits,m=b.lineWidthScale,C=b.lineWidthMinPixels,x=b.lineWidthMaxPixels,A=b.lineJointRounded,P=b.lineMiterLimit,R=b.pointRadiusUnits,F=b.pointRadiusScale,W=b.pointRadiusMinPixels,M=b.pointRadiusMaxPixels,w=b.elevationScale,D=b.lineDashJustified,_=this.props,E=_.getLineColor,k=_.getFillColor,I=_.getRadius,q=_.getLineWidth,j=_.getLineDashArray,O=_.getElevation,U=_.updateTriggers,T=this.getSubLayerClass("polygons-fill",l.default),G=this.getSubLayerClass("polygons-stroke",s.default),J=this.getSubLayerClass("line-strings",s.default),N=this.getSubLayerClass("points",o.default),H=this.shouldRenderSubLayer("polygons-fill",a)&&new T({_dataDiff:i.polygonFeatures&&function(){return i.polygonFeatures},extruded:c,elevationScale:w,filled:h,wireframe:f,material:y,getElevation:this.getSubLayerAccessor(O),getFillColor:this.getSubLayerAccessor(k),getLineColor:this.getSubLayerAccessor(c&&f?E:L),transitions:p&&{getPolygon:p.geometry,getElevation:p.getElevation,getFillColor:p.getFillColor,getLineColor:p.getLineColor}},this.getSubLayerProps({id:"polygons-fill",updateTriggers:{getElevation:U.getElevation,getFillColor:U.getFillColor,lineColors:c&&f,getLineColor:U.getLineColor}}),{data:a,getPolygon:v});return[!c&&H,!c&&d&&this.shouldRenderSubLayer("polygons-stroke",u)&&new G({_dataDiff:i.polygonOutlineFeatures&&function(){return i.polygonOutlineFeatures},widthUnits:S,widthScale:m,widthMinPixels:C,widthMaxPixels:x,rounded:A,miterLimit:P,dashJustified:D,getColor:this.getSubLayerAccessor(E),getWidth:this.getSubLayerAccessor(q),getDashArray:this.getSubLayerAccessor(j),transitions:p&&{getPath:p.geometry,getColor:p.getLineColor,getWidth:p.getLineWidth}},this.getSubLayerProps({id:"polygons-stroke",updateTriggers:{getColor:U.getLineColor,getWidth:U.getLineWidth,getDashArray:U.getLineDashArray}}),{data:u,getPath:v}),this.shouldRenderSubLayer("linestrings",n)&&new J({_dataDiff:i.lineFeatures&&function(){return i.lineFeatures},widthUnits:S,widthScale:m,widthMinPixels:C,widthMaxPixels:x,rounded:A,miterLimit:P,dashJustified:D,getColor:this.getSubLayerAccessor(E),getWidth:this.getSubLayerAccessor(q),getDashArray:this.getSubLayerAccessor(j),transitions:p&&{getPath:p.geometry,getColor:p.getLineColor,getWidth:p.getLineWidth}},this.getSubLayerProps({id:"line-strings",updateTriggers:{getColor:U.getLineColor,getWidth:U.getLineWidth,getDashArray:U.getLineDashArray}}),{data:n,getPath:v}),this.shouldRenderSubLayer("points",r)&&new N({_dataDiff:i.pointFeatures&&function(){return i.pointFeatures},stroked:d,filled:h,radiusUnits:R,radiusScale:F,radiusMinPixels:W,radiusMaxPixels:M,lineWidthUnits:S,lineWidthScale:m,lineWidthMinPixels:C,lineWidthMaxPixels:x,getFillColor:this.getSubLayerAccessor(k),getLineColor:this.getSubLayerAccessor(E),getRadius:this.getSubLayerAccessor(I),getLineWidth:this.getSubLayerAccessor(q),transitions:p&&{getPosition:p.geometry,getFillColor:p.getFillColor,getLineColor:p.getLineColor,getRadius:p.getRadius,getLineWidth:p.getLineWidth}},this.getSubLayerProps({id:"points",updateTriggers:{getFillColor:U.getFillColor,getLineColor:U.getLineColor,getRadius:U.getRadius,getLineWidth:U.getLineWidth}}),{data:r,getPosition:v,highlightedObjectIndex:this._getHighlightedIndex(r)}),c&&H]}},{key:"_getHighlightedIndex",value:function(e){var t=this.props.highlightedObjectIndex;return Number.isFinite(t)?e.findIndex(function(e){return e.__source.index===t}):null}}]),d}(a.CompositeLayer);exports.default=m,m.layerName="GeoJsonLayer",m.defaultProps=S;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@deck.gl/core":"vvxL","../scatterplot-layer/scatterplot-layer":"s9mM","../path-layer/path-layer":"Exm7","../solid-polygon-layer/solid-polygon-layer":"KN28","../utils":"kI2N","./geojson":"Rrkn"}],"h6ea":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var o="#define SHADER_NAME multi-icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float buffer;\nuniform bool sdf;\nuniform float alphaCutoff;\nuniform bool shouldDrawBackground;\nuniform vec3 backgroundColor;\n\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying float vGamma;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  if (!picking_uActive) {\n    float alpha = texture2D(iconsTexture, vTextureCoords).a;\n    if (sdf) {\n      alpha = smoothstep(buffer - vGamma, buffer + vGamma, alpha);\n    }\n    float a = alpha * vColor.a;\n    \n    if (a < alphaCutoff) {\n      if (shouldDrawBackground) {\n        gl_FragColor = vec4(backgroundColor, vColor.a);\n      } else {\n        discard;\n      }\n    } else {\n      if (shouldDrawBackground) {\n        gl_FragColor = vec4(mix(backgroundColor, vColor.rgb, alpha), vColor.a * opacity);\n      } else {\n        gl_FragColor = vec4(vColor.rgb, a * opacity);\n      }\n      DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n    }\n  } else {\n    DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n  }\n}\n";exports.default=o;
},{}],"oA4s":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("@babel/runtime/helpers/esm/classCallCheck")),t=s(require("@babel/runtime/helpers/esm/createClass")),r=s(require("@babel/runtime/helpers/esm/get")),a=s(require("@babel/runtime/helpers/esm/inherits")),n=s(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),o=s(require("@babel/runtime/helpers/esm/getPrototypeOf")),u=s(require("../../icon-layer/icon-layer")),l=s(require("./multi-icon-layer-fragment.glsl"));function s(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=c();return function(){var r,a=(0,o.default)(e);if(t){var u=(0,o.default)(this).constructor;r=Reflect.construct(a,arguments,u)}else r=a.apply(this,arguments);return(0,n.default)(this,r)}}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var f=.2,d=.75,p=[],y={backgroundColor:{type:"color",value:null,optional:!0},getIconOffsets:{type:"accessor",value:function(e){return e.offsets}},alphaCutoff:.001},m=function(n){(0,a.default)(s,n);var u=i(s);function s(){return(0,e.default)(this,s),u.apply(this,arguments)}return(0,t.default)(s,[{key:"getShaders",value:function(){return Object.assign({},(0,r.default)((0,o.default)(s.prototype),"getShaders",this).call(this),{inject:{"vs:#decl":"\n  uniform float gamma;\n  varying float vGamma;\n","vs:#main-end":"\n  vGamma = gamma / (sizeScale * iconSize.y);\n"},fs:l.default})}},{key:"initializeState",value:function(){var e=this;(0,r.default)((0,o.default)(s.prototype),"initializeState",this).call(this),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:5121,size:3,accessor:function(t,r){var a=r.index,n=r.target;return e.encodePickingColor(a,n)}}})}},{key:"updateState",value:function(e){(0,r.default)((0,o.default)(s.prototype),"updateState",this).call(this,e);var t=e.oldProps,a=e.props;if(a.backgroundColor!==t.backgroundColor){var n=Array.isArray(a.backgroundColor)?a.backgroundColor.map(function(e){return e/255}).slice(0,3):null;this.setState({backgroundColor:n})}}},{key:"draw",value:function(e){var t=e.uniforms,a=this.props.sdf,n=this.state.backgroundColor,u=Array.isArray(n);(0,r.default)((0,o.default)(s.prototype),"draw",this).call(this,{uniforms:Object.assign({},t,{buffer:d,gamma:f,sdf:Boolean(a),backgroundColor:n||[0,0,0],shouldDrawBackground:u})})}},{key:"getInstanceOffset",value:function(e){var t=this;return e?Array.from(e).map(function(e){return(0,r.default)((0,o.default)(s.prototype),"getInstanceOffset",t).call(t,e)}):p}},{key:"getInstanceColorMode",value:function(e){return 1}},{key:"getInstanceIconFrame",value:function(e){var t=this;return e?Array.from(e).map(function(e){return(0,r.default)((0,o.default)(s.prototype),"getInstanceIconFrame",t).call(t,e)}):p}}]),s}(u.default);exports.default=m,m.layerName="MultiIconLayer",m.defaultProps=y;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/get":"KGqu","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","../../icon-layer/icon-layer":"NHB3","./multi-icon-layer-fragment.glsl":"h6ea"}],"XggI":[function(require,module,exports) {
"use strict";module.exports=i,module.exports.default=i;var t=1e20;function i(t,i,s,h,e,r){this.fontSize=t||24,this.buffer=void 0===i?3:i,this.cutoff=h||.25,this.fontFamily=e||"sans-serif",this.fontWeight=r||"normal",this.radius=s||8;var a=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.d=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Int16Array(a),this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function s(t,i,s,e,r,a,n){for(var o=0;o<i;o++){for(var f=0;f<s;f++)e[f]=t[f*i+o];for(h(e,r,a,n,s),f=0;f<s;f++)t[f*i+o]=r[f]}for(f=0;f<s;f++){for(o=0;o<i;o++)e[o]=t[f*i+o];for(h(e,r,a,n,i),o=0;o<i;o++)t[f*i+o]=Math.sqrt(r[o])}}function h(i,s,h,e,r){h[0]=0,e[0]=-t,e[1]=+t;for(var a=1,n=0;a<r;a++){for(var o=(i[a]+a*a-(i[h[n]]+h[n]*h[n]))/(2*a-2*h[n]);o<=e[n];)n--,o=(i[a]+a*a-(i[h[n]]+h[n]*h[n]))/(2*a-2*h[n]);h[++n]=a,e[n]=o,e[n+1]=+t}for(a=0,n=0;a<r;a++){for(;e[n+1]<a;)n++;s[a]=(a-h[n])*(a-h[n])+i[h[n]]}}i.prototype.draw=function(i){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(i,this.buffer,this.middle);for(var h=this.ctx.getImageData(0,0,this.size,this.size),e=new Uint8ClampedArray(this.size*this.size),r=0;r<this.size*this.size;r++){var a=h.data[4*r+3]/255;this.gridOuter[r]=1===a?0:0===a?t:Math.pow(Math.max(0,.5-a),2),this.gridInner[r]=1===a?t:0===a?0:Math.pow(Math.max(0,a-.5),2)}for(s(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),s(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),r=0;r<this.size*this.size;r++){var n=this.gridOuter[r]-this.gridInner[r];e[r]=Math.max(0,Math.min(255,Math.round(255-255*(n/this.radius+this.cutoff))))}return e};
},{}],"lEi6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nextPowOfTwo=a,exports.buildMapping=i,exports.autoWrapping=u,exports.transformParagraph=h,exports.getTextFromBuffer=v;var t=require("@deck.gl/core");function r(t,r){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=e(t))||r&&t&&"number"==typeof t.length){n&&(t=n);var o=0,a=function(){};return{s:a,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,f=!0,l=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return f=t.done,t},e:function(t){l=!0,i=t},f:function(){try{f||null==n.return||n.return()}finally{if(l)throw i}}}}function e(t,r){if(t){if("string"==typeof t)return n(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?n(t,r):void 0}}function n(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var o=32;function a(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function i(t){var e,n=t.characterSet,o=t.getFontWidth,i=t.fontHeight,f=t.buffer,l=t.maxCanvasWidth,s=t.mapping,u=void 0===s?{}:s,c=t.xOffset,h=void 0===c?0:c,v=t.yOffset,g=void 0===v?0:v,d=0,w=h,y=0,p=r(n);try{for(p.s();!(e=p.n()).done;){var m=e.value;if(!u[m]){var x=o(m,y++);w+x+2*f>l&&(w=0,d++),u[m]={x:w+f,y:g+d*(i+2*f)+f,width:x,height:i},w+=x+2*f}}}catch(O){p.e(O)}finally{p.f()}var b=i+2*f;return{mapping:u,xOffset:w,yOffset:g+d*b,canvasHeight:a(g+(d+1)*b)}}function f(t,r){for(var e=0,n=0;n<t.length;n++){var o=t[n],a=null,i=r&&r[o];i&&(a=i.width),e+=a}return e}function l(t,r,e){for(var n=[],o=0,a=0,i=0;i<t.length;i++){var l=f(t[i],e);a+l>r&&(o<i&&n.push(t.slice(o,i)),o=i,a=0),a+=l}return o<t.length&&n.push(t.slice(o)),{rows:n,lastRowStartCharIndex:o,lastRowOffsetLeft:a}}function s(t,r,e){for(var n=[],o=0,a=0,i=0,s=null,u=0;u<t.length;u++)if(" "===t[u]?(s=t[u],a=u+1):u+1<t.length&&" "===t[u+1]||u+1===t.length?(s=t.slice(a,u+1),a=u+1):s=null,s){var c=f(s,e);if(i+c>r){var h=a-s.length;if(o<h&&(n.push(t.slice(o,h)),o=h,i=0),c>r){var v=l(s,r,e);v.rows.length>1&&(n=n.concat(v.rows.slice(0,v.rows.length-1))),o+=v.lastRowStartCharIndex,c=v.lastRowOffsetLeft}}i+=c}return o<t.length&&n.push(t.slice(o)),{rows:n,lastRowStartCharIndex:o,lastRowOffsetLeft:i}}function u(t,r,e,n){return"break-all"===r?l(t,e,n):s(t,e,n)}function c(r,e){for(var n=0,a=0,i=new Array(r.length),f=0;f<r.length;f++){var l=r[f],s=e[l];s?(a||(a=s.height),i[f]=n+s.width/2,n+=s.width):(t.log.warn("Missing character: ".concat(l," (").concat(l.codePointAt(0),")"))(),i[f]=n,n+=o)}return{leftOffsets:i,rowWidth:n,rowHeight:a}}function h(t,e,n,o,a){t=Array.from(t);for(var i=new Array(t.length),f=("break-word"===n||"break-all"===n)&&isFinite(o)&&o>0,l=[0,0],s=0,h=0,v=0;v<=t.length;v++){var g=t[v],d=void 0;if("\n"!==g&&void 0!==g||(d=t.slice(h,v)),d){var w,y=r(f?u(d,n,o,a).rows:[d]);try{for(y.s();!(w=y.n()).done;){var p,m=c(w.value,a,e),x=m.rowWidth,b=m.rowHeight,O=r(m.leftOffsets);try{for(O.s();!(p=O.n()).done;){var S=p.value;i[h++]={x:S,y:s+b/2,rowWidth:x}}}catch(A){O.e(A)}finally{O.f()}s+=b*e,l[0]=f?o:Math.max(l[0],x)}}catch(A){y.e(A)}finally{y.f()}}"\n"===g&&(i[h++]={x:0,y:0,rowWidth:0})}return l[1]=s,{characters:i,size:l}}function v(t){var r=t.value,e=t.length,n=t.stride,o=t.offset,a=t.startIndices,i=r.BYTES_PER_ELEMENT,f=n?n/i:1,l=o?o/i:0,s=a[e]||Math.floor((r.length-l-i)/f)+1,u=new Array(e),c=r;if(f>1||l>0){c=new r.constructor(s);for(var h=0;h<s;h++)c[h]=r[h*f+l]}for(var v=0;v<e;v++){var g=a[v],d=a[v+1]||s;u[v]=String.fromCodePoint.apply(null,c.subarray(g,d))}return{texts:u,characterCount:s}}
},{"@deck.gl/core":"vvxL"}],"QqKM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("@babel/runtime/helpers/esm/classCallCheck")),t=r(require("@babel/runtime/helpers/esm/createClass"));function r(e){return e&&e.__esModule?e:{default:e}}var i=function(){function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;(0,e.default)(this,r),this.limit=t,this.clear()}return(0,t.default)(r,[{key:"clear",value:function(){this._cache={},this._order=[]}},{key:"get",value:function(e){var t=this._cache[e];return t&&(this._deleteOrder(e),this._appendOrder(e)),t}},{key:"set",value:function(e,t){this._cache[e]?(this.delete(e),this._cache[e]=t,this._appendOrder(e)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[e]=t,this._appendOrder(e))}},{key:"delete",value:function(e){this._cache[e]&&(this._deleteCache(e),this._deleteOrder(e))}},{key:"_deleteCache",value:function(e){delete this._cache[e]}},{key:"_deleteOrder",value:function(e){var t=this._order.findIndex(function(t){return t===e});t>=0&&this._order.splice(t,1)}},{key:"_appendOrder",value:function(e){this._order.push(e)}}]),r}();exports.default=i;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph"}],"dOP1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.DEFAULT_RADIUS=exports.DEFAULT_CUTOFF=exports.DEFAULT_BUFFER=exports.DEFAULT_FONT_SIZE=exports.DEFAULT_FONT_WEIGHT=exports.DEFAULT_FONT_FAMILY=exports.DEFAULT_CHAR_SET=void 0;var t=u(require("@babel/runtime/helpers/esm/defineProperty")),e=u(require("@babel/runtime/helpers/esm/classCallCheck")),r=u(require("@babel/runtime/helpers/esm/createClass")),n=require("@luma.gl/core"),a=u(require("@mapbox/tiny-sdf")),i=require("./utils"),o=u(require("./lru-cache"));function u(t){return t&&t.__esModule?t:{default:t}}function f(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=s(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){u=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw i}}}}function s(t,e){if(t){if("string"==typeof t)return c(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(t,e):void 0}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function h(){for(var t=[],e=32;e<128;e++)t.push(String.fromCharCode(e));return t}var l=h();exports.DEFAULT_CHAR_SET=l;var p="Monaco, monospace";exports.DEFAULT_FONT_FAMILY=p;var d="normal";exports.DEFAULT_FONT_WEIGHT=d;var g=64;exports.DEFAULT_FONT_SIZE=g;var y=2;exports.DEFAULT_BUFFER=y;var v=.25;exports.DEFAULT_CUTOFF=v;var _=3;exports.DEFAULT_RADIUS=_;var m=10242,x=10243,F=33071,T=1024,A=.9,b=1.2,E=3,S=new o.default(E),D=["fontFamily","fontWeight","characterSet","fontSize","sdf","buffer","cutoff","radius"];function O(t,e){var r=S.get(t);if(!r)return e;var n=[],a=r.mapping,i=Object.keys(a);i=new Set(i);var o=e;return o instanceof Array&&(o=new Set(o)),o.forEach(function(t){i.has(t)||n.push(t)}),n}function U(t,e){for(var r=0;r<t.length;r++)e.data[4*r+3]=t[r]}function w(t,e,r,n){t.font="".concat(n," ").concat(r,"px ").concat(e),t.fillStyle="#000",t.textBaseline="baseline",t.textAlign="left"}var k=function(){function o(t){(0,e.default)(this,o),this.gl=t,this.props={fontFamily:p,fontWeight:d,characterSet:l,fontSize:g,buffer:y,sdf:!1,cutoff:v,radius:_},this._key=null,this._texture=new n.Texture2D(this.gl)}return(0,r.default)(o,[{key:"finalize",value:function(){this._texture.delete()}},{key:"setProps",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};D.forEach(function(r){r in e&&(t.props[r]=e[r])});var r=this._key;this._key=this._getKey();var n=O(this._key,this.props.characterSet),a=S.get(this._key);if(a&&0===n.length)this._key!==r&&this._updateTexture(a);else{var i=this._generateFontAtlas(this._key,n,a);this._updateTexture(i),S.set(this._key,i)}}},{key:"_updateTexture",value:function(e){var r,n=e.data,a=e.width,i=e.height;this._texture.width===a&&this._texture.height===i||this._texture.resize({width:a,height:i}),this._texture.setImageData({data:n,width:a,height:i,parameters:(r={},(0,t.default)(r,m,F),(0,t.default)(r,x,F),r)}),this._texture.generateMipmap()}},{key:"_generateFontAtlas",value:function(t,e,r){var n=this.props,o=n.fontFamily,u=n.fontWeight,s=n.fontSize,c=n.buffer,h=n.sdf,l=n.radius,p=n.cutoff,d=r&&r.data;d||((d=document.createElement("canvas")).width=T);var g=d.getContext("2d");w(g,o,s,u);var y=(0,i.buildMapping)(Object.assign({getFontWidth:function(t){return g.measureText(t).width},fontHeight:s*b,buffer:c,characterSet:e,maxCanvasWidth:T},r&&{mapping:r.mapping,xOffset:r.xOffset,yOffset:r.yOffset})),v=y.mapping,_=y.canvasHeight,m=y.xOffset,x=y.yOffset;if(d.height!==_){var F=g.getImageData(0,0,d.width,d.height);d.height=_,g.putImageData(F,0,0)}if(w(g,o,s,u),h){var E,S=new a.default(s,c,l,p,o,u),D=g.getImageData(0,0,S.size,S.size),O=f(e);try{for(O.s();!(E=O.n()).done;){var k=E.value;U(S.draw(k),D),g.putImageData(D,v[k].x-c,v[k].y-c)}}catch(z){O.e(z)}finally{O.f()}}else{var I,L=f(e);try{for(L.s();!(I=L.n()).done;){var C=I.value;g.fillText(C,v[C].x,v[C].y+s*A)}}catch(z){L.e(z)}finally{L.f()}}return{xOffset:m,yOffset:x,mapping:v,data:d,width:d.width,height:d.height}}},{key:"_getKey",value:function(){var t=this.props,e=t.gl,r=t.fontFamily,n=t.fontWeight,a=t.fontSize,i=t.buffer,o=t.sdf,u=t.radius,f=t.cutoff;return o?"".concat(e," ").concat(r," ").concat(n," ").concat(a," ").concat(i," ").concat(u," ").concat(f):"".concat(e," ").concat(r," ").concat(n," ").concat(a," ").concat(i)}},{key:"texture",get:function(){return this._texture}},{key:"mapping",get:function(){var t=S.get(this._key);return t&&t.mapping}},{key:"scale",get:function(){return b}}]),o}();exports.default=k;
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@luma.gl/core":"iuAK","@mapbox/tiny-sdf":"XggI","./utils":"lEi6","./lru-cache":"QqKM"}],"pt2s":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=d(require("@babel/runtime/helpers/esm/slicedToArray")),t=d(require("@babel/runtime/helpers/esm/defineProperty")),r=d(require("@babel/runtime/helpers/esm/classCallCheck")),n=d(require("@babel/runtime/helpers/esm/createClass")),i=d(require("@babel/runtime/helpers/esm/get")),a=d(require("@babel/runtime/helpers/esm/inherits")),o=d(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),s=d(require("@babel/runtime/helpers/esm/getPrototypeOf")),l=require("@deck.gl/core"),u=d(require("./multi-icon-layer/multi-icon-layer")),f=p(require("./font-atlas-manager")),c=require("./utils");function g(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return g=function(){return e},e}function p(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=g();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=n?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}function d(e){return e&&e.__esModule?e:{default:e}}function h(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=y(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw a}}}}function y(e,t){if(e){if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(e,t):void 0}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function v(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?m(Object(n),!0).forEach(function(r){(0,t.default)(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function x(e){var t=O();return function(){var r,n=(0,s.default)(e);if(t){var i=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,o.default)(this,r)}}function O(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var A={fontSize:f.DEFAULT_FONT_SIZE,buffer:f.DEFAULT_BUFFER,sdf:!1,radius:f.DEFAULT_RADIUS,cutoff:f.DEFAULT_CUTOFF},S={start:1,middle:0,end:-1},P={top:1,center:0,bottom:-1},T=[0,0,0,255],_=1,w=["fontSize","buffer","sdf","radius","cutoff"],z={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,backgroundColor:{type:"color",value:null,optional:!0},characterSet:f.DEFAULT_CHAR_SET,fontFamily:f.DEFAULT_FONT_FAMILY,fontWeight:f.DEFAULT_FONT_WEIGHT,lineHeight:_,fontSettings:{},wordBreak:"word-break",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:function(e){return e.text}},getPosition:{type:"accessor",value:function(e){return e.position}},getColor:{type:"accessor",value:T},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]}},C=function(t){(0,a.default)(g,t);var o=x(g);function g(){return(0,r.default)(this,g),o.apply(this,arguments)}return(0,n.default)(g,[{key:"initializeState",value:function(){this.state={styleVersion:0,fontAtlasManager:new f.default(this.context.gl)}}},{key:"updateState",value:function(e){var t=e.props,r=e.oldProps,n=e.changeFlags,i=this._fontChanged(r,t);i&&this._updateFontAtlas(r,t);var a=i||t.lineHeight!==r.lineHeight||t.wordBreak!==r.wordBreak||t.maxWidth!==r.maxWidth;(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getText))&&this._updateText(),a&&this.setState({styleVersion:this.state.styleVersion+1})}},{key:"finalizeState",value:function(){(0,i.default)((0,s.default)(g.prototype),"finalizeState",this).call(this),this.state.fontAtlasManager.finalize()}},{key:"getPickingInfo",value:function(e){var t=e.info;return Object.assign(t,{object:t.index>=0?this.props.data[t.index]:null})}},{key:"_updateFontAtlas",value:function(e,t){var r=t.characterSet,n=t.fontSettings,i=t.fontFamily,a=t.fontWeight;this.state.fontAtlasManager.setProps(Object.assign({},A,n,{characterSet:r,fontFamily:i,fontWeight:a})),this.setNeedsRedraw(!0)}},{key:"_fontChanged",value:function(e,t){if(e.fontFamily!==t.fontFamily||e.characterSet!==t.characterSet||e.fontWeight!==t.fontWeight)return!0;if(e.fontSettings===t.fontSettings)return!1;var r=e.fontSettings||{},n=t.fontSettings||{};return w.some(function(e){return r[e]!==n[e]})}},{key:"_updateText",value:function(){var e,t=this.props.data,r=t.attributes&&t.attributes.getText,n=this.props.getText,i=t.startIndices;if(r&&i){var a=(0,c.getTextFromBuffer)(v(v({},ArrayBuffer.isView(r)?{value:r}:r),{},{length:t.length,startIndices:i})),o=a.texts;e=a.characterCount,n=function(e,t){var r=t.index;return o[r]}}else{var s=(0,l.createIterable)(t),u=s.iterable,f=s.objectInfo;i=[0],e=0;var g,p=h(u);try{for(p.s();!(g=p.n()).done;){var d=g.value;f.index++;var y=n(d,f)||"";e+=Array.from(y).length,i.push(e)}}catch(b){p.e(b)}finally{p.f()}}this.setState({getText:n,startIndices:i,numInstances:e})}},{key:"getIconOffsets",value:function(t,r){var n,i=this.state.fontAtlasManager.mapping,a=this.state.getText,o=this.props,s=o.wordBreak,l=o.maxWidth,u=o.lineHeight,f=o.getTextAnchor,g=o.getAlignmentBaseline,p=a(t,r)||"",d=(0,c.transformParagraph)(p,u,s,l,i),y=d.characters,b=(0,e.default)(d.size,2),m=b[0],v=b[1],x=S["function"==typeof f?f(t,r):f],O=P["function"==typeof g?g(t,r):g],A=new Array(2*y.length),T=0,_=h(y);try{for(_.s();!(n=_.n()).done;){var w=n.value,z=w.rowWidth,C=w.x,j=w.y,F=(1-x)*(m-z)/2;A[T++]=(x-1)*m/2+F+C,A[T++]=(O-1)*v/2+j}}catch(I){_.e(I)}finally{_.f()}return A}},{key:"renderLayers",value:function(){var e=this.state,t=e.startIndices,r=e.numInstances,n=e.getText,i=e.fontAtlasManager,a=i.scale,o=i.texture,s=i.mapping,l=e.styleVersion,f=this.props,c=f.data,g=f._dataDiff,p=f.backgroundColor,d=f.getPosition,h=f.getColor,y=f.getSize,b=f.getAngle,m=f.getPixelOffset,v=f.billboard,x=f.fontSettings,O=f.sizeScale,A=f.sizeUnits,S=f.sizeMinPixels,P=f.sizeMaxPixels,T=f.transitions,_=f.updateTriggers,w=this.getIconOffsets.bind(this);return new(this.getSubLayerClass("characters",u.default))({sdf:x.sdf,iconAtlas:o,iconMapping:s,backgroundColor:p,getPosition:d,getColor:h,getSize:y,getAngle:b,getPixelOffset:m,billboard:v,sizeScale:O*a,sizeUnits:A,sizeMinPixels:S*a,sizeMaxPixels:P*a,transitions:T&&{getPosition:T.getPosition,getAngle:T.getAngle,getColor:T.getColor,getSize:T.getSize,getPixelOffset:T.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{getIcon:_.getText,getPosition:_.getPosition,getAngle:_.getAngle,getColor:_.getColor,getSize:_.getSize,getPixelOffset:_.getPixelOffset,getIconOffsets:{getText:_.getText,getTextAnchor:_.getTextAnchor,getAlignmentBaseline:_.getAlignmentBaseline,styleVersion:l}}}),{data:c,_dataDiff:g,startIndices:t,numInstances:r,getIconOffsets:w,getIcon:n})}}]),g}(l.CompositeLayer);exports.default=C,C.layerName="TextLayer",C.defaultProps=z;
},{"@babel/runtime/helpers/esm/slicedToArray":"TBeo","@babel/runtime/helpers/esm/defineProperty":"iDM3","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/get":"KGqu","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@deck.gl/core":"vvxL","./multi-icon-layer/multi-icon-layer":"oA4s","./font-atlas-manager":"dOP1","./utils":"lEi6"}],"aWVN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"ArcLayer",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"BitmapLayer",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"IconLayer",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"LineLayer",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"PointCloudLayer",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"ScatterplotLayer",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"ColumnLayer",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"GridCellLayer",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"PathLayer",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"PolygonLayer",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(exports,"GeoJsonLayer",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(exports,"TextLayer",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"SolidPolygonLayer",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(exports,"_MultiIconLayer",{enumerable:!0,get:function(){return d.default}});var e=b(require("./arc-layer/arc-layer")),r=b(require("./bitmap-layer/bitmap-layer")),t=b(require("./icon-layer/icon-layer")),n=b(require("./line-layer/line-layer")),l=b(require("./point-cloud-layer/point-cloud-layer")),o=b(require("./scatterplot-layer/scatterplot-layer")),u=b(require("./column-layer/column-layer")),a=b(require("./column-layer/grid-cell-layer")),i=b(require("./path-layer/path-layer")),y=b(require("./polygon-layer/polygon-layer")),c=b(require("./geojson-layer/geojson-layer")),f=b(require("./text-layer/text-layer")),p=b(require("./solid-polygon-layer/solid-polygon-layer")),d=b(require("./text-layer/multi-icon-layer/multi-icon-layer"));function b(e){return e&&e.__esModule?e:{default:e}}
},{"./arc-layer/arc-layer":"x0jA","./bitmap-layer/bitmap-layer":"hMcC","./icon-layer/icon-layer":"NHB3","./line-layer/line-layer":"RubV","./point-cloud-layer/point-cloud-layer":"cUWd","./scatterplot-layer/scatterplot-layer":"s9mM","./column-layer/column-layer":"Gz3O","./column-layer/grid-cell-layer":"zas9","./path-layer/path-layer":"Exm7","./polygon-layer/polygon-layer":"ByLy","./geojson-layer/geojson-layer":"qWvc","./text-layer/text-layer":"pt2s","./solid-polygon-layer/solid-polygon-layer":"KN28","./text-layer/multi-icon-layer/multi-icon-layer":"oA4s"}],"t17F":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=l(require("@babel/runtime/helpers/esm/classCallCheck")),t=l(require("@babel/runtime/helpers/esm/inherits")),r=l(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),u=l(require("@babel/runtime/helpers/esm/getPrototypeOf")),n=require("@deck.gl/layers");function l(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=c();return function(){var n,l=(0,u.default)(e);if(t){var a=(0,u.default)(this).constructor;n=Reflect.construct(l,arguments,a)}else n=l.apply(this,arguments);return(0,r.default)(this,n)}}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var i=function(r){(0,t.default)(n,r);var u=a(n);function n(){return(0,e.default)(this,n),u.apply(this,arguments)}return n}(n.ArcLayer);exports.default=i,i.layerName="GreatCircleLayer",i.defaultProps={getHeight:{type:"accessor",value:0},greatCircle:!0};
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@deck.gl/layers":"aWVN"}],"gHRv":[function(require,module,exports) {
var define;
var global = arguments[3];
var i,t=arguments[3];!function(t,n){"function"==typeof i&&i.amd?i([],n):"function"==typeof require&&"object"==typeof module&&module&&module.exports?module.exports=n():(t.dcodeIO=t.dcodeIO||{}).Long=n()}(this,function(){"use strict";function i(i,t,n){this.low=0|i,this.high=0|t,this.unsigned=!!n}function t(i){return!0===(i&&i.__isLong__)}i.prototype.__isLong__,Object.defineProperty(i.prototype,"__isLong__",{value:!0,enumerable:!1,configurable:!1}),i.isLong=t;var n={},e={};function s(i,t){var s,h,u;return t?(u=0<=(i>>>=0)&&i<256)&&(h=e[i])?h:(s=r(i,(0|i)<0?-1:0,!0),u&&(e[i]=s),s):(u=-128<=(i|=0)&&i<128)&&(h=n[i])?h:(s=r(i,i<0?-1:0,!1),u&&(n[i]=s),s)}function h(i,t){if(isNaN(i)||!isFinite(i))return t?v:c;if(t){if(i<0)return v;if(i>=a)return b}else{if(i<=-l)return E;if(i+1>=l)return p}return i<0?h(-i,t).neg():r(i%f|0,i/f|0,t)}function r(t,n,e){return new i(t,n,e)}i.fromInt=s,i.fromNumber=h,i.fromBits=r;var u=Math.pow;function o(i,t,n){if(0===i.length)throw Error("empty string");if("NaN"===i||"Infinity"===i||"+Infinity"===i||"-Infinity"===i)return c;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var e;if((e=i.indexOf("-"))>0)throw Error("interior hyphen");if(0===e)return o(i.substring(1),t,n).neg();for(var s=h(u(n,8)),r=c,g=0;g<i.length;g+=8){var f=Math.min(8,i.length-g),a=parseInt(i.substring(g,g+f),n);if(f<8){var l=h(u(n,f));r=r.mul(l).add(h(a))}else r=(r=r.mul(s)).add(h(a))}return r.unsigned=t,r}function g(t){return t instanceof i?t:"number"==typeof t?h(t):"string"==typeof t?o(t):r(t.low,t.high,t.unsigned)}i.fromString=o,i.fromValue=g;var f=4294967296,a=f*f,l=a/2,d=s(1<<24),c=s(0);i.ZERO=c;var v=s(0,!0);i.UZERO=v;var m=s(1);i.ONE=m;var w=s(1,!0);i.UONE=w;var N=s(-1);i.NEG_ONE=N;var p=r(-1,2147483647,!1);i.MAX_VALUE=p;var b=r(-1,-1,!0);i.MAX_UNSIGNED_VALUE=b;var E=r(0,-2147483648,!1);i.MIN_VALUE=E;var q=i.prototype;return q.toInt=function(){return this.unsigned?this.low>>>0:this.low},q.toNumber=function(){return this.unsigned?(this.high>>>0)*f+(this.low>>>0):this.high*f+(this.low>>>0)},q.toString=function(i){if((i=i||10)<2||36<i)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(E)){var t=h(i),n=this.div(t),e=n.mul(t).sub(this);return n.toString(i)+e.toInt().toString(i)}return"-"+this.neg().toString(i)}for(var s=h(u(i,6),this.unsigned),r=this,o="";;){var g=r.div(s),f=(r.sub(g.mul(s)).toInt()>>>0).toString(i);if((r=g).isZero())return f+o;for(;f.length<6;)f="0"+f;o=""+f+o}},q.getHighBits=function(){return this.high},q.getHighBitsUnsigned=function(){return this.high>>>0},q.getLowBits=function(){return this.low},q.getLowBitsUnsigned=function(){return this.low>>>0},q.getNumBitsAbs=function(){if(this.isNegative())return this.eq(E)?64:this.neg().getNumBitsAbs();for(var i=0!=this.high?this.high:this.low,t=31;t>0&&0==(i&1<<t);t--);return 0!=this.high?t+33:t+1},q.isZero=function(){return 0===this.high&&0===this.low},q.isNegative=function(){return!this.unsigned&&this.high<0},q.isPositive=function(){return this.unsigned||this.high>=0},q.isOdd=function(){return 1==(1&this.low)},q.isEven=function(){return 0==(1&this.low)},q.equals=function(i){return t(i)||(i=g(i)),(this.unsigned===i.unsigned||this.high>>>31!=1||i.high>>>31!=1)&&(this.high===i.high&&this.low===i.low)},q.eq=q.equals,q.notEquals=function(i){return!this.eq(i)},q.neq=q.notEquals,q.lessThan=function(i){return this.comp(i)<0},q.lt=q.lessThan,q.lessThanOrEqual=function(i){return this.comp(i)<=0},q.lte=q.lessThanOrEqual,q.greaterThan=function(i){return this.comp(i)>0},q.gt=q.greaterThan,q.greaterThanOrEqual=function(i){return this.comp(i)>=0},q.gte=q.greaterThanOrEqual,q.compare=function(i){if(t(i)||(i=g(i)),this.eq(i))return 0;var n=this.isNegative(),e=i.isNegative();return n&&!e?-1:!n&&e?1:this.unsigned?i.high>>>0>this.high>>>0||i.high===this.high&&i.low>>>0>this.low>>>0?-1:1:this.sub(i).isNegative()?-1:1},q.comp=q.compare,q.negate=function(){return!this.unsigned&&this.eq(E)?E:this.not().add(m)},q.neg=q.negate,q.add=function(i){t(i)||(i=g(i));var n=this.high>>>16,e=65535&this.high,s=this.low>>>16,h=65535&this.low,u=i.high>>>16,o=65535&i.high,f=i.low>>>16,a=0,l=0,d=0,c=0;return d+=(c+=h+(65535&i.low))>>>16,l+=(d+=s+f)>>>16,a+=(l+=e+o)>>>16,a+=n+u,r((d&=65535)<<16|(c&=65535),(a&=65535)<<16|(l&=65535),this.unsigned)},q.subtract=function(i){return t(i)||(i=g(i)),this.add(i.neg())},q.sub=q.subtract,q.multiply=function(i){if(this.isZero())return c;if(t(i)||(i=g(i)),i.isZero())return c;if(this.eq(E))return i.isOdd()?E:c;if(i.eq(E))return this.isOdd()?E:c;if(this.isNegative())return i.isNegative()?this.neg().mul(i.neg()):this.neg().mul(i).neg();if(i.isNegative())return this.mul(i.neg()).neg();if(this.lt(d)&&i.lt(d))return h(this.toNumber()*i.toNumber(),this.unsigned);var n=this.high>>>16,e=65535&this.high,s=this.low>>>16,u=65535&this.low,o=i.high>>>16,f=65535&i.high,a=i.low>>>16,l=65535&i.low,v=0,m=0,w=0,N=0;return w+=(N+=u*l)>>>16,m+=(w+=s*l)>>>16,w&=65535,m+=(w+=u*a)>>>16,v+=(m+=e*l)>>>16,m&=65535,v+=(m+=s*a)>>>16,m&=65535,v+=(m+=u*f)>>>16,v+=n*l+e*a+s*f+u*o,r((w&=65535)<<16|(N&=65535),(v&=65535)<<16|(m&=65535),this.unsigned)},q.mul=q.multiply,q.divide=function(i){if(t(i)||(i=g(i)),i.isZero())throw Error("division by zero");if(this.isZero())return this.unsigned?v:c;var n,e,s;if(this.unsigned){if(i.unsigned||(i=i.toUnsigned()),i.gt(this))return v;if(i.gt(this.shru(1)))return w;s=v}else{if(this.eq(E))return i.eq(m)||i.eq(N)?E:i.eq(E)?m:(n=this.shr(1).div(i).shl(1)).eq(c)?i.isNegative()?m:N:(e=this.sub(i.mul(n)),s=n.add(e.div(i)));if(i.eq(E))return this.unsigned?v:c;if(this.isNegative())return i.isNegative()?this.neg().div(i.neg()):this.neg().div(i).neg();if(i.isNegative())return this.div(i.neg()).neg();s=c}for(e=this;e.gte(i);){n=Math.max(1,Math.floor(e.toNumber()/i.toNumber()));for(var r=Math.ceil(Math.log(n)/Math.LN2),o=r<=48?1:u(2,r-48),f=h(n),a=f.mul(i);a.isNegative()||a.gt(e);)a=(f=h(n-=o,this.unsigned)).mul(i);f.isZero()&&(f=m),s=s.add(f),e=e.sub(a)}return s},q.div=q.divide,q.modulo=function(i){return t(i)||(i=g(i)),this.sub(this.div(i).mul(i))},q.mod=q.modulo,q.not=function(){return r(~this.low,~this.high,this.unsigned)},q.and=function(i){return t(i)||(i=g(i)),r(this.low&i.low,this.high&i.high,this.unsigned)},q.or=function(i){return t(i)||(i=g(i)),r(this.low|i.low,this.high|i.high,this.unsigned)},q.xor=function(i){return t(i)||(i=g(i)),r(this.low^i.low,this.high^i.high,this.unsigned)},q.shiftLeft=function(i){return t(i)&&(i=i.toInt()),0==(i&=63)?this:i<32?r(this.low<<i,this.high<<i|this.low>>>32-i,this.unsigned):r(0,this.low<<i-32,this.unsigned)},q.shl=q.shiftLeft,q.shiftRight=function(i){return t(i)&&(i=i.toInt()),0==(i&=63)?this:i<32?r(this.low>>>i|this.high<<32-i,this.high>>i,this.unsigned):r(this.high>>i-32,this.high>=0?0:-1,this.unsigned)},q.shr=q.shiftRight,q.shiftRightUnsigned=function(i){if(t(i)&&(i=i.toInt()),0===(i&=63))return this;var n=this.high;return i<32?r(this.low>>>i|n<<32-i,n>>>i,this.unsigned):r(32===i?n:n>>>i-32,0,this.unsigned)},q.shru=q.shiftRightUnsigned,q.toSigned=function(){return this.unsigned?r(this.low,this.high,!1):this},q.toUnsigned=function(){return this.unsigned?this:r(this.low,this.high,!0)},q.toBytes=function(i){return i?this.toBytesLE():this.toBytesBE()},q.toBytesLE=function(){var i=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24&255,255&i,i>>>8&255,i>>>16&255,i>>>24&255]},q.toBytesBE=function(){var i=this.high,t=this.low;return[i>>>24&255,i>>>16&255,i>>>8&255,255&i,t>>>24&255,t>>>16&255,t>>>8&255,255&t]},i});
},{}],"KfST":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.IJToST=i,exports.STToUV=f,exports.FaceUVToXYZ=c,exports.XYZToLngLat=l,exports.toHilbertQuadkey=d,exports.FromHilbertQuadKey=g;var r=e(require("@babel/runtime/helpers/esm/slicedToArray")),t=e(require("long"));function e(r){return r&&r.__esModule?r:{default:r}}var n=3,a=30,o=2*a+1,u=180/Math.PI;function i(r,t,e){var n=1<<t;return[(r[0]+e[0])/n,(r[1]+e[1])/n]}function s(r){return r>=.5?1/3*(4*r*r-1):1/3*(1-4*(1-r)*(1-r))}function f(r){return[s(r[0]),s(r[1])]}function c(t,e){var n=(0,r.default)(e,2),a=n[0],o=n[1];switch(t){case 0:return[1,a,o];case 1:return[-a,1,o];case 2:return[-a,-o,1];case 3:return[-1,-o,-a];case 4:return[o,-1,-a];case 5:return[o,a,-1];default:throw new Error("Invalid face")}}function l(t){var e=(0,r.default)(t,3),n=e[0],a=e[1],o=e[2],i=Math.atan2(o,Math.sqrt(n*n+a*a));return[Math.atan2(a,n)*u,i*u]}function d(r){for(var e=t.default.fromString(r,!0,10).toString(2);e.length<n+o;)e="0"+e;for(var a=e.lastIndexOf("1"),u=e.substring(0,3),i=e.substring(3,a),s=i.length/2,f=t.default.fromString(u,!0,2).toString(10),c=t.default.fromString(i,!0,2).toString(4);c.length<s;)c="0"+c;return"".concat(f,"/").concat(c)}function v(r,t,e,n){if(0===n){1===e&&(t[0]=r-1-t[0],t[1]=r-1-t[1]);var a=t[0];t[0]=t[1],t[1]=a}}function g(r){for(var t,e=r.split("/"),n=parseInt(e[0],10),a=e[1],o=a.length,u=[0,0],i=o-1;i>=0;i--){t=o-i;var s=a[i],f=0,c=0;"1"===s?c=1:"2"===s?(f=1,c=1):"3"===s&&(f=1);var l=Math.pow(2,t-1);v(l,u,f,c),u[0]+=l*f,u[1]+=l*c}if(n%2==1){var d=u[0];u[0]=u[1],u[1]=d}return{face:n,ij:u,level:t}}
},{"@babel/runtime/helpers/esm/slicedToArray":"TBeo","long":"gHRv"}],"fMOc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getS2QuadKey=u,exports.getS2Polygon=i;var e=require("./s2-geometry"),r=t(require("long"));function t(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.padEnd(16,"0");return r.default.fromString(t,16)}var n=100;function a(r){for(var t=r.face,o=r.ij,a=r.level,u=[[0,0],[0,1],[1,1],[1,0],[0,0]],i=Math.max(1,Math.ceil(n*Math.pow(2,-a))),f=new Float64Array(4*i*2+2),l=0,c=0;c<4;c++)for(var d=u[c].slice(0),s=u[c+1],g=(s[0]-d[0])/i,v=(s[1]-d[1])/i,y=0;y<i;y++){d[0]+=g,d[1]+=v;var p=(0,e.IJToST)(o,a,d),S=(0,e.STToUV)(p),T=(0,e.FaceUVToXYZ)(t,S),x=(0,e.XYZToLngLat)(T);f[l++]=x[0],f[l++]=x[1]}return f[l++]=f[0],f[l++]=f[1],f}function u(r){if("string"==typeof r){if(r.indexOf("/")>0)return r;r=o(r)}return(0,e.toHilbertQuadkey)(r.toString())}function i(r){var t=u(r);return a((0,e.FromHilbertQuadKey)(t))}
},{"./s2-geometry":"KfST","long":"gHRv"}],"kpkx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("@babel/runtime/helpers/esm/classCallCheck")),t=s(require("@babel/runtime/helpers/esm/createClass")),r=s(require("@babel/runtime/helpers/esm/inherits")),i=s(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),l=s(require("@babel/runtime/helpers/esm/getPrototypeOf")),n=require("@deck.gl/core"),o=require("@deck.gl/layers"),a=require("./s2-utils");function s(e){return e&&e.__esModule?e:{default:e}}function u(e){var t=d();return function(){var r,n=(0,l.default)(e);if(t){var o=(0,l.default)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var c=Object.assign({getS2Token:{type:"accessor",value:function(e){return e.token}}},o.PolygonLayer.defaultProps),f=function(i){(0,r.default)(n,i);var l=u(n);function n(){return(0,e.default)(this,n),l.apply(this,arguments)}return(0,t.default)(n,[{key:"renderLayers",value:function(){var e=this.props,t=e.data,r=e.getS2Token,i=this.props,l=i.elevationScale,n=i.extruded,s=i.wireframe,u=i.filled,d=i.stroked,c=i.lineWidthUnits,f=i.lineWidthScale,g=i.lineWidthMinPixels,h=i.lineWidthMaxPixels,p=i.lineJointRounded,y=i.lineMiterLimit,m=i.lineDashJustified,L=i.getElevation,v=i.getFillColor,b=i.getLineColor,C=i.getLineWidth,P=i.getLineDashArray,x=this.props,W=x.updateTriggers,S=x.material;return new(this.getSubLayerClass("cell",o.PolygonLayer))({filled:u,wireframe:s,extruded:n,elevationScale:l,stroked:d,lineWidthUnits:c,lineWidthScale:f,lineWidthMinPixels:g,lineWidthMaxPixels:h,lineJointRounded:p,lineMiterLimit:y,lineDashJustified:m,material:S,getElevation:L,getFillColor:v,getLineColor:b,getLineWidth:C,getLineDashArray:P},this.getSubLayerProps({id:"cell",updateTriggers:{getElevation:W.getElevation,getFillColor:W.getFillColor,getLineColor:W.getLineColor,getLineWidth:W.getLineWidth,getLineDashArray:W.getLineDashArray}}),{data:t,_normalize:!1,positionFormat:"XY",getPolygon:function(e,t){return(0,a.getS2Polygon)(r(e,t))}})}}]),n}(n.CompositeLayer);exports.default=f,f.layerName="S2Layer",f.defaultProps=c;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@deck.gl/core":"vvxL","@deck.gl/layers":"aWVN","./s2-utils":"fMOc"}],"p0GF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("@babel/runtime/regenerator")),t=s(require("@babel/runtime/helpers/esm/asyncToGenerator")),r=s(require("@babel/runtime/helpers/esm/classCallCheck")),i=s(require("@babel/runtime/helpers/esm/createClass")),n=require("@deck.gl/core");function s(e){return e&&e.__esModule?e:{default:e}}var a=function(){function s(e){var t=e.x,i=e.y,n=e.z,a=e.onTileLoad,o=e.onTileError;(0,r.default)(this,s),this.x=t,this.y=i,this.z=n,this.isVisible=!1,this.isSelected=!1,this.parent=null,this.children=[],this.content=null,this._isLoaded=!1,this._isCancelled=!1,this.onTileLoad=a,this.onTileError=o}return(0,i.default)(s,[{key:"_loadData",value:function(){var r=(0,t.default)(e.default.mark(function t(r,i){var n,s,a,o,l,u,d,h;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.x,s=this.y,a=this.z,o=this.bbox,this._abortController=new AbortController,l=this._abortController.signal,e.next=5,i.scheduleRequest(this,function(e){return e.isSelected?1:-1});case 5:if(u=e.sent){e.next=9;break}return this._isCancelled=!0,e.abrupt("return");case 9:if(!this._isCancelled){e.next=12;break}return u.done(),e.abrupt("return");case 12:return e.prev=12,e.next=15,r({x:n,y:s,z:a,bbox:o,signal:l});case 15:d=e.sent,e.next=21;break;case 18:e.prev=18,e.t0=e.catch(12),h=e.t0||!0;case 21:return e.prev=21,u.done(),this._isCancelled&&!d?this._isLoaded=!1:(this._isLoaded=!0,this._isCancelled=!1),e.finish(21);case 25:if(this._isLoaded){e.next=27;break}return e.abrupt("return");case 27:h?this.onTileError(h,this):(this.content=d,this.onTileLoad(this));case 28:case"end":return e.stop()}},t,this,[[12,18,21,25]])}));return function(e,t){return r.apply(this,arguments)}}()},{key:"loadData",value:function(e,t){var r=this;e&&(this._isCancelled=!1,this._loader=this._loadData(e,t),this._loader.finally(function(){r._loader=void 0}))}},{key:"abort",value:function(){this.isLoaded||(this._isCancelled=!0,this._abortController.abort())}},{key:"data",get:function(){return this._isLoaded?this.content:this._loader}},{key:"isLoaded",get:function(){return this._isLoaded}},{key:"isLoading",get:function(){return Boolean(this._loader)}},{key:"isCancelled",get:function(){return this._isCancelled}},{key:"byteLength",get:function(){var e=this.content?this.content.byteLength:0;return Number.isFinite(e)||n.log.error("byteLength not defined in tile data")(),e}}]),s}();exports.default=a;
},{"@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@deck.gl/core":"vvxL"}],"PWOf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getOSMTileIndices=f;var e=o(require("@babel/runtime/helpers/esm/classCallCheck")),t=o(require("@babel/runtime/helpers/esm/createClass")),n=require("@math.gl/culling"),r=require("math.gl"),i=require("./utils");function o(e){return e&&e.__esModule?e:{default:e}}function l(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return l=e.done,e},e:function(e){u=!0,o=e},f:function(){try{l||null==n.return||n.return()}finally{if(u)throw o}}}}function s(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var a=512,c=3,h=function(){function o(t,n,r){(0,e.default)(this,o),this.x=t,this.y=n,this.z=r}return(0,t.default)(o,[{key:"update",value:function(e){var t=e.viewport,n=e.cullingVolume,r=e.elevationBounds,i=e.minZ,o=e.maxZ,s=e.offset,u=e.project,a=this.getBoundingVolume(r,s,u);if(n.computeVisibility(a)<0)return!1;if(!this.childVisible){var c=this.z;if(c<o&&c>=i){var h=a.distanceTo(t.cameraPosition)*t.scale/t.height;c+=Math.floor(Math.log2(h))}if(c>=o)return this.selected=!0,!0}this.selected=!1,this.childVisible=!0;var f,d=l(this.children);try{for(d.s();!(f=d.n()).done;){f.value.update(e)}}catch(m){d.e(m)}finally{d.f()}return!0}},{key:"getSelected",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(this.selected&&e.push(this),this._children){var t,n=l(this._children);try{for(n.s();!(t=n.n()).done;){t.value.getSelected(e)}}catch(r){n.e(r)}finally{n.f()}}return e}},{key:"getBoundingVolume",value:function(e,t,o){if(o){var l=(0,i.osmTile2lngLat)(this.x,this.y,this.z),s=(0,i.osmTile2lngLat)(this.x+1,this.y+1,this.z),u=(0,i.osmTile2lngLat)(this.x+.5,this.y+.5,this.z);l.z=e[1],s.z=e[1],u.z=e[0];var c=o(l),h=o(s),f=new r.Vector3(o(u)),d=Math.max(f.distance(c),f.distance(h));return new n.BoundingSphere(f,d)}var m=Math.pow(2,this.z),v=a/m,g=this.x*v+t*a,y=a-(this.y+1)*v;return new n.AxisAlignedBoundingBox([g,y,e[0]],[g+v,y+v,e[1]])}},{key:"children",get:function(){if(!this._children){var e=2*this.x,t=2*this.y,n=this.z+1;this._children=[new o(e,t,n),new o(e,t+1,n),new o(e+1,t,n),new o(e+1,t+1,n)]}return this._children}}]),o}();function f(e,t,r){var i=e.resolution?e.projectPosition:null,o=Object.values(e.getFrustumPlanes()).map(function(e){var t=e.normal,r=e.distance;return new n.Plane(t.clone().negate(),r)}),l=new n.CullingVolume(o),s=e.distanceScales.unitsPerMeter[2],u=r&&r[0]*s||0,a=r&&r[1]*s||0,f=e.pitch<=60?t:0,d=new h(0,0,0),m={viewport:e,project:i,cullingVolume:l,elevationBounds:[u,a],minZ:f,maxZ:t,offset:0};if(d.update(m),e.subViewports&&e.subViewports.length>1){for(m.offset=-1;d.update(m)&&!(--m.offset<-c););for(m.offset=1;d.update(m)&&!(++m.offset>c););}return d.getSelected()}
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@math.gl/culling":"jXqX","math.gl":"xAaq","./utils":"WGBA"}],"WGBA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getURLFromTemplate=i,exports.osmTile2lngLat=s,exports.tileToBoundingBox=p,exports.getTileIndices=M,exports.urlType=void 0;var t=r(require("@babel/runtime/helpers/esm/slicedToArray")),e=require("./tile-2d-traversal");function r(t){return t&&t.__esModule?t:{default:t}}var a=512,n=[-1/0,-1/0,1/0,1/0],u={type:"url",value:"",validate:function(t){return"string"==typeof t||Array.isArray(t)&&t.every(function(t){return"string"==typeof t})},equals:function(t,e){if(t===e)return!0;if(!Array.isArray(t)||!Array.isArray(e))return!1;var r=t.length;if(r!==e.length)return!1;for(var a=0;a<r;a++)if(t[a]!==e[a])return!1;return!0}};function i(t,e){if(!t||!t.length)return null;Array.isArray(t)&&(t=t[Math.abs(e.x+e.y)%t.length]);var r=e.x,a=e.y,n=e.z;return t.replace("{x}",r).replace("{y}",a).replace("{z}",n).replace("{-y}",Math.pow(2,n)-a-1)}function o(e,r,a){var n;if(r&&2===r.length){var u=(0,t.default)(r,2),i=u[0],o=u[1],l=e.getBounds({z:i}),f=e.getBounds({z:o});n=[Math.min(l[0],f[0]),Math.min(l[1],f[1]),Math.max(l[2],f[2]),Math.max(l[3],f[3])]}else n=e.getBounds();return[Math.max(n[0],a[0]),Math.max(n[1],a[1]),Math.min(n[2],a[2]),Math.min(n[3],a[3])]}function l(e,r){var n=(0,t.default)(e,2),u=n[0],i=n[1];return[u*r/a,i*r/a]}function f(t){return Math.pow(2,t)}function s(t,e,r){var a=f(r),n=t/a*360-180,u=Math.PI-2*Math.PI*e/a;return[n,180/Math.PI*Math.atan(.5*(Math.exp(u)-Math.exp(-u)))]}function h(t,e,r){var n=f(r);return[t/n*a,e/n*a]}function p(e,r,a,n){if(e.isGeospatial){var u=s(r,a,n),i=(0,t.default)(u,2),o=i[0],l=i[1],f=s(r+1,a+1,n),p=(0,t.default)(f,2);return{west:o,north:l,east:p[0],south:p[1]}}var d=h(r,a,n),M=(0,t.default)(d,2),v=M[0],c=M[1],m=h(r+1,a+1,n),y=(0,t.default)(m,2);return{left:v,top:c,right:y[0],bottom:y[1]}}function d(e,r,a){for(var n=o(e,null,a),u=f(r),i=l([n[0],n[1]],u),s=(0,t.default)(i,2),h=s[0],p=s[1],d=l([n[2],n[3]],u),M=(0,t.default)(d,2),v=M[0],c=M[1],m=[],y=Math.floor(h);y<v;y++)for(var x=Math.floor(p);x<c;x++)m.push({x:y,y:x,z:r});return m}function M(t){var r=t.viewport,u=t.maxZoom,i=t.minZoom,o=t.zRange,l=t.extent,f=t.tileSize,s=void 0===f?a:f,h=Math.round(r.zoom+Math.log2(a/s));if(Number.isFinite(i)&&h<i){if(!l)return[];h=i}return Number.isFinite(u)&&h>u&&(h=u),r.isGeospatial?(0,e.getOSMTileIndices)(r,h,o,l||n):d(r,h,l||n)}exports.urlType=u;
},{"@babel/runtime/helpers/esm/slicedToArray":"TBeo","./tile-2d-traversal":"PWOf"}],"eaHx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.STRATEGY_DEFAULT=exports.STRATEGY_REPLACE=exports.STRATEGY_NEVER=void 0;var e=s(require("@babel/runtime/helpers/esm/slicedToArray")),t=s(require("@babel/runtime/helpers/esm/classCallCheck")),i=s(require("@babel/runtime/helpers/esm/createClass")),r=s(require("./tile-2d-header")),a=require("./utils"),n=require("@loaders.gl/loader-utils");function s(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=l(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,s=!0,o=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return s=e.done,e},e:function(e){o=!0,n=e},f:function(){try{s||null==i.return||i.return()}finally{if(o)throw n}}}}function l(e,t){if(e){if("string"==typeof e)return u(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}var h=0,c=1,f=3,d=4,v=5,y="never";exports.STRATEGY_NEVER=y;var m="no-overlap";exports.STRATEGY_REPLACE=m;var _="best-available";exports.STRATEGY_DEFAULT=_;var T=5,p=function(){function s(e){var i=this;(0,t.default)(this,s),this.opts=e,this._getTileData=e.getTileData,this.onTileError=e.onTileError,this.onTileLoad=function(t){e.onTileLoad(t),i.opts.maxCacheByteSize&&(i._cacheByteSize+=t.byteLength,i._resizeCache())},this.onTileUnload=e.onTileUnload,this._requestScheduler=new n.RequestScheduler({maxRequests:e.maxRequests,throttleRequests:e.maxRequests>0}),this._cache=new Map,this._tiles=[],this._dirty=!1,this._cacheByteSize=0,this._viewport=null,this._selectedTiles=null,this._frameNumber=0,this.setOptions(e)}return(0,i.default)(s,[{key:"setOptions",value:function(e){Object.assign(this.opts,e),Number.isFinite(e.maxZoom)&&(this._maxZoom=Math.floor(e.maxZoom)),Number.isFinite(e.minZoom)&&(this._minZoom=Math.ceil(e.minZoom))}},{key:"update",value:function(e){var t=this,i=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).zRange;if(!e.equals(this._viewport)){this._viewport=e;var r=this.getTileIndices({viewport:e,maxZoom:this._maxZoom,minZoom:this._minZoom,zRange:i});this._selectedTiles=r.map(function(e){return t._getTile(e,!0)}),this._dirty&&this._rebuildTree()}var a=this.updateTileStates();return this._dirty&&this._resizeCache(),a&&this._frameNumber++,this._frameNumber}},{key:"getTileIndices",value:function(e){var t=e.viewport,i=e.maxZoom,r=e.minZoom,n=e.zRange,s=this.opts,o=s.tileSize,l=s.extent;return(0,a.getTileIndices)({viewport:t,maxZoom:i,minZoom:r,zRange:n,tileSize:o,extent:l})}},{key:"getTileMetadata",value:function(e){var t=e.x,i=e.y,r=e.z;return{bbox:(0,a.tileToBoundingBox)(this._viewport,t,i,r)}}},{key:"getParentIndex",value:function(e){return e.x=Math.floor(e.x/2),e.y=Math.floor(e.y/2),e.z-=1,e}},{key:"updateTileStates",value:function(){this._updateTileStates(this.selectedTiles);var e,t=this.opts.maxRequests,i=[],r=0,a=!1,n=o(this._cache.values());try{for(n.s();!(e=n.n()).done;){var s=e.value,l=Boolean(s.state&c);s.isVisible!==l&&(a=!0,s.isVisible=l),s.isSelected=s.state===v,s.isLoading&&(r++,s.isSelected||i.push(s))}}catch(u){n.e(u)}finally{n.f()}if(t>0)for(;r>t&&i.length>0;){i.shift().abort(),r--}return a}},{key:"_rebuildTree",value:function(){var e,t=this._cache,i=o(t.values());try{for(i.s();!(e=i.n()).done;){var r=e.value;r.parent=null,r.children.length=0}}catch(u){i.e(u)}finally{i.f()}var a,n=o(t.values());try{for(n.s();!(a=n.n()).done;){var s=a.value,l=this._getNearestAncestor(s.x,s.y,s.z);s.parent=l,l&&l.children.push(s)}}catch(u){n.e(u)}finally{n.f()}}},{key:"_updateTileStates",value:function(e){var t,i=this._cache,r=this.opts.refinementStrategy||_,a=o(i.values());try{for(a.s();!(t=a.n()).done;){t.value.state=h}}catch(m){a.e(m)}finally{a.f()}var n,s=o(e);try{for(s.s();!(n=s.n()).done;){n.value.state=v}}catch(m){s.e(m)}finally{s.f()}if(r!==y){var l,u=o(e);try{for(u.s();!(l=u.n()).done;){x(l.value,r)}}catch(m){u.e(m)}finally{u.f()}var c,f=o(e);try{for(f.s();!(c=f.n()).done;){var d=c.value;g(d)&&b(d)}}catch(m){f.e(m)}finally{f.f()}}}},{key:"_resizeCache",value:function(){var t=this._cache,i=this.opts,r=i.maxCacheSize||(i.maxCacheByteSize?1/0:T*this.selectedTiles.length),a=i.maxCacheByteSize||1/0;if(t.size>r||this._cacheByteSize>a){var n,s=o(t);try{for(s.s();!(n=s.n()).done;){var l=(0,e.default)(n.value,2),u=l[0],h=l[1];if(h.isVisible||(this._cacheByteSize-=i.maxCacheByteSize?h.byteLength:0,t.delete(u),this.onTileUnload(h)),t.size<=r&&this._cacheByteSize<=a)break}}catch(c){s.e(c)}finally{s.f()}this._rebuildTree(),this._dirty=!0}this._dirty&&(this._tiles=Array.from(this._cache.values()).sort(function(e,t){return e.z-t.z}),this._dirty=!1)}},{key:"_getTile",value:function(e,t){var i=e.x,a=e.y,n=e.z,s="".concat(i,",").concat(a,",").concat(n),o=this._cache.get(s);return!o&&t?(o=new r.default({x:i,y:a,z:n,onTileLoad:this.onTileLoad,onTileError:this.onTileError}),Object.assign(o,this.getTileMetadata(o)),o.loadData(this._getTileData,this._requestScheduler),this._cache.set(s,o),this._dirty=!0):o&&o.isCancelled&&!o.isLoading&&o.loadData(this._getTileData,this._requestScheduler),o}},{key:"_getNearestAncestor",value:function(e,t,i){for(var r=this._minZoom,a=void 0===r?0:r,n={x:e,y:t,z:i};n.z>a;){n=this.getParentIndex(n);var s=this._getTile(n);if(s)return s}return null}},{key:"tiles",get:function(){return this._tiles}},{key:"selectedTiles",get:function(){return this._selectedTiles}},{key:"isLoaded",get:function(){return this._selectedTiles.every(function(e){return e.isLoaded})}}]),s}();function g(e){for(var t=e;t;){if(t.state&0===c)return!0;if(t.isLoaded)return!1;t=t.parent}return!0}function x(e,t){for(var i,r=f;i=e.parent;){if(e.isLoaded&&(r=d,t===_))return;i.state=Math.max(i.state,r),e=i}}function b(e){var t,i=o(e.children);try{for(i.s();!(t=i.n()).done;){var r=t.value;r.state=Math.max(r.state,f),r.isLoaded||b(r)}}catch(a){i.e(a)}finally{i.f()}}exports.default=p;
},{"@babel/runtime/helpers/esm/slicedToArray":"TBeo","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","./tile-2d-header":"p0GF","./utils":"WGBA","@loaders.gl/loader-utils":"oHIH"}],"zm0l":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=d(require("@babel/runtime/helpers/esm/classCallCheck")),t=d(require("@babel/runtime/helpers/esm/createClass")),r=d(require("@babel/runtime/helpers/esm/inherits")),n=d(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),i=d(require("@babel/runtime/helpers/esm/getPrototypeOf")),a=d(require("@babel/runtime/helpers/esm/defineProperty")),o=require("@deck.gl/core"),l=require("@deck.gl/layers"),s=require("@loaders.gl/core"),u=f(require("./tileset-2d")),c=require("./utils");function p(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function f(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=p();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=n?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}function d(e){return e&&e.__esModule?e:{default:e}}function y(e){var t=h();return function(){var r,a=(0,i.default)(e);if(t){var o=(0,i.default)(this).constructor;r=Reflect.construct(a,arguments,o)}else r=a.apply(this,arguments);return(0,n.default)(this,r)}}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach(function(t){(0,a.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var b={data:[],dataComparator:c.urlType.equals,renderSubLayers:{type:"function",value:function(e){return new l.GeoJsonLayer(e)},compare:!1},getTileData:{type:"function",optional:!0,value:null,compare:!1},onViewportLoad:{type:"function",optional:!0,value:null,compare:!1},onTileLoad:{type:"function",value:function(e){},compare:!1},onTileUnload:{type:"function",value:function(e){},compare:!1},onTileError:{type:"function",value:function(e){return console.error(e)},compare:!1},extent:{type:"array",optional:!0,value:null,compare:!0},tileSize:512,maxZoom:null,minZoom:0,maxCacheSize:null,maxCacheByteSize:null,refinementStrategy:u.STRATEGY_DEFAULT,zRange:null,fetch:{type:"function",value:function(e,t){var r=t.layer,n=m({signal:t.signal},r.getLoadOptions()||{});return(0,s.load)(e,n)},compare:!1},maxRequests:6},v=function(n){(0,r.default)(a,n);var i=y(a);function a(){return(0,e.default)(this,a),i.apply(this,arguments)}return(0,t.default)(a,[{key:"initializeState",value:function(){this.state={tiles:[],isLoaded:!1}}},{key:"shouldUpdateState",value:function(e){return e.changeFlags.somethingChanged}},{key:"updateState",value:function(e){var t=e.props,r=(e.oldProps,e.context,e.changeFlags),n=this.state.tileset;if(!n||r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getTileData)){var i=t.maxZoom,a=t.minZoom,o=t.tileSize,l=t.maxCacheSize,s=t.maxCacheByteSize,c=t.refinementStrategy,p=t.extent,f=t.maxRequests;n=new u.default({getTileData:this.getTileData.bind(this),maxCacheSize:l,maxCacheByteSize:s,maxZoom:i,minZoom:a,tileSize:o,refinementStrategy:c,extent:p,onTileLoad:this._onTileLoad.bind(this),onTileError:this._onTileError.bind(this),onTileUnload:this._onTileUnload.bind(this),maxRequests:f}),this.setState({tileset:n})}else(r.propsChanged||r.updateTriggersChanged)&&(n.setOptions(t),this.state.tileset.tiles.forEach(function(e){e.layers=null}));this._updateTileset()}},{key:"_updateTileset",value:function(){var e=this.state.tileset,t=this.props,r=t.onViewportLoad,n=t.zRange,i=e.update(this.context.viewport,{zRange:n}),a=e.isLoaded,o=this.state.isLoaded!==a,l=this.state.frameNumber!==i;a&&r&&(o||l)&&r(e.selectedTiles.map(function(e){return e.data})),l&&this.setState({frameNumber:i}),this.state.isLoaded=a}},{key:"_onTileLoad",value:function(e){this.getCurrentLayer().props.onTileLoad(e),e.isVisible&&this.setNeedsUpdate()}},{key:"_onTileError",value:function(e,t){var r=this.getCurrentLayer();r.props.onTileError(e),r._updateTileset(),t.isVisible&&this.setNeedsUpdate()}},{key:"_onTileUnload",value:function(e){this.getCurrentLayer().props.onTileUnload(e)}},{key:"getTileData",value:function(e){var t=this.props.data,r=this.getCurrentLayer().props,n=r.getTileData,i=r.fetch,a=e.signal;return e.url=(0,c.getURLFromTemplate)(t,e),n?n(e):e.url?i(e.url,{layer:this,signal:a}):null}},{key:"renderSubLayers",value:function(e){return this.props.renderSubLayers(e)}},{key:"getHighlightedObjectIndex",value:function(){return-1}},{key:"getPickingInfo",value:function(e){var t=e.info,r=e.sourceLayer;return t.sourceLayer=r,t.tile=r.props.tile,t}},{key:"renderLayers",value:function(){var e=this,t=this.props.visible;return this.state.tileset.tiles.map(function(r){var n=t&&r.isVisible,i=e.getHighlightedObjectIndex(r);if(r.isLoaded)if(r.layers)!r.layers[0]||r.layers[0].props.visible===n&&r.layers[0].props.highlightedObjectIndex===i||(r.layers=r.layers.map(function(e){return e.clone({visible:n,highlightedObjectIndex:i})}));else{var a=e.renderSubLayers(Object.assign({},e.props,{id:"".concat(e.id,"-").concat(r.x,"-").concat(r.y,"-").concat(r.z),data:r.data,visible:n,_offset:0,tile:r,highlightedObjectIndex:i}));r.layers=(0,o._flatten)(a,Boolean)}else;return r.layers})}},{key:"isLoaded",get:function(){return this.state.tileset.selectedTiles.every(function(e){return e.layers&&e.layers.every(function(e){return e.isLoaded})})}}]),a}(o.CompositeLayer);exports.default=v,v.layerName="TileLayer",v.defaultProps=b;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/defineProperty":"iDM3","@deck.gl/core":"vvxL","@deck.gl/layers":"aWVN","@loaders.gl/core":"ikKD","./tileset-2d":"eaHx","./utils":"WGBA"}],"C2Js":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("@babel/runtime/helpers/esm/classCallCheck")),t=u(require("@babel/runtime/helpers/esm/createClass")),r=u(require("@babel/runtime/helpers/esm/get")),i=u(require("@babel/runtime/helpers/esm/inherits")),a=u(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),n=u(require("@babel/runtime/helpers/esm/getPrototypeOf")),s=require("@deck.gl/layers");function u(e){return e&&e.__esModule?e:{default:e}}function l(e){var t=c();return function(){var r,i=(0,n.default)(e);if(t){var s=(0,n.default)(this).constructor;r=Reflect.construct(i,arguments,s)}else r=i.apply(this,arguments);return(0,a.default)(this,r)}}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var f={trailLength:{type:"number",value:120,min:0},currentTime:{type:"number",value:0,min:0},getTimestamps:{type:"accessor",value:null}},o=function(a){(0,i.default)(u,a);var s=l(u);function u(){return(0,e.default)(this,u),s.apply(this,arguments)}return(0,t.default)(u,[{key:"getShaders",value:function(){var e=(0,r.default)((0,n.default)(u.prototype),"getShaders",this).call(this);return e.inject={"vs:#decl":"uniform float trailLength;\nattribute float instanceTimestamps;\nattribute float instanceNextTimestamps;\nvarying float vTime;\n","vs:#main-end":"vTime = instanceTimestamps + (instanceNextTimestamps - instanceTimestamps) * vPathPosition.y / vPathLength;\n","fs:#decl":"uniform float trailLength;\nuniform float currentTime;\nvarying float vTime;\n","fs:#main-start":"if(vTime > currentTime || vTime < currentTime - trailLength) {\n  discard;\n}\n","fs:DECKGL_FILTER_COLOR":"color.a *= 1.0 - (currentTime - vTime) / trailLength;"},e}},{key:"initializeState",value:function(e){(0,r.default)((0,n.default)(u.prototype),"initializeState",this).call(this,e),this.getAttributeManager().addInstanced({timestamps:{size:1,accessor:"getTimestamps",shaderAttributes:{instanceTimestamps:{vertexOffset:0},instanceNextTimestamps:{vertexOffset:1}}}})}},{key:"draw",value:function(e){var t=this.props,i=t.trailLength,a=t.currentTime;e.uniforms=Object.assign({},e.uniforms,{trailLength:i,currentTime:a}),(0,r.default)((0,n.default)(u.prototype),"draw",this).call(this,e)}}]),u}(s.PathLayer);exports.default=o,o.layerName="TripsLayer",o.defaultProps=f;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/get":"KGqu","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@deck.gl/layers":"aWVN"}],"PZ1C":[function(require,module,exports) {
var global = arguments[3];
var A=arguments[3];function e(A){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(A){return typeof A}:function(A){return A&&"function"==typeof Symbol&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A})(A)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.h3IsValid=Z,exports.h3IsPentagon=j,exports.h3IsResClassIII=J,exports.h3GetBaseCell=K,exports.h3GetFaces=X,exports.h3GetResolution=q,exports.geoToH3=$,exports.h3ToGeo=AA,exports.h3ToGeoBoundary=eA,exports.h3ToParent=rA,exports.h3ToChildren=iA,exports.h3ToCenterChild=nA,exports.kRing=tA,exports.kRingDistances=oA,exports.hexRing=aA,exports.polyfill=fA,exports.h3SetToMultiPolygon=uA,exports.compact=lA,exports.uncompact=cA,exports.h3IndexesAreNeighbors=sA,exports.getH3UnidirectionalEdge=wA,exports.getOriginH3IndexFromUnidirectionalEdge=gA,exports.getDestinationH3IndexFromUnidirectionalEdge=dA,exports.h3UnidirectionalEdgeIsValid=BA,exports.getH3IndexesFromUnidirectionalEdge=hA,exports.getH3UnidirectionalEdgesFromHexagon=bA,exports.getH3UnidirectionalEdgeBoundary=kA,exports.h3Distance=QA,exports.h3Line=EA,exports.experimentalH3ToLocalIj=MA,exports.experimentalLocalIjToH3=DA,exports.pointDist=vA,exports.cellArea=mA,exports.exactEdgeLength=IA,exports.hexArea=_A,exports.edgeLength=CA,exports.numHexagons=pA,exports.getRes0Indexes=xA,exports.getPentagonIndexes=FA,exports.degsToRads=UA,exports.radsToDegs=GA,exports.UNITS=void 0;var r=function(A){var e,r=void 0!==(A=A||{})?A:{},i={};for(e in r)r.hasOwnProperty(e)&&(i[e]=r[e]);var n,t=[],o="";document.currentScript&&(o=document.currentScript.src),o=0!==o.indexOf("blob:")?o.substr(0,o.lastIndexOf("/")+1):"",n=function(A,e,r){var i=new XMLHttpRequest;i.open("GET",A,!0),i.responseType="arraybuffer",i.onload=function(){if(200==i.status||0==i.status&&i.response)e(i.response);else{var n=J(A);n?e(n.buffer):r()}},i.onerror=r,i.send(null)};var a=r.print||console.log.bind(console),f=r.printErr||console.warn.bind(console);for(e in i)i.hasOwnProperty(e)&&(r[e]=i[e]);i=null,r.arguments&&(t=r.arguments);var u=0,l=function(){return u};var c=!1;function s(A){var e,i=r["_"+A];return e="Cannot call unknown function "+A+", make sure it is exported",i||fA("Assertion failed: "+e),i}function w(A,e,r,i,n){var t={string:function(A){var e=0;if(null!=A&&0!==A){var r=1+(A.length<<2);(function(A,e,r){(function(A,e,r,i){if(!(i>0))return 0;for(var n=r,t=r+i-1,o=0;o<A.length;++o){var a=A.charCodeAt(o);if(a>=55296&&a<=57343){var f=A.charCodeAt(++o);a=65536+((1023&a)<<10)|1023&f}if(a<=127){if(r>=t)break;e[r++]=a}else if(a<=2047){if(r+1>=t)break;e[r++]=192|a>>6,e[r++]=128|63&a}else if(a<=65535){if(r+2>=t)break;e[r++]=224|a>>12,e[r++]=128|a>>6&63,e[r++]=128|63&a}else{if(r+3>=t)break;e[r++]=240|a>>18,e[r++]=128|a>>12&63,e[r++]=128|a>>6&63,e[r++]=128|63&a}}e[r]=0})(A,b,e,r)})(A,e=AA(r),r)}return e},array:function(A){var e,r,i=AA(A.length);return e=A,r=i,h.set(e,r),i}};var o=s(A),a=[],f=0;if(i)for(var u=0;u<i.length;u++){var l=t[r[u]];l?(0===f&&(f=rA()),a[u]=l(i[u])):a[u]=i[u]}var c=o.apply(null,a);return c=function(A){return"string"===e?d(A):"boolean"===e?Boolean(A):A}(c),0!==f&&eA(f),c}var g="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function d(A,e){return A?function(A,e,r){for(var i=e+r,n=e;A[n]&&!(n>=i);)++n;if(n-e>16&&A.subarray&&g)return g.decode(A.subarray(e,n));for(var t="";e<n;){var o=A[e++];if(128&o){var a=63&A[e++];if(192!=(224&o)){var f=63&A[e++];if((o=224==(240&o)?(15&o)<<12|a<<6|f:(7&o)<<18|a<<12|f<<6|63&A[e++])<65536)t+=String.fromCharCode(o);else{var u=o-65536;t+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else t+=String.fromCharCode((31&o)<<6|a)}else t+=String.fromCharCode(o)}return t}(b,A,e):""}var B,h,b,k,Q,E,M;"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");function D(A,e){return A%e>0&&(A+=e-A%e),A}function v(A){B=A,r.HEAP8=h=new Int8Array(A),r.HEAP16=k=new Int16Array(A),r.HEAP32=Q=new Int32Array(A),r.HEAPU8=b=new Uint8Array(A),r.HEAPU16=new Uint16Array(A),r.HEAPU32=new Uint32Array(A),r.HEAPF32=E=new Float32Array(A),r.HEAPF64=M=new Float64Array(A)}var m=r.TOTAL_MEMORY||33554432;function I(A){for(;A.length>0;){var e=A.shift();if("function"!=typeof e){var i=e.func;"number"==typeof i?void 0===e.arg?r.dynCall_v(i):r.dynCall_vi(i,e.arg):i(void 0===e.arg?null:e.arg)}else e()}}m=(B=r.buffer?r.buffer:new ArrayBuffer(m)).byteLength,v(B),Q[6004]=5266928;var _=[],C=[],p=[],x=[];var F=Math.abs,U=Math.ceil,G=Math.floor,y=Math.min,H=0,T=null,P=null;r.preloadedImages={},r.preloadedAudios={};var R,S,L=null,z="data:application/octet-stream;base64,";function V(A){return String.prototype.startsWith?A.startsWith(z):0===A.indexOf(z)}L="data:application/octet-stream;base64,AAAAAAAAAAACAAAAAwAAAAEAAAAFAAAABAAAAAYAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAABAAAABAAAAAMAAAAGAAAABQAAAAIAAAAAAAAAAgAAAAMAAAABAAAABAAAAAYAAAAAAAAABQAAAAMAAAAGAAAABAAAAAUAAAAAAAAAAQAAAAIAAAAEAAAABQAAAAYAAAAAAAAAAgAAAAMAAAABAAAABQAAAAIAAAAAAAAAAQAAAAMAAAAGAAAABAAAAAYAAAAAAAAABQAAAAIAAAABAAAABAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAgAAAAMAAAAAAAAAAAAAAAIAAAAAAAAAAQAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAABgAAAAAAAAAFAAAAAAAAAAAAAAAEAAAABQAAAAAAAAAAAAAAAAAAAAIAAAAAAAAABgAAAAAAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAAAAAACAAAAAwAAAAQAAAAFAAAABgAAAAAAAAABAAAAAwAAAAQAAAAFAAAABgAAAAAAAAABAAAAAgAAAAQAAAAFAAAABgAAAAAAAAABAAAAAgAAAAMAAAAFAAAABgAAAAAAAAABAAAAAgAAAAMAAAAEAAAABgAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAgAAAAAAAAAAAAAABgAAAAAAAAADAAAAAgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAUAAAAEAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAABgAAAAAAAAAEAAAAAAAAAAYAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAUAAAACAAAABAAAAAMAAAAIAAAAAQAAAAcAAAAGAAAACQAAAAAAAAADAAAAAgAAAAIAAAAGAAAACgAAAAsAAAAAAAAAAQAAAAUAAAADAAAADQAAAAEAAAAHAAAABAAAAAwAAAAAAAAABAAAAH8AAAAPAAAACAAAAAMAAAAAAAAADAAAAAUAAAACAAAAEgAAAAoAAAAIAAAAAAAAABAAAAAGAAAADgAAAAsAAAARAAAAAQAAAAkAAAACAAAABwAAABUAAAAJAAAAEwAAAAMAAAANAAAAAQAAAAgAAAAFAAAAFgAAABAAAAAEAAAAAAAAAA8AAAAJAAAAEwAAAA4AAAAUAAAAAQAAAAcAAAAGAAAACgAAAAsAAAAYAAAAFwAAAAUAAAACAAAAEgAAAAsAAAARAAAAFwAAABkAAAACAAAABgAAAAoAAAAMAAAAHAAAAA0AAAAaAAAABAAAAA8AAAADAAAADQAAABoAAAAVAAAAHQAAAAMAAAAMAAAABwAAAA4AAAB/AAAAEQAAABsAAAAJAAAAFAAAAAYAAAAPAAAAFgAAABwAAAAfAAAABAAAAAgAAAAMAAAAEAAAABIAAAAhAAAAHgAAAAgAAAAFAAAAFgAAABEAAAALAAAADgAAAAYAAAAjAAAAGQAAABsAAAASAAAAGAAAAB4AAAAgAAAABQAAAAoAAAAQAAAAEwAAACIAAAAUAAAAJAAAAAcAAAAVAAAACQAAABQAAAAOAAAAEwAAAAkAAAAoAAAAGwAAACQAAAAVAAAAJgAAABMAAAAiAAAADQAAAB0AAAAHAAAAFgAAABAAAAApAAAAIQAAAA8AAAAIAAAAHwAAABcAAAAYAAAACwAAAAoAAAAnAAAAJQAAABkAAAAYAAAAfwAAACAAAAAlAAAACgAAABcAAAASAAAAGQAAABcAAAARAAAACwAAAC0AAAAnAAAAIwAAABoAAAAqAAAAHQAAACsAAAAMAAAAHAAAAA0AAAAbAAAAKAAAACMAAAAuAAAADgAAABQAAAARAAAAHAAAAB8AAAAqAAAALAAAAAwAAAAPAAAAGgAAAB0AAAArAAAAJgAAAC8AAAANAAAAGgAAABUAAAAeAAAAIAAAADAAAAAyAAAAEAAAABIAAAAhAAAAHwAAACkAAAAsAAAANQAAAA8AAAAWAAAAHAAAACAAAAAeAAAAGAAAABIAAAA0AAAAMgAAACUAAAAhAAAAHgAAADEAAAAwAAAAFgAAABAAAAApAAAAIgAAABMAAAAmAAAAFQAAADYAAAAkAAAAMwAAACMAAAAuAAAALQAAADgAAAARAAAAGwAAABkAAAAkAAAAFAAAACIAAAATAAAANwAAACgAAAA2AAAAJQAAACcAAAA0AAAAOQAAABgAAAAXAAAAIAAAACYAAAB/AAAAIgAAADMAAAAdAAAALwAAABUAAAAnAAAAJQAAABkAAAAXAAAAOwAAADkAAAAtAAAAKAAAABsAAAAkAAAAFAAAADwAAAAuAAAANwAAACkAAAAxAAAANQAAAD0AAAAWAAAAIQAAAB8AAAAqAAAAOgAAACsAAAA+AAAAHAAAACwAAAAaAAAAKwAAAD4AAAAvAAAAQAAAABoAAAAqAAAAHQAAACwAAAA1AAAAOgAAAEEAAAAcAAAAHwAAACoAAAAtAAAAJwAAACMAAAAZAAAAPwAAADsAAAA4AAAALgAAADwAAAA4AAAARAAAABsAAAAoAAAAIwAAAC8AAAAmAAAAKwAAAB0AAABFAAAAMwAAAEAAAAAwAAAAMQAAAB4AAAAhAAAAQwAAAEIAAAAyAAAAMQAAAH8AAAA9AAAAQgAAACEAAAAwAAAAKQAAADIAAAAwAAAAIAAAAB4AAABGAAAAQwAAADQAAAAzAAAARQAAADYAAABHAAAAJgAAAC8AAAAiAAAANAAAADkAAABGAAAASgAAACAAAAAlAAAAMgAAADUAAAA9AAAAQQAAAEsAAAAfAAAAKQAAACwAAAA2AAAARwAAADcAAABJAAAAIgAAADMAAAAkAAAANwAAACgAAAA2AAAAJAAAAEgAAAA8AAAASQAAADgAAABEAAAAPwAAAE0AAAAjAAAALgAAAC0AAAA5AAAAOwAAAEoAAABOAAAAJQAAACcAAAA0AAAAOgAAAH8AAAA+AAAATAAAACwAAABBAAAAKgAAADsAAAA/AAAATgAAAE8AAAAnAAAALQAAADkAAAA8AAAASAAAAEQAAABQAAAAKAAAADcAAAAuAAAAPQAAADUAAAAxAAAAKQAAAFEAAABLAAAAQgAAAD4AAAArAAAAOgAAACoAAABSAAAAQAAAAEwAAAA/AAAAfwAAADgAAAAtAAAATwAAADsAAABNAAAAQAAAAC8AAAA+AAAAKwAAAFQAAABFAAAAUgAAAEEAAAA6AAAANQAAACwAAABWAAAATAAAAEsAAABCAAAAQwAAAFEAAABVAAAAMQAAADAAAAA9AAAAQwAAAEIAAAAyAAAAMAAAAFcAAABVAAAARgAAAEQAAAA4AAAAPAAAAC4AAABaAAAATQAAAFAAAABFAAAAMwAAAEAAAAAvAAAAWQAAAEcAAABUAAAARgAAAEMAAAA0AAAAMgAAAFMAAABXAAAASgAAAEcAAABZAAAASQAAAFsAAAAzAAAARQAAADYAAABIAAAAfwAAAEkAAAA3AAAAUAAAADwAAABYAAAASQAAAFsAAABIAAAAWAAAADYAAABHAAAANwAAAEoAAABOAAAAUwAAAFwAAAA0AAAAOQAAAEYAAABLAAAAQQAAAD0AAAA1AAAAXgAAAFYAAABRAAAATAAAAFYAAABSAAAAYAAAADoAAABBAAAAPgAAAE0AAAA/AAAARAAAADgAAABdAAAATwAAAFoAAABOAAAASgAAADsAAAA5AAAAXwAAAFwAAABPAAAATwAAAE4AAAA/AAAAOwAAAF0AAABfAAAATQAAAFAAAABEAAAASAAAADwAAABjAAAAWgAAAFgAAABRAAAAVQAAAF4AAABlAAAAPQAAAEIAAABLAAAAUgAAAGAAAABUAAAAYgAAAD4AAABMAAAAQAAAAFMAAAB/AAAASgAAAEYAAABkAAAAVwAAAFwAAABUAAAARQAAAFIAAABAAAAAYQAAAFkAAABiAAAAVQAAAFcAAABlAAAAZgAAAEIAAABDAAAAUQAAAFYAAABMAAAASwAAAEEAAABoAAAAYAAAAF4AAABXAAAAUwAAAGYAAABkAAAAQwAAAEYAAABVAAAAWAAAAEgAAABbAAAASQAAAGMAAABQAAAAaQAAAFkAAABhAAAAWwAAAGcAAABFAAAAVAAAAEcAAABaAAAATQAAAFAAAABEAAAAagAAAF0AAABjAAAAWwAAAEkAAABZAAAARwAAAGkAAABYAAAAZwAAAFwAAABTAAAATgAAAEoAAABsAAAAZAAAAF8AAABdAAAATwAAAFoAAABNAAAAbQAAAF8AAABqAAAAXgAAAFYAAABRAAAASwAAAGsAAABoAAAAZQAAAF8AAABcAAAATwAAAE4AAABtAAAAbAAAAF0AAABgAAAAaAAAAGIAAABuAAAATAAAAFYAAABSAAAAYQAAAH8AAABiAAAAVAAAAGcAAABZAAAAbwAAAGIAAABuAAAAYQAAAG8AAABSAAAAYAAAAFQAAABjAAAAUAAAAGkAAABYAAAAagAAAFoAAABxAAAAZAAAAGYAAABTAAAAVwAAAGwAAAByAAAAXAAAAGUAAABmAAAAawAAAHAAAABRAAAAVQAAAF4AAABmAAAAZQAAAFcAAABVAAAAcgAAAHAAAABkAAAAZwAAAFsAAABhAAAAWQAAAHQAAABpAAAAbwAAAGgAAABrAAAAbgAAAHMAAABWAAAAXgAAAGAAAABpAAAAWAAAAGcAAABbAAAAcQAAAGMAAAB0AAAAagAAAF0AAABjAAAAWgAAAHUAAABtAAAAcQAAAGsAAAB/AAAAZQAAAF4AAABzAAAAaAAAAHAAAABsAAAAZAAAAF8AAABcAAAAdgAAAHIAAABtAAAAbQAAAGwAAABdAAAAXwAAAHUAAAB2AAAAagAAAG4AAABiAAAAaAAAAGAAAAB3AAAAbwAAAHMAAABvAAAAYQAAAG4AAABiAAAAdAAAAGcAAAB3AAAAcAAAAGsAAABmAAAAZQAAAHgAAABzAAAAcgAAAHEAAABjAAAAdAAAAGkAAAB1AAAAagAAAHkAAAByAAAAcAAAAGQAAABmAAAAdgAAAHgAAABsAAAAcwAAAG4AAABrAAAAaAAAAHgAAAB3AAAAcAAAAHQAAABnAAAAdwAAAG8AAABxAAAAaQAAAHkAAAB1AAAAfwAAAG0AAAB2AAAAcQAAAHkAAABqAAAAdgAAAHgAAABsAAAAcgAAAHUAAAB5AAAAbQAAAHcAAABvAAAAcwAAAG4AAAB5AAAAdAAAAHgAAAB4AAAAcwAAAHIAAABwAAAAeQAAAHcAAAB2AAAAeQAAAHQAAAB4AAAAdwAAAHUAAABxAAAAdgAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAEAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAIAAAAFAAAAAQAAAAAAAAD/////AQAAAAAAAAADAAAABAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAUAAAABAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAQAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAADAAAABQAAAAEAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAEAAAABQAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAgAAAAUAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAABQAAAAAAAAAAAAAABQAAAAUAAAAAAAAAAAAAAP////8BAAAAAAAAAAMAAAAEAAAAAgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAABQAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAQAAAP//////////AQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAIAAAAAAAAAAAAAAAEAAAACAAAABgAAAAQAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAoAAAACAAAAAAAAAAAAAAABAAAAAQAAAAUAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAIAAAAAAAAAAAAAAAEAAAADAAAABwAAAAYAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAHAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAgAAAAAAAAAAAAAAAQAAAAAAAAAJAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAwAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAgAAAAAAAAAAAAAAAQAAAAQAAAAIAAAACgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAJAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAACAAAAAAAAAAAAAAABAAAACwAAAA8AAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA4AAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAgAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAACAAAAAAAAAAAAAAABAAAADAAAABAAAAAMAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAEAAAAKAAAAEwAAAAgAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAADwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAJAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAgAAAAAAAAAAAAAAAQAAAA0AAAARAAAADQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABEAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABMAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAIAAAAAAAAAAAAAAAEAAAAOAAAAEgAAAA8AAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAASAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABMAAAACAAAAAAAAAAAAAAABAAAA//////////8TAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAASAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABIAAAAAAAAAGAAAAAAAAAAhAAAAAAAAAB4AAAAAAAAAIAAAAAMAAAAxAAAAAQAAADAAAAADAAAAMgAAAAMAAAAIAAAAAAAAAAUAAAAFAAAACgAAAAUAAAAWAAAAAAAAABAAAAAAAAAAEgAAAAAAAAApAAAAAQAAACEAAAAAAAAAHgAAAAAAAAAEAAAAAAAAAAAAAAAFAAAAAgAAAAUAAAAPAAAAAQAAAAgAAAAAAAAABQAAAAUAAAAfAAAAAQAAABYAAAAAAAAAEAAAAAAAAAACAAAAAAAAAAYAAAAAAAAADgAAAAAAAAAKAAAAAAAAAAsAAAAAAAAAEQAAAAMAAAAYAAAAAQAAABcAAAADAAAAGQAAAAMAAAAAAAAAAAAAAAEAAAAFAAAACQAAAAUAAAAFAAAAAAAAAAIAAAAAAAAABgAAAAAAAAASAAAAAQAAAAoAAAAAAAAACwAAAAAAAAAEAAAAAQAAAAMAAAAFAAAABwAAAAUAAAAIAAAAAQAAAAAAAAAAAAAAAQAAAAUAAAAQAAAAAQAAAAUAAAAAAAAAAgAAAAAAAAAHAAAAAAAAABUAAAAAAAAAJgAAAAAAAAAJAAAAAAAAABMAAAAAAAAAIgAAAAMAAAAOAAAAAQAAABQAAAADAAAAJAAAAAMAAAADAAAAAAAAAA0AAAAFAAAAHQAAAAUAAAABAAAAAAAAAAcAAAAAAAAAFQAAAAAAAAAGAAAAAQAAAAkAAAAAAAAAEwAAAAAAAAAEAAAAAgAAAAwAAAAFAAAAGgAAAAUAAAAAAAAAAQAAAAMAAAAAAAAADQAAAAUAAAACAAAAAQAAAAEAAAAAAAAABwAAAAAAAAAaAAAAAAAAACoAAAAAAAAAOgAAAAAAAAAdAAAAAAAAACsAAAAAAAAAPgAAAAMAAAAmAAAAAQAAAC8AAAADAAAAQAAAAAMAAAAMAAAAAAAAABwAAAAFAAAALAAAAAUAAAANAAAAAAAAABoAAAAAAAAAKgAAAAAAAAAVAAAAAQAAAB0AAAAAAAAAKwAAAAAAAAAEAAAAAwAAAA8AAAAFAAAAHwAAAAUAAAADAAAAAQAAAAwAAAAAAAAAHAAAAAUAAAAHAAAAAQAAAA0AAAAAAAAAGgAAAAAAAAAfAAAAAAAAACkAAAAAAAAAMQAAAAAAAAAsAAAAAAAAADUAAAAAAAAAPQAAAAMAAAA6AAAAAQAAAEEAAAADAAAASwAAAAMAAAAPAAAAAAAAABYAAAAFAAAAIQAAAAUAAAAcAAAAAAAAAB8AAAAAAAAAKQAAAAAAAAAqAAAAAQAAACwAAAAAAAAANQAAAAAAAAAEAAAABAAAAAgAAAAFAAAAEAAAAAUAAAAMAAAAAQAAAA8AAAAAAAAAFgAAAAUAAAAaAAAAAQAAABwAAAAAAAAAHwAAAAAAAAAyAAAAAAAAADAAAAAAAAAAMQAAAAMAAAAgAAAAAAAAAB4AAAADAAAAIQAAAAMAAAAYAAAAAwAAABIAAAADAAAAEAAAAAMAAABGAAAAAAAAAEMAAAAAAAAAQgAAAAMAAAA0AAAAAwAAADIAAAAAAAAAMAAAAAAAAAAlAAAAAwAAACAAAAAAAAAAHgAAAAMAAABTAAAAAAAAAFcAAAADAAAAVQAAAAMAAABKAAAAAwAAAEYAAAAAAAAAQwAAAAAAAAA5AAAAAQAAADQAAAADAAAAMgAAAAAAAAAZAAAAAAAAABcAAAAAAAAAGAAAAAMAAAARAAAAAAAAAAsAAAADAAAACgAAAAMAAAAOAAAAAwAAAAYAAAADAAAAAgAAAAMAAAAtAAAAAAAAACcAAAAAAAAAJQAAAAMAAAAjAAAAAwAAABkAAAAAAAAAFwAAAAAAAAAbAAAAAwAAABEAAAAAAAAACwAAAAMAAAA/AAAAAAAAADsAAAADAAAAOQAAAAMAAAA4AAAAAwAAAC0AAAAAAAAAJwAAAAAAAAAuAAAAAwAAACMAAAADAAAAGQAAAAAAAAAkAAAAAAAAABQAAAAAAAAADgAAAAMAAAAiAAAAAAAAABMAAAADAAAACQAAAAMAAAAmAAAAAwAAABUAAAADAAAABwAAAAMAAAA3AAAAAAAAACgAAAAAAAAAGwAAAAMAAAA2AAAAAwAAACQAAAAAAAAAFAAAAAAAAAAzAAAAAwAAACIAAAAAAAAAEwAAAAMAAABIAAAAAAAAADwAAAADAAAALgAAAAMAAABJAAAAAwAAADcAAAAAAAAAKAAAAAAAAABHAAAAAwAAADYAAAADAAAAJAAAAAAAAABAAAAAAAAAAC8AAAAAAAAAJgAAAAMAAAA+AAAAAAAAACsAAAADAAAAHQAAAAMAAAA6AAAAAwAAACoAAAADAAAAGgAAAAMAAABUAAAAAAAAAEUAAAAAAAAAMwAAAAMAAABSAAAAAwAAAEAAAAAAAAAALwAAAAAAAABMAAAAAwAAAD4AAAAAAAAAKwAAAAMAAABhAAAAAAAAAFkAAAADAAAARwAAAAMAAABiAAAAAwAAAFQAAAAAAAAARQAAAAAAAABgAAAAAwAAAFIAAAADAAAAQAAAAAAAAABLAAAAAAAAAEEAAAAAAAAAOgAAAAMAAAA9AAAAAAAAADUAAAADAAAALAAAAAMAAAAxAAAAAwAAACkAAAADAAAAHwAAAAMAAABeAAAAAAAAAFYAAAAAAAAATAAAAAMAAABRAAAAAwAAAEsAAAAAAAAAQQAAAAAAAABCAAAAAwAAAD0AAAAAAAAANQAAAAMAAABrAAAAAAAAAGgAAAADAAAAYAAAAAMAAABlAAAAAwAAAF4AAAAAAAAAVgAAAAAAAABVAAAAAwAAAFEAAAADAAAASwAAAAAAAAA5AAAAAAAAADsAAAAAAAAAPwAAAAMAAABKAAAAAAAAAE4AAAADAAAATwAAAAMAAABTAAAAAwAAAFwAAAADAAAAXwAAAAMAAAAlAAAAAAAAACcAAAADAAAALQAAAAMAAAA0AAAAAAAAADkAAAAAAAAAOwAAAAAAAABGAAAAAwAAAEoAAAAAAAAATgAAAAMAAAAYAAAAAAAAABcAAAADAAAAGQAAAAMAAAAgAAAAAwAAACUAAAAAAAAAJwAAAAMAAAAyAAAAAwAAADQAAAAAAAAAOQAAAAAAAAAuAAAAAAAAADwAAAAAAAAASAAAAAMAAAA4AAAAAAAAAEQAAAADAAAAUAAAAAMAAAA/AAAAAwAAAE0AAAADAAAAWgAAAAMAAAAbAAAAAAAAACgAAAADAAAANwAAAAMAAAAjAAAAAAAAAC4AAAAAAAAAPAAAAAAAAAAtAAAAAwAAADgAAAAAAAAARAAAAAMAAAAOAAAAAAAAABQAAAADAAAAJAAAAAMAAAARAAAAAwAAABsAAAAAAAAAKAAAAAMAAAAZAAAAAwAAACMAAAAAAAAALgAAAAAAAABHAAAAAAAAAFkAAAAAAAAAYQAAAAMAAABJAAAAAAAAAFsAAAADAAAAZwAAAAMAAABIAAAAAwAAAFgAAAADAAAAaQAAAAMAAAAzAAAAAAAAAEUAAAADAAAAVAAAAAMAAAA2AAAAAAAAAEcAAAAAAAAAWQAAAAAAAAA3AAAAAwAAAEkAAAAAAAAAWwAAAAMAAAAmAAAAAAAAAC8AAAADAAAAQAAAAAMAAAAiAAAAAwAAADMAAAAAAAAARQAAAAMAAAAkAAAAAwAAADYAAAAAAAAARwAAAAAAAABgAAAAAAAAAGgAAAAAAAAAawAAAAMAAABiAAAAAAAAAG4AAAADAAAAcwAAAAMAAABhAAAAAwAAAG8AAAADAAAAdwAAAAMAAABMAAAAAAAAAFYAAAADAAAAXgAAAAMAAABSAAAAAAAAAGAAAAAAAAAAaAAAAAAAAABUAAAAAwAAAGIAAAAAAAAAbgAAAAMAAAA6AAAAAAAAAEEAAAADAAAASwAAAAMAAAA+AAAAAwAAAEwAAAAAAAAAVgAAAAMAAABAAAAAAwAAAFIAAAAAAAAAYAAAAAAAAABVAAAAAAAAAFcAAAAAAAAAUwAAAAMAAABlAAAAAAAAAGYAAAADAAAAZAAAAAMAAABrAAAAAwAAAHAAAAADAAAAcgAAAAMAAABCAAAAAAAAAEMAAAADAAAARgAAAAMAAABRAAAAAAAAAFUAAAAAAAAAVwAAAAAAAABeAAAAAwAAAGUAAAAAAAAAZgAAAAMAAAAxAAAAAAAAADAAAAADAAAAMgAAAAMAAAA9AAAAAwAAAEIAAAAAAAAAQwAAAAMAAABLAAAAAwAAAFEAAAAAAAAAVQAAAAAAAABfAAAAAAAAAFwAAAAAAAAAUwAAAAAAAABPAAAAAAAAAE4AAAAAAAAASgAAAAMAAAA/AAAAAQAAADsAAAADAAAAOQAAAAMAAABtAAAAAAAAAGwAAAAAAAAAZAAAAAUAAABdAAAAAQAAAF8AAAAAAAAAXAAAAAAAAABNAAAAAQAAAE8AAAAAAAAATgAAAAAAAAB1AAAABAAAAHYAAAAFAAAAcgAAAAUAAABqAAAAAQAAAG0AAAAAAAAAbAAAAAAAAABaAAAAAQAAAF0AAAABAAAAXwAAAAAAAABaAAAAAAAAAE0AAAAAAAAAPwAAAAAAAABQAAAAAAAAAEQAAAAAAAAAOAAAAAMAAABIAAAAAQAAADwAAAADAAAALgAAAAMAAABqAAAAAAAAAF0AAAAAAAAATwAAAAUAAABjAAAAAQAAAFoAAAAAAAAATQAAAAAAAABYAAAAAQAAAFAAAAAAAAAARAAAAAAAAAB1AAAAAwAAAG0AAAAFAAAAXwAAAAUAAABxAAAAAQAAAGoAAAAAAAAAXQAAAAAAAABpAAAAAQAAAGMAAAABAAAAWgAAAAAAAABpAAAAAAAAAFgAAAAAAAAASAAAAAAAAABnAAAAAAAAAFsAAAAAAAAASQAAAAMAAABhAAAAAQAAAFkAAAADAAAARwAAAAMAAABxAAAAAAAAAGMAAAAAAAAAUAAAAAUAAAB0AAAAAQAAAGkAAAAAAAAAWAAAAAAAAABvAAAAAQAAAGcAAAAAAAAAWwAAAAAAAAB1AAAAAgAAAGoAAAAFAAAAWgAAAAUAAAB5AAAAAQAAAHEAAAAAAAAAYwAAAAAAAAB3AAAAAQAAAHQAAAABAAAAaQAAAAAAAAB3AAAAAAAAAG8AAAAAAAAAYQAAAAAAAABzAAAAAAAAAG4AAAAAAAAAYgAAAAMAAABrAAAAAQAAAGgAAAADAAAAYAAAAAMAAAB5AAAAAAAAAHQAAAAAAAAAZwAAAAUAAAB4AAAAAQAAAHcAAAAAAAAAbwAAAAAAAABwAAAAAQAAAHMAAAAAAAAAbgAAAAAAAAB1AAAAAQAAAHEAAAAFAAAAaQAAAAUAAAB2AAAAAQAAAHkAAAAAAAAAdAAAAAAAAAByAAAAAQAAAHgAAAABAAAAdwAAAAAAAAByAAAAAAAAAHAAAAAAAAAAawAAAAAAAABkAAAAAAAAAGYAAAAAAAAAZQAAAAMAAABTAAAAAQAAAFcAAAADAAAAVQAAAAMAAAB2AAAAAAAAAHgAAAAAAAAAcwAAAAUAAABsAAAAAQAAAHIAAAAAAAAAcAAAAAAAAABcAAAAAQAAAGQAAAAAAAAAZgAAAAAAAAB1AAAAAAAAAHkAAAAFAAAAdwAAAAUAAABtAAAAAQAAAHYAAAAAAAAAeAAAAAAAAABfAAAAAQAAAGwAAAABAAAAcgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAAAAAAAAAAABAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAB+ogX28rbpPxqumpJv+fM/165tC4ns9D+XaEnTqUsEQFrOtNlC4PA/3U+0XG6P9b9TdUUBxTTjP4PUp8ex1ty/B1rD/EN43z+lcDi6LLrZP/a45NWEHMY/oJ5ijLDZ+j/xw3rjxWPjP2B8A46ioQdAotff3wla2z+FMSpA1jj+v6b5Y1mtPbS/cIu8K0F457/2esiyJpDNv98k5Ts2NeA/pvljWa09tD88ClUJ60MDQPZ6yLImkM0/4ONKxa0UBcD2uOTVhBzGv5G7JRxGave/8cN648Vj47+HCwtkjAXIv6LX398JWtu/qyheaCAL9D9TdUUBxTTjv4gyTxslhwVAB1rD/EN4378EH/28teoFwH6iBfbytum/F6ztFYdK/r/Xrm0Liez0vwcS6wNGWeO/Ws602ULg8L9TCtRLiLT8P8pi5RexJsw/BlIKPVwR5T95Wyu0/QjnP5PjoT7YYcu/mBhKZ6zrwj8wRYS7NebuP3qW6geh+Ls/SLrixebL3r+pcyymN9XrPwmkNHp7xec/GWNMZVAA17+82s+x2BLiPwn2ytbJ9ek/LgEH1sMS1j8yp/2LhTfeP+SnWwtQBbu/d38gkp5X7z8ytsuHaADGPzUYObdf1+m/7IauECWhwz+cjSACjzniP76Z+wUhN9K/1+GEKzup67+/GYr/04baPw6idWOvsuc/ZedTWsRa5b/EJQOuRzi0v/OncYhHPes/h49PixY53j+i8wWfC03Nvw2idWOvsue/ZedTWsRa5T/EJQOuRzi0P/KncYhHPeu/iY9PixY53r+i8wWfC03NP9anWwtQBbs/d38gkp5X778ytsuHaADGvzUYObdf1+k/74auECWhw7+cjSACjzniv8CZ+wUhN9I/1uGEKzup6z+/GYr/04bavwmkNHp7xee/F2NMZVAA1z+82s+x2BLivwr2ytbJ9em/KwEH1sMS1r8yp/2LhTfev81i5RexJsy/BlIKPVwR5b95Wyu0/Qjnv5DjoT7YYcs/nBhKZ6zrwr8wRYS7Nebuv3OW6geh+Lu/SLrixebL3j+pcyymN9Xrv8rHIFfWehZAMBwUdlo0DECTUc17EOb2PxpVB1SWChdAzjbhb9pTDUDQhmdvECX5P9FlMKCC9+g/IIAzjELgE0DajDngMv8GQFhWDmDPjNs/y1guLh96EkAxPi8k7DIEQJCc4URlhRhA3eLKKLwkEECqpNAyTBD/P6xpjXcDiwVAFtl//cQm4z+Ibt3XKiYTQM7mCLUb3QdAoM1t8yVv7D8aLZv2Nk8UQEAJPV5nQwxAtSsfTCoE9z9TPjXLXIIWQBVanC5W9AtAYM3d7Adm9j++5mQz1FoWQBUThyaVBghAwH5muQsV7T89Q1qv82MUQJoWGOfNuBdAzrkClkmwDkDQjKq77t37Py+g0dtitsE/ZwAMTwVPEUBojepluNwBQGYbtuW+t9w/HNWIJs6MEkDTNuQUSlgEQKxktPP5TcQ/ixbLB8JjEUCwuWjXMQYCQAS/R09FkRdAowpiZjhhDkB7LmlczD/7P01iQmhhsAVAnrtTwDy84z/Z6jfQ2TgTQChOCXMnWwpAhrW3daoz8z/HYJvVPI4VQLT3ik5FcA5Angi7LOZd+z+NNVzDy5gXQBXdvVTFUA1AYNMgOeYe+T8+qHXGCwkXQKQTOKwa5AJA8gFVoEMW0T+FwzJyttIRQAEAAAD/////BwAAAP////8xAAAA/////1cBAAD/////YQkAAP////+nQQAA/////5HLAQD/////95AMAP/////B9lcAAAAAAAAAAAAAAAAAAgAAAP////8OAAAA/////2IAAAD/////rgIAAP/////CEgAA/////06DAAD/////IpcDAP/////uIRkA/////4LtrwAAAAAAAAAAAAAAAAAAAAAAAgAAAP//////////AQAAAAMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////wIAAAD//////////wEAAAAAAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA/////////////////////wEAAAD///////////////8CAAAA////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD///////////////////////////////8CAAAA////////////////AQAAAP////////////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAAAQAAAP//////////AgAAAP//////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAAEAAAD//////////wIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAgAAAAAAAAACAAAAAQAAAAEAAAACAAAAAgAAAAAAAAAFAAAABQAAAAAAAAACAAAAAgAAAAMAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAIAAAABAAAAAgAAAAIAAAACAAAAAAAAAAUAAAAGAAAAAAAAAAIAAAACAAAAAwAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAIAAAAAAAAAAgAAAAEAAAADAAAAAgAAAAIAAAAAAAAABQAAAAcAAAAAAAAAAgAAAAIAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAgAAAAAAAAACAAAAAQAAAAQAAAACAAAAAgAAAAAAAAAFAAAACAAAAAAAAAACAAAAAgAAAAMAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAACAAAAAAAAAAIAAAABAAAAAAAAAAIAAAACAAAAAAAAAAUAAAAJAAAAAAAAAAIAAAACAAAAAwAAAAUAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAIAAAACAAAAAAAAAAMAAAAOAAAAAgAAAAAAAAACAAAAAwAAAAAAAAAAAAAAAgAAAAIAAAADAAAABgAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAgAAAAIAAAAAAAAAAwAAAAoAAAACAAAAAAAAAAIAAAADAAAAAQAAAAAAAAACAAAAAgAAAAMAAAAHAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAACAAAAAgAAAAAAAAADAAAACwAAAAIAAAAAAAAAAgAAAAMAAAACAAAAAAAAAAIAAAACAAAAAwAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAIAAAACAAAAAAAAAAMAAAAMAAAAAgAAAAAAAAACAAAAAwAAAAMAAAAAAAAAAgAAAAIAAAADAAAACQAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAgAAAAIAAAAAAAAAAwAAAA0AAAACAAAAAAAAAAIAAAADAAAABAAAAAAAAAACAAAAAgAAAAMAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAACAAAAAgAAAAAAAAADAAAABgAAAAIAAAAAAAAAAgAAAAMAAAAPAAAAAAAAAAIAAAACAAAAAwAAAAsAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAIAAAACAAAAAAAAAAMAAAAHAAAAAgAAAAAAAAACAAAAAwAAABAAAAAAAAAAAgAAAAIAAAADAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAgAAAAIAAAAAAAAAAwAAAAgAAAACAAAAAAAAAAIAAAADAAAAEQAAAAAAAAACAAAAAgAAAAMAAAANAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAACAAAAAgAAAAAAAAADAAAACQAAAAIAAAAAAAAAAgAAAAMAAAASAAAAAAAAAAIAAAACAAAAAwAAAA4AAAAAAAAAAAAAAAAAAAAAAAAACQAAAAIAAAACAAAAAAAAAAMAAAAFAAAAAgAAAAAAAAACAAAAAwAAABMAAAAAAAAAAgAAAAIAAAADAAAADwAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAgAAAAAAAAACAAAAAQAAABMAAAACAAAAAgAAAAAAAAAFAAAACgAAAAAAAAACAAAAAgAAAAMAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABEAAAACAAAAAAAAAAIAAAABAAAADwAAAAIAAAACAAAAAAAAAAUAAAALAAAAAAAAAAIAAAACAAAAAwAAABEAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAIAAAAAAAAAAgAAAAEAAAAQAAAAAgAAAAIAAAAAAAAABQAAAAwAAAAAAAAAAgAAAAIAAAADAAAAEgAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAgAAAAAAAAACAAAAAQAAABEAAAACAAAAAgAAAAAAAAAFAAAADQAAAAAAAAACAAAAAgAAAAMAAAATAAAAAAAAAAAAAAAAAAAAAAAAAA8AAAACAAAAAAAAAAIAAAABAAAAEgAAAAIAAAACAAAAAAAAAAUAAAAOAAAAAAAAAAIAAAACAAAAAwAAAAIAAAABAAAAAAAAAAEAAAACAAAAAAAAAAAAAAACAAAAAQAAAAAAAAABAAAAAgAAAAEAAAAAAAAAAgAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAAAAAAAAAAABQAAAAQAAAAAAAAAAQAAAAUAAAAEAAAAAAAAAAUAAAAAAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAEAAAACAAAAAQAAAAAAAAACAAAAAgAAAAAAAAABAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAAAAAAAAAAABQAAAAQAAAAAAAAAAQAAAAUAAAAEAAAAAAAAAAUAAAAFAAAAAAAAAAEAAAAAAAAAAAAAAMuhRbbsNlBBYqHW9OmHIkF9XBuqnS31QAK37uYhNMhAOSo3UUupm0DC+6pc6JxvQHV9eseEEEJAzURsCyqlFEB8BQ4NMJjnPyy3tBoS97o/xawXQznRjj89J2K2CZxhP6vX43RIIDQ/S8isgygEBz+LvFHQkmzaPjFFFO7wMq4+AADMLkTtjkIAAOgkJqxhQgAAU7B0MjRCAADwpBcVB0IAAACYP2HaQQAAAIn/Ja5BzczM4Eg6gUHNzMxMU7BTQTMzMzNfgCZBAAAAAEi3+UAAAAAAwGPNQDMzMzMzy6BAmpmZmZkxc0AzMzMzM/NFQDMzMzMzMxlAzczMzMzM7D+ygXSx2U6RQKimJOvQKnpA23hmONTHY0A/AGcxyudNQNb3K647mzZA+S56rrwWIUAm4kUQ+9UJQKre9hGzh/M/BLvoy9WG3T+LmqMf8VHGP2m3nYNV37A/gbFHcyeCmT+cBPWBckiDP61tZACjKW0/q2RbYVUYVj8uDypVyLNAP6jGS5cA5zBBwcqhBdCNGUEGEhQ/JVEDQT6WPnRbNO1AB/AWSJgT1kDfUWNCNLDAQNk+5C33OqlAchWL34QSk0DKvtDIrNV8QNF0G3kFzGVASSeWhBl6UED+/0mNGuk4QGjA/dm/1CJALPLPMql6DEDSHoDrwpP1P2jouzWST+A/egAAAAAAAABKAwAAAAAAAPoWAAAAAAAAyqAAAAAAAAB6ZQQAAAAAAErGHgAAAAAA+mvXAAAAAADK8+MFAAAAAHqqOykAAAAASqmhIAEAAAD6oGvkBwAAAMpm8T43AAAAes+ZuIIBAABKrDQMkwoAAPq1cFUFSgAAyvkUViUGAgAAAAAAAwAAAAYAAAACAAAABQAAAAEAAAAEAAAAAAAAAAAAAAAFAAAAAwAAAAEAAAAGAAAABAAAAAIAAAAAAAAAAAAAAP////8AAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAA/////wAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAP////8AAAAAAAAAAAEAAAABAAAAAAAAAAAAAAD/////AAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAA/////wUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAP////8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAUAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAQAAAAAAAAAFAAAAAQAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEBAAAAAAABAAEAAAEBAAAAAAABAAAAAQAAAAEAAQAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAACAAAAAQAAAAMAAAAOAAAABgAAAAsAAAACAAAABwAAAAEAAAAYAAAABQAAAAoAAAABAAAABgAAAAAAAAAmAAAABwAAAAwAAAADAAAACAAAAAIAAAAxAAAACQAAAA4AAAAAAAAABQAAAAQAAAA6AAAACAAAAA0AAAAEAAAACQAAAAMAAAA/AAAACwAAAAYAAAAPAAAACgAAABAAAABIAAAADAAAAAcAAAAQAAAACwAAABEAAABTAAAACgAAAAUAAAATAAAADgAAAA8AAABhAAAADQAAAAgAAAARAAAADAAAABIAAABrAAAADgAAAAkAAAASAAAADQAAABMAAAB1AAAADwAAABMAAAARAAAAEgAAABAAAAAHAAAABwAAAAEAAAACAAAABAAAAAMAAAAAAAAAAAAAAAcAAAADAAAAAQAAAAIAAAAFAAAABAAAAAAAAAAAAAAAYWxnb3MuYwBfcG9seWZpbGxJbnRlcm5hbABhZGphY2VudEZhY2VEaXJbdG1wRmlqay5mYWNlXVtmaWprLmZhY2VdID09IEtJAGZhY2VpamsuYwBfZmFjZUlqa1BlbnRUb0dlb0JvdW5kYXJ5AGFkamFjZW50RmFjZURpcltjZW50ZXJJSksuZmFjZV1bZmFjZTJdID09IEtJAF9mYWNlSWprVG9HZW9Cb3VuZGFyeQBwb2x5Z29uLT5uZXh0ID09IE5VTEwAbGlua2VkR2VvLmMAYWRkTmV3TGlua2VkUG9seWdvbgBuZXh0ICE9IE5VTEwAbG9vcCAhPSBOVUxMAGFkZE5ld0xpbmtlZExvb3AAcG9seWdvbi0+Zmlyc3QgPT0gTlVMTABhZGRMaW5rZWRMb29wAGNvb3JkICE9IE5VTEwAYWRkTGlua2VkQ29vcmQAbG9vcC0+Zmlyc3QgPT0gTlVMTABpbm5lckxvb3BzICE9IE5VTEwAbm9ybWFsaXplTXVsdGlQb2x5Z29uAGJib3hlcyAhPSBOVUxMAGNhbmRpZGF0ZXMgIT0gTlVMTABmaW5kUG9seWdvbkZvckhvbGUAY2FuZGlkYXRlQkJveGVzICE9IE5VTEwAcmV2RGlyICE9IElOVkFMSURfRElHSVQAbG9jYWxpai5jAGgzVG9Mb2NhbElqawBiYXNlQ2VsbCAhPSBvcmlnaW5CYXNlQ2VsbAAhKG9yaWdpbk9uUGVudCAmJiBpbmRleE9uUGVudCkAcGVudGFnb25Sb3RhdGlvbnMgPj0gMABkaXJlY3Rpb25Sb3RhdGlvbnMgPj0gMABiYXNlQ2VsbCA9PSBvcmlnaW5CYXNlQ2VsbABiYXNlQ2VsbCAhPSBJTlZBTElEX0JBU0VfQ0VMTABsb2NhbElqa1RvSDMAIV9pc0Jhc2VDZWxsUGVudGFnb24oYmFzZUNlbGwpAGJhc2VDZWxsUm90YXRpb25zID49IDAAd2l0aGluUGVudGFnb25Sb3RhdGlvbnMgPj0gMABncmFwaC0+YnVja2V0cyAhPSBOVUxMAHZlcnRleEdyYXBoLmMAaW5pdFZlcnRleEdyYXBoAG5vZGUgIT0gTlVMTABhZGRWZXJ0ZXhOb2Rl";function Y(A){return A}function O(A){return A.replace(/\b__Z[\w\d_]+/g,function(A){var e=Y(A);return A===e?A:e+" ["+A+"]"})}function W(){var A=new Error;if(!A.stack){try{throw new Error(0)}catch(e){A=e}if(!A.stack)return"(no stack trace available)"}return A.stack.toString()}function N(){return h.length}function Z(A){try{var e=new ArrayBuffer(A);if(e.byteLength!=A)return;return new Int8Array(e).set(h),$(e),v(e),1}catch(r){}}var j="function"==typeof atob?atob:function(A){var e,r,i,n,t,o,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",f="",u=0;A=A.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{e=a.indexOf(A.charAt(u++))<<2|(n=a.indexOf(A.charAt(u++)))>>4,r=(15&n)<<4|(t=a.indexOf(A.charAt(u++)))>>2,i=(3&t)<<6|(o=a.indexOf(A.charAt(u++))),f+=String.fromCharCode(e),64!==t&&(f+=String.fromCharCode(r)),64!==o&&(f+=String.fromCharCode(i))}while(u<A.length);return f};function J(A){if(V(A))return function(A){try{for(var e=j(A),r=new Uint8Array(e.length),i=0;i<e.length;++i)r[i]=e.charCodeAt(i);return r}catch(n){throw new Error("Converting base64 string to bytes failed.")}}(A.slice(z.length))}var K,X,q=function(A,e,r){var i=new A.Int8Array(r),n=new A.Int32Array(r),t=(new A.Uint8Array(r),new A.Float32Array(r),new A.Float64Array(r)),o=0|e.p,a=A.Math.floor,f=A.Math.abs,u=A.Math.sqrt,l=A.Math.pow,c=A.Math.cos,s=A.Math.sin,w=A.Math.tan,g=A.Math.acos,d=A.Math.asin,B=A.Math.atan,h=A.Math.atan2,b=A.Math.ceil,k=A.Math.imul,Q=A.Math.min,E=A.Math.clz32,M=e.b,D=e.c,v=e.d,m=e.e,I=e.f,_=e.g,C=e.h,p=e.i,x=24048;function F(A,e,r,i){var n,t;0|U(A|=0,e|=0,r|=0,i|=0,0)&&(pe(0|i,0,(t=1+(0|k(3*r|0,r+1|0))|0)<<3|0),(n=0|ke(t,4))&&(G(A,e,r,i,n,t,0),be(n)))}function U(A,e,r,i,t){A|=0,e|=0,r|=0,t|=0;var o,a=0,f=0,u=0,l=0,c=0,s=0,w=0,g=0;if(o=x,x=x+16|0,g=o,n[(a=i|=0)>>2]=A,n[a+4>>2]=e,(a=0!=(0|t))&&(n[t>>2]=0),0|yA(A,e))return x=o,0|(g=1);n[g>>2]=0;A:do{if((0|r)>=1)if(a)for(c=0,s=1,w=1,f=0,a=A;;){if(!(f|c)){if(0==(0|(a=0|y(a,e,4,g)))&0==(0|(e=0|D()))){a=2;break A}if(0|yA(a,e)){a=1;break A}}if(0==(0|(a=0|y(a,e,0|n[16+(c<<2)>>2],g)))&0==(0|(e=0|D()))){a=2;break A}if(n[(A=i+(w<<3)|0)>>2]=a,n[A+4>>2]=e,n[t+(w<<2)>>2]=s,A=(0|(f=f+1|0))==(0|s),l=6==(0|(u=c+1|0)),0|yA(a,e)){a=1;break A}if((0|(s=s+(l&A&1)|0))>(0|r)){a=0;break}c=A?l?0:u:c,w=w+1|0,f=A?0:f}else for(c=0,s=1,w=1,f=0,a=A;;){if(!(f|c)){if(0==(0|(a=0|y(a,e,4,g)))&0==(0|(e=0|D()))){a=2;break A}if(0|yA(a,e)){a=1;break A}}if(0==(0|(a=0|y(a,e,0|n[16+(c<<2)>>2],g)))&0==(0|(e=0|D()))){a=2;break A}if(n[(A=i+(w<<3)|0)>>2]=a,n[A+4>>2]=e,A=(0|(f=f+1|0))==(0|s),l=6==(0|(u=c+1|0)),0|yA(a,e)){a=1;break A}if((0|(s=s+(l&A&1)|0))>(0|r)){a=0;break}c=A?l?0:u:c,w=w+1|0,f=A?0:f}else a=0}while(0);return x=o,0|(g=a)}function G(A,e,r,i,t,o,a){r|=0,i|=0,t|=0,o|=0,a|=0;var f,u,l=0,c=0,s=0,w=0,g=0;if(u=x,x=x+16|0,f=u,0==(0|(A|=0))&0==(0|(e|=0)))x=u;else{if(l=0|De(0|A,0|e,0|o,((0|o)<0)<<31>>31|0),D(),!(0==(0|(g=0|n[(w=c=i+(l<<3)|0)>>2]))&0==(0|(w=0|n[w+4>>2]))|(s=(0|g)==(0|A)&(0|w)==(0|e))))do{s=(0|(w=0|n[(g=c=i+((l=(l+1|0)%(0|o)|0)<<3)|0)>>2]))==(0|A)&(0|(g=0|n[g+4>>2]))==(0|e)}while(!(0==(0|w)&0==(0|g)|s));l=t+(l<<2)|0,s&&(0|n[l>>2])<=(0|a)?x=u:(n[(g=c)>>2]=A,n[g+4>>2]=e,n[l>>2]=a,(0|a)>=(0|r)?x=u:(g=a+1|0,n[f>>2]=0,G(w=0|y(A,e,2,f),0|D(),r,i,t,o,g),n[f>>2]=0,G(w=0|y(A,e,3,f),0|D(),r,i,t,o,g),n[f>>2]=0,G(w=0|y(A,e,1,f),0|D(),r,i,t,o,g),n[f>>2]=0,G(w=0|y(A,e,5,f),0|D(),r,i,t,o,g),n[f>>2]=0,G(w=0|y(A,e,4,f),0|D(),r,i,t,o,g),n[f>>2]=0,G(w=0|y(A,e,6,f),0|D(),r,i,t,o,g),x=u))}}function y(A,e,r,i){A|=0,e|=0,r|=0;var t,o,a=0,f=0,u=0,l=0,c=0,s=0,w=0;if((0|n[(i|=0)>>2])>0){a=0;do{r=0|fA(r),a=a+1|0}while((0|a)<(0|n[i>>2]))}t=0|ve(0|A,0|e,45),D(),o=127&t,f=0|HA(A,e),a=0|ve(0|A,0|e,52),D(),a&=15;A:do{if(a)for(;;){if(s=0|ve(0|A,0|e,0|(c=3*(15-a|0)|0)),D(),s&=7,w=0==(0|LA(a)),a=a+-1|0,l=0|me(7,0,0|c),e&=~(0|D()),A=(c=0|me(0|n[(w?464:48)+(28*s|0)+(r<<2)>>2],0,0|c))|A&~l,e|=0|D(),!(r=0|n[(w?672:256)+(28*s|0)+(r<<2)>>2])){r=0;break A}if(!a){u=6;break}}else u=6}while(0);6==(0|u)&&(A|=s=0|me(0|(w=0|n[880+(28*o|0)+(r<<2)>>2]),0,45),e=0|D()|-1040385&e,r=0|n[4304+(28*o|0)+(r<<2)>>2],127==(127&w|0)&&(w=0|me(0|n[880+(28*o|0)+20>>2],0,45),e=0|D()|-1040385&e,r=0|n[4304+(28*o|0)+20>>2],A=0|PA(w|A,e),e=0|D(),n[i>>2]=1+(0|n[i>>2]))),u=0|ve(0|A,0|e,45),D(),u&=127;A:do{if(0|T(u)){e:do{if(1==(0|HA(A,e))){if((0|o)!=(0|u)){if(0|L(u,0|n[7728+(28*o|0)>>2])){A=0|SA(A,e),f=1,e=0|D();break}A=0|PA(A,e),f=1,e=0|D();break}switch(0|f){case 5:A=0|SA(A,e),e=0|D(),n[i>>2]=5+(0|n[i>>2]),f=0;break e;case 3:A=0|PA(A,e),e=0|D(),n[i>>2]=1+(0|n[i>>2]),f=0;break e;default:return w=0,M(0|(s=0)),0|w}}else f=0}while(0);if((0|r)>0){a=0;do{A=0|TA(A,e),e=0|D(),a=a+1|0}while((0|a)!=(0|r))}if((0|o)!=(0|u)){if(!(0|P(u))){if(0!=(0|f)|5!=(0|HA(A,e)))break;n[i>>2]=1+(0|n[i>>2]);break}switch(127&t){case 8:case 118:break A}3!=(0|HA(A,e))&&(n[i>>2]=1+(0|n[i>>2]))}}else if((0|r)>0){a=0;do{A=0|PA(A,e),e=0|D(),a=a+1|0}while((0|a)!=(0|r))}}while(0);return n[i>>2]=((0|n[i>>2])+r|0)%6|0,w=A,M(0|(s=e)),0|w}function H(A,e,r,i,o,a){e|=0,r|=0,i|=0,o|=0,a|=0;var f,u,l,c,s,w,g,d,B,h=0,b=0,k=0,Q=0,E=0,M=0,v=0,m=0,I=0,_=0,C=0,p=0,F=0,U=0;if(B=x,x=x+48|0,w=B+32|0,g=B+16|0,d=B,(0|(h=0|n[(A|=0)>>2]))<=0)return x=B,0|(p=0);f=A+4|0,u=w+8|0,l=g+8|0,c=d+8|0,s=((0|e)<0)<<31>>31,C=0;A:for(;;){I=(b=0|n[f>>2])+(C<<4)|0,n[w>>2]=n[I>>2],n[w+4>>2]=n[I+4>>2],n[w+8>>2]=n[I+8>>2],n[w+12>>2]=n[I+12>>2],(0|C)==(h+-1|0)?(n[g>>2]=n[b>>2],n[g+4>>2]=n[b+4>>2],n[g+8>>2]=n[b+8>>2],n[g+12>>2]=n[b+12>>2]):(I=b+(C+1<<4)|0,n[g>>2]=n[I>>2],n[g+4>>2]=n[I+4>>2],n[g+8>>2]=n[I+8>>2],n[g+12>>2]=n[I+12>>2]),I=0|N(w,g,r);e:do{if((0|I)>0){_=+(0|I),m=0;r:for(;;){U=+(I-m|0),F=+(0|m),t[d>>3]=+t[w>>3]*U/_+ +t[g>>3]*F/_,t[c>>3]=+t[u>>3]*U/_+ +t[l>>3]*F/_,b=0|De(0|(M=0|zA(d,r)),0|(v=0|D()),0|e,0|s),D(),Q=0|n[(k=h=a+(b<<3)|0)>>2],k=0|n[k+4>>2];i:do{if(0==(0|Q)&0==(0|k))p=14;else for(E=0;;){if((0|E)>(0|e)){h=1;break i}if((0|Q)==(0|M)&(0|k)==(0|v)){h=7;break i}if(0==(0|(Q=0|n[(k=h=a+((b=(b+1|0)%(0|e)|0)<<3)|0)>>2]))&0==(0|(k=0|n[k+4>>2]))){p=14;break}E=E+1|0}}while(0);switch(14==(0|p)&&(p=0,0==(0|M)&0==(0|v)?h=7:(n[h>>2]=M,n[h+4>>2]=v,h=0|n[i>>2],n[(E=o+(h<<3)|0)>>2]=M,n[E+4>>2]=v,n[i>>2]=h+1,h=0)),7&h){case 7:case 0:break;default:break r}if((0|I)<=(0|(m=m+1|0))){p=8;break e}}if(0|h){h=-1,p=20;break A}}else p=8}while(0);if(8==(0|p)&&(p=0),(0|(C=C+1|0))>=(0|(h=0|n[A>>2]))){h=0,p=20;break}}return 20==(0|p)?(x=B,0|h):0}function T(A){return 0|n[7728+(28*(A|=0)|0)+16>>2]}function P(A){return 4==(0|(A|=0))|117==(0|A)|0}function R(A){return 0|n[11152+(216*(0|n[(A|=0)>>2])|0)+(72*(0|n[A+4>>2])|0)+(24*(0|n[A+8>>2])|0)+(n[A+12>>2]<<3)>>2]}function S(A){return 0|n[11152+(216*(0|n[(A|=0)>>2])|0)+(72*(0|n[A+4>>2])|0)+(24*(0|n[A+8>>2])|0)+(n[A+12>>2]<<3)+4>>2]}function L(A,e){return e|=0,(0|n[7728+(28*(A|=0)|0)+20>>2])==(0|e)?0|(e=1):0|(e=(0|n[7728+(28*A|0)+24>>2])==(0|e))}function z(A,e){return 0|n[880+(28*(A|=0)|0)+((e|=0)<<2)>>2]}function V(A,e){return e|=0,(0|n[880+(28*(A|=0)|0)>>2])==(0|e)?0|(e=0):(0|n[880+(28*A|0)+4>>2])==(0|e)?0|(e=1):(0|n[880+(28*A|0)+8>>2])==(0|e)?0|(e=2):(0|n[880+(28*A|0)+12>>2])==(0|e)?0|(e=3):(0|n[880+(28*A|0)+16>>2])==(0|e)?0|(e=4):(0|n[880+(28*A|0)+20>>2])==(0|e)?0|(e=5):0|((0|n[880+(28*A|0)+24>>2])==(0|e)?6:7)}function Y(A){return+t[(A|=0)+16>>3]<+t[A+24>>3]|0}function O(A,e){A|=0;var r,i,n=0;return(n=+t[(e|=0)>>3])>=+t[A+8>>3]&&n<=+t[A>>3]?(r=+t[A+16>>3],n=+t[A+24>>3],e=(i=+t[e+8>>3])>=n,A=i<=r&1,r<n?e&&(A=1):e||(A=0),0|(e=0!=(0|A))):0|(e=0)}function W(A,e){A|=0,e|=0;var r,i,o,a,u,l,c=0,s=0;a=x,x=x+288|0,r=a+264|0,i=a+96|0,s=(c=o=a)+96|0;do{n[c>>2]=0,c=c+4|0}while((0|c)<(0|s));return NA(e,o),OA(s=0|n[(c=o)>>2],c=0|n[c+4>>2],r),WA(s,c,i),u=+CA(r,i+8|0),t[r>>3]=+t[A>>3],t[(c=r+8|0)>>3]=+t[A+16>>3],t[i>>3]=+t[A+8>>3],t[(s=i+8|0)>>3]=+t[A+24>>3],l=+CA(r,i),s=~~+b(+l*l/+Ie(+ +f(+(+t[c>>3]-+t[s>>3])/(+t[r>>3]-+t[i>>3])),3)/(u*(2.59807621135*u)*.8)),x=a,0|(0==(0|s)?1:s)}function N(A,e,r){A|=0,e|=0,r|=0;var i,t,o,a,f,u=0,l=0;a=x,x=x+288|0,i=a+264|0,t=a+96|0,l=(u=o=a)+96|0;do{n[u>>2]=0,u=u+4|0}while((0|u)<(0|l));return NA(r,o),OA(u=0|n[(l=o)>>2],l=0|n[l+4>>2],i),WA(u,l,t),f=+CA(i,t+8|0),l=~~+b(+ +CA(A,e)/(2*f)),x=a,0|(0==(0|l)?1:l)}function Z(A,e,r,i){e|=0,r|=0,i|=0,n[(A|=0)>>2]=e,n[A+4>>2]=r,n[A+8>>2]=i}function j(A,e){A|=0;var r,i,o,a,u=0,l=0,c=0,s=0,w=0,g=0,d=0;n[(a=(e|=0)+8|0)>>2]=0,i=+t[A>>3],s=+f(+i),o=+t[A+8>>3],s+=.5*(w=+f(+o)/.8660254037844386),s-=+(0|(u=~~s)),w-=+(0|(A=~~w));do{if(s<.5){if(s<.3333333333333333){if(n[e>>2]=u,w<.5*(s+1)){n[e+4>>2]=A;break}A=A+1|0,n[e+4>>2]=A;break}if(A=(1&!(w<(d=1-s)))+A|0,n[e+4>>2]=A,d<=w&w<2*s){u=u+1|0,n[e>>2]=u;break}n[e>>2]=u;break}if(!(s<.6666666666666666)){if(u=u+1|0,n[e>>2]=u,w<.5*s){n[e+4>>2]=A;break}A=A+1|0,n[e+4>>2]=A;break}if(w<1-s){if(n[e+4>>2]=A,2*s-1<w){n[e>>2]=u;break}}else A=A+1|0,n[e+4>>2]=A;u=u+1|0,n[e>>2]=u}while(0);do{if(i<0){if(1&A){u=~~(+(0|u)-(2*(+((g=0|Qe(0|u,((0|u)<0)<<31>>31|0,0|(g=(A+1|0)/2|0),((0|g)<0)<<31>>31|0))>>>0)+4294967296*+(0|D()))+1)),n[e>>2]=u;break}u=~~(+(0|u)-2*(+((g=0|Qe(0|u,((0|u)<0)<<31>>31|0,0|(g=(0|A)/2|0),((0|g)<0)<<31>>31|0))>>>0)+4294967296*+(0|D()))),n[e>>2]=u;break}}while(0);g=e+4|0,o<0&&(u=u-((1|A<<1)/2|0)|0,n[e>>2]=u,A=0-A|0,n[g>>2]=A),l=A-u|0,(0|u)<0?(c=0-u|0,n[g>>2]=l,n[a>>2]=c,n[e>>2]=0,A=l,u=0):c=0,(0|A)<0&&(u=u-A|0,n[e>>2]=u,c=c-A|0,n[a>>2]=c,n[g>>2]=0,A=0),r=u-c|0,l=A-c|0,(0|c)<0&&(n[e>>2]=r,n[g>>2]=l,n[a>>2]=0,A=l,u=r,c=0),(0|(l=(0|c)<(0|(l=(0|A)<(0|u)?A:u))?c:l))<=0||(n[e>>2]=u-l,n[g>>2]=A-l,n[a>>2]=c-l)}function J(A){var e,r=0,i=0,t=0,o=0,a=0;r=0|n[(A|=0)>>2],i=0|n[(e=A+4|0)>>2],(0|r)<0&&(i=i-r|0,n[e>>2]=i,n[(a=A+8|0)>>2]=(0|n[a>>2])-r,n[A>>2]=0,r=0),(0|i)<0?(r=r-i|0,n[A>>2]=r,o=(0|n[(a=A+8|0)>>2])-i|0,n[a>>2]=o,n[e>>2]=0,i=0):(a=o=A+8|0,o=0|n[o>>2]),(0|o)<0&&(r=r-o|0,n[A>>2]=r,i=i-o|0,n[e>>2]=i,n[a>>2]=0,o=0),(0|(t=(0|o)<(0|(t=(0|i)<(0|r)?i:r))?o:t))<=0||(n[A>>2]=r-t,n[e>>2]=i-t,n[a>>2]=o-t)}function K(A,e){e|=0;var r,i;i=0|n[(A|=0)+8>>2],r=+((0|n[A+4>>2])-i|0),t[e>>3]=+((0|n[A>>2])-i|0)-.5*r,t[e+8>>3]=.8660254037844386*r}function X(A,e,r){A|=0,e|=0,n[(r|=0)>>2]=(0|n[e>>2])+(0|n[A>>2]),n[r+4>>2]=(0|n[e+4>>2])+(0|n[A+4>>2]),n[r+8>>2]=(0|n[e+8>>2])+(0|n[A+8>>2])}function q(A,e,r){A|=0,e|=0,n[(r|=0)>>2]=(0|n[A>>2])-(0|n[e>>2]),n[r+4>>2]=(0|n[A+4>>2])-(0|n[e+4>>2]),n[r+8>>2]=(0|n[A+8>>2])-(0|n[e+8>>2])}function $(A,e){e|=0;var r,i=0;i=0|k(0|n[(A|=0)>>2],e),n[A>>2]=i,r=0|k(0|n[(i=A+4|0)>>2],e),n[i>>2]=r,e=0|k(0|n[(A=A+8|0)>>2],e),n[A>>2]=e}function AA(A){var e,r,i=0,t=0,o=0,a=0,f=0;f=(0|(r=0|n[(A|=0)>>2]))<0,A=(A=(t=(0|(a=((e=(0|(o=(0|n[A+4>>2])-(f?r:0)|0))<0)?0-o|0:0)+((0|n[A+8>>2])-(f?r:0))|0))<0)?0:a)-((o=(0|(t=(0|A)<(0|(t=(0|(i=(e?0:o)-(t?a:0)|0))<(0|(a=(f?0:r)-(e?o:0)-(t?a:0)|0))?i:a))?A:t))>0)?t:0)|0,i=i-(o?t:0)|0;A:do{switch(a-(o?t:0)|0){case 0:switch(0|i){case 0:return 0|(f=0==(0|A)?0:1==(0|A)?1:7);case 1:return 0|(f=0==(0|A)?2:1==(0|A)?3:7);default:break A}case 1:switch(0|i){case 0:return 0|(f=0==(0|A)?4:1==(0|A)?5:7);case 1:if(A)break A;return 0|(A=6);default:break A}}}while(0);return 0|(f=7)}function eA(A){var e,r,i=0,t=0,o=0,a=0,f=0;t=0|n[(e=(A|=0)+8|0)>>2],o=0|Be(+((3*(i=(0|n[A>>2])-t|0)|0)-(t=(0|n[(r=A+4|0)>>2])-t|0)|0)/7),n[A>>2]=o,i=0|Be(+((t<<1)+i|0)/7),n[r>>2]=i,n[e>>2]=0,t=i-o|0,(0|o)<0?(f=0-o|0,n[r>>2]=t,n[e>>2]=f,n[A>>2]=0,i=t,o=0,t=f):t=0,(0|i)<0&&(o=o-i|0,n[A>>2]=o,t=t-i|0,n[e>>2]=t,n[r>>2]=0,i=0),f=o-t|0,a=i-t|0,(0|t)<0?(n[A>>2]=f,n[r>>2]=a,n[e>>2]=0,i=a,a=f,t=0):a=o,(0|(o=(0|t)<(0|(o=(0|i)<(0|a)?i:a))?t:o))<=0||(n[A>>2]=a-o,n[r>>2]=i-o,n[e>>2]=t-o)}function rA(A){var e,r,i=0,t=0,o=0,a=0,f=0;t=0|n[(e=(A|=0)+8|0)>>2],o=0|Be(+(((i=(0|n[A>>2])-t|0)<<1)+(t=(0|n[(r=A+4|0)>>2])-t|0)|0)/7),n[A>>2]=o,i=0|Be(+((3*t|0)-i|0)/7),n[r>>2]=i,n[e>>2]=0,t=i-o|0,(0|o)<0?(f=0-o|0,n[r>>2]=t,n[e>>2]=f,n[A>>2]=0,i=t,o=0,t=f):t=0,(0|i)<0&&(o=o-i|0,n[A>>2]=o,t=t-i|0,n[e>>2]=t,n[r>>2]=0,i=0),f=o-t|0,a=i-t|0,(0|t)<0?(n[A>>2]=f,n[r>>2]=a,n[e>>2]=0,i=a,a=f,t=0):a=o,(0|(o=(0|t)<(0|(o=(0|i)<(0|a)?i:a))?t:o))<=0||(n[A>>2]=a-o,n[r>>2]=i-o,n[e>>2]=t-o)}function iA(A){var e,r,i,t=0,o=0,a=0,f=0;t=0|n[(A|=0)>>2],o=0|n[(r=A+4|0)>>2],a=0|n[(i=A+8|0)>>2],f=o+(3*t|0)|0,n[A>>2]=f,o=a+(3*o|0)|0,n[r>>2]=o,t=(3*a|0)+t|0,n[i>>2]=t,a=o-f|0,(0|f)<0?(t=t-f|0,n[r>>2]=a,n[i>>2]=t,n[A>>2]=0,o=a,a=0):a=f,(0|o)<0&&(a=a-o|0,n[A>>2]=a,t=t-o|0,n[i>>2]=t,n[r>>2]=0,o=0),e=a-t|0,f=o-t|0,(0|t)<0?(n[A>>2]=e,n[r>>2]=f,n[i>>2]=0,a=e,t=0):f=o,(0|(o=(0|t)<(0|(o=(0|f)<(0|a)?f:a))?t:o))<=0||(n[A>>2]=a-o,n[r>>2]=f-o,n[i>>2]=t-o)}function nA(A){var e,r,i,t=0,o=0,a=0,f=0;f=0|n[(A|=0)>>2],a=(3*(t=0|n[(r=A+4|0)>>2])|0)+f|0,f=(o=0|n[(i=A+8|0)>>2])+(3*f|0)|0,n[A>>2]=f,n[r>>2]=a,t=(3*o|0)+t|0,n[i>>2]=t,o=a-f|0,(0|f)<0?(t=t-f|0,n[r>>2]=o,n[i>>2]=t,n[A>>2]=0,f=0):o=a,(0|o)<0&&(f=f-o|0,n[A>>2]=f,t=t-o|0,n[i>>2]=t,n[r>>2]=0,o=0),e=f-t|0,a=o-t|0,(0|t)<0?(n[A>>2]=e,n[r>>2]=a,n[i>>2]=0,f=e,t=0):a=o,(0|(o=(0|t)<(0|(o=(0|a)<(0|f)?a:f))?t:o))<=0||(n[A>>2]=f-o,n[r>>2]=a-o,n[i>>2]=t-o)}function tA(A,e){A|=0;var r,i,t,o=0,a=0,f=0;((e|=0)+-1|0)>>>0>=6||(f=(0|n[15472+(12*e|0)>>2])+(0|n[A>>2])|0,n[A>>2]=f,t=A+4|0,a=(0|n[15472+(12*e|0)+4>>2])+(0|n[t>>2])|0,n[t>>2]=a,i=A+8|0,e=(0|n[15472+(12*e|0)+8>>2])+(0|n[i>>2])|0,n[i>>2]=e,o=a-f|0,(0|f)<0?(e=e-f|0,n[t>>2]=o,n[i>>2]=e,n[A>>2]=0,a=0):(o=a,a=f),(0|o)<0&&(a=a-o|0,n[A>>2]=a,e=e-o|0,n[i>>2]=e,n[t>>2]=0,o=0),r=a-e|0,f=o-e|0,(0|e)<0?(n[A>>2]=r,n[t>>2]=f,n[i>>2]=0,a=r,e=0):f=o,(0|(o=(0|e)<(0|(o=(0|f)<(0|a)?f:a))?e:o))<=0||(n[A>>2]=a-o,n[t>>2]=f-o,n[i>>2]=e-o))}function oA(A){var e,r,i,t=0,o=0,a=0,f=0;f=0|n[(A|=0)>>2],a=(t=0|n[(r=A+4|0)>>2])+f|0,f=(o=0|n[(i=A+8|0)>>2])+f|0,n[A>>2]=f,n[r>>2]=a,t=o+t|0,n[i>>2]=t,o=a-f|0,(0|f)<0?(t=t-f|0,n[r>>2]=o,n[i>>2]=t,n[A>>2]=0,a=0):(o=a,a=f),(0|o)<0&&(a=a-o|0,n[A>>2]=a,t=t-o|0,n[i>>2]=t,n[r>>2]=0,o=0),e=a-t|0,f=o-t|0,(0|t)<0?(n[A>>2]=e,n[r>>2]=f,n[i>>2]=0,a=e,t=0):f=o,(0|(o=(0|t)<(0|(o=(0|f)<(0|a)?f:a))?t:o))<=0||(n[A>>2]=a-o,n[r>>2]=f-o,n[i>>2]=t-o)}function aA(A){var e,r,i,t=0,o=0,a=0,f=0;t=0|n[(A|=0)>>2],a=0|n[(r=A+4|0)>>2],o=0|n[(i=A+8|0)>>2],f=a+t|0,n[A>>2]=f,a=o+a|0,n[r>>2]=a,t=o+t|0,n[i>>2]=t,o=a-f|0,(0|f)<0?(t=t-f|0,n[r>>2]=o,n[i>>2]=t,n[A>>2]=0,a=0):(o=a,a=f),(0|o)<0&&(a=a-o|0,n[A>>2]=a,t=t-o|0,n[i>>2]=t,n[r>>2]=0,o=0),e=a-t|0,f=o-t|0,(0|t)<0?(n[A>>2]=e,n[r>>2]=f,n[i>>2]=0,a=e,t=0):f=o,(0|(o=(0|t)<(0|(o=(0|f)<(0|a)?f:a))?t:o))<=0||(n[A>>2]=a-o,n[r>>2]=f-o,n[i>>2]=t-o)}function fA(A){switch(0|(A|=0)){case 1:A=5;break;case 5:A=4;break;case 4:A=6;break;case 6:A=2;break;case 2:A=3;break;case 3:A=1}return 0|A}function uA(A){switch(0|(A|=0)){case 1:A=3;break;case 3:A=2;break;case 2:A=6;break;case 6:A=4;break;case 4:A=5;break;case 5:A=1}return 0|A}function lA(A){var e,r,i,t=0,o=0,a=0,f=0;t=0|n[(A|=0)>>2],o=0|n[(r=A+4|0)>>2],a=0|n[(i=A+8|0)>>2],f=o+(t<<1)|0,n[A>>2]=f,o=a+(o<<1)|0,n[r>>2]=o,t=(a<<1)+t|0,n[i>>2]=t,a=o-f|0,(0|f)<0?(t=t-f|0,n[r>>2]=a,n[i>>2]=t,n[A>>2]=0,o=a,a=0):a=f,(0|o)<0&&(a=a-o|0,n[A>>2]=a,t=t-o|0,n[i>>2]=t,n[r>>2]=0,o=0),e=a-t|0,f=o-t|0,(0|t)<0?(n[A>>2]=e,n[r>>2]=f,n[i>>2]=0,a=e,t=0):f=o,(0|(o=(0|t)<(0|(o=(0|f)<(0|a)?f:a))?t:o))<=0||(n[A>>2]=a-o,n[r>>2]=f-o,n[i>>2]=t-o)}function cA(A){var e,r,i,t=0,o=0,a=0,f=0;f=0|n[(A|=0)>>2],a=((t=0|n[(r=A+4|0)>>2])<<1)+f|0,f=(o=0|n[(i=A+8|0)>>2])+(f<<1)|0,n[A>>2]=f,n[r>>2]=a,t=(o<<1)+t|0,n[i>>2]=t,o=a-f|0,(0|f)<0?(t=t-f|0,n[r>>2]=o,n[i>>2]=t,n[A>>2]=0,f=0):o=a,(0|o)<0&&(f=f-o|0,n[A>>2]=f,t=t-o|0,n[i>>2]=t,n[r>>2]=0,o=0),e=f-t|0,a=o-t|0,(0|t)<0?(n[A>>2]=e,n[r>>2]=a,n[i>>2]=0,f=e,t=0):a=o,(0|(o=(0|t)<(0|(o=(0|a)<(0|f)?a:f))?t:o))<=0||(n[A>>2]=f-o,n[r>>2]=a-o,n[i>>2]=t-o)}function sA(A,e){e|=0;var r,i,t,o=0,a=0,f=0;return t=(0|(i=(0|n[(A|=0)>>2])-(0|n[e>>2])|0))<0,r=(0|(a=(0|n[A+4>>2])-(0|n[e+4>>2])-(t?i:0)|0))<0,e=(e=(A=(0|(f=(t?0-i|0:0)+(0|n[A+8>>2])-(0|n[e+8>>2])+(r?0-a|0:0)|0))<0)?0:f)-((a=(0|(A=(0|e)<(0|(A=(0|(o=(r?0:a)-(A?f:0)|0))<(0|(f=(t?0:i)-(r?a:0)-(A?f:0)|0))?o:f))?e:A))>0)?A:0)|0,o=o-(a?A:0)|0,0|((0|(A=(0|(A=f-(a?A:0)|0))>-1?A:0-A|0))>(0|(e=(0|(o=(0|o)>-1?o:0-o|0))>(0|(e=(0|e)>-1?e:0-e|0))?o:e))?A:e)}function wA(A,e){e|=0;var r;r=0|n[(A|=0)+8>>2],n[e>>2]=(0|n[A>>2])-r,n[e+4>>2]=(0|n[A+4>>2])-r}function gA(A,e){e|=0;var r,i,t,o=0,a=0,f=0;a=0|n[(A|=0)>>2],n[e>>2]=a,A=0|n[A+4>>2],n[(i=e+4|0)>>2]=A,n[(t=e+8|0)>>2]=0,o=A-a|0,(0|a)<0?(A=0-a|0,n[i>>2]=o,n[t>>2]=A,n[e>>2]=0,a=0):(o=A,A=0),(0|o)<0&&(a=a-o|0,n[e>>2]=a,A=A-o|0,n[t>>2]=A,n[i>>2]=0,o=0),r=a-A|0,f=o-A|0,(0|A)<0?(n[e>>2]=r,n[i>>2]=f,n[t>>2]=0,o=f,f=r,A=0):f=a,(0|(a=(0|A)<(0|(a=(0|o)<(0|f)?o:f))?A:a))<=0||(n[e>>2]=f-a,n[i>>2]=o-a,n[t>>2]=A-a)}function dA(A){var e,r,i,t;r=(t=0|n[(e=(A|=0)+8|0)>>2])-(0|n[A>>2])|0,n[A>>2]=r,A=(0|n[(i=A+4|0)>>2])-t|0,n[i>>2]=A,n[e>>2]=0-(A+r)}function BA(A){var e,r,i=0,t=0,o=0,a=0,f=0;i=0-(t=0|n[(A|=0)>>2])|0,n[A>>2]=i,n[(e=A+8|0)>>2]=0,a=(o=0|n[(r=A+4|0)>>2])+t|0,(0|t)>0?(n[r>>2]=a,n[e>>2]=t,n[A>>2]=0,i=0,o=a):t=0,(0|o)<0?(f=i-o|0,n[A>>2]=f,t=t-o|0,n[e>>2]=t,n[r>>2]=0,a=f-t|0,i=0-t|0,(0|t)<0?(n[A>>2]=a,n[r>>2]=i,n[e>>2]=0,o=i,t=0):(o=0,a=f)):a=i,(0|(i=(0|t)<(0|(i=(0|o)<(0|a)?o:a))?t:i))<=0||(n[A>>2]=a-i,n[r>>2]=o-i,n[e>>2]=t-i)}function hA(A,e,r,i){e|=0,r|=0,i|=0;var o,a=0,f=0,u=0,l=0;if(o=x,x=x+32|0,function(A,e){e|=0;var r=0,i=0,n=0;r=+t[(A|=0)>>3],i=+c(+r),r=+s(+r),t[e+16>>3]=r,r=+t[A+8>>3],n=i*+c(+r),t[e>>3]=n,r=i*+s(+r),t[e+8>>3]=r}(A|=0,f=o),n[r>>2]=0,a=+fe(15888,f),(u=+fe(15912,f))<a&&(n[r>>2]=1,a=u),(u=+fe(15936,f))<a&&(n[r>>2]=2,a=u),(u=+fe(15960,f))<a&&(n[r>>2]=3,a=u),(u=+fe(15984,f))<a&&(n[r>>2]=4,a=u),(u=+fe(16008,f))<a&&(n[r>>2]=5,a=u),(u=+fe(16032,f))<a&&(n[r>>2]=6,a=u),(u=+fe(16056,f))<a&&(n[r>>2]=7,a=u),(u=+fe(16080,f))<a&&(n[r>>2]=8,a=u),(u=+fe(16104,f))<a&&(n[r>>2]=9,a=u),(u=+fe(16128,f))<a&&(n[r>>2]=10,a=u),(u=+fe(16152,f))<a&&(n[r>>2]=11,a=u),(u=+fe(16176,f))<a&&(n[r>>2]=12,a=u),(u=+fe(16200,f))<a&&(n[r>>2]=13,a=u),(u=+fe(16224,f))<a&&(n[r>>2]=14,a=u),(u=+fe(16248,f))<a&&(n[r>>2]=15,a=u),(u=+fe(16272,f))<a&&(n[r>>2]=16,a=u),(u=+fe(16296,f))<a&&(n[r>>2]=17,a=u),(u=+fe(16320,f))<a&&(n[r>>2]=18,a=u),(u=+fe(16344,f))<a&&(n[r>>2]=19,a=u),(u=+g(+(1-.5*a)))<1e-16)return n[i>>2]=0,n[i+4>>2]=0,n[i+8>>2]=0,n[i+12>>2]=0,void(x=o);if(r=0|n[r>>2],a=+IA((a=+t[16368+(24*r|0)>>3])-+IA(+function(A,e){A|=0;var r=0,i=0,n=0,o=0,a=0;return o=+t[(e|=0)>>3],i=+c(+o),n=+t[e+8>>3]-+t[A+8>>3],a=i*+s(+n),r=+t[A>>3],+ +h(+a,+(+s(+o)*+c(+r)-+c(+n)*(i*+s(+r))))}(15568+(r<<4)|0,A))),l=0|LA(e)?+IA(a+-.3334731722518321):a,a=+w(+u)/.381966011250105,(0|e)>0){f=0;do{a*=2.6457513110645907,f=f+1|0}while((0|f)!=(0|e))}u=+c(+l)*a,t[i>>3]=u,l=+s(+l)*a,t[i+8>>3]=l,x=o}function bA(A,e,r,i,o){e|=0,r|=0,i|=0,o|=0;var a=0,l=0;if((a=+function(A){var e=0,r=0;return r=+t[(A|=0)>>3],e=+t[A+8>>3],+ +u(+(r*r+e*e))}(A|=0))<1e-16)return e=15568+(e<<4)|0,n[o>>2]=n[e>>2],n[o+4>>2]=n[e+4>>2],n[o+8>>2]=n[e+8>>2],void(n[o+12>>2]=n[e+12>>2]);if(l=+h(+ +t[A+8>>3],+ +t[A>>3]),(0|r)>0){A=0;do{a/=2.6457513110645907,A=A+1|0}while((0|A)!=(0|r))}i?(a/=3,r=0==(0|LA(r)),a=+B(.381966011250105*(r?a:a/2.6457513110645907))):(a=+B(.381966011250105*a),0|LA(r)&&(l=+IA(l+.3334731722518321))),function(A,e,r,i){A|=0,e=+e,i|=0;var o=0,a=0,u=0,l=0;if((r=+r)<1e-16)return n[i>>2]=n[A>>2],n[i+4>>2]=n[A+4>>2],n[i+8>>2]=n[A+8>>2],void(n[i+12>>2]=n[A+12>>2]);a=e<0?e+6.283185307179586:e,a=e>=6.283185307179586?a+-6.283185307179586:a;do{if(!(a<1e-16)){if(o=+f(+(a+-3.141592653589793))<1e-16,e=+t[A>>3],o){e-=r,t[i>>3]=e,o=i;break}if(u=+c(+r),r=+s(+r),e=u*+s(+e)+ +c(+a)*(r*+c(+e)),e=+d(+((e=e>1?1:e)<-1?-1:e)),t[i>>3]=e,+f(+(e+-1.5707963267948966))<1e-16)return t[i>>3]=1.5707963267948966,void(t[i+8>>3]=0);if(+f(+(e+1.5707963267948966))<1e-16)return t[i>>3]=-1.5707963267948966,void(t[i+8>>3]=0);if(l=+c(+e),a=r*+s(+a)/l,r=+t[A>>3],e=(u-+s(+e)*+s(+r))/+c(+r)/l,u=a>1?1:a,e=e>1?1:e,(e=+t[A+8>>3]+ +h(+(u<-1?-1:u),+(e<-1?-1:e)))>3.141592653589793)do{e+=-6.283185307179586}while(e>3.141592653589793);if(e<-3.141592653589793)do{e+=6.283185307179586}while(e<-3.141592653589793);return void(t[i+8>>3]=e)}e=+t[A>>3]+r,t[i>>3]=e,o=i}while(0);if(+f(+(e+-1.5707963267948966))<1e-16)return t[o>>3]=1.5707963267948966,void(t[i+8>>3]=0);if(+f(+(e+1.5707963267948966))<1e-16)return t[o>>3]=-1.5707963267948966,void(t[i+8>>3]=0);if((e=+t[A+8>>3])>3.141592653589793)do{e+=-6.283185307179586}while(e>3.141592653589793);if(e<-3.141592653589793)do{e+=6.283185307179586}while(e<-3.141592653589793);t[i+8>>3]=e}(15568+(e<<4)|0,+IA(+t[16368+(24*e|0)>>3]-l),a,o)}function kA(A,e,r){e|=0,r|=0;var i,t;i=x,x=x+16|0,K((A|=0)+4|0,t=i),bA(t,0|n[A>>2],e,0,r),x=i}function QA(A,e,r,i,o){A|=0,e|=0,r|=0,i|=0,o|=0;var a,f,u,l,c,s,w,g,d,B,h,b,k,Q,E,M,D,m,I,_,C,p,F=0,U=0,G=0,y=0,H=0,T=0;if(p=x,x=x+272|0,y=p+240|0,I=p,_=p+224|0,C=p+208|0,h=p+176|0,b=p+160|0,k=p+192|0,Q=p+144|0,E=p+128|0,M=p+112|0,D=p+96|0,m=p+80|0,n[(F=p+256|0)>>2]=e,n[y>>2]=n[A>>2],n[y+4>>2]=n[A+4>>2],n[y+8>>2]=n[A+8>>2],n[y+12>>2]=n[A+12>>2],EA(y,F,I),n[o>>2]=0,(0|(y=i+r+(5==(0|i)&1)|0))<=(0|r))x=p;else{f=_+4|0,u=h+4|0,l=r+5|0,c=16848+((a=0|n[F>>2])<<2)|0,s=16928+(a<<2)|0,w=E+8|0,g=M+8|0,d=D+8|0,B=C+4|0,G=r;A:for(;;){U=I+(((0|G)%5|0)<<4)|0,n[C>>2]=n[U>>2],n[C+4>>2]=n[U+4>>2],n[C+8>>2]=n[U+8>>2],n[C+12>>2]=n[U+12>>2];do{}while(2==(0|MA(C,a,0,1)));if((0|G)>(0|r)&0!=(0|LA(e))){if(n[h>>2]=n[C>>2],n[h+4>>2]=n[C+4>>2],n[h+8>>2]=n[C+8>>2],n[h+12>>2]=n[C+12>>2],K(f,b),i=0|n[h>>2],F=0|n[17008+(80*i|0)+(n[_>>2]<<2)>>2],n[h>>2]=n[18608+(80*i|0)+(20*F|0)>>2],(0|(U=0|n[18608+(80*i|0)+(20*F|0)+16>>2]))>0){A=0;do{oA(u),A=A+1|0}while((0|A)<(0|U))}switch(U=18608+(80*i|0)+(20*F|0)+4|0,n[k>>2]=n[U>>2],n[k+4>>2]=n[U+4>>2],n[k+8>>2]=n[U+8>>2],$(k,3*(0|n[c>>2])|0),X(u,k,u),J(u),K(u,Q),H=+(0|n[s>>2]),t[E>>3]=3*H,t[w>>3]=0,T=-1.5*H,t[M>>3]=T,t[g>>3]=2.598076211353316*H,t[D>>3]=T,t[d>>3]=-2.598076211353316*H,0|n[17008+(80*(0|n[h>>2])|0)+(n[C>>2]<<2)>>2]){case 1:A=M,i=E;break;case 3:A=D,i=M;break;case 2:A=E,i=D;break;default:A=12;break A}oe(b,Q,i,A,m),bA(m,0|n[h>>2],a,1,o+8+(n[o>>2]<<4)|0),n[o>>2]=1+(0|n[o>>2])}if((0|G)<(0|l)&&(K(B,h),bA(h,0|n[C>>2],a,1,o+8+(n[o>>2]<<4)|0),n[o>>2]=1+(0|n[o>>2])),n[_>>2]=n[C>>2],n[_+4>>2]=n[C+4>>2],n[_+8>>2]=n[C+8>>2],n[_+12>>2]=n[C+12>>2],(0|(G=G+1|0))>=(0|y)){A=3;break}}3!=(0|A)?12==(0|A)&&v(22474,22521,581,22531):x=p}}function EA(A,e,r){A|=0,e|=0,r|=0;var i,t=0,o=0,a=0,f=0,u=0;i=x,x=x+128|0,o=i,f=20208,u=(a=t=i+64|0)+60|0;do{n[a>>2]=n[f>>2],a=a+4|0,f=f+4|0}while((0|a)<(0|u));f=20272,u=(a=o)+60|0;do{n[a>>2]=n[f>>2],a=a+4|0,f=f+4|0}while((0|a)<(0|u));t=(u=0==(0|LA(0|n[e>>2])))?t:o,lA(o=A+4|0),cA(o),0|LA(0|n[e>>2])&&(nA(o),n[e>>2]=1+(0|n[e>>2])),n[r>>2]=n[A>>2],X(o,t,e=r+4|0),J(e),n[r+16>>2]=n[A>>2],X(o,t+12|0,e=r+20|0),J(e),n[r+32>>2]=n[A>>2],X(o,t+24|0,e=r+36|0),J(e),n[r+48>>2]=n[A>>2],X(o,t+36|0,e=r+52|0),J(e),n[r+64>>2]=n[A>>2],X(o,t+48|0,r=r+68|0),J(r),x=i}function MA(A,e,r,i){r|=0,i|=0;var t,o,a,f,u,l,c=0,s=0,w=0,g=0,d=0;if(l=x,x=x+32|0,u=l+12|0,o=l,d=(A|=0)+4|0,g=0|n[16928+((e|=0)<<2)>>2],g=(f=0!=(0|i))?3*g|0:g,c=0|n[d>>2],t=0|n[(a=A+8|0)>>2],f){if((0|(c=t+c+(i=0|n[(s=A+12|0)>>2])|0))==(0|g))return x=l,0|(d=1);w=s}else c=t+c+(i=0|n[(w=A+12|0)>>2])|0;if((0|c)<=(0|g))return x=l,0|(d=0);do{if((0|i)>0){if(i=0|n[A>>2],(0|t)>0){s=18608+(80*i|0)+60|0,i=A;break}i=18608+(80*i|0)+40|0,r?(Z(u,g,0,0),q(d,u,o),aA(o),X(o,u,d),s=i,i=A):(s=i,i=A)}else s=18608+(80*(0|n[A>>2])|0)+20|0,i=A}while(0);if(n[i>>2]=n[s>>2],(0|n[(c=s+16|0)>>2])>0){i=0;do{oA(d),i=i+1|0}while((0|i)<(0|n[c>>2]))}return A=s+4|0,n[u>>2]=n[A>>2],n[u+4>>2]=n[A+4>>2],n[u+8>>2]=n[A+8>>2],e=0|n[16848+(e<<2)>>2],$(u,f?3*e|0:e),X(d,u,d),J(d),i=f&&((0|n[a>>2])+(0|n[d>>2])+(0|n[w>>2])|0)==(0|g)?1:2,x=l,0|(d=i)}function DA(A,e){A|=0,e|=0;var r=0;do{r=0|MA(A,e,0,1)}while(2==(0|r));return 0|r}function vA(A,e,r,i,o){A|=0,e|=0,r|=0,i|=0,o|=0;var a,f,u,l,c,s,w,g,d,B,h,b,k,Q,E,M,D,m,I=0,_=0,C=0,p=0,F=0;if(m=x,x=x+240|0,Q=m+208|0,E=m,M=m+192|0,D=m+176|0,d=m+160|0,B=m+144|0,h=m+128|0,b=m+112|0,k=m+96|0,n[(I=m+224|0)>>2]=e,n[Q>>2]=n[A>>2],n[Q+4>>2]=n[A+4>>2],n[Q+8>>2]=n[A+8>>2],n[Q+12>>2]=n[A+12>>2],mA(Q,I,E),n[o>>2]=0,(0|(g=i+r+(6==(0|i)&1)|0))<=(0|r))x=m;else{f=r+6|0,u=16928+((a=0|n[I>>2])<<2)|0,l=B+8|0,c=h+8|0,s=b+8|0,w=M+4|0,_=0,C=r,i=-1;A:for(;;){if(A=E+((I=(0|C)%6|0)<<4)|0,n[M>>2]=n[A>>2],n[M+4>>2]=n[A+4>>2],n[M+8>>2]=n[A+8>>2],n[M+12>>2]=n[A+12>>2],A=_,_=0|MA(M,a,0,1),(0|C)>(0|r)&0!=(0|LA(e))&&(1!=(0|A)&&(0|n[M>>2])!=(0|i))){switch(K(E+(((I+5|0)%6|0)<<4)+4|0,D),K(E+(I<<4)+4|0,d),p=+(0|n[u>>2]),t[B>>3]=3*p,t[l>>3]=0,F=-1.5*p,t[h>>3]=F,t[c>>3]=2.598076211353316*p,t[b>>3]=F,t[s>>3]=-2.598076211353316*p,I=0|n[Q>>2],0|n[17008+(80*I|0)+(((0|i)==(0|I)?0|n[M>>2]:i)<<2)>>2]){case 1:A=h,i=B;break;case 3:A=b,i=h;break;case 2:A=B,i=b;break;default:A=8;break A}oe(D,d,i,A,k),0|ae(D,k)||0|ae(d,k)||(bA(k,0|n[Q>>2],a,1,o+8+(n[o>>2]<<4)|0),n[o>>2]=1+(0|n[o>>2]))}if((0|C)<(0|f)&&(K(w,D),bA(D,0|n[M>>2],a,1,o+8+(n[o>>2]<<4)|0),n[o>>2]=1+(0|n[o>>2])),(0|(C=C+1|0))>=(0|g)){A=3;break}i=0|n[M>>2]}3!=(0|A)?8==(0|A)&&v(22557,22521,746,22602):x=m}}function mA(A,e,r){A|=0,e|=0,r|=0;var i,t=0,o=0,a=0,f=0,u=0;i=x,x=x+160|0,o=i,f=20336,u=(a=t=i+80|0)+72|0;do{n[a>>2]=n[f>>2],a=a+4|0,f=f+4|0}while((0|a)<(0|u));f=20416,u=(a=o)+72|0;do{n[a>>2]=n[f>>2],a=a+4|0,f=f+4|0}while((0|a)<(0|u));t=(u=0==(0|LA(0|n[e>>2])))?t:o,lA(o=A+4|0),cA(o),0|LA(0|n[e>>2])&&(nA(o),n[e>>2]=1+(0|n[e>>2])),n[r>>2]=n[A>>2],X(o,t,e=r+4|0),J(e),n[r+16>>2]=n[A>>2],X(o,t+12|0,e=r+20|0),J(e),n[r+32>>2]=n[A>>2],X(o,t+24|0,e=r+36|0),J(e),n[r+48>>2]=n[A>>2],X(o,t+36|0,e=r+52|0),J(e),n[r+64>>2]=n[A>>2],X(o,t+48|0,e=r+68|0),J(e),n[r+80>>2]=n[A>>2],X(o,t+60|0,r=r+84|0),J(r),x=i}function IA(A){var e;return e=(A=+A)<0?A+6.283185307179586:A,+(A>=6.283185307179586?e+-6.283185307179586:e)}function _A(A,e){return e|=0,+f(+(+t[(A|=0)>>3]-+t[e>>3]))<1.7453292519943298e-11?0|(e=+f(+(+t[A+8>>3]-+t[e+8>>3]))<1.7453292519943298e-11):0|(e=0)}function CA(A,e){A|=0;var r,i,n,o=0;return i=+t[(e|=0)>>3],r=+t[A>>3],o=(n=+s(.5*(i-r)))*n+(o=+s(.5*(+t[e+8>>3]-+t[A+8>>3])))*(+c(+i)*+c(+r)*o),2*+h(+ +u(+o),+ +u(+(1-o)))*6371.007180918475}function pA(A,e,r){A|=0,r|=0;var i,n,o,a,f=0,l=0,g=0,d=0,b=0,k=0;return k=+t[(e|=0)>>3],o=+t[A>>3],b=+s(.5*(k-o)),g=+t[e+8>>3],n=+t[A+8>>3],d=+s(.5*(g-n)),i=+c(+o),a=+c(+k),d=2*+h(+ +u(+(d=b*b+d*(a*i*d))),+ +u(+(1-d))),b=+t[r>>3],k=+s(.5*(b-k)),f=+t[r+8>>3],g=+s(.5*(f-g)),l=+c(+b),g=2*+h(+ +u(+(g=k*k+g*(a*l*g))),+ +u(+(1-g))),b=+s(.5*(o-b)),f=+s(.5*(n-f)),f=2*+h(+ +u(+(f=b*b+f*(i*l*f))),+ +u(+(1-f))),4*+B(+ +u(+ +w(.5*(l=.5*(d+g+f)))*+w(.5*(l-d))*+w(.5*(l-g))*+w(.5*(l-f))))}function xA(A,e){return e=0|ve(0|(A|=0),0|(e|=0),45),D(),127&e|0}function FA(A,e){var r=0,i=0,n=0,t=0,o=0,a=0;if(!(!0&134217728==(-16777216&(e|=0)|0)))return 0|(e=0);if(o=0|ve(0|(A|=0),0|e,45),D(),(o&=127)>>>0>121)return 0|(e=0);r=0|ve(0|A,0|e,52),D(),r&=15;do{if(0|r){for(n=1,i=0;;){if(t=0|ve(0|A,0|e,3*(15-n|0)|0),D(),0!=(0|(t&=7))&(1^i)){if(1==(0|t)&0!=(0|T(o))){a=0,i=13;break}i=1}if(7==(0|t)){a=0,i=13;break}if(!(n>>>0<r>>>0)){i=9;break}n=n+1|0}if(9==(0|i)){if(15!=(0|r))break;return 0|(a=1)}if(13==(0|i))return 0|a}}while(0);for(;;){if(a=0|ve(0|A,0|e,3*(14-r|0)|0),D(),!(7==(7&a|0)&!0)){a=0,i=13;break}if(!(r>>>0<14)){a=1,i=13;break}r=r+1|0}return 13==(0|i)?0|a:0}function UA(A,e,r){r|=0;var i=0,n=0;if(i=0|ve(0|(A|=0),0|(e|=0),52),D(),(0|(i&=15))>=(0|r)){if((0|i)!=(0|r))if(r>>>0<=15){if(A|=n=0|me(0|r,0,52),e=0|D()|-15728641&e,(0|i)>(0|r))do{n=0|me(7,0,3*(14-r|0)|0),r=r+1|0,A|=n,e=0|D()|e}while((0|r)<(0|i))}else e=0,A=0}else e=0,A=0;return M(0|e),0|A}function GA(A,e,r,i){r|=0,i|=0;var t,o=0,a=0,f=0,u=0,l=0,c=0;if(f=0|ve(0|(A|=0),0|(e|=0),52),D(),(0|r)<16&(0|(f&=15))<=(0|r)){if((0|f)==(0|r))return n[(r=i)>>2]=A,void(n[r+4>>2]=e);if(t=(0|(l=0|ee(7,r-f|0)))/7|0,u=0|ve(0|A,0|e,45),D(),0|T(127&u)){A:do{if(f)for(a=1;;){if(o=0|ve(0|A,0|e,3*(15-a|0)|0),D(),0|(o&=7))break A;if(!(a>>>0<f>>>0)){o=0;break}a=a+1|0}else o=0}while(0);a=0==(0|o)}else a=0;if(c=0|me(f+1|0,0,52),o=0|D()|-15728641&e,GA(e=(c|A)&~(e=0|me(7,0,0|(u=3*(14-f|0)|0))),f=o&~(0|D()),r,i),o=i+(t<<3)|0,!a)return GA((c=0|me(1,0,0|u))|e,0|D()|f,r,o),c=o+(t<<3)|0,GA((l=0|me(2,0,0|u))|e,0|D()|f,r,c),c=c+(t<<3)|0,GA((l=0|me(3,0,0|u))|e,0|D()|f,r,c),c=c+(t<<3)|0,GA((l=0|me(4,0,0|u))|e,0|D()|f,r,c),c=c+(t<<3)|0,GA((l=0|me(5,0,0|u))|e,0|D()|f,r,c),void GA((l=0|me(6,0,0|u))|e,0|D()|f,r,c+(t<<3)|0);a=o+(t<<3)|0,(0|l)>6&&(pe(0|o,0,(c=(a>>>0>(l=o+8|0)>>>0?a:l)+-1+(0-o)|0)+8&-8|0),o=l+(c>>>3<<3)|0),GA((c=0|me(2,0,0|u))|e,0|D()|f,r,o),c=o+(t<<3)|0,GA((l=0|me(3,0,0|u))|e,0|D()|f,r,c),c=c+(t<<3)|0,GA((l=0|me(4,0,0|u))|e,0|D()|f,r,c),c=c+(t<<3)|0,GA((l=0|me(5,0,0|u))|e,0|D()|f,r,c),GA((l=0|me(6,0,0|u))|e,0|D()|f,r,c+(t<<3)|0)}}function yA(A,e){var r=0,i=0,n=0;if(n=0|ve(0|(A|=0),0|(e|=0),45),D(),!(0|T(127&n)))return 0|(n=0);n=0|ve(0|A,0|e,52),D(),n&=15;A:do{if(n)for(i=1;;){if(r=0|ve(0|A,0|e,3*(15-i|0)|0),D(),0|(r&=7))break A;if(!(i>>>0<n>>>0)){r=0;break}i=i+1|0}else r=0}while(0);return 0|(n=0==(0|r)&1)}function HA(A,e){var r=0,i=0,n=0;if(n=0|ve(0|(A|=0),0|(e|=0),52),D(),!(n&=15))return 0|(n=0);for(i=1;;){if(r=0|ve(0|A,0|e,3*(15-i|0)|0),D(),0|(r&=7)){i=5;break}if(!(i>>>0<n>>>0)){r=0,i=5;break}i=i+1|0}return 5==(0|i)?0|r:0}function TA(A,e){var r=0,i=0,n=0,t=0,o=0,a=0,f=0;if(f=0|ve(0|(A|=0),0|(e|=0),52),D(),!(f&=15))return f=A,M(0|(a=e)),0|f;for(a=1,r=0;;){i=0|me(7,0,0|(t=3*(15-a|0)|0)),n=0|D(),o=0|ve(0|A,0|e,0|t),D(),A=(t=0|me(0|fA(7&o),0,0|t))|A&~i,e=(o=0|D())|e&~n;A:do{if(!r)if(0==(t&i|0)&0==(o&n|0))r=0;else if(i=0|ve(0|A,0|e,52),D(),i&=15){r=1;e:for(;;){switch(o=0|ve(0|A,0|e,3*(15-r|0)|0),D(),7&o){case 1:break e;case 0:break;default:r=1;break A}if(!(r>>>0<i>>>0)){r=1;break A}r=r+1|0}for(r=1;;){if(n=0|ve(0|A,0|e,0|(o=3*(15-r|0)|0)),D(),t=0|me(7,0,0|o),e&=~(0|D()),A=A&~t|(o=0|me(0|fA(7&n),0,0|o)),e=0|e|D(),!(r>>>0<i>>>0)){r=1;break}r=r+1|0}}else r=1}while(0);if(!(a>>>0<f>>>0))break;a=a+1|0}return M(0|e),0|A}function PA(A,e){var r=0,i=0,n=0,t=0,o=0;if(i=0|ve(0|(A|=0),0|(e|=0),52),D(),!(i&=15))return i=A,M(0|(r=e)),0|i;for(r=1;o=0|ve(0|A,0|e,0|(t=3*(15-r|0)|0)),D(),n=0|me(7,0,0|t),e&=~(0|D()),A=(t=0|me(0|fA(7&o),0,0|t))|A&~n,e=0|D()|e,r>>>0<i>>>0;)r=r+1|0;return M(0|e),0|A}function RA(A,e){var r=0,i=0,n=0,t=0,o=0,a=0,f=0;if(f=0|ve(0|(A|=0),0|(e|=0),52),D(),!(f&=15))return f=A,M(0|(a=e)),0|f;for(a=1,r=0;;){i=0|me(7,0,0|(t=3*(15-a|0)|0)),n=0|D(),o=0|ve(0|A,0|e,0|t),D(),A=(t=0|me(0|uA(7&o),0,0|t))|A&~i,e=(o=0|D())|e&~n;A:do{if(!r)if(0==(t&i|0)&0==(o&n|0))r=0;else if(i=0|ve(0|A,0|e,52),D(),i&=15){r=1;e:for(;;){switch(o=0|ve(0|A,0|e,3*(15-r|0)|0),D(),7&o){case 1:break e;case 0:break;default:r=1;break A}if(!(r>>>0<i>>>0)){r=1;break A}r=r+1|0}for(r=1;;){if(t=0|me(7,0,0|(n=3*(15-r|0)|0)),o=e&~(0|D()),e=0|ve(0|A,0|e,0|n),D(),A=A&~t|(e=0|me(0|uA(7&e),0,0|n)),e=0|o|D(),!(r>>>0<i>>>0)){r=1;break}r=r+1|0}}else r=1}while(0);if(!(a>>>0<f>>>0))break;a=a+1|0}return M(0|e),0|A}function SA(A,e){var r=0,i=0,n=0,t=0,o=0;if(i=0|ve(0|(A|=0),0|(e|=0),52),D(),!(i&=15))return i=A,M(0|(r=e)),0|i;for(r=1;t=0|me(7,0,0|(o=3*(15-r|0)|0)),n=e&~(0|D()),e=0|ve(0|A,0|e,0|o),D(),A=(e=0|me(0|uA(7&e),0,0|o))|A&~t,e=0|D()|n,r>>>0<i>>>0;)r=r+1|0;return M(0|e),0|A}function LA(A){return 0|(0|(A|=0))%2}function zA(A,e){A|=0;var r,i;return i=x,x=x+16|0,r=i,(e|=0)>>>0<=15&&2146435072!=(2146435072&n[A+4>>2]|0)&&2146435072!=(2146435072&n[A+8+4>>2]|0)?(!function(A,e,r){var i,n;i=x,x=x+16|0,hA(A|=0,e|=0,r|=0,n=i),j(n,r+4|0),x=i}(A,e,r),e=0|function(A,e){A|=0;var r,i=0,t=0,o=0,a=0,f=0,u=0,l=0,c=0;if(r=x,x=x+64|0,u=r+40|0,t=r+24|0,o=r+12|0,a=r,me(0|(e|=0),0,52),i=134225919|D(),!e)return(0|n[A+4>>2])>2?(u=0,M(0|(f=0)),x=r,0|u):(0|n[A+8>>2])>2?(u=0,M(0|(f=0)),x=r,0|u):(0|n[A+12>>2])>2?(u=0,M(0|(f=0)),x=r,0|u):(me(0|R(A),0,45),f=0|D()|i,u=-1,M(0|f),x=r,0|u);if(n[u>>2]=n[A>>2],n[u+4>>2]=n[A+4>>2],n[u+8>>2]=n[A+8>>2],n[u+12>>2]=n[A+12>>2],f=u+4|0,(0|e)>0)for(A=-1;n[t>>2]=n[f>>2],n[t+4>>2]=n[f+4>>2],n[t+8>>2]=n[f+8>>2],1&e?(eA(f),n[o>>2]=n[f>>2],n[o+4>>2]=n[f+4>>2],n[o+8>>2]=n[f+8>>2],iA(o)):(rA(f),n[o>>2]=n[f>>2],n[o+4>>2]=n[f+4>>2],n[o+8>>2]=n[f+8>>2],nA(o)),q(t,o,a),J(a),l=0|me(7,0,0|(c=3*(15-e|0)|0)),i&=~(0|D()),A=(c=0|me(0|AA(a),0,0|c))|A&~l,i=0|D()|i,(0|e)>1;)e=e+-1|0;else A=-1;A:do{if((0|n[f>>2])<=2&&(0|n[u+8>>2])<=2&&(0|n[u+12>>2])<=2){if(e=0|me(0|(t=0|R(u)),0,45),e|=A,A=0|D()|-1040385&i,a=0|S(u),!(0|T(t))){if((0|a)<=0)break;for(o=0;;){if(t=0|ve(0|e,0|A,52),D(),t&=15)for(i=1;u=0|ve(0|e,0|A,0|(c=3*(15-i|0)|0)),D(),l=0|me(7,0,0|c),A&=~(0|D()),e=e&~l|(c=0|me(0|fA(7&u),0,0|c)),A=0|A|D(),i>>>0<t>>>0;)i=i+1|0;if((0|(o=o+1|0))==(0|a))break A}}o=0|ve(0|e,0|A,52),D(),o&=15;e:do{if(o){i=1;r:for(;;){switch(c=0|ve(0|e,0|A,3*(15-i|0)|0),D(),7&c){case 1:break r;case 0:break;default:break e}if(!(i>>>0<o>>>0))break e;i=i+1|0}if(0|L(t,0|n[u>>2]))for(i=1;l=0|me(7,0,0|(u=3*(15-i|0)|0)),c=A&~(0|D()),A=0|ve(0|e,0|A,0|u),D(),e=e&~l|(A=0|me(0|uA(7&A),0,0|u)),A=0|c|D(),i>>>0<o>>>0;)i=i+1|0;else for(i=1;u=0|ve(0|e,0|A,0|(c=3*(15-i|0)|0)),D(),l=0|me(7,0,0|c),A&=~(0|D()),e=e&~l|(c=0|me(0|fA(7&u),0,0|c)),A=0|A|D(),i>>>0<o>>>0;)i=i+1|0}}while(0);if((0|a)>0){i=0;do{e=0|TA(e,A),A=0|D(),i=i+1|0}while((0|i)!=(0|a))}}else e=0,A=0}while(0);return c=e,M(0|(l=A)),x=r,0|c}(r,e),A=0|D()):(A=0,e=0),M(0|A),x=i,0|e}function VA(A,e,r){var i,t=0,o=0,a=0;if(i=(r|=0)+4|0,o=0|ve(0|(A|=0),0|(e|=0),52),D(),o&=15,a=0|ve(0|A,0|e,45),D(),t=0==(0|o),0|T(127&a)){if(t)return 0|(a=1);t=1}else{if(t)return 0|(a=0);t=0==(0|n[i>>2])&&0==(0|n[r+8>>2])?0!=(0|n[r+12>>2])&1:1}for(r=1;1&r?iA(i):nA(i),a=0|ve(0|A,0|e,3*(15-r|0)|0),D(),tA(i,7&a),r>>>0<o>>>0;)r=r+1|0;return 0|t}function YA(A,e,r){r|=0;var i,t,o=0,a=0,f=0,u=0,l=0,c=0;t=x,x=x+16|0,i=t,c=0|ve(0|(A|=0),0|(e|=0),45),D(),c&=127;A:do{if(0!=(0|T(c))&&(f=0|ve(0|A,0|e,52),D(),0!=(0|(f&=15)))){o=1;e:for(;;){switch(l=0|ve(0|A,0|e,3*(15-o|0)|0),D(),7&l){case 5:break e;case 0:break;default:o=e;break A}if(!(o>>>0<f>>>0)){o=e;break A}o=o+1|0}for(a=1,o=e;u=0|me(7,0,0|(e=3*(15-a|0)|0)),l=o&~(0|D()),o=0|ve(0|A,0|o,0|e),D(),A=A&~u|(o=0|me(0|uA(7&o),0,0|e)),o=0|l|D(),a>>>0<f>>>0;)a=a+1|0}else o=e}while(0);if(l=7728+(28*c|0)|0,n[r>>2]=n[l>>2],n[r+4>>2]=n[l+4>>2],n[r+8>>2]=n[l+8>>2],n[r+12>>2]=n[l+12>>2],0|VA(A,o,r)){if(u=r+4|0,n[i>>2]=n[u>>2],n[i+4>>2]=n[u+4>>2],n[i+8>>2]=n[u+8>>2],f=0|ve(0|A,0|o,52),D(),l=15&f,1&f?(nA(u),f=l+1|0):f=l,0|T(c)){A:do{if(l)for(e=1;;){if(a=0|ve(0|A,0|o,3*(15-e|0)|0),D(),0|(a&=7)){o=a;break A}if(!(e>>>0<l>>>0)){o=0;break}e=e+1|0}else o=0}while(0);o=4==(0|o)&1}else o=0;if(0|MA(r,f,o,0)){if(0|T(c))do{}while(0!=(0|MA(r,f,0,0)));(0|f)!=(0|l)&&rA(u)}else(0|f)!=(0|l)&&(n[u>>2]=n[i>>2],n[u+4>>2]=n[i+4>>2],n[u+8>>2]=n[i+8>>2]);x=t}else x=t}function OA(A,e,r){r|=0;var i,n;i=x,x=x+16|0,YA(A|=0,e|=0,n=i),e=0|ve(0|A,0|e,52),D(),kA(n,15&e,r),x=i}function WA(A,e,r){r|=0;var i,n,t=0,o=0;n=x,x=x+16|0,YA(A|=0,e|=0,i=n),t=0|ve(0|A,0|e,45),D(),t=0==(0|T(127&t)),o=0|ve(0|A,0|e,52),D(),o&=15;A:do{if(!t){if(0|o)for(t=1;;){if(!(0==((0|me(7,0,3*(15-t|0)|0))&A|0)&0==((0|D())&e|0)))break A;if(!(t>>>0<o>>>0))break;t=t+1|0}return QA(i,o,0,5,r),void(x=n)}}while(0);vA(i,o,0,6,r),x=n}function NA(A,e){e|=0;var r,i=0,t=0,o=0,a=0,f=0,u=0;if(me(0|(A|=0),0,52),r=134225919|D(),(0|A)<1){t=0,i=0;do{0|T(t)&&(me(0|t,0,45),f=0|r|D(),n[(A=e+(i<<3)|0)>>2]=-1,n[A+4>>2]=f,i=i+1|0),t=t+1|0}while(122!=(0|t))}else{f=0,i=0;do{if(0|T(f)){for(me(0|f,0,45),t=1,o=-1,a=0|r|D();o&=~(u=0|me(7,0,3*(15-t|0)|0)),a&=~(0|D()),(0|t)!=(0|A);)t=t+1|0;n[(u=e+(i<<3)|0)>>2]=o,n[u+4>>2]=a,i=i+1|0}f=f+1|0}while(122!=(0|f))}}function ZA(A,e,r,i){var t,o=0,a=0,f=0,u=0,l=0;if(t=x,x=x+64|0,f=t,(0|(A|=0))==(0|(r|=0))&(0|(e|=0))==(0|(i|=0))|!1|134217728!=(2013265920&e|0)|!1|134217728!=(2013265920&i|0))return x=t,0|(f=0);if(o=0|ve(0|A,0|e,52),D(),o&=15,a=0|ve(0|r,0|i,52),D(),(0|o)!=(15&a|0))return x=t,0|(f=0);if(a=o+-1|0,o>>>0>1&&(l=0|UA(A,e,a),u=0|D(),(0|l)==(0|(a=0|UA(r,i,a)))&(0|u)==(0|D()))){if(o=0|ve(0|A,0|e,0|(a=3*(15^o)|0)),D(),o&=7,a=0|ve(0|r,0|i,0|a),D(),0==(0|o)|0==(0|(a&=7)))return x=t,0|(l=1);if((0|n[21136+(o<<2)>>2])==(0|a))return x=t,0|(l=1);if((0|n[21168+(o<<2)>>2])==(0|a))return x=t,0|(l=1)}a=(o=f)+56|0;do{n[o>>2]=0,o=o+4|0}while((0|o)<(0|a));return F(A,e,1,f),o=(0|n[(l=f)>>2])==(0|r)&&(0|n[l+4>>2])==(0|i)||(0|n[(l=f+8|0)>>2])==(0|r)&&(0|n[l+4>>2])==(0|i)||(0|n[(l=f+16|0)>>2])==(0|r)&&(0|n[l+4>>2])==(0|i)||(0|n[(l=f+24|0)>>2])==(0|r)&&(0|n[l+4>>2])==(0|i)||(0|n[(l=f+32|0)>>2])==(0|r)&&(0|n[l+4>>2])==(0|i)||(0|n[(l=f+40|0)>>2])==(0|r)&&(0|n[l+4>>2])==(0|i)?1:1&((0|n[(o=f+48|0)>>2])==(0|r)?(0|n[o+4>>2])==(0|i):0),x=t,0|(l=o)}function jA(A,e,r){r|=0;var i,t,o,a,f=0;if(o=x,x=x+16|0,t=o,f=0|ve(0|(A|=0),0|(e|=0),56),D(),-1==(0|(e=0|function(A,e,r){r|=0;var i=0,t=0;if(i=0|yA(A|=0,e|=0),(r+-1|0)>>>0>5)return 0|(r=-1);if(1==(0|r)&(t=0!=(0|i)))return 0|(r=-1);return i=0|function(A,e){var r=0,i=0,t=0,o=0,a=0,f=0,u=0,l=0;if(l=x,x=x+32|0,o=l,YA(A|=0,e|=0,t=l+16|0),a=0|xA(A,e),u=0|HA(A,e),function(A,e){A=7728+(28*(A|=0)|0)|0,n[(e|=0)>>2]=n[A>>2],n[e+4>>2]=n[A+4>>2],n[e+8>>2]=n[A+8>>2],n[e+12>>2]=n[A+12>>2]}(a,o),e=0|function(A,e){A|=0;var r=0,i=0;if((e|=0)>>>0>20)return 0|(e=-1);do{if((0|n[11152+(216*e|0)>>2])!=(0|A))if((0|n[11152+(216*e|0)+8>>2])!=(0|A))if((0|n[11152+(216*e|0)+16>>2])!=(0|A))if((0|n[11152+(216*e|0)+24>>2])!=(0|A))if((0|n[11152+(216*e|0)+32>>2])!=(0|A))if((0|n[11152+(216*e|0)+40>>2])!=(0|A))if((0|n[11152+(216*e|0)+48>>2])!=(0|A))if((0|n[11152+(216*e|0)+56>>2])!=(0|A))if((0|n[11152+(216*e|0)+64>>2])!=(0|A))if((0|n[11152+(216*e|0)+72>>2])!=(0|A))if((0|n[11152+(216*e|0)+80>>2])!=(0|A))if((0|n[11152+(216*e|0)+88>>2])!=(0|A))if((0|n[11152+(216*e|0)+96>>2])!=(0|A))if((0|n[11152+(216*e|0)+104>>2])!=(0|A))if((0|n[11152+(216*e|0)+112>>2])!=(0|A))if((0|n[11152+(216*e|0)+120>>2])!=(0|A))if((0|n[11152+(216*e|0)+128>>2])!=(0|A)){if((0|n[11152+(216*e|0)+136>>2])!=(0|A)){if((0|n[11152+(216*e|0)+144>>2])==(0|A)){A=0,r=2,i=0;break}if((0|n[11152+(216*e|0)+152>>2])==(0|A)){A=0,r=2,i=1;break}if((0|n[11152+(216*e|0)+160>>2])==(0|A)){A=0,r=2,i=2;break}if((0|n[11152+(216*e|0)+168>>2])==(0|A)){A=1,r=2,i=0;break}if((0|n[11152+(216*e|0)+176>>2])==(0|A)){A=1,r=2,i=1;break}if((0|n[11152+(216*e|0)+184>>2])==(0|A)){A=1,r=2,i=2;break}if((0|n[11152+(216*e|0)+192>>2])==(0|A)){A=2,r=2,i=0;break}if((0|n[11152+(216*e|0)+200>>2])==(0|A)){A=2,r=2,i=1;break}if((0|n[11152+(216*e|0)+208>>2])==(0|A)){A=2,r=2,i=2;break}return 0|(A=-1)}A=2,r=1,i=2}else A=2,r=1,i=1;else A=2,r=1,i=0;else A=1,r=1,i=2;else A=1,r=1,i=1;else A=1,r=1,i=0;else A=0,r=1,i=2;else A=0,r=1,i=1;else A=0,r=1,i=0;else A=2,r=0,i=2;else A=2,r=0,i=1;else A=2,r=0,i=0;else A=1,r=0,i=2;else A=1,r=0,i=1;else A=1,r=0,i=0;else A=0,r=0,i=2;else A=0,r=0,i=1;else A=0,r=0,i=0}while(0);return 0|(e=0|n[11152+(216*e|0)+(72*r|0)+(24*A|0)+(i<<3)+4>>2])}(a,0|n[t>>2]),!(0|T(a)))return x=l,0|(u=e);switch(0|a){case 4:A=0,r=14;break;case 14:A=1,r=14;break;case 24:A=2,r=14;break;case 38:A=3,r=14;break;case 49:A=4,r=14;break;case 58:A=5,r=14;break;case 63:A=6,r=14;break;case 72:A=7,r=14;break;case 83:A=8,r=14;break;case 97:A=9,r=14;break;case 107:A=10,r=14;break;case 117:A=11,r=14;break;default:f=0,i=0}return 14==(0|r)&&(f=0|n[22096+(24*A|0)+8>>2],i=0|n[22096+(24*A|0)+16>>2]),(0|(A=0|n[t>>2]))!=(0|n[o>>2])&&(a=0|P(a),A=0|n[t>>2],a|(0|A)==(0|i)&&(e=(e+1|0)%6|0)),3==(0|u)&(0|A)==(0|i)?(x=l,0|(u=(e+5|0)%6|0)):5==(0|u)&(0|A)==(0|f)?(x=l,0|(u=(e+1|0)%6|0)):(x=l,0|(u=e))}(A,e),t?0|(r=(5-i+(0|n[22384+(r<<2)>>2])|0)%5|0):0|(r=(6-i+(0|n[22416+(r<<2)>>2])|0)%6|0)}(i=(a=!0&268435456==(2013265920&e|0))?A:0,A=a?-2130706433&e|134217728:0,7&f))))return n[r>>2]=0,void(x=o);YA(i,A,t),f=0|ve(0|i,0|A,52),D(),f&=15,0|yA(i,A)?QA(t,f,e,2,r):vA(t,f,e,2,r),x=o}function JA(A){A|=0;var e,r,i=0;return(e=0|ke(1,12))||v(22691,22646,49,22704),0|(i=0|n[(r=A+4|0)>>2])?(n[(i=i+8|0)>>2]=e,n[r>>2]=e,0|e):(0|n[A>>2]&&v(22721,22646,61,22744),n[(i=A)>>2]=e,n[r>>2]=e,0|e)}function KA(A,e){A|=0,e|=0;var r,i;return(i=0|he(24))||v(22758,22646,78,22772),n[i>>2]=n[e>>2],n[i+4>>2]=n[e+4>>2],n[i+8>>2]=n[e+8>>2],n[i+12>>2]=n[e+12>>2],n[i+16>>2]=0,0|(r=0|n[(e=A+4|0)>>2])?(n[r+16>>2]=i,n[e>>2]=i,0|i):(0|n[A>>2]&&v(22787,22646,82,22772),n[A>>2]=i,n[e>>2]=i,0|i)}function XA(A){var e,r,i=0,o=0,a=0,u=0,l=0,c=0,s=0,w=0,g=0,d=0,B=0,h=0,b=0,k=0,Q=0,E=0,M=0,D=0,m=0,I=0,_=0,C=0,p=0,x=0,F=0,U=0,G=0,y=0,H=0,T=0;if(0|n[(u=(A|=0)+8|0)>>2])return 0|(T=1);if(!(a=0|n[A>>2]))return 0|(T=0);i=a,o=0;do{o=o+1|0,i=0|n[i+8>>2]}while(0!=(0|i));if(o>>>0<2)return 0|(T=0);(r=0|he(o<<2))||v(22807,22646,317,22826),(e=0|he(o<<5))||v(22848,22646,321,22826),n[A>>2]=0,n[(C=A+4|0)>>2]=0,n[u>>2]=0,o=0,y=0,_=0,B=0;A:for(;;){if(d=0|n[a>>2]){l=0,c=d;do{if(w=+t[c+8>>3],i=c,c=0|n[c+16>>2],s=+t[(u=(g=0==(0|c))?d:c)+8>>3],+f(+(w-s))>3.141592653589793){T=14;break}l+=(s-w)*(+t[i>>3]+ +t[u>>3])}while(!g);if(14==(0|T)){T=0,l=0,i=d;do{I=+t[i+8>>3],U=0|n[(G=i+16|0)>>2],m=+t[(U=0==(0|U)?d:U)+8>>3],l+=(+t[i>>3]+ +t[U>>3])*((m<0?m+6.283185307179586:m)-(I<0?I+6.283185307179586:I)),i=0|n[(0==(0|i)?a:G)>>2]}while(0!=(0|i))}l>0?(n[r+(y<<2)>>2]=a,y=y+1|0,u=_,i=B):T=19}else T=19;if(19==(0|T)){T=0;do{if(!o){if(B){u=C,c=B+8|0,i=a,o=A;break}if(0|n[A>>2]){T=27;break A}u=C,c=A,i=a,o=A;break}if(0|n[(i=o+8|0)>>2]){T=21;break A}if(!(o=0|ke(1,12))){T=23;break A}n[i>>2]=o,u=o+4|0,c=o,i=B}while(0);if(n[c>>2]=a,n[u>>2]=a,c=e+(_<<5)|0,g=0|n[a>>2]){for(t[(d=e+(_<<5)+8|0)>>3]=1.7976931348623157e308,t[(B=e+(_<<5)+24|0)>>3]=1.7976931348623157e308,t[c>>3]=-1.7976931348623157e308,t[(h=e+(_<<5)+16|0)>>3]=-1.7976931348623157e308,M=1.7976931348623157e308,D=-1.7976931348623157e308,u=0,b=g,w=1.7976931348623157e308,Q=1.7976931348623157e308,E=-1.7976931348623157e308,s=-1.7976931348623157e308;l=+t[b>>3],I=+t[b+8>>3],b=0|n[b+16>>2],m=+t[((k=0==(0|b))?g:b)+8>>3],l<w&&(t[d>>3]=l,w=l),I<Q&&(t[B>>3]=I,Q=I),l>E?t[c>>3]=l:l=E,I>s&&(t[h>>3]=I,s=I),M=I>0&I<M?I:M,D=I<0&I>D?I:D,u|=+f(+(I-m))>3.141592653589793,!k;)E=l;u&&(t[h>>3]=D,t[B>>3]=M)}else n[c>>2]=0,n[c+4>>2]=0,n[c+8>>2]=0,n[c+12>>2]=0,n[c+16>>2]=0,n[c+20>>2]=0,n[c+24>>2]=0,n[c+28>>2]=0;u=_+1|0}if(a=0|n[(G=a+8|0)>>2],n[G>>2]=0,!a){T=45;break}_=u,B=i}if(21==(0|T))v(22624,22646,35,22658);else if(23==(0|T))v(22678,22646,37,22658);else if(27==(0|T))v(22721,22646,61,22744);else if(45==(0|T)){A:do{if((0|y)>0){for(G=0==(0|u),F=u<<2,U=0==(0|A),x=0,i=0;;){if(p=0|n[r+(x<<2)>>2],G)T=73;else{if(!(_=0|he(F))){T=50;break}if(!(C=0|he(F))){T=52;break}e:do{if(U)o=0;else{for(u=0,o=0,c=A;a=e+(u<<5)|0,0|qA(0|n[c>>2],a,0|n[p>>2])?(n[_+(o<<2)>>2]=c,n[C+(o<<2)>>2]=a,k=o+1|0):k=o,c=0|n[c+8>>2];)u=u+1|0,o=k;if((0|k)>0)if(a=0|n[_>>2],1==(0|k))o=a;else for(h=0,b=-1,o=a,B=a;;){for(g=0|n[B>>2],a=0,c=0;d=(0|(u=0|n[n[_+(c<<2)>>2]>>2]))==(0|g)?a:a+(1&(0|qA(u,0|n[C+(c<<2)>>2],0|n[g>>2])))|0,(0|(c=c+1|0))!=(0|k);)a=d;if(o=(u=(0|d)>(0|b))?B:o,(0|(a=h+1|0))==(0|k))break e;h=a,b=u?d:b,B=0|n[_+(a<<2)>>2]}else o=0}}while(0);if(be(_),be(C),o){if(a=0|n[(u=o+4|0)>>2])o=a+8|0;else if(0|n[o>>2]){T=70;break}n[o>>2]=p,n[u>>2]=p}else T=73}if(73==(0|T)){if(T=0,0|(i=0|n[p>>2]))do{C=i,i=0|n[i+16>>2],be(C)}while(0!=(0|i));be(p),i=2}if((0|(x=x+1|0))>=(0|y)){H=i;break A}}50==(0|T)?v(22863,22646,249,22882):52==(0|T)?v(22901,22646,252,22882):70==(0|T)&&v(22721,22646,61,22744)}else H=0}while(0);return be(r),be(e),0|(T=H)}return 0}function qA(A,e,r){A|=0;var i,o=0,a=0,f=0,u=0,l=0,c=0,s=0;if(!(0|O(e|=0,r|=0)))return 0|(A=0);if(e=0|Y(e),i=+t[r>>3],o=e&(o=+t[r+8>>3])<0?o+6.283185307179586:o,!(A=0|n[A>>2]))return 0|(A=0);if(e){e=0,r=A;A:for(;;){for(;u=+t[r>>3],c=+t[r+8>>3],s=0|n[(r=r+16|0)>>2],f=+t[(s=0==(0|s)?A:s)>>3],a=+t[s+8>>3],u>f?(l=u,u=c):(l=f,f=u,u=a,a=c),i<f|i>l;)if(!(r=0|n[r>>2])){r=22;break A}if(o=(u=u<0?u+6.283185307179586:u)==o|(c=a<0?a+6.283185307179586:a)==o?o+-2.220446049250313e-16:o,((c+=(i-f)/(l-f)*(u-c))<0?c+6.283185307179586:c)>o&&(e^=1),!(r=0|n[r>>2])){r=22;break}}if(22==(0|r))return 0|e}else{e=0,r=A;A:for(;;){for(;u=+t[r>>3],c=+t[r+8>>3],s=0|n[(r=r+16|0)>>2],f=+t[(s=0==(0|s)?A:s)>>3],a=+t[s+8>>3],u>f?(l=u,u=c):(l=f,f=u,u=a,a=c),i<f|i>l;)if(!(r=0|n[r>>2])){r=22;break A}if(a+(i-f)/(l-f)*(u-a)>(o=u==o|a==o?o+-2.220446049250313e-16:o)&&(e^=1),!(r=0|n[r>>2])){r=22;break}}if(22==(0|r))return 0|e}return 0}function $A(A,e,r,t,o){r|=0,t|=0,o|=0;var a,f,u,l,c=0,s=0,w=0,g=0,d=0,B=0,h=0,b=0,k=0,Q=0;if(l=x,x=x+32|0,Q=l+16|0,u=l,c=0|ve(0|(A|=0),0|(e|=0),52),D(),c&=15,h=0|ve(0|r,0|t,52),D(),(0|c)!=(15&h|0))return x=l,0|(Q=1);if(d=0|ve(0|A,0|e,45),D(),d&=127,B=0|ve(0|r,0|t,45),D(),h=(0|d)!=(0|(B&=127))){if(7==(0|(w=0|V(d,B))))return x=l,0|(Q=2);7==(0|(g=0|V(B,d)))?v(22925,22949,151,22959):(b=w,s=g)}else b=0,s=0;a=0|T(d),f=0|T(B),n[Q>>2]=0,n[Q+4>>2]=0,n[Q+8>>2]=0,n[Q+12>>2]=0;do{if(b){if(w=(0|(B=0|n[4304+(28*d|0)+(b<<2)>>2]))>0,f)if(w){d=0,g=r,w=t;do{g=0|RA(g,w),w=0|D(),1==(0|(s=0|uA(s)))&&(s=0|uA(1)),d=d+1|0}while((0|d)!=(0|B));B=s,d=g,g=w}else B=s,d=r,g=t;else if(w){d=0,g=r,w=t;do{g=0|SA(g,w),w=0|D(),s=0|uA(s),d=d+1|0}while((0|d)!=(0|B));B=s,d=g,g=w}else B=s,d=r,g=t;if(VA(d,g,Q),h||v(22972,22949,181,22959),(w=0!=(0|a))&(s=0!=(0|f))&&v(22999,22949,182,22959),w){if(s=0|HA(A,e),0|i[22032+(7*s|0)+b>>0]){c=3;break}d=g=0|n[21200+(28*s|0)+(b<<2)>>2],k=26}else if(s){if(s=0|HA(d,g),0|i[22032+(7*s|0)+B>>0]){c=4;break}d=0,g=0|n[21200+(28*B|0)+(s<<2)>>2],k=26}else s=0;if(26==(0|k))if((0|g)<=-1&&v(23030,22949,212,22959),(0|d)<=-1&&v(23053,22949,213,22959),(0|g)>0){w=Q+4|0,s=0;do{aA(w),s=s+1|0}while((0|s)!=(0|g));s=d}else s=d;if(n[u>>2]=0,n[u+4>>2]=0,n[u+8>>2]=0,tA(u,b),0|c)for(;0|LA(c)?iA(u):nA(u),(0|c)>1;)c=c+-1|0;if((0|s)>0){c=0;do{aA(u),c=c+1|0}while((0|c)!=(0|s))}X(k=Q+4|0,u,k),J(k),k=50}else if(VA(r,t,Q),0!=(0|a)&0!=(0|f))if((0|B)!=(0|d)&&v(23077,22949,243,22959),s=0|HA(A,e),c=0|HA(r,t),0|i[22032+(7*s|0)+c>>0])c=5;else if((0|(s=0|n[21200+(28*s|0)+(c<<2)>>2]))>0){w=Q+4|0,c=0;do{aA(w),c=c+1|0}while((0|c)!=(0|s));k=50}else k=50;else k=50}while(0);return 50==(0|k)&&(c=Q+4|0,n[o>>2]=n[c>>2],n[o+4>>2]=n[c+4>>2],n[o+8>>2]=n[c+8>>2],c=0),x=l,0|(Q=c)}function Ae(A,e,r,i){r|=0,i|=0;var t,o,a=0,f=0,u=0,l=0,c=0,s=0,w=0,g=0,d=0,B=0,h=0,b=0,k=0;if(o=x,x=x+48|0,u=o+36|0,l=o+24|0,c=o+12|0,s=o,f=0|ve(0|(A|=0),0|(e|=0),52),D(),f&=15,g=0|ve(0|A,0|e,45),D(),t=0|T(g&=127),me(0|f,0,52),h=134225919|D(),n[(B=i)>>2]=-1,n[B+4>>2]=h,!f)return(0|n[r>>2])>1?(x=o,0|(h=1)):(0|n[r+4>>2])>1?(x=o,0|(h=1)):(0|n[r+8>>2])>1?(x=o,0|(h=1)):127==(0|(a=0|z(g,0|AA(r))))?(x=o,0|(h=1)):(d=0|me(0|a,0,45),B=0|D(),B=-1040385&n[(g=i)+4>>2]|B,n[(h=i)>>2]=n[g>>2]|d,n[h+4>>2]=B,x=o,0|(h=0));for(n[u>>2]=n[r>>2],n[u+4>>2]=n[r+4>>2],n[u+8>>2]=n[r+8>>2];n[l>>2]=n[u>>2],n[l+4>>2]=n[u+4>>2],n[l+8>>2]=n[u+8>>2],0|LA(f)?(eA(u),n[c>>2]=n[u>>2],n[c+4>>2]=n[u+4>>2],n[c+8>>2]=n[u+8>>2],iA(c)):(rA(u),n[c>>2]=n[u>>2],n[c+4>>2]=n[u+4>>2],n[c+8>>2]=n[u+8>>2],nA(c)),q(l,c,s),J(s),b=0|n[(B=i)>>2],B=0|n[B+4>>2],r=0|me(7,0,0|(k=3*(15-f|0)|0)),B&=~(0|D()),k=0|me(0|AA(s),0,0|k),B=0|D()|B,n[(h=i)>>2]=k|b&~r,n[h+4>>2]=B,(0|f)>1;)f=f+-1|0;A:do{if((0|n[u>>2])<=1&&(0|n[u+4>>2])<=1&&(0|n[u+8>>2])<=1){s=127==(0|(l=0|z(g,f=0|AA(u))))?0:0|T(l);e:do{if(f){if(t){if(u=21408+(28*(0|HA(A,e))|0)+(f<<2)|0,(0|(u=0|n[u>>2]))>0){r=0;do{f=0|fA(f),r=r+1|0}while((0|r)!=(0|u))}if(1==(0|f)){a=3;break A}127==(0|(r=0|z(g,f)))&&v(23104,22949,376,23134),0|T(r)?v(23147,22949,377,23134):(d=u,w=f,a=r)}else d=0,w=f,a=l;if((0|(c=0|n[4304+(28*g|0)+(w<<2)>>2]))<=-1&&v(23178,22949,384,23134),!s){if((0|d)<=-1&&v(23030,22949,417,23134),0|d){f=0,r=0|n[(u=i)>>2],u=0|n[u+4>>2];do{r=0|PA(r,u),u=0|D(),n[(k=i)>>2]=r,n[k+4>>2]=u,f=f+1|0}while((0|f)<(0|d))}if((0|c)<=0){f=54;break}for(f=0,r=0|n[(u=i)>>2],u=0|n[u+4>>2];;)if(r=0|PA(r,u),u=0|D(),n[(k=i)>>2]=r,n[k+4>>2]=u,(0|(f=f+1|0))==(0|c)){f=54;break e}}if(7==(0|(l=0|V(a,g)))&&v(22925,22949,393,23134),r=0|n[(f=i)>>2],f=0|n[f+4>>2],(0|c)>0){u=0;do{r=0|PA(r,f),f=0|D(),n[(k=i)>>2]=r,n[k+4>>2]=f,u=u+1|0}while((0|u)!=(0|c))}if(r=0|HA(r,f),k=0|P(a),(0|(r=0|n[(k?21824:21616)+(28*l|0)+(r<<2)>>2]))<=-1&&v(23030,22949,412,23134),r){f=0,u=0|n[(l=i)>>2],l=0|n[l+4>>2];do{u=0|TA(u,l),l=0|D(),n[(k=i)>>2]=u,n[k+4>>2]=l,f=f+1|0}while((0|f)<(0|r));f=54}else f=54}else if(0!=(0|t)&0!=(0|s))if(f=21408+(28*(k=0|HA(A,e))|0)+((0|HA(0|n[(f=i)>>2],0|n[f+4>>2]))<<2)|0,(0|(f=0|n[f>>2]))<=-1&&v(23201,22949,433,23134),f){a=0,r=0|n[(u=i)>>2],u=0|n[u+4>>2];do{r=0|PA(r,u),u=0|D(),n[(k=i)>>2]=r,n[k+4>>2]=u,a=a+1|0}while((0|a)<(0|f));a=l,f=54}else a=l,f=55;else a=l,f=54}while(0);if(54==(0|f)&&s&&(f=55),55==(0|f)&&1==(0|HA(0|n[(k=i)>>2],0|n[k+4>>2]))){a=4;break}h=0|n[(k=i)>>2],k=-1040385&n[k+4>>2],b=0|me(0|a,0,45),k=0|k|D(),n[(a=i)>>2]=h|b,n[a+4>>2]=k,a=0}else a=2}while(0);return x=o,0|(k=a)}function ee(A,e){var r=0;if(!(e|=0))return 0|(r=1);r=A|=0,A=1;do{A=0|k(0==(1&e|0)?1:r,A),e>>=1,r=0|k(r,r)}while(0!=(0|e));return 0|A}function re(A,e,r){A|=0;var i,o,a=0,f=0,u=0,l=0,c=0,s=0,w=0,g=0;if(!(0|O(e|=0,r|=0)))return 0|(g=0);if(e=0|Y(e),o=+t[r>>3],a=e&(a=+t[r+8>>3])<0?a+6.283185307179586:a,(0|(g=0|n[A>>2]))<=0)return 0|(g=0);if(i=0|n[A+4>>2],e){e=0,r=-1,A=0;A:for(;;){for(w=A;l=+t[i+(w<<4)>>3],s=+t[i+(w<<4)+8>>3],u=+t[i+((A=(r+2|0)%(0|g)|0)<<4)>>3],f=+t[i+(A<<4)+8>>3],l>u?(c=l,l=s):(c=u,u=l,l=f,f=s),o<u|o>c;){if(!((0|(r=w+1|0))<(0|g))){r=22;break A}A=w,w=r,r=A}if(a=(l=l<0?l+6.283185307179586:l)==a|(s=f<0?f+6.283185307179586:f)==a?a+-2.220446049250313e-16:a,((s+=(o-u)/(c-u)*(l-s))<0?s+6.283185307179586:s)>a&&(e^=1),(0|(A=w+1|0))>=(0|g)){r=22;break}r=w}if(22==(0|r))return 0|e}else{e=0,r=-1,A=0;A:for(;;){for(w=A;l=+t[i+(w<<4)>>3],s=+t[i+(w<<4)+8>>3],u=+t[i+((A=(r+2|0)%(0|g)|0)<<4)>>3],f=+t[i+(A<<4)+8>>3],l>u?(c=l,l=s):(c=u,u=l,l=f,f=s),o<u|o>c;){if(!((0|(r=w+1|0))<(0|g))){r=22;break A}A=w,w=r,r=A}if(f+(o-u)/(c-u)*(l-f)>(a=l==a|f==a?a+-2.220446049250313e-16:a)&&(e^=1),(0|(A=w+1|0))>=(0|g)){r=22;break}r=w}if(22==(0|r))return 0|e}return 0}function ie(A,e){e|=0;var r,i,o,a,u,l=0,c=0,s=0,w=0,g=0,d=0,B=0,h=0,b=0,k=0,Q=0,E=0;if(!(i=0|n[(A|=0)>>2]))return n[e>>2]=0,n[e+4>>2]=0,n[e+8>>2]=0,n[e+12>>2]=0,n[e+16>>2]=0,n[e+20>>2]=0,n[e+24>>2]=0,void(n[e+28>>2]=0);if(t[(o=e+8|0)>>3]=1.7976931348623157e308,t[(a=e+24|0)>>3]=1.7976931348623157e308,t[e>>3]=-1.7976931348623157e308,t[(u=e+16|0)>>3]=-1.7976931348623157e308,!((0|i)<=0)){for(r=0|n[A+4>>2],h=1.7976931348623157e308,b=-1.7976931348623157e308,k=0,A=-1,w=1.7976931348623157e308,g=1.7976931348623157e308,B=-1.7976931348623157e308,c=-1.7976931348623157e308,Q=0;l=+t[r+(Q<<4)>>3],d=+t[r+(Q<<4)+8>>3],s=+t[r+(((0|(A=A+2|0))==(0|i)?0:A)<<4)+8>>3],l<w&&(t[o>>3]=l,w=l),d<g&&(t[a>>3]=d,g=d),l>B?t[e>>3]=l:l=B,d>c&&(t[u>>3]=d,c=d),h=d>0&d<h?d:h,b=d<0&d>b?d:b,k|=+f(+(d-s))>3.141592653589793,(0|(A=Q+1|0))!=(0|i);)E=Q,B=l,Q=A,A=E;k&&(t[u>>3]=b,t[a>>3]=h)}}function ne(A,e){e|=0;var r,i=0,o=0,a=0,u=0,l=0,c=0,s=0,w=0,g=0,d=0,B=0,h=0,b=0,k=0,Q=0,E=0,M=0,D=0,v=0,m=0,I=0;if(b=0|n[(A|=0)>>2]){if(t[(k=e+8|0)>>3]=1.7976931348623157e308,t[(Q=e+24|0)>>3]=1.7976931348623157e308,t[e>>3]=-1.7976931348623157e308,t[(E=e+16|0)>>3]=-1.7976931348623157e308,(0|b)>0){for(a=0|n[A+4>>2],B=1.7976931348623157e308,h=-1.7976931348623157e308,o=0,i=-1,s=1.7976931348623157e308,w=1.7976931348623157e308,d=-1.7976931348623157e308,l=-1.7976931348623157e308,M=0;u=+t[a+(M<<4)>>3],g=+t[a+(M<<4)+8>>3],c=+t[a+(((0|(m=i+2|0))==(0|b)?0:m)<<4)+8>>3],u<s&&(t[k>>3]=u,s=u),g<w&&(t[Q>>3]=g,w=g),u>d?t[e>>3]=u:u=d,g>l&&(t[E>>3]=g,l=g),B=g>0&g<B?g:B,h=g<0&g>h?g:h,o|=+f(+(g-c))>3.141592653589793,(0|(i=M+1|0))!=(0|b);)m=M,d=u,M=i,i=m;o&&(t[E>>3]=h,t[Q>>3]=B)}}else n[e>>2]=0,n[e+4>>2]=0,n[e+8>>2]=0,n[e+12>>2]=0,n[e+16>>2]=0,n[e+20>>2]=0,n[e+24>>2]=0,n[e+28>>2]=0;if(!((0|(i=0|n[(m=A+8|0)>>2]))<=0)){r=A+12|0,v=0;do{if(a=0|n[r>>2],o=v,Q=e+((v=v+1|0)<<5)|0,E=0|n[a+(o<<3)>>2]){if(t[(M=e+(v<<5)+8|0)>>3]=1.7976931348623157e308,t[(A=e+(v<<5)+24|0)>>3]=1.7976931348623157e308,t[Q>>3]=-1.7976931348623157e308,t[(D=e+(v<<5)+16|0)>>3]=-1.7976931348623157e308,(0|E)>0){for(b=0|n[a+(o<<3)+4>>2],B=1.7976931348623157e308,h=-1.7976931348623157e308,a=0,o=-1,k=0,s=1.7976931348623157e308,w=1.7976931348623157e308,g=-1.7976931348623157e308,l=-1.7976931348623157e308;u=+t[b+(k<<4)>>3],d=+t[b+(k<<4)+8>>3],c=+t[b+(((0|(o=o+2|0))==(0|E)?0:o)<<4)+8>>3],u<s&&(t[M>>3]=u,s=u),d<w&&(t[A>>3]=d,w=d),u>g?t[Q>>3]=u:u=g,d>l&&(t[D>>3]=d,l=d),B=d>0&d<B?d:B,h=d<0&d>h?d:h,a|=+f(+(d-c))>3.141592653589793,(0|(o=k+1|0))!=(0|E);)I=k,k=o,g=u,o=I;a&&(t[D>>3]=h,t[A>>3]=B)}}else n[Q>>2]=0,n[Q+4>>2]=0,n[Q+8>>2]=0,n[Q+12>>2]=0,n[Q+16>>2]=0,n[Q+20>>2]=0,n[Q+24>>2]=0,n[Q+28>>2]=0,i=0|n[m>>2]}while((0|v)<(0|i))}}function te(A,e,r){var i=0,t=0,o=0;if(!(0|re(A|=0,e|=0,r|=0)))return 0|(t=0);if((0|n[(t=A+8|0)>>2])<=0)return 0|(t=1);for(i=A+12|0,A=0;;){if(o=A,A=A+1|0,0|re((0|n[i>>2])+(o<<3)|0,e+(A<<5)|0,r)){A=0,i=6;break}if((0|A)>=(0|n[t>>2])){A=1,i=6;break}}return 6==(0|i)?0|A:0}function oe(A,e,r,i,n){e|=0,r|=0,i|=0,n|=0;var o,a,f,u,l,c,s,w=0;u=+t[(A|=0)>>3],f=+t[e>>3]-u,a=+t[A+8>>3],o=+t[e+8>>3]-a,c=+t[r>>3],w=((w=+t[i>>3]-c)*(a-(s=+t[r+8>>3]))-(u-c)*(l=+t[i+8>>3]-s))/(f*l-o*w),t[n>>3]=u+f*w,t[n+8>>3]=a+o*w}function ae(A,e){return e|=0,+t[(A|=0)>>3]!=+t[e>>3]?0|(e=0):0|(e=+t[A+8>>3]==+t[e+8>>3])}function fe(A,e){e|=0;var r,i,n;return+((n=+t[(A|=0)>>3]-+t[e>>3])*n+(i=+t[A+8>>3]-+t[e+8>>3])*i+(r=+t[A+16>>3]-+t[e+16>>3])*r)}function ue(A,e,r){A|=0,r|=0;var i=0;(0|(e|=0))>0?(i=0|ke(e,4),n[A>>2]=i,i||v(23230,23253,40,23267)):n[A>>2]=0,n[A+4>>2]=e,n[A+8>>2]=0,n[A+12>>2]=r}function le(A){var e,r,i,o=0,a=0,u=0,c=0;e=(A|=0)+4|0,r=A+12|0,i=A+8|0;A:for(;;){for(a=0|n[e>>2],o=0;;){if((0|o)>=(0|a))break A;if(u=0|n[A>>2],c=0|n[u+(o<<2)>>2])break;o=o+1|0}o=u+(~~(+f(+ +l(10,+ +(15-(0|n[r>>2])|0))*(+t[c>>3]+ +t[c+8>>3]))%+(0|a))>>>0<<2)|0,a=0|n[o>>2];e:do{if(0|a){if(u=c+32|0,(0|a)==(0|c))n[o>>2]=n[u>>2];else{if(!(o=0|n[(a=a+32|0)>>2]))break;for(;(0|o)!=(0|c);)if(!(o=0|n[(a=o+32|0)>>2]))break e;n[a>>2]=n[u>>2]}be(c),n[i>>2]=(0|n[i>>2])-1}}while(0)}be(0|n[A>>2])}function ce(A){var e,r=0,i=0;for(e=0|n[(A|=0)+4>>2],i=0;;){if((0|i)>=(0|e)){r=0,i=4;break}if(r=0|n[(0|n[A>>2])+(i<<2)>>2]){i=4;break}i=i+1|0}return 4==(0|i)?0|r:0}function se(A,e){e|=0;var r=0,i=0,o=0,a=0;if(r=~~(+f(+ +l(10,+ +(15-(0|n[(A|=0)+12>>2])|0))*(+t[e>>3]+ +t[e+8>>3]))%+(0|n[A+4>>2]))>>>0,r=(0|n[A>>2])+(r<<2)|0,!(i=0|n[r>>2]))return 0|(a=1);a=e+32|0;do{if((0|i)!=(0|e)){if(!(r=0|n[i+32>>2]))return 0|(a=1);for(o=r;;){if((0|o)==(0|e)){o=8;break}if(!(r=0|n[o+32>>2])){r=1,o=10;break}i=o,o=r}if(8==(0|o)){n[i+32>>2]=n[a>>2];break}if(10==(0|o))return 0|r}else n[r>>2]=n[a>>2]}while(0);return be(e),n[(a=A+8|0)>>2]=(0|n[a>>2])-1,0|(a=0)}function we(A,e,r){A|=0,e|=0,r|=0;var i,o=0,a=0,u=0;(i=0|he(40))||v(23283,23253,98,23296),n[i>>2]=n[e>>2],n[i+4>>2]=n[e+4>>2],n[i+8>>2]=n[e+8>>2],n[i+12>>2]=n[e+12>>2],n[(a=i+16|0)>>2]=n[r>>2],n[a+4>>2]=n[r+4>>2],n[a+8>>2]=n[r+8>>2],n[a+12>>2]=n[r+12>>2],n[i+32>>2]=0,a=~~(+f(+ +l(10,+ +(15-(0|n[A+12>>2])|0))*(+t[e>>3]+ +t[e+8>>3]))%+(0|n[A+4>>2]))>>>0,a=(0|n[A>>2])+(a<<2)|0,o=0|n[a>>2];do{if(o){for(;!(0|_A(o,e)&&0|_A(o+16|0,r));)if(a=0|n[o+32>>2],!(0|n[(o=0==(0|a)?o:a)+32>>2])){u=10;break}if(10==(0|u)){n[o+32>>2]=i;break}return be(i),0|(u=o)}n[a>>2]=i}while(0);return n[(u=A+8|0)>>2]=1+(0|n[u>>2]),0|(u=i)}function ge(A,e,r){e|=0,r|=0;var i=0,o=0;if(o=~~(+f(+ +l(10,+ +(15-(0|n[(A|=0)+12>>2])|0))*(+t[e>>3]+ +t[e+8>>3]))%+(0|n[A+4>>2]))>>>0,!(o=0|n[(0|n[A>>2])+(o<<2)>>2]))return 0|(r=0);if(!r){for(A=o;;){if(0|_A(A,e)){i=10;break}if(!(A=0|n[A+32>>2])){A=0,i=10;break}}if(10==(0|i))return 0|A}for(A=o;;){if(0|_A(A,e)&&0|_A(A+16|0,r)){i=10;break}if(!(A=0|n[A+32>>2])){A=0,i=10;break}}return 10==(0|i)?0|A:0}function de(A,e){e|=0;var r=0;if(r=~~(+f(+ +l(10,+ +(15-(0|n[(A|=0)+12>>2])|0))*(+t[e>>3]+ +t[e+8>>3]))%+(0|n[A+4>>2]))>>>0,!(A=0|n[(0|n[A>>2])+(r<<2)>>2]))return 0|(r=0);for(;;){if(0|_A(A,e)){e=5;break}if(!(A=0|n[A+32>>2])){A=0,e=5;break}}return 5==(0|e)?0|A:0}function Be(A){return 0|~~+function(A){return+ +xe(+(A=+A))}(A=+A)}function he(A){A|=0;var e,r=0,i=0,t=0,o=0,a=0,f=0,u=0,l=0,c=0,s=0,w=0,g=0,d=0,B=0,h=0,b=0,k=0,Q=0,E=0,M=0;e=x,x=x+16|0,g=e;do{if(A>>>0<245){if(A=(c=A>>>0<11?16:A+11&-8)>>>3,3&(i=(w=0|n[5829])>>>A)|0)return t=0|n[(i=(A=23356+((r=(1&i^1)+A|0)<<1<<2)|0)+8|0)>>2],(0|(a=0|n[(o=t+8|0)>>2]))==(0|A)?n[5829]=w&~(1<<r):(n[a+12>>2]=A,n[i>>2]=a),M=r<<3,n[t+4>>2]=3|M,n[(M=t+M+4|0)>>2]=1|n[M>>2],x=e,0|(M=o);if(c>>>0>(s=0|n[5831])>>>0){if(0|i)return r=((r=i<<A&((r=2<<A)|0-r))&0-r)-1|0,a=0|n[(A=(r=23356+((t=((i=(r>>>=u=r>>>12&16)>>>5&8)|u|(a=(r>>>=i)>>>2&4)|(A=(r>>>=a)>>>1&2)|(t=(r>>>=A)>>>1&1))+(r>>>t)|0)<<1<<2)|0)+8|0)>>2],(0|(i=0|n[(u=a+8|0)>>2]))==(0|r)?(A=w&~(1<<t),n[5829]=A):(n[i+12>>2]=r,n[A>>2]=i,A=w),f=(M=t<<3)-c|0,n[a+4>>2]=3|c,n[(o=a+c|0)+4>>2]=1|f,n[a+M>>2]=f,0|s&&(t=0|n[5834],i=23356+((r=s>>>3)<<1<<2)|0,A&(r=1<<r)?r=0|n[(A=i+8|0)>>2]:(n[5829]=A|r,r=i,A=i+8|0),n[A>>2]=t,n[r+12>>2]=t,n[t+8>>2]=r,n[t+12>>2]=i),n[5831]=f,n[5834]=o,x=e,0|(M=u);if(a=0|n[5830]){for(i=(a&0-a)-1|0,i=l=0|n[23620+(((t=(i>>>=o=i>>>12&16)>>>5&8)|o|(f=(i>>>=t)>>>2&4)|(u=(i>>>=f)>>>1&2)|(l=(i>>>=u)>>>1&1))+(i>>>l)<<2)>>2],u=l,l=(-8&n[l+4>>2])-c|0;(A=0|n[i+16>>2])||(A=0|n[i+20>>2]);)i=A,u=(o=(f=(-8&n[A+4>>2])-c|0)>>>0<l>>>0)?A:u,l=o?f:l;if((f=u+c|0)>>>0>u>>>0){o=0|n[u+24>>2],r=0|n[u+12>>2];do{if((0|r)==(0|u)){if(!(r=0|n[(A=u+20|0)>>2])&&!(r=0|n[(A=u+16|0)>>2])){i=0;break}for(;;)if(i=0|n[(t=r+20|0)>>2])r=i,A=t;else{if(!(i=0|n[(t=r+16|0)>>2]))break;r=i,A=t}n[A>>2]=0,i=r}else i=0|n[u+8>>2],n[i+12>>2]=r,n[r+8>>2]=i,i=r}while(0);do{if(0|o){if(r=0|n[u+28>>2],(0|u)==(0|n[(A=23620+(r<<2)|0)>>2])){if(n[A>>2]=i,!i){n[5830]=a&~(1<<r);break}}else if(n[((0|n[(M=o+16|0)>>2])==(0|u)?M:o+20|0)>>2]=i,!i)break;n[i+24>>2]=o,0|(r=0|n[u+16>>2])&&(n[i+16>>2]=r,n[r+24>>2]=i),0|(r=0|n[u+20>>2])&&(n[i+20>>2]=r,n[r+24>>2]=i)}}while(0);return l>>>0<16?(M=l+c|0,n[u+4>>2]=3|M,n[(M=u+M+4|0)>>2]=1|n[M>>2]):(n[u+4>>2]=3|c,n[f+4>>2]=1|l,n[f+l>>2]=l,0|s&&(t=0|n[5834],i=23356+((r=s>>>3)<<1<<2)|0,(r=1<<r)&w?r=0|n[(A=i+8|0)>>2]:(n[5829]=r|w,r=i,A=i+8|0),n[A>>2]=t,n[r+12>>2]=t,n[t+8>>2]=r,n[t+12>>2]=i),n[5831]=l,n[5834]=f),x=e,0|(M=u+8|0)}w=c}else w=c}else w=c}else if(A>>>0<=4294967231)if(c=-8&(A=A+11|0),t=0|n[5830]){o=0-c|0,l=(A>>>=8)?c>>>0>16777215?31:c>>>((l=14-((u=((h=A<<(w=(A+1048320|0)>>>16&8))+520192|0)>>>16&4)|w|(l=((h<<=u)+245760|0)>>>16&2))+(h<<l>>>15)|0)+7|0)&1|l<<1:0,i=0|n[23620+(l<<2)>>2];A:do{if(i)for(A=0,u=c<<(31==(0|l)?0:25-(l>>>1)|0),a=0;;){if((f=(-8&n[i+4>>2])-c|0)>>>0<o>>>0){if(!f){A=i,o=0,h=65;break A}A=i,o=f}if(a=0==(0|(h=0|n[i+20>>2]))|(0|h)==(0|(i=0|n[i+16+(u>>>31<<2)>>2]))?a:h,!i){i=a,h=61;break}u<<=1}else i=0,A=0,h=61}while(0);if(61==(0|h)){if(0==(0|i)&0==(0|A)){if(!(A=((A=2<<l)|0-A)&t)){w=c;break}w=(A&0-A)-1|0,A=0,i=0|n[23620+(((a=(w>>>=f=w>>>12&16)>>>5&8)|f|(u=(w>>>=a)>>>2&4)|(l=(w>>>=u)>>>1&2)|(i=(w>>>=l)>>>1&1))+(w>>>i)<<2)>>2]}i?h=65:(u=A,f=o)}if(65==(0|h))for(a=i;;){if(o=(i=(w=(-8&n[a+4>>2])-c|0)>>>0<o>>>0)?w:o,A=i?a:A,(i=0|n[a+16>>2])||(i=0|n[a+20>>2]),!i){u=A,f=o;break}a=i}if(0!=(0|u)&&f>>>0<((0|n[5831])-c|0)>>>0&&(s=u+c|0)>>>0>u>>>0){a=0|n[u+24>>2],r=0|n[u+12>>2];do{if((0|r)==(0|u)){if(!(r=0|n[(A=u+20|0)>>2])&&!(r=0|n[(A=u+16|0)>>2])){r=0;break}for(;;)if(i=0|n[(o=r+20|0)>>2])r=i,A=o;else{if(!(i=0|n[(o=r+16|0)>>2]))break;r=i,A=o}n[A>>2]=0}else M=0|n[u+8>>2],n[M+12>>2]=r,n[r+8>>2]=M}while(0);do{if(a){if(A=0|n[u+28>>2],(0|u)==(0|n[(i=23620+(A<<2)|0)>>2])){if(n[i>>2]=r,!r){t&=~(1<<A),n[5830]=t;break}}else if(n[((0|n[(M=a+16|0)>>2])==(0|u)?M:a+20|0)>>2]=r,!r)break;n[r+24>>2]=a,0|(A=0|n[u+16>>2])&&(n[r+16>>2]=A,n[A+24>>2]=r),(A=0|n[u+20>>2])&&(n[r+20>>2]=A,n[A+24>>2]=r)}}while(0);A:do{if(f>>>0<16)M=f+c|0,n[u+4>>2]=3|M,n[(M=u+M+4|0)>>2]=1|n[M>>2];else{if(n[u+4>>2]=3|c,n[s+4>>2]=1|f,n[s+f>>2]=f,r=f>>>3,f>>>0<256){i=23356+(r<<1<<2)|0,(A=0|n[5829])&(r=1<<r)?r=0|n[(A=i+8|0)>>2]:(n[5829]=A|r,r=i,A=i+8|0),n[A>>2]=s,n[r+12>>2]=s,n[s+8>>2]=r,n[s+12>>2]=i;break}if(r=23620+((i=(r=f>>>8)?f>>>0>16777215?31:f>>>((i=14-((Q=((M=r<<(E=(r+1048320|0)>>>16&8))+520192|0)>>>16&4)|E|(i=((M<<=Q)+245760|0)>>>16&2))+(M<<i>>>15)|0)+7|0)&1|i<<1:0)<<2)|0,n[s+28>>2]=i,n[(A=s+16|0)+4>>2]=0,n[A>>2]=0,!(t&(A=1<<i))){n[5830]=t|A,n[r>>2]=s,n[s+24>>2]=r,n[s+12>>2]=s,n[s+8>>2]=s;break}r=0|n[r>>2];e:do{if((-8&n[r+4>>2]|0)!=(0|f)){for(t=f<<(31==(0|i)?0:25-(i>>>1)|0);A=0|n[(i=r+16+(t>>>31<<2)|0)>>2];){if((-8&n[A+4>>2]|0)==(0|f)){r=A;break e}t<<=1,r=A}n[i>>2]=s,n[s+24>>2]=r,n[s+12>>2]=s,n[s+8>>2]=s;break A}}while(0);M=0|n[(E=r+8|0)>>2],n[M+12>>2]=s,n[E>>2]=s,n[s+8>>2]=M,n[s+12>>2]=r,n[s+24>>2]=0}}while(0);return x=e,0|(M=u+8|0)}w=c}else w=c;else w=-1}while(0);if((i=0|n[5831])>>>0>=w>>>0)return r=i-w|0,A=0|n[5834],r>>>0>15?(M=A+w|0,n[5834]=M,n[5831]=r,n[M+4>>2]=1|r,n[A+i>>2]=r,n[A+4>>2]=3|w):(n[5831]=0,n[5834]=0,n[A+4>>2]=3|i,n[(M=A+i+4|0)>>2]=1|n[M>>2]),x=e,0|(M=A+8|0);if((f=0|n[5832])>>>0>w>>>0)return Q=f-w|0,n[5832]=Q,E=(M=0|n[5835])+w|0,n[5835]=E,n[E+4>>2]=1|Q,n[M+4>>2]=3|w,x=e,0|(M=M+8|0);if(0|n[5947]?A=0|n[5949]:(n[5949]=4096,n[5948]=4096,n[5950]=-1,n[5951]=-1,n[5952]=0,n[5940]=0,n[5947]=-16&g^1431655768,A=4096),u=w+48|0,(c=(a=A+(l=w+47|0)|0)&(o=0-A|0))>>>0<=w>>>0)return x=e,0|(M=0);if(0|(A=0|n[5939])&&(g=(s=0|n[5937])+c|0)>>>0<=s>>>0|g>>>0>A>>>0)return x=e,0|(M=0);A:do{if(4&n[5940])r=0,h=143;else{i=0|n[5835];e:do{if(i){for(t=23764;!((g=0|n[t>>2])>>>0<=i>>>0&&(g+(0|n[t+4>>2])|0)>>>0>i>>>0);){if(!(A=0|n[t+8>>2])){h=128;break e}t=A}if((r=a-f&o)>>>0<2147483647)if((0|(A=0|Fe(0|r)))==((0|n[t>>2])+(0|n[t+4>>2])|0)){if(-1!=(0|A)){f=r,a=A,h=145;break A}}else t=A,h=136;else r=0}else h=128}while(0);do{if(128==(0|h))if(-1!=(0|(i=0|Fe(0)))&&(r=i,B=(r=(0==((B=(d=0|n[5948])+-1|0)&r|0)?0:(B+r&0-d)-r|0)+c|0)+(d=0|n[5937])|0,r>>>0>w>>>0&r>>>0<2147483647)){if(0|(g=0|n[5939])&&B>>>0<=d>>>0|B>>>0>g>>>0){r=0;break}if((0|(A=0|Fe(0|r)))==(0|i)){f=r,a=i,h=145;break A}t=A,h=136}else r=0}while(0);do{if(136==(0|h)){if(i=0-r|0,!(u>>>0>r>>>0&r>>>0<2147483647&-1!=(0|t))){if(-1==(0|t)){r=0;break}f=r,a=t,h=145;break A}if((A=l-r+(A=0|n[5949])&0-A)>>>0>=2147483647){f=r,a=t,h=145;break A}if(-1==(0|Fe(0|A))){Fe(0|i),r=0;break}f=A+r|0,a=t,h=145;break A}}while(0);n[5940]=4|n[5940],h=143}}while(0);if(143==(0|h)&&c>>>0<2147483647&&!(-1==(0|(Q=0|Fe(0|c)))|1^(k=(b=(B=0|Fe(0))-Q|0)>>>0>(w+40|0)>>>0)|Q>>>0<B>>>0&-1!=(0|Q)&-1!=(0|B)^1)&&(f=k?b:r,a=Q,h=145),145==(0|h)){r=(0|n[5937])+f|0,n[5937]=r,r>>>0>(0|n[5938])>>>0&&(n[5938]=r),l=0|n[5835];A:do{if(l){for(r=23764;;){if((0|a)==((A=0|n[r>>2])+(i=0|n[r+4>>2])|0)){h=154;break}if(!(t=0|n[r+8>>2]))break;r=t}if(154==(0|h)&&(E=r+4|0,0==(8&n[r+12>>2]|0))&&a>>>0>l>>>0&A>>>0<=l>>>0){n[E>>2]=i+f,E=l+(Q=0==(7&(Q=l+8|0)|0)?0:0-Q&7)|0,Q=(M=(0|n[5832])+f|0)-Q|0,n[5835]=E,n[5832]=Q,n[E+4>>2]=1|Q,n[l+M+4>>2]=40,n[5836]=n[5951];break}for(a>>>0<(0|n[5833])>>>0&&(n[5833]=a),i=a+f|0,r=23764;;){if((0|n[r>>2])==(0|i)){h=162;break}if(!(A=0|n[r+8>>2]))break;r=A}if(162==(0|h)&&0==(8&n[r+12>>2]|0)){n[r>>2]=a,n[(s=r+4|0)>>2]=(0|n[s>>2])+f,c=(s=a+(0==(7&(s=a+8|0)|0)?0:0-s&7)|0)+w|0,u=(r=i+(0==(7&(r=i+8|0)|0)?0:0-r&7)|0)-s-w|0,n[s+4>>2]=3|w;e:do{if((0|l)==(0|r))M=(0|n[5832])+u|0,n[5832]=M,n[5835]=c,n[c+4>>2]=1|M;else{if((0|n[5834])==(0|r)){M=(0|n[5831])+u|0,n[5831]=M,n[5834]=c,n[c+4>>2]=1|M,n[c+M>>2]=M;break}if(1==(3&(A=0|n[r+4>>2])|0)){f=-8&A,t=A>>>3;r:do{if(A>>>0<256){if(A=0|n[r+8>>2],(0|(i=0|n[r+12>>2]))==(0|A)){n[5829]=n[5829]&~(1<<t);break}n[A+12>>2]=i,n[i+8>>2]=A;break}a=0|n[r+24>>2],A=0|n[r+12>>2];do{if((0|A)==(0|r)){if(A=0|n[(t=(i=r+16|0)+4|0)>>2])i=t;else if(!(A=0|n[i>>2])){A=0;break}for(;;)if(t=0|n[(o=A+20|0)>>2])A=t,i=o;else{if(!(t=0|n[(o=A+16|0)>>2]))break;A=t,i=o}n[i>>2]=0}else M=0|n[r+8>>2],n[M+12>>2]=A,n[A+8>>2]=M}while(0);if(!a)break;t=23620+((i=0|n[r+28>>2])<<2)|0;do{if((0|n[t>>2])==(0|r)){if(n[t>>2]=A,0|A)break;n[5830]=n[5830]&~(1<<i);break r}if(n[((0|n[(M=a+16|0)>>2])==(0|r)?M:a+20|0)>>2]=A,!A)break r}while(0);if(n[A+24>>2]=a,0|(t=0|n[(i=r+16|0)>>2])&&(n[A+16>>2]=t,n[t+24>>2]=A),!(i=0|n[i+4>>2]))break;n[A+20>>2]=i,n[i+24>>2]=A}while(0);r=r+f|0,o=f+u|0}else o=u;if(n[(r=r+4|0)>>2]=-2&n[r>>2],n[c+4>>2]=1|o,n[c+o>>2]=o,r=o>>>3,o>>>0<256){i=23356+(r<<1<<2)|0,(A=0|n[5829])&(r=1<<r)?r=0|n[(A=i+8|0)>>2]:(n[5829]=A|r,r=i,A=i+8|0),n[A>>2]=c,n[r+12>>2]=c,n[c+8>>2]=r,n[c+12>>2]=i;break}r=o>>>8;do{if(r){if(o>>>0>16777215){t=31;break}t=o>>>((t=14-((Q=((M=r<<(E=(r+1048320|0)>>>16&8))+520192|0)>>>16&4)|E|(t=((M<<=Q)+245760|0)>>>16&2))+(M<<t>>>15)|0)+7|0)&1|t<<1}else t=0}while(0);if(r=23620+(t<<2)|0,n[c+28>>2]=t,n[(A=c+16|0)+4>>2]=0,n[A>>2]=0,!((A=0|n[5830])&(i=1<<t))){n[5830]=A|i,n[r>>2]=c,n[c+24>>2]=r,n[c+12>>2]=c,n[c+8>>2]=c;break}r=0|n[r>>2];r:do{if((-8&n[r+4>>2]|0)!=(0|o)){for(t=o<<(31==(0|t)?0:25-(t>>>1)|0);A=0|n[(i=r+16+(t>>>31<<2)|0)>>2];){if((-8&n[A+4>>2]|0)==(0|o)){r=A;break r}t<<=1,r=A}n[i>>2]=c,n[c+24>>2]=r,n[c+12>>2]=c,n[c+8>>2]=c;break e}}while(0);M=0|n[(E=r+8|0)>>2],n[M+12>>2]=c,n[E>>2]=c,n[c+8>>2]=M,n[c+12>>2]=r,n[c+24>>2]=0}}while(0);return x=e,0|(M=s+8|0)}for(r=23764;!((A=0|n[r>>2])>>>0<=l>>>0&&(M=A+(0|n[r+4>>2])|0)>>>0>l>>>0);)r=0|n[r+8>>2];r=(A=(A=(o=M+-47|0)+(0==(7&(A=o+8|0)|0)?0:0-A&7)|0)>>>0<(o=l+16|0)>>>0?l:A)+8|0,E=a+(Q=0==(7&(Q=a+8|0)|0)?0:0-Q&7)|0,Q=(i=f+-40|0)-Q|0,n[5835]=E,n[5832]=Q,n[E+4>>2]=1|Q,n[a+i+4>>2]=40,n[5836]=n[5951],n[(i=A+4|0)>>2]=27,n[r>>2]=n[5941],n[r+4>>2]=n[5942],n[r+8>>2]=n[5943],n[r+12>>2]=n[5944],n[5941]=a,n[5942]=f,n[5944]=0,n[5943]=r,r=A+24|0;do{E=r,n[(r=r+4|0)>>2]=7}while((E+8|0)>>>0<M>>>0);if((0|A)!=(0|l)){if(a=A-l|0,n[i>>2]=-2&n[i>>2],n[l+4>>2]=1|a,n[A>>2]=a,r=a>>>3,a>>>0<256){i=23356+(r<<1<<2)|0,(A=0|n[5829])&(r=1<<r)?r=0|n[(A=i+8|0)>>2]:(n[5829]=A|r,r=i,A=i+8|0),n[A>>2]=l,n[r+12>>2]=l,n[l+8>>2]=r,n[l+12>>2]=i;break}if(i=23620+((t=(r=a>>>8)?a>>>0>16777215?31:a>>>((t=14-((Q=((M=r<<(E=(r+1048320|0)>>>16&8))+520192|0)>>>16&4)|E|(t=((M<<=Q)+245760|0)>>>16&2))+(M<<t>>>15)|0)+7|0)&1|t<<1:0)<<2)|0,n[l+28>>2]=t,n[l+20>>2]=0,n[o>>2]=0,!((r=0|n[5830])&(A=1<<t))){n[5830]=r|A,n[i>>2]=l,n[l+24>>2]=i,n[l+12>>2]=l,n[l+8>>2]=l;break}r=0|n[i>>2];e:do{if((-8&n[r+4>>2]|0)!=(0|a)){for(t=a<<(31==(0|t)?0:25-(t>>>1)|0);A=0|n[(i=r+16+(t>>>31<<2)|0)>>2];){if((-8&n[A+4>>2]|0)==(0|a)){r=A;break e}t<<=1,r=A}n[i>>2]=l,n[l+24>>2]=r,n[l+12>>2]=l,n[l+8>>2]=l;break A}}while(0);M=0|n[(E=r+8|0)>>2],n[M+12>>2]=l,n[E>>2]=l,n[l+8>>2]=M,n[l+12>>2]=r,n[l+24>>2]=0}}else 0==(0|(M=0|n[5833]))|a>>>0<M>>>0&&(n[5833]=a),n[5941]=a,n[5942]=f,n[5944]=0,n[5838]=n[5947],n[5837]=-1,n[5842]=23356,n[5841]=23356,n[5844]=23364,n[5843]=23364,n[5846]=23372,n[5845]=23372,n[5848]=23380,n[5847]=23380,n[5850]=23388,n[5849]=23388,n[5852]=23396,n[5851]=23396,n[5854]=23404,n[5853]=23404,n[5856]=23412,n[5855]=23412,n[5858]=23420,n[5857]=23420,n[5860]=23428,n[5859]=23428,n[5862]=23436,n[5861]=23436,n[5864]=23444,n[5863]=23444,n[5866]=23452,n[5865]=23452,n[5868]=23460,n[5867]=23460,n[5870]=23468,n[5869]=23468,n[5872]=23476,n[5871]=23476,n[5874]=23484,n[5873]=23484,n[5876]=23492,n[5875]=23492,n[5878]=23500,n[5877]=23500,n[5880]=23508,n[5879]=23508,n[5882]=23516,n[5881]=23516,n[5884]=23524,n[5883]=23524,n[5886]=23532,n[5885]=23532,n[5888]=23540,n[5887]=23540,n[5890]=23548,n[5889]=23548,n[5892]=23556,n[5891]=23556,n[5894]=23564,n[5893]=23564,n[5896]=23572,n[5895]=23572,n[5898]=23580,n[5897]=23580,n[5900]=23588,n[5899]=23588,n[5902]=23596,n[5901]=23596,n[5904]=23604,n[5903]=23604,E=a+(Q=0==(7&(Q=a+8|0)|0)?0:0-Q&7)|0,Q=(M=f+-40|0)-Q|0,n[5835]=E,n[5832]=Q,n[E+4>>2]=1|Q,n[a+M+4>>2]=40,n[5836]=n[5951]}while(0);if((r=0|n[5832])>>>0>w>>>0)return Q=r-w|0,n[5832]=Q,E=(M=0|n[5835])+w|0,n[5835]=E,n[E+4>>2]=1|Q,n[M+4>>2]=3|w,x=e,0|(M=M+8|0)}return n[(M=23312)>>2]=12,x=e,0|(M=0)}function be(A){var e=0,r=0,i=0,t=0,o=0,a=0,f=0,u=0;if(A|=0){r=A+-8|0,t=0|n[5833],u=r+(e=-8&(A=0|n[A+-4>>2]))|0;do{if(1&A)f=r,a=r;else{if(i=0|n[r>>2],!(3&A))return;if(o=i+e|0,(a=r+(0-i)|0)>>>0<t>>>0)return;if((0|n[5834])==(0|a)){if(3!=(3&(e=0|n[(A=u+4|0)>>2])|0)){f=a,e=o;break}return n[5831]=o,n[A>>2]=-2&e,n[a+4>>2]=1|o,void(n[a+o>>2]=o)}if(r=i>>>3,i>>>0<256){if(A=0|n[a+8>>2],(0|(e=0|n[a+12>>2]))==(0|A)){n[5829]=n[5829]&~(1<<r),f=a,e=o;break}n[A+12>>2]=e,n[e+8>>2]=A,f=a,e=o;break}t=0|n[a+24>>2],A=0|n[a+12>>2];do{if((0|A)==(0|a)){if(A=0|n[(r=(e=a+16|0)+4|0)>>2])e=r;else if(!(A=0|n[e>>2])){A=0;break}for(;;)if(r=0|n[(i=A+20|0)>>2])A=r,e=i;else{if(!(r=0|n[(i=A+16|0)>>2]))break;A=r,e=i}n[e>>2]=0}else f=0|n[a+8>>2],n[f+12>>2]=A,n[A+8>>2]=f}while(0);if(t){if(e=0|n[a+28>>2],(0|n[(r=23620+(e<<2)|0)>>2])==(0|a)){if(n[r>>2]=A,!A){n[5830]=n[5830]&~(1<<e),f=a,e=o;break}}else if(n[((0|n[(f=t+16|0)>>2])==(0|a)?f:t+20|0)>>2]=A,!A){f=a,e=o;break}n[A+24>>2]=t,0|(r=0|n[(e=a+16|0)>>2])&&(n[A+16>>2]=r,n[r+24>>2]=A),(e=0|n[e+4>>2])?(n[A+20>>2]=e,n[e+24>>2]=A,f=a,e=o):(f=a,e=o)}else f=a,e=o}}while(0);if(!(a>>>0>=u>>>0)&&1&(i=0|n[(A=u+4|0)>>2])){if(2&i)n[A>>2]=-2&i,n[f+4>>2]=1|e,n[a+e>>2]=e,t=e;else{if((0|n[5835])==(0|u)){if(u=(0|n[5832])+e|0,n[5832]=u,n[5835]=f,n[f+4>>2]=1|u,(0|f)!=(0|n[5834]))return;return n[5834]=0,void(n[5831]=0)}if((0|n[5834])==(0|u))return u=(0|n[5831])+e|0,n[5831]=u,n[5834]=a,n[f+4>>2]=1|u,void(n[a+u>>2]=u);t=(-8&i)+e|0,r=i>>>3;do{if(i>>>0<256){if(e=0|n[u+8>>2],(0|(A=0|n[u+12>>2]))==(0|e)){n[5829]=n[5829]&~(1<<r);break}n[e+12>>2]=A,n[A+8>>2]=e;break}o=0|n[u+24>>2],A=0|n[u+12>>2];do{if((0|A)==(0|u)){if(A=0|n[(r=(e=u+16|0)+4|0)>>2])e=r;else if(!(A=0|n[e>>2])){r=0;break}for(;;)if(r=0|n[(i=A+20|0)>>2])A=r,e=i;else{if(!(r=0|n[(i=A+16|0)>>2]))break;A=r,e=i}n[e>>2]=0,r=A}else r=0|n[u+8>>2],n[r+12>>2]=A,n[A+8>>2]=r,r=A}while(0);if(0|o){if(A=0|n[u+28>>2],(0|n[(e=23620+(A<<2)|0)>>2])==(0|u)){if(n[e>>2]=r,!r){n[5830]=n[5830]&~(1<<A);break}}else if(n[((0|n[(i=o+16|0)>>2])==(0|u)?i:o+20|0)>>2]=r,!r)break;n[r+24>>2]=o,0|(e=0|n[(A=u+16|0)>>2])&&(n[r+16>>2]=e,n[e+24>>2]=r),0|(A=0|n[A+4>>2])&&(n[r+20>>2]=A,n[A+24>>2]=r)}}while(0);if(n[f+4>>2]=1|t,n[a+t>>2]=t,(0|f)==(0|n[5834]))return void(n[5831]=t)}if(A=t>>>3,t>>>0<256)return r=23356+(A<<1<<2)|0,(e=0|n[5829])&(A=1<<A)?A=0|n[(e=r+8|0)>>2]:(n[5829]=e|A,A=r,e=r+8|0),n[e>>2]=f,n[A+12>>2]=f,n[f+8>>2]=A,void(n[f+12>>2]=r);A=23620+((i=(A=t>>>8)?t>>>0>16777215?31:t>>>((i=14-((o=((u=A<<(a=(A+1048320|0)>>>16&8))+520192|0)>>>16&4)|a|(i=((u<<=o)+245760|0)>>>16&2))+(u<<i>>>15)|0)+7|0)&1|i<<1:0)<<2)|0,n[f+28>>2]=i,n[f+20>>2]=0,n[f+16>>2]=0,e=0|n[5830],r=1<<i;A:do{if(e&r){A=0|n[A>>2];e:do{if((-8&n[A+4>>2]|0)!=(0|t)){for(i=t<<(31==(0|i)?0:25-(i>>>1)|0);e=0|n[(r=A+16+(i>>>31<<2)|0)>>2];){if((-8&n[e+4>>2]|0)==(0|t)){A=e;break e}i<<=1,A=e}n[r>>2]=f,n[f+24>>2]=A,n[f+12>>2]=f,n[f+8>>2]=f;break A}}while(0);u=0|n[(a=A+8|0)>>2],n[u+12>>2]=f,n[a>>2]=f,n[f+8>>2]=u,n[f+12>>2]=A,n[f+24>>2]=0}else n[5830]=e|r,n[A>>2]=f,n[f+24>>2]=A,n[f+12>>2]=f,n[f+8>>2]=f}while(0);if(u=(0|n[5837])-1|0,n[5837]=u,!(0|u)){for(A=23772;A=0|n[A>>2];)A=A+8|0;n[5837]=-1}}}}function ke(A,e){e|=0;var r=0;return(A|=0)?(r=0|k(e,A),(e|A)>>>0>65535&&(r=(0|(r>>>0)/(A>>>0))==(0|e)?r:-1)):r=0,(A=0|he(r))&&3&n[A+-4>>2]?(pe(0|A,0,0|r),0|A):0|A}function Qe(A,e,r,i){return 0|(M(0|(i=(e|=0)-(i|=0)-((r|=0)>>>0>(A|=0)>>>0|0)>>>0)),A-r>>>0|0)}function Ee(A){return 0|((A|=0)?31-(0|E(A^A-1))|0:32)}function Me(A,e,r,i,t){t|=0;var o=0,a=0,f=0,u=0,l=0,c=0,s=0,w=0,g=0,d=0;if(c=A|=0,a=r|=0,f=w=i|=0,!(l=u=e|=0))return o=0!=(0|t),f?o?(n[t>>2]=0|A,n[t+4>>2]=0&e,t=0,0|(M(0|(w=0)),t)):(t=0,0|(M(0|(w=0)),t)):(o&&(n[t>>2]=(c>>>0)%(a>>>0),n[t+4>>2]=0),t=(c>>>0)/(a>>>0)>>>0,0|(M(0|(w=0)),t));o=0==(0|f);do{if(a){if(!o){if((o=(0|E(0|f))-(0|E(0|l))|0)>>>0<=31){a=s=o+1|0,A=c>>>(s>>>0)&(e=o-31>>31)|l<<(f=31-o|0),e&=l>>>(s>>>0),o=0,f=c<<f;break}return t?(n[t>>2]=0|A,n[t+4>>2]=u|0&e,t=0,0|(M(0|(w=0)),t)):(t=0,0|(M(0|(w=0)),t))}if((o=a-1|0)&a|0){a=f=33+(0|E(0|a))-(0|E(0|l))|0,A=(s=32-f|0)-1>>31&l>>>((g=f-32|0)>>>0)|(l<<s|c>>>(f>>>0))&(e=g>>31),e&=l>>>(f>>>0),o=c<<(d=64-f|0)&(u=s>>31),f=(l<<d|c>>>(g>>>0))&u|c<<s&f-33>>31;break}return 0|t&&(n[t>>2]=o&c,n[t+4>>2]=0),1==(0|a)?(d=0|A,0|(M(0|(g=u|0&e)),d)):(g=l>>>((d=0|Ee(0|a))>>>0)|0,d=l<<32-d|c>>>(d>>>0)|0,0|(M(0|g),d))}if(o)return 0|t&&(n[t>>2]=(l>>>0)%(a>>>0),n[t+4>>2]=0),d=(l>>>0)/(a>>>0)>>>0,0|(M(0|(g=0)),d);if(!c)return 0|t&&(n[t>>2]=0,n[t+4>>2]=(l>>>0)%(f>>>0)),d=(l>>>0)/(f>>>0)>>>0,0|(M(0|(g=0)),d);if(!((o=f-1|0)&f))return 0|t&&(n[t>>2]=0|A,n[t+4>>2]=o&l|0&e),g=0,d=l>>>((0|Ee(0|f))>>>0),0|(M(0|g),d);if((o=(0|E(0|f))-(0|E(0|l))|0)>>>0<=30){a=e=o+1|0,A=l<<(f=31-o|0)|c>>>(e>>>0),e=l>>>(e>>>0),o=0,f=c<<f;break}return t?(n[t>>2]=0|A,n[t+4>>2]=u|0&e,d=0,0|(M(0|(g=0)),d)):(d=0,0|(M(0|(g=0)),d))}while(0);if(a){l=0|function(A,e,r,i){return 0|(M((e|=0)+(i|=0)+((r=(A|=0)+(r|=0)>>>0)>>>0<A>>>0|0)>>>0|0),0|r)}(0|(s=0|r),0|(c=w|0&i),-1,-1),r=0|D(),u=f,f=0;do{i=u,u=o>>>31|u<<1,o=f|o<<1,Qe(0|l,0|r,0|(i=A<<1|i>>>31|0),0|(w=A>>>31|e<<1|0)),f=1&(g=(d=0|D())>>31|((0|d)<0?-1:0)<<1),A=0|Qe(0|i,0|w,g&s|0,(((0|d)<0?-1:0)>>31|((0|d)<0?-1:0)<<1)&c|0),e=0|D(),a=a-1|0}while(0!=(0|a));l=u,u=0}else l=f,u=0,f=0;return a=0,0|t&&(n[t>>2]=A,n[t+4>>2]=e),d=-2&(o<<1|0)|f,0|(M(0|(g=(0|o)>>>31|(l|a)<<1|0&(a<<1|o>>>31)|u)),d)}function De(A,e,r,i){var t,o;return o=x,x=x+16|0,Me(A|=0,e|=0,r|=0,i|=0,t=0|o),x=o,0|(M(0|n[t+4>>2]),0|n[t>>2])}function ve(A,e,r){return A|=0,e|=0,(0|(r|=0))<32?(M(e>>>r|0),A>>>r|(e&(1<<r)-1)<<32-r):(M(0),e>>>r-32|0)}function me(A,e,r){return A|=0,e|=0,(0|(r|=0))<32?(M(e<<r|(A&(1<<r)-1<<32-r)>>>32-r|0),A<<r):(M(A<<r-32|0),0)}function Ie(A,e){return e=+e,(A=+A)!=A?+e:e!=e?+A:+Q(+A,+e)}function _e(A){return(A=+A)>=0?+a(A+.5):+b(A-.5)}function Ce(A,e,r){A|=0,e|=0;var t,o,a=0;if((0|(r|=0))>=8192)return _(0|A,0|e,0|r),0|A;if(o=0|A,t=A+r|0,(3&A)==(3&e)){for(;3&A;){if(!r)return 0|o;i[A>>0]=0|i[e>>0],A=A+1|0,e=e+1|0,r=r-1|0}for(a=(r=-4&t|0)-64|0;(0|A)<=(0|a);)n[A>>2]=n[e>>2],n[A+4>>2]=n[e+4>>2],n[A+8>>2]=n[e+8>>2],n[A+12>>2]=n[e+12>>2],n[A+16>>2]=n[e+16>>2],n[A+20>>2]=n[e+20>>2],n[A+24>>2]=n[e+24>>2],n[A+28>>2]=n[e+28>>2],n[A+32>>2]=n[e+32>>2],n[A+36>>2]=n[e+36>>2],n[A+40>>2]=n[e+40>>2],n[A+44>>2]=n[e+44>>2],n[A+48>>2]=n[e+48>>2],n[A+52>>2]=n[e+52>>2],n[A+56>>2]=n[e+56>>2],n[A+60>>2]=n[e+60>>2],A=A+64|0,e=e+64|0;for(;(0|A)<(0|r);)n[A>>2]=n[e>>2],A=A+4|0,e=e+4|0}else for(r=t-4|0;(0|A)<(0|r);)i[A>>0]=0|i[e>>0],i[A+1>>0]=0|i[e+1>>0],i[A+2>>0]=0|i[e+2>>0],i[A+3>>0]=0|i[e+3>>0],A=A+4|0,e=e+4|0;for(;(0|A)<(0|t);)i[A>>0]=0|i[e>>0],A=A+1|0,e=e+1|0;return 0|o}function pe(A,e,r){e|=0;var t,o=0,a=0,f=0;if(t=(A|=0)+(r|=0)|0,e&=255,(0|r)>=67){for(;3&A;)i[A>>0]=e,A=A+1|0;for(f=e|e<<8|e<<16|e<<24,a=(o=-4&t|0)-64|0;(0|A)<=(0|a);)n[A>>2]=f,n[A+4>>2]=f,n[A+8>>2]=f,n[A+12>>2]=f,n[A+16>>2]=f,n[A+20>>2]=f,n[A+24>>2]=f,n[A+28>>2]=f,n[A+32>>2]=f,n[A+36>>2]=f,n[A+40>>2]=f,n[A+44>>2]=f,n[A+48>>2]=f,n[A+52>>2]=f,n[A+56>>2]=f,n[A+60>>2]=f,A=A+64|0;for(;(0|A)<(0|o);)n[A>>2]=f,A=A+4|0}for(;(0|A)<(0|t);)i[A>>0]=e,A=A+1|0;return t-r|0}function xe(A){return(A=+A)>=0?+a(A+.5):+b(A-.5)}function Fe(A){A|=0;var e,r,i;return i=0|I(),(0|A)>0&(0|(e=(r=0|n[o>>2])+A|0))<(0|r)|(0|e)<0?(p(0|e),m(12),-1):(0|e)>(0|i)&&!(0|C(0|e))?(m(12),-1):(n[o>>2]=e,0|r)}return{___uremdi3:De,_bitshift64Lshr:ve,_bitshift64Shl:me,_calloc:ke,_cellAreaKm2:function(A,e){var r,i,t,o=0;if(t=x,x=x+192|0,i=t,OA(A|=0,e|=0,r=t+168|0),WA(A,e,i),(0|(e=0|n[i>>2]))>0){if(o=+pA(i+8|0,i+8+((1!=(0|e)&1)<<4)|0,r)+0,1!=(0|e)){A=1;do{o+=+pA(i+8+(A<<4)|0,i+8+(((0|(A=A+1|0))%(0|e)|0)<<4)|0,r)}while((0|A)<(0|e))}}else o=0;return x=t,6371.007180918475*o*6371.007180918475},_cellAreaM2:function(A,e){var r,i,t,o=0;if(t=x,x=x+192|0,i=t,OA(A|=0,e|=0,r=t+168|0),WA(A,e,i),(0|(e=0|n[i>>2]))>0){if(o=+pA(i+8|0,i+8+((1!=(0|e)&1)<<4)|0,r)+0,1!=(0|e)){A=1;do{o+=+pA(i+8+(A<<4)|0,i+8+(((0|(A=A+1|0))%(0|e)|0)<<4)|0,r)}while((0|A)<(0|e))}}else o=0;return x=t,6371.007180918475*o*6371.007180918475*1e3*1e3},_cellAreaRads2:function(A,e){var r,i,t,o=0;if(t=x,x=x+192|0,i=t,OA(A|=0,e|=0,r=t+168|0),WA(A,e,i),(0|(e=0|n[i>>2]))<=0)return x=t,+(o=0);if(o=+pA(i+8|0,i+8+((1!=(0|e)&1)<<4)|0,r)+0,1==(0|e))return x=t,+o;A=1;do{o+=+pA(i+8+(A<<4)|0,i+8+(((0|(A=A+1|0))%(0|e)|0)<<4)|0,r)}while((0|A)<(0|e));return x=t,+o},_compact:function(A,e,r){e|=0;var i,t=0,o=0,a=0,f=0,u=0,l=0,c=0,s=0,w=0,g=0,d=0,B=0,h=0,b=0,k=0,Q=0,E=0,M=0,v=0,m=0,I=0;if(!(r|=0))return 0|(m=0);if(t=0|n[(o=A|=0)>>2],!0&0==(15728640&(o=0|n[o+4>>2])|0)){if((0|r)<=0)return 0|(m=0);if(n[(m=e)>>2]=t,n[m+4>>2]=o,1==(0|r))return 0|(m=0);t=1;do{v=0|n[4+(M=A+(t<<3)|0)>>2],n[(m=e+(t<<3)|0)>>2]=n[M>>2],n[m+4>>2]=v,t=t+1|0}while((0|t)!=(0|r));return 0|(t=0)}if(!(v=0|he(M=r<<3)))return 0|(m=-3);if(Ce(0|v,0|A,0|M),!(i=0|ke(r,8)))return be(v),0|(m=-3);t=r;A:for(;;){Q=0|ve(0|(s=0|n[(f=v)>>2]),0|(f=0|n[f+4>>2]),52),D(),E=(Q&=15)-1|0,k=(0|t)>0;e:do{if(k){if(b=((0|t)<0)<<31>>31,B=0|me(0|E,0,52),h=0|D(),E>>>0>15)for(o=0,A=s,r=f;;){if(!(0==(0|A)&0==(0|r))){if(a=0|ve(0|A,0|r,52),D(),u=(0|(a&=15))<(0|E),a=(0|a)==(0|E),r=0|De(0|(c=u?0:a?A:0),0|(A=u?0:a?r:0),0|t,0|b),D(),0==(0|(l=0|n[(u=a=i+(r<<3)|0)>>2]))&0==(0|(u=0|n[u+4>>2])))r=c;else for(B=0,d=r,g=u,r=c;;){if((0|B)>(0|t)){m=41;break A}if((0|l)==(0|r)&(-117440513&g|0)==(0|A)){c=0|ve(0|l,0|g,56),D(),w=1+(c&=7)|0,h=0|ve(0|l,0|g,45),D();r:do{if(0|T(127&h)){if(l=0|ve(0|l,0|g,52),D(),!(l&=15)){u=6;break}for(u=1;;){if(!(0==((h=0|me(7,0,3*(15-u|0)|0))&r|0)&0==((0|D())&A|0))){u=7;break r}if(!(u>>>0<l>>>0)){u=6;break}u=u+1|0}}else u=7}while(0);if((c+2|0)>>>0>u>>>0){m=51;break A}h=0|me(0|w,0,56),A=0|D()|-117440513&A,n[(u=a)>>2]=0,n[u+4>>2]=0,u=d,r|=h}else u=(d+1|0)%(0|t)|0;if(0==(0|(l=0|n[(g=a=i+(u<<3)|0)>>2]))&0==(0|(g=0|n[g+4>>2])))break;B=B+1|0,d=u}n[(h=a)>>2]=r,n[h+4>>2]=A}if((0|(o=o+1|0))>=(0|t))break e;A=0|n[(r=v+(o<<3)|0)>>2],r=0|n[r+4>>2]}for(o=0,A=s,r=f;;){if(!(0==(0|A)&0==(0|r))){if(u=0|ve(0|A,0|r,52),D(),(0|(u&=15))>=(0|E)){if((0|u)!=(0|E)&&(A|=B,r=-15728641&r|h,u>>>0>=Q>>>0)){a=E;do{d=0|me(7,0,3*(14-a|0)|0),a=a+1|0,A|=d,r=0|D()|r}while(a>>>0<u>>>0)}}else A=0,r=0;if(u=0|De(0|A,0|r,0|t,0|b),D(),!(0==(0|(c=0|n[(l=a=i+(u<<3)|0)>>2]))&0==(0|(l=0|n[l+4>>2]))))for(d=0;;){if((0|d)>(0|t)){m=41;break A}if((0|c)==(0|A)&(-117440513&l|0)==(0|r)){w=0|ve(0|c,0|l,56),D(),g=1+(w&=7)|0,I=0|ve(0|c,0|l,45),D();r:do{if(0|T(127&I)){if(c=0|ve(0|c,0|l,52),D(),!(c&=15)){l=6;break}for(l=1;;){if(!(0==((I=0|me(7,0,3*(15-l|0)|0))&A|0)&0==((0|D())&r|0))){l=7;break r}if(!(l>>>0<c>>>0)){l=6;break}l=l+1|0}}else l=7}while(0);if((w+2|0)>>>0>l>>>0){m=51;break A}I=0|me(0|g,0,56),r=0|D()|-117440513&r,n[(g=a)>>2]=0,n[g+4>>2]=0,A|=I}else u=(u+1|0)%(0|t)|0;if(0==(0|(c=0|n[(l=a=i+(u<<3)|0)>>2]))&0==(0|(l=0|n[l+4>>2])))break;d=d+1|0}n[(I=a)>>2]=A,n[I+4>>2]=r}if((0|(o=o+1|0))>=(0|t))break e;A=0|n[(r=v+(o<<3)|0)>>2],r=0|n[r+4>>2]}}}while(0);if((t+5|0)>>>0<11){m=99;break}if(!(h=0|ke((0|t)/6|0,8))){m=58;break}e:do{if(k){d=0,g=0;do{if(!(0==(0|(o=0|n[(A=u=i+(d<<3)|0)>>2]))&0==(0|(A=0|n[A+4>>2])))){l=0|ve(0|o,0|A,56),D(),r=1+(l&=7)|0,c=-117440513&A,I=0|ve(0|o,0|A,45),D();r:do{if(0|T(127&I)){if(w=0|ve(0|o,0|A,52),D(),0|(w&=15))for(a=1;;){if(!(0==(o&(I=0|me(7,0,3*(15-a|0)|0))|0)&0==(c&(0|D())|0)))break r;if(!(a>>>0<w>>>0))break;a=a+1|0}o|=A=0|me(0|r,0,56),A=0|D()|c,n[(r=u)>>2]=o,n[r+4>>2]=A,r=l+2|0}}while(0);7==(0|r)&&(n[(I=h+(g<<3)|0)>>2]=o,n[I+4>>2]=-117440513&A,g=g+1|0)}d=d+1|0}while((0|d)!=(0|t));if(k){if(B=((0|t)<0)<<31>>31,w=0|me(0|E,0,52),d=0|D(),E>>>0>15)for(A=0,o=0;;){do{if(!(0==(0|s)&0==(0|f))){for(l=0|ve(0|s,0|f,52),D(),a=(0|(l&=15))<(0|E),l=(0|l)==(0|E),a=0|De(0|(u=a?0:l?s:0),0|(l=a?0:l?f:0),0|t,0|B),D(),r=0;;){if((0|r)>(0|t)){m=98;break A}if((-117440513&(c=0|n[4+(I=i+(a<<3)|0)>>2])|0)==(0|l)&&(0|n[I>>2])==(0|u)){m=70;break}if((0|n[(I=i+((a=(a+1|0)%(0|t)|0)<<3)|0)>>2])==(0|u)&&(0|n[I+4>>2])==(0|l))break;r=r+1|0}if(70==(0|m)&&(m=0,!0&100663296==(117440512&c|0)))break;n[(I=e+(o<<3)|0)>>2]=s,n[I+4>>2]=f,o=o+1|0}}while(0);if((0|(A=A+1|0))>=(0|t)){t=g;break e}s=0|n[(f=v+(A<<3)|0)>>2],f=0|n[f+4>>2]}for(A=0,o=0;;){do{if(!(0==(0|s)&0==(0|f))){if(l=0|ve(0|s,0|f,52),D(),(0|(l&=15))>=(0|E))if((0|l)!=(0|E))if(r=s|w,a=-15728641&f|d,l>>>0<Q>>>0)l=a;else{u=E;do{I=0|me(7,0,3*(14-u|0)|0),u=u+1|0,r|=I,a=0|D()|a}while(u>>>0<l>>>0);l=a}else r=s,l=f;else r=0,l=0;for(u=0|De(0|r,0|l,0|t,0|B),D(),a=0;;){if((0|a)>(0|t)){m=98;break A}if((-117440513&(c=0|n[4+(I=i+(u<<3)|0)>>2])|0)==(0|l)&&(0|n[I>>2])==(0|r)){m=93;break}if((0|n[(I=i+((u=(u+1|0)%(0|t)|0)<<3)|0)>>2])==(0|r)&&(0|n[I+4>>2])==(0|l))break;a=a+1|0}if(93==(0|m)&&(m=0,!0&100663296==(117440512&c|0)))break;n[(I=e+(o<<3)|0)>>2]=s,n[I+4>>2]=f,o=o+1|0}}while(0);if((0|(A=A+1|0))>=(0|t)){t=g;break e}s=0|n[(f=v+(A<<3)|0)>>2],f=0|n[f+4>>2]}}else o=0,t=g}else o=0,t=0}while(0);if(pe(0|i,0,0|M),Ce(0|v,0|h,t<<3|0),be(h),!t)break;e=e+(o<<3)|0}return 41==(0|m)?(be(v),be(i),0|(I=-1)):51==(0|m)?(be(v),be(i),0|(I=-2)):58==(0|m)?(be(v),be(i),0|(I=-3)):98==(0|m)?(be(h),be(v),be(i),0|(I=-1)):(99==(0|m)&&Ce(0|e,0|v,t<<3|0),be(v),be(i),0|(I=0))},_destroyLinkedPolygon:function(A){var e=0,r=0,i=0,t=0;if(A|=0)for(i=1;;){if(0|(e=0|n[A>>2]))do{if(0|(r=0|n[e>>2]))do{t=r,r=0|n[r+16>>2],be(t)}while(0!=(0|r));t=e,e=0|n[e+8>>2],be(t)}while(0!=(0|e));if(e=A,A=0|n[A+8>>2],i||be(e),!A)break;i=0}},_edgeLengthKm:function(A){return+ +t[20752+((A|=0)<<3)>>3]},_edgeLengthM:function(A){return+ +t[20880+((A|=0)<<3)>>3]},_emscripten_replace_memory:function(A){return i=new Int8Array(A),new Uint8Array(A),n=new Int32Array(A),new Float32Array(A),t=new Float64Array(A),r=A,!0},_exactEdgeLengthKm:function(A,e){var r,i,o=0,a=0,f=0,l=0,w=0,g=0;if(i=x,x=x+176|0,jA(A|=0,e|=0,r=i),(0|(A=0|n[r>>2]))<=1)return x=i,+(f=0);e=A+-1|0,A=0,o=0,a=+t[r+8>>3],f=+t[r+16>>3];do{w=a,a=+t[r+8+((A=A+1|0)<<4)>>3],g=+s(.5*(a-w)),l=f,f=+t[r+8+(A<<4)+8>>3],l=g*g+(l=+s(.5*(f-l)))*(+c(+w)*+c(+a)*l),o+=2*+h(+ +u(+l),+ +u(+(1-l)))}while((0|A)!=(0|e));return x=i,+(g=6371.007180918475*o)},_exactEdgeLengthM:function(A,e){var r,i,o=0,a=0,f=0,l=0,w=0,g=0;if(i=x,x=x+176|0,jA(A|=0,e|=0,r=i),(0|(A=0|n[r>>2]))<=1)return x=i,+(f=0);e=A+-1|0,A=0,o=0,a=+t[r+8>>3],f=+t[r+16>>3];do{w=a,a=+t[r+8+((A=A+1|0)<<4)>>3],g=+s(.5*(a-w)),l=f,f=+t[r+8+(A<<4)+8>>3],l=g*g+(l=+s(.5*(f-l)))*(+c(+w)*+c(+a)*l),o+=2*+h(+ +u(+l),+ +u(+(1-l)))}while((0|A)!=(0|e));return x=i,+(g=6371.007180918475*o*1e3)},_exactEdgeLengthRads:function(A,e){var r,i,o=0,a=0,f=0,l=0,w=0,g=0;if(i=x,x=x+176|0,jA(A|=0,e|=0,r=i),(0|(A=0|n[r>>2]))<=1)return x=i,+(f=0);e=A+-1|0,A=0,o=0,a=+t[r+8>>3],f=+t[r+16>>3];do{w=a,a=+t[r+8+((A=A+1|0)<<4)>>3],g=+s(.5*(a-w)),l=f,f=+t[r+8+(A<<4)+8>>3],l=g*g+(l=+s(.5*(f-l)))*(+c(+a)*+c(+w)*l),o+=2*+h(+ +u(+l),+ +u(+(1-l)))}while((0|A)<(0|e));return x=i,+o},_experimentalH3ToLocalIj:function(A,e,r,i,n){var t,o;return n|=0,o=x,x=x+16|0,(A=0|$A(A|=0,e|=0,r|=0,i|=0,t=o))||(wA(t,n),A=0),x=o,0|A},_experimentalLocalIjToH3:function(A,e,r,i){var n,t;return A|=0,e|=0,i|=0,n=x,x=x+16|0,gA(r|=0,t=n),i=0|Ae(A,e,t,i),x=n,0|i},_free:be,_geoToH3:zA,_getDestinationH3IndexFromUnidirectionalEdge:function(A,e){A|=0;var r,i,t=0;return r=x,x=x+16|0,t=r,!0&268435456==(2013265920&(e|=0)|0)?(i=0|ve(0|A,0|e,56),D(),n[t>>2]=0,t=0|y(A,-2130706433&e|134217728,7&i,t),e=0|D(),M(0|e),x=r,0|t):(t=0,M(0|(e=0)),x=r,0|t)},_getH3IndexesFromUnidirectionalEdge:function(A,e,r){A|=0;var i,t,o,a,f=0;o=x,x=x+16|0,i=o,a=!0&268435456==(2013265920&(e|=0)|0),t=-2130706433&e|134217728,n[(f=r|=0)>>2]=a?A:0,n[f+4>>2]=a?t:0,a?(e=0|ve(0|A,0|e,56),D(),n[i>>2]=0,A=0|y(A,t,7&e,i),e=0|D()):(A=0,e=0),n[(f=r+8|0)>>2]=A,n[f+4>>2]=e,x=o},_getH3UnidirectionalEdge:function(A,e,r,i){var t,o,a=0,f=0,u=0,l=0,c=0;if(o=x,x=x+16|0,t=o,!(0|ZA(A|=0,e|=0,r|=0,i|=0)))return l=0,M(0|(u=0)),x=o,0|l;for(u=-2130706433&e,a=(a=0==(0|yA(A,e)))?1:2;n[t>>2]=0,f=a+1|0,!((0|(c=0|y(A,e,a,t)))==(0|r)&(0|D())==(0|i));){if(!(f>>>0<7)){a=0,A=0,l=6;break}a=f}return 6==(0|l)?(M(0|a),x=o,0|A):(c=0|me(0|a,0,56),l=0|u|D()|268435456,c|=A,M(0|l),x=o,0|c)},_getH3UnidirectionalEdgeBoundary:jA,_getH3UnidirectionalEdgesFromHexagon:function(A,e,r){r|=0;var i,t=0;i=0==(0|yA(A|=0,e|=0)),e&=-2130706433,n[(t=r)>>2]=i?A:0,n[t+4>>2]=i?285212672|e:0,n[(t=r+8|0)>>2]=A,n[t+4>>2]=301989888|e,n[(t=r+16|0)>>2]=A,n[t+4>>2]=318767104|e,n[(t=r+24|0)>>2]=A,n[t+4>>2]=335544320|e,n[(t=r+32|0)>>2]=A,n[t+4>>2]=352321536|e,n[(r=r+40|0)>>2]=A,n[r+4>>2]=369098752|e},_getOriginH3IndexFromUnidirectionalEdge:function(A,e){var r;return A|=0,M(0|((r=!0&268435456==(2013265920&(e|=0)|0))?-2130706433&e|134217728:0)),0|(r?A:0)},_getPentagonIndexes:NA,_getRes0Indexes:function(A){A|=0;var e=0,r=0,i=0;e=0;do{me(0|e,0,45),i=134225919|D(),n[(r=A+(e<<3)|0)>>2]=-1,n[r+4>>2]=i,e=e+1|0}while(122!=(0|e))},_h3Distance:function(A,e,r,i){var n,t,o;return r|=0,i|=0,o=x,x=x+32|0,t=o,A=0==(0|$A(A|=0,e|=0,A,e,n=o+12|0))&&0==(0|$A(A,e,r,i,t))?0|sA(n,t):-1,x=o,0|A},_h3GetBaseCell:xA,_h3GetFaces:function A(e,r,i){i|=0;var t,o=0,a=0,f=0,u=0,l=0,c=0,s=0,w=0;t=x,x=x+128|0,s=t+112|0,f=t+96|0,w=t,a=0|ve(0|(e|=0),0|(r|=0),52),D(),l=15&a,n[s>>2]=l,u=0|ve(0|e,0|r,45),D(),u&=127;A:do{if(0|T(u)){if(0|l)for(o=1;;){if(!(0==((c=0|me(7,0,3*(15-o|0)|0))&e|0)&0==((0|D())&r|0))){a=0;break A}if(!(o>>>0<l>>>0))break;o=o+1|0}if(!(1&a))return c=0|me(l+1|0,0,52),w=0|D()|-15728641&r,A((c|e)&~(s=0|me(7,0,3*(14-l|0)|0)),w&~(0|D()),i),void(x=t);a=1}else a=0}while(0);YA(e,r,f),a?(EA(f,s,w),c=5):(mA(f,s,w),c=6);A:do{if(0|T(u))if(l)for(o=1;;){if(!(0==((u=0|me(7,0,3*(15-o|0)|0))&e|0)&0==((0|D())&r|0))){o=8;break A}if(!(o>>>0<l>>>0)){o=20;break}o=o+1|0}else o=20;else o=8}while(0);if(pe(0|i,-1,0|o),a){a=0;do{for(DA(f=w+(a<<4)|0,0|n[s>>2]),f=0|n[f>>2],o=0;!(-1==(0|(l=0|n[(u=i+(o<<2)|0)>>2]))|(0|l)==(0|f));)o=o+1|0;n[u>>2]=f,a=a+1|0}while((0|a)!=(0|c))}else{a=0;do{for(MA(f=w+(a<<4)|0,0|n[s>>2],0,1),f=0|n[f>>2],o=0;!(-1==(0|(l=0|n[(u=i+(o<<2)|0)>>2]))|(0|l)==(0|f));)o=o+1|0;n[u>>2]=f,a=a+1|0}while((0|a)!=(0|c))}x=t},_h3IndexesAreNeighbors:ZA,_h3IsPentagon:yA,_h3IsResClassIII:function(A,e){return e=0|ve(0|(A|=0),0|(e|=0),52),D(),1&e|0},_h3IsValid:FA,_h3Line:function(A,e,r,i,t){r|=0,i|=0,t|=0;var o,a=0,u=0,l=0,c=0,s=0,w=0,g=0,d=0,B=0,h=0,b=0,k=0,Q=0,E=0,M=0,D=0,v=0;if(o=x,x=x+48|0,u=o+12|0,D=o,0==(0|$A(A|=0,e|=0,A,e,a=o+24|0))&&0==(0|$A(A,e,r,i,u))){if((0|(M=0|sA(a,u)))<0)return x=o,0|(D=M);for(n[a>>2]=0,n[a+4>>2]=0,n[a+8>>2]=0,n[u>>2]=0,n[u+4>>2]=0,n[u+8>>2]=0,$A(A,e,A,e,a),$A(A,e,r,i,u),dA(a),dA(u),M?(B=+(0|M),E=a,r=w=0|n[a>>2],i=g=0|n[(k=a+4|0)>>2],a=d=0|n[(Q=a+8|0)>>2],h=+((0|n[u>>2])-w|0)/B,b=+((0|n[u+4>>2])-g|0)/B,B=+((0|n[u+8>>2])-d|0)/B):(k=i=a+4|0,Q=d=a+8|0,E=a,r=0|n[a>>2],i=0|n[i>>2],a=0|n[d>>2],h=0,b=0,B=0),n[D>>2]=r,n[(d=D+4|0)>>2]=i,n[(g=D+8|0)>>2]=a,w=0;;){v=h*(c=+(0|w))+ +(0|r),l=b*c+ +(0|n[k>>2]),c=B*c+ +(0|n[Q>>2]),i=~~+_e(+v),u=~~+_e(+l),r=~~+_e(+c),v=+f(+(+(0|i)-v)),l=+f(+(+(0|u)-l)),c=+f(+(+(0|r)-c));do{if(!(v>l&v>c)){if(s=0-i|0,l>c){a=s-r|0;break}a=u,r=s-u|0;break}i=0-(u+r)|0,a=u}while(0);if(n[D>>2]=i,n[d>>2]=a,n[g>>2]=r,BA(D),Ae(A,e,D,t+(w<<3)|0),(0|w)==(0|M))break;w=w+1|0,r=0|n[E>>2]}return x=o,0|(D=0)}return x=o,0|(D=-1)},_h3LineSize:function(A,e,r,i){var n,t,o;return r|=0,i|=0,o=x,x=x+32|0,t=o,A=0==(0|$A(A|=0,e|=0,A,e,n=o+12|0))&&0==(0|$A(A,e,r,i,t))?0|sA(n,t):-1,x=o,(A>>>31^1)+A|0},_h3SetToLinkedGeo:function(A,e,r){r|=0;var i,t,o,a=0;if(o=x,x=x+32|0,i=o,function(A,e,r){A|=0,r|=0;var i,t,o=0,a=0,f=0,u=0,l=0;if(t=x,x=x+176|0,i=t,(0|(e|=0))<1)return ue(r,0,0),void(x=t);u=0|ve(0|n[(u=A)>>2],0|n[u+4>>2],52),D(),ue(r,(0|e)>6?e:6,15&u),u=0;do{if(WA(0|n[(o=A+(u<<3)|0)>>2],0|n[o+4>>2],i),(0|(o=0|n[i>>2]))>0){l=0;do{f=i+8+(l<<4)|0,(a=0|ge(r,o=i+8+(((0|(l=l+1|0))%(0|o)|0)<<4)|0,f))?se(r,a):we(r,f,o),o=0|n[i>>2]}while((0|l)<(0|o))}u=u+1|0}while((0|u)!=(0|e));x=t}(A|=0,e|=0,t=o+16|0),n[r>>2]=0,n[r+4>>2]=0,n[r+8>>2]=0,!(A=0|ce(t)))return XA(r),le(t),void(x=o);do{e=0|JA(r);do{KA(e,A),a=A+16|0,n[i>>2]=n[a>>2],n[i+4>>2]=n[a+4>>2],n[i+8>>2]=n[a+8>>2],n[i+12>>2]=n[a+12>>2],se(t,A),A=0|de(t,i)}while(0!=(0|A));A=0|ce(t)}while(0!=(0|A));XA(r),le(t),x=o},_h3ToCenterChild:function(A,e,r){r|=0;var i=0,n=0;if(i=0|ve(0|(A|=0),0|(e|=0),52),D(),(0|r)<16&(0|(i&=15))<=(0|r)){if((0|i)!=(0|r)&&(A|=n=0|me(0|r,0,52),e=0|D()|-15728641&e,(0|i)<(0|r)))do{n=0|me(7,0,3*(14-i|0)|0),i=i+1|0,A&=~n,e&=~(0|D())}while((0|i)<(0|r))}else e=0,A=0;return M(0|e),0|A},_h3ToChildren:GA,_h3ToGeo:OA,_h3ToGeoBoundary:WA,_h3ToParent:UA,_h3UnidirectionalEdgeIsValid:function(A,e){var r=0;if(!(!0&268435456==(2013265920&(e|=0)|0)))return 0|(r=0);switch(r=0|ve(0|(A|=0),0|e,56),D(),7&r){case 0:case 7:return 0|(r=0)}return!0&16777216==(117440512&e|0)&0!=(0|yA(A,r=-2130706433&e|134217728))?0|(r=0):0|(r=0|FA(A,r))},_hexAreaKm2:function(A){return+ +t[20496+((A|=0)<<3)>>3]},_hexAreaM2:function(A){return+ +t[20624+((A|=0)<<3)>>3]},_hexRing:function(A,e,r,i){A|=0,e|=0,i|=0;var t,o=0,a=0,f=0,u=0,l=0,c=0,s=0;if(t=x,x=x+16|0,s=t,!(r|=0))return n[(s=i)>>2]=A,n[s+4>>2]=e,x=t,0|(s=0);n[s>>2]=0;A:do{if(0|yA(A,e))A=1;else{if(a=(0|r)>0){o=0,c=A;do{if(0==(0|(c=0|y(c,e,4,s)))&0==(0|(e=0|D()))){A=2;break A}if(o=o+1|0,0|yA(c,e)){A=1;break A}}while((0|o)<(0|r));if(n[(l=i)>>2]=c,n[l+4>>2]=e,l=r+-1|0,a){a=0,f=1,o=c,A=e;do{if(0==(0|(o=0|y(o,A,2,s)))&0==(0|(A=0|D()))){A=2;break A}if(n[(u=i+(f<<3)|0)>>2]=o,n[u+4>>2]=A,f=f+1|0,0|yA(o,A)){A=1;break A}a=a+1|0}while((0|a)<(0|r));u=0,a=f;do{if(0==(0|(o=0|y(o,A,3,s)))&0==(0|(A=0|D()))){A=2;break A}if(n[(f=i+(a<<3)|0)>>2]=o,n[f+4>>2]=A,a=a+1|0,0|yA(o,A)){A=1;break A}u=u+1|0}while((0|u)<(0|r));f=0;do{if(0==(0|(o=0|y(o,A,1,s)))&0==(0|(A=0|D()))){A=2;break A}if(n[(u=i+(a<<3)|0)>>2]=o,n[u+4>>2]=A,a=a+1|0,0|yA(o,A)){A=1;break A}f=f+1|0}while((0|f)<(0|r));f=0;do{if(0==(0|(o=0|y(o,A,5,s)))&0==(0|(A=0|D()))){A=2;break A}if(n[(u=i+(a<<3)|0)>>2]=o,n[u+4>>2]=A,a=a+1|0,0|yA(o,A)){A=1;break A}f=f+1|0}while((0|f)<(0|r));f=0;do{if(0==(0|(o=0|y(o,A,4,s)))&0==(0|(A=0|D()))){A=2;break A}if(n[(u=i+(a<<3)|0)>>2]=o,n[u+4>>2]=A,a=a+1|0,0|yA(o,A)){A=1;break A}f=f+1|0}while((0|f)<(0|r));for(f=0;;){if(0==(0|(o=0|y(o,A,6,s)))&0==(0|(A=0|D()))){A=2;break A}if((0|f)!=(0|l)){if(n[(u=i+(a<<3)|0)>>2]=o,n[u+4>>2]=A,0|yA(o,A)){A=1;break A}a=a+1|0}if((0|(f=f+1|0))>=(0|r)){f=c,a=e;break}}}else f=c,o=c,a=e,A=e}else n[(f=i)>>2]=A,n[f+4>>2]=e,f=A,o=A,a=e,A=e;A=1&((0|f)!=(0|o)|(0|a)!=(0|A))}}while(0);return x=t,0|(s=A)},_i64Subtract:Qe,_kRing:F,_kRingDistances:function(A,e,r,i,n){var t;if(0|U(A|=0,e|=0,r|=0,i|=0,n|=0)){if(pe(0|i,0,(t=1+(0|k(3*r|0,r+1|0))|0)<<3|0),0|n)return pe(0|n,0,t<<2|0),void G(A,e,r,i,n,t,0);(n=0|ke(t,4))&&(G(A,e,r,i,n,t,0),be(n))}},_llvm_minnum_f64:Ie,_llvm_round_f64:_e,_malloc:he,_maxFaceCount:function(A,e){var r=0,i=0;if(i=0|ve(0|(A|=0),0|(e|=0),45),D(),!(0|T(127&i)))return 0|(i=2);if(i=0|ve(0|A,0|e,52),D(),!(i&=15))return 0|(i=5);for(r=1;;){if(!(0==((0|me(7,0,3*(15-r|0)|0))&A|0)&0==((0|D())&e|0))){r=2,A=6;break}if(!(r>>>0<i>>>0)){r=5,A=6;break}r=r+1|0}return 6==(0|A)?0|r:0},_maxH3ToChildrenSize:function(A,e,r){return r|=0,A=0|ve(0|(A|=0),0|(e|=0),52),D(),(0|r)<16&(0|(A&=15))<=(0|r)?0|(r=0|ee(7,r-A|0)):0|(r=0)},_maxKringSize:function(A){return 1+(0|k(3*(A|=0)|0,A+1|0))|0},_maxPolyfillSize:function(A,e){e|=0;var r,i=0,t=0,o=0,a=0,f=0;if(r=x,x=x+48|0,o=r+8|0,t=r,a=0|n[4+(f=A|=0)>>2],n[(i=t)>>2]=n[f>>2],n[i+4>>2]=a,ie(t,o),o=0|W(o,e),e=0|n[t>>2],(0|(t=0|n[A+8>>2]))<=0)return x=r,0|(f=(f=(a=(0|o)<(0|(f=e)))?f:o)+12|0);i=0|n[A+12>>2],A=0;do{e=(0|n[i+(A<<3)>>2])+e|0,A=A+1|0}while((0|A)<(0|t));return x=r,0|(f=(f=(f=(0|o)<(0|e))?e:o)+12|0)},_maxUncompactSize:function(A,e,r){A|=0,r|=0;var i=0,t=0,o=0,a=0;if((0|(e|=0))<=0)return 0|(r=0);if((0|r)>=16){for(i=0;;){if(!(0==(0|n[(a=A+(i<<3)|0)>>2])&0==(0|n[a+4>>2]))){i=-1,t=13;break}if((0|(i=i+1|0))>=(0|e)){i=0,t=13;break}}if(13==(0|t))return 0|i}i=0,a=0;A:for(;;){o=0|n[(t=A+(a<<3)|0)>>2],t=0|n[t+4>>2];do{if(!(0==(0|o)&0==(0|t))){if(t=0|ve(0|o,0|t,52),D(),(0|(t&=15))>(0|r)){i=-1,t=13;break A}if((0|t)==(0|r)){i=i+1|0;break}i=(0|ee(7,r-t|0))+i|0;break}}while(0);if((0|(a=a+1|0))>=(0|e)){t=13;break}}return 13==(0|t)?0|i:0},_memcpy:Ce,_memset:pe,_numHexagons:function(A){var e;return A=0|n[(e=21008+((A|=0)<<3)|0)>>2],M(0|n[e+4>>2]),0|A},_pentagonIndexCount:function(){return 12},_pointDistKm:CA,_pointDistM:function(A,e){A|=0;var r,i,n,o=0;return i=+t[(e|=0)>>3],r=+t[A>>3],o=(n=+s(.5*(i-r)))*n+(o=+s(.5*(+t[e+8>>3]-+t[A+8>>3])))*(+c(+i)*+c(+r)*o),2*+h(+ +u(+o),+ +u(+(1-o)))*6371.007180918475*1e3},_pointDistRads:function(A,e){A|=0;var r,i,n,o=0;return i=+t[(e|=0)>>3],r=+t[A>>3],o=(n=+s(.5*(i-r)))*n+(o=+s(.5*(+t[e+8>>3]-+t[A+8>>3])))*(+c(+i)*+c(+r)*o),2*+h(+ +u(+o),+ +u(+(1-o)))},_polyfill:function(A,e,r){var i,t=0,o=0,a=0,f=0,u=0;if(i=x,x=x+48|0,t=i+8|0,o=i,0|function(A,e,r){e|=0,r|=0;var i=0,t=0,o=0,a=0,f=0,u=0,l=0,c=0,s=0,w=0,g=0,d=0,B=0,h=0,b=0,k=0,Q=0,E=0,M=0,m=0,I=0,_=0,C=0,p=0,F=0,y=0,T=0,P=0,R=0,S=0;if(S=x,x=x+112|0,y=S+80|0,u=S+72|0,T=S,P=S+56|0,(R=0|he(32+(n[(l=8+(A|=0)|0)>>2]<<5)|0))||v(22848,22448,800,22456),ne(A,R),i=0|n[(o=A)+4>>2],n[(f=u)>>2]=n[o>>2],n[f+4>>2]=i,ie(u,y),f=0|W(y,e),i=0|n[u>>2],(0|(o=0|n[l>>2]))>0){a=0|n[A+12>>2],t=0;do{i=(0|n[a+(t<<3)>>2])+i|0,t=t+1|0}while((0|t)!=(0|o))}if(t=0|ke(F=(f=(0|f)<(0|i)?i:f)+12|0,8),c=0|ke(F,8),n[y>>2]=0,p=0|n[(C=A)+4>>2],n[(i=u)>>2]=n[C>>2],n[i+4>>2]=p,0|(i=0|H(u,F,e,y,t,c)))return be(t),be(c),be(R),x=S,0|(R=i);A:do{if((0|n[l>>2])>0){for(o=A+12|0,i=0;a=0|H((0|n[o>>2])+(i<<3)|0,F,e,y,t,c),i=i+1|0,!(0|a);)if((0|i)>=(0|n[l>>2]))break A;return be(t),be(c),be(R),x=S,0|(R=a)}}while(0);(0|f)>-12&&pe(0|c,0,((0|F)>1?F:1)<<3|0);A:do{if((0|n[y>>2])>0){p=((0|F)<0)<<31>>31,E=t,M=c,m=t,I=t,_=c,C=t,i=t,h=t,b=c,k=c,Q=c,t=c;e:for(;;){for(B=0|n[y>>2],g=0,d=0,o=0;;){f=(a=T)+56|0;do{n[a>>2]=0,a=a+4|0}while((0|a)<(0|f));if(u=0|n[(e=E+(g<<3)|0)>>2],e=0|n[e+4>>2],0|U(u,e,1,T,0)){f=(a=T)+56|0;do{n[a>>2]=0,a=a+4|0}while((0|a)<(0|f));0|(a=0|ke(7,4))&&(G(u,e,1,T,a,7,0),be(a))}w=0;do{c=0|n[(s=T+(w<<3)|0)>>2],s=0|n[s+4>>2];r:do{if(!(0==(0|c)&0==(0|s))){if(u=0|De(0|c,0|s,0|F,0|p),D(),e=0|n[(f=a=r+(u<<3)|0)>>2],f=0|n[f+4>>2],!(0==(0|e)&0==(0|f)))for(l=0;;){if((0|l)>(0|F))break e;if((0|e)==(0|c)&(0|f)==(0|s))break r;if(e=0|n[(f=a=r+((u=(u+1|0)%(0|F)|0)<<3)|0)>>2],f=0|n[f+4>>2],0==(0|e)&0==(0|f))break;l=l+1|0}0==(0|c)&0==(0|s)||(OA(c,s,P),0|te(A,R,P)&&(n[(l=a)>>2]=c,n[l+4>>2]=s,n[(l=M+(o<<3)|0)>>2]=c,n[l+4>>2]=s,o=o+1|0))}}while(0);w=w+1|0}while(w>>>0<7);if((0|(d=d+1|0))>=(0|B))break;g=g+1|0}if((0|B)>0&&pe(0|m,0,B<<3|0),n[y>>2]=o,!((0|o)>0))break A;c=t,s=Q,w=C,g=k,d=b,B=M,t=h,Q=i,k=I,b=m,h=c,i=s,C=_,_=w,I=g,m=d,M=E,E=B}return be(I),be(_),be(R),x=S,0|(R=-1)}i=c}while(0);return be(R),be(t),be(i),x=S,0|(R=0)}(A|=0,e|=0,r|=0)){if(a=0|n[(u=A)+4>>2],n[(f=o)>>2]=n[u>>2],n[f+4>>2]=a,ie(o,t),f=0|W(t,e),e=0|n[o>>2],(0|(a=0|n[A+8>>2]))>0){o=0|n[A+12>>2],t=0;do{e=(0|n[o+(t<<3)>>2])+e|0,t=t+1|0}while((0|t)!=(0|a))}(0|(e=(0|f)<(0|e)?e:f))<=-12?x=i:(pe(0|r,0,8+(((0|(u=e+11|0))>0?u:0)<<3)|0),x=i)}else x=i},_res0IndexCount:function(){return 122},_round:xe,_sbrk:Fe,_sizeOfCoordIJ:function(){return 8},_sizeOfGeoBoundary:function(){return 168},_sizeOfGeoCoord:function(){return 16},_sizeOfGeoPolygon:function(){return 16},_sizeOfGeofence:function(){return 8},_sizeOfH3Index:function(){return 8},_sizeOfLinkedGeoPolygon:function(){return 12},_uncompact:function(A,e,r,i,t){A|=0,r|=0,i|=0,t|=0;var o=0,a=0,f=0,u=0,l=0,c=0;if((0|(e|=0))<=0)return 0|(t=0);if((0|t)>=16){for(o=0;;){if(!(0==(0|n[(c=A+(o<<3)|0)>>2])&0==(0|n[c+4>>2]))){o=14;break}if((0|(o=o+1|0))>=(0|e)){a=0,o=16;break}}if(14==(0|o))return 0|((0|i)>0?-2:-1);if(16==(0|o))return 0|a}o=0,c=0;A:for(;;){a=0|n[(f=l=A+(c<<3)|0)>>2],f=0|n[f+4>>2];do{if(!(0==(0|a)&0==(0|f))){if((0|o)>=(0|i)){a=-1,o=16;break A}if(u=0|ve(0|a,0|f,52),D(),(0|(u&=15))>(0|t)){a=-2,o=16;break A}if((0|u)==(0|t)){n[(l=r+(o<<3)|0)>>2]=a,n[l+4>>2]=f,o=o+1|0;break}if((0|(a=(0|ee(7,t-u|0))+o|0))>(0|i)){a=-1,o=16;break A}GA(0|n[l>>2],0|n[l+4>>2],t,r+(o<<3)|0),o=a}}while(0);if((0|(c=c+1|0))>=(0|e)){a=0,o=16;break}}return 16==(0|o)?0|a:0},establishStackSpace:function(A,e){x=A|=0},stackAlloc:function(A){var e;return e=x,x=15+(x=x+(A|=0)|0)&-16,0|e},stackRestore:function(A){x=A|=0},stackSave:function(){return 0|x}}}({Math:Math,Int8Array:Int8Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Float32Array:Float32Array,Float64Array:Float64Array},{a:fA,b:function(A){u=A},c:l,d:function(A,e,r,i){fA("Assertion failed: "+d(A)+", at: "+[e?d(e):"unknown filename",r,i?d(i):"unknown function"])},e:function(A){return r.___errno_location&&(Q[r.___errno_location()>>2]=A),A},f:N,g:function(A,e,r){b.set(b.subarray(e,e+r),A)},h:function(A){var e=N();if(A>2130706432)return!1;for(var r=Math.max(e,16777216);r<A;)r=r<=536870912?D(2*r,16777216):Math.min(D((3*r+2147483648)/4,16777216),2130706432);return!!Z(r)},i:function(A){fA("OOM")},j:Y,k:O,l:Z,m:W,n:function(){var A=W();return r.extraStackTrace&&(A+="\n"+r.extraStackTrace()),O(A)},o:24032,p:24016},B),$=(r.___uremdi3=q.___uremdi3,r._bitshift64Lshr=q._bitshift64Lshr,r._bitshift64Shl=q._bitshift64Shl,r._calloc=q._calloc,r._cellAreaKm2=q._cellAreaKm2,r._cellAreaM2=q._cellAreaM2,r._cellAreaRads2=q._cellAreaRads2,r._compact=q._compact,r._destroyLinkedPolygon=q._destroyLinkedPolygon,r._edgeLengthKm=q._edgeLengthKm,r._edgeLengthM=q._edgeLengthM,r._emscripten_replace_memory=q._emscripten_replace_memory),AA=(r._exactEdgeLengthKm=q._exactEdgeLengthKm,r._exactEdgeLengthM=q._exactEdgeLengthM,r._exactEdgeLengthRads=q._exactEdgeLengthRads,r._experimentalH3ToLocalIj=q._experimentalH3ToLocalIj,r._experimentalLocalIjToH3=q._experimentalLocalIjToH3,r._free=q._free,r._geoToH3=q._geoToH3,r._getDestinationH3IndexFromUnidirectionalEdge=q._getDestinationH3IndexFromUnidirectionalEdge,r._getH3IndexesFromUnidirectionalEdge=q._getH3IndexesFromUnidirectionalEdge,r._getH3UnidirectionalEdge=q._getH3UnidirectionalEdge,r._getH3UnidirectionalEdgeBoundary=q._getH3UnidirectionalEdgeBoundary,r._getH3UnidirectionalEdgesFromHexagon=q._getH3UnidirectionalEdgesFromHexagon,r._getOriginH3IndexFromUnidirectionalEdge=q._getOriginH3IndexFromUnidirectionalEdge,r._getPentagonIndexes=q._getPentagonIndexes,r._getRes0Indexes=q._getRes0Indexes,r._h3Distance=q._h3Distance,r._h3GetBaseCell=q._h3GetBaseCell,r._h3GetFaces=q._h3GetFaces,r._h3IndexesAreNeighbors=q._h3IndexesAreNeighbors,r._h3IsPentagon=q._h3IsPentagon,r._h3IsResClassIII=q._h3IsResClassIII,r._h3IsValid=q._h3IsValid,r._h3Line=q._h3Line,r._h3LineSize=q._h3LineSize,r._h3SetToLinkedGeo=q._h3SetToLinkedGeo,r._h3ToCenterChild=q._h3ToCenterChild,r._h3ToChildren=q._h3ToChildren,r._h3ToGeo=q._h3ToGeo,r._h3ToGeoBoundary=q._h3ToGeoBoundary,r._h3ToParent=q._h3ToParent,r._h3UnidirectionalEdgeIsValid=q._h3UnidirectionalEdgeIsValid,r._hexAreaKm2=q._hexAreaKm2,r._hexAreaM2=q._hexAreaM2,r._hexRing=q._hexRing,r._i64Subtract=q._i64Subtract,r._kRing=q._kRing,r._kRingDistances=q._kRingDistances,r._llvm_minnum_f64=q._llvm_minnum_f64,r._llvm_round_f64=q._llvm_round_f64,r._malloc=q._malloc,r._maxFaceCount=q._maxFaceCount,r._maxH3ToChildrenSize=q._maxH3ToChildrenSize,r._maxKringSize=q._maxKringSize,r._maxPolyfillSize=q._maxPolyfillSize,r._maxUncompactSize=q._maxUncompactSize,r._memcpy=q._memcpy,r._memset=q._memset,r._numHexagons=q._numHexagons,r._pentagonIndexCount=q._pentagonIndexCount,r._pointDistKm=q._pointDistKm,r._pointDistM=q._pointDistM,r._pointDistRads=q._pointDistRads,r._polyfill=q._polyfill,r._res0IndexCount=q._res0IndexCount,r._round=q._round,r._sbrk=q._sbrk,r._sizeOfCoordIJ=q._sizeOfCoordIJ,r._sizeOfGeoBoundary=q._sizeOfGeoBoundary,r._sizeOfGeoCoord=q._sizeOfGeoCoord,r._sizeOfGeoPolygon=q._sizeOfGeoPolygon,r._sizeOfGeofence=q._sizeOfGeofence,r._sizeOfH3Index=q._sizeOfH3Index,r._sizeOfLinkedGeoPolygon=q._sizeOfLinkedGeoPolygon,r._uncompact=q._uncompact,r.establishStackSpace=q.establishStackSpace,r.stackAlloc=q.stackAlloc),eA=r.stackRestore=q.stackRestore,rA=r.stackSave=q.stackSave;if(r.asm=q,r.cwrap=function(A,e,r,i){var n=(r=r||[]).every(function(A){return"number"===A});return"string"!==e&&n&&!i?s(A):function(){return w(A,e,r,arguments)}},r.setValue=function(A,e,r,i){switch("*"===(r=r||"i8").charAt(r.length-1)&&(r="i32"),r){case"i1":case"i8":h[A>>0]=e;break;case"i16":k[A>>1]=e;break;case"i32":Q[A>>2]=e;break;case"i64":S=[e>>>0,(R=e,+F(R)>=1?R>0?(0|y(+G(R/4294967296),4294967295))>>>0:~~+U((R-+(~~R>>>0))/4294967296)>>>0:0)],Q[A>>2]=S[0],Q[A+4>>2]=S[1];break;case"float":E[A>>2]=e;break;case"double":M[A>>3]=e;break;default:fA("invalid type for setValue: "+r)}},r.getValue=function(A,e,r){switch("*"===(e=e||"i8").charAt(e.length-1)&&(e="i32"),e){case"i1":case"i8":return h[A>>0];case"i16":return k[A>>1];case"i32":case"i64":return Q[A>>2];case"float":return E[A>>2];case"double":return M[A>>3];default:fA("invalid type for getValue: "+e)}return null},r.getTempRet0=l,L){V(L)||(K=L,L=r.locateFile?r.locateFile(K,o):o+K),H++,r.monitorRunDependencies&&r.monitorRunDependencies(H);var iA=function(A){A.byteLength&&(A=new Uint8Array(A)),b.set(A,8),r.memoryInitializerRequest&&delete r.memoryInitializerRequest.response,function(A){if(H--,r.monitorRunDependencies&&r.monitorRunDependencies(H),0==H&&(null!==T&&(clearInterval(T),T=null),P)){var e=P;P=null,e()}}()},nA=function(){n(L,iA,function(){throw"could not load memory initializer "+L})},tA=J(L);if(tA)iA(tA.buffer);else if(r.memoryInitializerRequest){var oA=function(){var A=r.memoryInitializerRequest,e=A.response;if(200!==A.status&&0!==A.status){var i=J(r.memoryInitializerRequestURL);if(!i)return console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+A.status+", retrying "+L),void nA();e=i.buffer}iA(e)};r.memoryInitializerRequest.response?setTimeout(oA,0):r.memoryInitializerRequest.addEventListener("load",oA)}else nA()}function aA(A){function e(){X||(X=!0,c||(I(C),I(p),r.onRuntimeInitialized&&r.onRuntimeInitialized(),function(){if(r.postRun)for("function"==typeof r.postRun&&(r.postRun=[r.postRun]);r.postRun.length;)A=r.postRun.shift(),x.unshift(A);var A;I(x)}()))}A=A||t,H>0||(!function(){if(r.preRun)for("function"==typeof r.preRun&&(r.preRun=[r.preRun]);r.preRun.length;)A=r.preRun.shift(),_.unshift(A);var A;I(_)}(),H>0||(r.setStatus?(r.setStatus("Running..."),setTimeout(function(){setTimeout(function(){r.setStatus("")},1),e()},1)):e()))}function fA(A){throw r.onAbort&&r.onAbort(A),a(A+=""),f(A),c=!0,"abort("+A+"). Build with -s ASSERTIONS=1 for more info."}if(P=function A(){X||aA(),X||(P=A)},r.run=aA,r.abort=fA,r.preInit)for("function"==typeof r.preInit&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.pop()();return aA(),A}("object"===e(r)?r:{}),i="number",n=i,t=i,o=i,a=i,f=i,u=[["sizeOfH3Index",i],["sizeOfGeoCoord",i],["sizeOfGeoBoundary",i],["sizeOfGeoPolygon",i],["sizeOfGeofence",i],["sizeOfLinkedGeoPolygon",i],["sizeOfCoordIJ",i],["h3IsValid",i,[i,i]],["geoToH3",i,[i,i,i]],["h3ToGeo",null,[i,i,i]],["h3ToGeoBoundary",null,[i,i,i]],["maxKringSize",i,[i]],["kRing",null,[i,i,i,i]],["kRingDistances",null,[i,i,i,i,i]],["hexRing",null,[i,i,i,i]],["maxPolyfillSize",i,[i,i]],["polyfill",null,[i,i,i]],["h3SetToLinkedGeo",null,[i,i,i]],["destroyLinkedPolygon",null,[i]],["compact",i,[i,i,i]],["uncompact",i,[i,i,i,i,i]],["maxUncompactSize",i,[i,i,i]],["h3IsPentagon",i,[i,i]],["h3IsResClassIII",i,[i,i]],["h3GetBaseCell",i,[i,i]],["maxFaceCount",i,[i,i]],["h3GetFaces",null,[i,i,i]],["h3ToParent",i,[i,i,i]],["h3ToChildren",null,[i,i,i,i]],["h3ToCenterChild",i,[i,i,i]],["maxH3ToChildrenSize",i,[i,i,i]],["h3IndexesAreNeighbors",i,[i,i,i,i]],["getH3UnidirectionalEdge",i,[i,i,i,i]],["getOriginH3IndexFromUnidirectionalEdge",i,[i,i]],["getDestinationH3IndexFromUnidirectionalEdge",i,[i,i]],["h3UnidirectionalEdgeIsValid",i,[i,i]],["getH3IndexesFromUnidirectionalEdge",null,[i,i,i]],["getH3UnidirectionalEdgesFromHexagon",null,[i,i,i]],["getH3UnidirectionalEdgeBoundary",null,[i,i,i]],["h3Distance",i,[i,i,i,i]],["h3Line",i,[i,i,i,i,i]],["h3LineSize",i,[i,i,i,i]],["experimentalH3ToLocalIj",i,[i,i,i,i,i]],["experimentalLocalIjToH3",i,[i,i,i,i]],["hexAreaM2",i,[i]],["hexAreaKm2",i,[i]],["edgeLengthM",i,[i]],["edgeLengthKm",i,[i]],["pointDistM",i,[i,i]],["pointDistKm",i,[i,i]],["pointDistRads",i,[i,i]],["cellAreaM2",i,[i,i]],["cellAreaKm2",i,[i,i]],["cellAreaRads2",i,[i,i]],["exactEdgeLengthM",i,[i,i]],["exactEdgeLengthKm",i,[i,i]],["exactEdgeLengthRads",i,[i,i]],["numHexagons",i,[i]],["getRes0Indexes",null,[i]],["res0IndexCount",i],["getPentagonIndexes",null,[i,i]],["pentagonIndexCount",i]],l={};u.forEach(function(A){l[A[0]]=r.cwrap.apply(r,A)});var c=16,s=4,w=4,g=8,d=l.sizeOfH3Index(),B=l.sizeOfGeoCoord(),h=l.sizeOfGeoBoundary(),b=l.sizeOfGeoPolygon(),k=l.sizeOfGeofence(),Q=l.sizeOfLinkedGeoPolygon(),E=l.sizeOfCoordIJ(),M={m:"m",m2:"m2",km:"km",km2:"km2",rads:"rads",rads2:"rads2"};function D(A){if("number"!=typeof A||A<0||A>15||Math.floor(A)!==A)throw new Error("Invalid resolution: "+A)}exports.UNITS=M;var v=/[^0-9a-fA-F]/;function m(A){if(Array.isArray(A)&&2===A.length&&Number.isInteger(A[0])&&Number.isInteger(A[1]))return A;if("string"!=typeof A||v.test(A))return[0,0];var e=parseInt(A.substring(0,A.length-8),c);return[parseInt(A.substring(A.length-8),c),e]}function I(A){if(A>=0)return A.toString(c);var e=C(8,(A&=2147483647).toString(c));return e=(parseInt(e[0],c)+8).toString(c)+e.substring(1)}function _(A,e){return I(e)+C(8,I(A))}function C(A,e){for(var r=A-e.length,i="",n=0;n<r;n++)i+="0";return i+=e}function p(A,e,i){for(var n=A.length,t=r._calloc(n,B),o=i?1:0,a=i?0:1,f=0;f<2*n;f+=2)r.HEAPF64.set([A[f/2][o],A[f/2][a]].map(UA),t/g+f);return r.HEAPU32.set([n,t],e/s),e}function x(A,e){var i,n=A.length-1,t=r._calloc(b),o=0+k,a=o+s;if(p(A[0],t+0,e),n>0){i=r._calloc(n,k);for(var f=0;f<n;f++)p(A[f+1],i+k*f,e)}return r.setValue(t+o,n,"i32"),r.setValue(t+a,i,"i32"),t}function F(A){var e=0+k,i=e+s;r._free(r.getValue(A+0,"i8*"));for(var n=r.getValue(A+e,"i32"),t=0;t<n;t++)r._free(r.getValue(A+i+k*t,"i8*"));r._free(A)}function U(A){return[A,r.getTempRet0()]}function G(A){var e=U(A),r=e[0],i=e[1];return i?_(r,i):null}function y(A,e){void 0===e&&(e=0);var i=r.getValue(A+s*e*2,"i32"),n=r.getValue(A+s*(2*e+1),"i32");return n?_(i,n):null}function H(A,e,i){r.HEAPU32.set(m(A),e/s+2*i)}function T(A,e){for(var r=[],i=0;i<e;i++){var n=y(A,i);null!==n&&r.push(n)}return r}function P(A,e){for(var r=e.length,i=0;i<r;i++)H(e[i],A,i)}function R(A,e){var i=r._calloc(1,B);return r.HEAPF64.set([A,e].map(UA),i/g),i}function S(A){return GA(r.getValue(A,"double"))}function L(A){return[S(A),S(A+g)]}function z(A){return[S(A+g),S(A)]}function V(A,e,i){for(var n=r.getValue(A,"i32"),t=A+g,o=[],a=e?z:L,f=0;f<2*n;f+=2)o.push(a(t+g*f));return i&&o.push(o[0]),o}function Y(A,e){for(var i,n,t,o,a=[],f=e?z:L;A;){for(a.push(i=[]),n=r.getValue(A,"i8*");n;){for(i.push(t=[]),o=r.getValue(n,"i8*");o;)t.push(f(o)),o=r.getValue(o+2*g,"i8*");e&&t.push(t[0]),n=r.getValue(n+2*w,"i8*")}A=r.getValue(A+2*w,"i8*")}return a}function O(A){return{i:r.getValue(A,"i32"),j:r.getValue(A+s,"i32")}}function W(A,e){var i=e.i,n=e.j;r.setValue(A,i,"i32"),r.setValue(A+s,n,"i32")}function N(A,e){for(var i=[],n=0;n<e;n++){var t=r.getValue(A+s*n,"i32");t>=0&&i.push(t)}return i}function Z(A){var e=m(A),r=e[0],i=e[1];return Boolean(l.h3IsValid(r,i))}function j(A){var e=m(A),r=e[0],i=e[1];return Boolean(l.h3IsPentagon(r,i))}function J(A){var e=m(A),r=e[0],i=e[1];return Boolean(l.h3IsResClassIII(r,i))}function K(A){var e=m(A),r=e[0],i=e[1];return l.h3GetBaseCell(r,i)}function X(A){var e=m(A),i=e[0],n=e[1],t=l.maxFaceCount(i,n),o=r._malloc(s*t);l.h3GetFaces(i,n,o);var a=N(o,t);return r._free(o),a}function q(A){return"string"!=typeof A?-1:parseInt(A.charAt(1),c)}function $(A,e,i){var n=r._malloc(B);r.HEAPF64.set([A,e].map(UA),n/g);var t=G(l.geoToH3(n,i));return r._free(n),t}function AA(A){var e=r._malloc(B),i=m(A),n=i[0],t=i[1];l.h3ToGeo(n,t,e);var o=L(e);return r._free(e),o}function eA(A,e){var i=r._malloc(h),n=m(A),t=n[0],o=n[1];l.h3ToGeoBoundary(t,o,i);var a=V(i,e,e);return r._free(i),a}function rA(A,e){var r=m(A),i=r[0],n=r[1];return G(l.h3ToParent(i,n,e))}function iA(A,e){if(!Z(A))return[];var i=m(A),n=i[0],t=i[1],o=l.maxH3ToChildrenSize(n,t,e),a=r._calloc(o,d);l.h3ToChildren(n,t,e,a);var f=T(a,o);return r._free(a),f}function nA(A,e){var r=m(A),i=r[0],n=r[1];return G(l.h3ToCenterChild(i,n,e))}function tA(A,e){var i=m(A),n=i[0],t=i[1],o=l.maxKringSize(e),a=r._calloc(o,d);l.kRing(n,t,e,a);var f=T(a,o);return r._free(a),f}function oA(A,e){var i=m(A),n=i[0],t=i[1],o=l.maxKringSize(e),a=r._calloc(o,d),f=r._calloc(o,s);l.kRingDistances(n,t,e,a,f);for(var u=[],c=0;c<e+1;c++)u.push([]);for(var w=0;w<2*o;w+=2){var g=r.getValue(a+s*w,"i32"),B=r.getValue(a+s*(w+1),"i32"),h=r.getValue(f+s*(w/2),"i32");0===g&&0===B||u[h].push(_(g,B))}return r._free(a),r._free(f),u}function aA(A,e){var i=0===e?1:6*e,n=r._calloc(i,d);if(0!==l.hexRing.apply(l,m(A).concat([e],[n])))throw r._free(n),new Error("Failed to get hexRing (encountered a pentagon?)");var t=T(n,i);return r._free(n),t}function fA(A,e,i){if(D(e),i=Boolean(i),0===A.length||0===A[0].length)return[];"number"==typeof A[0][0]&&(A=[A]);var n=x(A,i),t=l.maxPolyfillSize(n,e),o=r._calloc(t,d);l.polyfill(n,e,o);var a=T(o,t);return r._free(o),F(n),a}function uA(A,e){if(!A||!A.length)return[];var i=A.length,n=r._calloc(i,d);P(n,A);var t=r._calloc(Q),o=t;l.h3SetToLinkedGeo(n,i,t);var a=Y(t,e);return l.destroyLinkedPolygon(o),r._free(o),r._free(n),a}function lA(A){if(!A||!A.length)return[];var e=A.length,i=r._calloc(e,d);P(i,A);var n=r._calloc(e,d);if(0!==l.compact(i,n,e))throw r._free(i),r._free(n),new Error("Failed to compact, malformed input data (duplicate hexagons?)");var t=T(n,e);return r._free(i),r._free(n),t}function cA(A,e){if(D(e),!A||!A.length)return[];var i=A.length,n=r._calloc(i,d);P(n,A);var t=l.maxUncompactSize(n,i,e),o=r._calloc(t,d);if(0!==l.uncompact(n,i,o,t,e))throw r._free(n),r._free(o),new Error("Failed to uncompact (bad resolution?)");var a=T(o,t);return r._free(n),r._free(o),a}function sA(A,e){var r=m(A),i=r[0],n=r[1],t=m(e),o=t[0],a=t[1];return Boolean(l.h3IndexesAreNeighbors(i,n,o,a))}function wA(A,e){var r=m(A),i=r[0],n=r[1],t=m(e),o=t[0],a=t[1];return G(l.getH3UnidirectionalEdge(i,n,o,a))}function gA(A){var e=m(A),r=e[0],i=e[1];return G(l.getOriginH3IndexFromUnidirectionalEdge(r,i))}function dA(A){var e=m(A),r=e[0],i=e[1];return G(l.getDestinationH3IndexFromUnidirectionalEdge(r,i))}function BA(A){var e=m(A),r=e[0],i=e[1];return Boolean(l.h3UnidirectionalEdgeIsValid(r,i))}function hA(A){var e=m(A),i=e[0],n=e[1],t=r._calloc(2,d);l.getH3IndexesFromUnidirectionalEdge(i,n,t);var o=T(t,2);return r._free(t),o}function bA(A){var e=m(A),i=e[0],n=e[1],t=r._calloc(6,d);l.getH3UnidirectionalEdgesFromHexagon(i,n,t);var o=T(t,6);return r._free(t),o}function kA(A,e){var i=r._malloc(h),n=m(A),t=n[0],o=n[1];l.getH3UnidirectionalEdgeBoundary(t,o,i);var a=V(i,e);return r._free(i),a}function QA(A,e){var r=m(A),i=r[0],n=r[1],t=m(e),o=t[0],a=t[1];return l.h3Distance(i,n,o,a)}function EA(A,e){var i=m(A),n=i[0],t=i[1],o=m(e),a=o[0],f=o[1],u=l.h3LineSize(n,t,a,f);if(u<0)throw new Error("Line cannot be calculated");var c=r._calloc(u,d);l.h3Line(n,t,a,f,c);var s=T(c,u);return r._free(c),s}function MA(A,e){var i=r._malloc(E),n=l.experimentalH3ToLocalIj.apply(l,m(A).concat(m(e),[i])),t=O(i);switch(r._free(i),n){case 0:return t;case 1:throw new Error("Incompatible origin and index.");case 2:default:throw new Error("Local IJ coordinates undefined for this origin and index pair. The index may be too far from the origin.");case 3:case 4:case 5:throw new Error("Encountered possible pentagon distortion")}}function DA(A,e){if(!e||"number"!=typeof e.i||"number"!=typeof e.j)throw new Error("Coordinates must be provided as an {i, j} object");var i=r._malloc(E),n=r._malloc(d);W(i,e);var t=l.experimentalLocalIjToH3.apply(l,m(A).concat([i],[n])),o=y(n);if(r._free(i),r._free(n),0!==t)throw new Error("Index not defined for this origin and IJ coordinates pair. IJ coordinates may be too far from origin, or a pentagon distortion was encountered.");return o}function vA(A,e,i){var n,t=R(A[0],A[1]),o=R(e[0],e[1]);switch(i){case M.m:n=l.pointDistM(t,o);break;case M.km:n=l.pointDistKm(t,o);break;case M.rads:n=l.pointDistRads(t,o);break;default:n=null}if(r._free(t),r._free(o),null===n)throw new Error("Unknown unit: "+i);return n}function mA(A,e){var r=m(A),i=r[0],n=r[1];switch(e){case M.m2:return l.cellAreaM2(i,n);case M.km2:return l.cellAreaKm2(i,n);case M.rads2:return l.cellAreaRads2(i,n);default:throw new Error("Unknown unit: "+e)}}function IA(A,e){var r=m(A),i=r[0],n=r[1];switch(e){case M.m:return l.exactEdgeLengthM(i,n);case M.km:return l.exactEdgeLengthKm(i,n);case M.rads:return l.exactEdgeLengthRads(i,n);default:throw new Error("Unknown unit: "+e)}}function _A(A,e){switch(D(A),e){case M.m2:return l.hexAreaM2(A);case M.km2:return l.hexAreaKm2(A);default:throw new Error("Unknown unit: "+e)}}function CA(A,e){switch(D(A),e){case M.m:return l.edgeLengthM(A);case M.km:return l.edgeLengthKm(A);default:throw new Error("Unknown unit: "+e)}}function pA(A){D(A);var e=U(l.numHexagons(A)),r=e[0],i=e[1];return i?i*Math.pow(2,32)+r:r}function xA(){var A=l.res0IndexCount(),e=r._malloc(d*A);l.getRes0Indexes(e);var i=T(e,A);return r._free(e),i}function FA(A){D(A);var e=l.pentagonIndexCount(),i=r._malloc(d*e);l.getPentagonIndexes(A,i);var n=T(i,e);return r._free(i),n}function UA(A){return A*Math.PI/180}function GA(A){return 180*A/Math.PI}
},{}],"F9v1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("@babel/runtime/helpers/esm/classCallCheck")),t=u(require("@babel/runtime/helpers/esm/createClass")),r=u(require("@babel/runtime/helpers/esm/inherits")),n=u(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),i=u(require("@babel/runtime/helpers/esm/getPrototypeOf")),a=require("h3-js"),o=require("@deck.gl/core"),l=require("@deck.gl/layers");function u(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=c(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){l=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(l)throw a}}}}function c(e,t){if(e){if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function d(e){var t=g();return function(){var r,a=(0,i.default)(e);if(t){var o=(0,i.default)(this).constructor;r=Reflect.construct(a,arguments,o)}else r=a.apply(this,arguments);return(0,n.default)(this,r)}}function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var y=Object.assign({getHexagons:{type:"accessor",value:function(e){return e.hexagons}}},l.PolygonLayer.defaultProps),h=function(n){(0,r.default)(u,n);var i=d(u);function u(){return(0,e.default)(this,u),i.apply(this,arguments)}return(0,t.default)(u,[{key:"updateState",value:function(e){var t=e.props,r=(e.oldProps,e.changeFlags);if(r.dataChanged||r.updateTriggers&&r.updateTriggers.getHexagons){var n,i=t.data,l=t.getHexagons,u=[],c=(0,o.createIterable)(i),f=c.iterable,d=c.objectInfo,g=s(f);try{for(g.s();!(n=g.n()).done;){var y=n.value;d.index++;var h,p=l(y,d),b=s((0,a.h3SetToMultiPolygon)(p,!0));try{for(b.s();!(h=b.n()).done;){var v=h.value;u.push(this.getSubLayerRow({polygon:v},y,d.index))}}catch(m){b.e(m)}finally{b.f()}}}catch(m){g.e(m)}finally{g.f()}this.setState({polygons:u})}}},{key:"renderLayers",value:function(){var e=this.props,t=e.elevationScale,r=e.extruded,n=e.wireframe,i=e.filled,a=e.stroked,o=e.lineWidthScale,u=e.lineWidthMinPixels,s=e.lineWidthMaxPixels,c=e.lineJointRounded,f=e.lineMiterLimit,d=e.lineDashJustified,g=e.material,y=e.getFillColor,h=e.getLineColor,p=e.getLineWidth,b=e.getLineDashArray,v=e.getElevation,m=e.updateTriggers;return new(this.getSubLayerClass("cluster-region",l.PolygonLayer))({filled:i,wireframe:n,extruded:r,elevationScale:t,stroked:a,lineWidthScale:o,lineWidthMinPixels:u,lineWidthMaxPixels:s,lineJointRounded:c,lineMiterLimit:f,lineDashJustified:d,material:g,getFillColor:this.getSubLayerAccessor(y),getLineColor:this.getSubLayerAccessor(h),getLineWidth:this.getSubLayerAccessor(p),getLineDashArray:this.getSubLayerAccessor(b),getElevation:this.getSubLayerAccessor(v)},this.getSubLayerProps({id:"cluster-region",updateTriggers:m}),{data:this.state.polygons,getPolygon:function(e){return e.polygon}})}}]),u}(o.CompositeLayer);exports.default=h,h.defaultProps=y,h.layerName="H3ClusterLayer";
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","h3-js":"PZ1C","@deck.gl/core":"vvxL","@deck.gl/layers":"aWVN"}],"nlUI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.normalizeLongitudes=m,exports.scalePolygon=b,exports.default=void 0;var e=c(require("@babel/runtime/helpers/esm/classCallCheck")),t=c(require("@babel/runtime/helpers/esm/createClass")),r=c(require("@babel/runtime/helpers/esm/inherits")),n=c(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),i=c(require("@babel/runtime/helpers/esm/getPrototypeOf")),a=c(require("@babel/runtime/helpers/esm/typeof")),o=c(require("@babel/runtime/helpers/esm/slicedToArray")),l=require("h3-js"),s=require("math.gl"),u=require("@deck.gl/core"),g=require("@deck.gl/layers");function c(e){return e&&e.__esModule?e:{default:e}}function d(e){var t=h();return function(){var r,a=(0,i.default)(e);if(t){var o=(0,i.default)(this).constructor;r=Reflect.construct(a,arguments,o)}else r=a.apply(this,arguments);return(0,n.default)(this,r)}}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function f(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=p(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){l=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(l)throw a}}}}function p(e,t){if(e){if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var y=10;function m(e,t){t=void 0===t?e[0][0]:t;var r,n=f(e);try{for(n.s();!(r=n.n()).done;){var i=r.value,a=i[0]-t;a>180?i[0]-=360:a<-180&&(i[0]+=360)}}catch(o){n.e(o)}finally{n.f()}}function b(e,t,r){var n=(0,l.h3ToGeo)(e),i=(0,o.default)(n,2),a=i[0],u=i[1],g=t.length;m(t,u);for(var c=t[0]===t[g-1]?g-1:g,d=0;d<c;d++)t[d][0]=(0,s.lerp)(u,t[d][0],r),t[d][1]=(0,s.lerp)(a,t[d][1],r)}function x(e,t,r){var n=e(t,r),i=(0,l.h3ToGeo)(n),a=(0,o.default)(i,2),s=a[0];return[a[1],s]}function P(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2?arguments[2]:void 0,n=(0,l.h3ToGeoBoundary)(e,!0);if(1!==t?b(e,n,t):m(n),r){var i,a=new Float64Array(2*n.length),o=0,s=f(n);try{for(s.s();!(i=s.n()).done;){var u=i.value;a[o++]=u[0],a[o++]=u[1]}}catch(g){s.e(g)}finally{s.f()}return a}return n}function L(e,t){return null==e?t:"object"===(0,a.default)(e)?Object.assign({},e,{coverage:t}):{getHexagon:e,coverage:t}}var C=Object.assign({},g.PolygonLayer.defaultProps,{highPrecision:!1,coverage:{type:"number",min:0,max:1,value:1},centerHexagon:null,getHexagon:{type:"accessor",value:function(e){return e.hexagon}},extruded:!0});delete C.getLineDashArray;var S=function(n){(0,r.default)(a,n);var i=d(a);function a(){return(0,e.default)(this,a),i.apply(this,arguments)}return(0,t.default)(a,[{key:"shouldUpdateState",value:function(e){var t=e.changeFlags;return this._shouldUseHighPrecision()?t.propsOrDataChanged:t.somethingChanged}},{key:"updateState",value:function(e){var t=e.props,r=(e.oldProps,e.changeFlags);if(r.dataChanged||r.updateTriggers&&r.updateTriggers.getHexagon){var n,i=-1,a=!1,o=!1,s=(0,u.createIterable)(t.data),g=s.iterable,c=s.objectInfo,d=f(g);try{for(d.s();!(n=d.n()).done;){var h=n.value;c.index++;var p=t.getHexagon(h,c),v=(0,l.h3GetResolution)(p);if(i<0)i=v;else if(i!==v){o=!0;break}if((0,l.h3IsPentagon)(p)){a=!0;break}}}catch(y){d.e(y)}finally{d.f()}this.setState({resolution:i,edgeLengthKM:i>=0?(0,l.edgeLength)(i,l.UNITS.km):0,hasMultipleRes:o,hasPentagon:a})}this._updateVertices(this.context.viewport)}},{key:"_shouldUseHighPrecision",value:function(){var e=this.state,t=e.resolution,r=e.hasPentagon,n=e.hasMultipleRes,i=this.context.viewport;return this.props.highPrecision||i.resolution||n||r||t>=0&&t<=5}},{key:"_updateVertices",value:function(e){if(!this._shouldUseHighPrecision()){var t=this.state,r=t.resolution,n=t.edgeLengthKM,i=t.centerHex;if(!(r<0)){var a=this.props.centerHexagon||(0,l.geoToH3)(e.latitude,e.longitude,r);if(i!==a){if(i){var s=(0,l.h3Distance)(i,a);if(s>=0&&s*n<y)return}var u=e.distanceScales.unitsPerMeter,g=P(a),c=(0,l.h3ToGeo)(a),d=(0,o.default)(c,2),h=d[0],f=d[1],p=e.projectFlat([f,h]),v=(0,o.default)(p,2),m=v[0],b=v[1];g=g.map(function(t){var r=e.projectFlat(t);return[(r[0]-m)/u[0],(r[1]-b)/u[1]]}),this.setState({centerHex:a,vertices:g})}}}}},{key:"renderLayers",value:function(){return this._shouldUseHighPrecision()?this._renderPolygonLayer():this._renderColumnLayer()}},{key:"_getForwardProps",value:function(){var e=this.props,t=e.elevationScale,r=e.material,n=e.coverage,i=e.extruded,a=e.wireframe,o=e.stroked,l=e.filled,s=e.lineWidthUnits,u=e.lineWidthScale,g=e.lineWidthMinPixels,c=e.lineWidthMaxPixels,d=e.getFillColor,h=e.getElevation,f=e.getLineColor,p=e.getLineWidth,v=e.updateTriggers;return{elevationScale:t,extruded:i,coverage:n,wireframe:a,stroked:o,filled:l,lineWidthUnits:s,lineWidthScale:u,lineWidthMinPixels:g,lineWidthMaxPixels:c,material:r,getElevation:h,getFillColor:d,getLineColor:f,getLineWidth:p,updateTriggers:{getFillColor:v.getFillColor,getElevation:v.getElevation,getLineColor:v.getLineColor,getLineWidth:v.getLineWidth}}}},{key:"_renderPolygonLayer",value:function(){var e=this.props,t=e.data,r=e.getHexagon,n=e.updateTriggers,i=e.coverage,a=this.getSubLayerClass("hexagon-cell-hifi",g.PolygonLayer),o=this._getForwardProps();return o.updateTriggers.getPolygon=L(n.getHexagon,i),new a(o,this.getSubLayerProps({id:"hexagon-cell-hifi",updateTriggers:o.updateTriggers}),{data:t,_normalize:!1,positionFormat:"XY",getPolygon:function(e,t){return P(r(e,t),i,!0)}})}},{key:"_renderColumnLayer",value:function(){var e=this.props,t=e.data,r=e.getHexagon,n=e.updateTriggers,i=this.getSubLayerClass("hexagon-cell",g.ColumnLayer),a=this._getForwardProps();return a.updateTriggers.getPosition=n.getHexagon,new i(a,this.getSubLayerProps({id:"hexagon-cell",updateTriggers:a.updateTriggers}),{data:t,diskResolution:6,radius:1,vertices:this.state.vertices,getPosition:x.bind(null,r)})}}]),a}(u.CompositeLayer);exports.default=S,S.defaultProps=C,S.layerName="H3HexagonLayer";
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/typeof":"zsbK","@babel/runtime/helpers/esm/slicedToArray":"TBeo","h3-js":"PZ1C","math.gl":"xAaq","@deck.gl/core":"vvxL","@deck.gl/layers":"aWVN"}],"WkxE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shouldComposeModelMatrix=u,exports.MATRIX_ATTRIBUTES=void 0;var e=require("@deck.gl/core");function t(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=r(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw i}}}}function r(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var a=Math.PI/180,o=new Float32Array(16),i=new Float32Array(12);function s(e,t,r){var n=t[0]*a,o=t[1]*a,i=t[2]*a,s=Math.sin(i),l=Math.sin(n),f=Math.sin(o),u=Math.cos(i),c=Math.cos(n),y=Math.cos(o),A=r[0],T=r[1],d=r[2];e[0]=A*y*c,e[1]=A*f*c,e[2]=A*-l,e[3]=T*(-f*u+y*l*s),e[4]=T*(y*u+f*l*s),e[5]=T*c*s,e[6]=d*(f*s+y*l*u),e[7]=d*(-y*s+f*l*u),e[8]=d*c*u}function l(e){return e[0]=e[0],e[1]=e[1],e[2]=e[2],e[3]=e[4],e[4]=e[5],e[5]=e[6],e[6]=e[8],e[7]=e[9],e[8]=e[10],e[9]=e[12],e[10]=e[13],e[11]=e[14],e.subarray(0,12)}var f={size:12,accessor:["getOrientation","getScale","getTranslation","getTransformMatrix"],shaderAttributes:{instanceModelMatrix__LOCATION_0:{size:3,elementOffset:0},instanceModelMatrix__LOCATION_1:{size:3,elementOffset:3},instanceModelMatrix__LOCATION_2:{size:3,elementOffset:6},instanceTranslation:{size:3,elementOffset:9}},update:function(r,n){var a=n.startRow,f=n.endRow,u=this.props,c=u.data,y=u.getOrientation,A=u.getScale,T=u.getTranslation,d=u.getTransformMatrix,v=Array.isArray(d),M=v&&16===d.length,O=Array.isArray(A),h=Array.isArray(y),m=Array.isArray(T),p=M||!v&&Boolean(d(c[0]));r.constant=p?M:h&&O&&m;var S=r.value;if(r.constant){var b;if(p)o.set(d),b=l(o);else s(b=i,y,A),b.set(T,9);r.value=new Float32Array(b)}else{var g,I=a*r.size,_=(0,e.createIterable)(c,a,f),E=_.iterable,x=_.objectInfo,R=t(E);try{for(R.s();!(g=R.n()).done;){var w=g.value;x.index++;var C=void 0;if(p)o.set(M?d:d(w,x)),C=l(o);else s(C=i,h?y:y(w,x),O?A:A(w,x)),C.set(m?T:T(w,x),9);S[I++]=C[0],S[I++]=C[1],S[I++]=C[2],S[I++]=C[3],S[I++]=C[4],S[I++]=C[5],S[I++]=C[6],S[I++]=C[7],S[I++]=C[8],S[I++]=C[9],S[I++]=C[10],S[I++]=C[11]}}catch(N){R.e(N)}finally{R.f()}}}};function u(t,r){return r===e.COORDINATE_SYSTEM.CARTESIAN||r===e.COORDINATE_SYSTEM.METER_OFFSETS||r===e.COORDINATE_SYSTEM.DEFAULT&&!t.isGeospatial}exports.MATRIX_ATTRIBUTES=f;
},{"@deck.gl/core":"vvxL"}],"NMSJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var o="#version 300 es\n#define SHADER_NAME simple-mesh-layer-vs\nuniform float sizeScale;\nuniform bool composeModelMatrix;\nin vec3 positions;\nin vec3 normals;\nin vec3 colors;\nin vec2 texCoords;\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\nout vec2 vTexCoord;\nout vec3 cameraPosition;\nout vec3 normals_commonspace;\nout vec4 position_commonspace;\nout vec4 vColor;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = instancePickingColors;\n\n  vTexCoord = texCoords;\n  cameraPosition = project_uCameraPosition;\n  normals_commonspace = project_normal(instanceModelMatrix * normals);\n  vColor = vec4(colors * instanceColors.rgb, instanceColors.a);\n  geometry.normal = normals_commonspace;\n\n  vec3 pos = (instanceModelMatrix * positions) * sizeScale + instanceTranslation;\n\n  if (composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), position_commonspace);\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, position_commonspace);\n  }\n\n  geometry.position = position_commonspace;\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n";exports.default=o;
},{}],"yokP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var o="#version 300 es\n#define SHADER_NAME simple-mesh-layer-fs\n\nprecision highp float;\n\nuniform bool hasTexture;\nuniform sampler2D sampler;\nuniform bool flatShading;\nuniform float opacity;\n\nin vec2 vTexCoord;\nin vec3 cameraPosition;\nin vec3 normals_commonspace;\nin vec4 position_commonspace;\nin vec4 vColor;\n\nout vec4 fragColor;\n\nvoid main(void) {\n  geometry.uv = vTexCoord;\n\n  vec3 normal;\n  if (flatShading) {\n#ifdef DERIVATIVES_AVAILABLE\n    normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));\n#else\n    normal = vec3(0.0, 0.0, 1.0);\n#endif\n  } else {\n    normal = normals_commonspace;\n  }\n\n  vec4 color = hasTexture ? texture(sampler, vTexCoord) : vColor;\n  vec3 lightColor = lighting_getLightColor(color.rgb, cameraPosition, position_commonspace.xyz, normal);\n  fragColor = vec4(lightColor, color.a * opacity);\n\n  DECKGL_FILTER_COLOR(fragColor, geometry);\n}\n";exports.default=o;
},{}],"twBb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=p(require("@babel/runtime/helpers/esm/classCallCheck")),t=p(require("@babel/runtime/helpers/esm/createClass")),s=p(require("@babel/runtime/helpers/esm/get")),r=p(require("@babel/runtime/helpers/esm/inherits")),a=p(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),i=p(require("@babel/runtime/helpers/esm/getPrototypeOf")),o=require("@deck.gl/core"),n=require("@luma.gl/core"),l=require("@luma.gl/webgl"),u=require("../utils/matrix"),c=p(require("./simple-mesh-layer-vertex.glsl")),h=p(require("./simple-mesh-layer-fragment.glsl"));function p(e){return e&&e.__esModule?e:{default:e}}function d(e){var t=f();return function(){var s,r=(0,i.default)(e);if(t){var o=(0,i.default)(this).constructor;s=Reflect.construct(r,arguments,o)}else s=r.apply(this,arguments);return(0,a.default)(this,s)}}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function m(e,t,s){return t instanceof n.Texture2D?t:new n.Texture2D(e,Object.assign({data:t},s))}function y(e,t){(e.COLOR_0||e.colors)&&t||(e.colors={constant:!0,value:new Float32Array([1,1,1])}),o.log.assert(e.positions||e.POSITION,'SimpleMeshLayer requires "postions" or "POSITION" attribute in mesh property.')}function g(e,t){if(e.attributes)return y(e.attributes,t),e instanceof n.Geometry?e:new n.Geometry(e);if(e.positions||e.POSITION)return y(e,t),new n.Geometry({attributes:e});throw Error("Invalid mesh")}var v=[0,0,0,255],x={mesh:{value:null,type:"object",async:!0},texture:{type:"object",value:null,async:!0},sizeScale:{type:"number",value:1,min:0},_useMeshColors:{type:"boolean",value:!1},_instanced:!0,wireframe:!1,material:!0,getPosition:{type:"accessor",value:function(e){return e.position}},getColor:{type:"accessor",value:v},getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]}},b=function(a){(0,r.default)(f,a);var p=d(f);function f(){return(0,e.default)(this,f),p.apply(this,arguments)}return(0,t.default)(f,[{key:"getShaders",value:function(){var e=!(0,n.isWebGL2)(this.context.gl),t={};return(0,l.hasFeature)(this.context.gl,l.FEATURES.GLSL_DERIVATIVES)&&(t.DERIVATIVES_AVAILABLE=1),(0,s.default)((0,i.default)(f.prototype),"getShaders",this).call(this,{vs:c.default,fs:h.default,modules:[o.project32,o.phongLighting,o.picking],transpileToGLSL100:e,defines:t})}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{transition:!0,type:5130,fp64:this.use64bitPositions(),size:3,accessor:"getPosition"},instanceColors:{type:5121,transition:!0,size:this.props.colorFormat.length,normalized:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceModelMatrix:u.MATRIX_ATTRIBUTES}),this.setState({emptyTexture:new n.Texture2D(this.context.gl,{data:new Uint8Array(4),width:1,height:1})})}},{key:"updateState",value:function(e){var t=e.props,r=e.oldProps,a=e.changeFlags;if((0,s.default)((0,i.default)(f.prototype),"updateState",this).call(this,{props:t,oldProps:r,changeFlags:a}),t.mesh!==r.mesh||a.extensionsChanged){if(this.state.model&&this.state.model.delete(),t.mesh){this.setState({model:this.getModel(t.mesh)});var o=t.mesh.attributes||t.mesh;this.setState({hasNormals:Boolean(o.NORMAL||o.normals)})}this.getAttributeManager().invalidateAll()}t.texture!==r.texture&&this.setTexture(t.texture),this.state.model&&this.state.model.setDrawMode(this.props.wireframe?3:4)}},{key:"finalizeState",value:function(){(0,s.default)((0,i.default)(f.prototype),"finalizeState",this).call(this),this.state.emptyTexture.delete(),this.state.texture&&this.state.texture.delete()}},{key:"draw",value:function(e){var t=e.uniforms;if(this.state.model){var s=this.context.viewport,r=this.props,a=r.sizeScale,i=r.coordinateSystem,o=r._instanced;this.state.model.draw({uniforms:Object.assign({},t,{sizeScale:a,composeModelMatrix:!o||(0,u.shouldComposeModelMatrix)(s,i),flatShading:!this.state.hasNormals})})}}},{key:"getModel",value:function(e){var t=new n.Model(this.context.gl,Object.assign({},this.getShaders(),{id:this.props.id,geometry:g(e,this.props._useMeshColors),isInstanced:!0})),s=this.state,r=s.texture,a=s.emptyTexture;return t.setUniforms({sampler:r||a,hasTexture:Boolean(r)}),t}},{key:"setTexture",value:function(e){var t=this.context.gl,s=this.state,r=s.emptyTexture,a=s.model;this.state.texture&&this.state.texture.delete();var i=e?m(t,e):null;this.setState({texture:i}),a&&a.setUniforms({sampler:i||r,hasTexture:Boolean(i)})}}]),f}(o.Layer);exports.default=b,b.layerName="SimpleMeshLayer",b.defaultProps=x;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/get":"KGqu","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@deck.gl/core":"vvxL","@luma.gl/core":"iuAK","@luma.gl/webgl":"KdJH","../utils/matrix":"WkxE","./simple-mesh-layer-vertex.glsl":"NMSJ","./simple-mesh-layer-fragment.glsl":"yokP"}],"G2Vo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("@babel/runtime/helpers/esm/objectSpread")),r=n(require("@babel/runtime/helpers/esm/classCallCheck")),t=n(require("@babel/runtime/helpers/esm/createClass")),a=require("@luma.gl/gltools");function n(e){return e&&e.__esModule?e:{default:e}}var u=function(){function n(){(0,r.default)(this,n)}return(0,t.default)(n,[{key:"getViews",value:function(e){var r=e.width,t=e.height;return[{params:{viewport:[0,0,r,t],scissor:[0,0,r,t],scissorTest:!0}}]}},{key:"submitFrame",value:function(){return!0}},{key:"requestAnimationFrame",value:function(e){return!1}},{key:"delete",value:function(){}},{key:"_renderFrame",value:function(r){var t=this,n=this.getViews(r);if(!n)return!1;var u=this.animationLoop.gl,i=!0,l=!1,s=void 0;try{for(var o,f=function(){var n=o.value;(0,a.withParameters)(u,n.params,function(){return t.animationLoop.onRender((0,e.default)({},r,n))})},c=n[Symbol.iterator]();!(i=(o=c.next()).done);i=!0)f()}catch(m){l=!0,s=m}finally{try{i||null==c.return||c.return()}finally{if(l)throw s}}return this.submitFrame(),!0}}]),n}();exports.default=u;
},{"@babel/runtime/helpers/esm/objectSpread":"EV9w","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@luma.gl/gltools":"lAom"}],"PW0d":[function(require,module,exports) {
"use strict";function t(t){var e=t.canvas,n=t.title,o=e.getBoundingClientRect(),l=o.top,s=o.left,r=o.width,a=o.height,i=document.createElement("div");i.style.position="absolute",i.style.top="".concat(l,"px"),i.style.left="".concat(s,"px"),i.style.width="".concat(r,"px"),i.style.height="".concat(a,"px"),i.style.pointerEvents="none",i.style.zIndex="999",document.body.appendChild(i);var p=document.createElement("button");return p.style.padding="16px",p.style.border="1px solid #fff",p.style.borderRadius="8px",p.style.background="rgba(0,0,0,0.5)",p.style.color="#fff",p.style.font="normal 20px sans-serif",p.style.cursor="pointer",p.style.margin="20px auto",p.style.display="block",p.style.pointerEvents="all",p.textContent=n,i.appendChild(p),p}Object.defineProperty(exports,"__esModule",{value:!0}),exports.createEnterVRButton=t;
},{}],"ovdn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=h(require("@babel/runtime/regenerator")),t=h(require("@babel/runtime/helpers/esm/asyncToGenerator")),r=h(require("@babel/runtime/helpers/esm/classCallCheck")),i=h(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),a=h(require("@babel/runtime/helpers/esm/assertThisInitialized")),n=h(require("@babel/runtime/helpers/esm/getPrototypeOf")),s=h(require("@babel/runtime/helpers/esm/get")),u=h(require("@babel/runtime/helpers/esm/createClass")),l=h(require("@babel/runtime/helpers/esm/inherits")),o=require("@luma.gl/webgl"),v=h(require("./display")),p=require("./vr-button");function h(e){return e&&e.__esModule?e:{default:e}}var c=function(v){function h(e){var t;return(0,r.default)(this,h),(t=(0,i.default)(this,(0,n.default)(h).call(this,e)))._vrSupported=h.isSupported(),t._vrSupported&&(t.vrFrameData=new window.VRFrameData,t.vrPresenting=!1,t.vrFrame=!1,window.addEventListener("vrdisplaypresentchange",t._vrDisplayPresentChange.bind((0,a.default)(t)))),t}return(0,l.default)(h,v),(0,u.default)(h,null,[{key:"isSupported",value:function(){return"undefined"!=typeof navigator&&"getVRDisplays"in navigator&&"VRFrameData"in window}}]),(0,u.default)(h,[{key:"delete",value:function(){(0,s.default)((0,n.default)(h.prototype),"delete",this).call(this),this._removeVRButton()}},{key:"getViews",value:function(e){if(this._vrSupported&&this._addVRButton(),this.vrPresenting&&this.vrFrame){this.vrDisplay.getFrameData(this.vrFrameData);var t=this.vrFrameData,r=t.leftProjectionMatrix,i=t.leftViewMatrix,a=t.rightProjectionMatrix,u=t.rightViewMatrix,l=e.width,o=e.height;return[{displayEye:"left",projectionMatrix:r,viewMatrix:i,params:{viewport:[0,0,.5*l,o],scissor:[0,0,.5*l,o],scissorTest:!0}},{displayEye:"right",projectionMatrix:a,viewMatrix:u,params:{viewport:[.5*l,0,.5*l,o],scissor:[.5*l,0,.5*l,o],scissorTest:!0}}]}return(0,s.default)((0,n.default)(h.prototype),"getViews",this).call(this,e)}},{key:"submitFrame",value:function(){return!(!this.vrPresenting||!this.vrFrame)&&(this.vrDisplay.submitFrame(),!0)}},{key:"requestAnimationFrame",value:function(e){var t=this;return!!this.vrPresenting&&(this.vrDisplay.requestAnimationFrame(function(){t.vrFrame=!0,e(),t.vrFrame=!1}),!0)}},{key:"_addVRButton",value:function(){var r=(0,t.default)(e.default.mark(function t(){var r,i,a=this;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.vrButton){e.next=2;break}return e.abrupt("return");case 2:if(r=this._getCanvas()){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,navigator.getVRDisplays();case 7:(i=e.sent)&&i.length&&(o.log.info(2,"Found VR Displays",i)(),this.vrDisplay=i[0],this.vrButton=(0,p.createEnterVRButton)({canvas:r,title:"Enter VR (".concat(this.vrDisplay.displayName,")")}),this.vrButton.onclick=function(){return a._startDisplay()});case 9:case"end":return e.stop()}},t,this)}));return function(){return r.apply(this,arguments)}}()},{key:"_getCanvas",value:function(){return this.animationLoop.canvas||this.animationLoop.gl&&this.animationLoop.gl.canvas}},{key:"_removeVRButton",value:function(){this.vrButton}},{key:"_startDisplay",value:function(){this.vrDisplay.requestPresent([{source:this._getCanvas()}])}},{key:"_vrDisplayPresentChange",value:function(){this.vrDisplay.isPresenting?(o.log.info(2,"Entering VR")(),this.vrPresenting=!0,this.vrButton.style.display="none"):(o.log.info(2,"Exiting VR")(),this.vrPresenting=!1,this.vrButton.style.display="block")}}]),h}(v.default);exports.default=c;
},{"@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/assertThisInitialized":"Rs9H","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/get":"KGqu","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","@luma.gl/webgl":"KdJH","./display":"G2Vo","./vr-button":"PW0d"}],"bFos":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=l(require("@babel/runtime/helpers/esm/defineProperty")),r=l(require("@babel/runtime/helpers/esm/classCallCheck")),t=l(require("@babel/runtime/helpers/esm/createClass")),u=require("@luma.gl/webgl"),a=require("@loaders.gl/images");function l(e){return e&&e.__esModule?e:{default:e}}var i=function(){function l(e,t){var u=t.brdfLutUrl,a=t.getTexUrl,i=t.specularMipLevels,s=void 0===i?10:i;(0,r.default)(this,l),this.gl=e,this.brdfLutUrl=u,this.getTexUrl=a,this.specularMipLevels=s}return(0,t.default)(l,[{key:"makeCube",value:function(e){var r=e.id,t=e.getTextureForFace,a=e.parameters,l={};return u.TextureCube.FACES.forEach(function(e){l[e]=t(e)}),new u.TextureCube(this.gl,{id:r,mipmaps:!1,parameters:a,pixels:l})}},{key:"getDiffuseEnvSampler",value:function(){var r,t=this;this._DiffuseEnvSampler||(this._DiffuseEnvSampler=this.makeCube({id:"DiffuseEnvSampler",getTextureForFace:function(e){return(0,a.loadImage)(t.getTexUrl("diffuse",e,0))},parameters:(r={},(0,e.default)(r,10242,33071),(0,e.default)(r,10243,33071),(0,e.default)(r,10241,9729),(0,e.default)(r,10240,9729),r)}));return this._DiffuseEnvSampler}},{key:"getSpecularEnvSampler",value:function(){var r,t=this;this._SpecularEnvSampler||(this._SpecularEnvSampler=this.makeCube({id:"SpecularEnvSampler",getTextureForFace:function(e){for(var r=[],u=0;u<=t.specularMipLevels-1;u++)r.push((0,a.loadImage)(t.getTexUrl("specular",e,u)));return r},parameters:(r={},(0,e.default)(r,10242,33071),(0,e.default)(r,10243,33071),(0,e.default)(r,10241,9987),(0,e.default)(r,10240,9729),r)}));return this._SpecularEnvSampler}},{key:"getBrdfTexture",value:function(){var r;this._BrdfTexture||(this._BrdfTexture=new u.Texture2D(this.gl,{id:"brdfLUT",parameters:(r={},(0,e.default)(r,10242,33071),(0,e.default)(r,10243,33071),(0,e.default)(r,10241,9729),(0,e.default)(r,10240,9729),r),data:(0,a.loadImage)(this.brdfLutUrl)}));return this._BrdfTexture}},{key:"delete",value:function(){this._DiffuseEnvSampler&&(this._DiffuseEnvSampler.delete(),this._DiffuseEnvSampler=null),this._SpecularEnvSampler&&(this._SpecularEnvSampler.delete(),this._SpecularEnvSampler=null),this._BrdfTexture&&(this._BrdfTexture.delete(),this._BrdfTexture=null)}}]),l}();exports.default=i;
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@luma.gl/webgl":"KdJH","@loaders.gl/images":"DNDh"}],"MqrU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("@babel/runtime/helpers/esm/classCallCheck")),e=r(require("@babel/runtime/helpers/esm/createClass")),i=require("math.gl"),s=require("@luma.gl/webgl");function r(t){return t&&t.__esModule?t:{default:t}}var a=function(){function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,t.default)(this,r);var a=e.id;this.id=a||(0,s.uid)(this.constructor.name),this.display=!0,this.position=new i.Vector3,this.rotation=new i.Vector3,this.scale=new i.Vector3(1,1,1),this.matrix=new i.Matrix4,this.userData={},this.props={},this._setScenegraphNodeProps(e)}return(0,e.default)(r,[{key:"delete",value:function(){}},{key:"setProps",value:function(t){return this._setScenegraphNodeProps(t),this}},{key:"toString",value:function(){return"{type: ScenegraphNode, id: ".concat(this.id,")}")}},{key:"setPosition",value:function(t){return(0,s.assert)(3===t.length,"setPosition requires vector argument"),this.position=t,this}},{key:"setRotation",value:function(t){return(0,s.assert)(3===t.length,"setRotation requires vector argument"),this.rotation=t,this}},{key:"setScale",value:function(t){return(0,s.assert)(3===t.length,"setScale requires vector argument"),this.scale=t,this}},{key:"setMatrix",value:function(t){!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?this.matrix.copy(t):this.matrix=t}},{key:"setMatrixComponents",value:function(t){var e=t.position,i=t.rotation,s=t.scale,r=t.update,a=void 0===r||r;return e&&this.setPosition(e),i&&this.setRotation(i),s&&this.setScale(s),a&&this.updateMatrix(),this}},{key:"updateMatrix",value:function(){var t=this.position,e=this.rotation,i=this.scale;return this.matrix.identity(),this.matrix.translate(t),this.matrix.rotateXYZ(e),this.matrix.scale(i),this}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.position,i=t.rotation,s=t.scale;return e&&this.setPosition(e),i&&this.setRotation(i),s&&this.setScale(s),this.updateMatrix(),this}},{key:"getCoordinateUniforms",value:function(t,e){(0,s.assert)(t),e=e||this.matrix;var r=new i.Matrix4(t).multiplyRight(e),a=r.invert(),o=a.transpose();return{viewMatrix:t,modelMatrix:e,objectMatrix:e,worldMatrix:r,worldInverseMatrix:a,worldInverseTransposeMatrix:o}}},{key:"_setScenegraphNodeProps",value:function(t){"display"in t&&(this.display=t.display),"position"in t&&this.setPosition(t.position),"rotation"in t&&this.setRotation(t.rotation),"scale"in t&&this.setScale(t.scale),"matrix"in t&&this.setMatrix(t.matrix),Object.assign(this.props,t)}}]),r}();exports.default=a;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","math.gl":"xAaq","@luma.gl/webgl":"KdJH"}],"MSBn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=h(require("@babel/runtime/helpers/esm/toConsumableArray")),r=h(require("@babel/runtime/helpers/esm/classCallCheck")),t=h(require("@babel/runtime/helpers/esm/createClass")),l=h(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),i=h(require("@babel/runtime/helpers/esm/getPrototypeOf")),a=h(require("@babel/runtime/helpers/esm/get")),n=h(require("@babel/runtime/helpers/esm/inherits")),u=require("math.gl"),s=require("@luma.gl/webgl"),o=h(require("./scenegraph-node"));function h(e){return e&&e.__esModule?e:{default:e}}var d=function(h){function d(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.default)(this,d);var a=(t=Array.isArray(t)?{children:t}:t).children,n=void 0===a?[]:a;return s.log.assert(n.every(function(e){return e instanceof o.default}),"every child must an instance of ScenegraphNode"),(e=(0,l.default)(this,(0,i.default)(d).call(this,t))).children=n,e}return(0,n.default)(d,h),(0,t.default)(d,[{key:"add",value:function(){for(var r=arguments.length,t=new Array(r),l=0;l<r;l++)t[l]=arguments[l];for(var i=0,a=t;i<a.length;i++){var n=a[i];Array.isArray(n)?this.add.apply(this,(0,e.default)(n)):this.children.push(n)}return this}},{key:"remove",value:function(e){var r=this.children,t=r.indexOf(e);return t>-1&&r.splice(t,1),this}},{key:"removeAll",value:function(){return this.children=[],this}},{key:"delete",value:function(){this.children.forEach(function(e){return e.delete()}),this.removeAll(),(0,a.default)((0,i.default)(d.prototype),"delete",this).call(this)}},{key:"traverse",value:function(e){var r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).worldMatrix,t=void 0===r?new u.Matrix4:r,l=new u.Matrix4(t).multiplyRight(this.matrix),i=!0,a=!1,n=void 0;try{for(var s,o=this.children[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var h=s.value;h instanceof d?h.traverse(e,{worldMatrix:l}):e(h,{worldMatrix:l})}}catch(c){a=!0,n=c}finally{try{i||null==o.return||o.return()}finally{if(a)throw n}}}}]),d}(o.default);exports.default=d;
},{"@babel/runtime/helpers/esm/toConsumableArray":"AdMH","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/get":"KGqu","@babel/runtime/helpers/esm/inherits":"RnSb","math.gl":"xAaq","@luma.gl/webgl":"KdJH","./scenegraph-node":"MqrU"}],"LO6j":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("@babel/runtime/helpers/esm/classCallCheck")),t=i(require("@babel/runtime/helpers/esm/createClass")),r=i(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),s=i(require("@babel/runtime/helpers/esm/getPrototypeOf")),l=i(require("@babel/runtime/helpers/esm/get")),u=i(require("@babel/runtime/helpers/esm/inherits")),n=require("@luma.gl/engine"),o=i(require("./scenegraph-node"));function i(e){return e&&e.__esModule?e:{default:e}}var a=function(o){function i(t){var l,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,e.default)(this,i),(l=(0,r.default)(this,(0,s.default)(i).call(this,u))).onBeforeRender=null,l.AfterRender=null,t instanceof n.Model?(l.model=t,l._setModelNodeProps(u)):l.model=new n.Model(t,u),l.managedResources=u.managedResources||[],l}return(0,u.default)(i,o),(0,t.default)(i,[{key:"setProps",value:function(e){return(0,l.default)((0,s.default)(i.prototype),"setProps",this).call(this,e),this._setModelNodeProps(e),this}},{key:"delete",value:function(){this.model&&(this.model.delete(),this.model=null),this.managedResources.forEach(function(e){return e.delete()}),this.managedResources=[]}},{key:"draw",value:function(){var e;return(e=this.model).draw.apply(e,arguments)}},{key:"setUniforms",value:function(){var e;return(e=this.model).setUniforms.apply(e,arguments),this}},{key:"setAttributes",value:function(){var e;return(e=this.model).setAttributes.apply(e,arguments),this}},{key:"updateModuleSettings",value:function(){var e;return(e=this.model).updateModuleSettings.apply(e,arguments),this}},{key:"_setModelNodeProps",value:function(e){this.model.setProps(e)}}]),i}(o.default);exports.default=a;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/get":"KGqu","@babel/runtime/helpers/esm/inherits":"RnSb","@luma.gl/engine":"YENE","./scenegraph-node":"MqrU"}],"iBw7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"ScenegraphNode",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"GroupNode",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"ModelNode",{enumerable:!0,get:function(){return t.default}});var e=n(require("./nodes/scenegraph-node")),r=n(require("./nodes/group-node")),t=n(require("./nodes/model-node"));function n(e){return e&&e.__esModule?e:{default:e}}
},{"./nodes/scenegraph-node":"MqrU","./nodes/group-node":"MSBn","./nodes/model-node":"LO6j"}],"dUdb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY=exports.ATTRIBUTE_TYPE_TO_COMPONENTS=void 0;var t=r(require("@babel/runtime/helpers/esm/classCallCheck")),a=r(require("@babel/runtime/helpers/esm/createClass")),e=require("@luma.gl/webgl"),n=require("math.gl");function r(t){return t&&t.__esModule?t:{default:t}}var i={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16};exports.ATTRIBUTE_TYPE_TO_COMPONENTS=i;var o={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function s(t){if(!t._animation){var a=o[t.componentType],e=i[t.type],n=e*t.count,r=t.bufferView.data,s=new a(r.buffer,r.byteOffset+(t.byteOffset||0),n);if(1===e)t._animation=Array.from(s);else{for(var u=[],l=0;l<s.length;l+=e)u.push(Array.from(s.slice(l,l+e)));t._animation=u}}return t._animation}exports.ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY=o;var u=new n.Matrix4;function l(t,a){if(a.matrix.identity(),t.translation&&a.matrix.translate(t.translation),t.rotation){var e=u.fromQuaternion(t.rotation);a.matrix.multiplyRight(e)}t.scale&&a.matrix.scale(t.scale)}var f=new n.Quaternion;function c(t,a,e,n,r){if("rotation"===a){f.slerp({start:e,target:n,ratio:r});for(var i=0;i<f.length;i++)t[a][i]=f[i]}else for(var o=0;o<e.length;o++)t[a][o]=r*n[o]+(1-r)*e[o]}function p(t,a,e){for(var n=e.p0,r=e.outTangent0,i=e.inTangent1,o=e.p1,s=e.tDiff,u=e.ratio,l=0;l<t[a].length;l++){var f=r[l]*s,c=i[l]*s;t[a][l]=(2*Math.pow(u,3)-3*Math.pow(u,2)+1)*n[l]+(Math.pow(u,3)-2*Math.pow(u,2)+u)*f+(-2*Math.pow(u,3)+3*Math.pow(u,2))*o[l]+(Math.pow(u,3)-Math.pow(u,2))*c}}function h(t,a,e){for(var n=0;n<e.length;n++)t[a][n]=e[n]}function m(t,a,n,r){var i=a.input,o=a.interpolation,s=a.output,u=t%i[i.length-1],l=i.findIndex(function(t){return t>=u}),f=Math.max(0,l-1);if(!Array.isArray(n[r]))switch(r){case"translation":n[r]=[0,0,0];break;case"rotation":n[r]=[0,0,0,1];break;case"scale":n[r]=[1,1,1];break;default:e.log.warn("Bad animation path ".concat(r))()}(0,e.assert)(n[r].length===s[f].length);var m=i[f],T=i[l];switch(o){case"STEP":h(n,r,s[f]);break;case"LINEAR":if(T>m){var v=(u-m)/(T-m);c(n,r,s[f],s[l],v)}break;case"CUBICSPLINE":if(T>m){var A=(u-m)/(T-m),g=T-m;p(n,r,{p0:s[3*f+1],outTangent0:s[3*f+2],inTangent1:s[3*l+0],p1:s[3*l+1],tDiff:g,ratio:A})}break;default:e.log.warn("Interpolation ".concat(o," not supported"))()}}var T=function(){function e(a){(0,t.default)(this,e),this.startTime=0,this.playing=!0,this.speed=1,Object.assign(this,a)}return(0,a.default)(e,[{key:"animate",value:function(t){if(this.playing){var a=(t/1e3-this.startTime)*this.speed;this.channels.forEach(function(t){var e=t.sampler,n=t.target,r=t.path;m(a,e,n,r),l(n,n._node)})}}}]),e}(),v=function(){function e(a){(0,t.default)(this,e),this.animations=a.animations.map(function(t,e){var n=t.name||"Animation-".concat(e),r=t.samplers.map(function(t){var e=t.input,n=t.interpolation,r=void 0===n?"LINEAR":n,i=t.output;return{input:s(a.accessors[e]),interpolation:r,output:s(a.accessors[i])}}),i=t.channels.map(function(t){var e=t.sampler,n=t.target;return{sampler:r[e],target:a.nodes[n.node],path:n.path}});return new T({name:n,channels:i})})}return(0,a.default)(e,[{key:"animate",value:function(t){this.setTime(t)}},{key:"setTime",value:function(t){this.animations.forEach(function(a){return a.animate(t)})}},{key:"getAnimations",value:function(){return this.animations}}]),e}();exports.default=v;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@luma.gl/webgl":"KdJH","math.gl":"xAaq"}],"X3OY":[function(require,module,exports) {
var define;
var e;Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var s=a(require("@babel/runtime/helpers/esm/defineProperty")),t=a(require("@babel/runtime/helpers/esm/classCallCheck")),r=a(require("@babel/runtime/helpers/esm/createClass")),i=require("@luma.gl/webgl");function a(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(s,r){var a=r.attributes,u=r.material,l=r.pbrDebug,n=r.imageBasedLightingEnvironment,o=r.lights,h=r.useTangents;(0,t.default)(this,e),this.gl=s,this.defines={MANUAL_SRGB:1,SRGB_FAST_APPROXIMATION:1},(0,i.hasFeature)(s,i.FEATURES.GLSL_TEXTURE_LOD)&&(this.defines.USE_TEX_LOD=1),this.uniforms={u_Camera:[0,0,0],u_MetallicRoughnessValues:[1,1]},this.parameters={},this.generatedTextures=[],n&&(this.uniforms.u_DiffuseEnvSampler=n.getDiffuseEnvSampler(),this.uniforms.u_SpecularEnvSampler=n.getSpecularEnvSampler(),this.uniforms.u_brdfLUT=n.getBrdfTexture(),this.uniforms.u_ScaleIBLAmbient=[1,1]),l&&(this.uniforms.u_ScaleDiffBaseMR=[0,0,0,0],this.uniforms.u_ScaleFGDSpec=[0,0,0,0]),this.defineIfPresent(a.NORMAL,"HAS_NORMALS"),this.defineIfPresent(a.TANGENT&&h,"HAS_TANGENTS"),this.defineIfPresent(a.TEXCOORD_0,"HAS_UV"),this.defineIfPresent(n,"USE_IBL"),this.defineIfPresent(o,"USE_LIGHTS"),this.defineIfPresent(l,"PBR_DEBUG"),u&&this.parseMaterial(u)}return(0,r.default)(e,[{key:"defineIfPresent",value:function(e,s){e&&(this.defines[s]=1)}},{key:"parseTexture",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=e.texture&&e.texture.sampler&&e.texture.sampler.parameters||{},u=new i.Texture2D(this.gl,{id:e.name||e.id,parameters:a,pixelStore:(0,s.default)({},this.gl.UNPACK_FLIP_Y_WEBGL,!1),data:e.texture.source.image});this.uniforms[t]=u,this.defineIfPresent(r,r),this.generatedTextures.push(u)}},{key:"parsePbrMetallicRoughness",value:function(e){e.baseColorTexture&&this.parseTexture(e.baseColorTexture,"u_BaseColorSampler","HAS_BASECOLORMAP"),this.uniforms.u_BaseColorFactor=e.baseColorFactor||[1,1,1,1],e.metallicRoughnessTexture&&this.parseTexture(e.metallicRoughnessTexture,"u_MetallicRoughnessSampler","HAS_METALROUGHNESSMAP");var s=e.metallicFactor,t=void 0===s?1:s,r=e.roughnessFactor,i=void 0===r?1:r;this.uniforms.u_MetallicRoughnessValues=[t,i]}},{key:"parseMaterial",value:function(e){if(this.uniforms.pbr_uUnlit=Boolean(e.unlit),e.pbrMetallicRoughness&&this.parsePbrMetallicRoughness(e.pbrMetallicRoughness),e.normalTexture){this.parseTexture(e.normalTexture,"u_NormalSampler","HAS_NORMALMAP");var s=e.normalTexture.scale,t=void 0===s?1:s;this.uniforms.u_NormalScale=t}if(e.occlusionTexture){this.parseTexture(e.occlusionTexture,"u_OcclusionSampler","HAS_OCCLUSIONMAP");var r=e.occlusionTexture.strength,a=void 0===r?1:r;this.uniforms.u_OcclusionStrength=a}if(e.emissiveTexture&&(this.parseTexture(e.emissiveTexture,"u_EmissiveSampler","HAS_EMISSIVEMAP"),this.uniforms.u_EmissiveFactor=e.emissiveFactor||[0,0,0]),"MASK"===e.alphaMode){var u=e.alphaCutoff,l=void 0===u?.5:u;this.defines.ALPHA_CUTOFF=1,this.uniforms.u_AlphaCutoff=l}else"BLEND"===e.alphaMode&&(i.log.warn("BLEND alphaMode might not work well because it requires mesh sorting")(),Object.assign(this.parameters,{blend:!0,blendEquation:this.gl.FUNC_ADD,blendFunc:[this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA]}))}}]),e}();exports.default=u;
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@luma.gl/webgl":"KdJH"}],"zDU2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=o(require("@babel/runtime/helpers/esm/toConsumableArray")),n=require("@luma.gl/gltools"),r=require("@luma.gl/webgl"),t=require("@luma.gl/shadertools"),i=require("../scenegraph"),a=o(require("./gltf-material-parser"));function o(e){return e&&e.__esModule?e:{default:e}}var f="\n#if (__VERSION__ < 300)\n  #define _attr attribute\n#else\n  #define _attr in\n#endif\n\n  _attr vec4 POSITION;\n\n  #ifdef HAS_NORMALS\n    _attr vec4 NORMAL;\n  #endif\n\n  #ifdef HAS_TANGENTS\n    _attr vec4 TANGENT;\n  #endif\n\n  #ifdef HAS_UV\n    _attr vec2 TEXCOORD_0;\n  #endif\n\n  void main(void) {\n    vec4 _NORMAL = vec4(0.);\n    vec4 _TANGENT = vec4(0.);\n    vec2 _TEXCOORD_0 = vec2(0.);\n\n    #ifdef HAS_NORMALS\n      _NORMAL = NORMAL;\n    #endif\n\n    #ifdef HAS_TANGENTS\n      _TANGENT = TANGENT;\n    #endif\n\n    #ifdef HAS_UV\n      _TEXCOORD_0 = TEXCOORD_0;\n    #endif\n\n    pbr_setPositionNormalTangentUV(POSITION, _NORMAL, _TANGENT, _TEXCOORD_0);\n    gl_Position = u_MVPMatrix * POSITION;\n  }\n",d="\n#if (__VERSION__ < 300)\n  #define fragmentColor gl_FragColor\n#else\n  out vec4 fragmentColor;\n#endif\n\n  void main(void) {\n    fragmentColor = pbr_filterColor(vec4(0));\n  }\n";function s(e,r){return(0,n.isWebGL2)(e)?"#version 300 es\n".concat(r):r}function u(n,o){var u=o.id,_=o.drawMode,l=o.vertexCount,O=o.attributes,N=o.modelOptions,v=new a.default(n,o);r.log.info(4,"createGLTFModel defines: ",v.defines)();var c=[];c.push.apply(c,(0,e.default)(v.generatedTextures)),c.push.apply(c,(0,e.default)(Object.values(O).map(function(e){return e.buffer})));var T=new i.ModelNode(n,Object.assign({id:u,drawMode:_,vertexCount:l,modules:[t.pbr],defines:v.defines,parameters:v.parameters,vs:s(n,f),fs:s(n,d),managedResources:c},N));return T.setProps({attributes:O}),T.setUniforms(v.uniforms),T}
},{"@babel/runtime/helpers/esm/toConsumableArray":"AdMH","@luma.gl/gltools":"lAom","@luma.gl/webgl":"KdJH","@luma.gl/shadertools":"Pzgo","../scenegraph":"iBw7","./gltf-material-parser":"X3OY"}],"wXTU":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("@babel/runtime/helpers/esm/classCallCheck")),t=s(require("@babel/runtime/helpers/esm/createClass")),r=require("math.gl"),i=require("@luma.gl/webgl"),n=require("../scenegraph/"),a=s(require("./gltf-animator")),u=s(require("./create-gltf-model"));function s(e){return e&&e.__esModule?e:{default:e}}var o={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},c={modelOptions:{},pbrDebug:!1,imageBasedLightingEnvironment:null,lights:!0,useTangents:!1},l=function(){function s(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,e.default)(this,s),this.gl=t,this.options=Object.assign({},c,r)}return(0,t.default)(s,[{key:"instantiate",value:function(e){var t=this;return this.gltf=e,(e.scenes||[]).map(function(e){return t.createScene(e)})}},{key:"createAnimator",value:function(){return Array.isArray(this.gltf.animations)?new a.default(this.gltf):null}},{key:"createScene",value:function(e){var t=this,r=(e.nodes||[]).map(function(e){return t.createNode(e)});return new n.GroupNode({id:e.name||e.id,children:r})}},{key:"createNode",value:function(e){var t=this;if(!e._node){var i=(e.children||[]).map(function(e){return t.createNode(e)});e.mesh&&i.push(this.createMesh(e.mesh));var a=new n.GroupNode({id:e.name||e.id,children:i});if(e.matrix)a.setMatrix(e.matrix);else{if(a.matrix.identity(),e.translation&&a.matrix.translate(e.translation),e.rotation){var u=(new r.Matrix4).fromQuaternion(e.rotation);a.matrix.multiplyRight(u)}e.scale&&a.matrix.scale(e.scale)}e._node=a}return e._node}},{key:"createMesh",value:function(e){var t=this;if(!e._mesh){var r=(e.primitives||[]).map(function(r,i){return t.createPrimitive(r,i,e)}),i=new n.GroupNode({id:e.name||e.id,children:r});e._mesh=i}return e._mesh}},{key:"getVertexCount",value:function(e){i.log.warn("getVertexCount() not found")()}},{key:"createPrimitive",value:function(e,t,r){return(0,u.default)(this.gl,Object.assign({id:e.name||"".concat(r.name||r.id,"-primitive-").concat(t),drawMode:e.mode||4,vertexCount:e.indices?e.indices.count:this.getVertexCount(e.attributes),attributes:this.createAttributes(e.attributes,e.indices),material:e.material},this.options))}},{key:"createAttributes",value:function(e,t){var r=this,n={};return Object.keys(e).forEach(function(t){n[t]=r.createAccessor(e[t],r.createBuffer(e[t],r.gl.ARRAY_BUFFER))}),t&&(n.indices=this.createAccessor(t,this.createBuffer(t,this.gl.ELEMENT_ARRAY_BUFFER))),i.log.info(4,"glTF Attributes",{attributes:e,indices:t,generated:n})(),n}},{key:"createBuffer",value:function(e,t){e.bufferView||(e.bufferView={});var r=e.bufferView;return r.lumaBuffers||(r.lumaBuffers={}),r.lumaBuffers[t]||(r.lumaBuffers[t]=new i.Buffer(this.gl,{id:"from-".concat(r.id),data:r.data||e.value,target:t})),r.lumaBuffers[t]}},{key:"createAccessor",value:function(e,t){return new i.Accessor({buffer:t,offset:e.byteOffset||0,stride:e.bufferView.byteStride||0,type:e.componentType,size:o[e.type]})}},{key:"createSampler",value:function(e){return e}},{key:"needsPOT",value:function(){return!1}}]),s}();exports.default=l;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","math.gl":"xAaq","@luma.gl/webgl":"KdJH","../scenegraph/":"iBw7","./gltf-animator":"dUdb","./create-gltf-model":"zDU2"}],"OsSP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=t(require("./gltf-instantiator"));function t(e){return e&&e.__esModule?e:{default:e}}function r(t,r,n){var a=new e.default(t,n);return{scenes:a.instantiate(r),animator:a.createAnimator()}}
},{"./gltf-instantiator":"wXTU"}],"Szw9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.HISTOPYRAMID_TRAVERSAL_VS=exports.HISTOPYRAMID_TRAVERSAL_UTILS=exports.HISTOPYRAMID_BASE_BUILD_VS=exports.HISTOPYRAMID_BUILD_VS=exports.HISTOPYRAMID_BUILD_VS_UTILS=void 0;var e="// Get current pixel indices for a given size\nvec2 histoPyramid_getPixelIndices(vec2 size) {\n  vec2 pixelOffset = transform_getPixelSizeHalf(size);\n  vec2 pixelIndices = transform_getPixelIndices(size, pixelOffset);\n  return pixelIndices;\n}\n\n// returns the top left texture coordiante corresponding to 2X2 block in higher level texture.\n// size: lower level texture size\n// scale: usually (2, 2)\n// offset: offset with-in 2X2 block of higher level texture\nvec2 histoPyramid_getTexCoord(vec2 size, vec2 scale, vec2 offset) {\n  // use actual (scaled) texture size to calcualte offset (multiplied by scale)\n  vec2 scaledSize = size * scale;\n\n  // use minified texture size to find corresponding pixel index in out texture\n  vec2 pixelIndices = histoPyramid_getPixelIndices(size);\n\n  // now scale the indices to point to correct 2X2 block\n  pixelIndices = pixelIndices * scale;\n\n  // generate tex coordinate using actual size\n  vec2 texCoord = pixelIndices / scaledSize;\n  vec2 inPixelOffset = transform_getPixelSizeHalf(scaledSize);\n\n  return texCoord + (offset / scaledSize) + inPixelOffset;\n}\n\n// returns pixel value from higher level texture based on scale and offset\n// texSampler: higher level texture sampler\n// size: lower level texture size\n// scale: usually (2, 2)\n// offset: offset with-in 2X2 block of higher level texture\nvec4 histoPyramid_getInput(sampler2D texSampler, vec2 size, vec2 scale, vec2 offset) {\n  vec2 texCoord = histoPyramid_getTexCoord(size, scale, offset);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n";exports.HISTOPYRAMID_BUILD_VS_UTILS=e;var n="attribute vec4 inTexture;\nvarying vec4 outTexture;\n\nvoid main()\n{\n  vec2 size = transform_uSize_outTexture;\n  vec2 scale = vec2(2., 2.);\n  vec4 pixel = histoPyramid_getInput(transform_uSampler_inTexture, size, scale, vec2(0, 0));\n  vec4 rightPixel = histoPyramid_getInput(transform_uSampler_inTexture, size, scale, vec2(1, 0));\n  vec4 bottomPixel = histoPyramid_getInput(transform_uSampler_inTexture, size, scale, vec2(0, 1));\n  vec4 rightBottomPixel = histoPyramid_getInput(transform_uSampler_inTexture, size, scale, vec2(1, 1));\n  // outTexture = pixel + rightPixel + bottomPixel + rightBottomPixel;\n  outTexture = vec4(\n    pixel.r + pixel.g + pixel.b + pixel.a,\n    rightPixel.r + rightPixel.g + rightPixel.b + rightPixel.a,\n    bottomPixel.r + bottomPixel.g + bottomPixel.b + bottomPixel.a,\n    rightBottomPixel.r + rightBottomPixel.g + rightBottomPixel.b + rightBottomPixel.a\n  );\n}\n";exports.HISTOPYRAMID_BUILD_VS=n;var i="attribute vec4 inTexture;\nvarying vec4 outTexture;\nuniform int channel;\nuniform vec4 padingPixelValue;\n\nvoid main()\n{\n  vec2 size = transform_uSize_outTexture;\n  // vec2 scale = vec2(2., 2.);\n  vec2 scale = transform_uSize_inTexture / transform_uSize_outTexture;\n\n  // Verify if reference to a input texture pixel is out of bounds, if so treat the pixel as (0, 0)\n  vec2 pixelIndices = histoPyramid_getPixelIndices(size);\n  // now scale the indices padded size to point to correct 2X2 block\n  pixelIndices = pixelIndices * vec2(2, 2);\n\n  vec2 baseLevelSize = transform_uSize_inTexture;\n\n  // For all pixels outside of original texture size, return paddingPixelValue\n  bool xInside = pixelIndices.x < baseLevelSize.x;\n  bool yInside = pixelIndices.y < baseLevelSize.y;\n  bool xPlusOneInside = pixelIndices.x + 1. < baseLevelSize.x;\n  bool yPlusOneInside = pixelIndices.y + 1. < baseLevelSize.y;\n\n  vec4 pixel = (xInside && yInside)\n    ? histoPyramid_getInput(transform_uSampler_inTexture, size, scale, vec2(0, 0))\n    : padingPixelValue;\n\n  vec4 rightPixel = (xPlusOneInside && yInside)\n    ? histoPyramid_getInput(transform_uSampler_inTexture, size, scale, vec2(1, 0))\n    : padingPixelValue;\n\n  vec4 topPixel = (xInside && yPlusOneInside)\n    ? histoPyramid_getInput(transform_uSampler_inTexture, size, scale, vec2(0, 1))\n    : padingPixelValue;\n\n  vec4 rightTopPixel = (xPlusOneInside && yPlusOneInside)\n    ? histoPyramid_getInput(transform_uSampler_inTexture, size, scale, vec2(1, 1))\n    : padingPixelValue;\n\n  if (channel == 0) {\n    outTexture = vec4(pixel.r, rightPixel.r, topPixel.r, rightTopPixel.r);\n  }\n  if (channel == 1) {\n    outTexture = vec4(pixel.g, rightPixel.g, topPixel.g, rightTopPixel.g);\n  }\n  if (channel == 2) {\n    outTexture = vec4(pixel.b, rightPixel.b, topPixel.b, rightTopPixel.b);\n  }\n  if (channel == 3) {\n    outTexture = vec4(pixel.a, rightPixel.a, topPixel.a, rightTopPixel.a);\n  }\n}\n";exports.HISTOPYRAMID_BASE_BUILD_VS=i;var t="// Check 2X2 texture block to find relative index the given key index falls into\n// 2X2 block is represented by a single RGBA weight\nint histopyramid_traversal_findRangeIndex(float currentKey, vec4 weights, out float lowerBound) {\n  lowerBound = 0.;\n  float higherBound = 0.;\n  int relativeIndex = 0;\n  for (int i = 0; i < 4; i++) {\n    higherBound = lowerBound + weights[i];\n    relativeIndex = i;\n    if (currentKey >= lowerBound && currentKey < higherBound) {\n      break;\n    }\n    lowerBound = higherBound;\n  }\n  return relativeIndex;\n}\n\n// Maps index in 2X2 block to texture coordiante\n// Assumes the traversal order of lower-left -> lower->right -> upper-left -> upper->right\nvec2 histopyramid_traversal_mapIndexToCoord(int index) {\n  // relativeIndex ->  relativeCoordiante\n  // 0 -> (0, 0)\n  // 1 -> (1, 0)\n  // 2 -> (0, 1)\n  // 3 -> (1, 1)\n  float relativeX = mod(float(index), 2.);\n  float relativeY = (index > 1) ? 1. : 0.;\n  return vec2(relativeX, relativeY);\n}\n\n// Reads weight value from flat histopyramid\nvec4 histopyramid_traversal_getWeight(sampler2D flatPyramid, vec2 size, int level, int numLevels, vec2 offset) {\n  // horizontal offset in flat pyramid for current level\n  float xOffset = pow(2., float(numLevels)) - pow(2., float(numLevels - level));\n  vec2 lowerLeft = vec2(xOffset, 0.);\n  vec2 pixelIndices = lowerLeft + offset;\n\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 coord = pixelIndices / size + pixelSizeHalf;\n\n  return texture2D(flatPyramid, coord);\n}\n";exports.HISTOPYRAMID_TRAVERSAL_UTILS=t;var r="attribute float keyIndex;\nattribute vec4 flatPyramidTexture;\nvarying vec4 locationAndIndex;\nconst int MAX_LEVELS = 12; // assuming max texture size of 4K\n\nuniform int numLevels;\n\nvoid main()\n{\n  vec2 p = vec2(0., 0.);\n  float currentKey = keyIndex;\n  // for(int level = numLevels - 1; level <= 0; level--) {\n  for(int i = 1; i <= MAX_LEVELS; i++) {\n    int level = numLevels - i;\n    // #1. Get the current pixel values based on current level and current p\n    vec4 weights = histopyramid_traversal_getWeight(transform_uSampler_flatPyramidTexture, transform_uSize_flatPyramidTexture, level, numLevels, p);\n\n    // #2. Check the all weights in current 2X2 (4 values in RGBA channels) and determine the relative coordinate\n    float lowerBound = 0.;\n    int relativeIndex = histopyramid_traversal_findRangeIndex(currentKey, weights, lowerBound);\n    vec2 relativeCoord = histopyramid_traversal_mapIndexToCoord(relativeIndex);\n\n    //#3. Update P and key-index\n    p = 2.0 * p + relativeCoord;\n    currentKey -= lowerBound;\n    if (level == 0) { break; } // Work around for const expression restriction on for loops\n  }\n  locationAndIndex = vec4(p, currentKey, keyIndex);\n}\n";exports.HISTOPYRAMID_TRAVERSAL_VS=r;
},{}],"g3sS":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.buildHistopyramidBaseLevel=o,exports.getHistoPyramid=d,exports.histoPyramidGenerateIndices=l;var e=u(require("@babel/runtime/helpers/esm/defineProperty")),t=require("@luma.gl/webgl"),r=require("@luma.gl/engine"),a=require("./histopyramid-shaders");function u(e){return e&&e.__esModule?e:{default:e}}function n(e){var t=Math.ceil(Math.log2(e));return Math.pow(2,t)}var i={r:0,x:0,g:1,y:1,b:2,z:2,a:3,w:3};function o(u,o){var d,l,s=o.texture,h=o.channel,T=void 0===h?"r":h,x=o._readData,c=void 0!==x&&x,f=s.width,g=s.height,m=((f=n(f))>(g=n(g))?f:g)/2,_=(0,t.cloneTextureFrom)(s,{width:m,height:m}),v=new r.Transform(u,{_sourceTextures:{inTexture:s},_targetTexture:_,_targetTextureVarying:"outTexture",vs:"".concat(a.HISTOPYRAMID_BUILD_VS_UTILS).concat(a.HISTOPYRAMID_BASE_BUILD_VS),elementCount:_.width*_.height});v.run({uniforms:{channel:i[T]||0,padingPixelValue:[0,0,0,0]}}),(c||1===m)&&(l=v.getData({packed:!0}));var I=2*m,p=(0,t.cloneTextureFrom)(s,{width:I,height:I,parameters:(d={},(0,e.default)(d,10240,9728),(0,e.default)(d,10241,9728),d)}),w=v.getFramebuffer();return(0,t.copyToTexture)(w,p,{targetX:0,width:m,height:m}),{textureData:l,baseTexture:_,flatPyramidTexture:p}}function d(e,u){var n=o(e,u),i=n.textureData,d=n.baseTexture,l=n.flatPyramidTexture,s=d.width,h=Math.log2(s)+1,T=[d],x=i;if(h>1){for(var c=1;c<h;c++){var f=s/Math.pow(2,c);T.push((0,t.cloneTextureFrom)(d,{width:f,height:f}))}for(var g=new r.Transform(e,{_sourceTextures:{inTexture:T[0]},_targetTexture:T[1],_targetTextureVarying:"outTexture",vs:"".concat(a.HISTOPYRAMID_BUILD_VS_UTILS).concat(a.HISTOPYRAMID_BUILD_VS),elementCount:T[1].width*T[1].height}),m=s,_=1;_<h;_++){var v=[T[_].width,T[_].height];g.update({_sourceTextures:{inTexture:T[_-1]},_targetTexture:T[_],elementCount:T[_].width*T[_].height}),g.run();var I=g.getFramebuffer();(0,t.copyToTexture)(I,l,{targetX:m,width:v[0],height:v[1]}),m+=v[0]}x=g.getData()}return{pyramidTextures:T,flatPyramidTexture:l,levelCount:h,topLevelData:x}}function l(e,u){var n=d(e,u),i=n.flatPyramidTexture,o=n.levelCount,l=n.topLevelData,s=l[0]+l[1]+l[2]+l[3],h=new t.Buffer(e,new Float32Array(s).map(function(e,t){return t})),T=new t.Buffer(e,4*s*4);return new r.Transform(e,{sourceBuffers:{keyIndex:h},_sourceTextures:{flatPyramidTexture:i},feedbackBuffers:{locationAndIndex:T},varyings:["locationAndIndex"],vs:"".concat(a.HISTOPYRAMID_TRAVERSAL_UTILS).concat(a.HISTOPYRAMID_TRAVERSAL_VS),elementCount:s}).run({uniforms:{numLevels:o}}),{locationAndIndexBuffer:T}}
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","@luma.gl/webgl":"KdJH","@luma.gl/engine":"YENE","./histopyramid-shaders":"Szw9"}],"ARuy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("@babel/runtime/helpers/esm/slicedToArray"));function t(e){return e&&e.__esModule?e:{default:e}}var r="\nuniform vec4 textureFilter_uBoundingBox; //[xMin, yMin, xSize, ySize]\nuniform sampler2D textureFilter_uTexture;\nvec2 textureFilter_filter(vec2 position) {\n  vec2 filterValueIndex;\n  // Transfrom 'pos' to texture coordinate\n  vec2 pos = position - textureFilter_uBoundingBox.xy;\n  pos = pos / textureFilter_uBoundingBox.zw;\n  filterValueIndex.y = float(gl_VertexID);\n  if (pos.x < 0. || pos.x > 1. || pos.y < 0. || pos.y > 1.) {\n    filterValueIndex.x = -1.;\n  } else {\n    // Red channel is ID, Green channel inside/outside polygon\n    vec4 color = texture(textureFilter_uTexture, pos.xy);\n    filterValueIndex.x = color.g > 0. ? color.r : -1.;\n  }\n  return filterValueIndex;\n}\n";function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r={};if(t.boundingBox){var n=(0,e.default)(t.boundingBox,4),o=n[0],u=n[1],i=n[2],l=n[3];r.textureFilter_uBoundingBox=[o,u,i-o,l-u]}return t.texture&&(r.textureFilter_uTexture=t.texture),r}var o={name:"texture-filter",vs:r,getUniforms:n};exports.default=o;
},{"@babel/runtime/helpers/esm/slicedToArray":"TBeo"}],"zC0s":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FILTER_VS=exports.POLY_TEX_VS=void 0;var o="uniform vec4 boundingBoxOriginSize; //[xMin, yMin, xSize, ySize]\nattribute vec2 a_position;\nattribute float a_polygonID;\nvarying vec4 v_polygonColor;\nvoid main()\n{\n    // translate from bbox to NDC\n    vec2 pos = a_position - boundingBoxOriginSize.xy;\n    pos = pos / boundingBoxOriginSize.zw;\n    pos = pos * 2.0 - vec2(1.0);\n    gl_Position = vec4(pos, 0.0, 1.0);\n    v_polygonColor = vec4(a_polygonID, 1.0, 1.0, 1.0);\n}\n";exports.POLY_TEX_VS=o;var n="#version 300 es\nin vec2 a_position;\nout vec2 filterValueIndex; //[x: 0 (outside polygon)/1 (inside), y: position index]\nvoid main()\n{\n  filterValueIndex = textureFilter_filter(a_position);\n}\n";exports.FILTER_VS=n;
},{}],"ntSp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getVertexCount=h,exports.normalize=c,exports.getSurfaceIndices=p;var r=n(require("earcut"));function n(r){return r&&r.__esModule?r:{default:r}}var t=Math.PI/4,e=Math.PI/360;function i(r){if(r=r&&r.positions||r,!Array.isArray(r)&&!ArrayBuffer.isView(r))throw new Error("invalid polygon")}function o(r){return r.length>=1&&r[0].length>=2&&Number.isFinite(r[0][0])}function u(r){var n=r[0],t=r[r.length-1];return n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2]}function a(r,n,t,e){for(var i=0;i<n;i++)if(r[t+i]!==r[e-n+i])return!1;return!0}function f(r,n,t,e){for(var i=n,o=t.length,a=0;a<o;a++)for(var f=0;f<e;f++)r[i++]=t[a][f]||0;if(!u(t))for(var l=0;l<e;l++)r[i++]=t[0][l]||0;return i}function l(r,n,t,e){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5?arguments[5]:void 0,u=(o=o||t.length)-i;if(u<=0)return n;for(var f=n,l=0;l<u;l++)r[f++]=t[i+l];if(!a(t,e,i,o))for(var s=0;s<e;s++)r[f++]=t[i+s];return f}function s(r){return(u(r)?0:1)+r.length}function v(r,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,e=arguments.length>3?arguments[3]:void 0;return t>=(e=e||r.length)?0:(a(r,n,t,e)?0:1)+(e-t)/n}function h(r,n){if(!(!(arguments.length>2&&void 0!==arguments[2])||arguments[2]))return(r=r.positions||r).length/n;if(i(r),r.positions){var t=r,e=t.positions,u=t.holeIndices;if(u){for(var a=0,f=0;f<=u.length;f++)a+=v(r.positions,n,u[f-1],u[f]);return a}r=e}if(Number.isFinite(r[0]))return v(r,n);if(!o(r)){var l=0,h=!0,c=!1,p=void 0;try{for(var d,g=r[Symbol.iterator]();!(h=(d=g.next()).done);h=!0){l+=s(d.value)}}catch(y){c=!0,p=y}finally{try{h||null==g.return||g.return()}finally{if(c)throw p}}return l}return s(r)}function c(r,n,t){i(r),t=t||h(r,n);var e=new Float64Array(t*n),u=[];if(r.positions){var a=r,s=a.positions,v=a.holeIndices;if(v){for(var c=0,p=0;p<=v.length;p++)c=l(e,c,s,n,v[p-1],v[p]),u.push(c);return u.pop(),{positions:e,holeIndices:u}}r=s}if(Number.isFinite(r[0]))return l(e,0,r,n),e;if(!o(r)){var d=0,g=!0,y=!1,I=void 0;try{for(var m,x=r[Symbol.iterator]();!(g=(m=x.next()).done);g=!0){d=f(e,d,m.value,n),u.push(d)}}catch(b){y=!0,I=b}finally{try{g||null==x.return||x.return()}finally{if(y)throw I}}return u.pop(),{positions:e,holeIndices:u}}return f(e,0,r,n),e}function p(n,i,o){var u=null;n.holeIndices&&(u=n.holeIndices.map(function(r){return r/i}));var a=n.positions||n;if(o){var f=a.length;a=a.slice();for(var l=0;l<f;l+=i){var s=a[l+1];a[l+1]=Math.log(Math.tan(t+s*e))}}return(0,r.default)(a,u,i)}
},{"earcut":"d3f1"}],"q8Mc":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=h(require("@babel/runtime/helpers/esm/toConsumableArray")),t=h(require("@babel/runtime/helpers/esm/slicedToArray")),r=h(require("@babel/runtime/helpers/esm/defineProperty")),i=h(require("@babel/runtime/helpers/esm/classCallCheck")),u=h(require("@babel/runtime/helpers/esm/createClass")),n=require("@luma.gl/webgl"),s=require("@luma.gl/gltools"),o=require("@luma.gl/engine"),a=h(require("./texture-filter")),f=require("./shaders"),l=d(require("./polygon"));function p(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function d(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=p();if(t&&t.has(e))return t.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var n=i?Object.getOwnPropertyDescriptor(e,u):null;n&&(n.get||n.set)?Object.defineProperty(r,u,n):r[u]=e[u]}return r.default=e,t&&t.set(e,r),r}function h(e){return e&&e.__esModule?e:{default:e}}var c=512,g=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,i.default)(this,e),this.gl=t,(0,n.assert)((0,s.isWebGL2)(t)),this.textureSize=c,this._setupResources(),this.update(r)}return(0,u.default)(e,[{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.polygons,r=e.textureSize;if(r&&(this.textureSize=r),t&&0!==t.length){var i=m(t),u=i.vertices,n=i.indices,s=i.vertexCount,o=i.ids;this._updateResources(u,n,o,s)}}},{key:"filter",value:function(e){var t=e.positionBuffer,r=e.filterValueIndexBuffer,i=e.count;this.filterTransform.update({sourceBuffers:{a_position:t},feedbackBuffers:{filterValueIndex:r},elementCount:i});var u=this.polygonTexture,n=this.boundingBox;this.filterTransform.run({moduleSettings:{boundingBox:n,texture:u}})}},{key:"_setupResources",value:function(){var e,t=this.gl;this.polygonTexture=new n.Texture2D(t,{format:6407,type:5121,dataFormat:6407,border:0,mipmaps:!1,parameters:(e={},(0,r.default)(e,10240,9728),(0,r.default)(e,10241,9728),(0,r.default)(e,10242,33071),(0,r.default)(e,10243,33071),e)}),this.positionBuffer=new n.Buffer(t,{accessor:{type:5126,size:2}}),this.idBuffer=new n.Buffer(t,{accessor:{type:5126,size:1}}),this.indexBuffer=new n.Buffer(t,{target:34963,accessor:{type:5123}}),this.polyTextureTransform=new o.Transform(t,{id:"polygon-texture-creation-transform",elementCount:0,_targetTexture:this.polygonTexture,_targetTextureVarying:"v_polygonColor",vs:f.POLY_TEX_VS,drawMode:4,isIndexed:!0,sourceBuffers:{a_position:this.positionBuffer,a_polygonID:this.idBuffer,indices:this.indexBuffer}}),this.filterTransform=new o.Transform(t,{id:"filter transform",vs:f.FILTER_VS,modules:[a.default],varyings:["filterValueIndex"]})}},{key:"_updateResources",value:function(e,r,i,u){var n=y(e,u),s=(0,t.default)(n,4),o=s[0],a=s[1],f=s[2]-o,l=s[3]-a,p=f/l,d=this.textureSize,h=d,c=d;p>1?c=h/p:h=c*p,this.boundingBox=n,this.polygonTexture.resize({width:h,height:c,mipmaps:!1}),this.positionBuffer.setData(new Float32Array(e)),this.idBuffer.setData(new Float32Array(i)),this.indexBuffer.setData(new Uint16Array(r)),this.polyTextureTransform.update({elementCount:r.length,_targetTexture:this.polygonTexture}),this.polyTextureTransform.run({uniforms:{boundingBoxOriginSize:[o,a,f,l]}})}}]),e}();function y(e,t){for(var r,i,u=1/0,n=-1/0,s=1/0,o=-1/0,a=0;a<t;a++)i=e[2*a],u=(r=e[2*a+1])<u?r:u,n=r>n?r:n,s=i<s?i:s,o=i>o?i:o;return[s,u,o,n]}function m(t){for(var r=[],i=[],u=[],s=0,o=0,a=0;a<t.length;a++){var f=l.normalize(t[a],2),p=f.positions||f,d=p.length/2,h=new Array(d).fill(o);r.push.apply(r,(0,e.default)(p)),u.push.apply(u,(0,e.default)(h));for(var c=l.getSurfaceIndices(f,2),g=c.length,y=0;y<g;y++)c[y]+=s;s+=d,i.push.apply(i,(0,e.default)(c)),o++}return(0,n.assert)(s<65536),{vertices:r,indices:i,ids:u,vertexCount:l.getVertexCount(r,2)}}exports.default=g;
},{"@babel/runtime/helpers/esm/toConsumableArray":"AdMH","@babel/runtime/helpers/esm/slicedToArray":"TBeo","@babel/runtime/helpers/esm/defineProperty":"iDM3","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@luma.gl/webgl":"KdJH","@luma.gl/gltools":"lAom","@luma.gl/engine":"YENE","./texture-filter":"ARuy","./shaders":"zC0s","./polygon":"ntSp"}],"dpaF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Display",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"VRDisplay",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"GLTFEnvironment",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"createGLTFObjects",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"ScenegraphNode",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"GroupNode",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"ModelNode",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"buildHistopyramidBaseLevel",{enumerable:!0,get:function(){return d.buildHistopyramidBaseLevel}}),Object.defineProperty(exports,"getHistoPyramid",{enumerable:!0,get:function(){return d.getHistoPyramid}}),Object.defineProperty(exports,"histoPyramidGenerateIndices",{enumerable:!0,get:function(){return d.histoPyramidGenerateIndices}}),Object.defineProperty(exports,"GPUPointInPolygon",{enumerable:!0,get:function(){return p.default}});var e=a(require("./webvr/display")),r=a(require("./webvr/vr-display")),t=a(require("./gltf/gltf-environment")),n=a(require("./gltf/create-gltf-objects")),o=a(require("./scenegraph/nodes/scenegraph-node")),i=a(require("./scenegraph/nodes/group-node")),u=a(require("./scenegraph/nodes/model-node")),d=require("./gpgpu/histopyramid/histopyramid"),p=a(require("./gpgpu/point-in-polygon/gpu-point-in-polygon"));function a(e){return e&&e.__esModule?e:{default:e}}
},{"./webvr/display":"G2Vo","./webvr/vr-display":"ovdn","./gltf/gltf-environment":"bFos","./gltf/create-gltf-objects":"OsSP","./scenegraph/nodes/scenegraph-node":"MqrU","./scenegraph/nodes/group-node":"MSBn","./scenegraph/nodes/model-node":"LO6j","./gpgpu/histopyramid/histopyramid":"g3sS","./gpgpu/point-in-polygon/gpu-point-in-polygon":"q8Mc"}],"ntZG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.waitForGLTFAssets=n;var e=t(require("@babel/runtime/regenerator")),r=t(require("@babel/runtime/helpers/esm/asyncToGenerator"));function t(e){return e&&e.__esModule?e:{default:e}}function n(e){return u.apply(this,arguments)}function u(){return(u=(0,r.default)(e.default.mark(function r(t){var n;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],t.scenes.forEach(function(e){e.traverse(function(e){Object.values(e.model.getUniforms()).forEach(function(e){!1===e.loaded&&n.push(e)})})}),e.next=4,a(function(){return n.some(function(e){return!e.loaded})});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},r)}))).apply(this,arguments)}function a(e){return s.apply(this,arguments)}function s(){return(s=(0,r.default)(e.default.mark(function r(t){return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t()){e.next=5;break}return e.next=3,new Promise(function(e){return requestAnimationFrame(e)});case 3:e.next=0;break;case 5:case"end":return e.stop()}},r)}))).apply(this,arguments)}
},{"@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk"}],"CmJS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="#version 300 es\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform mat4 sceneModelMatrix;\nuniform bool composeModelMatrix;\nin vec4 POSITION;\n\n#ifdef HAS_UV\n  in vec2 TEXCOORD_0;\n#endif\n\n#ifdef MODULE_PBR\n  #ifdef HAS_NORMALS\n    in vec4 NORMAL;\n  #endif\n#endif\nout vec4 vColor;\n#ifndef MODULE_PBR\n  #ifdef HAS_UV\n    out vec2 vTEXCOORD_0;\n  #endif\n#endif\nvoid main(void) {\n  #if defined(HAS_UV) && !defined(MODULE_PBR)\n    vTEXCOORD_0 = TEXCOORD_0;\n    geometry.uv = vTEXCOORD_0;\n  #endif\n\n  geometry.worldPosition = instancePositions;\n  geometry.pickingColor = instancePickingColors;\n\n  #ifdef MODULE_PBR\n    #ifdef HAS_NORMALS\n      pbr_vNormal = project_normal(instanceModelMatrix * (sceneModelMatrix * vec4(NORMAL.xyz, 0.0)).xyz);\n      geometry.normal = pbr_vNormal;\n    #endif\n\n    #ifdef HAS_UV\n      pbr_vUV = TEXCOORD_0;\n    #else\n      pbr_vUV = vec2(0., 0.);\n    #endif\n    geometry.uv = pbr_vUV;\n  #endif\n\n  float originalSize = project_size_to_pixel(sizeScale);\n  float clampedSize = clamp(originalSize, sizeMinPixels, sizeMaxPixels);\n\n  vec3 pos = (instanceModelMatrix * (sceneModelMatrix * POSITION).xyz) * sizeScale * (clampedSize / originalSize) + instanceTranslation;\n  if(composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, geometry.position);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  #ifdef MODULE_PBR\n    pbr_vPosition = geometry.position.xyz;\n  #endif\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n";exports.default=n;
},{}],"G1pV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="#version 300 es\nuniform float opacity;\nin vec4 vColor;\n\nout vec4 fragmentColor;\n#ifndef MODULE_PBR\n  #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n    in vec2 vTEXCOORD_0;\n    uniform sampler2D u_BaseColorSampler;\n  #endif\n#endif\n\nvoid main(void) {\n  #ifdef MODULE_PBR\n    fragmentColor = vColor * pbr_filterColor(vec4(0));\n    geometry.uv = pbr_vUV;\n  #else\n    #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n      fragmentColor = vColor * texture2D(u_BaseColorSampler, vTEXCOORD_0);\n      geometry.uv = vTEXCOORD_0;\n    #else\n      fragmentColor = vColor;\n    #endif\n  #endif\n\n  fragmentColor.a *= opacity;\n  DECKGL_FILTER_COLOR(fragmentColor, geometry);\n}\n";exports.default=e;
},{}],"NmB5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=d(require("@babel/runtime/helpers/esm/classCallCheck")),t=d(require("@babel/runtime/helpers/esm/createClass")),a=d(require("@babel/runtime/helpers/esm/get")),n=d(require("@babel/runtime/helpers/esm/inherits")),i=d(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),r=d(require("@babel/runtime/helpers/esm/getPrototypeOf")),s=d(require("@babel/runtime/helpers/esm/typeof")),o=require("@deck.gl/core"),l=require("@luma.gl/core"),u=require("@luma.gl/shadertools"),c=require("@luma.gl/experimental"),p=require("./gltf-utils"),h=require("../utils/matrix"),g=d(require("./scenegraph-layer-vertex.glsl")),f=d(require("./scenegraph-layer-fragment.glsl"));function d(e){return e&&e.__esModule?e:{default:e}}function m(e){var t=v();return function(){var a,n=(0,r.default)(e);if(t){var s=(0,r.default)(this).constructor;a=Reflect.construct(n,arguments,s)}else a=n.apply(this,arguments);return(0,i.default)(this,a)}}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var y=[255,255,255,255],b={scenegraph:{type:"object",value:null,async:!0},getScene:function(e){return e&&e.scenes?"object"===(0,s.default)(e.scene)?e.scene:e.scenes[e.scene||0]:e},getAnimator:function(e){return e&&e.animator},_animations:null,sizeScale:{type:"number",value:1,min:0},sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},getPosition:{type:"accessor",value:function(e){return e.position}},getColor:{type:"accessor",value:y},_lighting:"flat",_imageBasedLightingEnvironment:null,getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]}},_=function(i){(0,n.default)(d,i);var s=m(d);function d(){return(0,e.default)(this,d),s.apply(this,arguments)}return(0,t.default)(d,[{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),accessor:"getPosition",transition:!0},instanceColors:{type:5121,size:this.props.colorFormat.length,accessor:"getColor",normalized:!0,defaultValue:y,transition:!0},instanceModelMatrix:h.MATRIX_ATTRIBUTES})}},{key:"updateState",value:function(e){(0,a.default)((0,r.default)(d.prototype),"updateState",this).call(this,e);var t=e.props,n=e.oldProps;t.scenegraph!==n.scenegraph?this._updateScenegraph(t):t._animations!==n._animations&&this._applyAnimationsProp(this.state.scenegraph,this.state.animator,t._animations)}},{key:"finalizeState",value:function(){(0,a.default)((0,r.default)(d.prototype),"finalizeState",this).call(this),this._deleteScenegraph()}},{key:"_updateScenegraph",value:function(e){var t=this,a=this.context.gl,n=null;if(e.scenegraph instanceof c.ScenegraphNode)n={scenes:[e.scenegraph]};else if(e.scenegraph&&!e.scenegraph.gltf){var i=e.scenegraph,r=(0,c.createGLTFObjects)(a,i,this._getModelOptions());n=Object.assign({gltf:i},r),(0,p.waitForGLTFAssets)(r).then(function(){return t.setNeedsRedraw()})}else e.scenegraph&&(o.log.deprecated("ScenegraphLayer.props.scenegraph","Use GLTFLoader instead of GLTFScenegraphLoader")(),n=e.scenegraph);var s={layer:this,gl:a},l=e.getScene(n,s),u=e.getAnimator(n,s);l instanceof c.ScenegraphNode?(this._deleteScenegraph(),this._applyAllAttributes(l),this._applyAnimationsProp(l,u,e._animations),this.setState({scenegraph:l,animator:u})):null!==l&&o.log.warn("invalid scenegraph:",l)()}},{key:"_applyAllAttributes",value:function(e){var t=this;if(this.state.attributesAvailable){var a=this.getAttributeManager().getAttributes();e.traverse(function(e){t._setModelAttributes(e.model,a)})}}},{key:"_applyAnimationsProp",value:function(e,t,a){if(e&&t&&a){var n=t.getAnimations();Object.keys(a).sort().forEach(function(e){var t=a[e];if("*"===e)n.forEach(function(e){Object.assign(e,t)});else if(Number.isFinite(Number(e))){var i=Number(e);i>=0&&i<n.length?Object.assign(n[i],t):o.log.warn("animation ".concat(e," not found"))()}else{var r=n.find(function(t){return t.name===e});r?Object.assign(r,t):o.log.warn("animation ".concat(e," not found"))()}})}}},{key:"_deleteScenegraph",value:function(){var e=this.state.scenegraph;e instanceof c.ScenegraphNode&&e.delete()}},{key:"_getModelOptions",value:function(){var e=[o.project32,o.picking],t=this.props,a=t._lighting,n=t._imageBasedLightingEnvironment;"pbr"===a&&e.push(u.pbr);var i=null;return n&&(i="function"==typeof n?n({gl:this.context.gl,layer:this}):n),{gl:this.context.gl,waitForFullLoad:!0,imageBasedLightingEnvironment:i,modelOptions:{vs:g.default,fs:f.default,modules:e,isInstanced:!0,transpileToGLSL100:!(0,l.isWebGL2)(this.context.gl)},useTangents:!1}}},{key:"updateAttributes",value:function(e){var t=this;this.setState({attributesAvailable:!0}),this.state.scenegraph&&this.state.scenegraph.traverse(function(a){t._setModelAttributes(a.model,e)})}},{key:"draw",value:function(e){var t=e.moduleParameters,a=void 0===t?null:t,n=e.parameters,i=void 0===n?{}:n,r=e.context;if(this.state.scenegraph){this.props._animations&&this.state.animator&&(this.state.animator.animate(r.timeline.getTime()),this.setNeedsRedraw());var s=this.context.viewport,o=this.props,l=o.sizeScale,u=o.sizeMinPixels,c=o.sizeMaxPixels,p=o.opacity,g=o.coordinateSystem,f=this.getNumInstances();this.state.scenegraph.traverse(function(e,t){var n=t.worldMatrix;e.model.setInstanceCount(f),e.updateModuleSettings(a),e.draw({parameters:i,uniforms:{sizeScale:l,opacity:p,sizeMinPixels:u,sizeMaxPixels:c,composeModelMatrix:(0,h.shouldComposeModelMatrix)(s,g),sceneModelMatrix:n,u_Camera:e.model.getUniforms().project_uCameraPosition}})})}}}]),d}(o.Layer);exports.default=_,_.layerName="ScenegraphLayer",_.defaultProps=b;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/get":"KGqu","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/typeof":"zsbK","@deck.gl/core":"vvxL","@luma.gl/core":"iuAK","@luma.gl/shadertools":"Pzgo","@luma.gl/experimental":"dpaF","./gltf-utils":"ntZG","../utils/matrix":"WkxE","./scenegraph-layer-vertex.glsl":"CmJS","./scenegraph-layer-fragment.glsl":"G1pV"}],"cr8K":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"SimpleMeshLayer",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"ScenegraphLayer",{enumerable:!0,get:function(){return r.default}});var e=t(require("./simple-mesh-layer/simple-mesh-layer")),r=t(require("./scenegraph-layer/scenegraph-layer"));function t(e){return e&&e.__esModule?e:{default:e}}
},{"./simple-mesh-layer/simple-mesh-layer":"twBb","./scenegraph-layer/scenegraph-layer":"NmB5"}],"CQkp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=g(require("@babel/runtime/regenerator")),t=g(require("@babel/runtime/helpers/esm/defineProperty")),r=g(require("@babel/runtime/helpers/esm/asyncToGenerator")),i=g(require("@babel/runtime/helpers/esm/classCallCheck")),a=g(require("@babel/runtime/helpers/esm/createClass")),n=g(require("@babel/runtime/helpers/esm/inherits")),o=g(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),s=g(require("@babel/runtime/helpers/esm/getPrototypeOf")),l=require("math.gl"),u=require("@luma.gl/core"),c=require("@deck.gl/core"),d=require("@deck.gl/layers"),p=require("@deck.gl/mesh-layers"),h=require("@loaders.gl/core"),f=require("@loaders.gl/tiles"),y=require("@loaders.gl/3d-tiles");function g(e){return e&&e.__esModule?e:{default:e}}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function T(e){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?b(Object(i),!0).forEach(function(r){(0,t.default)(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):b(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function m(e){var t=v();return function(){var r,i=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;r=Reflect.construct(i,arguments,a)}else r=i.apply(this,arguments);return(0,o.default)(this,r)}}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var O=new l.Vector3,L={getPointColor:[0,0,0],pointSize:1,data:null,loadOptions:{},loader:y.Tiles3DLoader,onTilesetLoad:function(e){},onTileLoad:function(e){},onTileUnload:function(e){},onTileError:function(e,t,r){}},S=function(t){(0,n.default)(s,t);var o=m(s);function s(){return(0,i.default)(this,s),o.apply(this,arguments)}return(0,a.default)(s,[{key:"initializeState",value:function(){"onTileLoadFail"in this.props&&c.log.removed("onTileLoadFail","onTileError")(),this.state={layerMap:{},tileset3d:null}}},{key:"shouldUpdateState",value:function(e){return e.changeFlags.somethingChanged}},{key:"updateState",value:function(e){var t=e.props,r=e.oldProps,i=e.changeFlags;if(t.data&&t.data!==r.data&&this._loadTileset(t.data),i.viewportChanged){var a=this.state.tileset3d;this._updateTileset(a)}}},{key:"getPickingInfo",value:function(e){var t=e.info,r=e.sourceLayer,i=this.state.layerMap,a=r&&r.id;if(a){var n=a.substring(this.id.length+1),o=n.substring(n.indexOf("-")+1);t.object=i[o]&&i[o].tile}return t}},{key:"_loadTileset",value:function(){var t=(0,r.default)(e.default.mark(function t(r){var i,a,n,o,s,l,u;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.props,a=i.loader,n=i.loadOptions,o=T({},n),!a.preload){e.next=7;break}return e.next=5,a.preload(r,n);case 5:s=e.sent,Object.assign(o,s);case 7:return e.next=9,(0,h.load)(r,a,o);case 9:l=e.sent,u=new f.Tileset3D(l,T({onTileLoad:this._onTileLoad.bind(this),onTileUnload:this._onTileUnload.bind(this),onTileLoadFail:this.props.onTileError},o)),this.setState({tileset3d:u,layerMap:{}}),this._updateTileset(u),this.props.onTilesetLoad(u);case 14:case"end":return e.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"_onTileLoad",value:function(e){this.props.onTileLoad(e),this._updateTileset(this.state.tileset3d),this.setNeedsUpdate()}},{key:"_onTileUnload",value:function(e){delete this.state.layerMap[e.id],this.props.onTileUnload(e)}},{key:"_updateTileset",value:function(e){var t=this.context,r=t.timeline,i=t.viewport;if(r&&i&&e){var a=e.update(i);this.state.frameNumber!==a&&this.setState({frameNumber:a})}}},{key:"_create3DTileLayer",value:function(e){if(!e.content)return null;switch(e.type){case f.TILE_TYPE.POINTCLOUD:return this._createPointCloudTileLayer(e);case f.TILE_TYPE.SCENEGRAPH:return this._create3DModelTileLayer(e);case f.TILE_TYPE.MESH:return this._createSimpleMeshLayer(e);default:throw new Error("Tile3DLayer: Failed to render layer of type ".concat(e.content.type))}}},{key:"_createPointCloudTileLayer",value:function(e){var t=e.content,r=t.attributes,i=t.pointCount,a=t.constantRGBA,n=t.cartographicOrigin,o=t.modelMatrix,s=r.positions,l=r.normals,u=r.colors;if(!s)return null;var p=this.props,h=p.pointSize,f=p.getPointColor;return new(this.getSubLayerClass("pointcloud",d.PointCloudLayer))({pointSize:h},this.getSubLayerProps({id:"pointcloud"}),{id:"".concat(this.id,"-pointcloud-").concat(e.id),data:{header:{vertexCount:i},attributes:{POSITION:s,NORMAL:l,COLOR_0:u}},coordinateSystem:c.COORDINATE_SYSTEM.METER_OFFSETS,coordinateOrigin:n,modelMatrix:o,getColor:a||f})}},{key:"_create3DModelTileLayer",value:function(e){var t=e.content,r=t.gltf,i=t.instances,a=t.cartographicOrigin,n=t.modelMatrix;return new(this.getSubLayerClass("scenegraph",p.ScenegraphLayer))({_lighting:"pbr"},this.getSubLayerProps({id:"scenegraph"}),{id:"".concat(this.id,"-scenegraph-").concat(e.id),data:i||[{}],scenegraph:r,coordinateSystem:c.COORDINATE_SYSTEM.METER_OFFSETS,coordinateOrigin:a,modelMatrix:n,getTransformMatrix:function(e){return e.modelMatrix},getPosition:function(e){return[0,0,0]}})}},{key:"_createSimpleMeshLayer",value:function(e){for(var t=e.content,r=t.attributes,i=t.modelMatrix,a=t.cartographicOrigin,n=t.texture,o=r.normals,s=r.texCoords,l=new Float32Array(r.positions.value.length),d=0;d<l.length;d+=3)O.copy(r.positions.value.subarray(d,d+3)),l.set(O,d);var h=new u.Geometry({drawMode:4,attributes:{positions:l,normals:o,texCoords:s}});return new(this.getSubLayerClass("mesh",p.SimpleMeshLayer))(this.getSubLayerProps({id:"mesh"}),{id:"".concat(this.id,"-mesh-").concat(e.id),mesh:h,data:[{}],getPosition:[0,0,0],getColor:[255,255,255],texture:n,modelMatrix:i,coordinateOrigin:a,coordinateSystem:c.COORDINATE_SYSTEM.METER_OFFSETS})}},{key:"renderLayers",value:function(){var e=this,t=this.state,r=t.tileset3d,i=t.layerMap;return r?r.tiles.map(function(t){var r=i[t.id]&&i[t.id].layer;return t.selected?(r||(r=e._create3DTileLayer(t),i[t.id]={layer:r,tile:t}),r&&r.props&&!r.props.visible&&(r=r.clone({visible:!0}),i[t.id].layer=r),r):(r&&r.props&&r.props.visible&&(r=r.clone({visible:!1}),i[t.id].layer=r),r)}).filter(Boolean):null}}]),s}(c.CompositeLayer);exports.default=S,S.layerName="Tile3DLayer",S.defaultProps=L;
},{"@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/defineProperty":"iDM3","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","math.gl":"xAaq","@luma.gl/core":"iuAK","@deck.gl/core":"vvxL","@deck.gl/layers":"aWVN","@deck.gl/mesh-layers":"cr8K","@loaders.gl/core":"ikKD","@loaders.gl/tiles":"reP2","@loaders.gl/3d-tiles":"tzaM"}],"Zqsx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;class t{constructor(t=257){this.gridSize=t;const r=t-1;if(r&r-1)throw new Error(`Expected grid size to be 2^n+1, got ${t}.`);this.numTriangles=r*r*2-2,this.numParentTriangles=this.numTriangles-r*r,this.indices=new Uint32Array(this.gridSize*this.gridSize),this.coords=new Uint16Array(4*this.numTriangles);for(let s=0;s<this.numTriangles;s++){let t=s+2,i=0,e=0,n=0,o=0,a=0,h=0;for(1&t?n=o=a=r:i=e=h=r;(t>>=1)>1;){const r=i+n>>1,s=e+o>>1;1&t?(n=i,o=e,i=a,e=h):(i=n,e=o,n=a,o=h),a=r,h=s}const c=4*s;this.coords[c+0]=i,this.coords[c+1]=e,this.coords[c+2]=n,this.coords[c+3]=o}}createTile(t){return new r(t,this)}}exports.default=t;class r{constructor(t,r){const s=r.gridSize;if(t.length!==s*s)throw new Error(`Expected terrain data of length ${s*s} (${s} x ${s}), got ${t.length}.`);this.terrain=t,this.martini=r,this.errors=new Float32Array(t.length),this.update()}update(){const{numTriangles:t,numParentTriangles:r,coords:s,gridSize:i}=this.martini,{terrain:e,errors:n}=this;for(let o=t-1;o>=0;o--){const t=4*o,a=s[t+0],h=s[t+1],c=s[t+2],l=s[t+3],d=a+c>>1,g=h+l>>1,u=d+g-h,f=g+a-d,m=(e[h*i+a]+e[l*i+c])/2,w=g*i+d,M=Math.abs(m-e[w]);if(n[w]=Math.max(n[w],M),o<r){const t=(h+f>>1)*i+(a+u>>1),r=(l+f>>1)*i+(c+u>>1);n[w]=Math.max(n[w],n[t],n[r])}}}getMesh(t=0){const{gridSize:r,indices:s}=this.martini,{errors:i}=this;let e=0,n=0;const o=r-1;function a(o,h,c,l,d,g){const u=o+c>>1,f=h+l>>1;Math.abs(o-d)+Math.abs(h-g)>1&&i[f*r+u]>t?(a(d,g,o,h,u,f),a(c,l,d,g,u,f)):(s[h*r+o]=s[h*r+o]||++e,s[l*r+c]=s[l*r+c]||++e,s[g*r+d]=s[g*r+d]||++e,n++)}s.fill(0),a(0,0,o,o,o,0),a(o,o,0,0,0,o);const h=new Uint16Array(2*e),c=new Uint32Array(3*n);let l=0;function d(e,n,o,a,g,u){const f=e+o>>1,m=n+a>>1;if(Math.abs(e-g)+Math.abs(n-u)>1&&i[m*r+f]>t)d(g,u,e,n,f,m),d(o,a,g,u,f,m);else{const t=s[n*r+e]-1,i=s[a*r+o]-1,d=s[u*r+g]-1;h[2*t]=e,h[2*t+1]=n,h[2*i]=o,h[2*i+1]=a,h[2*d]=g,h[2*d+1]=u,c[l++]=t,c[l++]=i,c[l++]=d}}return d(0,0,o,o,o,0),d(o,o,0,0,0,o),{vertices:h,triangles:c}}}
},{}],"iQYZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=s;var e=u(require("@babel/runtime/regenerator")),r=u(require("@babel/runtime/helpers/esm/asyncToGenerator")),t=u(require("@babel/runtime/helpers/esm/slicedToArray")),a=u(require("@mapbox/martini")),n=require("@loaders.gl/loader-utils");function u(e){return e&&e.__esModule?e:{default:e}}function i(e,r,t){for(var a=t.rScaler,n=t.bScaler,u=t.gScaler,i=t.offset,o=r+1,l=new Float32Array(o*o),s=0,d=0;d<r;d++)for(var f=0;f<r;f++,s++){var c=4*s,v=e[c+0],p=e[c+1],b=e[c+2];l[s+d]=v*a+p*u+b*n+i}for(var g=o*(o-1),h=0;h<o-1;h++,g++)l[g]=l[g-o];for(var m=o-1,x=0;x<o;x++,m+=o)l[m]=l[m-1];return l}function o(e,r,a,n){for(var u=a+1,i=e.length/2,o=new Float32Array(3*i),l=new Float32Array(2*i),s=n||[0,0,a,a],d=(0,t.default)(s,4),f=d[0],c=d[1],v=d[2],p=d[3],b=(v-f)/a,g=(p-c)/a,h=0;h<i;h++){var m=e[2*h],x=e[2*h+1],y=x*u+m;o[3*h+0]=m*b+f,o[3*h+1]=-x*g+p,o[3*h+2]=r[y],l[2*h+0]=m/a,l[2*h+1]=x/a}return{POSITION:{value:o,size:3},TEXCOORD_0:{value:l,size:2}}}function l(e,r){if(null===e)return null;var t=r.meshMaxError,u=r.bounds,l=r.elevationDecoder,s=e.data,d=e.width,f=d+1,c=i(s,d,l),v=new a.default(f).createTile(c).getMesh(t),p=v.vertices,b=v.triangles,g=o(p,c,d,u);return{loaderData:{header:{}},header:{vertexCount:b.length,boundingBox:(0,n.getMeshBoundingBox)(g)},mode:4,indices:{value:b,size:1},attributes:g}}function s(e,r,t){return d.apply(this,arguments)}function d(){return(d=(0,r.default)(e.default.mark(function r(t,a,n){var u;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.image=a.image||{},a.image.type="data",e.next=4,n.parse(t,a,a.baseUri);case 4:return u=e.sent,e.abrupt("return",l(u,a.terrain));case 6:case"end":return e.stop()}},r)}))).apply(this,arguments)}
},{"@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","@babel/runtime/helpers/esm/slicedToArray":"TBeo","@mapbox/martini":"Zqsx","@loaders.gl/loader-utils":"oHIH"}],"UnS1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TerrainLoader=exports.TerrainWorkerLoader=void 0;var e=t(require("@babel/runtime/helpers/esm/defineProperty")),r=t(require("./lib/parse-terrain"));function t(e){return e&&e.__esModule?e:{default:e}}function o(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function n(r){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach(function(t){(0,e.default)(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))})}return r}var a="2.3.7",i={id:"terrain",name:"Terrain",version:a,extensions:["png","pngraw"],mimeTypes:["image/png"],options:{terrain:{bounds:null,workerUrl:"https://unpkg.com/@loaders.gl/terrain@".concat(a,"/dist/terrain-loader.worker.js"),meshMaxError:10,elevationDecoder:{rScaler:1,gScaler:0,bScaler:0,offset:0}}}};exports.TerrainWorkerLoader=i;var s=n(n({},i),{},{parse:r.default});exports.TerrainLoader=s;
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","./lib/parse-terrain":"iQYZ"}],"YbVI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=T,exports.DECODING_STEPS=void 0;var e=t(require("@babel/runtime/helpers/esm/slicedToArray"));function t(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=n(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,E=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return E=e.done,e},e:function(e){s=!0,o=e},f:function(){try{E||null==r.return||r.return()}finally{if(s)throw o}}}}function n(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var a=new Map([["centerX",Float64Array.BYTES_PER_ELEMENT],["centerY",Float64Array.BYTES_PER_ELEMENT],["centerZ",Float64Array.BYTES_PER_ELEMENT],["minHeight",Float32Array.BYTES_PER_ELEMENT],["maxHeight",Float32Array.BYTES_PER_ELEMENT],["boundingSphereCenterX",Float64Array.BYTES_PER_ELEMENT],["boundingSphereCenterY",Float64Array.BYTES_PER_ELEMENT],["boundingSphereCenterZ",Float64Array.BYTES_PER_ELEMENT],["boundingSphereRadius",Float64Array.BYTES_PER_ELEMENT],["horizonOcclusionPointX",Float64Array.BYTES_PER_ELEMENT],["horizonOcclusionPointY",Float64Array.BYTES_PER_ELEMENT],["horizonOcclusionPointZ",Float64Array.BYTES_PER_ELEMENT]]);function o(e){return e>>1^-(1&e)}function E(t){var n,i=0,o={},E=r(a);try{for(E.s();!(n=E.n()).done;){var s=(0,e.default)(n.value,2),c=s[0],u=s[1],d=8===u?t.getFloat64:t.getFloat32;o[c]=d.call(t,i,!0),i+=u}}catch(f){E.e(f)}finally{E.f()}return{header:o,headerEndPosition:i}}function s(e,t){var r=t,n=e.getUint32(r,!0),i=new Uint16Array(3*n);r+=Uint32Array.BYTES_PER_ELEMENT;for(var a=Uint16Array.BYTES_PER_ELEMENT,E=n*a,s=r,c=s+E,u=c+E,d=0,f=0,l=0,y=0;y<n;y++)d+=o(e.getUint16(s+a*y,!0)),f+=o(e.getUint16(c+a*y,!0)),l+=o(e.getUint16(u+a*y,!0)),i[y]=d,i[y+n]=f,i[y+2*n]=l;return{vertexData:i,vertexDataEndPosition:r+=3*E}}function c(e,t,r,n){var i,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(i=2===n?new Uint16Array(e,t,r):new Uint32Array(e,t,r),!a)return i;for(var o=0,E=0;E<i.length;++E){var s=i[E];i[E]=o-s,0===s&&++o}return i}function u(e,t,r){var n=r,i=t.length/3>65536?Uint32Array.BYTES_PER_ELEMENT:Uint16Array.BYTES_PER_ELEMENT;n%i!=0&&(n+=i-n%i);var a=e.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;var o=3*a,E=c(e.buffer,n,o,i);return{triangleIndicesEndPosition:n+=o*i,triangleIndices:E}}function d(e,t,r){var n=r,i=t.length/3>65536?Uint32Array.BYTES_PER_ELEMENT:Uint16Array.BYTES_PER_ELEMENT,a=e.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;var o=c(e.buffer,n,a,i,!1);n+=a*i;var E=e.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;var s=c(e.buffer,n,E,i,!1);n+=E*i;var u=e.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;var d=c(e.buffer,n,u,i,!1);n+=u*i;var f=e.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;var l=c(e.buffer,n,f,i,!1);return{edgeIndicesEndPosition:n+=f*i,westIndices:o,southIndices:s,eastIndices:d,northIndices:l}}function f(e){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}function l(e){return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}function y(e,t){var r={};if(e.byteLength<=t)return{extensions:r,extensionsEndPosition:t};for(var n=t;n<e.byteLength;){var i=e.getUint8(n,!0);n+=Uint8Array.BYTES_PER_ELEMENT;var a=e.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;var o=new DataView(e.buffer,n,a);switch(i){case 1:r.vertexNormals=f(o);break;case 2:r.waterMask=l(o)}n+=a}return{extensions:r,extensionsEndPosition:n}}var v={header:0,vertices:1,triangleIndices:2,edgeIndices:3,extensions:4};exports.DECODING_STEPS=v;var _={maxDecodingStep:v.extensions};function T(e,t){var r=Object.assign({},_,t),n=new DataView(e),i=E(n),a=i.header,o=i.headerEndPosition;if(r.maxDecodingStep<v.vertices)return{header:a};var c=s(n,o),f=c.vertexData,l=c.vertexDataEndPosition;if(r.maxDecodingStep<v.triangleIndices)return{header:a,vertexData:f};var T=u(n,f,l),g=T.triangleIndices,h=T.triangleIndicesEndPosition;if(r.maxDecodingStep<v.edgeIndices)return{header:a,vertexData:f,triangleIndices:g};var S=d(n,f,h),P=S.westIndices,A=S.southIndices,b=S.eastIndices,I=S.northIndices,M=S.edgeIndicesEndPosition;return r.maxDecodingStep<v.extensions?{header:a,vertexData:f,triangleIndices:g,westIndices:P,northIndices:I,eastIndices:b,southIndices:A}:{header:a,vertexData:f,triangleIndices:g,westIndices:P,northIndices:I,eastIndices:b,southIndices:A,extensions:y(n,M).extensions}}
},{"@babel/runtime/helpers/esm/slicedToArray":"TBeo"}],"eZbj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=l;var e=a(require("@babel/runtime/helpers/esm/slicedToArray")),r=require("@loaders.gl/loader-utils"),t=u(require("./decode-quantized-mesh"));function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n();if(r&&r.has(e))return r.get(e);var t={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=u?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(t,a,i):t[a]=e[a]}return t.default=e,r&&r.set(e,t),t}function a(e){return e&&e.__esModule?e:{default:e}}function i(r,t,n){for(var u=t.minHeight,a=t.maxHeight,i=n||[0,0,1,1],o=(0,e.default)(i,4),l=o[0],d=o[1],f=o[2]-l,s=o[3]-d,c=a-u,p=r.length/3,v=new Float32Array(3*p),g=new Float32Array(2*p),O=0;O<p;O++){var h=r[O]/32767,y=r[O+p]/32767,b=r[O+2*p]/32767;v[3*O+0]=h*f+l,v[3*O+1]=y*s+d,v[3*O+2]=b*c+u,g[2*O+0]=h,g[2*O+1]=y}return{POSITION:{value:v,size:3},TEXCOORD_0:{value:g,size:2}}}function o(e,n){if(!e)return null;var u=n.bounds,a=(0,t.default)(e,t.DECODING_STEPS.triangleIndices),o=a.header,l=a.vertexData,d=a.triangleIndices,f=i(l,o,u);return{loaderData:{header:{}},header:{vertexCount:d.length,boundingBox:(0,r.getMeshBoundingBox)(f)},mode:4,indices:{value:d,size:1},attributes:f}}function l(e,r){return o(e,r["quantized-mesh"])}
},{"@babel/runtime/helpers/esm/slicedToArray":"TBeo","@loaders.gl/loader-utils":"oHIH","./decode-quantized-mesh":"YbVI"}],"J2zm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.QuantizedMeshLoader=exports.QuantizedMeshWorkerLoader=void 0;var e=o(require("@babel/runtime/regenerator")),r=o(require("@babel/runtime/helpers/esm/asyncToGenerator")),t=o(require("@babel/runtime/helpers/esm/defineProperty")),n=o(require("./lib/parse-quantized-mesh"));function o(e){return e&&e.__esModule?e:{default:e}}function a(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function s(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?a(Object(n),!0).forEach(function(r){(0,t.default)(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var u="2.3.7",i={id:"quantized-mesh",name:"Quantized Mesh",version:u,extensions:["terrain"],mimeTypes:["application/vnd.quantized-mesh"],options:{"quantized-mesh":{workerUrl:"https://unpkg.com/@loaders.gl/terrain@".concat(u,"/dist/quantized-mesh-loader.worker.js"),bounds:[0,0,1,1]}}};exports.QuantizedMeshWorkerLoader=i;var c=s(s({},i),{},{parseSync:n.default,parse:function(){var t=(0,r.default)(e.default.mark(function r(t,o){return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,n.default)(t,o));case 1:case"end":return e.stop()}},r)}));return function(e,r){return t.apply(this,arguments)}}()});exports.QuantizedMeshLoader=c;
},{"@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","@babel/runtime/helpers/esm/defineProperty":"iDM3","./lib/parse-quantized-mesh":"eZbj"}],"x4ov":[function(require,module,exports) {
"use strict";function e(){var e=new Uint32Array([305419896]);return!(18===new Uint8Array(e.buffer,e.byteOffset,e.byteLength)[0])}Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseNPY=t;var r=e(),n={u1:Uint8Array,i1:Int8Array,u2:Uint16Array,i2:Int16Array,u4:Uint32Array,i4:Int32Array,f4:Float32Array,f8:Float64Array};function t(e,t){if(!e)return null;var i=a(new DataView(e)),f=i.header,o=i.headerEndOffset,s=f.descr,u=n[s.slice(1,3)];if(!u)return console.warn("Decoding of npy dtype not implemented: ".concat(s)),null;var c=f.shape.reduce(function(e,r){return e*r})*u.BYTES_PER_ELEMENT,l=new u(e.slice(o,o+c));return(">"===s[0]&&r||"<"===s[0]&&!r)&&console.warn("Data is wrong endianness, byte swapping not yet implemented."),{data:l,header:f}}function a(e){var r,n=e.getUint8(6),t=8;n>=2?(r=e.getUint32(8,!0),t+=4):(r=e.getUint16(8,!0),t+=2);var a=new TextDecoder(n<=2?"latin1":"utf-8"),i=new Uint8Array(e.buffer,t,r),f=a.decode(i);return t+=r,{header:JSON.parse(f.replace(/'/g,'"').replace("False","false").replace("(","[").replace(/,*\),*/g,"]")),headerEndOffset:t}}
},{}],"ZwP1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.NPYLoader=exports.NPYWorkerLoader=void 0;var e=o(require("@babel/runtime/regenerator")),r=o(require("@babel/runtime/helpers/esm/asyncToGenerator")),t=o(require("@babel/runtime/helpers/esm/defineProperty")),n=require("./lib/parse-npy");function o(e){return e&&e.__esModule?e:{default:e}}function s(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function a(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?s(Object(n),!0).forEach(function(r){(0,t.default)(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var p="2.3.7",u=new Uint8Array([147,78,85,77,80,89]),i={id:"npy",name:"NPY",version:p,extensions:["npy"],mimeTypes:[],tests:[u.buffer],options:{npy:{workerUrl:"https://unpkg.com/@loaders.gl/terrain@".concat(p,"/dist/npy-loader.worker.js")}}};exports.NPYWorkerLoader=i;var c=a(a({},i),{},{parseSync:n.parseNPY,parse:function(){var t=(0,r.default)(e.default.mark(function r(t,o){return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,n.parseNPY)(t,o));case 1:case"end":return e.stop()}},r)}));return function(e,r){return t.apply(this,arguments)}}()});exports.NPYLoader=c;
},{"@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","@babel/runtime/helpers/esm/defineProperty":"iDM3","./lib/parse-npy":"x4ov"}],"E6Gf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"TerrainLoader",{enumerable:!0,get:function(){return e.TerrainLoader}}),Object.defineProperty(exports,"TerrainWorkerLoader",{enumerable:!0,get:function(){return e.TerrainWorkerLoader}}),Object.defineProperty(exports,"QuantizedMeshLoader",{enumerable:!0,get:function(){return r.QuantizedMeshLoader}}),Object.defineProperty(exports,"QuantizedMeshWorkerLoader",{enumerable:!0,get:function(){return r.QuantizedMeshWorkerLoader}}),Object.defineProperty(exports,"_NPYLoader",{enumerable:!0,get:function(){return t.NPYLoader}}),Object.defineProperty(exports,"_NPYWorkerLoader",{enumerable:!0,get:function(){return t.NPYWorkerLoader}});var e=require("./terrain-loader"),r=require("./quantized-mesh-loader"),t=require("./npy-loader");
},{"./terrain-loader":"UnS1","./quantized-mesh-loader":"J2zm","./npy-loader":"ZwP1"}],"KqmQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=m(require("@babel/runtime/helpers/esm/toConsumableArray")),r=m(require("@babel/runtime/helpers/esm/slicedToArray")),t=m(require("@babel/runtime/helpers/esm/classCallCheck")),a=m(require("@babel/runtime/helpers/esm/createClass")),o=m(require("@babel/runtime/helpers/esm/inherits")),n=m(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),i=m(require("@babel/runtime/helpers/esm/getPrototypeOf")),l=m(require("@babel/runtime/helpers/esm/defineProperty")),u=require("@deck.gl/core"),s=require("@deck.gl/mesh-layers"),c=require("@loaders.gl/core"),d=require("@loaders.gl/terrain"),f=m(require("../tile-layer/tile-layer")),p=require("../tile-layer/utils");function m(e){return e&&e.__esModule?e:{default:e}}function h(e){var r=y();return function(){var t,a=(0,i.default)(e);if(r){var o=(0,i.default)(this).constructor;t=Reflect.construct(a,arguments,o)}else t=a.apply(this,arguments);return(0,n.default)(this,t)}}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function b(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,a)}return t}function v(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?b(Object(t),!0).forEach(function(r){(0,l.default)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):b(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var g=[1],x=v(v({},f.default.defaultProps),{},{elevationData:p.urlType,texture:p.urlType,meshMaxError:{type:"number",value:4},bounds:{type:"array",value:null,optional:!0,compare:!0},color:{type:"color",value:[255,255,255]},elevationDecoder:{type:"object",value:{rScaler:1,gScaler:0,bScaler:0,offset:0}},workerUrl:{type:"string",value:null},wireframe:!1,material:!0});function D(e){return Array.isArray(e)?e.join(";"):e}var w=function(n){(0,o.default)(l,n);var i=h(l);function l(){return(0,t.default)(this,l),i.apply(this,arguments)}return(0,a.default)(l,[{key:"updateState",value:function(e){var r=e.props,t=e.oldProps,a=r.elevationData!==t.elevationData;if(a){var o=r.elevationData,n=o&&(Array.isArray(o)||o.includes("{x}")&&o.includes("{y}"));this.setState({isTiled:n})}var i=a||r.meshMaxError!==t.meshMaxError||r.elevationDecoder!==t.elevationDecoder||r.bounds!==t.bounds;if(!this.state.isTiled&&i){var l=this.loadTerrain(r);this.setState({terrain:l})}}},{key:"loadTerrain",value:function(e){var r=e.elevationData,t=e.bounds,a=e.elevationDecoder,o=e.meshMaxError,n=e.workerUrl;if(!r)return null;var i={terrain:{bounds:t,meshMaxError:o,elevationDecoder:a}};return null!==n&&(i.terrain.workerUrl=n),(0,c.load)(r,d.TerrainLoader,i)}},{key:"getTiledTerrainData",value:function(e){var r=this.props,t=r.elevationData,a=r.texture,o=r.elevationDecoder,n=r.meshMaxError,i=r.workerUrl,l=(0,p.getURLFromTemplate)(t,e),s=(0,p.getURLFromTemplate)(a,e),d=e.bbox,f=e.z,m=new u.WebMercatorViewport({longitude:(d.west+d.east)/2,latitude:(d.north+d.south)/2,zoom:f}),h=m.projectFlat([d.west,d.south]),y=m.projectFlat([d.east,d.north]),b=[h[0],h[1],y[0],y[1]],v=this.loadTerrain({elevationData:l,bounds:b,elevationDecoder:o,meshMaxError:n,workerUrl:i}),g=s?(0,c.load)(s).catch(function(e){return null}):Promise.resolve(null);return Promise.all([v,g])}},{key:"renderSubLayers",value:function(e){var t=this.getSubLayerClass("mesh",s.SimpleMeshLayer),a=e.data,o=e.color;if(!a)return null;var n=(0,r.default)(a,2),i=n[0],l=n[1];return new t(e,{data:g,mesh:i,texture:l,coordinateSystem:u.COORDINATE_SYSTEM.CARTESIAN,getPosition:function(e){return[0,0,0]},getColor:o})}},{key:"onViewportLoad",value:function(r){if(r&&0!==r.length&&!r.every(function(e){return!e})){var t=this.state.zRange,a=r.filter(Boolean).map(function(e){return e[0].header.boundingBox.map(function(e){return e[2]})}),o=Math.min.apply(Math,(0,e.default)(a.map(function(e){return e[0]}))),n=Math.max.apply(Math,(0,e.default)(a.map(function(e){return e[1]})));(!t||o<t[0]||n>t[1])&&this.setState({zRange:[o,n]})}}},{key:"renderLayers",value:function(){var e=this.props,r=e.color,t=e.material,a=e.elevationData,o=e.texture,n=e.wireframe,i=e.meshMaxError,l=e.elevationDecoder,u=e.tileSize,c=e.maxZoom,d=e.minZoom,p=e.extent,m=e.maxRequests;return this.state.isTiled?new f.default(this.getSubLayerProps({id:"tiles"}),{wireframe:n,color:r,material:t,getTileData:this.getTiledTerrainData.bind(this),renderSubLayers:this.renderSubLayers.bind(this),updateTriggers:{getTileData:{elevationData:D(a),texture:D(o),meshMaxError:i,elevationDecoder:l}},onViewportLoad:this.onViewportLoad.bind(this),zRange:this.state.zRange||null,tileSize:u,maxZoom:c,minZoom:d,extent:p,maxRequests:m}):new(this.getSubLayerClass("mesh",s.SimpleMeshLayer))(this.getSubLayerProps({id:"mesh"}),{data:g,mesh:this.state.terrain,texture:o,_instanced:!1,getPosition:function(e){return[0,0,0]},getColor:r,material:t,wireframe:n})}}]),l}(u.CompositeLayer);exports.default=w,w.layerName="TerrainLayer",w.defaultProps=x;
},{"@babel/runtime/helpers/esm/toConsumableArray":"AdMH","@babel/runtime/helpers/esm/slicedToArray":"TBeo","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/defineProperty":"iDM3","@deck.gl/core":"vvxL","@deck.gl/mesh-layers":"cr8K","@loaders.gl/core":"ikKD","@loaders.gl/terrain":"E6Gf","../tile-layer/tile-layer":"zm0l","../tile-layer/utils":"WGBA"}],"KThR":[function(require,module,exports) {
"use strict";function t(t,n){this.x=t,this.y=n}module.exports=t,t.prototype={clone:function(){return new t(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,n){return this.clone()._rotateAround(t,n)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var n=t.x-this.x,i=t.y-this.y;return n*n+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,n){return Math.atan2(this.x*n-this.y*t,this.x*t+this.y*n)},_matMult:function(t){var n=t[0]*this.x+t[1]*this.y,i=t[2]*this.x+t[3]*this.y;return this.x=n,this.y=i,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var n=Math.cos(t),i=Math.sin(t),s=n*this.x-i*this.y,r=i*this.x+n*this.y;return this.x=s,this.y=r,this},_rotateAround:function(t,n){var i=Math.cos(t),s=Math.sin(t),r=n.x+i*(this.x-n.x)-s*(this.y-n.y),h=n.y+s*(this.x-n.x)+i*(this.y-n.y);return this.x=r,this.y=h,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},t.convert=function(n){return n instanceof t?n:Array.isArray(n)?new t(n[0],n[1]):n};
},{}],"FNML":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("@babel/runtime/helpers/esm/classCallCheck")),t=n(require("@babel/runtime/helpers/esm/createClass")),r=n(require("@mapbox/point-geometry"));function n(e){return e&&e.__esModule?e:{default:e}}var a=function(){function n(t,r,a,o,i){(0,e.default)(this,n),this.properties={},this.extent=a,this.type=0,this._pbf=t,this._geometry=-1,this._keys=o,this._values=i,t.readFields(s,this,r)}return(0,t.default)(n,null,[{key:"types",get:function(){return["Unknown","Point","LineString","Polygon"]}}]),(0,t.default)(n,[{key:"loadGeometry",value:function(){var e=this._pbf;e.pos=this._geometry;for(var t,n=e.readVarint()+e.pos,a=1,o=0,i=0,s=0,u=[];e.pos<n;){if(o<=0){var h=e.readVarint();a=7&h,o=h>>3}if(o--,1===a||2===a)i+=e.readSVarint(),s+=e.readSVarint(),1===a&&(t&&u.push(t),t=[]),t.push(new r.default(i,s));else{if(7!==a)throw new Error("unknown command ".concat(a));t&&t.push(t[0].clone())}}return t&&u.push(t),u}},{key:"bbox",value:function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,r=1,n=0,a=0,o=0,i=1/0,s=-1/0,u=1/0,h=-1/0;e.pos<t;){if(n<=0){var p=e.readVarint();r=7&p,n=p>>3}if(n--,1===r||2===r)(a+=e.readSVarint())<i&&(i=a),a>s&&(s=a),(o+=e.readSVarint())<u&&(u=o),o>h&&(h=o);else if(7!==r)throw new Error("unknown command ".concat(r))}return[i,u,s,h]}},{key:"toGeoJSON",value:function(e,t,r){var a,i,s=this.extent*Math.pow(2,r),u=this.extent*e,h=this.extent*t,p=this.loadGeometry(),l=n.types[this.type];function f(e){for(var t=0;t<e.length;t++){var r=e[t],n=180-360*(r.y+h)/s;e[t]=[360*(r.x+u)/s-180,360/Math.PI*Math.atan(Math.exp(n*Math.PI/180))-90]}}switch(this.type){case 1:var d=[];for(a=0;a<p.length;a++)d[a]=p[a][0];f(p=d);break;case 2:for(a=0;a<p.length;a++)f(p[a]);break;case 3:for(p=o(p),a=0;a<p.length;a++)for(i=0;i<p[a].length;i++)f(p[a][i])}return 1===p.length?p=p[0]:l="Multi".concat(l),{type:"Feature",geometry:{type:l,coordinates:p},properties:this.properties}}}]),n}();function o(e){var t=e.length;if(t<=1)return[e];for(var r,n,a=[],o=0;o<t;o++){var s=i(e[o]);0!==s&&(void 0===n&&(n=s<0),n===s<0?(r&&a.push(r),r=[e[o]]):r.push(e[o]))}return r&&a.push(r),a}function i(e){for(var t,r,n=0,a=0,o=e.length-1;a<e.length;o=a++)t=e[a],n+=((r=e[o]).x-t.x)*(t.y+r.y);return n}function s(e,t,r){1===e?t.id=r.readVarint():2===e?u(r,t):3===e?t.type=r.readVarint():4===e&&(t._geometry=r.pos)}function u(e,t){for(var r=e.readVarint()+e.pos;e.pos<r;){var n=t._keys[e.readVarint()],a=t._values[e.readVarint()];t.properties[n]=a}}exports.default=a;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@mapbox/point-geometry":"KThR"}],"wikG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("@babel/runtime/helpers/esm/classCallCheck")),t=s(require("@babel/runtime/helpers/esm/createClass")),r=s(require("./vector-tile-feature.js"));function s(e){return e&&e.__esModule?e:{default:e}}var a=function(){function s(t,r){(0,e.default)(this,s),this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(i,this,r),this.length=this._features.length}return(0,t.default)(s,[{key:"feature",value:function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new r.default(this._pbf,t,this.extent,this._keys,this._values)}}]),s}();function i(e,t,r){15===e?t.version=r.readVarint():1===e?t.name=r.readString():5===e?t.extent=r.readVarint():2===e?t._features.push(r.pos):3===e?t._keys.push(r.readString()):4===e&&t._values.push(n(r))}function n(e){for(var t=null,r=e.readVarint()+e.pos;e.pos<r;){var s=e.readVarint()>>3;t=1===s?e.readString():2===s?e.readFloat():3===s?e.readDouble():4===s?e.readVarint64():5===s?e.readVarint():6===s?e.readSVarint():7===s?e.readBoolean():null}return t}exports.default=a;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","./vector-tile-feature.js":"FNML"}],"HulJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("@babel/runtime/helpers/esm/classCallCheck")),r=t(require("./vector-tile-layer"));function t(e){return e&&e.__esModule?e:{default:e}}var a=function r(t,a){(0,e.default)(this,r),this.layers=t.readFields(l,{},a)};function l(e,t,a){if(3===e){var l=new r.default(a,a.readVarint()+a.pos);l.length&&(t[l.name]=l)}}exports.default=a;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","./vector-tile-layer":"wikG"}],"QVwH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.geojsonToBinary=i,exports.TEST_EXPORTS=void 0;var e=n(require("@babel/runtime/helpers/esm/toConsumableArray"));function n(e){return e&&e.__esModule?e:{default:e}}function o(e,n){var o;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(o=t(e))||n&&e&&"number"==typeof e.length){o&&(e=o);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return s=e.done,e},e:function(e){l=!0,a=e},f:function(){try{s||null==o.return||o.return()}finally{if(l)throw a}}}}function t(e,n){if(e){if("string"==typeof e)return r(e,n);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?r(e,n):void 0}}function r(e,n){(null==n||n>e.length)&&(n=e.length);for(var o=0,t=new Array(n);o<n;o++)t[o]=e[o];return t}function i(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=s(e);return l(e,o,{coordLength:n.coordLength||o.coordLength,numericPropKeys:n.numericPropKeys||o.numericPropKeys,PositionDataType:n.PositionDataType||Float32Array})}var a={firstPass:s,secondPass:l};function s(n){var t,r=0,i=0,a=0,s=0,l=0,u=0,p=0,c=0,y=0,f=new Set,d={},g=o(n);try{for(g.s();!(t=g.n()).done;){var v=t.value,h=v.geometry;switch(h.type){case"Point":i++,r++,f.add(h.coordinates.length);break;case"MultiPoint":i++,r+=h.coordinates.length;var P,I=o(h.coordinates);try{for(I.s();!(P=I.n()).done;){var w=P.value;f.add(w.length)}}catch(B){I.e(B)}finally{I.f()}break;case"LineString":l++,a+=h.coordinates.length,s++;var F,A=o(h.coordinates);try{for(A.s();!(F=A.n()).done;){var C=F.value;f.add(C.length)}}catch(B){A.e(B)}finally{A.f()}break;case"MultiLineString":l++;var U,S=o(h.coordinates);try{for(S.s();!(U=S.n()).done;){var k=U.value;a+=k.length,s++;var z,j=o(k);try{for(j.s();!(z=j.n()).done;){var M=z.value;f.add(M.length)}}catch(B){j.e(B)}finally{j.f()}}}catch(B){S.e(B)}finally{S.f()}break;case"Polygon":y++,p++,c+=h.coordinates.length,u+=b(h.coordinates).length;var O,T=o(b(h.coordinates));try{for(T.s();!(O=T.n()).done;){var L=O.value;f.add(L.length)}}catch(B){T.e(B)}finally{T.f()}break;case"MultiPolygon":y++;var E,R=o(h.coordinates);try{for(R.s();!(E=R.n()).done;){var x=E.value;p++,c+=x.length,u+=b(x).length;var _,K=o(b(x));try{for(K.s();!(_=K.n()).done;){var D=_.value;f.add(D.length)}}catch(B){K.e(B)}finally{K.f()}}}catch(B){R.e(B)}finally{R.f()}break;default:throw new Error("Unsupported geometry type: ".concat(h.type))}if(v.properties)for(var X in v.properties){var q=v.properties[X];d[X]=d[X]||void 0===d[X]?m(q):d[X]}}}catch(B){g.e(B)}finally{g.f()}return{pointPositionsCount:r,pointFeaturesCount:i,linePositionsCount:a,linePathsCount:s,lineFeaturesCount:l,coordLength:Math.max.apply(Math,(0,e.default)(f)),polygonPositionsCount:u,polygonObjectsCount:p,polygonRingsCount:c,polygonFeaturesCount:y,numericPropKeys:Object.keys(d).filter(function(e){return d[e]})}}function l(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.pointPositionsCount,i=n.pointFeaturesCount,a=n.linePositionsCount,s=n.linePathsCount,l=n.lineFeaturesCount,v=n.polygonPositionsCount,P=n.polygonObjectsCount,b=n.polygonRingsCount,m=n.polygonFeaturesCount,I=t.coordLength,w=t.numericPropKeys,F=t.PositionDataType,A=void 0===F?Float32Array:F,C=e.length>65535?Uint32Array:Uint16Array,U={positions:new A(r*I),globalFeatureIds:new C(r),featureIds:i>65535?new Uint32Array(r):new Uint16Array(r),numericProps:{},properties:[]},S={pathIndices:a>65535?new Uint32Array(s+1):new Uint16Array(s+1),positions:new A(a*I),globalFeatureIds:new C(a),featureIds:l>65535?new Uint32Array(a):new Uint16Array(a),numericProps:{},properties:[]},k={polygonIndices:v>65535?new Uint32Array(P+1):new Uint16Array(P+1),primitivePolygonIndices:v>65535?new Uint32Array(b+1):new Uint16Array(b+1),positions:new A(v*I),globalFeatureIds:new C(v),featureIds:m>65535?new Uint32Array(v):new Uint16Array(v),numericProps:{},properties:[]},z=0,j=[U,S,k];z<j.length;z++){var M,O=j[z],T=o(w);try{for(T.s();!(M=T.n()).done;){var L=M.value;O.numericProps[L]=new Float32Array(O.positions.length/I)}}catch(X){T.e(X)}finally{T.f()}}S.pathIndices[s]=a,k.polygonIndices[P]=v,k.primitivePolygonIndices[b]=v;var E,R={pointPosition:0,pointFeature:0,linePosition:0,linePath:0,lineFeature:0,polygonPosition:0,polygonObject:0,polygonRing:0,polygonFeature:0,feature:0},x=o(e);try{for(x.s();!(E=x.n()).done;){var _=E.value,K=_.geometry,D=_.properties;switch(K.type){case"Point":u(K.coordinates,U,R,I,D),U.properties.push(h(D,w)),R.pointFeature++;break;case"MultiPoint":p(K.coordinates,U,R,I,D),U.properties.push(h(D,w)),R.pointFeature++;break;case"LineString":c(K.coordinates,S,R,I,D),S.properties.push(h(D,w)),R.lineFeature++;break;case"MultiLineString":y(K.coordinates,S,R,I,D),S.properties.push(h(D,w)),R.lineFeature++;break;case"Polygon":f(K.coordinates,k,R,I,D),k.properties.push(h(D,w)),R.polygonFeature++;break;case"MultiPolygon":d(K.coordinates,k,R,I,D),k.properties.push(h(D,w)),R.polygonFeature++;break;default:throw new Error("Invalid geometry type")}R.feature++}}catch(X){x.e(X)}finally{x.f()}return g(U,S,k,I)}function u(e,n,o,t,r){n.positions.set(e,o.pointPosition*t),n.globalFeatureIds[o.pointPosition]=o.feature,n.featureIds[o.pointPosition]=o.pointFeature,v(n,r,o.pointPosition,1),o.pointPosition++}function p(e,n,t,r,i){var a,s=o(e);try{for(s.s();!(a=s.n()).done;){u(a.value,n,t,r,i)}}catch(l){s.e(l)}finally{s.f()}}function c(e,n,o,t,r){n.pathIndices[o.linePath]=o.linePosition,o.linePath++,P(n.positions,e,o.linePosition,t);var i=e.length;v(n,r,o.linePosition,i),n.globalFeatureIds.set(new Uint32Array(i).fill(o.feature),o.linePosition),n.featureIds.set(new Uint32Array(i).fill(o.lineFeature),o.linePosition),o.linePosition+=i}function y(e,n,t,r,i){var a,s=o(e);try{for(s.s();!(a=s.n()).done;){c(a.value,n,t,r,i)}}catch(l){s.e(l)}finally{s.f()}}function f(e,n,t,r,i){n.polygonIndices[t.polygonObject]=t.polygonPosition,t.polygonObject++;var a,s=o(e);try{for(s.s();!(a=s.n()).done;){var l=a.value;n.primitivePolygonIndices[t.polygonRing]=t.polygonPosition,t.polygonRing++,P(n.positions,l,t.polygonPosition,r);var u=l.length;v(n,i,t.polygonPosition,u),n.globalFeatureIds.set(new Uint32Array(u).fill(t.feature),t.polygonPosition),n.featureIds.set(new Uint32Array(u).fill(t.polygonFeature),t.polygonPosition),t.polygonPosition+=u}}catch(p){s.e(p)}finally{s.f()}}function d(e,n,t,r,i){var a,s=o(e);try{for(s.s();!(a=s.n()).done;){f(a.value,n,t,r,i)}}catch(l){s.e(l)}finally{s.f()}}function g(e,n,o,t){var r={points:{positions:{value:e.positions,size:t},globalFeatureIds:{value:e.globalFeatureIds,size:1},featureIds:{value:e.featureIds,size:1},numericProps:e.numericProps,properties:e.properties},lines:{pathIndices:{value:n.pathIndices,size:1},positions:{value:n.positions,size:t},globalFeatureIds:{value:n.globalFeatureIds,size:1},featureIds:{value:n.featureIds,size:1},numericProps:n.numericProps,properties:n.properties},polygons:{polygonIndices:{value:o.polygonIndices,size:1},primitivePolygonIndices:{value:o.primitivePolygonIndices,size:1},positions:{value:o.positions,size:t},globalFeatureIds:{value:o.globalFeatureIds,size:1},featureIds:{value:o.featureIds,size:1},numericProps:o.numericProps,properties:o.properties}};for(var i in r)for(var a in r[i].numericProps)r[i].numericProps[a]={value:r[i].numericProps[a],size:1};return r}function v(e,n,o,t){for(var r in e.numericProps)r in n&&e.numericProps[r].set(new Array(t).fill(n[r]),o)}function h(e,n){for(var o in e)n.includes(o)&&delete e[o];return e}function P(e,n,t,r){var i,a=t*r,s=o(n);try{for(s.s();!(i=s.n()).done;){var l=i.value;e.set(l,a),a+=r}}catch(u){s.e(u)}finally{s.f()}}function b(n){var o;return(o=[]).concat.apply(o,(0,e.default)(n))}function m(e){return Number.isFinite(e)}exports.TEST_EXPORTS=a;
},{"@babel/runtime/helpers/esm/toConsumableArray":"AdMH"}],"tGCd":[function(require,module,exports) {
"use strict";function e(e,n){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=t(e))||n&&e&&"number"==typeof e.length){r&&(e=r);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,a=!0,l=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,u=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw u}}}}function t(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function r(e,t,n){if("geometry"===n)return s(e);var r=o(e,t);switch(i(r)){case"Geometry":return s(r[0]);case"FeatureCollection":return u(r)}return null}function o(e,t){if(!Boolean(e.points||e.lines||e.polygons))return e.type=t||v(e),[e];var n=[];return e.points&&(e.points.type="Point",n.push(e.points)),e.lines&&(e.lines.type="LineString",n.push(e.lines)),e.polygons&&(e.polygons.type="Polygon",n.push(e.polygons)),n}function i(e){if(e.length>1)return"FeatureCollection";var t=e[0];return t.featureIds||t.globalFeatureIds||t.numericProps||t.properties?"FeatureCollection":"Geometry"}function u(t){var n,r=[],o=e(t);try{for(o.s();!(n=o.n()).done;){for(var i=n.value,u=0,l=i.featureIds.value[0],s=0;s<i.featureIds.value.length;s++){var c=i.featureIds.value[s];c!==l&&(r.push(a(i,u,s)),u=s,l=c)}r.push(a(i,u,i.featureIds.value.length))}}catch(f){o.e(f)}finally{o.f()}return r}function a(e,t,n){return{type:"Feature",geometry:s(e,t,n),properties:l(e,t,n)}}function l(e,t,n){var r=Object.assign(e.properties[e.featureIds.value[t]]);for(var o in e.numericProps)r[o]=e.numericProps[o].value[t];return r}function s(e,t,n){switch(e.type){case"Point":return p(e,t,n);case"LineString":return f(e,t,n);case"Polygon":return c(e,t,n);default:throw new Error("Unsupported geometry type: ".concat(e.type))}}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1/0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,r=e.positions,o=e.polygonIndices.value.filter(function(e){return e>=t&&e<=n}),i=e.primitivePolygonIndices.value.filter(function(e){return e>=t&&e<=n}),u=[];if(!(o.length>2)){for(var a=0;a<i.length-1;a++){var l=y(r,i[a],i[a+1]);u.push(l)}return{type:"Polygon",coordinates:u}}for(var s=0;s<o.length-1;s++){var f=c(e,o[s],o[s+1]).coordinates;u.push(f)}return{type:"MultiPolygon",coordinates:u}}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1/0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,r=e.positions,o=e.pathIndices.value.filter(function(e){return e>=t&&e<=n});if(!(o.length>2))return{type:"LineString",coordinates:y(r,o[0],o[1])};for(var i=[],u=0;u<o.length-1;u++){var a=y(r,o[u],o[u+1]);i.push(a)}return{type:"MultiLineString",coordinates:i}}function p(e,t,n){var r=y(e.positions,t,n);return r.length>1?{type:"MultiPoint",coordinates:r}:{type:"Point",coordinates:r[0]}}function y(e,t,n){t=t||0,n=n||e.value.length/e.size;for(var r=[],o=t;o<n;o++)r.push(Array.from(e.value.subarray(o*e.size,(o+1)*e.size)));return r}function v(e){return e.pathIndices?"LineString":e.polygonIndices?"Polygon":"Point"}Object.defineProperty(exports,"__esModule",{value:!0}),exports.binaryToGeoJson=r;
},{}],"DTH4":[function(require,module,exports) {
"use strict";function r(r,e){var n;if("undefined"==typeof Symbol||null==r[Symbol.iterator]){if(Array.isArray(r)||(n=t(r))||e&&r&&"number"==typeof r.length){n&&(r=n);var o=0,a=function(){};return{s:a,n:function(){return o>=r.length?{done:!0}:{done:!1,value:r[o++]}},e:function(r){throw r},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,f=!1;return{s:function(){n=r[Symbol.iterator]()},n:function(){var r=n.next();return u=r.done,r},e:function(r){f=!0,i=r},f:function(){try{u||null==n.return||n.return()}finally{if(f)throw i}}}}function t(r,t){if(r){if("string"==typeof r)return e(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);return"Object"===n&&r.constructor&&(n=r.constructor.name),"Map"===n||"Set"===n?Array.from(r):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e(r,t):void 0}}function e(r,t){(null==t||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}function n(r,t){for(var e=0,n=Object.values(r);e<n.length;e++)for(var o=n[e].positions,a=0;a<o.value.length;a+=o.size){var i=t(Array.from(o.value.subarray(a,a+o.size)));o.value.set(i,a)}return r}function o(t,e){var n,o=r(t);try{for(o.s();!(n=o.n()).done;){var i=n.value;i.geometry.coordinates=a(i.geometry.coordinates,e)}}catch(u){o.e(u)}finally{o.f()}return t}function a(r,t){return i(r)?t(r):r.map(function(r){return a(r,t)})}function i(r){return Number.isFinite(r[0])&&Number.isFinite(r[1])}Object.defineProperty(exports,"__esModule",{value:!0}),exports.transformBinaryCoords=n,exports.transformGeoJsonCoords=o;
},{}],"SrJt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"geojsonToBinary",{enumerable:!0,get:function(){return e.geojsonToBinary}}),Object.defineProperty(exports,"binaryToGeoJson",{enumerable:!0,get:function(){return r.binaryToGeoJson}}),Object.defineProperty(exports,"transformBinaryCoords",{enumerable:!0,get:function(){return o.transformBinaryCoords}}),Object.defineProperty(exports,"transformGeoJsonCoords",{enumerable:!0,get:function(){return o.transformGeoJsonCoords}});var e=require("./lib/geojson-to-binary"),r=require("./lib/binary-to-geojson"),o=require("./lib/transform");
},{"./lib/geojson-to-binary":"QVwH","./lib/binary-to-geojson":"tGCd","./lib/transform":"DTH4"}],"UzHN":[function(require,module,exports) {
"use strict";module.exports=i;var t=require("ieee754");function i(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}i.Varint=0,i.Fixed64=1,i.Bytes=2,i.Fixed32=5;var e=4294967296,r=1/e,s=12,n="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function o(t,i,e){var r,s,n=e.buf;if(r=(112&(s=n[e.pos++]))>>4,s<128)return a(t,r,i);if(r|=(127&(s=n[e.pos++]))<<3,s<128)return a(t,r,i);if(r|=(127&(s=n[e.pos++]))<<10,s<128)return a(t,r,i);if(r|=(127&(s=n[e.pos++]))<<17,s<128)return a(t,r,i);if(r|=(127&(s=n[e.pos++]))<<24,s<128)return a(t,r,i);if(r|=(1&(s=n[e.pos++]))<<31,s<128)return a(t,r,i);throw new Error("Expected varint not more than 10 bytes")}function h(t){return t.type===i.Bytes?t.readVarint()+t.pos:t.pos+1}function a(t,i,e){return e?4294967296*i+(t>>>0):4294967296*(i>>>0)+(t>>>0)}function u(t,i){var e,r;if(t>=0?(e=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(e=~(-t%4294967296))?e=e+1|0:(e=0,r=r+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");i.realloc(10),f(e,r,i),d(r,i)}function f(t,i,e){e.buf[e.pos++]=127&t|128,t>>>=7,e.buf[e.pos++]=127&t|128,t>>>=7,e.buf[e.pos++]=127&t|128,t>>>=7,e.buf[e.pos++]=127&t|128,t>>>=7,e.buf[e.pos]=127&t}function d(t,i){var e=(7&t)<<4;i.buf[i.pos++]|=e|((t>>>=3)?128:0),t&&(i.buf[i.pos++]=127&t|((t>>>=7)?128:0),t&&(i.buf[i.pos++]=127&t|((t>>>=7)?128:0),t&&(i.buf[i.pos++]=127&t|((t>>>=7)?128:0),t&&(i.buf[i.pos++]=127&t|((t>>>=7)?128:0),t&&(i.buf[i.pos++]=127&t)))))}function p(t,i,e){var r=i<=16383?1:i<=2097151?2:i<=268435455?3:Math.floor(Math.log(i)/(7*Math.LN2));e.realloc(r);for(var s=e.pos-1;s>=t;s--)e.buf[s+r]=e.buf[s]}function l(t,i){for(var e=0;e<t.length;e++)i.writeVarint(t[e])}function c(t,i){for(var e=0;e<t.length;e++)i.writeSVarint(t[e])}function w(t,i){for(var e=0;e<t.length;e++)i.writeFloat(t[e])}function F(t,i){for(var e=0;e<t.length;e++)i.writeDouble(t[e])}function g(t,i){for(var e=0;e<t.length;e++)i.writeBoolean(t[e])}function b(t,i){for(var e=0;e<t.length;e++)i.writeFixed32(t[e])}function x(t,i){for(var e=0;e<t.length;e++)i.writeSFixed32(t[e])}function v(t,i){for(var e=0;e<t.length;e++)i.writeFixed64(t[e])}function y(t,i){for(var e=0;e<t.length;e++)i.writeSFixed64(t[e])}function V(t,i){return(t[i]|t[i+1]<<8|t[i+2]<<16)+16777216*t[i+3]}function S(t,i,e){t[e]=i,t[e+1]=i>>>8,t[e+2]=i>>>16,t[e+3]=i>>>24}function B(t,i){return(t[i]|t[i+1]<<8|t[i+2]<<16)+(t[i+3]<<24)}function k(t,i,e){for(var r="",s=i;s<e;){var n,o,h,a=t[s],u=null,f=a>239?4:a>223?3:a>191?2:1;if(s+f>e)break;1===f?a<128&&(u=a):2===f?128==(192&(n=t[s+1]))&&(u=(31&a)<<6|63&n)<=127&&(u=null):3===f?(n=t[s+1],o=t[s+2],128==(192&n)&&128==(192&o)&&((u=(15&a)<<12|(63&n)<<6|63&o)<=2047||u>=55296&&u<=57343)&&(u=null)):4===f&&(n=t[s+1],o=t[s+2],h=t[s+3],128==(192&n)&&128==(192&o)&&128==(192&h)&&((u=(15&a)<<18|(63&n)<<12|(63&o)<<6|63&h)<=65535||u>=1114112)&&(u=null)),null===u?(u=65533,f=1):u>65535&&(u-=65536,r+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),r+=String.fromCharCode(u),s+=f}return r}function M(t,i,e){return n.decode(t.subarray(i,e))}function P(t,i,e){for(var r,s,n=0;n<i.length;n++){if((r=i.charCodeAt(n))>55295&&r<57344){if(!s){r>56319||n+1===i.length?(t[e++]=239,t[e++]=191,t[e++]=189):s=r;continue}if(r<56320){t[e++]=239,t[e++]=191,t[e++]=189,s=r;continue}r=s-55296<<10|r-56320|65536,s=null}else s&&(t[e++]=239,t[e++]=191,t[e++]=189,s=null);r<128?t[e++]=r:(r<2048?t[e++]=r>>6|192:(r<65536?t[e++]=r>>12|224:(t[e++]=r>>18|240,t[e++]=r>>12&63|128),t[e++]=r>>6&63|128),t[e++]=63&r|128)}return e}i.prototype={destroy:function(){this.buf=null},readFields:function(t,i,e){for(e=e||this.length;this.pos<e;){var r=this.readVarint(),s=r>>3,n=this.pos;this.type=7&r,t(s,i,this),this.pos===n&&this.skip(r)}return i},readMessage:function(t,i){return this.readFields(t,i,this.readVarint()+this.pos)},readFixed32:function(){var t=V(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=B(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=V(this.buf,this.pos)+V(this.buf,this.pos+4)*e;return this.pos+=8,t},readSFixed64:function(){var t=V(this.buf,this.pos)+B(this.buf,this.pos+4)*e;return this.pos+=8,t},readFloat:function(){var i=t.read(this.buf,this.pos,!0,23,4);return this.pos+=4,i},readDouble:function(){var i=t.read(this.buf,this.pos,!0,52,8);return this.pos+=8,i},readVarint:function(t){var i,e,r=this.buf;return i=127&(e=r[this.pos++]),e<128?i:(i|=(127&(e=r[this.pos++]))<<7,e<128?i:(i|=(127&(e=r[this.pos++]))<<14,e<128?i:(i|=(127&(e=r[this.pos++]))<<21,e<128?i:o(i|=(15&(e=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,i=this.pos;return this.pos=t,t-i>=s&&n?M(this.buf,i,t):k(this.buf,i,t)},readBytes:function(){var t=this.readVarint()+this.pos,i=this.buf.subarray(this.pos,t);return this.pos=t,i},readPackedVarint:function(t,e){if(this.type!==i.Bytes)return t.push(this.readVarint(e));var r=h(this);for(t=t||[];this.pos<r;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==i.Bytes)return t.push(this.readSVarint());var e=h(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==i.Bytes)return t.push(this.readBoolean());var e=h(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==i.Bytes)return t.push(this.readFloat());var e=h(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==i.Bytes)return t.push(this.readDouble());var e=h(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==i.Bytes)return t.push(this.readFixed32());var e=h(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==i.Bytes)return t.push(this.readSFixed32());var e=h(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==i.Bytes)return t.push(this.readFixed64());var e=h(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==i.Bytes)return t.push(this.readSFixed64());var e=h(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===i.Varint)for(;this.buf[this.pos++]>127;);else if(e===i.Bytes)this.pos=this.readVarint()+this.pos;else if(e===i.Fixed32)this.pos+=4;else{if(e!==i.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,i){this.writeVarint(t<<3|i)},realloc:function(t){for(var i=this.length||16;i<this.pos+t;)i*=2;if(i!==this.length){var e=new Uint8Array(i);e.set(this.buf),this.buf=e,this.length=i}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),S(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),S(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),S(this.buf,-1&t,this.pos),S(this.buf,Math.floor(t*r),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),S(this.buf,-1&t,this.pos),S(this.buf,Math.floor(t*r),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?u(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var i=this.pos;this.pos=P(this.buf,t,this.pos);var e=this.pos-i;e>=128&&p(i,e,this),this.pos=i-1,this.writeVarint(e),this.pos+=e},writeFloat:function(i){this.realloc(4),t.write(this.buf,i,this.pos,!0,23,4),this.pos+=4},writeDouble:function(i){this.realloc(8),t.write(this.buf,i,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var i=t.length;this.writeVarint(i),this.realloc(i);for(var e=0;e<i;e++)this.buf[this.pos++]=t[e]},writeRawMessage:function(t,i){this.pos++;var e=this.pos;t(i,this);var r=this.pos-e;r>=128&&p(e,r,this),this.pos=e-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,r){this.writeTag(t,i.Bytes),this.writeRawMessage(e,r)},writePackedVarint:function(t,i){i.length&&this.writeMessage(t,l,i)},writePackedSVarint:function(t,i){i.length&&this.writeMessage(t,c,i)},writePackedBoolean:function(t,i){i.length&&this.writeMessage(t,g,i)},writePackedFloat:function(t,i){i.length&&this.writeMessage(t,w,i)},writePackedDouble:function(t,i){i.length&&this.writeMessage(t,F,i)},writePackedFixed32:function(t,i){i.length&&this.writeMessage(t,b,i)},writePackedSFixed32:function(t,i){i.length&&this.writeMessage(t,x,i)},writePackedFixed64:function(t,i){i.length&&this.writeMessage(t,v,i)},writePackedSFixed64:function(t,i){i.length&&this.writeMessage(t,y,i)},writeBytesField:function(t,e){this.writeTag(t,i.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,i.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,i.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,i.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,i){this.writeVarintField(t,Boolean(i))}};
},{"ieee754":"iism"}],"bboB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.transformToLocalCoordinates=e,exports.transformCoordinates=t;var r=["Unknown","Point","LineString","Polygon"];function e(r,e){for(var t=0;t<r.length;t++){var n=r[t];r[t]=[n.x/e.extent,n.y/e.extent]}}function t(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(r,e){return r},a=r[e.type],i=e.loadGeometry();switch(e.type){case 1:for(var s=[],u=0;u<i.length;u++)s[u]=i[u][0];t(i=s,e);break;case 2:for(var f=0;f<i.length;f++)t(i[f],e);break;case 3:i=o(i);for(var v=0;v<i.length;v++)for(var c=0;c<i[v].length;c++)t(i[v][c],e)}return n(a,e,i)}function n(r,e,t){var n=r;1===t.length?t=t[0]:n="Multi".concat(r);var o={type:"Feature",geometry:{type:n,coordinates:t},properties:e.properties||{}};return"id"in e&&(o.id=e.id),o}function o(r){var e=r.length;if(e<=1)return[r];for(var t,n,o=[],i=0;i<e;i++){var s=a(r[i]);0!==s&&(void 0===n&&(n=s<0),n===s<0?(t&&o.push(t),t=[r[i]]):t&&t.push(r[i]))}return t&&o.push(t),o}function a(r){for(var e,t,n=r.length,o=0,a=0,i=n-1;a<n;i=a++)e=r[a],o+=((t=r[i]).x-e.x)*(e.y+t.y);return o}
},{}],"qsL9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=l;var e=i(require("@babel/runtime/helpers/esm/defineProperty")),r=i(require("./mapbox-vector-tile/vector-tile")),t=require("@loaders.gl/gis"),n=i(require("pbf")),o=require("./transform-to-local-range");function i(e){return e&&e.__esModule?e:{default:e}}function a(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function s(r){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){(0,e.default)(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))})}return r}function l(e,o){if((o=o||{}).mvt=o.mvt||{},o.gis=o.gis||{},0===e.byteLength)return[];var i=new r.default(new n.default(e)),a=o.mvt,l=[];if((Array.isArray(a.layers)?a.layers:Object.keys(i.layers)).forEach(function(e){var r=i.layers[e],t=s(s({},a),{},{layerName:e});if(r)for(var n=0;n<r.length;n++){var o=u(r.feature(n),t);l.push(o)}}),"binary"===o.gis.format){var c=(0,t.geojsonToBinary)(l);return c.byteLength=e.byteLength,c}return l}function u(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t="wgs84"===r.coordinates,n=r.tileIndex&&Number.isFinite(r.tileIndex.x)&&Number.isFinite(r.tileIndex.y)&&Number.isFinite(r.tileIndex.z);if(t&&!n)throw new Error("MVT Loader: WGS84 coordinates need tileIndex property. Check documentation.");var i=t&&n?e.toGeoJSON(r.tileIndex.x,r.tileIndex.y,r.tileIndex.z):(0,o.transformCoordinates)(e,o.transformToLocalCoordinates);return r.layerProperty&&(i.properties[r.layerProperty]=r.layerName),i}
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","./mapbox-vector-tile/vector-tile":"HulJ","@loaders.gl/gis":"SrJt","pbf":"UzHN","./transform-to-local-range":"bboB"}],"MzBC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MVTLoader=exports.MVTWorkerLoader=void 0;var e=n(require("@babel/runtime/regenerator")),r=n(require("@babel/runtime/helpers/esm/asyncToGenerator")),t=n(require("@babel/runtime/helpers/esm/defineProperty")),o=n(require("./lib/parse-mvt"));function n(e){return e&&e.__esModule?e:{default:e}}function a(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function s(e){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?a(Object(o),!0).forEach(function(r){(0,t.default)(e,r,o[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(o,r))})}return e}var u="2.3.7",i={id:"mvt",name:"Mapbox Vector Tile",version:u,extensions:["mvt"],mimeTypes:["application/x-protobuf"],category:"geometry",options:{mvt:{coordinates:"local",layerProperty:"layerName",layers:null,tileIndex:null,_format:"geojson",workerUrl:"https://unpkg.com/@loaders.gl/mvt@".concat(u,"/dist/mvt-loader.worker.js")}}};exports.MVTWorkerLoader=i;var c=s(s({},i),{},{parse:function(){var t=(0,r.default)(e.default.mark(function r(t,n){return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.default)(t,n));case 1:case"end":return e.stop()}},r)}));return function(e,r){return t.apply(this,arguments)}}(),parseSync:o.default,binary:!0});exports.MVTLoader=c;
},{"@babel/runtime/regenerator":"m4eR","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","@babel/runtime/helpers/esm/defineProperty":"iDM3","./lib/parse-mvt":"qsL9"}],"yuTX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"MVTLoader",{enumerable:!0,get:function(){return e.MVTLoader}});var e=require("./mvt-loader");
},{"./mvt-loader":"MzBC"}],"IeJZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("@babel/runtime/helpers/esm/classCallCheck")),i=r(require("@babel/runtime/helpers/esm/createClass")),t=r(require("@babel/runtime/helpers/esm/inherits")),n=r(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),s=r(require("@babel/runtime/helpers/esm/getPrototypeOf")),o=require("@deck.gl/core");function r(e){return e&&e.__esModule?e:{default:e}}function c(e){var i=l();return function(){var t,o=(0,s.default)(e);if(i){var r=(0,s.default)(this).constructor;t=Reflect.construct(o,arguments,r)}else t=o.apply(this,arguments);return(0,n.default)(this,t)}}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var u={clipBounds:[0,0,1,1]},a="\nuniform vec4 clip_bounds;\n\nbool clip_isInBounds(vec2 position) {\n  return position.x >= clip_bounds[0] && position.y >= clip_bounds[1] && position.x < clip_bounds[2] && position.y < clip_bounds[3];\n}\n",p={name:"clip-vs",vs:a},f={"vs:#decl":"\nvarying float clip_isVisible;\n","vs:DECKGL_FILTER_GL_POSITION":"\n  clip_isVisible = float(clip_isInBounds(geometry.worldPosition.xy));\n","fs:#decl":"\nvarying float clip_isVisible;\n","fs:DECKGL_FILTER_COLOR":"\n  if (clip_isVisible < 0.5) discard;\n"},d={name:"clip-fs",fs:a},m={"vs:#decl":"\nvarying vec2 clip_commonPosition;\n","vs:DECKGL_FILTER_GL_POSITION":"\n  clip_commonPosition = geometry.position.xy;\n","fs:#decl":"\nvarying vec2 clip_commonPosition;\n","fs:DECKGL_FILTER_COLOR":"\n  if (!clip_isInBounds(clip_commonPosition)) discard;\n"},_=function(n){(0,t.default)(o,n);var s=c(o);function o(){return(0,e.default)(this,o),s.apply(this,arguments)}return(0,i.default)(o,[{key:"getShaders",value:function(){var e="instancePositions"in this.getAttributeManager().attributes;return"clipByInstance"in this.props&&(e=this.props.clipByInstance),this.state.clipByInstance=e,e?{modules:[p],inject:f}:{modules:[d],inject:m}}},{key:"draw",value:function(e){var i=e.uniforms,t=this.props.clipBounds,n=void 0===t?u.clipBounds:t;if(this.state.clipByInstance)i.clip_bounds=n;else{var s=this.projectPosition([n[0],n[1],0]),o=this.projectPosition([n[2],n[3],0]);i.clip_bounds=[Math.min(s[0],o[0]),Math.min(s[1],o[1]),Math.max(s[0],o[0]),Math.max(s[1],o[1])]}}}]),o}(o.LayerExtension);exports.default=_,_.extensionName="ClipExtension",_.defaultProps=u;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@deck.gl/core":"vvxL"}],"Fg8B":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=y(require("@babel/runtime/helpers/esm/toConsumableArray")),t=y(require("@babel/runtime/helpers/esm/defineProperty")),r=y(require("@babel/runtime/helpers/esm/classCallCheck")),i=y(require("@babel/runtime/helpers/esm/createClass")),n=y(require("@babel/runtime/helpers/esm/get")),u=y(require("@babel/runtime/helpers/esm/inherits")),o=y(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),a=y(require("@babel/runtime/helpers/esm/getPrototypeOf")),l=require("math.gl"),s=require("@loaders.gl/mvt"),c=require("@loaders.gl/core"),f=require("@deck.gl/core"),d=y(require("../tile-layer/tile-layer")),p=require("../tile-layer/utils"),h=y(require("./clip-extension"));function y(e){return e&&e.__esModule?e:{default:e}}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function v(e){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?b(Object(i),!0).forEach(function(r){(0,t.default)(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):b(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function g(e){var t=m();return function(){var r,i=(0,a.default)(e);if(t){var n=(0,a.default)(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return(0,o.default)(this,r)}}function m(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var O=512,q={uniqueIdProperty:{type:"string",value:""},highlightedFeatureId:null},x=function(t){(0,u.default)(d,t);var o=g(d);function d(){return(0,r.default)(this,d),o.apply(this,arguments)}return(0,i.default)(d,[{key:"getTileData",value:function(e){var t=(0,p.getURLFromTemplate)(this.props.data,e);if(!t)return Promise.reject("Invalid URL");var r=this.getLoadOptions();return r=v(v({},r),{},{mvt:v(v({},r&&r.mvt),{},{coordinates:this.context.viewport.resolution?"wgs84":"local",tileIndex:{x:e.x,y:e.y,z:e.z}})}),(0,c.load)(t,s.MVTLoader,r)}},{key:"renderSubLayers",value:function(t){var r=t.tile,i=Math.pow(2,r.z),u=O/i,o=-u,s=O*r.x/i,c=O*(1-r.y/i),p=(new l.Matrix4).scale([u,o,1]);return t.autoHighlight=!1,this.context.viewport.resolution||(t.modelMatrix=p,t.coordinateOrigin=[s,c,0],t.coordinateSystem=f.COORDINATE_SYSTEM.CARTESIAN,t.extensions=[].concat((0,e.default)(t.extensions||[]),[new h.default])),(0,n.default)((0,a.default)(d.prototype),"renderSubLayers",this).call(this,t)}},{key:"onHover",value:function(e,t){var r=this.props,i=r.uniqueIdProperty;if(r.autoHighlight){var u,o=this.state.hoveredFeatureId,l=e.object;l&&(u=P(l,i)),o!==u&&this.setState({hoveredFeatureId:u})}return(0,n.default)((0,a.default)(d.prototype),"onHover",this).call(this,e,t)}},{key:"getHighlightedObjectIndex",value:function(e){var t=this.state.hoveredFeatureId,r=this.props,i=r.uniqueIdProperty,n=r.highlightedFeatureId,u=e.data;if(!(j(t)||j(n))||!Array.isArray(u))return-1;var o=j(n)?n:t;return u.findIndex(function(e){return P(e,i)===o})}}]),d}(d.default);function P(e,t){return t?e.properties[t]:"id"in e?e.id:-1}function j(e){return null!=e&&""!==e}exports.default=x,x.layerName="MVTLayer",x.defaultProps=q;
},{"@babel/runtime/helpers/esm/toConsumableArray":"AdMH","@babel/runtime/helpers/esm/defineProperty":"iDM3","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/get":"KGqu","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","math.gl":"xAaq","@loaders.gl/mvt":"yuTX","@loaders.gl/core":"ikKD","@deck.gl/core":"vvxL","../tile-layer/tile-layer":"zm0l","../tile-layer/utils":"WGBA","./clip-extension":"IeJZ"}],"Yy5F":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"GreatCircleLayer",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"S2Layer",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"TileLayer",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"TripsLayer",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"H3ClusterLayer",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"H3HexagonLayer",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"Tile3DLayer",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"TerrainLayer",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"MVTLayer",{enumerable:!0,get:function(){return y.default}});var e=o(require("./great-circle-layer/great-circle-layer")),r=o(require("./s2-layer/s2-layer")),t=o(require("./tile-layer/tile-layer")),a=o(require("./trips-layer/trips-layer")),n=o(require("./h3-layers/h3-cluster-layer")),u=o(require("./h3-layers/h3-hexagon-layer")),l=o(require("./tile-3d-layer/tile-3d-layer")),i=o(require("./terrain-layer/terrain-layer")),y=o(require("./mvt-layer/mvt-layer"));function o(e){return e&&e.__esModule?e:{default:e}}
},{"./great-circle-layer/great-circle-layer":"t17F","./s2-layer/s2-layer":"kpkx","./tile-layer/tile-layer":"zm0l","./trips-layer/trips-layer":"C2Js","./h3-layers/h3-cluster-layer":"F9v1","./h3-layers/h3-hexagon-layer":"nlUI","./tile-3d-layer/tile-3d-layer":"CQkp","./terrain-layer/terrain-layer":"KqmQ","./mvt-layer/mvt-layer":"Fg8B"}],"Focm":[function(require,module,exports) {
"use strict";var e=l(require("react")),t=require("react-dom"),r=i(require("@deck.gl/react")),n=require("@loaders.gl/3d-tiles"),o=require("@deck.gl/geo-layers"),a=require("@deck.gl/layers");function i(e){return e&&e.__esModule?e:{default:e}}function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function l(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach(function(t){s(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e,t){return m(e)||g(e,t)||p(e,t)||y()}function y(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(e,t){if(e){if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(e,t):void 0}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function g(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(l){o=!0,a=l}finally{try{n||null==u.return||u.return()}finally{if(o)throw a}}return r}}function m(e){if(Array.isArray(e))return e}var O={longitude:138.014232,latitude:34.774984,zoom:13,pitch:0,bearing:0};function j(){var t=d((0,e.useState)(O),2),i=t[0],u=t[1],l=new o.Tile3DLayer({id:"tile-3d-layer",data:"https://tiles.smellman.org/kakegawa/ept-tileset/tileset.json",loader:n.Tiles3DLoader,onTilesetLoad:function(e){var t=e.cartographicCenter,r=e.zoom;u(f(f({},O),{},{longitude:t[0],latitude:t[1],zoom:r}))}}),c=new o.TileLayer({id:"gsi-std",data:"https://cyberjapandata.gsi.go.jp/xyz/std/{z}/{x}/{y}.png",minZoom:0,maxZoom:18,renderSubLayers:function(e){var t=e.tile.bbox,r=t.west,n=t.south,o=t.east,i=t.north;return new a.BitmapLayer(e,{data:null,image:e.data,bounds:[r,n,o,i]})}});return e.default.createElement(r.default,{initialViewState:i,layers:[l,c],controller:!0})}(0,t.render)(e.default.createElement(j,null),document.body.appendChild(document.createElement("div")));
},{"react":"HdMw","react-dom":"X9zx","@deck.gl/react":"e2Xp","@loaders.gl/3d-tiles":"tzaM","@deck.gl/geo-layers":"Yy5F","@deck.gl/layers":"aWVN"}]},{},["Focm"], null)
//# sourceMappingURL=/deckgl-tile3dlayer/deckgl-tile3dlayer.4d13de99.js.map